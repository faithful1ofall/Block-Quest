const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/basic-B6XQjn9W.js","assets/index-BKqd_baH.js","assets/w3m-modal-DTuskpo5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a$(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var u1={exports:{}},gd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e3;function o$(){if(e3)return gd;e3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,i,r){var c=null;if(r!==void 0&&(c=""+r),i.key!==void 0&&(c=""+i.key),"key"in i){r={};for(var l in i)l!=="key"&&(r[l]=i[l])}else r=i;return i=r.ref,{$$typeof:t,type:s,key:c,ref:i!==void 0?i:null,props:r}}return gd.Fragment=e,gd.jsx=n,gd.jsxs=n,gd}var t3;function c$(){return t3||(t3=1,u1.exports=o$()),u1.exports}var G=c$(),f1={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n3;function l$(){if(n3)return He;n3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function y(j){return j===null||typeof j!="object"?null:(j=m&&j[m]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function C(j,X,Z){this.props=j,this.context=X,this.refs=E,this.updater=Z||w}C.prototype.isReactComponent={},C.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function T(){}T.prototype=C.prototype;function N(j,X,Z){this.props=j,this.context=X,this.refs=E,this.updater=Z||w}var I=N.prototype=new T;I.constructor=N,v(I,C.prototype),I.isPureReactComponent=!0;var S=Array.isArray;function A(){}var _={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function O(j,X,Z){var ee=Z.ref;return{$$typeof:t,type:j,key:X,ref:ee!==void 0?ee:null,props:Z}}function P(j,X){return O(j.type,X,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function L(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return X[Z]})}var H=/\/+/g;function q(j,X){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):X.toString(36)}function $(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(A,A):(j.status="pending",j.then(function(X){j.status==="pending"&&(j.status="fulfilled",j.value=X)},function(X){j.status==="pending"&&(j.status="rejected",j.reason=X)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function R(j,X,Z,ee,ae){var oe=typeof j;(oe==="undefined"||oe==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(oe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case t:case e:be=!0;break;case h:return be=j._init,R(be(j._payload),X,Z,ee,ae)}}if(be)return ae=ae(j),be=ee===""?"."+q(j,0):ee,S(ae)?(Z="",be!=null&&(Z=be.replace(H,"$&/")+"/"),R(ae,X,Z,"",function(We){return We})):ae!=null&&(U(ae)&&(ae=P(ae,Z+(ae.key==null||j&&j.key===ae.key?"":(""+ae.key).replace(H,"$&/")+"/")+be)),X.push(ae)),1;be=0;var Ae=ee===""?".":ee+":";if(S(j))for(var Ne=0;Ne<j.length;Ne++)ee=j[Ne],oe=Ae+q(ee,Ne),be+=R(ee,X,Z,oe,ae);else if(Ne=y(j),typeof Ne=="function")for(j=Ne.call(j),Ne=0;!(ee=j.next()).done;)ee=ee.value,oe=Ae+q(ee,Ne++),be+=R(ee,X,Z,oe,ae);else if(oe==="object"){if(typeof j.then=="function")return R($(j),X,Z,ee,ae);throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return be}function k(j,X,Z){if(j==null)return j;var ee=[],ae=0;return R(j,ee,"","",function(oe){return X.call(Z,oe,ae++)}),ee}function F(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var K=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},W={map:k,forEach:function(j,X,Z){k(j,function(){X.apply(this,arguments)},Z)},count:function(j){var X=0;return k(j,function(){X++}),X},toArray:function(j){return k(j,function(X){return X})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return He.Activity=g,He.Children=W,He.Component=C,He.Fragment=n,He.Profiler=i,He.PureComponent=N,He.StrictMode=s,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,He.__COMPILER_RUNTIME={__proto__:null,c:function(j){return _.H.useMemoCache(j)}},He.cache=function(j){return function(){return j.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(j,X,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=v({},j.props),ae=j.key;if(X!=null)for(oe in X.key!==void 0&&(ae=""+X.key),X)!D.call(X,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&X.ref===void 0||(ee[oe]=X[oe]);var oe=arguments.length-2;if(oe===1)ee.children=Z;else if(1<oe){for(var be=Array(oe),Ae=0;Ae<oe;Ae++)be[Ae]=arguments[Ae+2];ee.children=be}return O(j.type,ae,ee)},He.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},He.createElement=function(j,X,Z){var ee,ae={},oe=null;if(X!=null)for(ee in X.key!==void 0&&(oe=""+X.key),X)D.call(X,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ae[ee]=X[ee]);var be=arguments.length-2;if(be===1)ae.children=Z;else if(1<be){for(var Ae=Array(be),Ne=0;Ne<be;Ne++)Ae[Ne]=arguments[Ne+2];ae.children=Ae}if(j&&j.defaultProps)for(ee in be=j.defaultProps,be)ae[ee]===void 0&&(ae[ee]=be[ee]);return O(j,oe,ae)},He.createRef=function(){return{current:null}},He.forwardRef=function(j){return{$$typeof:l,render:j}},He.isValidElement=U,He.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:F}},He.memo=function(j,X){return{$$typeof:d,type:j,compare:X===void 0?null:X}},He.startTransition=function(j){var X=_.T,Z={};_.T=Z;try{var ee=j(),ae=_.S;ae!==null&&ae(Z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(A,K)}catch(oe){K(oe)}finally{X!==null&&Z.types!==null&&(X.types=Z.types),_.T=X}},He.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},He.use=function(j){return _.H.use(j)},He.useActionState=function(j,X,Z){return _.H.useActionState(j,X,Z)},He.useCallback=function(j,X){return _.H.useCallback(j,X)},He.useContext=function(j){return _.H.useContext(j)},He.useDebugValue=function(){},He.useDeferredValue=function(j,X){return _.H.useDeferredValue(j,X)},He.useEffect=function(j,X){return _.H.useEffect(j,X)},He.useEffectEvent=function(j){return _.H.useEffectEvent(j)},He.useId=function(){return _.H.useId()},He.useImperativeHandle=function(j,X,Z){return _.H.useImperativeHandle(j,X,Z)},He.useInsertionEffect=function(j,X){return _.H.useInsertionEffect(j,X)},He.useLayoutEffect=function(j,X){return _.H.useLayoutEffect(j,X)},He.useMemo=function(j,X){return _.H.useMemo(j,X)},He.useOptimistic=function(j,X){return _.H.useOptimistic(j,X)},He.useReducer=function(j,X,Z){return _.H.useReducer(j,X,Z)},He.useRef=function(j){return _.H.useRef(j)},He.useState=function(j){return _.H.useState(j)},He.useSyncExternalStore=function(j,X,Z){return _.H.useSyncExternalStore(j,X,Z)},He.useTransition=function(){return _.H.useTransition()},He.version="19.2.0",He}var s3;function O2(){return s3||(s3=1,f1.exports=l$()),f1.exports}var pe=O2();const Ta=sf(pe);var d1={exports:{}},md={},h1={exports:{}},p1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i3;function u$(){return i3||(i3=1,(function(t){function e(R,k){var F=R.length;R.push(k);e:for(;0<F;){var K=F-1>>>1,W=R[K];if(0<i(W,k))R[K]=k,R[F]=W,F=K;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var k=R[0],F=R.pop();if(F!==k){R[0]=F;e:for(var K=0,W=R.length,j=W>>>1;K<j;){var X=2*(K+1)-1,Z=R[X],ee=X+1,ae=R[ee];if(0>i(Z,F))ee<W&&0>i(ae,Z)?(R[K]=ae,R[ee]=F,K=ee):(R[K]=Z,R[X]=F,K=X);else if(ee<W&&0>i(ae,F))R[K]=ae,R[ee]=F,K=ee;else break e}}return k}function i(R,k){var F=R.sortIndex-k.sortIndex;return F!==0?F:R.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var f=[],d=[],h=1,g=null,m=3,y=!1,w=!1,v=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(R){for(var k=n(d);k!==null;){if(k.callback===null)s(d);else if(k.startTime<=R)s(d),k.sortIndex=k.expirationTime,e(f,k);else break;k=n(d)}}function S(R){if(v=!1,I(R),!w)if(n(f)!==null)w=!0,A||(A=!0,L());else{var k=n(d);k!==null&&$(S,k.startTime-R)}}var A=!1,_=-1,D=5,O=-1;function P(){return E?!0:!(t.unstable_now()-O<D)}function U(){if(E=!1,A){var R=t.unstable_now();O=R;var k=!0;try{e:{w=!1,v&&(v=!1,T(_),_=-1),y=!0;var F=m;try{t:{for(I(R),g=n(f);g!==null&&!(g.expirationTime>R&&P());){var K=g.callback;if(typeof K=="function"){g.callback=null,m=g.priorityLevel;var W=K(g.expirationTime<=R);if(R=t.unstable_now(),typeof W=="function"){g.callback=W,I(R),k=!0;break t}g===n(f)&&s(f),I(R)}else s(f);g=n(f)}if(g!==null)k=!0;else{var j=n(d);j!==null&&$(S,j.startTime-R),k=!1}}break e}finally{g=null,m=F,y=!1}k=void 0}}finally{k?L():A=!1}}}var L;if(typeof N=="function")L=function(){N(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=U,L=function(){q.postMessage(null)}}else L=function(){C(U,0)};function $(R,k){_=C(function(){R(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var F=m;m=k;try{return R()}finally{m=F}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(R,k){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=m;m=R;try{return k()}finally{m=F}},t.unstable_scheduleCallback=function(R,k,F){var K=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,R={id:h++,callback:k,priorityLevel:R,startTime:F,expirationTime:W,sortIndex:-1},F>K?(R.sortIndex=F,e(d,R),n(f)===null&&R===n(d)&&(v?(T(_),_=-1):v=!0,$(S,F-K))):(R.sortIndex=W,e(f,R),w||y||(w=!0,A||(A=!0,L()))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var k=m;return function(){var F=m;m=k;try{return R.apply(this,arguments)}finally{m=F}}}})(p1)),p1}var r3;function f$(){return r3||(r3=1,h1.exports=u$()),h1.exports}var g1={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function d$(){if(a3)return Wn;a3=1;var t=O2();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(f,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:h}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wn.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(f,d,null,h)},Wn.flushSync=function(f){var d=c.T,h=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=d,s.p=h,s.d.f()}},Wn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},Wn.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Wn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,g=l(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):h==="script"&&s.d.X(f,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Wn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},Wn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=l(h,d.crossOrigin);s.d.L(f,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Wn.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=l(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},Wn.requestFormReset=function(f){s.d.r(f)},Wn.unstable_batchedUpdates=function(f,d){return f(d)},Wn.useFormState=function(f,d,h){return c.H.useFormState(f,d,h)},Wn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Wn.version="19.2.0",Wn}var o3;function h$(){if(o3)return g1.exports;o3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),g1.exports=d$(),g1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c3;function p$(){if(c3)return md;c3=1;var t=f$(),e=O2(),n=h$();function s(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function l(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(r(a)!==a)throw Error(s(188))}function d(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(s(188));return o!==a?null:a}for(var u=a,p=o;;){var b=u.return;if(b===null)break;var x=b.alternate;if(x===null){if(p=b.return,p!==null){u=p;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===u)return f(b),a;if(x===p)return f(b),o;x=x.sibling}throw Error(s(188))}if(u.return!==p.return)u=b,p=x;else{for(var M=!1,B=b.child;B;){if(B===u){M=!0,u=b,p=x;break}if(B===p){M=!0,p=b,u=x;break}B=B.sibling}if(!M){for(B=x.child;B;){if(B===u){M=!0,u=x,p=b;break}if(B===p){M=!0,p=x,u=b;break}B=B.sibling}if(!M)throw Error(s(189))}}if(u.alternate!==p)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function q(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case S:return"Suspense";case A:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case N:return a.displayName||"Context";case T:return(a._context.displayName||"Context")+".Consumer";case I:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case _:return o=a.displayName||null,o!==null?o:q(a.type)||"Memo";case D:o=a._payload,a=a._init;try{return q(a(o))}catch{}}return null}var $=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},K=[],W=-1;function j(a){return{current:a}}function X(a){0>W||(a.current=K[W],K[W]=null,W--)}function Z(a,o){W++,K[W]=a.current,a.current=o}var ee=j(null),ae=j(null),oe=j(null),be=j(null);function Ae(a,o){switch(Z(oe,o),Z(ae,a),Z(ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?SA(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=SA(o),a=CA(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(ee),Z(ee,a)}function Ne(){X(ee),X(ae),X(oe)}function We(a){a.memoizedState!==null&&Z(be,a);var o=ee.current,u=CA(o,a.type);o!==u&&(Z(ae,a),Z(ee,u))}function Qe(a){ae.current===a&&(X(ee),X(ae)),be.current===a&&(X(be),fd._currentValue=F)}var xt,ki;function cn(a){if(xt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);xt=o&&o[1]||"",ki=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+a+ki}var ii=!1;function ri(a,o){if(!a||ii)return"";ii=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(re){var ie=re}Reflect.construct(a,[],ue)}else{try{ue.call()}catch(re){ie=re}a.call(ue.prototype)}}else{try{throw Error()}catch(re){ie=re}(ue=a())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),M=x[0],B=x[1];if(M&&B){var Y=M.split(`
`),ne=B.split(`
`);for(b=p=0;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;for(;b<ne.length&&!ne[b].includes("DetermineComponentFrameRoot");)b++;if(p===Y.length||b===ne.length)for(p=Y.length-1,b=ne.length-1;1<=p&&0<=b&&Y[p]!==ne[b];)b--;for(;1<=p&&0<=b;p--,b--)if(Y[p]!==ne[b]){if(p!==1||b!==1)do if(p--,b--,0>b||Y[p]!==ne[b]){var ce=`
`+Y[p].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=p&&0<=b);break}}}finally{ii=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?cn(u):""}function qr(a,o){switch(a.tag){case 26:case 27:case 5:return cn(a.type);case 16:return cn("Lazy");case 13:return a.child!==o&&o!==null?cn("Suspense Fallback"):cn("Suspense");case 19:return cn("SuspenseList");case 0:case 15:return ri(a.type,!1);case 11:return ri(a.type.render,!1);case 1:return ri(a.type,!0);case 31:return cn("Activity");default:return""}}function or(a){try{var o="",u=null;do o+=qr(a,u),u=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var yn=Object.prototype.hasOwnProperty,fs=t.unstable_scheduleCallback,ns=t.unstable_cancelCallback,cr=t.unstable_shouldYield,lr=t.unstable_requestPaint,St=t.unstable_now,ai=t.unstable_getCurrentPriorityLevel,oi=t.unstable_ImmediatePriority,Wr=t.unstable_UserBlockingPriority,Bi=t.unstable_NormalPriority,ji=t.unstable_LowPriority,zi=t.unstable_IdlePriority,sy=t.log,iy=t.unstable_setDisableYieldValue,Zo=null,Fn=null;function ur(a){if(typeof sy=="function"&&iy(a),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(Zo,a)}catch{}}var ss=Math.clz32?Math.clz32:vf,wf=Math.log,Jo=Math.LN2;function vf(a){return a>>>=0,a===0?32:31-(wf(a)/Jo|0)|0}var ka=256,Ba=262144,fr=4194304;function Kr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function yl(a,o,u){var p=a.pendingLanes;if(p===0)return 0;var b=0,x=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var B=p&134217727;return B!==0?(p=B&~x,p!==0?b=Kr(p):(M&=B,M!==0?b=Kr(M):u||(u=B&~a,u!==0&&(b=Kr(u))))):(B=p&~x,B!==0?b=Kr(B):M!==0?b=Kr(M):u||(u=p&~a,u!==0&&(b=Kr(u)))),b===0?0:o!==0&&o!==b&&(o&x)===0&&(x=b&-b,u=o&-o,x>=u||x===32&&(u&4194048)!==0)?o:b}function ec(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ry(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tp(){var a=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),a}function wl(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function ja(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Gr(a,o,u,p,b,x){var M=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var B=a.entanglements,Y=a.expirationTimes,ne=a.hiddenUpdates;for(u=M&~u;0<u;){var ce=31-ss(u),ue=1<<ce;B[ce]=0,Y[ce]=-1;var ie=ne[ce];if(ie!==null)for(ne[ce]=null,ce=0;ce<ie.length;ce++){var re=ie[ce];re!==null&&(re.lane&=-536870913)}u&=~ue}p!==0&&Ip(a,p,0),x!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=x&~(M&~o))}function Ip(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-ss(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|u&261930}function Dp(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var p=31-ss(u),b=1<<p;b&o|a[p]&o&&(a[p]|=o),u&=~b}}function _p(a,o){var u=o&-o;return u=(u&42)!==0?1:bf(u),(u&(a.suspendedLanes|o))!==0?0:u}function bf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ef(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ci(){var a=k.p;return a!==0?a:(a=window.event,a===void 0?32:KA(a.type))}function Op(a,o){var u=k.p;try{return k.p=a,o()}finally{k.p=u}}var dr=Math.random().toString(36).slice(2),ln="__reactFiber$"+dr,Vn="__reactProps$"+dr,za="__reactContainer$"+dr,hr="__reactEvents$"+dr,ay="__reactListeners$"+dr,oy="__reactHandles$"+dr,Mp="__reactResources$"+dr,tc="__reactMarker$"+dr;function xf(a){delete a[ln],delete a[Vn],delete a[hr],delete a[ay],delete a[oy]}function Us(a){var o=a[ln];if(o)return o;for(var u=a.parentNode;u;){if(o=u[za]||u[ln]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=OA(a);a!==null;){if(u=a[ln])return u;a=OA(a)}return o}a=u,u=a.parentNode}return null}function Ha(a){if(a=a[ln]||a[za]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function nc(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(s(33))}function Fa(a){var o=a[Mp];return o||(o=a[Mp]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Jt(a){a[tc]=!0}var Rp=new Set,Pp={};function pr(a,o){Hi(a,o),Hi(a+"Capture",o)}function Hi(a,o){for(Pp[a]=o,a=0;a<o.length;a++)Rp.add(o[a])}var cy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},$p={};function ly(a){return yn.call($p,a)?!0:yn.call(vl,a)?!1:cy.test(a)?$p[a]=!0:(vl[a]=!0,!1)}function bl(a,o,u){if(ly(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function El(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function Fi(a,o,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+p)}}function ds(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function xl(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function uy(a,o,u){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,x=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return b.call(this)},set:function(M){u=""+M,x.call(this,M)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Sf(a){if(!a._valueTracker){var o=xl(a)?"checked":"value";a._valueTracker=uy(a,o,""+a[o])}}function Up(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return a&&(p=xl(a)?a.checked?"true":"false":a.value),a=p,a!==u?(o.setValue(a),!0):!1}function Sl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var fy=/[\n"\\]/g;function hs(a){return a.replace(fy,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Cf(a,o,u,p,b,x,M,B){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),o!=null?M==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+ds(o)):a.value!==""+ds(o)&&(a.value=""+ds(o)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),o!=null?Nf(a,M,ds(o)):u!=null?Nf(a,M,ds(u)):p!=null&&a.removeAttribute("value"),b==null&&x!=null&&(a.defaultChecked=!!x),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.name=""+ds(B):a.removeAttribute("name")}function Af(a,o,u,p,b,x,M,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||o!=null)){Sf(a);return}u=u!=null?""+ds(u):"",o=o!=null?""+ds(o):u,B||o===a.value||(a.value=o),a.defaultValue=o}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=B?a.checked:!!p,a.defaultChecked=!!p,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M),Sf(a)}function Nf(a,o,u){o==="number"&&Sl(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Va(a,o,u,p){if(a=a.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<a.length;u++)b=o.hasOwnProperty("$"+a[u].value),a[u].selected!==b&&(a[u].selected=b),b&&p&&(a[u].defaultSelected=!0)}else{for(u=""+ds(u),o=null,b=0;b<a.length;b++){if(a[b].value===u){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}o!==null||a[b].disabled||(o=a[b])}o!==null&&(o.selected=!0)}}function sc(a,o,u){if(o!=null&&(o=""+ds(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+ds(u):""}function Yr(a,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(s(92));if($(p)){if(1<p.length)throw Error(s(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=ds(o),a.defaultValue=u,p=a.textContent,p===u&&p!==""&&p!==null&&(a.value=p),Sf(a)}function Xr(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(a,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,u):typeof u!="number"||u===0||Qr.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function kp(a,o,u){if(o!=null&&typeof o!="object")throw Error(s(62));if(a=a.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var b in o)p=o[b],o.hasOwnProperty(b)&&u[b]!==p&&Lp(a,b,p)}else for(var x in o)o.hasOwnProperty(x)&&Lp(a,x,o[x])}function Tf(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cl(a){return hy.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function li(){}var Vi=null;function If(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zr=null,qa=null;function Al(a){var o=Ha(a);if(o&&(a=o.stateNode)){var u=a[Vn]||null;e:switch(a=o.stateNode,o.type){case"input":if(Cf(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+hs(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==a&&p.form===a.form){var b=p[Vn]||null;if(!b)throw Error(s(90));Cf(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===a.form&&Up(p)}break e;case"textarea":sc(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Va(a,!!u.multiple,o,!1)}}}var Nl=!1;function Bp(a,o,u){if(Nl)return a(o,u);Nl=!0;try{var p=a(o);return p}finally{if(Nl=!1,(Zr!==null||qa!==null)&&(xg(),Zr&&(o=Zr,a=qa,qa=Zr=null,Al(o),a)))for(o=0;o<a.length;o++)Al(a[o])}}function ic(a,o){var u=a.stateNode;if(u===null)return null;var p=u[Vn]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=!1;if(ui)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Df=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Df=!1}var mr=null,rc=null,Tl=null;function jp(){if(Tl)return Tl;var a,o=rc,u=o.length,p,b="value"in mr?mr.value:mr.textContent,x=b.length;for(a=0;a<u&&o[a]===b[a];a++);var M=u-a;for(p=1;p<=M&&o[u-p]===b[x-p];p++);return Tl=b.slice(a,1<p?1-p:void 0)}function z(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function se(){return!0}function fe(){return!1}function xe(a){function o(u,p,b,x,M){this._reactName=u,this._targetInst=b,this.type=p,this.nativeEvent=x,this.target=M,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(u=a[B],this[B]=u?u(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?se:fe,this.isPropagationStopped=fe,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),o}var Pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=xe(Pt),is=g({},Pt,{view:0,detail:0}),qn=xe(is),Il,yr,Wa,ac=g({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gy,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Wa&&(Wa&&a.type==="mousemove"?(Il=a.screenX-Wa.screenX,yr=a.screenY-Wa.screenY):yr=Il=0,Wa=a),Il)},movementY:function(a){return"movementY"in a?a.movementY:yr}}),_f=xe(ac),Of=g({},ac,{dataTransfer:0}),Dl=xe(Of),oR=g({},is,{relatedTarget:0}),py=xe(oR),cR=g({},Pt,{animationName:0,elapsedTime:0,pseudoElement:0}),lR=xe(cR),uR=g({},Pt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),fR=xe(uR),dR=g({},Pt,{data:0}),Tx=xe(dR),hR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=gR[a])?!!o[a]:!1}function gy(){return mR}var yR=g({},is,{key:function(a){if(a.key){var o=hR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=z(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gy,charCode:function(a){return a.type==="keypress"?z(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?z(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),wR=xe(yR),vR=g({},ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ix=xe(vR),bR=g({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gy}),ER=xe(bR),xR=g({},Pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),SR=xe(xR),CR=g({},ac,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),AR=xe(CR),NR=g({},Pt,{newState:0,oldState:0}),TR=xe(NR),IR=[9,13,27,32],my=ui&&"CompositionEvent"in window,Mf=null;ui&&"documentMode"in document&&(Mf=document.documentMode);var DR=ui&&"TextEvent"in window&&!Mf,Dx=ui&&(!my||Mf&&8<Mf&&11>=Mf),_x=" ",Ox=!1;function Mx(a,o){switch(a){case"keyup":return IR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var _l=!1;function _R(a,o){switch(a){case"compositionend":return Rx(o);case"keypress":return o.which!==32?null:(Ox=!0,_x);case"textInput":return a=o.data,a===_x&&Ox?null:a;default:return null}}function OR(a,o){if(_l)return a==="compositionend"||!my&&Mx(a,o)?(a=jp(),Tl=rc=mr=null,_l=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Dx&&o.locale!=="ko"?null:o.data;default:return null}}var MR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Px(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!MR[a.type]:o==="textarea"}function $x(a,o,u,p){Zr?qa?qa.push(p):qa=[p]:Zr=p,o=Dg(o,"onChange"),0<o.length&&(u=new un("onChange","change",null,u,p),a.push({event:u,listeners:o}))}var Rf=null,Pf=null;function RR(a){yA(a,0)}function zp(a){var o=nc(a);if(Up(o))return a}function Ux(a,o){if(a==="change")return o}var Lx=!1;if(ui){var yy;if(ui){var wy="oninput"in document;if(!wy){var kx=document.createElement("div");kx.setAttribute("oninput","return;"),wy=typeof kx.oninput=="function"}yy=wy}else yy=!1;Lx=yy&&(!document.documentMode||9<document.documentMode)}function Bx(){Rf&&(Rf.detachEvent("onpropertychange",jx),Pf=Rf=null)}function jx(a){if(a.propertyName==="value"&&zp(Pf)){var o=[];$x(o,Pf,a,If(a)),Bp(RR,o)}}function PR(a,o,u){a==="focusin"?(Bx(),Rf=o,Pf=u,Rf.attachEvent("onpropertychange",jx)):a==="focusout"&&Bx()}function $R(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zp(Pf)}function UR(a,o){if(a==="click")return zp(o)}function LR(a,o){if(a==="input"||a==="change")return zp(o)}function kR(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Ls=typeof Object.is=="function"?Object.is:kR;function $f(a,o){if(Ls(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var b=u[p];if(!yn.call(o,b)||!Ls(a[b],o[b]))return!1}return!0}function zx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Hx(a,o){var u=zx(a);a=0;for(var p;u;){if(u.nodeType===3){if(p=a+u.textContent.length,a<=o&&p>=o)return{node:u,offset:o-a};a=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=zx(u)}}function Fx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Fx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Vx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Sl(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Sl(a.document)}return o}function vy(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var BR=ui&&"documentMode"in document&&11>=document.documentMode,Ol=null,by=null,Uf=null,Ey=!1;function qx(a,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ey||Ol==null||Ol!==Sl(p)||(p=Ol,"selectionStart"in p&&vy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Uf&&$f(Uf,p)||(Uf=p,p=Dg(by,"onSelect"),0<p.length&&(o=new un("onSelect","select",null,o,u),a.push({event:o,listeners:p}),o.target=Ol)))}function oc(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var Ml={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionrun:oc("Transition","TransitionRun"),transitionstart:oc("Transition","TransitionStart"),transitioncancel:oc("Transition","TransitionCancel"),transitionend:oc("Transition","TransitionEnd")},xy={},Wx={};ui&&(Wx=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function cc(a){if(xy[a])return xy[a];if(!Ml[a])return a;var o=Ml[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in Wx)return xy[a]=o[u];return a}var Kx=cc("animationend"),Gx=cc("animationiteration"),Yx=cc("animationstart"),jR=cc("transitionrun"),zR=cc("transitionstart"),HR=cc("transitioncancel"),Xx=cc("transitionend"),Qx=new Map,Sy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sy.push("scrollEnd");function qi(a,o){Qx.set(a,o),pr(o,[a])}var Hp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},fi=[],Rl=0,Cy=0;function Fp(){for(var a=Rl,o=Cy=Rl=0;o<a;){var u=fi[o];fi[o++]=null;var p=fi[o];fi[o++]=null;var b=fi[o];fi[o++]=null;var x=fi[o];if(fi[o++]=null,p!==null&&b!==null){var M=p.pending;M===null?b.next=b:(b.next=M.next,M.next=b),p.pending=b}x!==0&&Zx(u,b,x)}}function Vp(a,o,u,p){fi[Rl++]=a,fi[Rl++]=o,fi[Rl++]=u,fi[Rl++]=p,Cy|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function Ay(a,o,u,p){return Vp(a,o,u,p),qp(a)}function lc(a,o){return Vp(a,null,null,o),qp(a)}function Zx(a,o,u){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u);for(var b=!1,x=a.return;x!==null;)x.childLanes|=u,p=x.alternate,p!==null&&(p.childLanes|=u),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(b=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,b&&o!==null&&(b=31-ss(u),a=x.hiddenUpdates,p=a[b],p===null?a[b]=[o]:p.push(o),o.lane=u|536870912),x):null}function qp(a){if(50<id)throw id=0,Pw=null,Error(s(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Pl={};function FR(a,o,u,p){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(a,o,u,p){return new FR(a,o,u,p)}function Ny(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Jr(a,o){var u=a.alternate;return u===null?(u=ks(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function Jx(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Wp(a,o,u,p,b,x){var M=0;if(p=a,typeof a=="function")Ny(a)&&(M=1);else if(typeof a=="string")M=GP(a,u,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case O:return a=ks(31,u,o,b),a.elementType=O,a.lanes=x,a;case v:return uc(u.children,b,x,o);case E:M=8,b|=24;break;case C:return a=ks(12,u,o,b|2),a.elementType=C,a.lanes=x,a;case S:return a=ks(13,u,o,b),a.elementType=S,a.lanes=x,a;case A:return a=ks(19,u,o,b),a.elementType=A,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:M=10;break e;case T:M=9;break e;case I:M=11;break e;case _:M=14;break e;case D:M=16,p=null;break e}M=29,u=Error(s(130,a===null?"null":typeof a,"")),p=null}return o=ks(M,u,o,b),o.elementType=a,o.type=p,o.lanes=x,o}function uc(a,o,u,p){return a=ks(7,a,p,o),a.lanes=u,a}function Ty(a,o,u){return a=ks(6,a,null,o),a.lanes=u,a}function eS(a){var o=ks(18,null,null,0);return o.stateNode=a,o}function Iy(a,o,u){return o=ks(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var tS=new WeakMap;function di(a,o){if(typeof a=="object"&&a!==null){var u=tS.get(a);return u!==void 0?u:(o={value:a,source:o,stack:or(o)},tS.set(a,o),o)}return{value:a,source:o,stack:or(o)}}var $l=[],Ul=0,Kp=null,Lf=0,hi=[],pi=0,Ka=null,wr=1,vr="";function ea(a,o){$l[Ul++]=Lf,$l[Ul++]=Kp,Kp=a,Lf=o}function nS(a,o,u){hi[pi++]=wr,hi[pi++]=vr,hi[pi++]=Ka,Ka=a;var p=wr;a=vr;var b=32-ss(p)-1;p&=~(1<<b),u+=1;var x=32-ss(o)+b;if(30<x){var M=b-b%5;x=(p&(1<<M)-1).toString(32),p>>=M,b-=M,wr=1<<32-ss(o)+b|u<<b|p,vr=x+a}else wr=1<<x|u<<b|p,vr=a}function Dy(a){a.return!==null&&(ea(a,1),nS(a,1,0))}function _y(a){for(;a===Kp;)Kp=$l[--Ul],$l[Ul]=null,Lf=$l[--Ul],$l[Ul]=null;for(;a===Ka;)Ka=hi[--pi],hi[pi]=null,vr=hi[--pi],hi[pi]=null,wr=hi[--pi],hi[pi]=null}function sS(a,o){hi[pi++]=wr,hi[pi++]=vr,hi[pi++]=Ka,wr=o.id,vr=o.overflow,Ka=a}var Tn=null,$t=null,et=!1,Ga=null,gi=!1,Oy=Error(s(519));function Ya(a){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kf(di(o,a)),Oy}function iS(a){var o=a.stateNode,u=a.type,p=a.memoizedProps;switch(o[ln]=a,o[Vn]=p,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<ad.length;u++)Xe(ad[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Af(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Yr(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||EA(o.textContent,u)?(p.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),p.onScroll!=null&&Xe("scroll",o),p.onScrollEnd!=null&&Xe("scrollend",o),p.onClick!=null&&(o.onclick=li),o=!0):o=!1,o||Ya(a,!0)}function rS(a){for(Tn=a.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:Tn=Tn.return}}function Ll(a){if(a!==Tn)return!1;if(!et)return rS(a),et=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Yw(a.type,a.memoizedProps)),u=!u),u&&$t&&Ya(a),rS(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));$t=_A(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));$t=_A(a)}else o===27?(o=$t,lo(a.type)?(a=e1,e1=null,$t=a):$t=o):$t=Tn?yi(a.stateNode.nextSibling):null;return!0}function fc(){$t=Tn=null,et=!1}function My(){var a=Ga;return a!==null&&(ys===null?ys=a:ys.push.apply(ys,a),Ga=null),a}function kf(a){Ga===null?Ga=[a]:Ga.push(a)}var Ry=j(null),dc=null,ta=null;function Xa(a,o,u){Z(Ry,o._currentValue),o._currentValue=u}function na(a){a._currentValue=Ry.current,X(Ry)}function Py(a,o,u){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===u)break;a=a.return}}function $y(a,o,u,p){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var x=b.dependencies;if(x!==null){var M=b.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=b;for(var Y=0;Y<o.length;Y++)if(B.context===o[Y]){x.lanes|=u,B=x.alternate,B!==null&&(B.lanes|=u),Py(x.return,u,a),p||(M=null);break e}x=B.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(s(341));M.lanes|=u,x=M.alternate,x!==null&&(x.lanes|=u),Py(M,u,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function kl(a,o,u,p){a=null;for(var b=o,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var B=b.type;Ls(b.pendingProps.value,M.value)||(a!==null?a.push(B):a=[B])}}else if(b===be.current){if(M=b.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(fd):a=[fd])}b=b.return}a!==null&&$y(o,a,u,p),o.flags|=262144}function Gp(a){for(a=a.firstContext;a!==null;){if(!Ls(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function hc(a){dc=a,ta=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function In(a){return aS(dc,a)}function Yp(a,o){return dc===null&&hc(a),aS(a,o)}function aS(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ta===null){if(a===null)throw Error(s(308));ta=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else ta=ta.next=o;return u}var VR=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},qR=t.unstable_scheduleCallback,WR=t.unstable_NormalPriority,en={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uy(){return{controller:new VR,data:new Map,refCount:0}}function Bf(a){a.refCount--,a.refCount===0&&qR(WR,function(){a.controller.abort()})}var jf=null,Ly=0,Bl=0,jl=null;function KR(a,o){if(jf===null){var u=jf=[];Ly=0,Bl=jw(),jl={status:"pending",value:void 0,then:function(p){u.push(p)}}}return Ly++,o.then(oS,oS),o}function oS(){if(--Ly===0&&jf!==null){jl!==null&&(jl.status="fulfilled");var a=jf;jf=null,Bl=0,jl=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function GR(a,o){var u=[],p={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(p.status="rejected",p.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),p}var cS=R.S;R.S=function(a,o){qC=St(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&KR(a,o),cS!==null&&cS(a,o)};var pc=j(null);function ky(){var a=pc.current;return a!==null?a:Dt.pooledCache}function Xp(a,o){o===null?Z(pc,pc.current):Z(pc,o.pool)}function lS(){var a=ky();return a===null?null:{parent:en._currentValue,pool:a}}var zl=Error(s(460)),By=Error(s(474)),Qp=Error(s(542)),Zp={then:function(){}};function uS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function fS(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(li,li),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,hS(a),a;default:if(typeof o.status=="string")o.then(li,li);else{if(a=Dt,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=p}},function(p){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,hS(a),a}throw mc=o,zl}}function gc(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(mc=u,zl):u}}var mc=null;function dS(){if(mc===null)throw Error(s(459));var a=mc;return mc=null,a}function hS(a){if(a===zl||a===Qp)throw Error(s(483))}var Hl=null,zf=0;function Jp(a){var o=zf;return zf+=1,Hl===null&&(Hl=[]),fS(Hl,a,o)}function Hf(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function eg(a,o){throw o.$$typeof===m?Error(s(525)):(a=Object.prototype.toString.call(o),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function pS(a){function o(J,Q){if(a){var te=J.deletions;te===null?(J.deletions=[Q],J.flags|=16):te.push(Q)}}function u(J,Q){if(!a)return null;for(;Q!==null;)o(J,Q),Q=Q.sibling;return null}function p(J){for(var Q=new Map;J!==null;)J.key!==null?Q.set(J.key,J):Q.set(J.index,J),J=J.sibling;return Q}function b(J,Q){return J=Jr(J,Q),J.index=0,J.sibling=null,J}function x(J,Q,te){return J.index=te,a?(te=J.alternate,te!==null?(te=te.index,te<Q?(J.flags|=67108866,Q):te):(J.flags|=67108866,Q)):(J.flags|=1048576,Q)}function M(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function B(J,Q,te,le){return Q===null||Q.tag!==6?(Q=Ty(te,J.mode,le),Q.return=J,Q):(Q=b(Q,te),Q.return=J,Q)}function Y(J,Q,te,le){var $e=te.type;return $e===v?ce(J,Q,te.props.children,le,te.key):Q!==null&&(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===D&&gc($e)===Q.type)?(Q=b(Q,te.props),Hf(Q,te),Q.return=J,Q):(Q=Wp(te.type,te.key,te.props,null,J.mode,le),Hf(Q,te),Q.return=J,Q)}function ne(J,Q,te,le){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==te.containerInfo||Q.stateNode.implementation!==te.implementation?(Q=Iy(te,J.mode,le),Q.return=J,Q):(Q=b(Q,te.children||[]),Q.return=J,Q)}function ce(J,Q,te,le,$e){return Q===null||Q.tag!==7?(Q=uc(te,J.mode,le,$e),Q.return=J,Q):(Q=b(Q,te),Q.return=J,Q)}function ue(J,Q,te){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Ty(""+Q,J.mode,te),Q.return=J,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case y:return te=Wp(Q.type,Q.key,Q.props,null,J.mode,te),Hf(te,Q),te.return=J,te;case w:return Q=Iy(Q,J.mode,te),Q.return=J,Q;case D:return Q=gc(Q),ue(J,Q,te)}if($(Q)||L(Q))return Q=uc(Q,J.mode,te,null),Q.return=J,Q;if(typeof Q.then=="function")return ue(J,Jp(Q),te);if(Q.$$typeof===N)return ue(J,Yp(J,Q),te);eg(J,Q)}return null}function ie(J,Q,te,le){var $e=Q!==null?Q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $e!==null?null:B(J,Q,""+te,le);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return te.key===$e?Y(J,Q,te,le):null;case w:return te.key===$e?ne(J,Q,te,le):null;case D:return te=gc(te),ie(J,Q,te,le)}if($(te)||L(te))return $e!==null?null:ce(J,Q,te,le,null);if(typeof te.then=="function")return ie(J,Q,Jp(te),le);if(te.$$typeof===N)return ie(J,Q,Yp(J,te),le);eg(J,te)}return null}function re(J,Q,te,le,$e){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return J=J.get(te)||null,B(Q,J,""+le,$e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return J=J.get(le.key===null?te:le.key)||null,Y(Q,J,le,$e);case w:return J=J.get(le.key===null?te:le.key)||null,ne(Q,J,le,$e);case D:return le=gc(le),re(J,Q,te,le,$e)}if($(le)||L(le))return J=J.get(te)||null,ce(Q,J,le,$e,null);if(typeof le.then=="function")return re(J,Q,te,Jp(le),$e);if(le.$$typeof===N)return re(J,Q,te,Yp(Q,le),$e);eg(Q,le)}return null}function Te(J,Q,te,le){for(var $e=null,rt=null,Ie=Q,qe=Q=0,Je=null;Ie!==null&&qe<te.length;qe++){Ie.index>qe?(Je=Ie,Ie=null):Je=Ie.sibling;var at=ie(J,Ie,te[qe],le);if(at===null){Ie===null&&(Ie=Je);break}a&&Ie&&at.alternate===null&&o(J,Ie),Q=x(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at,Ie=Je}if(qe===te.length)return u(J,Ie),et&&ea(J,qe),$e;if(Ie===null){for(;qe<te.length;qe++)Ie=ue(J,te[qe],le),Ie!==null&&(Q=x(Ie,Q,qe),rt===null?$e=Ie:rt.sibling=Ie,rt=Ie);return et&&ea(J,qe),$e}for(Ie=p(Ie);qe<te.length;qe++)Je=re(Ie,J,qe,te[qe],le),Je!==null&&(a&&Je.alternate!==null&&Ie.delete(Je.key===null?qe:Je.key),Q=x(Je,Q,qe),rt===null?$e=Je:rt.sibling=Je,rt=Je);return a&&Ie.forEach(function(go){return o(J,go)}),et&&ea(J,qe),$e}function Be(J,Q,te,le){if(te==null)throw Error(s(151));for(var $e=null,rt=null,Ie=Q,qe=Q=0,Je=null,at=te.next();Ie!==null&&!at.done;qe++,at=te.next()){Ie.index>qe?(Je=Ie,Ie=null):Je=Ie.sibling;var go=ie(J,Ie,at.value,le);if(go===null){Ie===null&&(Ie=Je);break}a&&Ie&&go.alternate===null&&o(J,Ie),Q=x(go,Q,qe),rt===null?$e=go:rt.sibling=go,rt=go,Ie=Je}if(at.done)return u(J,Ie),et&&ea(J,qe),$e;if(Ie===null){for(;!at.done;qe++,at=te.next())at=ue(J,at.value,le),at!==null&&(Q=x(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at);return et&&ea(J,qe),$e}for(Ie=p(Ie);!at.done;qe++,at=te.next())at=re(Ie,J,qe,at.value,le),at!==null&&(a&&at.alternate!==null&&Ie.delete(at.key===null?qe:at.key),Q=x(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at);return a&&Ie.forEach(function(r$){return o(J,r$)}),et&&ea(J,qe),$e}function Nt(J,Q,te,le){if(typeof te=="object"&&te!==null&&te.type===v&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case y:e:{for(var $e=te.key;Q!==null;){if(Q.key===$e){if($e=te.type,$e===v){if(Q.tag===7){u(J,Q.sibling),le=b(Q,te.props.children),le.return=J,J=le;break e}}else if(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===D&&gc($e)===Q.type){u(J,Q.sibling),le=b(Q,te.props),Hf(le,te),le.return=J,J=le;break e}u(J,Q);break}else o(J,Q);Q=Q.sibling}te.type===v?(le=uc(te.props.children,J.mode,le,te.key),le.return=J,J=le):(le=Wp(te.type,te.key,te.props,null,J.mode,le),Hf(le,te),le.return=J,J=le)}return M(J);case w:e:{for($e=te.key;Q!==null;){if(Q.key===$e)if(Q.tag===4&&Q.stateNode.containerInfo===te.containerInfo&&Q.stateNode.implementation===te.implementation){u(J,Q.sibling),le=b(Q,te.children||[]),le.return=J,J=le;break e}else{u(J,Q);break}else o(J,Q);Q=Q.sibling}le=Iy(te,J.mode,le),le.return=J,J=le}return M(J);case D:return te=gc(te),Nt(J,Q,te,le)}if($(te))return Te(J,Q,te,le);if(L(te)){if($e=L(te),typeof $e!="function")throw Error(s(150));return te=$e.call(te),Be(J,Q,te,le)}if(typeof te.then=="function")return Nt(J,Q,Jp(te),le);if(te.$$typeof===N)return Nt(J,Q,Yp(J,te),le);eg(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Q!==null&&Q.tag===6?(u(J,Q.sibling),le=b(Q,te),le.return=J,J=le):(u(J,Q),le=Ty(te,J.mode,le),le.return=J,J=le),M(J)):u(J,Q)}return function(J,Q,te,le){try{zf=0;var $e=Nt(J,Q,te,le);return Hl=null,$e}catch(Ie){if(Ie===zl||Ie===Qp)throw Ie;var rt=ks(29,Ie,null,J.mode);return rt.lanes=le,rt.return=J,rt}finally{}}}var yc=pS(!0),gS=pS(!1),Qa=!1;function jy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zy(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Za(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ja(a,o,u){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(dt&2)!==0){var b=p.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),p.pending=o,o=qp(a),Zx(a,null,u),o}return Vp(a,p,o,u),qp(a)}function Ff(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,Dp(a,u)}}function Hy(a,o){var u=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var b=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?b=x=M:x=x.next=M,u=u.next}while(u!==null);x===null?b=x=o:x=x.next=o}else b=x=o;u={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var Fy=!1;function Vf(){if(Fy){var a=jl;if(a!==null)throw a}}function qf(a,o,u,p){Fy=!1;var b=a.updateQueue;Qa=!1;var x=b.firstBaseUpdate,M=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var Y=B,ne=Y.next;Y.next=null,M===null?x=ne:M.next=ne,M=Y;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==M&&(B===null?ce.firstBaseUpdate=ne:B.next=ne,ce.lastBaseUpdate=Y))}if(x!==null){var ue=b.baseState;M=0,ce=ne=Y=null,B=x;do{var ie=B.lane&-536870913,re=ie!==B.lane;if(re?(Ze&ie)===ie:(p&ie)===ie){ie!==0&&ie===Bl&&(Fy=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Te=a,Be=B;ie=o;var Nt=u;switch(Be.tag){case 1:if(Te=Be.payload,typeof Te=="function"){ue=Te.call(Nt,ue,ie);break e}ue=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Be.payload,ie=typeof Te=="function"?Te.call(Nt,ue,ie):Te,ie==null)break e;ue=g({},ue,ie);break e;case 2:Qa=!0}}ie=B.callback,ie!==null&&(a.flags|=64,re&&(a.flags|=8192),re=b.callbacks,re===null?b.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(ne=ce=re,Y=ue):ce=ce.next=re,M|=ie;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;re=B,B=re.next,re.next=null,b.lastBaseUpdate=re,b.shared.pending=null}}while(!0);ce===null&&(Y=ue),b.baseState=Y,b.firstBaseUpdate=ne,b.lastBaseUpdate=ce,x===null&&(b.shared.lanes=0),io|=M,a.lanes=M,a.memoizedState=ue}}function mS(a,o){if(typeof a!="function")throw Error(s(191,a));a.call(o)}function yS(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)mS(u[a],o)}var Fl=j(null),tg=j(0);function wS(a,o){a=fa,Z(tg,a),Z(Fl,o),fa=a|o.baseLanes}function Vy(){Z(tg,fa),Z(Fl,Fl.current)}function qy(){fa=tg.current,X(Fl),X(tg)}var Bs=j(null),mi=null;function eo(a){var o=a.alternate;Z(Kt,Kt.current&1),Z(Bs,a),mi===null&&(o===null||Fl.current!==null||o.memoizedState!==null)&&(mi=a)}function Wy(a){Z(Kt,Kt.current),Z(Bs,a),mi===null&&(mi=a)}function vS(a){a.tag===22?(Z(Kt,Kt.current),Z(Bs,a),mi===null&&(mi=a)):to()}function to(){Z(Kt,Kt.current),Z(Bs,Bs.current)}function js(a){X(Bs),mi===a&&(mi=null),X(Kt)}var Kt=j(0);function ng(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Zw(u)||Jw(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var sa=0,Fe=null,Ct=null,tn=null,sg=!1,Vl=!1,wc=!1,ig=0,Wf=0,ql=null,YR=0;function Vt(){throw Error(s(321))}function Ky(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Ls(a[u],o[u]))return!1;return!0}function Gy(a,o,u,p,b,x){return sa=x,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?nC:lw,wc=!1,x=u(p,b),wc=!1,Vl&&(x=ES(o,u,p,b)),bS(a),x}function bS(a){R.H=Yf;var o=Ct!==null&&Ct.next!==null;if(sa=0,tn=Ct=Fe=null,sg=!1,Wf=0,ql=null,o)throw Error(s(300));a===null||nn||(a=a.dependencies,a!==null&&Gp(a)&&(nn=!0))}function ES(a,o,u,p){Fe=a;var b=0;do{if(Vl&&(ql=null),Wf=0,Vl=!1,25<=b)throw Error(s(301));if(b+=1,tn=Ct=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}R.H=sC,x=o(u,p)}while(Vl);return x}function XR(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Kf(o):o,a=a.useState()[0],(Ct!==null?Ct.memoizedState:null)!==a&&(Fe.flags|=1024),o}function Yy(){var a=ig!==0;return ig=0,a}function Xy(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function Qy(a){if(sg){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}sg=!1}sa=0,tn=Ct=Fe=null,Vl=!1,Wf=ig=0,ql=null}function rs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Fe.memoizedState=tn=a:tn=tn.next=a,tn}function Gt(){if(Ct===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=Ct.next;var o=tn===null?Fe.memoizedState:tn.next;if(o!==null)tn=o,Ct=a;else{if(a===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));Ct=a,a={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},tn===null?Fe.memoizedState=tn=a:tn=tn.next=a}return tn}function rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kf(a){var o=Wf;return Wf+=1,ql===null&&(ql=[]),a=fS(ql,a,o),o=Fe,(tn===null?o.memoizedState:tn.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?nC:lw),a}function ag(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Kf(a);if(a.$$typeof===N)return In(a)}throw Error(s(438,String(a)))}function Zy(a){var o=null,u=Fe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=Fe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=rg(),Fe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),p=0;p<a;p++)u[p]=P;return o.index++,u}function ia(a,o){return typeof o=="function"?o(a):o}function og(a){var o=Gt();return Jy(o,Ct,a)}function Jy(a,o,u){var p=a.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=u;var b=a.baseQueue,x=p.pending;if(x!==null){if(b!==null){var M=b.next;b.next=x.next,x.next=M}o.baseQueue=b=x,p.pending=null}if(x=a.baseState,b===null)a.memoizedState=x;else{o=b.next;var B=M=null,Y=null,ne=o,ce=!1;do{var ue=ne.lane&-536870913;if(ue!==ne.lane?(Ze&ue)===ue:(sa&ue)===ue){var ie=ne.revertLane;if(ie===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ue===Bl&&(ce=!0);else if((sa&ie)===ie){ne=ne.next,ie===Bl&&(ce=!0);continue}else ue={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(B=Y=ue,M=x):Y=Y.next=ue,Fe.lanes|=ie,io|=ie;ue=ne.action,wc&&u(x,ue),x=ne.hasEagerState?ne.eagerState:u(x,ue)}else ie={lane:ue,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(B=Y=ie,M=x):Y=Y.next=ie,Fe.lanes|=ue,io|=ue;ne=ne.next}while(ne!==null&&ne!==o);if(Y===null?M=x:Y.next=B,!Ls(x,a.memoizedState)&&(nn=!0,ce&&(u=jl,u!==null)))throw u;a.memoizedState=x,a.baseState=M,a.baseQueue=Y,p.lastRenderedState=x}return b===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function ew(a){var o=Gt(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=u.dispatch,b=u.pending,x=o.memoizedState;if(b!==null){u.pending=null;var M=b=b.next;do x=a(x,M.action),M=M.next;while(M!==b);Ls(x,o.memoizedState)||(nn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function xS(a,o,u){var p=Fe,b=Gt(),x=et;if(x){if(u===void 0)throw Error(s(407));u=u()}else u=o();var M=!Ls((Ct||b).memoizedState,u);if(M&&(b.memoizedState=u,nn=!0),b=b.queue,sw(AS.bind(null,p,b,a),[a]),b.getSnapshot!==o||M||tn!==null&&tn.memoizedState.tag&1){if(p.flags|=2048,Wl(9,{destroy:void 0},CS.bind(null,p,b,u,o),null),Dt===null)throw Error(s(349));x||(sa&127)!==0||SS(p,o,u)}return u}function SS(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Fe.updateQueue,o===null?(o=rg(),Fe.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function CS(a,o,u,p){o.value=u,o.getSnapshot=p,NS(o)&&TS(a)}function AS(a,o,u){return u(function(){NS(o)&&TS(a)})}function NS(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Ls(a,u)}catch{return!0}}function TS(a){var o=lc(a,2);o!==null&&ws(o,a,2)}function tw(a){var o=rs();if(typeof a=="function"){var u=a;if(a=u(),wc){ur(!0);try{u()}finally{ur(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},o}function IS(a,o,u,p){return a.baseState=u,Jy(a,Ct,typeof p=="function"?p:ia)}function QR(a,o,u,p,b){if(ug(a))throw Error(s(485));if(a=o.action,a!==null){var x={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){x.listeners.push(M)}};R.T!==null?u(!0):x.isTransition=!1,p(x),u=o.pending,u===null?(x.next=o.pending=x,DS(o,x)):(x.next=u.next,o.pending=u.next=x)}}function DS(a,o){var u=o.action,p=o.payload,b=a.state;if(o.isTransition){var x=R.T,M={};R.T=M;try{var B=u(b,p),Y=R.S;Y!==null&&Y(M,B),_S(a,o,B)}catch(ne){nw(a,o,ne)}finally{x!==null&&M.types!==null&&(x.types=M.types),R.T=x}}else try{x=u(b,p),_S(a,o,x)}catch(ne){nw(a,o,ne)}}function _S(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){OS(a,o,p)},function(p){return nw(a,o,p)}):OS(a,o,u)}function OS(a,o,u){o.status="fulfilled",o.value=u,MS(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,DS(a,u)))}function nw(a,o,u){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,MS(o),o=o.next;while(o!==p)}a.action=null}function MS(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function RS(a,o){return o}function PS(a,o){if(et){var u=Dt.formState;if(u!==null){e:{var p=Fe;if(et){if($t){t:{for(var b=$t,x=gi;b.nodeType!==8;){if(!x){b=null;break t}if(b=yi(b.nextSibling),b===null){b=null;break t}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){$t=yi(b.nextSibling),p=b.data==="F!";break e}}Ya(p)}p=!1}p&&(o=u[0])}}return u=rs(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RS,lastRenderedState:o},u.queue=p,u=JS.bind(null,Fe,p),p.dispatch=u,p=tw(!1),x=cw.bind(null,Fe,!1,p.queue),p=rs(),b={state:o,dispatch:null,action:a,pending:null},p.queue=b,u=QR.bind(null,Fe,b,x,u),b.dispatch=u,p.memoizedState=a,[o,u,!1]}function $S(a){var o=Gt();return US(o,Ct,a)}function US(a,o,u){if(o=Jy(a,o,RS)[0],a=og(ia)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Kf(o)}catch(M){throw M===zl?Qp:M}else p=o;o=Gt();var b=o.queue,x=b.dispatch;return u!==o.memoizedState&&(Fe.flags|=2048,Wl(9,{destroy:void 0},ZR.bind(null,b,u),null)),[p,x,a]}function ZR(a,o){a.action=o}function LS(a){var o=Gt(),u=Ct;if(u!==null)return US(o,u,a);Gt(),o=o.memoizedState,u=Gt();var p=u.queue.dispatch;return u.memoizedState=a,[o,p,!1]}function Wl(a,o,u,p){return a={tag:a,create:u,deps:p,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=rg(),Fe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(p=u.next,u.next=a,a.next=p,o.lastEffect=a),a}function kS(){return Gt().memoizedState}function cg(a,o,u,p){var b=rs();Fe.flags|=a,b.memoizedState=Wl(1|o,{destroy:void 0},u,p===void 0?null:p)}function lg(a,o,u,p){var b=Gt();p=p===void 0?null:p;var x=b.memoizedState.inst;Ct!==null&&p!==null&&Ky(p,Ct.memoizedState.deps)?b.memoizedState=Wl(o,x,u,p):(Fe.flags|=a,b.memoizedState=Wl(1|o,x,u,p))}function BS(a,o){cg(8390656,8,a,o)}function sw(a,o){lg(2048,8,a,o)}function JR(a){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=rg(),Fe.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function jS(a){var o=Gt().memoizedState;return JR({ref:o,nextImpl:a}),function(){if((dt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function zS(a,o){return lg(4,2,a,o)}function HS(a,o){return lg(4,4,a,o)}function FS(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function VS(a,o,u){u=u!=null?u.concat([a]):null,lg(4,4,FS.bind(null,o,a),u)}function iw(){}function qS(a,o){var u=Gt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&Ky(o,p[1])?p[0]:(u.memoizedState=[a,o],a)}function WS(a,o){var u=Gt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&Ky(o,p[1]))return p[0];if(p=a(),wc){ur(!0);try{a()}finally{ur(!1)}}return u.memoizedState=[p,o],p}function rw(a,o,u){return u===void 0||(sa&1073741824)!==0&&(Ze&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=KC(),Fe.lanes|=a,io|=a,u)}function KS(a,o,u,p){return Ls(u,o)?u:Fl.current!==null?(a=rw(a,u,p),Ls(a,o)||(nn=!0),a):(sa&42)===0||(sa&1073741824)!==0&&(Ze&261930)===0?(nn=!0,a.memoizedState=u):(a=KC(),Fe.lanes|=a,io|=a,o)}function GS(a,o,u,p,b){var x=k.p;k.p=x!==0&&8>x?x:8;var M=R.T,B={};R.T=B,cw(a,!1,o,u);try{var Y=b(),ne=R.S;if(ne!==null&&ne(B,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ce=GR(Y,p);Gf(a,o,ce,Fs(a))}else Gf(a,o,p,Fs(a))}catch(ue){Gf(a,o,{then:function(){},status:"rejected",reason:ue},Fs())}finally{k.p=x,M!==null&&B.types!==null&&(M.types=B.types),R.T=M}}function eP(){}function aw(a,o,u,p){if(a.tag!==5)throw Error(s(476));var b=YS(a).queue;GS(a,b,o,F,u===null?eP:function(){return XS(a),u(p)})}function YS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:F},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function XS(a){var o=YS(a);o.next===null&&(o=a.alternate.memoizedState),Gf(a,o.next.queue,{},Fs())}function ow(){return In(fd)}function QS(){return Gt().memoizedState}function ZS(){return Gt().memoizedState}function tP(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=Fs();a=Za(u);var p=Ja(o,a,u);p!==null&&(ws(p,o,u),Ff(p,o,u)),o={cache:Uy()},a.payload=o;return}o=o.return}}function nP(a,o,u){var p=Fs();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ug(a)?eC(o,u):(u=Ay(a,o,u,p),u!==null&&(ws(u,a,p),tC(u,o,p)))}function JS(a,o,u){var p=Fs();Gf(a,o,u,p)}function Gf(a,o,u,p){var b={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ug(a))eC(o,b);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var M=o.lastRenderedState,B=x(M,u);if(b.hasEagerState=!0,b.eagerState=B,Ls(B,M))return Vp(a,o,b,0),Dt===null&&Fp(),!1}catch{}finally{}if(u=Ay(a,o,b,p),u!==null)return ws(u,a,p),tC(u,o,p),!0}return!1}function cw(a,o,u,p){if(p={lane:2,revertLane:jw(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ug(a)){if(o)throw Error(s(479))}else o=Ay(a,u,p,2),o!==null&&ws(o,a,2)}function ug(a){var o=a.alternate;return a===Fe||o!==null&&o===Fe}function eC(a,o){Vl=sg=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function tC(a,o,u){if((u&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,Dp(a,u)}}var Yf={readContext:In,use:ag,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Yf.useEffectEvent=Vt;var nC={readContext:In,use:ag,useCallback:function(a,o){return rs().memoizedState=[a,o===void 0?null:o],a},useContext:In,useEffect:BS,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,cg(4194308,4,FS.bind(null,o,a),u)},useLayoutEffect:function(a,o){return cg(4194308,4,a,o)},useInsertionEffect:function(a,o){cg(4,2,a,o)},useMemo:function(a,o){var u=rs();o=o===void 0?null:o;var p=a();if(wc){ur(!0);try{a()}finally{ur(!1)}}return u.memoizedState=[p,o],p},useReducer:function(a,o,u){var p=rs();if(u!==void 0){var b=u(o);if(wc){ur(!0);try{u(o)}finally{ur(!1)}}}else b=o;return p.memoizedState=p.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},p.queue=a,a=a.dispatch=nP.bind(null,Fe,a),[p.memoizedState,a]},useRef:function(a){var o=rs();return a={current:a},o.memoizedState=a},useState:function(a){a=tw(a);var o=a.queue,u=JS.bind(null,Fe,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:iw,useDeferredValue:function(a,o){var u=rs();return rw(u,a,o)},useTransition:function(){var a=tw(!1);return a=GS.bind(null,Fe,a.queue,!0,!1),rs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var p=Fe,b=rs();if(et){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),Dt===null)throw Error(s(349));(Ze&127)!==0||SS(p,o,u)}b.memoizedState=u;var x={value:u,getSnapshot:o};return b.queue=x,BS(AS.bind(null,p,x,a),[a]),p.flags|=2048,Wl(9,{destroy:void 0},CS.bind(null,p,x,u,o),null),u},useId:function(){var a=rs(),o=Dt.identifierPrefix;if(et){var u=vr,p=wr;u=(p&~(1<<32-ss(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=ig++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=YR++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:ow,useFormState:PS,useActionState:PS,useOptimistic:function(a){var o=rs();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=cw.bind(null,Fe,!0,u),u.dispatch=o,[a,o]},useMemoCache:Zy,useCacheRefresh:function(){return rs().memoizedState=tP.bind(null,Fe)},useEffectEvent:function(a){var o=rs(),u={impl:a};return o.memoizedState=u,function(){if((dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},lw={readContext:In,use:ag,useCallback:qS,useContext:In,useEffect:sw,useImperativeHandle:VS,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:WS,useReducer:og,useRef:kS,useState:function(){return og(ia)},useDebugValue:iw,useDeferredValue:function(a,o){var u=Gt();return KS(u,Ct.memoizedState,a,o)},useTransition:function(){var a=og(ia)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Kf(a),o]},useSyncExternalStore:xS,useId:QS,useHostTransitionStatus:ow,useFormState:$S,useActionState:$S,useOptimistic:function(a,o){var u=Gt();return IS(u,Ct,a,o)},useMemoCache:Zy,useCacheRefresh:ZS};lw.useEffectEvent=jS;var sC={readContext:In,use:ag,useCallback:qS,useContext:In,useEffect:sw,useImperativeHandle:VS,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:WS,useReducer:ew,useRef:kS,useState:function(){return ew(ia)},useDebugValue:iw,useDeferredValue:function(a,o){var u=Gt();return Ct===null?rw(u,a,o):KS(u,Ct.memoizedState,a,o)},useTransition:function(){var a=ew(ia)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Kf(a),o]},useSyncExternalStore:xS,useId:QS,useHostTransitionStatus:ow,useFormState:LS,useActionState:LS,useOptimistic:function(a,o){var u=Gt();return Ct!==null?IS(u,Ct,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Zy,useCacheRefresh:ZS};sC.useEffectEvent=jS;function uw(a,o,u,p){o=a.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var fw={enqueueSetState:function(a,o,u){a=a._reactInternals;var p=Fs(),b=Za(p);b.payload=o,u!=null&&(b.callback=u),o=Ja(a,b,p),o!==null&&(ws(o,a,p),Ff(o,a,p))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var p=Fs(),b=Za(p);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=Ja(a,b,p),o!==null&&(ws(o,a,p),Ff(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=Fs(),p=Za(u);p.tag=2,o!=null&&(p.callback=o),o=Ja(a,p,u),o!==null&&(ws(o,a,u),Ff(o,a,u))}};function iC(a,o,u,p,b,x,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,x,M):o.prototype&&o.prototype.isPureReactComponent?!$f(u,p)||!$f(b,x):!0}function rC(a,o,u,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==a&&fw.enqueueReplaceState(o,o.state,null)}function vc(a,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(a=a.defaultProps){u===o&&(u=g({},u));for(var b in a)u[b]===void 0&&(u[b]=a[b])}return u}function aC(a){Hp(a)}function oC(a){console.error(a)}function cC(a){Hp(a)}function fg(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function lC(a,o,u){try{var p=a.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function dw(a,o,u){return u=Za(u),u.tag=3,u.payload={element:null},u.callback=function(){fg(a,o)},u}function uC(a){return a=Za(a),a.tag=3,a}function fC(a,o,u,p){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var x=p.value;a.payload=function(){return b(x)},a.callback=function(){lC(o,u,p)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){lC(o,u,p),typeof b!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var B=p.stack;this.componentDidCatch(p.value,{componentStack:B!==null?B:""})})}function sP(a,o,u,p,b){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&kl(o,u,b,!0),u=Bs.current,u!==null){switch(u.tag){case 31:case 13:return mi===null?Sg():u.alternate===null&&qt===0&&(qt=3),u.flags&=-257,u.flags|=65536,u.lanes=b,p===Zp?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),Lw(a,p,b)),!1;case 22:return u.flags|=65536,p===Zp?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),Lw(a,p,b)),!1}throw Error(s(435,u.tag))}return Lw(a,p,b),Sg(),!1}if(et)return o=Bs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,p!==Oy&&(a=Error(s(422),{cause:p}),kf(di(a,u)))):(p!==Oy&&(o=Error(s(423),{cause:p}),kf(di(o,u))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,p=di(p,u),b=dw(a.stateNode,p,b),Hy(a,b),qt!==4&&(qt=2)),!1;var x=Error(s(520),{cause:p});if(x=di(x,u),sd===null?sd=[x]:sd.push(x),qt!==4&&(qt=2),o===null)return!0;p=di(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=b&-b,u.lanes|=a,a=dw(u.stateNode,p,a),Hy(u,a),!1;case 1:if(o=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ro===null||!ro.has(x))))return u.flags|=65536,b&=-b,u.lanes|=b,b=uC(b),fC(b,a,u,p),Hy(u,b),!1}u=u.return}while(u!==null);return!1}var hw=Error(s(461)),nn=!1;function Dn(a,o,u,p){o.child=a===null?gS(o,null,u,p):yc(o,a.child,u,p)}function dC(a,o,u,p,b){u=u.render;var x=o.ref;if("ref"in p){var M={};for(var B in p)B!=="ref"&&(M[B]=p[B])}else M=p;return hc(o),p=Gy(a,o,u,M,x,b),B=Yy(),a!==null&&!nn?(Xy(a,o,b),ra(a,o,b)):(et&&B&&Dy(o),o.flags|=1,Dn(a,o,p,b),o.child)}function hC(a,o,u,p,b){if(a===null){var x=u.type;return typeof x=="function"&&!Ny(x)&&x.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=x,pC(a,o,x,p,b)):(a=Wp(u.type,null,p,o,o.mode,b),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!Ew(a,b)){var M=x.memoizedProps;if(u=u.compare,u=u!==null?u:$f,u(M,p)&&a.ref===o.ref)return ra(a,o,b)}return o.flags|=1,a=Jr(x,p),a.ref=o.ref,a.return=o,o.child=a}function pC(a,o,u,p,b){if(a!==null){var x=a.memoizedProps;if($f(x,p)&&a.ref===o.ref)if(nn=!1,o.pendingProps=p=x,Ew(a,b))(a.flags&131072)!==0&&(nn=!0);else return o.lanes=a.lanes,ra(a,o,b)}return pw(a,o,u,p,b)}function gC(a,o,u,p){var b=p.children,x=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,a!==null){for(p=o.child=a.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~x}else p=0,o.child=null;return mC(a,o,x,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Xp(o,x!==null?x.cachePool:null),x!==null?wS(o,x):Vy(),vS(o);else return p=o.lanes=536870912,mC(a,o,x!==null?x.baseLanes|u:u,u,p)}else x!==null?(Xp(o,x.cachePool),wS(o,x),to(),o.memoizedState=null):(a!==null&&Xp(o,null),Vy(),to());return Dn(a,o,b,u),o.child}function Xf(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function mC(a,o,u,p,b){var x=ky();return x=x===null?null:{parent:en._currentValue,pool:x},o.memoizedState={baseLanes:u,cachePool:x},a!==null&&Xp(o,null),Vy(),vS(o),a!==null&&kl(a,o,p,!0),o.childLanes=b,null}function dg(a,o){return o=pg({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function yC(a,o,u){return yc(o,a.child,null,u),a=dg(o,o.pendingProps),a.flags|=2,js(o),o.memoizedState=null,a}function iP(a,o,u){var p=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(et){if(p.mode==="hidden")return a=dg(o,p),o.lanes=536870912,Xf(null,a);if(Wy(o),(a=$t)?(a=DA(a,gi),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ka!==null?{id:wr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},u=eS(a),u.return=o,o.child=u,Tn=o,$t=null)):a=null,a===null)throw Ya(o);return o.lanes=536870912,null}return dg(o,p)}var x=a.memoizedState;if(x!==null){var M=x.dehydrated;if(Wy(o),b)if(o.flags&256)o.flags&=-257,o=yC(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(s(558));else if(nn||kl(a,o,u,!1),b=(u&a.childLanes)!==0,nn||b){if(p=Dt,p!==null&&(M=_p(p,u),M!==0&&M!==x.retryLane))throw x.retryLane=M,lc(a,M),ws(p,a,M),hw;Sg(),o=yC(a,o,u)}else a=x.treeContext,$t=yi(M.nextSibling),Tn=o,et=!0,Ga=null,gi=!1,a!==null&&sS(o,a),o=dg(o,p),o.flags|=4096;return o}return a=Jr(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function hg(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function pw(a,o,u,p,b){return hc(o),u=Gy(a,o,u,p,void 0,b),p=Yy(),a!==null&&!nn?(Xy(a,o,b),ra(a,o,b)):(et&&p&&Dy(o),o.flags|=1,Dn(a,o,u,b),o.child)}function wC(a,o,u,p,b,x){return hc(o),o.updateQueue=null,u=ES(o,p,u,b),bS(a),p=Yy(),a!==null&&!nn?(Xy(a,o,x),ra(a,o,x)):(et&&p&&Dy(o),o.flags|=1,Dn(a,o,u,x),o.child)}function vC(a,o,u,p,b){if(hc(o),o.stateNode===null){var x=Pl,M=u.contextType;typeof M=="object"&&M!==null&&(x=In(M)),x=new u(p,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=fw,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=p,x.state=o.memoizedState,x.refs={},jy(o),M=u.contextType,x.context=typeof M=="object"&&M!==null?In(M):Pl,x.state=o.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(uw(o,u,M,p),x.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(M=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),M!==x.state&&fw.enqueueReplaceState(x,x.state,null),qf(o,p,x,b),Vf(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){x=o.stateNode;var B=o.memoizedProps,Y=vc(u,B);x.props=Y;var ne=x.context,ce=u.contextType;M=Pl,typeof ce=="object"&&ce!==null&&(M=In(ce));var ue=u.getDerivedStateFromProps;ce=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=o.pendingProps!==B,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||ne!==M)&&rC(o,x,p,M),Qa=!1;var ie=o.memoizedState;x.state=ie,qf(o,p,x,b),Vf(),ne=o.memoizedState,B||ie!==ne||Qa?(typeof ue=="function"&&(uw(o,u,ue,p),ne=o.memoizedState),(Y=Qa||iC(o,u,Y,p,ie,ne,M))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=ne),x.props=p,x.state=ne,x.context=M,p=Y):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{x=o.stateNode,zy(a,o),M=o.memoizedProps,ce=vc(u,M),x.props=ce,ue=o.pendingProps,ie=x.context,ne=u.contextType,Y=Pl,typeof ne=="object"&&ne!==null&&(Y=In(ne)),B=u.getDerivedStateFromProps,(ne=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==ue||ie!==Y)&&rC(o,x,p,Y),Qa=!1,ie=o.memoizedState,x.state=ie,qf(o,p,x,b),Vf();var re=o.memoizedState;M!==ue||ie!==re||Qa||a!==null&&a.dependencies!==null&&Gp(a.dependencies)?(typeof B=="function"&&(uw(o,u,B,p),re=o.memoizedState),(ce=Qa||iC(o,u,ce,p,ie,re,Y)||a!==null&&a.dependencies!==null&&Gp(a.dependencies))?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,re,Y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,re,Y)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=re),x.props=p,x.state=re,x.context=Y,p=ce):(typeof x.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),p=!1)}return x=p,hg(a,o),p=(o.flags&128)!==0,x||p?(x=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&p?(o.child=yc(o,a.child,null,b),o.child=yc(o,null,u,b)):Dn(a,o,u,b),o.memoizedState=x.state,a=o.child):a=ra(a,o,b),a}function bC(a,o,u,p){return fc(),o.flags|=256,Dn(a,o,u,p),o.child}var gw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mw(a){return{baseLanes:a,cachePool:lS()}}function yw(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=Hs),a}function EC(a,o,u){var p=o.pendingProps,b=!1,x=(o.flags&128)!==0,M;if((M=x)||(M=a!==null&&a.memoizedState===null?!1:(Kt.current&2)!==0),M&&(b=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,a===null){if(et){if(b?eo(o):to(),(a=$t)?(a=DA(a,gi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ka!==null?{id:wr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},u=eS(a),u.return=o,o.child=u,Tn=o,$t=null)):a=null,a===null)throw Ya(o);return Jw(a)?o.lanes=32:o.lanes=536870912,null}var B=p.children;return p=p.fallback,b?(to(),b=o.mode,B=pg({mode:"hidden",children:B},b),p=uc(p,b,u,null),B.return=o,p.return=o,B.sibling=p,o.child=B,p=o.child,p.memoizedState=mw(u),p.childLanes=yw(a,M,u),o.memoizedState=gw,Xf(null,p)):(eo(o),ww(o,B))}var Y=a.memoizedState;if(Y!==null&&(B=Y.dehydrated,B!==null)){if(x)o.flags&256?(eo(o),o.flags&=-257,o=vw(a,o,u)):o.memoizedState!==null?(to(),o.child=a.child,o.flags|=128,o=null):(to(),B=p.fallback,b=o.mode,p=pg({mode:"visible",children:p.children},b),B=uc(B,b,u,null),B.flags|=2,p.return=o,B.return=o,p.sibling=B,o.child=p,yc(o,a.child,null,u),p=o.child,p.memoizedState=mw(u),p.childLanes=yw(a,M,u),o.memoizedState=gw,o=Xf(null,p));else if(eo(o),Jw(B)){if(M=B.nextSibling&&B.nextSibling.dataset,M)var ne=M.dgst;M=ne,p=Error(s(419)),p.stack="",p.digest=M,kf({value:p,source:null,stack:null}),o=vw(a,o,u)}else if(nn||kl(a,o,u,!1),M=(u&a.childLanes)!==0,nn||M){if(M=Dt,M!==null&&(p=_p(M,u),p!==0&&p!==Y.retryLane))throw Y.retryLane=p,lc(a,p),ws(M,a,p),hw;Zw(B)||Sg(),o=vw(a,o,u)}else Zw(B)?(o.flags|=192,o.child=a.child,o=null):(a=Y.treeContext,$t=yi(B.nextSibling),Tn=o,et=!0,Ga=null,gi=!1,a!==null&&sS(o,a),o=ww(o,p.children),o.flags|=4096);return o}return b?(to(),B=p.fallback,b=o.mode,Y=a.child,ne=Y.sibling,p=Jr(Y,{mode:"hidden",children:p.children}),p.subtreeFlags=Y.subtreeFlags&65011712,ne!==null?B=Jr(ne,B):(B=uc(B,b,u,null),B.flags|=2),B.return=o,p.return=o,p.sibling=B,o.child=p,Xf(null,p),p=o.child,B=a.child.memoizedState,B===null?B=mw(u):(b=B.cachePool,b!==null?(Y=en._currentValue,b=b.parent!==Y?{parent:Y,pool:Y}:b):b=lS(),B={baseLanes:B.baseLanes|u,cachePool:b}),p.memoizedState=B,p.childLanes=yw(a,M,u),o.memoizedState=gw,Xf(a.child,p)):(eo(o),u=a.child,a=u.sibling,u=Jr(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,a!==null&&(M=o.deletions,M===null?(o.deletions=[a],o.flags|=16):M.push(a)),o.child=u,o.memoizedState=null,u)}function ww(a,o){return o=pg({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function pg(a,o){return a=ks(22,a,null,o),a.lanes=0,a}function vw(a,o,u){return yc(o,a.child,null,u),a=ww(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function xC(a,o,u){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),Py(a.return,o,u)}function bw(a,o,u,p,b,x){var M=a.memoizedState;M===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:b,treeForkCount:x}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=p,M.tail=u,M.tailMode=b,M.treeForkCount=x)}function SC(a,o,u){var p=o.pendingProps,b=p.revealOrder,x=p.tail;p=p.children;var M=Kt.current,B=(M&2)!==0;if(B?(M=M&1|2,o.flags|=128):M&=1,Z(Kt,M),Dn(a,o,p,u),p=et?Lf:0,!B&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xC(a,u,o);else if(a.tag===19)xC(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)a=u.alternate,a!==null&&ng(a)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),bw(o,!1,b,u,x,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(a=b.alternate,a!==null&&ng(a)===null){o.child=b;break}a=b.sibling,b.sibling=u,u=b,b=a}bw(o,!0,u,null,x,p);break;case"together":bw(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function ra(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),io|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(kl(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(s(153));if(o.child!==null){for(a=o.child,u=Jr(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Jr(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function Ew(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Gp(a)))}function rP(a,o,u){switch(o.tag){case 3:Ae(o,o.stateNode.containerInfo),Xa(o,en,a.memoizedState.cache),fc();break;case 27:case 5:We(o);break;case 4:Ae(o,o.stateNode.containerInfo);break;case 10:Xa(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Wy(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(eo(o),o.flags|=128,null):(u&o.child.childLanes)!==0?EC(a,o,u):(eo(o),a=ra(a,o,u),a!==null?a.sibling:null);eo(o);break;case 19:var b=(a.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(kl(a,o,u,!1),p=(u&o.childLanes)!==0),b){if(p)return SC(a,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Z(Kt,Kt.current),p)break;return null;case 22:return o.lanes=0,gC(a,o,u,o.pendingProps);case 24:Xa(o,en,a.memoizedState.cache)}return ra(a,o,u)}function CC(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)nn=!0;else{if(!Ew(a,u)&&(o.flags&128)===0)return nn=!1,rP(a,o,u);nn=(a.flags&131072)!==0}else nn=!1,et&&(o.flags&1048576)!==0&&nS(o,Lf,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=gc(o.elementType),o.type=a,typeof a=="function")Ny(a)?(p=vc(a,p),o.tag=1,o=vC(null,o,a,p,u)):(o.tag=0,o=pw(null,o,a,p,u));else{if(a!=null){var b=a.$$typeof;if(b===I){o.tag=11,o=dC(null,o,a,p,u);break e}else if(b===_){o.tag=14,o=hC(null,o,a,p,u);break e}}throw o=q(a)||a,Error(s(306,o,""))}}return o;case 0:return pw(a,o,o.type,o.pendingProps,u);case 1:return p=o.type,b=vc(p,o.pendingProps),vC(a,o,p,b,u);case 3:e:{if(Ae(o,o.stateNode.containerInfo),a===null)throw Error(s(387));p=o.pendingProps;var x=o.memoizedState;b=x.element,zy(a,o),qf(o,p,null,u);var M=o.memoizedState;if(p=M.cache,Xa(o,en,p),p!==x.cache&&$y(o,[en],u,!0),Vf(),p=M.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=bC(a,o,p,u);break e}else if(p!==b){b=di(Error(s(424)),o),kf(b),o=bC(a,o,p,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for($t=yi(a.firstChild),Tn=o,et=!0,Ga=null,gi=!0,u=gS(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(fc(),p===b){o=ra(a,o,u);break e}Dn(a,o,p,u)}o=o.child}return o;case 26:return hg(a,o),a===null?(u=$A(o.type,null,o.pendingProps,null))?o.memoizedState=u:et||(u=o.type,a=o.pendingProps,p=_g(oe.current).createElement(u),p[ln]=o,p[Vn]=a,_n(p,u,a),Jt(p),o.stateNode=p):o.memoizedState=$A(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return We(o),a===null&&et&&(p=o.stateNode=MA(o.type,o.pendingProps,oe.current),Tn=o,gi=!0,b=$t,lo(o.type)?(e1=b,$t=yi(p.firstChild)):$t=b),Dn(a,o,o.pendingProps.children,u),hg(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&et&&((b=p=$t)&&(p=$P(p,o.type,o.pendingProps,gi),p!==null?(o.stateNode=p,Tn=o,$t=yi(p.firstChild),gi=!1,b=!0):b=!1),b||Ya(o)),We(o),b=o.type,x=o.pendingProps,M=a!==null?a.memoizedProps:null,p=x.children,Yw(b,x)?p=null:M!==null&&Yw(b,M)&&(o.flags|=32),o.memoizedState!==null&&(b=Gy(a,o,XR,null,null,u),fd._currentValue=b),hg(a,o),Dn(a,o,p,u),o.child;case 6:return a===null&&et&&((a=u=$t)&&(u=UP(u,o.pendingProps,gi),u!==null?(o.stateNode=u,Tn=o,$t=null,a=!0):a=!1),a||Ya(o)),null;case 13:return EC(a,o,u);case 4:return Ae(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=yc(o,null,p,u):Dn(a,o,p,u),o.child;case 11:return dC(a,o,o.type,o.pendingProps,u);case 7:return Dn(a,o,o.pendingProps,u),o.child;case 8:return Dn(a,o,o.pendingProps.children,u),o.child;case 12:return Dn(a,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,Xa(o,o.type,p.value),Dn(a,o,p.children,u),o.child;case 9:return b=o.type._context,p=o.pendingProps.children,hc(o),b=In(b),p=p(b),o.flags|=1,Dn(a,o,p,u),o.child;case 14:return hC(a,o,o.type,o.pendingProps,u);case 15:return pC(a,o,o.type,o.pendingProps,u);case 19:return SC(a,o,u);case 31:return iP(a,o,u);case 22:return gC(a,o,u,o.pendingProps);case 24:return hc(o),p=In(en),a===null?(b=ky(),b===null&&(b=Dt,x=Uy(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=u),b=x),o.memoizedState={parent:p,cache:b},jy(o),Xa(o,en,b)):((a.lanes&u)!==0&&(zy(a,o),qf(o,null,null,u),Vf()),b=a.memoizedState,x=o.memoizedState,b.parent!==p?(b={parent:p,cache:p},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Xa(o,en,p)):(p=x.cache,Xa(o,en,p),p!==b.cache&&$y(o,[en],u,!0))),Dn(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function aa(a){a.flags|=4}function xw(a,o,u,p,b){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(QC())a.flags|=8192;else throw mc=Zp,By}else a.flags&=-16777217}function AC(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!jA(o))if(QC())a.flags|=8192;else throw mc=Zp,By}function gg(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Tp():536870912,a.lanes|=o,Xl|=o)}function Qf(a,o){if(!et)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Ut(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,p=0;if(o)for(var b=a.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=u,o}function aP(a,o,u){var p=o.pendingProps;switch(_y(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return u=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),na(en),Ne(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Ll(o)?aa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,My())),Ut(o),null;case 26:var b=o.type,x=o.memoizedState;return a===null?(aa(o),x!==null?(Ut(o),AC(o,x)):(Ut(o),xw(o,b,null,p,u))):x?x!==a.memoizedState?(aa(o),Ut(o),AC(o,x)):(Ut(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&aa(o),Ut(o),xw(o,b,a,p,u)),null;case 27:if(Qe(o),u=oe.current,b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(!p){if(o.stateNode===null)throw Error(s(166));return Ut(o),null}a=ee.current,Ll(o)?iS(o):(a=MA(b,p,u),o.stateNode=a,aa(o))}return Ut(o),null;case 5:if(Qe(o),b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(!p){if(o.stateNode===null)throw Error(s(166));return Ut(o),null}if(x=ee.current,Ll(o))iS(o);else{var M=_g(oe.current);switch(x){case 1:x=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:x=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":x=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":x=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":x=M.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof p.is=="string"?M.createElement("select",{is:p.is}):M.createElement("select"),p.multiple?x.multiple=!0:p.size&&(x.size=p.size);break;default:x=typeof p.is=="string"?M.createElement(b,{is:p.is}):M.createElement(b)}}x[ln]=o,x[Vn]=p;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)x.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=x;e:switch(_n(x,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&aa(o)}}return Ut(o),xw(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(s(166));if(a=oe.current,Ll(o)){if(a=o.stateNode,u=o.memoizedProps,p=null,b=Tn,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}a[ln]=o,a=!!(a.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||EA(a.nodeValue,u)),a||Ya(o,!0)}else a=_g(a).createTextNode(p),a[ln]=o,o.stateNode=a}return Ut(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(p=Ll(o),u!==null){if(a===null){if(!p)throw Error(s(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[ln]=o}else fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),a=!1}else u=My(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(js(o),o):(js(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Ut(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Ll(o),p!==null&&p.dehydrated!==null){if(a===null){if(!b)throw Error(s(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[ln]=o}else fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),b=!1}else b=My(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(js(o),o):(js(o),null)}return js(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,a=a!==null&&a.memoizedState!==null,u&&(p=o.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),x=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==b&&(p.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),gg(o,o.updateQueue),Ut(o),null);case 4:return Ne(),a===null&&Vw(o.stateNode.containerInfo),Ut(o),null;case 10:return na(o.type),Ut(o),null;case 19:if(X(Kt),p=o.memoizedState,p===null)return Ut(o),null;if(b=(o.flags&128)!==0,x=p.rendering,x===null)if(b)Qf(p,!1);else{if(qt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=ng(a),x!==null){for(o.flags|=128,Qf(p,!1),a=x.updateQueue,o.updateQueue=a,gg(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)Jx(u,a),u=u.sibling;return Z(Kt,Kt.current&1|2),et&&ea(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&St()>bg&&(o.flags|=128,b=!0,Qf(p,!1),o.lanes=4194304)}else{if(!b)if(a=ng(x),a!==null){if(o.flags|=128,b=!0,a=a.updateQueue,o.updateQueue=a,gg(o,a),Qf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!et)return Ut(o),null}else 2*St()-p.renderingStartTime>bg&&u!==536870912&&(o.flags|=128,b=!0,Qf(p,!1),o.lanes=4194304);p.isBackwards?(x.sibling=o.child,o.child=x):(a=p.last,a!==null?a.sibling=x:o.child=x,p.last=x)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=St(),a.sibling=null,u=Kt.current,Z(Kt,b?u&1|2:u&1),et&&ea(o,p.treeForkCount),a):(Ut(o),null);case 22:case 23:return js(o),qy(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),u=o.updateQueue,u!==null&&gg(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),a!==null&&X(pc),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),na(en),Ut(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function oP(a,o){switch(_y(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return na(en),Ne(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Qe(o),null;case 31:if(o.memoizedState!==null){if(js(o),o.alternate===null)throw Error(s(340));fc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(js(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(s(340));fc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return X(Kt),null;case 4:return Ne(),null;case 10:return na(o.type),null;case 22:case 23:return js(o),qy(),a!==null&&X(pc),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return na(en),null;case 25:return null;default:return null}}function NC(a,o){switch(_y(o),o.tag){case 3:na(en),Ne();break;case 26:case 27:case 5:Qe(o);break;case 4:Ne();break;case 31:o.memoizedState!==null&&js(o);break;case 13:js(o);break;case 19:X(Kt);break;case 10:na(o.type);break;case 22:case 23:js(o),qy(),a!==null&&X(pc);break;case 24:na(en)}}function Zf(a,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var b=p.next;u=b;do{if((u.tag&a)===a){p=void 0;var x=u.create,M=u.inst;p=x(),M.destroy=p}u=u.next}while(u!==b)}}catch(B){vt(o,o.return,B)}}function no(a,o,u){try{var p=o.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var x=b.next;p=x;do{if((p.tag&a)===a){var M=p.inst,B=M.destroy;if(B!==void 0){M.destroy=void 0,b=o;var Y=u,ne=B;try{ne()}catch(ce){vt(b,Y,ce)}}}p=p.next}while(p!==x)}}catch(ce){vt(o,o.return,ce)}}function TC(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{yS(o,u)}catch(p){vt(a,a.return,p)}}}function IC(a,o,u){u.props=vc(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(p){vt(a,o,p)}}function Jf(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof u=="function"?a.refCleanup=u(p):u.current=p}}catch(b){vt(a,o,b)}}function br(a,o){var u=a.ref,p=a.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(b){vt(a,o,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){vt(a,o,b)}else u.current=null}function DC(a){var o=a.type,u=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(b){vt(a,a.return,b)}}function Sw(a,o,u){try{var p=a.stateNode;DP(p,a.type,u,o),p[Vn]=o}catch(b){vt(a,a.return,b)}}function _C(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&lo(a.type)||a.tag===4}function Cw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_C(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&lo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Aw(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=li));else if(p!==4&&(p===27&&lo(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(Aw(a,o,u),a=a.sibling;a!==null;)Aw(a,o,u),a=a.sibling}function mg(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(p!==4&&(p===27&&lo(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(mg(a,o,u),a=a.sibling;a!==null;)mg(a,o,u),a=a.sibling}function OC(a){var o=a.stateNode,u=a.memoizedProps;try{for(var p=a.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);_n(o,p,u),o[ln]=a,o[Vn]=u}catch(x){vt(a,a.return,x)}}var oa=!1,sn=!1,Nw=!1,MC=typeof WeakSet=="function"?WeakSet:Set,wn=null;function cP(a,o){if(a=a.containerInfo,Kw=Lg,a=Vx(a),vy(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var b=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var M=0,B=-1,Y=-1,ne=0,ce=0,ue=a,ie=null;t:for(;;){for(var re;ue!==u||b!==0&&ue.nodeType!==3||(B=M+b),ue!==x||p!==0&&ue.nodeType!==3||(Y=M+p),ue.nodeType===3&&(M+=ue.nodeValue.length),(re=ue.firstChild)!==null;)ie=ue,ue=re;for(;;){if(ue===a)break t;if(ie===u&&++ne===b&&(B=M),ie===x&&++ce===p&&(Y=M),(re=ue.nextSibling)!==null)break;ue=ie,ie=ue.parentNode}ue=re}u=B===-1||Y===-1?null:{start:B,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(Gw={focusedElem:a,selectionRange:u},Lg=!1,wn=o;wn!==null;)if(o=wn,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,wn=a;else for(;wn!==null;){switch(o=wn,x=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)b=a[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,u=o,b=x.memoizedProps,x=x.memoizedState,p=u.stateNode;try{var Te=vc(u.type,b);a=p.getSnapshotBeforeUpdate(Te,x),p.__reactInternalSnapshotBeforeUpdate=a}catch(Be){vt(u,u.return,Be)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Qw(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Qw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=o.sibling,a!==null){a.return=o.return,wn=a;break}wn=o.return}}function RC(a,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:la(a,u),p&4&&Zf(5,u);break;case 1:if(la(a,u),p&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(M){vt(u,u.return,M)}else{var b=vc(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(b,o,a.__reactInternalSnapshotBeforeUpdate)}catch(M){vt(u,u.return,M)}}p&64&&TC(u),p&512&&Jf(u,u.return);break;case 3:if(la(a,u),p&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{yS(a,o)}catch(M){vt(u,u.return,M)}}break;case 27:o===null&&p&4&&OC(u);case 26:case 5:la(a,u),o===null&&p&4&&DC(u),p&512&&Jf(u,u.return);break;case 12:la(a,u);break;case 31:la(a,u),p&4&&UC(a,u);break;case 13:la(a,u),p&4&&LC(a,u),p&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=yP.bind(null,u),LP(a,u))));break;case 22:if(p=u.memoizedState!==null||oa,!p){o=o!==null&&o.memoizedState!==null||sn,b=oa;var x=sn;oa=p,(sn=o)&&!x?ua(a,u,(u.subtreeFlags&8772)!==0):la(a,u),oa=b,sn=x}break;case 30:break;default:la(a,u)}}function PC(a){var o=a.alternate;o!==null&&(a.alternate=null,PC(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&xf(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Bt=null,ps=!1;function ca(a,o,u){for(u=u.child;u!==null;)$C(a,o,u),u=u.sibling}function $C(a,o,u){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Zo,u)}catch{}switch(u.tag){case 26:sn||br(u,o),ca(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||br(u,o);var p=Bt,b=ps;lo(u.type)&&(Bt=u.stateNode,ps=!1),ca(a,o,u),cd(u.stateNode),Bt=p,ps=b;break;case 5:sn||br(u,o);case 6:if(p=Bt,b=ps,Bt=null,ca(a,o,u),Bt=p,ps=b,Bt!==null)if(ps)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(u.stateNode)}catch(x){vt(u,o,x)}else try{Bt.removeChild(u.stateNode)}catch(x){vt(u,o,x)}break;case 18:Bt!==null&&(ps?(a=Bt,TA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),iu(a)):TA(Bt,u.stateNode));break;case 4:p=Bt,b=ps,Bt=u.stateNode.containerInfo,ps=!0,ca(a,o,u),Bt=p,ps=b;break;case 0:case 11:case 14:case 15:no(2,u,o),sn||no(4,u,o),ca(a,o,u);break;case 1:sn||(br(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&IC(u,o,p)),ca(a,o,u);break;case 21:ca(a,o,u);break;case 22:sn=(p=sn)||u.memoizedState!==null,ca(a,o,u),sn=p;break;default:ca(a,o,u)}}function UC(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{iu(a)}catch(u){vt(o,o.return,u)}}}function LC(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{iu(a)}catch(u){vt(o,o.return,u)}}function lP(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new MC),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new MC),o;default:throw Error(s(435,a.tag))}}function yg(a,o){var u=lP(a);o.forEach(function(p){if(!u.has(p)){u.add(p);var b=wP.bind(null,a,p);p.then(b,b)}})}function gs(a,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var b=u[p],x=a,M=o,B=M;e:for(;B!==null;){switch(B.tag){case 27:if(lo(B.type)){Bt=B.stateNode,ps=!1;break e}break;case 5:Bt=B.stateNode,ps=!1;break e;case 3:case 4:Bt=B.stateNode.containerInfo,ps=!0;break e}B=B.return}if(Bt===null)throw Error(s(160));$C(x,M,b),Bt=null,ps=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)kC(o,a),o=o.sibling}var Wi=null;function kC(a,o){var u=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:gs(o,a),ms(a),p&4&&(no(3,a,a.return),Zf(3,a),no(5,a,a.return));break;case 1:gs(o,a),ms(a),p&512&&(sn||u===null||br(u,u.return)),p&64&&oa&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var b=Wi;if(gs(o,a),ms(a),p&512&&(sn||u===null||br(u,u.return)),p&4){var x=u!==null?u.memoizedState:null;if(p=a.memoizedState,u===null)if(p===null)if(a.stateNode===null){e:{p=a.type,u=a.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":x=b.getElementsByTagName("title")[0],(!x||x[tc]||x[ln]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(p),b.head.insertBefore(x,b.querySelector("head > title"))),_n(x,p,u),x[ln]=a,Jt(x),p=x;break e;case"link":var M=kA("link","href",b).get(p+(u.href||""));if(M){for(var B=0;B<M.length;B++)if(x=M[B],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(B,1);break t}}x=b.createElement(p),_n(x,p,u),b.head.appendChild(x);break;case"meta":if(M=kA("meta","content",b).get(p+(u.content||""))){for(B=0;B<M.length;B++)if(x=M[B],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(B,1);break t}}x=b.createElement(p),_n(x,p,u),b.head.appendChild(x);break;default:throw Error(s(468,p))}x[ln]=a,Jt(x),p=x}a.stateNode=p}else BA(b,a.type,a.stateNode);else a.stateNode=LA(b,p,a.memoizedProps);else x!==p?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,p===null?BA(b,a.type,a.stateNode):LA(b,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Sw(a,a.memoizedProps,u.memoizedProps)}break;case 27:gs(o,a),ms(a),p&512&&(sn||u===null||br(u,u.return)),u!==null&&p&4&&Sw(a,a.memoizedProps,u.memoizedProps);break;case 5:if(gs(o,a),ms(a),p&512&&(sn||u===null||br(u,u.return)),a.flags&32){b=a.stateNode;try{Xr(b,"")}catch(Te){vt(a,a.return,Te)}}p&4&&a.stateNode!=null&&(b=a.memoizedProps,Sw(a,b,u!==null?u.memoizedProps:b)),p&1024&&(Nw=!0);break;case 6:if(gs(o,a),ms(a),p&4){if(a.stateNode===null)throw Error(s(162));p=a.memoizedProps,u=a.stateNode;try{u.nodeValue=p}catch(Te){vt(a,a.return,Te)}}break;case 3:if(Rg=null,b=Wi,Wi=Og(o.containerInfo),gs(o,a),Wi=b,ms(a),p&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(o.containerInfo)}catch(Te){vt(a,a.return,Te)}Nw&&(Nw=!1,BC(a));break;case 4:p=Wi,Wi=Og(a.stateNode.containerInfo),gs(o,a),ms(a),Wi=p;break;case 12:gs(o,a),ms(a);break;case 31:gs(o,a),ms(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 13:gs(o,a),ms(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(vg=St()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 22:b=a.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,ne=oa,ce=sn;if(oa=ne||b,sn=ce||Y,gs(o,a),sn=ce,oa=ne,ms(a),p&8192)e:for(o=a.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||Y||oa||sn||bc(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){Y=u=o;try{if(x=Y.stateNode,b)M=x.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{B=Y.stateNode;var ue=Y.memoizedProps.style,ie=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;B.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Te){vt(Y,Y.return,Te)}}}else if(o.tag===6){if(u===null){Y=o;try{Y.stateNode.nodeValue=b?"":Y.memoizedProps}catch(Te){vt(Y,Y.return,Te)}}}else if(o.tag===18){if(u===null){Y=o;try{var re=Y.stateNode;b?IA(re,!0):IA(Y.stateNode,!1)}catch(Te){vt(Y,Y.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,yg(a,u))));break;case 19:gs(o,a),ms(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 30:break;case 21:break;default:gs(o,a),ms(a)}}function ms(a){var o=a.flags;if(o&2){try{for(var u,p=a.return;p!==null;){if(_C(p)){u=p;break}p=p.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var b=u.stateNode,x=Cw(a);mg(a,x,b);break;case 5:var M=u.stateNode;u.flags&32&&(Xr(M,""),u.flags&=-33);var B=Cw(a);mg(a,B,M);break;case 3:case 4:var Y=u.stateNode.containerInfo,ne=Cw(a);Aw(a,ne,Y);break;default:throw Error(s(161))}}catch(ce){vt(a,a.return,ce)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function BC(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;BC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function la(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)RC(a,o.alternate,o),o=o.sibling}function bc(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:no(4,o,o.return),bc(o);break;case 1:br(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&IC(o,o.return,u),bc(o);break;case 27:cd(o.stateNode);case 26:case 5:br(o,o.return),bc(o);break;case 22:o.memoizedState===null&&bc(o);break;case 30:bc(o);break;default:bc(o)}a=a.sibling}}function ua(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,b=a,x=o,M=x.flags;switch(x.tag){case 0:case 11:case 15:ua(b,x,u),Zf(4,x);break;case 1:if(ua(b,x,u),p=x,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ne){vt(p,p.return,ne)}if(p=x,b=p.updateQueue,b!==null){var B=p.stateNode;try{var Y=b.shared.hiddenCallbacks;if(Y!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Y.length;b++)mS(Y[b],B)}catch(ne){vt(p,p.return,ne)}}u&&M&64&&TC(x),Jf(x,x.return);break;case 27:OC(x);case 26:case 5:ua(b,x,u),u&&p===null&&M&4&&DC(x),Jf(x,x.return);break;case 12:ua(b,x,u);break;case 31:ua(b,x,u),u&&M&4&&UC(b,x);break;case 13:ua(b,x,u),u&&M&4&&LC(b,x);break;case 22:x.memoizedState===null&&ua(b,x,u),Jf(x,x.return);break;case 30:break;default:ua(b,x,u)}o=o.sibling}}function Tw(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Bf(u))}function Iw(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Bf(a))}function Ki(a,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)jC(a,o,u,p),o=o.sibling}function jC(a,o,u,p){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(a,o,u,p),b&2048&&Zf(9,o);break;case 1:Ki(a,o,u,p);break;case 3:Ki(a,o,u,p),b&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Bf(a)));break;case 12:if(b&2048){Ki(a,o,u,p),a=o.stateNode;try{var x=o.memoizedProps,M=x.id,B=x.onPostCommit;typeof B=="function"&&B(M,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){vt(o,o.return,Y)}}else Ki(a,o,u,p);break;case 31:Ki(a,o,u,p);break;case 13:Ki(a,o,u,p);break;case 23:break;case 22:x=o.stateNode,M=o.alternate,o.memoizedState!==null?x._visibility&2?Ki(a,o,u,p):ed(a,o):x._visibility&2?Ki(a,o,u,p):(x._visibility|=2,Kl(a,o,u,p,(o.subtreeFlags&10256)!==0||!1)),b&2048&&Tw(M,o);break;case 24:Ki(a,o,u,p),b&2048&&Iw(o.alternate,o);break;default:Ki(a,o,u,p)}}function Kl(a,o,u,p,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var x=a,M=o,B=u,Y=p,ne=M.flags;switch(M.tag){case 0:case 11:case 15:Kl(x,M,B,Y,b),Zf(8,M);break;case 23:break;case 22:var ce=M.stateNode;M.memoizedState!==null?ce._visibility&2?Kl(x,M,B,Y,b):ed(x,M):(ce._visibility|=2,Kl(x,M,B,Y,b)),b&&ne&2048&&Tw(M.alternate,M);break;case 24:Kl(x,M,B,Y,b),b&&ne&2048&&Iw(M.alternate,M);break;default:Kl(x,M,B,Y,b)}o=o.sibling}}function ed(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,p=o,b=p.flags;switch(p.tag){case 22:ed(u,p),b&2048&&Tw(p.alternate,p);break;case 24:ed(u,p),b&2048&&Iw(p.alternate,p);break;default:ed(u,p)}o=o.sibling}}var td=8192;function Gl(a,o,u){if(a.subtreeFlags&td)for(a=a.child;a!==null;)zC(a,o,u),a=a.sibling}function zC(a,o,u){switch(a.tag){case 26:Gl(a,o,u),a.flags&td&&a.memoizedState!==null&&YP(u,Wi,a.memoizedState,a.memoizedProps);break;case 5:Gl(a,o,u);break;case 3:case 4:var p=Wi;Wi=Og(a.stateNode.containerInfo),Gl(a,o,u),Wi=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=td,td=16777216,Gl(a,o,u),td=p):Gl(a,o,u));break;default:Gl(a,o,u)}}function HC(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function nd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];wn=p,VC(p,a)}HC(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)FC(a),a=a.sibling}function FC(a){switch(a.tag){case 0:case 11:case 15:nd(a),a.flags&2048&&no(9,a,a.return);break;case 3:nd(a);break;case 12:nd(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,wg(a)):nd(a);break;default:nd(a)}}function wg(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];wn=p,VC(p,a)}HC(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:no(8,o,o.return),wg(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,wg(o));break;default:wg(o)}a=a.sibling}}function VC(a,o){for(;wn!==null;){var u=wn;switch(u.tag){case 0:case 11:case 15:no(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Bf(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,wn=p;else e:for(u=a;wn!==null;){p=wn;var b=p.sibling,x=p.return;if(PC(p),p===u){wn=null;break e}if(b!==null){b.return=x,wn=b;break e}wn=x}}}var uP={getCacheForType:function(a){var o=In(en),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return In(en).controller.signal}},fP=typeof WeakMap=="function"?WeakMap:Map,dt=0,Dt=null,Ye=null,Ze=0,wt=0,zs=null,so=!1,Yl=!1,Dw=!1,fa=0,qt=0,io=0,Ec=0,_w=0,Hs=0,Xl=0,sd=null,ys=null,Ow=!1,vg=0,qC=0,bg=1/0,Eg=null,ro=null,fn=0,ao=null,Ql=null,da=0,Mw=0,Rw=null,WC=null,id=0,Pw=null;function Fs(){return(dt&2)!==0&&Ze!==0?Ze&-Ze:R.T!==null?jw():ci()}function KC(){if(Hs===0)if((Ze&536870912)===0||et){var a=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),Hs=a}else Hs=536870912;return a=Bs.current,a!==null&&(a.flags|=32),Hs}function ws(a,o,u){(a===Dt&&(wt===2||wt===9)||a.cancelPendingCommit!==null)&&(Zl(a,0),oo(a,Ze,Hs,!1)),ja(a,u),((dt&2)===0||a!==Dt)&&(a===Dt&&((dt&2)===0&&(Ec|=u),qt===4&&oo(a,Ze,Hs,!1)),Er(a))}function GC(a,o,u){if((dt&6)!==0)throw Error(s(327));var p=!u&&(o&127)===0&&(o&a.expiredLanes)===0||ec(a,o),b=p?pP(a,o):Uw(a,o,!0),x=p;do{if(b===0){Yl&&!p&&oo(a,o,0,!1);break}else{if(u=a.current.alternate,x&&!dP(u)){b=Uw(a,o,!1),x=!1;continue}if(b===2){if(x=o,a.errorRecoveryDisabledLanes&x)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var B=a;b=sd;var Y=B.current.memoizedState.isDehydrated;if(Y&&(Zl(B,M).flags|=256),M=Uw(B,M,!1),M!==2){if(Dw&&!Y){B.errorRecoveryDisabledLanes|=x,Ec|=x,b=4;break e}x=ys,ys=b,x!==null&&(ys===null?ys=x:ys.push.apply(ys,x))}b=M}if(x=!1,b!==2)continue}}if(b===1){Zl(a,0),oo(a,o,0,!0);break}e:{switch(p=a,x=b,x){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:oo(p,o,Hs,!so);break e;case 2:ys=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(b=vg+300-St(),10<b)){if(oo(p,o,Hs,!so),yl(p,0,!0)!==0)break e;da=o,p.timeoutHandle=AA(YC.bind(null,p,u,ys,Eg,Ow,o,Hs,Ec,Xl,so,x,"Throttled",-0,0),b);break e}YC(p,u,ys,Eg,Ow,o,Hs,Ec,Xl,so,x,null,-0,0)}}break}while(!0);Er(a)}function YC(a,o,u,p,b,x,M,B,Y,ne,ce,ue,ie,re){if(a.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},zC(o,x,ue);var Te=(x&62914560)===x?vg-St():(x&4194048)===x?qC-St():0;if(Te=XP(ue,Te),Te!==null){da=x,a.cancelPendingCommit=Te(sA.bind(null,a,o,x,u,p,b,M,B,Y,ce,ue,null,ie,re)),oo(a,x,M,!ne);return}}sA(a,o,x,u,p,b,M,B,Y)}function dP(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var b=u[p],x=b.getSnapshot;b=b.value;try{if(!Ls(x(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oo(a,o,u,p){o&=~_w,o&=~Ec,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var b=o;0<b;){var x=31-ss(b),M=1<<x;p[x]=-1,b&=~M}u!==0&&Ip(a,u,o)}function xg(){return(dt&6)===0?(rd(0),!1):!0}function $w(){if(Ye!==null){if(wt===0)var a=Ye.return;else a=Ye,ta=dc=null,Qy(a),Hl=null,zf=0,a=Ye;for(;a!==null;)NC(a.alternate,a),a=a.return;Ye=null}}function Zl(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,MP(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),da=0,$w(),Dt=a,Ye=u=Jr(a.current,null),Ze=o,wt=0,zs=null,so=!1,Yl=ec(a,o),Dw=!1,Xl=Hs=_w=Ec=io=qt=0,ys=sd=null,Ow=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var b=31-ss(p),x=1<<b;o|=a[b],p&=~x}return fa=o,Fp(),u}function XC(a,o){Fe=null,R.H=Yf,o===zl||o===Qp?(o=dS(),wt=3):o===By?(o=dS(),wt=4):wt=o===hw?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zs=o,Ye===null&&(qt=1,fg(a,di(o,a.current)))}function QC(){var a=Bs.current;return a===null?!0:(Ze&4194048)===Ze?mi===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?a===mi:!1}function ZC(){var a=R.H;return R.H=Yf,a===null?Yf:a}function JC(){var a=R.A;return R.A=uP,a}function Sg(){qt=4,so||(Ze&4194048)!==Ze&&Bs.current!==null||(Yl=!0),(io&134217727)===0&&(Ec&134217727)===0||Dt===null||oo(Dt,Ze,Hs,!1)}function Uw(a,o,u){var p=dt;dt|=2;var b=ZC(),x=JC();(Dt!==a||Ze!==o)&&(Eg=null,Zl(a,o)),o=!1;var M=qt;e:do try{if(wt!==0&&Ye!==null){var B=Ye,Y=zs;switch(wt){case 8:$w(),M=6;break e;case 3:case 2:case 9:case 6:Bs.current===null&&(o=!0);var ne=wt;if(wt=0,zs=null,Jl(a,B,Y,ne),u&&Yl){M=0;break e}break;default:ne=wt,wt=0,zs=null,Jl(a,B,Y,ne)}}hP(),M=qt;break}catch(ce){XC(a,ce)}while(!0);return o&&a.shellSuspendCounter++,ta=dc=null,dt=p,R.H=b,R.A=x,Ye===null&&(Dt=null,Ze=0,Fp()),M}function hP(){for(;Ye!==null;)eA(Ye)}function pP(a,o){var u=dt;dt|=2;var p=ZC(),b=JC();Dt!==a||Ze!==o?(Eg=null,bg=St()+500,Zl(a,o)):Yl=ec(a,o);e:do try{if(wt!==0&&Ye!==null){o=Ye;var x=zs;t:switch(wt){case 1:wt=0,zs=null,Jl(a,o,x,1);break;case 2:case 9:if(uS(x)){wt=0,zs=null,tA(o);break}o=function(){wt!==2&&wt!==9||Dt!==a||(wt=7),Er(a)},x.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:uS(x)?(wt=0,zs=null,tA(o)):(wt=0,zs=null,Jl(a,o,x,7));break;case 5:var M=null;switch(Ye.tag){case 26:M=Ye.memoizedState;case 5:case 27:var B=Ye;if(M?jA(M):B.stateNode.complete){wt=0,zs=null;var Y=B.sibling;if(Y!==null)Ye=Y;else{var ne=B.return;ne!==null?(Ye=ne,Cg(ne)):Ye=null}break t}}wt=0,zs=null,Jl(a,o,x,5);break;case 6:wt=0,zs=null,Jl(a,o,x,6);break;case 8:$w(),qt=6;break e;default:throw Error(s(462))}}gP();break}catch(ce){XC(a,ce)}while(!0);return ta=dc=null,R.H=p,R.A=b,dt=u,Ye!==null?0:(Dt=null,Ze=0,Fp(),qt)}function gP(){for(;Ye!==null&&!cr();)eA(Ye)}function eA(a){var o=CC(a.alternate,a,fa);a.memoizedProps=a.pendingProps,o===null?Cg(a):Ye=o}function tA(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=wC(u,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=wC(u,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:Qy(o);default:NC(u,o),o=Ye=Jx(o,fa),o=CC(u,o,fa)}a.memoizedProps=a.pendingProps,o===null?Cg(a):Ye=o}function Jl(a,o,u,p){ta=dc=null,Qy(o),Hl=null,zf=0;var b=o.return;try{if(sP(a,b,o,u,Ze)){qt=1,fg(a,di(u,a.current)),Ye=null;return}}catch(x){if(b!==null)throw Ye=b,x;qt=1,fg(a,di(u,a.current)),Ye=null;return}o.flags&32768?(et||p===1?a=!0:Yl||(Ze&536870912)!==0?a=!1:(so=a=!0,(p===2||p===9||p===3||p===6)&&(p=Bs.current,p!==null&&p.tag===13&&(p.flags|=16384))),nA(o,a)):Cg(o)}function Cg(a){var o=a;do{if((o.flags&32768)!==0){nA(o,so);return}a=o.return;var u=aP(o.alternate,o,fa);if(u!==null){Ye=u;return}if(o=o.sibling,o!==null){Ye=o;return}Ye=o=a}while(o!==null);qt===0&&(qt=5)}function nA(a,o){do{var u=oP(a.alternate,a);if(u!==null){u.flags&=32767,Ye=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){Ye=a;return}Ye=a=u}while(a!==null);qt=6,Ye=null}function sA(a,o,u,p,b,x,M,B,Y){a.cancelPendingCommit=null;do Ag();while(fn!==0);if((dt&6)!==0)throw Error(s(327));if(o!==null){if(o===a.current)throw Error(s(177));if(x=o.lanes|o.childLanes,x|=Cy,Gr(a,u,x,M,B,Y),a===Dt&&(Ye=Dt=null,Ze=0),Ql=o,ao=a,da=u,Mw=x,Rw=b,WC=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,vP(Bi,function(){return cA(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=R.T,R.T=null,b=k.p,k.p=2,M=dt,dt|=4;try{cP(a,o,u)}finally{dt=M,k.p=b,R.T=p}}fn=1,iA(),rA(),aA()}}function iA(){if(fn===1){fn=0;var a=ao,o=Ql,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=R.T,R.T=null;var p=k.p;k.p=2;var b=dt;dt|=4;try{kC(o,a);var x=Gw,M=Vx(a.containerInfo),B=x.focusedElem,Y=x.selectionRange;if(M!==B&&B&&B.ownerDocument&&Fx(B.ownerDocument.documentElement,B)){if(Y!==null&&vy(B)){var ne=Y.start,ce=Y.end;if(ce===void 0&&(ce=ne),"selectionStart"in B)B.selectionStart=ne,B.selectionEnd=Math.min(ce,B.value.length);else{var ue=B.ownerDocument||document,ie=ue&&ue.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),Te=B.textContent.length,Be=Math.min(Y.start,Te),Nt=Y.end===void 0?Be:Math.min(Y.end,Te);!re.extend&&Be>Nt&&(M=Nt,Nt=Be,Be=M);var J=Hx(B,Be),Q=Hx(B,Nt);if(J&&Q&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==Q.node||re.focusOffset!==Q.offset)){var te=ue.createRange();te.setStart(J.node,J.offset),re.removeAllRanges(),Be>Nt?(re.addRange(te),re.extend(Q.node,Q.offset)):(te.setEnd(Q.node,Q.offset),re.addRange(te))}}}}for(ue=[],re=B;re=re.parentNode;)re.nodeType===1&&ue.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<ue.length;B++){var le=ue[B];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Lg=!!Kw,Gw=Kw=null}finally{dt=b,k.p=p,R.T=u}}a.current=o,fn=2}}function rA(){if(fn===2){fn=0;var a=ao,o=Ql,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=R.T,R.T=null;var p=k.p;k.p=2;var b=dt;dt|=4;try{RC(a,o.alternate,o)}finally{dt=b,k.p=p,R.T=u}}fn=3}}function aA(){if(fn===4||fn===3){fn=0,lr();var a=ao,o=Ql,u=da,p=WC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fn=5:(fn=0,Ql=ao=null,oA(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(ro=null),Ef(u),o=o.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Zo,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=R.T,b=k.p,k.p=2,R.T=null;try{for(var x=a.onRecoverableError,M=0;M<p.length;M++){var B=p[M];x(B.value,{componentStack:B.stack})}}finally{R.T=o,k.p=b}}(da&3)!==0&&Ag(),Er(a),b=a.pendingLanes,(u&261930)!==0&&(b&42)!==0?a===Pw?id++:(id=0,Pw=a):id=0,rd(0)}}function oA(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Bf(o)))}function Ag(){return iA(),rA(),aA(),cA()}function cA(){if(fn!==5)return!1;var a=ao,o=Mw;Mw=0;var u=Ef(da),p=R.T,b=k.p;try{k.p=32>u?32:u,R.T=null,u=Rw,Rw=null;var x=ao,M=da;if(fn=0,Ql=ao=null,da=0,(dt&6)!==0)throw Error(s(331));var B=dt;if(dt|=4,FC(x.current),jC(x,x.current,M,u),dt=B,rd(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Zo,x)}catch{}return!0}finally{k.p=b,R.T=p,oA(a,o)}}function lA(a,o,u){o=di(u,o),o=dw(a.stateNode,o,2),a=Ja(a,o,2),a!==null&&(ja(a,2),Er(a))}function vt(a,o,u){if(a.tag===3)lA(a,a,u);else for(;o!==null;){if(o.tag===3){lA(o,a,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ro===null||!ro.has(p))){a=di(u,a),u=uC(2),p=Ja(o,u,2),p!==null&&(fC(u,p,o,a),ja(p,2),Er(p));break}}o=o.return}}function Lw(a,o,u){var p=a.pingCache;if(p===null){p=a.pingCache=new fP;var b=new Set;p.set(o,b)}else b=p.get(o),b===void 0&&(b=new Set,p.set(o,b));b.has(u)||(Dw=!0,b.add(u),a=mP.bind(null,a,o,u),o.then(a,a))}function mP(a,o,u){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Dt===a&&(Ze&u)===u&&(qt===4||qt===3&&(Ze&62914560)===Ze&&300>St()-vg?(dt&2)===0&&Zl(a,0):_w|=u,Xl===Ze&&(Xl=0)),Er(a)}function uA(a,o){o===0&&(o=Tp()),a=lc(a,o),a!==null&&(ja(a,o),Er(a))}function yP(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),uA(a,u)}function wP(a,o){var u=0;switch(a.tag){case 31:case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(u=b.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(o),uA(a,u)}function vP(a,o){return fs(a,o)}var Ng=null,eu=null,kw=!1,Tg=!1,Bw=!1,co=0;function Er(a){a!==eu&&a.next===null&&(eu===null?Ng=eu=a:eu=eu.next=a),Tg=!0,kw||(kw=!0,EP())}function rd(a,o){if(!Bw&&Tg){Bw=!0;do for(var u=!1,p=Ng;p!==null;){if(a!==0){var b=p.pendingLanes;if(b===0)var x=0;else{var M=p.suspendedLanes,B=p.pingedLanes;x=(1<<31-ss(42|a)+1)-1,x&=b&~(M&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,pA(p,x))}else x=Ze,x=yl(p,p===Dt?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||ec(p,x)||(u=!0,pA(p,x));p=p.next}while(u);Bw=!1}}function bP(){fA()}function fA(){Tg=kw=!1;var a=0;co!==0&&OP()&&(a=co);for(var o=St(),u=null,p=Ng;p!==null;){var b=p.next,x=dA(p,o);x===0?(p.next=null,u===null?Ng=b:u.next=b,b===null&&(eu=u)):(u=p,(a!==0||(x&3)!==0)&&(Tg=!0)),p=b}fn!==0&&fn!==5||rd(a),co!==0&&(co=0)}function dA(a,o){for(var u=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var M=31-ss(x),B=1<<M,Y=b[M];Y===-1?((B&u)===0||(B&p)!==0)&&(b[M]=ry(B,o)):Y<=o&&(a.expiredLanes|=B),x&=~B}if(o=Dt,u=Ze,u=yl(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,u===0||a===o&&(wt===2||wt===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&ns(p),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||ec(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(p!==null&&ns(p),Ef(u)){case 2:case 8:u=Wr;break;case 32:u=Bi;break;case 268435456:u=zi;break;default:u=Bi}return p=hA.bind(null,a),u=fs(u,p),a.callbackPriority=o,a.callbackNode=u,o}return p!==null&&p!==null&&ns(p),a.callbackPriority=2,a.callbackNode=null,2}function hA(a,o){if(fn!==0&&fn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Ag()&&a.callbackNode!==u)return null;var p=Ze;return p=yl(a,a===Dt?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(GC(a,p,o),dA(a,St()),a.callbackNode!=null&&a.callbackNode===u?hA.bind(null,a):null)}function pA(a,o){if(Ag())return null;GC(a,o,!0)}function EP(){RP(function(){(dt&6)!==0?fs(oi,bP):fA()})}function jw(){if(co===0){var a=Bl;a===0&&(a=ka,ka<<=1,(ka&261888)===0&&(ka=256)),co=a}return co}function gA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cl(""+a)}function mA(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function xP(a,o,u,p,b){if(o==="submit"&&u&&u.stateNode===b){var x=gA((b[Vn]||null).action),M=p.submitter;M&&(o=(o=M[Vn]||null)?gA(o.formAction):M.getAttribute("formAction"),o!==null&&(x=o,M=null));var B=new un("action","action",null,p,b);a.push({event:B,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(co!==0){var Y=M?mA(b,M):new FormData(b);aw(u,{pending:!0,data:Y,method:b.method,action:x},null,Y)}}else typeof x=="function"&&(B.preventDefault(),Y=M?mA(b,M):new FormData(b),aw(u,{pending:!0,data:Y,method:b.method,action:x},x,Y))},currentTarget:b}]})}}for(var zw=0;zw<Sy.length;zw++){var Hw=Sy[zw],SP=Hw.toLowerCase(),CP=Hw[0].toUpperCase()+Hw.slice(1);qi(SP,"on"+CP)}qi(Kx,"onAnimationEnd"),qi(Gx,"onAnimationIteration"),qi(Yx,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(jR,"onTransitionRun"),qi(zR,"onTransitionStart"),qi(HR,"onTransitionCancel"),qi(Xx,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ad));function yA(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var p=a[u],b=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var M=p.length-1;0<=M;M--){var B=p[M],Y=B.instance,ne=B.currentTarget;if(B=B.listener,Y!==x&&b.isPropagationStopped())break e;x=B,b.currentTarget=ne;try{x(b)}catch(ce){Hp(ce)}b.currentTarget=null,x=Y}else for(M=0;M<p.length;M++){if(B=p[M],Y=B.instance,ne=B.currentTarget,B=B.listener,Y!==x&&b.isPropagationStopped())break e;x=B,b.currentTarget=ne;try{x(b)}catch(ce){Hp(ce)}b.currentTarget=null,x=Y}}}}function Xe(a,o){var u=o[hr];u===void 0&&(u=o[hr]=new Set);var p=a+"__bubble";u.has(p)||(wA(o,a,2,!1),u.add(p))}function Fw(a,o,u){var p=0;o&&(p|=4),wA(u,a,p,o)}var Ig="_reactListening"+Math.random().toString(36).slice(2);function Vw(a){if(!a[Ig]){a[Ig]=!0,Rp.forEach(function(u){u!=="selectionchange"&&(AP.has(u)||Fw(u,!1,a),Fw(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Ig]||(o[Ig]=!0,Fw("selectionchange",!1,o))}}function wA(a,o,u,p){switch(KA(o)){case 2:var b=JP;break;case 8:b=e$;break;default:b=r1}u=b.bind(null,o,u,a),b=void 0,!Df||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(o,u,{capture:!0,passive:b}):a.addEventListener(o,u,!0):b!==void 0?a.addEventListener(o,u,{passive:b}):a.addEventListener(o,u,!1)}function qw(a,o,u,p,b){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var B=p.stateNode.containerInfo;if(B===b)break;if(M===4)for(M=p.return;M!==null;){var Y=M.tag;if((Y===3||Y===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;B!==null;){if(M=Us(B),M===null)return;if(Y=M.tag,Y===5||Y===6||Y===26||Y===27){p=x=M;continue e}B=B.parentNode}}p=p.return}Bp(function(){var ne=x,ce=If(u),ue=[];e:{var ie=Qx.get(a);if(ie!==void 0){var re=un,Te=a;switch(a){case"keypress":if(z(u)===0)break e;case"keydown":case"keyup":re=wR;break;case"focusin":Te="focus",re=py;break;case"focusout":Te="blur",re=py;break;case"beforeblur":case"afterblur":re=py;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=_f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=ER;break;case Kx:case Gx:case Yx:re=lR;break;case Xx:re=SR;break;case"scroll":case"scrollend":re=qn;break;case"wheel":re=AR;break;case"copy":case"cut":case"paste":re=fR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ix;break;case"toggle":case"beforetoggle":re=TR}var Be=(o&4)!==0,Nt=!Be&&(a==="scroll"||a==="scrollend"),J=Be?ie!==null?ie+"Capture":null:ie;Be=[];for(var Q=ne,te;Q!==null;){var le=Q;if(te=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||te===null||J===null||(le=ic(Q,J),le!=null&&Be.push(od(Q,le,te))),Nt)break;Q=Q.return}0<Be.length&&(ie=new re(ie,Te,null,u,ce),ue.push({event:ie,listeners:Be}))}}if((o&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ie&&u!==Vi&&(Te=u.relatedTarget||u.fromElement)&&(Us(Te)||Te[za]))break e;if((re||ie)&&(ie=ce.window===ce?ce:(ie=ce.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(Te=u.relatedTarget||u.toElement,re=ne,Te=Te?Us(Te):null,Te!==null&&(Nt=r(Te),Be=Te.tag,Te!==Nt||Be!==5&&Be!==27&&Be!==6)&&(Te=null)):(re=null,Te=ne),re!==Te)){if(Be=_f,le="onMouseLeave",J="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Be=Ix,le="onPointerLeave",J="onPointerEnter",Q="pointer"),Nt=re==null?ie:nc(re),te=Te==null?ie:nc(Te),ie=new Be(le,Q+"leave",re,u,ce),ie.target=Nt,ie.relatedTarget=te,le=null,Us(ce)===ne&&(Be=new Be(J,Q+"enter",Te,u,ce),Be.target=te,Be.relatedTarget=Nt,le=Be),Nt=le,re&&Te)t:{for(Be=NP,J=re,Q=Te,te=0,le=J;le;le=Be(le))te++;le=0;for(var $e=Q;$e;$e=Be($e))le++;for(;0<te-le;)J=Be(J),te--;for(;0<le-te;)Q=Be(Q),le--;for(;te--;){if(J===Q||Q!==null&&J===Q.alternate){Be=J;break t}J=Be(J),Q=Be(Q)}Be=null}else Be=null;re!==null&&vA(ue,ie,re,Be,!1),Te!==null&&Nt!==null&&vA(ue,Nt,Te,Be,!0)}}e:{if(ie=ne?nc(ne):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var rt=Ux;else if(Px(ie))if(Lx)rt=LR;else{rt=$R;var Ie=PR}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&Tf(ne.elementType)&&(rt=Ux):rt=UR;if(rt&&(rt=rt(a,ne))){$x(ue,rt,u,ce);break e}Ie&&Ie(a,ie,ne),a==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&Nf(ie,"number",ie.value)}switch(Ie=ne?nc(ne):window,a){case"focusin":(Px(Ie)||Ie.contentEditable==="true")&&(Ol=Ie,by=ne,Uf=null);break;case"focusout":Uf=by=Ol=null;break;case"mousedown":Ey=!0;break;case"contextmenu":case"mouseup":case"dragend":Ey=!1,qx(ue,u,ce);break;case"selectionchange":if(BR)break;case"keydown":case"keyup":qx(ue,u,ce)}var qe;if(my)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else _l?Mx(a,u)&&(Je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(Dx&&u.locale!=="ko"&&(_l||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&_l&&(qe=jp()):(mr=ce,rc="value"in mr?mr.value:mr.textContent,_l=!0)),Ie=Dg(ne,Je),0<Ie.length&&(Je=new Tx(Je,a,null,u,ce),ue.push({event:Je,listeners:Ie}),qe?Je.data=qe:(qe=Rx(u),qe!==null&&(Je.data=qe)))),(qe=DR?_R(a,u):OR(a,u))&&(Je=Dg(ne,"onBeforeInput"),0<Je.length&&(Ie=new Tx("onBeforeInput","beforeinput",null,u,ce),ue.push({event:Ie,listeners:Je}),Ie.data=qe)),xP(ue,a,ne,u,ce)}yA(ue,o)})}function od(a,o,u){return{instance:a,listener:o,currentTarget:u}}function Dg(a,o){for(var u=o+"Capture",p=[];a!==null;){var b=a,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=ic(a,u),b!=null&&p.unshift(od(a,b,x)),b=ic(a,o),b!=null&&p.push(od(a,b,x))),a.tag===3)return p;a=a.return}return[]}function NP(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function vA(a,o,u,p,b){for(var x=o._reactName,M=[];u!==null&&u!==p;){var B=u,Y=B.alternate,ne=B.stateNode;if(B=B.tag,Y!==null&&Y===p)break;B!==5&&B!==26&&B!==27||ne===null||(Y=ne,b?(ne=ic(u,x),ne!=null&&M.unshift(od(u,ne,Y))):b||(ne=ic(u,x),ne!=null&&M.push(od(u,ne,Y)))),u=u.return}M.length!==0&&a.push({event:o,listeners:M})}var TP=/\r\n?/g,IP=/\u0000|\uFFFD/g;function bA(a){return(typeof a=="string"?a:""+a).replace(TP,`
`).replace(IP,"")}function EA(a,o){return o=bA(o),bA(a)===o}function At(a,o,u,p,b,x){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||Xr(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&Xr(a,""+p);break;case"className":El(a,"class",p);break;case"tabIndex":El(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":El(a,u,p);break;case"style":kp(a,p,x);break;case"data":if(o!=="object"){El(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Cl(""+p),a.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(o!=="input"&&At(a,o,"name",b.name,b,null),At(a,o,"formEncType",b.formEncType,b,null),At(a,o,"formMethod",b.formMethod,b,null),At(a,o,"formTarget",b.formTarget,b,null)):(At(a,o,"encType",b.encType,b,null),At(a,o,"method",b.method,b,null),At(a,o,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Cl(""+p),a.setAttribute(u,p);break;case"onClick":p!=null&&(a.onclick=li);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}u=Cl(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""+p):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":p===!0?a.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,p):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(u,p):a.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(u):a.setAttribute(u,p);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),bl(a,"popover",p);break;case"xlinkActuate":Fi(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Fi(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Fi(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Fi(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Fi(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Fi(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":bl(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=dy.get(u)||u,bl(a,u,p))}}function Ww(a,o,u,p,b,x){switch(u){case"style":kp(a,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof p=="string"?Xr(a,p):(typeof p=="number"||typeof p=="bigint")&&Xr(a,""+p);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"onClick":p!=null&&(a.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pp.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),x=a[Vn]||null,x=x!=null?x[u]:null,typeof x=="function"&&a.removeEventListener(o,x,b),typeof p=="function")){typeof x!="function"&&x!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,p,b);break e}u in a?a[u]=p:p===!0?a.setAttribute(u,""):bl(a,u,p)}}}function _n(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var p=!1,b=!1,x;for(x in u)if(u.hasOwnProperty(x)){var M=u[x];if(M!=null)switch(x){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:At(a,o,x,M,u,null)}}b&&At(a,o,"srcSet",u.srcSet,u,null),p&&At(a,o,"src",u.src,u,null);return;case"input":Xe("invalid",a);var B=x=M=b=null,Y=null,ne=null;for(p in u)if(u.hasOwnProperty(p)){var ce=u[p];if(ce!=null)switch(p){case"name":b=ce;break;case"type":M=ce;break;case"checked":Y=ce;break;case"defaultChecked":ne=ce;break;case"value":x=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,o));break;default:At(a,o,p,ce,u,null)}}Af(a,x,B,Y,ne,M,b,!1);return;case"select":Xe("invalid",a),p=M=x=null;for(b in u)if(u.hasOwnProperty(b)&&(B=u[b],B!=null))switch(b){case"value":x=B;break;case"defaultValue":M=B;break;case"multiple":p=B;default:At(a,o,b,B,u,null)}o=x,u=M,a.multiple=!!p,o!=null?Va(a,!!p,o,!1):u!=null&&Va(a,!!p,u,!0);return;case"textarea":Xe("invalid",a),x=b=p=null;for(M in u)if(u.hasOwnProperty(M)&&(B=u[M],B!=null))switch(M){case"value":p=B;break;case"defaultValue":b=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:At(a,o,M,B,u,null)}Yr(a,p,b,x);return;case"option":for(Y in u)if(u.hasOwnProperty(Y)&&(p=u[Y],p!=null))switch(Y){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:At(a,o,Y,p,u,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(p=0;p<ad.length;p++)Xe(ad[p],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(p=u[ne],p!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:At(a,o,ne,p,u,null)}return;default:if(Tf(o)){for(ce in u)u.hasOwnProperty(ce)&&(p=u[ce],p!==void 0&&Ww(a,o,ce,p,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(p=u[B],p!=null&&At(a,o,B,p,u,null))}function DP(a,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,M=null,B=null,Y=null,ne=null,ce=null;for(re in u){var ue=u[re];if(u.hasOwnProperty(re)&&ue!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":Y=ue;default:p.hasOwnProperty(re)||At(a,o,re,null,p,ue)}}for(var ie in p){var re=p[ie];if(ue=u[ie],p.hasOwnProperty(ie)&&(re!=null||ue!=null))switch(ie){case"type":x=re;break;case"name":b=re;break;case"checked":ne=re;break;case"defaultChecked":ce=re;break;case"value":M=re;break;case"defaultValue":B=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,o));break;default:re!==ue&&At(a,o,ie,re,p,ue)}}Cf(a,M,B,Y,ne,ce,x,b);return;case"select":re=M=B=ie=null;for(x in u)if(Y=u[x],u.hasOwnProperty(x)&&Y!=null)switch(x){case"value":break;case"multiple":re=Y;default:p.hasOwnProperty(x)||At(a,o,x,null,p,Y)}for(b in p)if(x=p[b],Y=u[b],p.hasOwnProperty(b)&&(x!=null||Y!=null))switch(b){case"value":ie=x;break;case"defaultValue":B=x;break;case"multiple":M=x;default:x!==Y&&At(a,o,b,x,p,Y)}o=B,u=M,p=re,ie!=null?Va(a,!!u,ie,!1):!!p!=!!u&&(o!=null?Va(a,!!u,o,!0):Va(a,!!u,u?[]:"",!1));return;case"textarea":re=ie=null;for(B in u)if(b=u[B],u.hasOwnProperty(B)&&b!=null&&!p.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:At(a,o,B,null,p,b)}for(M in p)if(b=p[M],x=u[M],p.hasOwnProperty(M)&&(b!=null||x!=null))switch(M){case"value":ie=b;break;case"defaultValue":re=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==x&&At(a,o,M,b,p,x)}sc(a,ie,re);return;case"option":for(var Te in u)if(ie=u[Te],u.hasOwnProperty(Te)&&ie!=null&&!p.hasOwnProperty(Te))switch(Te){case"selected":a.selected=!1;break;default:At(a,o,Te,null,p,ie)}for(Y in p)if(ie=p[Y],re=u[Y],p.hasOwnProperty(Y)&&ie!==re&&(ie!=null||re!=null))switch(Y){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:At(a,o,Y,ie,p,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)ie=u[Be],u.hasOwnProperty(Be)&&ie!=null&&!p.hasOwnProperty(Be)&&At(a,o,Be,null,p,ie);for(ne in p)if(ie=p[ne],re=u[ne],p.hasOwnProperty(ne)&&ie!==re&&(ie!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,o));break;default:At(a,o,ne,ie,p,re)}return;default:if(Tf(o)){for(var Nt in u)ie=u[Nt],u.hasOwnProperty(Nt)&&ie!==void 0&&!p.hasOwnProperty(Nt)&&Ww(a,o,Nt,void 0,p,ie);for(ce in p)ie=p[ce],re=u[ce],!p.hasOwnProperty(ce)||ie===re||ie===void 0&&re===void 0||Ww(a,o,ce,ie,p,re);return}}for(var J in u)ie=u[J],u.hasOwnProperty(J)&&ie!=null&&!p.hasOwnProperty(J)&&At(a,o,J,null,p,ie);for(ue in p)ie=p[ue],re=u[ue],!p.hasOwnProperty(ue)||ie===re||ie==null&&re==null||At(a,o,ue,ie,p,re)}function xA(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _P(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var b=u[p],x=b.transferSize,M=b.initiatorType,B=b.duration;if(x&&B&&xA(M)){for(M=0,B=b.responseEnd,p+=1;p<u.length;p++){var Y=u[p],ne=Y.startTime;if(ne>B)break;var ce=Y.transferSize,ue=Y.initiatorType;ce&&xA(ue)&&(Y=Y.responseEnd,M+=ce*(Y<B?1:(B-ne)/(Y-ne)))}if(--p,o+=8*(x+M)/(b.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Kw=null,Gw=null;function _g(a){return a.nodeType===9?a:a.ownerDocument}function SA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CA(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Yw(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xw=null;function OP(){var a=window.event;return a&&a.type==="popstate"?a===Xw?!1:(Xw=a,!0):(Xw=null,!1)}var AA=typeof setTimeout=="function"?setTimeout:void 0,MP=typeof clearTimeout=="function"?clearTimeout:void 0,NA=typeof Promise=="function"?Promise:void 0,RP=typeof queueMicrotask=="function"?queueMicrotask:typeof NA<"u"?function(a){return NA.resolve(null).then(a).catch(PP)}:AA;function PP(a){setTimeout(function(){throw a})}function lo(a){return a==="head"}function TA(a,o){var u=o,p=0;do{var b=u.nextSibling;if(a.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(p===0){a.removeChild(b),iu(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")cd(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,cd(u);for(var x=u.firstChild;x;){var M=x.nextSibling,B=x.nodeName;x[tc]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=M}}else u==="body"&&cd(a.ownerDocument.body);u=b}while(u);iu(o)}function IA(a,o){var u=a;a=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=p}while(u)}function Qw(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Qw(u),xf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function $P(a,o,u,p){for(;a.nodeType===1;){var b=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[tc])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=yi(a.nextSibling),a===null)break}return null}function UP(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=yi(a.nextSibling),a===null))return null;return a}function DA(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=yi(a.nextSibling),a===null))return null;return a}function Zw(a){return a.data==="$?"||a.data==="$~"}function Jw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function LP(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function yi(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var e1=null;function _A(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return yi(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function OA(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function MA(a,o,u){switch(o=_g(u),a){case"html":if(a=o.documentElement,!a)throw Error(s(452));return a;case"head":if(a=o.head,!a)throw Error(s(453));return a;case"body":if(a=o.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function cd(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);xf(a)}var wi=new Map,RA=new Set;function Og(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ha=k.d;k.d={f:kP,r:BP,D:jP,C:zP,L:HP,m:FP,X:qP,S:VP,M:WP};function kP(){var a=ha.f(),o=xg();return a||o}function BP(a){var o=Ha(a);o!==null&&o.tag===5&&o.type==="form"?XS(o):ha.r(a)}var tu=typeof document>"u"?null:document;function PA(a,o,u){var p=tu;if(p&&typeof o=="string"&&o){var b=hs(o);b='link[rel="'+a+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),RA.has(b)||(RA.add(b),a={rel:a,crossOrigin:u,href:o},p.querySelector(b)===null&&(o=p.createElement("link"),_n(o,"link",a),Jt(o),p.head.appendChild(o)))}}function jP(a){ha.D(a),PA("dns-prefetch",a,null)}function zP(a,o){ha.C(a,o),PA("preconnect",a,o)}function HP(a,o,u){ha.L(a,o,u);var p=tu;if(p&&a&&o){var b='link[rel="preload"][as="'+hs(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+hs(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+hs(u.imageSizes)+'"]')):b+='[href="'+hs(a)+'"]';var x=b;switch(o){case"style":x=nu(a);break;case"script":x=su(a)}wi.has(x)||(a=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),wi.set(x,a),p.querySelector(b)!==null||o==="style"&&p.querySelector(ld(x))||o==="script"&&p.querySelector(ud(x))||(o=p.createElement("link"),_n(o,"link",a),Jt(o),p.head.appendChild(o)))}}function FP(a,o){ha.m(a,o);var u=tu;if(u&&a){var p=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+hs(p)+'"][href="'+hs(a)+'"]',x=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=su(a)}if(!wi.has(x)&&(a=g({rel:"modulepreload",href:a},o),wi.set(x,a),u.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ud(x)))return}p=u.createElement("link"),_n(p,"link",a),Jt(p),u.head.appendChild(p)}}}function VP(a,o,u){ha.S(a,o,u);var p=tu;if(p&&a){var b=Fa(p).hoistableStyles,x=nu(a);o=o||"default";var M=b.get(x);if(!M){var B={loading:0,preload:null};if(M=p.querySelector(ld(x)))B.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},u),(u=wi.get(x))&&t1(a,u);var Y=M=p.createElement("link");Jt(Y),_n(Y,"link",a),Y._p=new Promise(function(ne,ce){Y.onload=ne,Y.onerror=ce}),Y.addEventListener("load",function(){B.loading|=1}),Y.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Mg(M,o,p)}M={type:"stylesheet",instance:M,count:1,state:B},b.set(x,M)}}}function qP(a,o){ha.X(a,o);var u=tu;if(u&&a){var p=Fa(u).hoistableScripts,b=su(a),x=p.get(b);x||(x=u.querySelector(ud(b)),x||(a=g({src:a,async:!0},o),(o=wi.get(b))&&n1(a,o),x=u.createElement("script"),Jt(x),_n(x,"link",a),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(b,x))}}function WP(a,o){ha.M(a,o);var u=tu;if(u&&a){var p=Fa(u).hoistableScripts,b=su(a),x=p.get(b);x||(x=u.querySelector(ud(b)),x||(a=g({src:a,async:!0,type:"module"},o),(o=wi.get(b))&&n1(a,o),x=u.createElement("script"),Jt(x),_n(x,"link",a),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(b,x))}}function $A(a,o,u,p){var b=(b=oe.current)?Og(b):null;if(!b)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=nu(u.href),u=Fa(b).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=nu(u.href);var x=Fa(b).hoistableStyles,M=x.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,M),(x=b.querySelector(ld(a)))&&!x._p&&(M.instance=x,M.state.loading=5),wi.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},wi.set(a,u),x||KP(b,a,u,M.state))),o&&p===null)throw Error(s(528,""));return M}if(o&&p!==null)throw Error(s(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=su(u),u=Fa(b).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function nu(a){return'href="'+hs(a)+'"'}function ld(a){return'link[rel="stylesheet"]['+a+"]"}function UA(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function KP(a,o,u,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),_n(o,"link",u),Jt(o),a.head.appendChild(o))}function su(a){return'[src="'+hs(a)+'"]'}function ud(a){return"script[async]"+a}function LA(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+hs(u.href)+'"]');if(p)return o.instance=p,Jt(p),p;var b=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Jt(p),_n(p,"style",b),Mg(p,u.precedence,a),o.instance=p;case"stylesheet":b=nu(u.href);var x=a.querySelector(ld(b));if(x)return o.state.loading|=4,o.instance=x,Jt(x),x;p=UA(u),(b=wi.get(b))&&t1(p,b),x=(a.ownerDocument||a).createElement("link"),Jt(x);var M=x;return M._p=new Promise(function(B,Y){M.onload=B,M.onerror=Y}),_n(x,"link",p),o.state.loading|=4,Mg(x,u.precedence,a),o.instance=x;case"script":return x=su(u.src),(b=a.querySelector(ud(x)))?(o.instance=b,Jt(b),b):(p=u,(b=wi.get(x))&&(p=g({},u),n1(p,b)),a=a.ownerDocument||a,b=a.createElement("script"),Jt(b),_n(b,"link",p),a.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Mg(p,u.precedence,a));return o.instance}function Mg(a,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,x=b,M=0;M<p.length;M++){var B=p[M];if(B.dataset.precedence===o)x=B;else if(x!==b)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function t1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function n1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Rg=null;function kA(a,o,u){if(Rg===null){var p=new Map,b=Rg=new Map;b.set(u,p)}else b=Rg,p=b.get(u),p||(p=new Map,b.set(u,p));if(p.has(a))return p;for(p.set(a,null),u=u.getElementsByTagName(a),b=0;b<u.length;b++){var x=u[b];if(!(x[tc]||x[ln]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var M=x.getAttribute(o)||"";M=a+M;var B=p.get(M);B?B.push(x):p.set(M,[x])}}return p}function BA(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function GP(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function jA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function YP(a,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=nu(p.href),x=o.querySelector(ld(b));if(x){o=x._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Pg.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=x,Jt(x);return}x=o.ownerDocument||o,p=UA(p),(b=wi.get(b))&&t1(p,b),x=x.createElement("link"),Jt(x);var M=x;M._p=new Promise(function(B,Y){M.onload=B,M.onerror=Y}),_n(x,"link",p),u.instance=x}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Pg.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var s1=0;function XP(a,o){return a.stylesheets&&a.count===0&&Ug(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var p=setTimeout(function(){if(a.stylesheets&&Ug(a,a.stylesheets),a.unsuspend){var x=a.unsuspend;a.unsuspend=null,x()}},6e4+o);0<a.imgBytes&&s1===0&&(s1=62500*_P());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ug(a,a.stylesheets),a.unsuspend)){var x=a.unsuspend;a.unsuspend=null,x()}},(a.imgBytes>s1?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Pg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ug(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $g=null;function Ug(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,$g=new Map,o.forEach(QP,a),$g=null,Pg.call(a))}function QP(a,o){if(!(o.state.loading&4)){var u=$g.get(a);if(u)var p=u.get(null);else{u=new Map,$g.set(a,u);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var M=b[x];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),p=M)}p&&u.set(null,p)}b=o.instance,M=b.getAttribute("data-precedence"),x=u.get(M)||p,x===p&&u.set(null,b),u.set(M,b),this.count++,p=Pg.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),x?x.parentNode.insertBefore(b,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),o.state.loading|=4}}var fd={$$typeof:N,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function ZP(a,o,u,p,b,x,M,B,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.hiddenUpdates=wl(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function zA(a,o,u,p,b,x,M,B,Y,ne,ce,ue){return a=new ZP(a,o,u,M,Y,ne,ce,ue,B),o=1,x===!0&&(o|=24),x=ks(3,null,null,o),a.current=x,x.stateNode=a,o=Uy(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:p,isDehydrated:u,cache:o},jy(x),a}function HA(a){return a?(a=Pl,a):Pl}function FA(a,o,u,p,b,x){b=HA(b),p.context===null?p.context=b:p.pendingContext=b,p=Za(o),p.payload={element:u},x=x===void 0?null:x,x!==null&&(p.callback=x),u=Ja(a,p,o),u!==null&&(ws(u,a,o),Ff(u,a,o))}function VA(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function i1(a,o){VA(a,o),(a=a.alternate)&&VA(a,o)}function qA(a){if(a.tag===13||a.tag===31){var o=lc(a,67108864);o!==null&&ws(o,a,67108864),i1(a,67108864)}}function WA(a){if(a.tag===13||a.tag===31){var o=Fs();o=bf(o);var u=lc(a,o);u!==null&&ws(u,a,o),i1(a,o)}}var Lg=!0;function JP(a,o,u,p){var b=R.T;R.T=null;var x=k.p;try{k.p=2,r1(a,o,u,p)}finally{k.p=x,R.T=b}}function e$(a,o,u,p){var b=R.T;R.T=null;var x=k.p;try{k.p=8,r1(a,o,u,p)}finally{k.p=x,R.T=b}}function r1(a,o,u,p){if(Lg){var b=a1(p);if(b===null)qw(a,o,p,kg,u),GA(a,p);else if(n$(b,a,o,u,p))p.stopPropagation();else if(GA(a,p),o&4&&-1<t$.indexOf(a)){for(;b!==null;){var x=Ha(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var M=Kr(x.pendingLanes);if(M!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;M;){var Y=1<<31-ss(M);B.entanglements[1]|=Y,M&=~Y}Er(x),(dt&6)===0&&(bg=St()+500,rd(0))}}break;case 31:case 13:B=lc(x,2),B!==null&&ws(B,x,2),xg(),i1(x,2)}if(x=a1(p),x===null&&qw(a,o,p,kg,u),x===b)break;b=x}b!==null&&p.stopPropagation()}else qw(a,o,p,null,u)}}function a1(a){return a=If(a),o1(a)}var kg=null;function o1(a){if(kg=null,a=Us(a),a!==null){var o=r(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=c(o),a!==null)return a;a=null}else if(u===31){if(a=l(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return kg=a,null}function KA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ai()){case oi:return 2;case Wr:return 8;case Bi:case ji:return 32;case zi:return 268435456;default:return 32}default:return 32}}var c1=!1,uo=null,fo=null,ho=null,dd=new Map,hd=new Map,po=[],t$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function GA(a,o){switch(a){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":dd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":hd.delete(o.pointerId)}}function pd(a,o,u,p,b,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[b]},o!==null&&(o=Ha(o),o!==null&&qA(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),a)}function n$(a,o,u,p,b){switch(o){case"focusin":return uo=pd(uo,a,o,u,p,b),!0;case"dragenter":return fo=pd(fo,a,o,u,p,b),!0;case"mouseover":return ho=pd(ho,a,o,u,p,b),!0;case"pointerover":var x=b.pointerId;return dd.set(x,pd(dd.get(x)||null,a,o,u,p,b)),!0;case"gotpointercapture":return x=b.pointerId,hd.set(x,pd(hd.get(x)||null,a,o,u,p,b)),!0}return!1}function YA(a){var o=Us(a.target);if(o!==null){var u=r(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){a.blockedOn=o,Op(a.priority,function(){WA(u)});return}}else if(o===31){if(o=l(u),o!==null){a.blockedOn=o,Op(a.priority,function(){WA(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Bg(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=a1(a.nativeEvent);if(u===null){u=a.nativeEvent;var p=new u.constructor(u.type,u);Vi=p,u.target.dispatchEvent(p),Vi=null}else return o=Ha(u),o!==null&&qA(o),a.blockedOn=u,!1;o.shift()}return!0}function XA(a,o,u){Bg(a)&&u.delete(o)}function s$(){c1=!1,uo!==null&&Bg(uo)&&(uo=null),fo!==null&&Bg(fo)&&(fo=null),ho!==null&&Bg(ho)&&(ho=null),dd.forEach(XA),hd.forEach(XA)}function jg(a,o){a.blockedOn===o&&(a.blockedOn=null,c1||(c1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,s$)))}var zg=null;function QA(a){zg!==a&&(zg=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zg===a&&(zg=null);for(var o=0;o<a.length;o+=3){var u=a[o],p=a[o+1],b=a[o+2];if(typeof p!="function"){if(o1(p||u)===null)continue;break}var x=Ha(u);x!==null&&(a.splice(o,3),o-=3,aw(x,{pending:!0,data:b,method:u.method,action:p},p,b))}}))}function iu(a){function o(Y){return jg(Y,a)}uo!==null&&jg(uo,a),fo!==null&&jg(fo,a),ho!==null&&jg(ho,a),dd.forEach(o),hd.forEach(o);for(var u=0;u<po.length;u++){var p=po[u];p.blockedOn===a&&(p.blockedOn=null)}for(;0<po.length&&(u=po[0],u.blockedOn===null);)YA(u),u.blockedOn===null&&po.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var b=u[p],x=u[p+1],M=b[Vn]||null;if(typeof x=="function")M||QA(u);else if(M){var B=null;if(x&&x.hasAttribute("formAction")){if(b=x,M=x[Vn]||null)B=M.formAction;else if(o1(b)!==null)continue}else B=M.action;typeof B=="function"?u[p+1]=B:(u.splice(p,3),p-=3),QA(u)}}}function ZA(){function a(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(M){return b=M})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function l1(a){this._internalRoot=a}Hg.prototype.render=l1.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(s(409));var u=o.current,p=Fs();FA(u,p,a,o,null,null)},Hg.prototype.unmount=l1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;FA(a.current,2,null,a,null,null),xg(),o[za]=null}};function Hg(a){this._internalRoot=a}Hg.prototype.unstable_scheduleHydration=function(a){if(a){var o=ci();a={blockedOn:null,target:a,priority:o};for(var u=0;u<po.length&&o!==0&&o<po[u].priority;u++);po.splice(u,0,a),u===0&&YA(a)}};var JA=e.version;if(JA!=="19.2.0")throw Error(s(527,JA,"19.2.0"));k.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=d(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var i$={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{Zo=Fg.inject(i$),Fn=Fg}catch{}}return md.createRoot=function(a,o){if(!i(a))throw Error(s(299));var u=!1,p="",b=aC,x=oC,M=cC;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=zA(a,1,!1,null,null,u,p,null,b,x,M,ZA),a[za]=o.current,Vw(a),new l1(o)},md.hydrateRoot=function(a,o,u){if(!i(a))throw Error(s(299));var p=!1,b="",x=aC,M=oC,B=cC,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.formState!==void 0&&(Y=u.formState)),o=zA(a,1,!0,o,u??null,p,b,Y,x,M,B,ZA),o.context=HA(null),u=o.current,p=Fs(),p=bf(p),b=Za(p),b.callback=null,Ja(u,b,p),u=p,o.current.lanes=u,ja(o,u),Er(o),a[za]=o.current,Vw(a),new Hg(o)},md.version="19.2.0",md}var l3;function g$(){if(l3)return d1.exports;l3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),d1.exports=p$(),d1.exports}var m$=g$();const y$=sf(m$),h8=pe.createContext(),Yo=()=>{const t=pe.useContext(h8);if(!t)throw new Error("useGame must be used within GameProvider");return t},w$=({children:t})=>{const[e,n]=pe.useState(!1),[s,i]=pe.useState(""),[r,c]=pe.useState(0),[l,f]=pe.useState(0),[d,h]=pe.useState(0),[g,m]=pe.useState(1),[y,w]=pe.useState(0),[v,E]=pe.useState([]),[C,T]=pe.useState(!1),[N,I]=pe.useState([]);pe.useEffect(()=>{const L=localStorage.getItem("blockQuestData");if(L){const H=JSON.parse(L);c(H.coins||0),f(H.crystals||0),h(H.traps||0),m(H.level||1),w(H.xp||0),E(H.minedBlocks||[]),T(H.questPassMinted||!1),I(H.questBadges||[])}},[]),pe.useEffect(()=>{const L={coins:r,crystals:l,traps:d,level:g,xp:y,minedBlocks:v,questPassMinted:C,questBadges:N};localStorage.setItem("blockQuestData",JSON.stringify(L))},[r,l,d,g,y,v,C,N]);const U={walletConnected:e,walletAddress:s,coins:r,crystals:l,traps:d,level:g,xp:y,minedBlocks:v,questPassMinted:C,questBadges:N,mineBlock:L=>{if(v.includes(L))return null;const H=Math.random();let q,$=0;H<.6?(q="coin",c(F=>F+10),$=10):H<.8?(q="crystal",f(F=>F+1),$=50):H<.95?(q="empty",$=5):(q="trap",h(F=>F+1),$=-20),E(F=>[...F,L]);const R=Math.max(0,y+$);w(R);const k=g*500;return R>=k?(m(F=>F+1),w(0),{result:q,levelUp:!0,newLevel:g+1}):{result:q,levelUp:!1}},resetGame:()=>{c(0),f(0),h(0),m(1),w(0),E([]),localStorage.removeItem("blockQuestData")},connectWallet:L=>{n(!0),i(L)},disconnectWallet:()=>{n(!1),i("")},mintQuestPass:()=>{T(!0)},mintQuestBadge:L=>{I(H=>[...H,{level:L,timestamp:Date.now()}])}};return G.jsx(h8.Provider,{value:U,children:t})},M2=pe.createContext({});function R2(t){const e=pe.useRef(null);return e.current===null&&(e.current=t()),e.current}const P2=typeof window<"u",p8=P2?pe.useLayoutEffect:pe.useEffect,Nm=pe.createContext(null);function $2(t,e){t.indexOf(e)===-1&&t.push(e)}function U2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Oa=(t,e,n)=>n>e?e:n<t?t:n;let L2=()=>{};const Ma={},g8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function m8(t){return typeof t=="object"&&t!==null}const y8=t=>/^0[^.\s]+$/u.test(t);function k2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Mi=t=>t,v$=(t,e)=>n=>e(t(n)),rp=(...t)=>t.reduce(v$),gh=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class B2{constructor(){this.subscriptions=[]}add(e){return $2(this.subscriptions,e),()=>U2(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const c=this.subscriptions[r];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ur=t=>t*1e3,_i=t=>t/1e3;function w8(t,e){return e?t*(1e3/e):0}const v8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,b$=1e-7,E$=12;function x$(t,e,n,s,i){let r,c,l=0;do c=e+(n-e)/2,r=v8(c,s,i)-t,r>0?n=c:e=c;while(Math.abs(r)>b$&&++l<E$);return c}function ap(t,e,n,s){if(t===e&&n===s)return Mi;const i=r=>x$(r,0,1,t,n);return r=>r===0||r===1?r:v8(i(r),e,s)}const b8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,E8=t=>e=>1-t(1-e),x8=ap(.33,1.53,.69,.99),j2=E8(x8),S8=b8(j2),C8=t=>(t*=2)<1?.5*j2(t):.5*(2-Math.pow(2,-10*(t-1))),z2=t=>1-Math.sin(Math.acos(t)),A8=E8(z2),N8=b8(z2),S$=ap(.42,0,1,1),C$=ap(0,0,.58,1),T8=ap(.42,0,.58,1),A$=t=>Array.isArray(t)&&typeof t[0]!="number",I8=t=>Array.isArray(t)&&typeof t[0]=="number",N$={linear:Mi,easeIn:S$,easeInOut:T8,easeOut:C$,circIn:z2,circInOut:N8,circOut:A8,backIn:j2,backInOut:S8,backOut:x8,anticipate:C8},T$=t=>typeof t=="string",u3=t=>{if(I8(t)){L2(t.length===4);const[e,n,s,i]=t;return ap(e,n,s,i)}else if(T$(t))return N$[t];return t},Vg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function I$(t,e){let n=new Set,s=new Set,i=!1,r=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function f(h){c.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,g=!1,m=!1)=>{const w=m&&i?n:s;return g&&c.add(h),w.has(h)||w.add(h),h},cancel:h=>{s.delete(h),c.delete(h)},process:h=>{if(l=h,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(f),n.clear(),i=!1,r&&(r=!1,d.process(h))}};return d}const D$=40;function D8(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,c=Vg.reduce((N,I)=>(N[I]=I$(r),N),{}),{setup:l,read:f,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:y,postRender:w}=c,v=()=>{const N=Ma.useManualTiming?i.timestamp:performance.now();n=!1,Ma.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(N-i.timestamp,D$),1)),i.timestamp=N,i.isProcessing=!0,l.process(i),f.process(i),d.process(i),h.process(i),g.process(i),m.process(i),y.process(i),w.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(v))},E=()=>{n=!0,s=!0,i.isProcessing||t(v)};return{schedule:Vg.reduce((N,I)=>{const S=c[I];return N[I]=(A,_=!1,D=!1)=>(n||E(),S.schedule(A,_,D)),N},{}),cancel:N=>{for(let I=0;I<Vg.length;I++)c[Vg[I]].cancel(N)},state:i,steps:c}}const{schedule:Ht,cancel:qo,state:$n,steps:m1}=D8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mi,!0);let D0;function _$(){D0=void 0}const _s={now:()=>(D0===void 0&&_s.set($n.isProcessing||Ma.useManualTiming?$n.timestamp:performance.now()),D0),set:t=>{D0=t,queueMicrotask(_$)}},_8=t=>e=>typeof e=="string"&&e.startsWith(t),H2=_8("--"),O$=_8("var(--"),F2=t=>O$(t)?M$.test(t.split("/*")[0].trim()):!1,M$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mh={...rf,transform:t=>Oa(0,1,t)},qg={...rf,default:1},Gd=t=>Math.round(t*1e5)/1e5,V2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function R$(t){return t==null}const P$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,q2=(t,e)=>n=>!!(typeof n=="string"&&P$.test(n)&&n.startsWith(t)||e&&!R$(n)&&Object.prototype.hasOwnProperty.call(n,e)),O8=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,c,l]=s.match(V2);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},$$=t=>Oa(0,255,t),y1={...rf,transform:t=>Math.round($$(t))},jc={test:q2("rgb","red"),parse:O8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+y1.transform(t)+", "+y1.transform(e)+", "+y1.transform(n)+", "+Gd(mh.transform(s))+")"};function U$(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Gv={test:q2("#"),parse:U$,transform:jc.transform},op=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_o=op("deg"),Lr=op("%"),je=op("px"),L$=op("vh"),k$=op("vw"),f3={...Lr,parse:t=>Lr.parse(t)/100,transform:t=>Lr.transform(t*100)},_u={test:q2("hsl","hue"),parse:O8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Lr.transform(Gd(e))+", "+Lr.transform(Gd(n))+", "+Gd(mh.transform(s))+")"},an={test:t=>jc.test(t)||Gv.test(t)||_u.test(t),parse:t=>jc.test(t)?jc.parse(t):_u.test(t)?_u.parse(t):Gv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jc.transform(t):_u.transform(t),getAnimatableNone:t=>{const e=an.parse(t);return e.alpha=0,an.transform(e)}},B$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j$(t){return isNaN(t)&&typeof t=="string"&&(t.match(V2)?.length||0)+(t.match(B$)?.length||0)>0}const M8="number",R8="color",z$="var",H$="var(",d3="${}",F$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yh(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const l=e.replace(F$,f=>(an.test(f)?(s.color.push(r),i.push(R8),n.push(an.parse(f))):f.startsWith(H$)?(s.var.push(r),i.push(z$),n.push(f)):(s.number.push(r),i.push(M8),n.push(parseFloat(f))),++r,d3)).split(d3);return{values:n,split:l,indexes:s,types:i}}function P8(t){return yh(t).values}function $8(t){const{split:e,types:n}=yh(t),s=e.length;return i=>{let r="";for(let c=0;c<s;c++)if(r+=e[c],i[c]!==void 0){const l=n[c];l===M8?r+=Gd(i[c]):l===R8?r+=an.transform(i[c]):r+=i[c]}return r}}const V$=t=>typeof t=="number"?0:an.test(t)?an.getAnimatableNone(t):t;function q$(t){const e=P8(t);return $8(t)(e.map(V$))}const Wo={test:j$,parse:P8,createTransformer:$8,getAnimatableNone:q$};function w1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function W$({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,c=0;if(!e)i=r=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,f=2*n-l;i=w1(f,l,t+1/3),r=w1(f,l,t),c=w1(f,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(c*255),alpha:s}}function G0(t,e){return n=>n>0?e:t}const Ft=(t,e,n)=>t+(e-t)*n,v1=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},K$=[Gv,jc,_u],G$=t=>K$.find(e=>e.test(t));function h3(t){const e=G$(t);if(!e)return!1;let n=e.parse(t);return e===_u&&(n=W$(n)),n}const p3=(t,e)=>{const n=h3(t),s=h3(e);if(!n||!s)return G0(t,e);const i={...n};return r=>(i.red=v1(n.red,s.red,r),i.green=v1(n.green,s.green,r),i.blue=v1(n.blue,s.blue,r),i.alpha=Ft(n.alpha,s.alpha,r),jc.transform(i))},Yv=new Set(["none","hidden"]);function Y$(t,e){return Yv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function X$(t,e){return n=>Ft(t,e,n)}function W2(t){return typeof t=="number"?X$:typeof t=="string"?F2(t)?G0:an.test(t)?p3:J$:Array.isArray(t)?U8:typeof t=="object"?an.test(t)?p3:Q$:G0}function U8(t,e){const n=[...t],s=n.length,i=t.map((r,c)=>W2(r)(r,e[c]));return r=>{for(let c=0;c<s;c++)n[c]=i[c](r);return n}}function Q$(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=W2(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function Z$(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],c=t.indexes[r][s[r]],l=t.values[c]??0;n[i]=l,s[r]++}return n}const J$=(t,e)=>{const n=Wo.createTransformer(e),s=yh(t),i=yh(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Yv.has(t)&&!i.values.length||Yv.has(e)&&!s.values.length?Y$(t,e):rp(U8(Z$(s,i),i.values),n):G0(t,e)};function L8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ft(t,e,n):W2(t)(t,e)}const eU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ht.update(e,n),stop:()=>qo(e),now:()=>$n.isProcessing?$n.timestamp:_s.now()}},k8=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Y0=2e4;function K2(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Y0;)e+=n,s=t.next(e);return e>=Y0?1/0:e}function tU(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(K2(s),Y0);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:_i(i)}}const nU=5;function B8(t,e,n){const s=Math.max(e-nU,0);return w8(n-t(s),e-s)}const Wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},b1=.001;function sU({duration:t=Wt.duration,bounce:e=Wt.bounce,velocity:n=Wt.velocity,mass:s=Wt.mass}){let i,r,c=1-e;c=Oa(Wt.minDamping,Wt.maxDamping,c),t=Oa(Wt.minDuration,Wt.maxDuration,_i(t)),c<1?(i=d=>{const h=d*c,g=h*t,m=h-n,y=Xv(d,c),w=Math.exp(-g);return b1-m/y*w},r=d=>{const g=d*c*t,m=g*n+n,y=Math.pow(c,2)*Math.pow(d,2)*t,w=Math.exp(-g),v=Xv(Math.pow(d,2),c);return(-i(d)+b1>0?-1:1)*((m-y)*w)/v}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-b1+h*g},r=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const l=5/t,f=rU(i,r,l);if(t=Ur(t),isNaN(f))return{stiffness:Wt.stiffness,damping:Wt.damping,duration:t};{const d=Math.pow(f,2)*s;return{stiffness:d,damping:c*2*Math.sqrt(s*d),duration:t}}}const iU=12;function rU(t,e,n){let s=n;for(let i=1;i<iU;i++)s=s-t(s)/e(s);return s}function Xv(t,e){return t*Math.sqrt(1-e*e)}const aU=["duration","bounce"],oU=["stiffness","damping","mass"];function g3(t,e){return e.some(n=>t[n]!==void 0)}function cU(t){let e={velocity:Wt.velocity,stiffness:Wt.stiffness,damping:Wt.damping,mass:Wt.mass,isResolvedFromDuration:!1,...t};if(!g3(t,oU)&&g3(t,aU))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*Oa(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Wt.mass,stiffness:i,damping:r}}else{const n=sU(t);e={...e,...n,mass:Wt.mass},e.isResolvedFromDuration=!0}return e}function X0(t=Wt.visualDuration,e=Wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:f,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:y}=cU({...n,velocity:-_i(n.velocity||0)}),w=m||0,v=d/(2*Math.sqrt(f*h)),E=c-r,C=_i(Math.sqrt(f/h)),T=Math.abs(E)<5;s||(s=T?Wt.restSpeed.granular:Wt.restSpeed.default),i||(i=T?Wt.restDelta.granular:Wt.restDelta.default);let N;if(v<1){const S=Xv(C,v);N=A=>{const _=Math.exp(-v*C*A);return c-_*((w+v*C*E)/S*Math.sin(S*A)+E*Math.cos(S*A))}}else if(v===1)N=S=>c-Math.exp(-C*S)*(E+(w+C*E)*S);else{const S=C*Math.sqrt(v*v-1);N=A=>{const _=Math.exp(-v*C*A),D=Math.min(S*A,300);return c-_*((w+v*C*E)*Math.sinh(D)+S*E*Math.cosh(D))/S}}const I={calculatedDuration:y&&g||null,next:S=>{const A=N(S);if(y)l.done=S>=g;else{let _=S===0?w:0;v<1&&(_=S===0?Ur(w):B8(N,S,A));const D=Math.abs(_)<=s,O=Math.abs(c-A)<=i;l.done=D&&O}return l.value=l.done?c:A,l},toString:()=>{const S=Math.min(K2(I),Y0),A=k8(_=>I.next(S*_).value,S,30);return S+"ms "+A},toTransition:()=>{}};return I}X0.applyToOptions=t=>{const e=tU(t,100,X0);return t.ease=e.ease,t.duration=Ur(e.duration),t.type="keyframes",t};function Qv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:c,min:l,max:f,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},y=D=>l!==void 0&&D<l||f!==void 0&&D>f,w=D=>l===void 0?f:f===void 0||Math.abs(l-D)<Math.abs(f-D)?l:f;let v=n*e;const E=g+v,C=c===void 0?E:c(E);C!==E&&(v=C-g);const T=D=>-v*Math.exp(-D/s),N=D=>C+T(D),I=D=>{const O=T(D),P=N(D);m.done=Math.abs(O)<=d,m.value=m.done?C:P};let S,A;const _=D=>{y(m.value)&&(S=D,A=X0({keyframes:[m.value,w(m.value)],velocity:B8(N,D,m.value),damping:i,stiffness:r,restDelta:d,restSpeed:h}))};return _(0),{calculatedDuration:null,next:D=>{let O=!1;return!A&&S===void 0&&(O=!0,I(D),_(D)),S!==void 0&&D>=S?A.next(D-S):(!O&&I(D),m)}}}function lU(t,e,n){const s=[],i=n||Ma.mix||L8,r=t.length-1;for(let c=0;c<r;c++){let l=i(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||Mi:e;l=rp(f,l)}s.push(l)}return s}function uU(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(L2(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=lU(e,s,i),f=l.length,d=h=>{if(c&&h<t[0])return e[0];let g=0;if(f>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=gh(t[g],t[g+1],h);return l[g](m)};return n?h=>d(Oa(t[0],t[r-1],h)):d}function fU(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=gh(0,e,s);t.push(Ft(n,1,i))}}function dU(t){const e=[0];return fU(e,t.length-1),e}function hU(t,e){return t.map(n=>n*e)}function pU(t,e){return t.map(()=>e||T8).splice(0,t.length-1)}function Yd({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=A$(s)?s.map(u3):u3(s),r={done:!1,value:e[0]},c=hU(n&&n.length===e.length?n:dU(e),t),l=uU(c,e,{ease:Array.isArray(i)?i:pU(e,i)});return{calculatedDuration:t,next:f=>(r.value=l(f),r.done=f>=t,r)}}const gU=t=>t!==null;function G2(t,{repeat:e,repeatType:n="loop"},s,i=1){const r=t.filter(gU),l=i<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!l||s===void 0?r[l]:s}const mU={decay:Qv,inertia:Qv,tween:Yd,keyframes:Yd,spring:X0};function j8(t){typeof t.type=="string"&&(t.type=mU[t.type])}class Y2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const yU=t=>t/100;class X2 extends Y2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==_s.now()&&this.tick(_s.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;j8(e);const{type:n=Yd,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:c=0}=e;let{keyframes:l}=e;const f=n||Yd;f!==Yd&&typeof l[0]!="number"&&(this.mixKeyframes=rp(yU,L8(l[0],l[1])),l=[0,100]);const d=f({...e,keyframes:l});r==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...l].reverse(),velocity:-c})),d.calculatedDuration===null&&(d.calculatedDuration=K2(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:y,type:w,onUpdate:v,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,I=s;if(g){const D=Math.min(this.currentTime,i)/l;let O=Math.floor(D),P=D%1;!P&&D>=1&&(P=1),P===1&&O--,O=Math.min(O,g+1),!!(O%2)&&(m==="reverse"?(P=1-P,y&&(P-=y/l)):m==="mirror"&&(I=c)),N=Oa(0,1,P)*l}const S=T?{done:!1,value:h[0]}:I.next(N);r&&(S.value=r(S.value));let{done:A}=S;!T&&f!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return _&&w!==Qv&&(S.value=G2(h,this.options,E,this.speed)),v&&v(S.value),_&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return _i(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(this.currentTime)}set time(e){e=Ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_s.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=_i(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=eU,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_s.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function wU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zc=t=>t*180/Math.PI,Zv=t=>{const e=zc(Math.atan2(t[1],t[0]));return Jv(e)},vU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Zv,rotateZ:Zv,skewX:t=>zc(Math.atan(t[1])),skewY:t=>zc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Jv=t=>(t=t%360,t<0&&(t+=360),t),m3=Zv,y3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),w3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),bU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:y3,scaleY:w3,scale:t=>(y3(t)+w3(t))/2,rotateX:t=>Jv(zc(Math.atan2(t[6],t[5]))),rotateY:t=>Jv(zc(Math.atan2(-t[2],t[0]))),rotateZ:m3,rotate:m3,skewX:t=>zc(Math.atan(t[4])),skewY:t=>zc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function eb(t){return t.includes("scale")?1:0}function tb(t,e){if(!t||t==="none")return eb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=bU,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=vU,i=l}if(!i)return eb(e);const r=s[e],c=i[1].split(",").map(xU);return typeof r=="function"?r(c):c[r]}const EU=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return tb(n,e)};function xU(t){return parseFloat(t.trim())}const af=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],of=new Set(af),v3=t=>t===rf||t===je,SU=new Set(["x","y","z"]),CU=af.filter(t=>!SU.has(t));function AU(t){const e=[];return CU.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Yc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>tb(e,"x"),y:(t,{transform:e})=>tb(e,"y")};Yc.translateX=Yc.x;Yc.translateY=Yc.y;const Xc=new Set;let nb=!1,sb=!1,ib=!1;function z8(){if(sb){const t=Array.from(Xc).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=AU(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,c])=>{s.getValue(r)?.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}sb=!1,nb=!1,Xc.forEach(t=>t.complete(ib)),Xc.clear()}function H8(){Xc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(sb=!0)})}function NU(){ib=!0,H8(),z8(),ib=!1}class Q2{constructor(e,n,s,i,r,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Xc.add(this),nb||(nb=!0,Ht.read(H8),Ht.resolveKeyframes(z8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const r=i?.get(),c=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&n){const l=s.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),i&&r===void 0&&i.set(e[0])}wU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xc.delete(this)}cancel(){this.state==="scheduled"&&(Xc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TU=t=>t.startsWith("--");function IU(t,e,n){TU(e)?t.style.setProperty(e,n):t.style[e]=n}const DU=k2(()=>window.ScrollTimeline!==void 0),_U={};function OU(t,e){const n=k2(t);return()=>_U[e]??n()}const F8=OU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jd=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,b3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jd([0,.65,.55,1]),circOut:jd([.55,0,1,.45]),backIn:jd([.31,.01,.66,-.59]),backOut:jd([.33,1.53,.69,.99])};function V8(t,e){if(t)return typeof t=="function"?F8()?k8(t,e):"ease-out":I8(t)?jd(t):Array.isArray(t)?t.map(n=>V8(n,e)||b3.easeOut):b3[t]}function MU(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:c="loop",ease:l="easeOut",times:f}={},d=void 0){const h={[e]:n};f&&(h.offset=f);const g=V8(l,i);Array.isArray(g)&&(h.easing=g);const m={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:r+1,direction:c==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function q8(t){return typeof t=="function"&&"applyToOptions"in t}function RU({type:t,...e}){return q8(t)&&F8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class PU extends Y2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:c=!1,finalKeyframe:l,onComplete:f}=e;this.isPseudoElement=!!r,this.allowFlatten=c,this.options=e,L2(typeof e.type!="string");const d=RU(e);this.animation=MU(n,s,i,d,r),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=G2(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):IU(n,s,h),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return _i(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_i(e)}get time(){return _i(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&DU()?(this.animation.timeline=e,Mi):n(this)}}const W8={anticipate:C8,backInOut:S8,circInOut:N8};function $U(t){return t in W8}function UU(t){typeof t.ease=="string"&&$U(t.ease)&&(t.ease=W8[t.ease])}const E3=10;class LU extends PU{constructor(e){UU(e),j8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new X2({...c,autoplay:!1}),f=Ur(this.finishedTime??this.time);n.setWithVelocity(l.sample(f-E3).value,l.sample(f).value,E3),l.stop()}}const x3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wo.test(t)||t==="0")&&!t.startsWith("url("));function kU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function BU(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],c=x3(i,e),l=x3(r,e);return!c||!l?!1:kU(t)||(n==="spring"||q8(n))&&s}function rb(t){t.duration=0,t.type="keyframes"}const jU=new Set(["opacity","clipPath","filter","transform"]),zU=k2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HU(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return zU()&&n&&jU.has(n)&&(n!=="transform"||!d)&&!f&&!s&&i!=="mirror"&&r!==0&&c!=="inertia"}const FU=40;class VU extends Y2{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:c="loop",keyframes:l,name:f,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=_s.now();const m={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:c,name:f,motionValue:d,element:h,...g},y=h?.KeyframeResolver||Q2;this.keyframeResolver=new y(l,(w,v,E)=>this.onKeyframesResolved(w,v,m,!E),f,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:r,type:c,velocity:l,delay:f,isHandoff:d,onUpdate:h}=s;this.resolvedAt=_s.now(),BU(e,r,c,l)||((Ma.instantAnimations||!f)&&h?.(G2(e,s,n)),e[0]=e[e.length-1],rb(s),s.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>FU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},y=!d&&HU(m)?new LU({...m,element:m.motionValue.owner.current}):new X2(m);y.finished.then(()=>this.notifyFinished()).catch(Mi),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),NU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const qU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WU(t){const e=qU.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function K8(t,e,n=1){const[s,i]=WU(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const c=r.trim();return g8(c)?parseFloat(c):c}return F2(i)?K8(i,e,n+1):i}function Z2(t,e){return t?.[e]??t?.default??t}const G8=new Set(["width","height","top","left","right","bottom",...af]),KU={test:t=>t==="auto",parse:t=>t},Y8=t=>e=>e.test(t),X8=[rf,je,Lr,_o,k$,L$,KU],S3=t=>X8.find(Y8(t));function GU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||y8(t):!0}const YU=new Set(["brightness","contrast","saturate","opacity"]);function XU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(V2)||[];if(!s)return t;const i=n.replace(s,"");let r=YU.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const QU=/\b([a-z-]*)\(.*?\)/gu,ab={...Wo,getAnimatableNone:t=>{const e=t.match(QU);return e?e.map(XU).join(" "):t}},C3={...rf,transform:Math.round},ZU={rotate:_o,rotateX:_o,rotateY:_o,rotateZ:_o,scale:qg,scaleX:qg,scaleY:qg,scaleZ:qg,skew:_o,skewX:_o,skewY:_o,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:mh,originX:f3,originY:f3,originZ:je},J2={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je,...ZU,zIndex:C3,fillOpacity:mh,strokeOpacity:mh,numOctaves:C3},JU={...J2,color:an,backgroundColor:an,outlineColor:an,fill:an,stroke:an,borderColor:an,borderTopColor:an,borderRightColor:an,borderBottomColor:an,borderLeftColor:an,filter:ab,WebkitFilter:ab},Q8=t=>JU[t];function Z8(t,e){let n=Q8(t);return n!==ab&&(n=Wo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eL=new Set(["auto","none","0"]);function tL(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!eL.has(r)&&yh(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=Z8(n,i)}class nL extends Q2{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),F2(d))){const h=K8(d,n.current);h!==void 0&&(e[f]=h),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!G8.has(s)||e.length!==2)return;const[i,r]=e,c=S3(i),l=S3(r);if(c!==l)if(v3(c)&&v3(l))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Yc[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||GU(e[i]))&&s.push(i);s.length&&tL(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,c=s[r];s[r]=Yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,f])=>{e.getValue(l).set(f)}),this.resolveNoneKeyframes()}}function sL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=n?.[t]??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const J8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function e6(t){return m8(t)&&"offsetHeight"in t}const A3=30,iL=t=>!isNaN(parseFloat(t));class rL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=_s.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_s.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=iL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new B2);const s=this.events[e].add(n);return e==="change"?()=>{s(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_s.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>A3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,A3);return w8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wu(t,e){return new rL(t,e)}const{schedule:eE}=D8(queueMicrotask,!1),Ji={x:!1,y:!1};function t6(){return Ji.x||Ji.y}function aL(t){return t==="x"||t==="y"?Ji[t]?null:(Ji[t]=!0,()=>{Ji[t]=!1}):Ji.x||Ji.y?null:(Ji.x=Ji.y=!0,()=>{Ji.x=Ji.y=!1})}function n6(t,e){const n=sL(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function N3(t){return!(t.pointerType==="touch"||t6())}function oL(t,e,n={}){const[s,i,r]=n6(t,n),c=l=>{if(!N3(l))return;const{target:f}=l,d=e(f,l);if(typeof d!="function"||!f)return;const h=g=>{N3(g)&&(d(g),f.removeEventListener("pointerleave",h))};f.addEventListener("pointerleave",h,i)};return s.forEach(l=>{l.addEventListener("pointerenter",c,i)}),r}const s6=(t,e)=>e?t===e?!0:s6(t,e.parentElement):!1,tE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lL(t){return cL.has(t.tagName)||t.tabIndex!==-1}const _0=new WeakSet;function T3(t){return e=>{e.key==="Enter"&&t(e)}}function E1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uL=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=T3(()=>{if(_0.has(n))return;E1(n,"down");const i=T3(()=>{E1(n,"up")}),r=()=>E1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function I3(t){return tE(t)&&!t6()}function fL(t,e,n={}){const[s,i,r]=n6(t,n),c=l=>{const f=l.currentTarget;if(!I3(l))return;_0.add(f);const d=e(f,l),h=(y,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),_0.has(f)&&_0.delete(f),I3(y)&&typeof d=="function"&&d(y,{success:w})},g=y=>{h(y,f===window||f===document||n.useGlobalTarget||s6(f,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,i),e6(l)&&(l.addEventListener("focus",d=>uL(d,i)),!lL(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function i6(t){return m8(t)&&"ownerSVGElement"in t}function dL(t){return i6(t)&&t.tagName==="svg"}const es=t=>!!(t&&t.getVelocity),hL=[...X8,an,Wo],pL=t=>hL.find(Y8(t)),nE=pe.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function D3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function gL(...t){return e=>{let n=!1;const s=t.map(i=>{const r=D3(i,e);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():D3(t[i],null)}}}}function mL(...t){return pe.useCallback(gL(...t),t)}class yL extends pe.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=e6(s)&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wL({children:t,isPresent:e,anchorX:n,root:s}){const i=pe.useId(),r=pe.useRef(null),c=pe.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=pe.useContext(nE),f=mL(r,t?.ref);return pe.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:y}=c.current;if(e||!r.current||!d||!h)return;const w=n==="left"?`left: ${m}`:`right: ${y}`;r.current.dataset.motionPopId=i;const v=document.createElement("style");l&&(v.nonce=l);const E=s??document.head;return E.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(v)&&E.removeChild(v)}},[e]),G.jsx(yL,{isPresent:e,childRef:r,sizeRef:c,children:pe.cloneElement(t,{ref:f})})}const vL=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:c,anchorX:l,root:f})=>{const d=R2(bL),h=pe.useId();let g=!0,m=pe.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const w of d.values())if(!w)return;s&&s()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,s]);return r&&g&&(m={...m}),pe.useMemo(()=>{d.forEach((y,w)=>d.set(w,!1))},[n]),pe.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),c==="popLayout"&&(t=G.jsx(wL,{isPresent:n,anchorX:l,root:f,children:t})),G.jsx(Nm.Provider,{value:m,children:t})};function bL(){return new Map}function r6(t=!0){const e=pe.useContext(Nm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=pe.useId();pe.useEffect(()=>{if(t)return i(r)},[t]);const c=pe.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,c]:[!0]}const Wg=t=>t.key||"";function _3(t){const e=[];return pe.Children.forEach(t,n=>{pe.isValidElement(n)&&e.push(n)}),e}const wh=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:c=!1,anchorX:l="left",root:f})=>{const[d,h]=r6(c),g=pe.useMemo(()=>_3(t),[t]),m=c&&!d?[]:g.map(Wg),y=pe.useRef(!0),w=pe.useRef(g),v=R2(()=>new Map),[E,C]=pe.useState(g),[T,N]=pe.useState(g);p8(()=>{y.current=!1,w.current=g;for(let A=0;A<T.length;A++){const _=Wg(T[A]);m.includes(_)?v.delete(_):v.get(_)!==!0&&v.set(_,!1)}},[T,m.length,m.join("-")]);const I=[];if(g!==E){let A=[...g];for(let _=0;_<T.length;_++){const D=T[_],O=Wg(D);m.includes(O)||(A.splice(_,0,D),I.push(D))}return r==="wait"&&I.length&&(A=I),N(_3(A)),C(g),null}const{forceRender:S}=pe.useContext(M2);return G.jsx(G.Fragment,{children:T.map(A=>{const _=Wg(A),D=c&&!d?!1:g===T||m.includes(_),O=()=>{if(v.has(_))v.set(_,!0);else return;let P=!0;v.forEach(U=>{U||(P=!1)}),P&&(S?.(),N(w.current),c&&h?.(),s&&s())};return G.jsx(vL,{isPresent:D,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:r,root:f,onExitComplete:D?void 0:O,anchorX:l,children:A},_)})})},a6=pe.createContext({strict:!1}),O3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ku={};for(const t in O3)Ku[t]={isEnabled:e=>O3[t].some(n=>!!e[n])};function EL(t){for(const e in t)Ku[e]={...Ku[e],...t[e]}}const xL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Q0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xL.has(t)}let o6=t=>!Q0(t);function SL(t){typeof t=="function"&&(o6=e=>e.startsWith("on")?!Q0(e):t(e))}try{SL(require("@emotion/is-prop-valid").default)}catch{}function CL(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(o6(i)||n===!0&&Q0(i)||!e&&!Q0(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Tm=pe.createContext({});function Im(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function vh(t){return typeof t=="string"||Array.isArray(t)}const sE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iE=["initial",...sE];function Dm(t){return Im(t.animate)||iE.some(e=>vh(t[e]))}function c6(t){return!!(Dm(t)||t.variants)}function AL(t,e){if(Dm(t)){const{initial:n,animate:s}=t;return{initial:n===!1||vh(n)?n:void 0,animate:vh(s)?s:void 0}}return t.inherit!==!1?e:{}}function NL(t){const{initial:e,animate:n}=AL(t,pe.useContext(Tm));return pe.useMemo(()=>({initial:e,animate:n}),[M3(e),M3(n)])}function M3(t){return Array.isArray(t)?t.join(" "):t}const bh={};function TL(t){for(const e in t)bh[e]=t[e],H2(e)&&(bh[e].isCSSVariable=!0)}function l6(t,{layout:e,layoutId:n}){return of.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bh[t]||t==="opacity")}const IL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DL=af.length;function _L(t,e,n){let s="",i=!0;for(let r=0;r<DL;r++){const c=af[r],l=t[c];if(l===void 0)continue;let f=!0;if(typeof l=="number"?f=l===(c.startsWith("scale")?1:0):f=parseFloat(l)===0,!f||n){const d=J8(l,J2[c]);if(!f){i=!1;const h=IL[c]||c;s+=`${h}(${d}) `}n&&(e[c]=d)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function rE(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let c=!1,l=!1;for(const f in e){const d=e[f];if(of.has(f)){c=!0;continue}else if(H2(f)){i[f]=d;continue}else{const h=J8(d,J2[f]);f.startsWith("origin")?(l=!0,r[f]=h):s[f]=h}}if(e.transform||(c||n?s.transform=_L(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:f="50%",originY:d="50%",originZ:h=0}=r;s.transformOrigin=`${f} ${d} ${h}`}}const aE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function u6(t,e,n){for(const s in e)!es(e[s])&&!l6(s,n)&&(t[s]=e[s])}function OL({transformTemplate:t},e){return pe.useMemo(()=>{const n=aE();return rE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ML(t,e){const n=t.style||{},s={};return u6(s,n,t),Object.assign(s,OL(t,e)),s}function RL(t,e){const n={},s=ML(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const PL={offset:"stroke-dashoffset",array:"stroke-dasharray"},$L={offset:"strokeDashoffset",array:"strokeDasharray"};function UL(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?PL:$L;t[r.offset]=je.transform(-s);const c=je.transform(e),l=je.transform(n);t[r.array]=`${c} ${l}`}function f6(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:c=0,...l},f,d,h){if(rE(t,l,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),s!==void 0&&(g.scale=s),i!==void 0&&UL(g,i,r,c,!1)}const d6=()=>({...aE(),attrs:{}}),h6=t=>typeof t=="string"&&t.toLowerCase()==="svg";function LL(t,e,n,s){const i=pe.useMemo(()=>{const r=d6();return f6(r,e,h6(s),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};u6(r,t.style,t),i.style={...r,...i.style}}return i}const kL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oE(t){return typeof t!="string"||t.includes("-")?!1:!!(kL.indexOf(t)>-1||/[A-Z]/u.test(t))}function BL(t,e,n,{latestValues:s},i,r=!1){const l=(oE(t)?LL:RL)(e,s,i,t),f=CL(e,typeof t=="string",r),d=t!==pe.Fragment?{...f,...l,ref:n}:{},{children:h}=e,g=pe.useMemo(()=>es(h)?h.get():h,[h]);return pe.createElement(t,{...d,children:g})}function R3(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function cE(t,e,n,s){if(typeof e=="function"){const[i,r]=R3(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=R3(s);e=e(n!==void 0?n:t.custom,i,r)}return e}function O0(t){return es(t)?t.get():t}function jL({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:zL(n,s,i,t),renderState:e()}}function zL(t,e,n,s){const i={},r=s(t,{});for(const m in r)i[m]=O0(r[m]);let{initial:c,animate:l}=t;const f=Dm(t),d=c6(t);e&&d&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||c===!1;const g=h?l:c;if(g&&typeof g!="boolean"&&!Im(g)){const m=Array.isArray(g)?g:[g];for(let y=0;y<m.length;y++){const w=cE(t,m[y]);if(w){const{transitionEnd:v,transition:E,...C}=w;for(const T in C){let N=C[T];if(Array.isArray(N)){const I=h?N.length-1:0;N=N[I]}N!==null&&(i[T]=N)}for(const T in v)i[T]=v[T]}}}return i}const p6=t=>(e,n)=>{const s=pe.useContext(Tm),i=pe.useContext(Nm),r=()=>jL(t,e,s,i);return n?r():R2(r)};function lE(t,e,n){const{style:s}=t,i={};for(const r in s)(es(s[r])||e.style&&es(e.style[r])||l6(r,t)||n?.getValue(r)?.liveStyle!==void 0)&&(i[r]=s[r]);return i}const HL=p6({scrapeMotionValuesFromProps:lE,createRenderState:aE});function g6(t,e,n){const s=lE(t,e,n);for(const i in t)if(es(t[i])||es(e[i])){const r=af.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}const FL=p6({scrapeMotionValuesFromProps:g6,createRenderState:d6}),VL=Symbol.for("motionComponentSymbol");function Ou(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qL(t,e,n){return pe.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Ou(n)&&(n.current=s))},[e])}const uE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WL="framerAppearId",m6="data-"+uE(WL),y6=pe.createContext({});function KL(t,e,n,s,i){const{visualElement:r}=pe.useContext(Tm),c=pe.useContext(a6),l=pe.useContext(Nm),f=pe.useContext(nE).reducedMotion,d=pe.useRef(null);s=s||c.renderer,!d.current&&s&&(d.current=s(t,{visualState:e,parent:r,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:f}));const h=d.current,g=pe.useContext(y6);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&GL(d.current,n,i,g);const m=pe.useRef(!1);pe.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[m6],w=pe.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return p8(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),pe.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),w.current=!1),h.enteringChildren=void 0)}),h}function GL(t,e,n,s){const{layoutId:i,layout:r,drag:c,dragConstraints:l,layoutScroll:f,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:w6(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!c||l&&Ou(l),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:f,layoutRoot:d})}function w6(t){if(t)return t.options.allowProjection!==!1?t.projection:w6(t.parent)}function x1(t,{forwardMotionProps:e=!1}={},n,s){n&&EL(n);const i=oE(t)?FL:HL;function r(l,f){let d;const h={...pe.useContext(nE),...l,layoutId:YL(l)},{isStatic:g}=h,m=NL(l),y=i(l,g);if(!g&&P2){XL();const w=QL(h);d=w.MeasureLayout,m.visualElement=KL(t,y,h,s,w.ProjectionNode)}return G.jsxs(Tm.Provider,{value:m,children:[d&&m.visualElement?G.jsx(d,{visualElement:m.visualElement,...h}):null,BL(t,l,qL(y,m.visualElement,f),y,g,e)]})}r.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=pe.forwardRef(r);return c[VL]=t,c}function YL({layoutId:t}){const e=pe.useContext(M2).id;return e&&t!==void 0?e+"-"+t:t}function XL(t,e){pe.useContext(a6).strict}function QL(t){const{drag:e,layout:n}=Ku;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function ZL(t,e){if(typeof Proxy>"u")return x1;const n=new Map,s=(r,c)=>x1(r,c,t,e),i=(r,c)=>s(r,c);return new Proxy(i,{get:(r,c)=>c==="create"?s:(n.has(c)||n.set(c,x1(c,void 0,t,e)),n.get(c))})}function v6({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function JL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ek(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function S1(t){return t===void 0||t===1}function ob({scale:t,scaleX:e,scaleY:n}){return!S1(t)||!S1(e)||!S1(n)}function Rc(t){return ob(t)||b6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function b6(t){return P3(t.x)||P3(t.y)}function P3(t){return t&&t!=="0%"}function Z0(t,e,n){const s=t-n,i=e*s;return n+i}function $3(t,e,n,s,i){return i!==void 0&&(t=Z0(t,i,s)),Z0(t,n,s)+e}function cb(t,e=0,n=1,s,i){t.min=$3(t.min,e,n,s,i),t.max=$3(t.max,e,n,s,i)}function E6(t,{x:e,y:n}){cb(t.x,e.translate,e.scale,e.originPoint),cb(t.y,n.translate,n.scale,n.originPoint)}const U3=.999999999999,L3=1.0000000000001;function tk(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,c;for(let l=0;l<i;l++){r=n[l],c=r.projectionDelta;const{visualElement:f}=r.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ru(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,E6(t,c)),s&&Rc(r.latestValues)&&Ru(t,r.latestValues))}e.x<L3&&e.x>U3&&(e.x=1),e.y<L3&&e.y>U3&&(e.y=1)}function Mu(t,e){t.min=t.min+e,t.max=t.max+e}function k3(t,e,n,s,i=.5){const r=Ft(t.min,t.max,i);cb(t,e,n,r,s)}function Ru(t,e){k3(t.x,e.x,e.scaleX,e.scale,e.originX),k3(t.y,e.y,e.scaleY,e.scale,e.originY)}function x6(t,e){return v6(ek(t.getBoundingClientRect(),e))}function nk(t,e,n){const s=x6(t,n),{scroll:i}=e;return i&&(Mu(s.x,i.offset.x),Mu(s.y,i.offset.y)),s}const B3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pu=()=>({x:B3(),y:B3()}),j3=()=>({min:0,max:0}),Xt=()=>({x:j3(),y:j3()}),lb={current:null},S6={current:!1};function sk(){if(S6.current=!0,!!P2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lb.current=t.matches;t.addEventListener("change",e),e()}else lb.current=!1}const ik=new WeakMap;function rk(t,e,n){for(const s in e){const i=e[s],r=n[s];if(es(i))t.addValue(s,i);else if(es(r))t.addValue(s,Wu(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(s);t.addValue(s,Wu(c!==void 0?c:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const z3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ak{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=_s.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ht.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=Dm(n),this.isVariantNode=c6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const y=g[m];f[m]!==void 0&&es(y)&&y.set(f[m])}}mount(e){this.current=e,ik.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),S6.current||sk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qo(this.notifyUpdate),qo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=of.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ku){const n=Ku[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<z3.length;s++){const i=z3[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,c=e[r];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=rk(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Wu(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(g8(s)||y8(s))?s=parseFloat(s):!pL(s)&&Wo.test(n)&&(s=Z8(e,n)),this.setBaseTarget(e,es(s)?s.get():s)),es(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=cE(this.props,n,this.presenceContext?.custom);r&&(s=r[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!es(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new B2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){eE.render(this.render)}}class C6 extends ak{constructor(){super(...arguments),this.KeyframeResolver=nL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;es(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function A6(t,{style:e,vars:n},s,i){const r=t.style;let c;for(c in e)r[c]=e[c];i?.applyProjectionStyles(r,s);for(c in n)r.setProperty(c,n[c])}function ok(t){return window.getComputedStyle(t)}class ck extends C6{constructor(){super(...arguments),this.type="html",this.renderInstance=A6}readValueFromInstance(e,n){if(of.has(n))return this.projection?.isProjecting?eb(n):EU(e,n);{const s=ok(e),i=(H2(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return x6(e,n)}build(e,n,s){rE(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return lE(e,n,s)}}const N6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lk(t,e,n,s){A6(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(N6.has(i)?i:uE(i),e.attrs[i])}class uk extends C6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(of.has(n)){const s=Q8(n);return s&&s.default||0}return n=N6.has(n)?n:uE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return g6(e,n,s)}build(e,n,s){f6(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){lk(e,n,s,i)}mount(e){this.isSVGTag=h6(e.tagName),super.mount(e)}}const fk=(t,e)=>oE(t)?new uk(e):new ck(e,{allowProjection:t!==pe.Fragment});function zu(t,e,n){const s=t.getProps();return cE(s,e,n!==void 0?n:s.custom,t)}const ub=t=>Array.isArray(t);function dk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wu(n))}function hk(t){return ub(t)?t[t.length-1]||0:t}function pk(t,e){const n=zu(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const c in r){const l=hk(r[c]);dk(t,c,l)}}function gk(t){return!!(es(t)&&t.add)}function fb(t,e){const n=t.getValue("willChange");if(gk(n))return n.add(e);if(!n&&Ma.WillChange){const s=new Ma.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function T6(t){return t.props[m6]}const mk=t=>t!==null;function yk(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(mk),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[r]}const wk={type:"spring",stiffness:500,damping:25,restSpeed:10},vk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bk={type:"keyframes",duration:.8},Ek={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xk=(t,{keyframes:e})=>e.length>2?bk:of.has(t)?t.startsWith("scale")?vk(e[1]):wk:Ek;function Sk({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:c,repeatDelay:l,from:f,elapsed:d,...h}){return!!Object.keys(h).length}const fE=(t,e,n,s={},i,r)=>c=>{const l=Z2(s,t)||{},f=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Ur(f);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:r?void 0:i};Sk(l)||Object.assign(h,xk(t,h)),h.duration&&(h.duration=Ur(h.duration)),h.repeatDelay&&(h.repeatDelay=Ur(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(rb(h),h.delay===0&&(g=!0)),(Ma.instantAnimations||Ma.skipAnimations)&&(g=!0,rb(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,g&&!r&&e.get()!==void 0){const m=yk(h.keyframes,l);if(m!==void 0){Ht.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new X2(h):new VU(h)};function Ck({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function I6(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:c,...l}=e;s&&(r=s);const f=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const g=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&Ck(d,h))continue;const y={delay:n,...Z2(r||{},h)},w=g.get();if(w!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===w&&!y.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const C=T6(t);if(C){const T=window.MotionHandoffAnimation(C,h,Ht);T!==null&&(y.startTime=T,v=!0)}}fb(t,h),g.start(fE(h,g,m,t.shouldReduceMotion&&G8.has(h)?{type:!1}:y,t,v));const E=g.animation;E&&f.push(E)}return c&&Promise.all(f).then(()=>{Ht.update(()=>{c&&pk(t,c)})}),f}function D6(t,e,n,s=0,i=1){const r=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),c=t.size,l=(c-1)*s;return typeof n=="function"?n(r,c):i===1?r*s:l-r*s}function db(t,e,n={}){const s=zu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(I6(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return Ak(t,e,f,d,h,g,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[f,d]=l==="beforeChildren"?[r,c]:[c,r];return f().then(()=>d())}else return Promise.all([r(),c(n.delay)])}function Ak(t,e,n=0,s=0,i=0,r=1,c){const l=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),l.push(db(f,e,{...c,delay:n+(typeof s=="function"?0:s)+D6(t.variantChildren,f,s,i,r)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(l)}function Nk(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>db(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=db(t,e,n);else{const i=typeof e=="function"?zu(t,e,n.custom):e;s=Promise.all(I6(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function _6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Tk=iE.length;function O6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?O6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Tk;n++){const s=iE[n],i=t.props[s];(vh(i)||i===!1)&&(e[s]=i)}return e}const Ik=[...sE].reverse(),Dk=sE.length;function _k(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Nk(t,n,s)))}function Ok(t){let e=_k(t),n=H3(),s=!0;const i=f=>(d,h)=>{const g=zu(t,h,f==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:y,...w}=g;d={...d,...w,...y}}return d};function r(f){e=f(t)}function c(f){const{props:d}=t,h=O6(t.parent)||{},g=[],m=new Set;let y={},w=1/0;for(let E=0;E<Dk;E++){const C=Ik[E],T=n[C],N=d[C]!==void 0?d[C]:h[C],I=vh(N),S=C===f?T.isActive:null;S===!1&&(w=E);let A=N===h[C]&&N!==d[C]&&I;if(A&&s&&t.manuallyAnimateOnMount&&(A=!1),T.protectedKeys={...y},!T.isActive&&S===null||!N&&!T.prevProp||Im(N)||typeof N=="boolean")continue;const _=Mk(T.prevProp,N);let D=_||C===f&&T.isActive&&!A&&I||E>w&&I,O=!1;const P=Array.isArray(N)?N:[N];let U=P.reduce(i(C),{});S===!1&&(U={});const{prevResolvedValues:L={}}=T,H={...L,...U},q=k=>{D=!0,m.has(k)&&(O=!0,m.delete(k)),T.needsAnimating[k]=!0;const F=t.getValue(k);F&&(F.liveStyle=!1)};for(const k in H){const F=U[k],K=L[k];if(y.hasOwnProperty(k))continue;let W=!1;ub(F)&&ub(K)?W=!_6(F,K):W=F!==K,W?F!=null?q(k):m.add(k):F!==void 0&&m.has(k)?q(k):T.protectedKeys[k]=!0}T.prevProp=N,T.prevResolvedValues=U,T.isActive&&(y={...y,...U}),s&&t.blockInitialAnimation&&(D=!1);const $=A&&_;D&&(!$||O)&&g.push(...P.map(k=>{const F={type:C};if(typeof k=="string"&&s&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,W=zu(K,k);if(K.enteringChildren&&W){const{delayChildren:j}=W.transition||{};F.delay=D6(K.enteringChildren,t,j)}}return{animation:k,options:F}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const C=zu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(E.transition=C.transition)}m.forEach(C=>{const T=t.getBaseTarget(C),N=t.getValue(C);N&&(N.liveStyle=!0),E[C]=T??null}),g.push({animation:E})}let v=!!g.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(v=!1),s=!1,v?e(g):Promise.resolve()}function l(f,d){if(n[f].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(f,d)),n[f].isActive=d;const h=c(f);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:c,setActive:l,setAnimateFunction:r,getState:()=>n,reset:()=>{n=H3()}}}function Mk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_6(e,t):!1}function xc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H3(){return{animate:xc(!0),whileInView:xc(),whileHover:xc(),whileTap:xc(),whileDrag:xc(),whileFocus:xc(),exit:xc()}}class Xo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Rk extends Xo{constructor(e){super(e),e.animationState||(e.animationState=Ok(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Im(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Pk=0;class $k extends Xo{constructor(){super(...arguments),this.id=Pk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Uk={animation:{Feature:Rk},exit:{Feature:$k}};function Eh(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function cp(t){return{point:{x:t.pageX,y:t.pageY}}}const Lk=t=>e=>tE(e)&&t(e,cp(e));function Xd(t,e,n,s){return Eh(t,e,Lk(n),s)}const M6=1e-4,kk=1-M6,Bk=1+M6,R6=.01,jk=0-R6,zk=0+R6;function os(t){return t.max-t.min}function Hk(t,e,n){return Math.abs(t-e)<=n}function F3(t,e,n,s=.5){t.origin=s,t.originPoint=Ft(e.min,e.max,t.origin),t.scale=os(n)/os(e),t.translate=Ft(n.min,n.max,t.origin)-t.originPoint,(t.scale>=kk&&t.scale<=Bk||isNaN(t.scale))&&(t.scale=1),(t.translate>=jk&&t.translate<=zk||isNaN(t.translate))&&(t.translate=0)}function Qd(t,e,n,s){F3(t.x,e.x,n.x,s?s.originX:void 0),F3(t.y,e.y,n.y,s?s.originY:void 0)}function V3(t,e,n){t.min=n.min+e.min,t.max=t.min+os(e)}function Fk(t,e,n){V3(t.x,e.x,n.x),V3(t.y,e.y,n.y)}function q3(t,e,n){t.min=e.min-n.min,t.max=t.min+os(e)}function Zd(t,e,n){q3(t.x,e.x,n.x),q3(t.y,e.y,n.y)}function Ni(t){return[t("x"),t("y")]}const P6=({current:t})=>t?t.ownerDocument.defaultView:null,W3=(t,e)=>Math.abs(t-e);function Vk(t,e){const n=W3(t.x,e.x),s=W3(t.y,e.y);return Math.sqrt(n**2+s**2)}class $6{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=A1(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=Vk(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:v}=m,{timestamp:E}=$n;this.history.push({...v,timestamp:E});const{onStart:C,onMove:T}=this.handlers;y||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=C1(y,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=A1(m.type==="pointercancel"?this.lastMoveEventInfo:C1(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,C),v&&v(m,C)},!tE(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=i||window;const l=cp(e),f=C1(l,this.transformPagePoint),{point:d}=f,{timestamp:h}=$n;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,A1(f,this.history)),this.removeListeners=rp(Xd(this.contextWindow,"pointermove",this.handlePointerMove),Xd(this.contextWindow,"pointerup",this.handlePointerUp),Xd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qo(this.updatePoint)}}function C1(t,e){return e?{point:e(t.point)}:t}function K3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function A1({point:t},e){return{point:t,delta:K3(t,U6(e)),offset:K3(t,qk(e)),velocity:Wk(e,.1)}}function qk(t){return t[0]}function U6(t){return t[t.length-1]}function Wk(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=U6(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Ur(e)));)n--;if(!s)return{x:0,y:0};const r=_i(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const c={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Kk(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Ft(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Ft(n,t,s.max):Math.min(t,n)),t}function G3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Gk(t,{top:e,left:n,bottom:s,right:i}){return{x:G3(t.x,n,i),y:G3(t.y,e,s)}}function Y3(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Yk(t,e){return{x:Y3(t.x,e.x),y:Y3(t.y,e.y)}}function Xk(t,e){let n=.5;const s=os(t),i=os(e);return i>s?n=gh(e.min,e.max-s,t.min):s>i&&(n=gh(t.min,t.max-i,e.min)),Oa(0,1,n)}function Qk(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hb=.35;function Zk(t=hb){return t===!1?t=0:t===!0&&(t=hb),{x:X3(t,"left","right"),y:X3(t,"top","bottom")}}function X3(t,e,n){return{min:Q3(t,e),max:Q3(t,n)}}function Q3(t,e){return typeof t=="number"?t:t[e]||0}const Jk=new WeakMap;class e7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cp(g).point)},c=(g,m)=>{const{drag:y,dragPropagation:w,onDragStart:v}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aL(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ni(C=>{let T=this.getAxisMotionValue(C).get()||0;if(Lr.test(T)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[C];I&&(T=os(I)*(parseFloat(T)/100))}}this.originPoint[C]=T}),v&&Ht.postRender(()=>v(g,m)),fb(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:v,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=m;if(w&&this.currentDirection===null){this.currentDirection=t7(C),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),E&&E(g,m)},f=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ni(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $6(e,{onSessionStart:r,onStart:c,onMove:l,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:P6(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ht.postRender(()=>l(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Kg(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=Kk(c,this.constraints[e],this.elastic[e])),r.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ou(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Gk(s.layoutBox,e):this.constraints=!1,this.elastic=Zk(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ni(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=Qk(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ou(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=nk(s,i.root,this.visualElement.getTransformPagePoint());let c=Yk(i.layout.layoutBox,r);if(n){const l=n(JL(c));this.hasMutatedConstraints=!!l,l&&(c=v6(l))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),f=this.constraints||{},d=Ni(h=>{if(!Kg(h,n,this.currentDirection))return;let g=f&&f[h]||{};c&&(g={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,w={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...r,...g};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return fb(this.visualElement,e),s.start(fE(e,s,0,n,this.visualElement,!1))}stopAnimation(){Ni(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ni(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ni(n=>{const{drag:s}=this.getProps();if(!Kg(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:l}=i.layout.layoutBox[n];r.set(e[n]-Ft(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ou(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ni(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const f=l.get();i[c]=Xk({min:f,max:f},this.constraints[c])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ni(c=>{if(!Kg(c,e,null))return;const l=this.getAxisMotionValue(c),{min:f,max:d}=this.constraints[c];l.set(Ft(f,d,i[c]))})}addListeners(){if(!this.visualElement.current)return;Jk.set(this.visualElement,this);const e=this.visualElement.current,n=Xd(e,"pointerdown",f=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Ou(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ht.read(s);const c=Eh(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ni(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=f[h].translate,g.set(g.get()+f[h].translate))}),this.visualElement.render())}));return()=>{c(),n(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:c=hb,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:c,dragMomentum:l}}}function Kg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function t7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class n7 extends Xo{constructor(e){super(e),this.removeGroupControls=Mi,this.removeListeners=Mi,this.controls=new e7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mi}unmount(){this.removeGroupControls(),this.removeListeners()}}const Z3=t=>(e,n)=>{t&&Ht.postRender(()=>t(e,n))};class s7 extends Xo{constructor(){super(...arguments),this.removePointerDownListener=Mi}onPointerDown(e){this.session=new $6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:P6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Z3(e),onStart:Z3(n),onMove:s,onEnd:(r,c)=>{delete this.session,i&&Ht.postRender(()=>i(r,c))}}}mount(){this.removePointerDownListener=Xd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const M0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function J3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(je.test(t))t=parseFloat(t);else return t;const n=J3(t,e.target.x),s=J3(t,e.target.y);return`${n}% ${s}%`}},i7={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Wo.parse(t);if(i.length>5)return s;const r=Wo.createTransformer(t),c=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,f=n.y.scale*e.y;i[0+c]/=l,i[1+c]/=f;const d=Ft(l,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=d),typeof i[3+c]=="number"&&(i[3+c]/=d),r(i)}};let N1=!1;class r7 extends pe.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;TL(a7),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),N1&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),M0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:c}=s;return c&&(c.isPresent=r,N1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==r?c.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?c.promote():c.relegate()||Ht.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),eE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;N1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L6(t){const[e,n]=r6(),s=pe.useContext(M2);return G.jsx(r7,{...t,layoutGroup:s,switchLayoutGroup:pe.useContext(y6),isPresent:e,safeToRemove:n})}const a7={borderRadius:{...yd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yd,borderTopRightRadius:yd,borderBottomLeftRadius:yd,borderBottomRightRadius:yd,boxShadow:i7};function o7(t,e,n){const s=es(t)?t:Wu(t);return s.start(fE("",s,e,n)),s.animation}const c7=(t,e)=>t.depth-e.depth;class l7{constructor(){this.children=[],this.isDirty=!1}add(e){$2(this.children,e),this.isDirty=!0}remove(e){U2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(c7),this.isDirty=!1,this.children.forEach(e)}}function u7(t,e){const n=_s.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(qo(s),t(r-e))};return Ht.setup(s,!0),()=>qo(s)}const k6=["TopLeft","TopRight","BottomLeft","BottomRight"],f7=k6.length,e4=t=>typeof t=="string"?parseFloat(t):t,t4=t=>typeof t=="number"||je.test(t);function d7(t,e,n,s,i,r){i?(t.opacity=Ft(0,n.opacity??1,h7(s)),t.opacityExit=Ft(e.opacity??1,0,p7(s))):r&&(t.opacity=Ft(e.opacity??1,n.opacity??1,s));for(let c=0;c<f7;c++){const l=`border${k6[c]}Radius`;let f=n4(e,l),d=n4(n,l);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||t4(f)===t4(d)?(t[l]=Math.max(Ft(e4(f),e4(d),s),0),(Lr.test(d)||Lr.test(f))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=Ft(e.rotate||0,n.rotate||0,s))}function n4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const h7=B6(0,.5,A8),p7=B6(.5,.95,Mi);function B6(t,e,n){return s=>s<t?0:s>e?1:n(gh(t,e,s))}function s4(t,e){t.min=e.min,t.max=e.max}function vi(t,e){s4(t.x,e.x),s4(t.y,e.y)}function i4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r4(t,e,n,s,i){return t-=e,t=Z0(t,1/n,s),i!==void 0&&(t=Z0(t,1/i,s)),t}function g7(t,e=0,n=1,s=.5,i,r=t,c=t){if(Lr.test(e)&&(e=parseFloat(e),e=Ft(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=Ft(r.min,r.max,s);t===r&&(l-=e),t.min=r4(t.min,e,n,l,i),t.max=r4(t.max,e,n,l,i)}function a4(t,e,[n,s,i],r,c){g7(t,e[n],e[s],e[i],e.scale,r,c)}const m7=["x","scaleX","originX"],y7=["y","scaleY","originY"];function o4(t,e,n,s){a4(t.x,e,m7,n?n.x:void 0,s?s.x:void 0),a4(t.y,e,y7,n?n.y:void 0,s?s.y:void 0)}function c4(t){return t.translate===0&&t.scale===1}function j6(t){return c4(t.x)&&c4(t.y)}function l4(t,e){return t.min===e.min&&t.max===e.max}function w7(t,e){return l4(t.x,e.x)&&l4(t.y,e.y)}function u4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function z6(t,e){return u4(t.x,e.x)&&u4(t.y,e.y)}function f4(t){return os(t.x)/os(t.y)}function d4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class v7{constructor(){this.members=[]}add(e){$2(this.members,e),e.scheduleRender()}remove(e){if(U2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b7(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,c=n?.z||0;if((i||r||c)&&(s=`translate3d(${i}px, ${r}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:y,skewY:w}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),g&&(s+=`rotateX(${g}deg) `),m&&(s+=`rotateY(${m}deg) `),y&&(s+=`skewX(${y}deg) `),w&&(s+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,f=t.y.scale*e.y;return(l!==1||f!==1)&&(s+=`scale(${l}, ${f})`),s||"none"}const T1=["","X","Y","Z"],E7=1e3;let x7=0;function I1(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function H6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=T6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&H6(s)}function F6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(c={},l=e?.()){this.id=x7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(A7),this.nodes.forEach(D7),this.nodes.forEach(_7),this.nodes.forEach(N7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new l7)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new B2),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const f=this.eventHandlers.get(c);f&&f.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=i6(c)&&!dL(c),this.instance=c;const{layoutId:l,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||l)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{g=window.innerWidth}),t(c,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,h&&h(),h=u7(m,250),M0.hasAnimatedSinceResize&&(M0.hasAnimatedSinceResize=!1,this.nodes.forEach(g4)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||$7,{onLayoutAnimationStart:v,onLayoutAnimationComplete:E}=d.getProps(),C=!this.targetLayout||!z6(this.targetLayout,y),T=!g&&m;if(this.options.layoutRoot||this.resumeFrom||T||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Z2(w,"layout"),onPlay:v,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,T)}else g||g4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&H6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:f}=this.options;if(l===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(h4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(p4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(I7),this.nodes.forEach(S7),this.nodes.forEach(C7)):this.nodes.forEach(p4),this.clearAllSnapshots();const l=_s.now();$n.delta=Oa(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,m1.update.process($n),m1.preRender.process($n),m1.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(T7),this.sharedNodes.forEach(M7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!os(this.snapshot.measuredBox.x)&&!os(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!j6(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;c&&this.instance&&(l||Rc(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let f=this.removeElementScroll(l);return c&&(f=this.removeTransform(f)),U7(f),{animationId:this.root.animationId,measuredBox:l,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Xt();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(L7))){const{scroll:d}=this.root;d&&(Mu(l.x,d.offset.x),Mu(l.y,d.offset.y))}return l}removeElementScroll(c){const l=Xt();if(vi(l,c),this.scroll?.wasRoot)return l;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&vi(l,c),Mu(l.x,h.offset.x),Mu(l.y,h.offset.y))}return l}applyTransform(c,l=!1){const f=Xt();vi(f,c);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ru(f,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rc(h.latestValues)&&Ru(f,h.latestValues)}return Rc(this.latestValues)&&Ru(f,this.latestValues),f}removeTransform(c){const l=Xt();vi(l,c);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Rc(d.latestValues))continue;ob(d.latestValues)&&d.updateSnapshot();const h=Xt(),g=d.measurePageBox();vi(h,g),o4(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Rc(this.latestValues)&&o4(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==l;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Zd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xt(),this.targetWithTransforms=Xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Fk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),E6(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Zd(this.relativeTargetOrigin,this.target,m.target),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ob(this.parent.latestValues)||b6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(f=!1),f)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;vi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;tk(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Xt());const{target:y}=c;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i4(this.prevProjectionDelta.x,this.projectionDelta.x),i4(this.prevProjectionDelta.y,this.projectionDelta.y)),Qd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!d4(this.projectionDelta.x,this.prevProjectionDelta.x)||!d4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pu(),this.projectionDelta=Pu(),this.projectionDeltaWithTransform=Pu()}setAnimationOrigin(c,l=!1){const f=this.snapshot,d=f?f.latestValues:{},h={...this.latestValues},g=Pu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Xt(),y=f?f.source:void 0,w=this.layout?this.layout.source:void 0,v=y!==w,E=this.getStack(),C=!E||E.members.length<=1,T=!!(v&&!C&&this.options.crossfade===!0&&!this.path.some(P7));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const S=I/1e3;m4(g.x,c.x,S),m4(g.y,c.y,S),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R7(this.relativeTarget,this.relativeTargetOrigin,m,S),N&&w7(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Xt()),vi(N,this.relativeTarget)),v&&(this.animationValues=h,d7(h,d,this.latestValues,S,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{M0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wu(0)),this.currentAnimation=o7(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(E7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:f,layout:d,latestValues:h}=c;if(!(!l||!f||!d)){if(this!==c&&this.layout&&d&&V6(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Xt();const g=os(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+g;const m=os(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+m}vi(l,f),Ru(l,h),Qd(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new v7),this.sharedNodes.get(c).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(l=!0),!l)return;const d={};f.z&&I1("z",c,d,this.animationValues);for(let h=0;h<T1.length;h++)I1(`rotate${T1[h]}`,c,d,this.animationValues),I1(`skew${T1[h]}`,c,d,this.animationValues);c.render();for(const h in d)c.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=O0(l?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=O0(l?.pointerEvents)||""),this.hasProjected&&!Rc(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=b7(this.projectionDeltaWithTransform,this.treeScale,h);f&&(g=f(h,g)),c.transform=g;const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in bh){if(h[w]===void 0)continue;const{correct:v,applyTo:E,isCSSVariable:C}=bh[w],T=g==="none"?h[w]:v(h[w],d);if(E){const N=E.length;for(let I=0;I<N;I++)c[E[I]]=T}else C?this.options.visualElement.renderState.vars[w]=T:c[w]=T}this.options.layoutId&&(c.pointerEvents=d===this?O0(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(h4),this.root.sharedNodes.clear()}}}function S7(t){t.updateLayout()}function C7(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,r=e.source!==t.layout.source;i==="size"?Ni(h=>{const g=r?e.measuredBox[h]:e.layoutBox[h],m=os(g);g.min=n[h].min,g.max=g.min+m}):V6(i,e.layoutBox,n)&&Ni(h=>{const g=r?e.measuredBox[h]:e.layoutBox[h],m=os(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const c=Pu();Qd(c,n,e.layoutBox);const l=Pu();r?Qd(l,t.applyTransform(s,!0),e.measuredBox):Qd(l,n,e.layoutBox);const f=!j6(c);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const y=Xt();Zd(y,e.layoutBox,g.layoutBox);const w=Xt();Zd(w,n,m.layoutBox),z6(y,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function A7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function N7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function T7(t){t.clearSnapshot()}function h4(t){t.clearMeasurements()}function p4(t){t.isLayoutDirty=!1}function I7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function D7(t){t.resolveTargetDelta()}function _7(t){t.calcProjection()}function O7(t){t.resetSkewAndRotation()}function M7(t){t.removeLeadSnapshot()}function m4(t,e,n){t.translate=Ft(e.translate,0,n),t.scale=Ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function y4(t,e,n,s){t.min=Ft(e.min,n.min,s),t.max=Ft(e.max,n.max,s)}function R7(t,e,n,s){y4(t.x,e.x,n.x,s),y4(t.y,e.y,n.y,s)}function P7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $7={duration:.45,ease:[.4,0,.1,1]},w4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),v4=w4("applewebkit/")&&!w4("chrome/")?Math.round:Mi;function b4(t){t.min=v4(t.min),t.max=v4(t.max)}function U7(t){b4(t.x),b4(t.y)}function V6(t,e,n){return t==="position"||t==="preserve-aspect"&&!Hk(f4(e),f4(n),.2)}function L7(t){return t!==t.root&&t.scroll?.wasRoot}const k7=F6({attachResizeListener:(t,e)=>Eh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),D1={current:void 0},q6=F6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!D1.current){const t=new k7({});t.mount(window),t.setOptions({layoutScroll:!0}),D1.current=t}return D1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),B7={pan:{Feature:s7},drag:{Feature:n7,ProjectionNode:q6,MeasureLayout:L6}};function E4(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&Ht.postRender(()=>r(e,cp(e)))}class j7 extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=oL(e,(n,s)=>(E4(this.node,s,"Start"),i=>E4(this.node,i,"End"))))}unmount(){}}class z7 extends Xo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rp(Eh(this.node.current,"focus",()=>this.onFocus()),Eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function x4(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&Ht.postRender(()=>r(e,cp(e)))}class H7 extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=fL(e,(n,s)=>(x4(this.node,s,"Start"),(i,{success:r})=>x4(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pb=new WeakMap,_1=new WeakMap,F7=t=>{const e=pb.get(t.target);e&&e(t)},V7=t=>{t.forEach(F7)};function q7({root:t,...e}){const n=t||document;_1.has(n)||_1.set(n,{});const s=_1.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(V7,{root:t,...e})),s[i]}function W7(t,e,n){const s=q7(e);return pb.set(t,n),s.observe(t),()=>{pb.delete(t),s.unobserve(t)}}const K7={some:0,all:1};class G7 extends Xo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:K7[i]},l=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(f)};return W7(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Y7(e,n))&&this.startObserver()}unmount(){}}function Y7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const X7={inView:{Feature:G7},tap:{Feature:H7},focus:{Feature:z7},hover:{Feature:j7}},Q7={layout:{ProjectionNode:q6,MeasureLayout:L6}},Z7={...Uk,...X7,...B7,...Q7},Pe=ZL(Z7,fk);var W6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},S4=Ta.createContext&&Ta.createContext(W6),J7=["attr","size","title"];function e9(t,e){if(t==null)return{};var n=t9(t,e),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function t9(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function J0(){return J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},J0.apply(this,arguments)}function C4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function em(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C4(Object(n),!0).forEach(function(s){n9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function n9(t,e,n){return e=s9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s9(t){var e=i9(t,"string");return typeof e=="symbol"?e:e+""}function i9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K6(t){return t&&t.map((e,n)=>Ta.createElement(e.tag,em({key:n},e.attr),K6(e.child)))}function Rs(t){return e=>Ta.createElement(r9,J0({attr:em({},t.attr)},e),K6(t.child))}function r9(t){var e=n=>{var{attr:s,size:i,title:r}=t,c=e9(t,J7),l=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),Ta.createElement("svg",J0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,c,{className:f,style:em(em({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&Ta.createElement("title",null,r),t.children)};return S4!==void 0?Ta.createElement(S4.Consumer,null,n=>e(n)):e(W6)}function G6(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.5 88.5l-52 52L415 167c9.4 9.4 9.4 24.6 0 33.9l-17.4 17.4c11.8 26.1 18.4 55.1 18.4 85.6 0 114.9-93.1 208-208 208S0 418.9 0 304 93.1 96 208 96c30.5 0 59.5 6.6 85.6 18.4L311 97c9.4-9.4 24.6-9.4 33.9 0l26.5 26.5 52-52 17.1 17zM500 60h-24c-6.6 0-12 5.4-12 12s5.4 12 12 12h24c6.6 0 12-5.4 12-12s-5.4-12-12-12zM440 0c-6.6 0-12 5.4-12 12v24c0 6.6 5.4 12 12 12s12-5.4 12-12V12c0-6.6-5.4-12-12-12zm33.9 55l17-17c4.7-4.7 4.7-12.3 0-17-4.7-4.7-12.3-4.7-17 0l-17 17c-4.7 4.7-4.7 12.3 0 17 4.8 4.7 12.4 4.7 17 0zm-67.8 0c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17zm67.8 34c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17zM112 272c0-35.3 28.7-64 64-64 8.8 0 16-7.2 16-16s-7.2-16-16-16c-52.9 0-96 43.1-96 96 0 8.8 7.2 16 16 16s16-7.2 16-16z"},child:[]}]})(t)}function dE(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(t)}function O1(t){return Rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(t)}function Y6(t){return Rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function X6(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function a9(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function o9(t){return Rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function c9(t){return Rs({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function l9(t){return Rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}function u9(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function hE(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M258.396 21.375l-17.503 64.1c-1.133 2.452-1.782 5.172-1.782 8.05 0 10.634 8.62 19.256 19.255 19.256 10.634 0 19.256-8.62 19.256-19.255 0-.72-.045-1.426-.122-2.125h.022l-.05-.18c-.23-1.917-.737-3.746-1.488-5.45l-17.586-64.395zm118.21 31.494l-46.21 45.77c-6.03 3.254-10.126 9.626-10.126 16.956 0 10.633 8.622 19.254 19.255 19.254.668 0 1.327-.034 1.977-.1 7.608 5.175 14.85 11.125 21.6 17.875 57.872 57.872 57.87 151.418 0 209.29-6.75 6.747-13.99 12.694-21.594 17.868-.65-.066-1.308-.1-1.975-.1-10.634 0-19.256 8.623-19.256 19.256 0 7.006 3.757 13.12 9.352 16.49l46.694 46.252-18.545-70.55c6.468-4.81 12.67-10.137 18.536-16.003l6.608-6.61-.334-.332c3.252-3.637 6.305-7.388 9.183-11.23l71.057 18.68-51.63-52.126c6.54-15.08 10.757-30.926 12.636-46.996l70.61-19.282-70.56-19.267c-1.82-15.925-5.937-31.633-12.343-46.59l51.234-51.727-70.318 18.483c-4.842-6.536-10.22-12.8-16.144-18.723-5.794-5.794-11.916-11.063-18.298-15.824l18.587-70.717zm-236.307.005l17.112 65.107c.218 1.76.662 3.45 1.322 5.032l.153.582c-6.38 4.76-12.498 10.023-18.29 15.814-5.92 5.92-11.294 12.18-16.136 18.715L54.024 139.61l51.31 51.802c-6.41 14.945-10.535 30.64-12.376 46.553l-70.562 19.27L92.95 276.5c1.856 16.108 6.06 31.994 12.595 47.105l-51.574 52.07 70.952-18.648c4.722 6.312 9.94 12.368 15.676 18.102 5.815 5.814 11.96 11.102 18.367 15.876-1.004 2.215-1.613 4.646-1.707 7.213l-16.678 63.456 48.91-48.447-.037-.08c3.86-3.52 6.297-8.575 6.297-14.21 0-10.634-8.622-19.256-19.256-19.256-.395 0-.786.015-1.176.04-7.573-5.16-14.783-11.088-21.506-17.81-57.872-57.872-57.872-151.417 0-209.29 6.725-6.723 13.938-12.65 21.514-17.81.39.022.782.036 1.178.036 10.634 0 19.254-8.62 19.254-19.254 0-6.22-2.963-11.736-7.54-15.256L140.3 52.875zm127.436 89.87v49.02l33.602 19.292 46.18-25.045-79.782-43.268zm-18.69.312l-79.722 42.957 46.31 24.955 33.413-19.062v-48.85zM159.9 202.164v114.012l46.346-24.975v-64.063L159.9 202.164zm196.985.027l-46.342 25.134v63.7l46.342 25.136V202.19zm-98.367 5.83l-33.584 19.158v64.285l33.584 19.162 33.336-19.145v-64.318l-33.336-19.14zm43.082 99.416l-33.864 19.445v47.056l78.24-42.432-44.376-24.068zm-86.24.084l-44.495 23.976 78.182 42.127v-46.885L215.36 307.52zm43.005 94.234c-10.634 0-19.254 8.622-19.254 19.256 0 2.74.582 5.342 1.615 7.703l17.67 64.713 17.787-65.12c.57-1.39.965-2.86 1.197-4.388l.06-.23h-.026c.122-.878.207-1.767.207-2.678 0-10.634-8.62-19.256-19.255-19.256z"},child:[]}]})(t)}function Q6(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 16c48 96 24 120 72 168 0 0 44.864 0 69.53-21.688A135.765 135.765 0 0 0 120.25 256a135.765 135.765 0 0 0 271.5 0 135.765 135.765 0 0 0-36.375-92.906C380.22 183.997 424 184 424 184c48-48 24-72 72-168-96 48-120 24-168 72 0 0 .004 44.6 21.5 69.313a135.765 135.765 0 0 0-186.72-.344C183.987 132.19 184 88 184 88c-48-48-72-24-168-72zm72 312c-48 48-24 72-72 168 96-48 120-24 168-72 0 0 0-48-24-72s-72-24-72-24zm336 0s-48 0-72 24-24 72-24 72c48 48 72 24 168 72-48-96-24-120-72-168z"},child:[]}]})(t)}function gb(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M227.4 34.7c-10.1 0-20.2.2-30.2.5l6.1 65.6-61.1-62.5c-31.3 2.5-62.5 6.6-93.8 12.5l34.2 28.4-48-.6c35.1 100.2 6.9 182.6-.3 292.1L130 476.5c10-1.3 19.9-2.4 29.6-3.3l21.5-42.2 18.6 28.8 41.5-33.5.8 43c82.9-.2 157.7 9.1 235.7 7.9-28.2-73-31.2-143.6-31.9-209.2l-33.3-19.1 32.7-33.9c-.4-21.3-1.3-42-3.6-61.9l-57.4.7 50.2-41.7c-3.8-15.5-9-30.4-16.1-44.7l-29.5-23.9C335 38 281.2 34.6 227.4 34.7zm58.7 37c10.6 24.75 21.1 49.5 31.7 74.3 7.5-10.5 14.9-21 22.4-31.5 16 27.2 32 54.3 48 81.5l-16.2 9.5-33.3-56.7-42.5 59.4-15.2-10.9 24-33.5-21.9-51.5-24.6 40.1 12 22.6-16.5 8.8-18.3-34.5-24.8 58.2-17.2-7.4 32.5-76.2 7.7-18c4.8 9.2 9.6 18.3 14.5 27.4 12.5-20.6 25.1-41.11 37.7-61.6zM91.2 128c6.72 1.6 13.4 3.4 19.2 5.3-2.1 5.9-4.1 11.8-6.2 17.6-5.79-1.6-11.72-3.4-16.9-4.7 1.39-6 2.62-12.1 3.9-18.2zm37.9 13.4c6.3 3.8 12 7.2 17 12.8L132.6 167c-4-3.7-8.6-7-12.8-9.4zm28.7 32.3c2.1 7.4 2.1 15.7 1.6 22.5l-18.5-2.4c.1-5.1.3-10-1-14.5zm-21.2 35.7l17.2 7.1c-3.3 6.6-5.1 12.7-8.6 17.8l-16.3-9c2.6-5.4 5.6-10.8 7.7-15.9zm-16.5 34.1l17.7 6.1c-1.5 5.4-3 11.2-3.6 16.2l-18.6-2c1.3-7.5 2.1-14 4.5-20.3zm207.8 17.4c8.5 1 14.6 3 21.7 7.1l-9.8 16c-4.1-2.8-9.4-3.8-13.5-4.5zm-21.2 1.5c1.1 6.1 2.5 12.2 3.9 18.3-5.9 1.3-11.7 3.3-16.5 5.1l-6.8-17.4c6.7-2.4 13.5-4.7 19.4-6zm-37.9 15.9l11 15.1c-5.6 4-11.8 7.8-16.8 10.6l-8.9-16.4c5.1-2.9 10.6-6.3 14.7-9.3zM135.3 281c1.5 4.7 4.2 9.2 6.9 12.1l-13.8 12.6c-5.5-5.7-9.5-13.5-11.2-20.1zm230.3 3.3c3.5 6.4 6.8 12.7 8.7 19.1l-17.8 5.6c-2-5.4-4.3-10.8-6.8-14.8zm-127.4 10.9l6.9 17.3c-6.4 2.7-12.9 4.8-18.6 6.5l-5-18c5.9-1.6 11.3-3.8 16.7-5.8zm-83.8 6.2c5.3 1.7 10.8 3.4 15.7 4.2-1.2 6.1-2 12.3-2.8 18.5-7-1-14.5-3.3-20.5-5.7zm50 3.5l2.8 18.5c-7.2 1.3-13.4 1.6-19.8 1.9l-.4-18.7c5.9-.2 11.6-.8 17.4-1.7zm174.5 18c1 6.4 1.6 12.9 2.2 19.3l-18.7 1.5c-.4-6-.9-11.9-2-17.8zm-67.6 30.8c18.9 3.5 44.9 16.2 68.9 33.9 7.4-9.9 14.4-20.4 21.3-31.1l30.1 12.9c-4.7 12.3-15 25.6-28.6 37.2 17 16.2 30.9 34.5 37 53-13.8-18.1-31.1-31.8-50.3-42.8-23.4 15.8-52.7 25.9-79.6 20.4 22.9-4.4 40.6-16.6 55.8-32.6-16.5-7.5-33.8-13.9-51.3-20.1z"},child:[]}]})(t)}function pE(t){return Rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.156 21.625c-45.605 0-86.876 2.852-117.22 7.563-15.17 2.355-27.554 5.11-36.874 8.53-4.66 1.71-8.568 3.515-11.968 6.094-3.238 2.457-6.65 6.36-6.97 11.75h-.75c0 10.08.362 20.022 1.064 29.813H57.53c-.12-7.952.003-15.922.376-23.875l-26.812-6.28C22.55 161.892 64.1 265.716 140.564 339.655l15.655-29.594c-4.198-3.477-8.25-7.063-12.157-10.75 5.846-6.112 12.293-11.76 19.28-16.843 13.468 13.172 28.182 23.565 43.813 30.655 22.114 17.744 8.053 29.368-23.5 36.25 58.863 10.6 38.948 62.267-14.125 92.313-2.14.27-4.256.523-6.28.812-12.047 1.718-21.876 3.71-29.406 6.25-3.765 1.27-6.958 2.6-9.906 4.656-2.95 2.055-6.626 5.705-6.626 11.406 0 5.702 3.677 9.32 6.626 11.375 2.948 2.055 6.14 3.387 9.906 4.657 7.53 2.54 17.36 4.532 29.406 6.25 24.094 3.436 56.784 5.53 92.906 5.53 36.123 0 68.812-2.094 92.906-5.53 12.048-1.718 21.877-3.71 29.407-6.25 3.764-1.27 6.957-2.602 9.905-4.656 2.948-2.055 6.625-5.674 6.625-11.375 0-5.702-3.677-9.352-6.625-11.407-2.948-2.055-6.14-3.387-9.906-4.656-7.53-2.54-17.36-4.532-29.408-6.25-2.013-.287-4.12-.544-6.25-.813-53.076-30.045-72.99-81.71-14.125-92.312-31.568-6.886-45.63-18.522-23.468-36.28 15.74-7.15 30.547-17.655 44.092-30.97 6.648 4.773 12.84 10.038 18.47 15.72-4.105 4.172-8.338 8.257-12.72 12.217l16.188 29.594c79.118-71.955 116.195-179.53 110.03-285l-27.342 7.97c.45 7.61.64 15.19.562 22.75h-25.594c.702-9.792 1.063-19.735 1.063-29.814h-.75c-.323-5.39-3.763-9.293-7-11.75-3.402-2.58-7.31-4.383-11.97-6.093-9.32-3.422-21.704-6.177-36.875-8.532-30.342-4.71-71.613-7.563-117.22-7.563zm0 18.688c44.822 0 85.426 2.854 114.344 7.343 14.46 2.245 26.06 4.932 33.313 7.594 1.04.382 1.775.75 2.625 1.125-.85.375-1.58.742-2.625 1.125-7.252 2.662-18.854 5.38-33.313 7.625-28.918 4.49-69.522 7.344-114.344 7.344-44.82 0-85.425-2.855-114.344-7.345-14.46-2.245-26.06-4.963-33.312-7.625-1.05-.386-1.77-.748-2.625-1.125.853-.376 1.577-.74 2.625-1.125 7.252-2.662 18.853-5.35 33.313-7.594 28.918-4.49 69.522-7.343 114.343-7.343zm-197.25 71.874H86.25c8.057 57.878 28.23 108.83 56.188 146.25-6.974 5.74-13.407 11.968-19.188 18.688-38.648-46.456-59.042-104.647-64.344-164.938zm367.188 0h27C447.51 171.82 425.336 228.34 388.03 275c-5.44-6.055-11.406-11.73-17.842-16.97 27.81-37.38 47.873-88.175 55.906-145.842z"},child:[]}]})(t)}const Z6={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(Z6);class f9 extends Error{constructor(e){super();let n=e.message,s=`Error Code: ${e.code}`,i=this.stack;if(i)s+=`Stack Trace:
${i}`;else try{throw new Error}catch(r){i=r.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${s}`,this.message=n,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class gE extends f9{constructor(e){super({code:Z6.INVALID_STATE,message:e}),this.message=e,this.name="NoSessionDataError"}}function d9(t,e){return wE(mE(t),e)}function mE(t){if(typeof t=="bigint")return t;if(typeof t=="string")return BigInt(t);if(typeof t=="number"){if(!Number.isInteger(t))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(t>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(t)}if(v9(t,Uint8Array))return BigInt(`0x${lp(t)}`);throw new TypeError("intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.")}function h9(t){return/^0x/i.test(t)?t.slice(2):t}function yE(t,e=8){return(typeof t=="bigint"?t:mE(t)).toString(16).padStart(e*2,"0")}function wE(t,e=16){const n=yE(t,e);return tl(n)}function p9(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}const g9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lp(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=g9[n];return e}function tl(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=h9(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=n*2,i=t.slice(s,s+2),r=Number.parseInt(i,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");e[n]=r}return e}function _m(t){return new TextEncoder().encode(t)}function m9(t){return new TextDecoder().decode(t)}function y9(t){const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n)&255);return new Uint8Array(e)}function w9(t){return!Number.isInteger(t)||t<0||t>255}function A4(t){if(t.some(w9))throw new Error("Some values are invalid bytes.");return new Uint8Array(t)}function vE(...t){if(!t.every(s=>s instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}function La(t){return vE(...t.map(e=>typeof e=="number"?A4([e]):e instanceof Array?A4(e):e))}function v9(t,e){return t instanceof e||t?.constructor?.name?.toLowerCase()===e.name}function Om(t,e,n=0){return t[n+3]=e,e>>>=8,t[n+2]=e,e>>>=8,t[n+1]=e,e>>>=8,t[n]=e,t}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function b9(t,...e){if(!J6(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function eD(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function xh(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function bE(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function mb(t){if(!Array.isArray(t))throw new Error("array expected")}function tm(t,e){if(!eD(!0,e))throw new Error(`${t}: array of strings expected`)}function E9(t,e){if(!eD(!1,e))throw new Error(`${t}: array of numbers expected`)}function tD(...t){const e=r=>r,n=(r,c)=>l=>r(c(l)),s=t.map(r=>r.encode).reduceRight(n,e),i=t.map(r=>r.decode).reduce(n,e);return{encode:s,decode:i}}function nD(t){const e=typeof t=="string"?t.split(""):t,n=e.length;tm("alphabet",e);const s=new Map(e.map((i,r)=>[i,r]));return{encode:i=>(mb(i),i.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:i=>(mb(i),i.map(r=>{xh("alphabet.decode",r);const c=s.get(r);if(c===void 0)throw new Error(`Unknown letter: "${r}". Allowed: ${t}`);return c}))}}function sD(t=""){return xh("join",t),{encode:e=>(tm("join.decode",e),e.join(t)),decode:e=>(xh("join.decode",e),e.split(t))}}function iD(t,e="="){return bE(t),xh("padding",e),{encode(n){for(tm("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){tm("padding.decode",n);let s=n.length;if(s*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;s>0&&n[s-1]===e;s--)if((s-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,s)}}}const rD=(t,e)=>e===0?t:rD(e,t%e),nm=(t,e)=>t+(e-rD(t,e)),M1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function N4(t,e,n,s){if(mb(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(nm(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${nm(e,n)}`);let i=0,r=0;const c=M1[e],l=M1[n]-1,f=[];for(const d of t){if(bE(d),d>=c)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(i=i<<e|d,r+e>32)throw new Error(`convertRadix2: carry overflow pos=${r} from=${e}`);for(r+=e;r>=n;r-=n)f.push((i>>r-n&l)>>>0);const h=M1[r];if(h===void 0)throw new Error("invalid carry");i&=h-1}if(i=i<<n-r&l,!s&&r>=e)throw new Error("Excess padding");if(!s&&i>0)throw new Error(`Non-zero padding: ${i}`);return s&&r>0&&f.push(i>>>0),f}function aD(t,e=!1){if(bE(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(nm(8,t)>32||nm(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!J6(n))throw new Error("radix2.encode input should be Uint8Array");return N4(Array.from(n),8,t,!e)},decode:n=>(E9("radix2.decode",n),Uint8Array.from(N4(n,t,8,e)))}}const x9=tD(aD(5),nD("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),iD(5),sD("")),S9=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",C9=(t,e)=>{xh("base64",t);const n=/^[A-Za-z0-9=+/]+$/,s="base64";if(t.length>0&&!n.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:s,lastChunkHandling:"strict"})},oD=S9?{encode(t){return b9(t),t.toBase64()},decode(t){return C9(t)}}:tD(aD(6),nD("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),iD(6),sD("")),EE="STX_PROVIDER",A9=()=>typeof window>"u"?null:window.localStorage.getItem(EE),N9=t=>{typeof window<"u"&&window.localStorage.setItem(EE,t)},T9=()=>{typeof window<"u"&&window.localStorage.removeItem(EE)},I9=()=>{if(typeof window>"u")return[];const t=window.webbtc_stx_providers||[],e=window.wbip_providers||[];return[...t,...e]},D9=(t=[])=>{if(typeof window>"u")return[];const e=I9(),n=t.filter(s=>e.find(r=>r.id===s.id)?!1:!!xE(s.id));return e.concat(n)},cD=()=>{const t=A9();return xE(t)},xE=t=>t?.split(".").reduce((e,n)=>e?.[n],window),_9="modulepreload",O9=function(t){return"/"+t},T4={},Sh=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");i=f(n.map(d=>{if(d=O9(d),d in T4)return;T4[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":_9,h||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return i.then(c=>{for(const l of c||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})},M9="connect-ui",sm={hydratedSelectorName:"hydrated",lazyLoad:!0,updatable:!0,watchCallback:!1};var R9=Object.defineProperty,P9=(t,e)=>{for(var n in e)R9(t,n,{get:e[n],enumerable:!0})},$9="http://www.w3.org/2000/svg",U9="http://www.w3.org/1999/xhtml",ir=t=>{if(t.__stencil__getHostRef)return t.__stencil__getHostRef()},Ice=(t,e)=>{t.__stencil__getHostRef=()=>e,e.$lazyInstance$=t},L9=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};n.$onReadyPromise$=new Promise(i=>n.$onReadyResolve$=i),t["s-p"]=[],t["s-rc"]=[];const s=n;return t.__stencil__getHostRef=()=>s,s},I4=(t,e)=>e in t,Gu=(t,e)=>(0,console.error)(t,e),R1=new Map,k9=(t,e,n)=>{const s=t.$tagName$.replace(/-/g,"_"),i=t.$lazyBundleId$;if(!i)return;const r=R1.get(i);if(r)return r[s];{const c=l=>(R1.set(i,l),l[s]);switch(i){case"connect-modal":return Sh(()=>import("./connect-modal.entry-BNa5QuBk.js"),[]).then(c,Gu)}}return Sh(()=>import(`./${i}.entry.js`),[]).then(c=>(R1.set(i,c),c[s]),c=>{Gu(c,e.$hostElement$)})},im=new Map,B9="{visibility:hidden}.hydrated{visibility:inherit}",lD="slot-fb{display:contents}slot-fb[hidden]{display:none}",kn=typeof window<"u"?window:{},Un={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,s)=>t.addEventListener(e,n,s),rel:(t,e,n,s)=>t.removeEventListener(e,n,s),ce:(t,e)=>new CustomEvent(t,e)},j9=t=>Promise.resolve(t),SE=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),yb=SE?!!kn.document&&Object.getOwnPropertyDescriptor(kn.document.adoptedStyleSheets,"length").writable:!1,wb=!1,D4=[],uD=[],z9=(t,e)=>n=>{t.push(n),wb||(wb=!0,Un.$flags$&4?CE(vb):Un.raf(vb))},_4=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Gu(n)}t.length=0},vb=()=>{_4(D4),_4(uD),(wb=D4.length>0)&&Un.raf(vb)},CE=t=>j9().then(t),H9=z9(uD),AE=t=>(t=typeof t,t==="object"||t==="function");function fD(t){var e,n,s;return(s=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?s:void 0}var F9=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),V9={};P9(V9,{err:()=>dD,map:()=>q9,ok:()=>bb,unwrap:()=>W9,unwrapErr:()=>K9});var bb=t=>({isOk:!0,isErr:!1,value:t}),dD=t=>({isOk:!1,isErr:!0,value:t});function q9(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(s=>bb(s)):bb(n)}if(t.isErr){const n=t.value;return dD(n)}throw"should never get here"}var W9=t=>{if(t.isOk)return t.value;throw t.value},K9=t=>{if(t.isErr)return t.value;throw t.value};var wd;function G9(t){var e;const n=this.attachShadow({mode:"open"});wd===void 0&&(wd=(e=void 0)!=null?e:null),wd&&(yb?n.adoptedStyleSheets.push(wd):n.adoptedStyleSheets=[...n.adoptedStyleSheets,wd])}var Ra=(t,e="")=>()=>{},Y9=(t,e)=>()=>{},$u=new WeakMap,X9=(t,e,n)=>{let s=im.get(t);SE&&n?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,im.set(t,s)},Q9=(t,e,n)=>{var s;const i=hD(e),r=im.get(i);if(!kn.document)return i;if(t=t.nodeType===11?t:kn.document,r)if(typeof r=="string"){t=t.head||t;let c=$u.get(t),l;if(c||$u.set(t,c=new Set),!c.has(i)){{l=kn.document.createElement("style"),l.innerHTML=r;const f=(s=Un.$nonce$)!=null?s:fD(kn.document);if(f!=null&&l.setAttribute("nonce",f),!(e.$flags$&1))if(t.nodeName==="HEAD"){const d=t.querySelectorAll("link[rel=preconnect]"),h=d.length>0?d[d.length-1].nextSibling:t.querySelector("style");t.insertBefore(l,h?.parentNode===t?h:null)}else if("host"in t)if(SE){const d=new CSSStyleSheet;d.replaceSync(r),yb?t.adoptedStyleSheets.unshift(d):t.adoptedStyleSheets=[d,...t.adoptedStyleSheets]}else{const d=t.querySelector("style");d?d.innerHTML=r+d.innerHTML:t.prepend(l)}else t.append(l);e.$flags$&1&&t.insertBefore(l,null)}e.$flags$&4&&(l.innerHTML+=lD),c&&c.add(i)}}else t.adoptedStyleSheets.includes(r)||(yb?t.adoptedStyleSheets.push(r):t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return i},Z9=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,s=e.$flags$,i=Ra("attachStyles",e.$tagName$),r=Q9(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);s&10&&(n["s-sc"]=r,n.classList.add(r+"-h")),i()},hD=(t,e)=>"sc-"+t.$tagName$,J9=(t,e,...n)=>{let s=null,i=null,r=!1,c=!1;const l=[],f=h=>{for(let g=0;g<h.length;g++)s=h[g],Array.isArray(s)?f(s):s!=null&&typeof s!="boolean"&&((r=typeof t!="function"&&!AE(s))&&(s=String(s)),r&&c?l[l.length-1].$text$+=s:l.push(r?Eb(null,s):s),c=r)};if(f(n),e){e.key&&(i=e.key);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(g=>h[g]).join(" "))}}const d=Eb(t,null);return d.$attrs$=e,l.length>0&&(d.$children$=l),d.$key$=i,d},Eb=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n},eB={},tB=t=>t&&t.$tag$===eB,NE=t=>{const e=F9(t);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${e}))(${e}\\b)`,"g")};NE("::slotted");NE(":host");NE(":host-context");var xb=(t,e,n)=>{if(typeof t=="string"&&(e&16||e&8)&&(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")))try{return JSON.parse(t)}catch{}return t!=null&&!AE(t),t},Dce=t=>{var e;return(e=ir(t))==null?void 0:e.$hostElement$},nB=(t,e,n)=>{const s=Un.ce(e,n);return t.dispatchEvent(s),s},O4=(t,e,n,s,i,r,c)=>{if(n===s)return;let l=I4(t,e),f=e.toLowerCase();if(e==="class"){const d=t.classList,h=M4(n);let g=M4(s);d.remove(...h.filter(m=>m&&!g.includes(m))),d.add(...g.filter(m=>m&&!h.includes(m)))}else if(e!=="key")if(!l&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):I4(kn,f)?e=f.slice(2):e=f[2]+e.slice(3),n||s){const d=e.endsWith(pD);e=e.replace(iB,""),n&&Un.rel(t,e,n,d),s&&Un.ael(t,e,s,d)}}else{const d=AE(s);if((l||d&&s!==null)&&!i)try{if(t.tagName.includes("-"))t[e]!==s&&(t[e]=s);else{const h=s??"";e==="list"?l=!1:(n==null||t[e]!=h)&&(typeof t.__lookupSetter__(e)=="function"?t[e]=h:t.setAttribute(e,h))}}catch{}s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&t.removeAttribute(e):(!l||r&4||i)&&!d&&t.nodeType===1&&(s=s===!0?"":s,t.setAttribute(e,s))}},sB=/\s/,M4=t=>(typeof t=="object"&&t&&"baseVal"in t&&(t=t.baseVal),!t||typeof t!="string"?[]:t.split(sB)),pD="Capture",iB=new RegExp(pD+"$"),gD=(t,e,n,s)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||{},c=e.$attrs$||{};for(const l of R4(Object.keys(r)))l in c||O4(i,l,r[l],void 0,n,e.$flags$);for(const l of R4(Object.keys(c)))O4(i,l,r[l],c[l],n,e.$flags$)};function R4(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var TE,Gs=!1,rm=(t,e,n)=>{const s=e.$children$[n];let i=0,r,c;if(s.$text$!==null)r=s.$elm$=kn.document.createTextNode(s.$text$);else{if(Gs||(Gs=s.$tag$==="svg"),!kn.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(r=s.$elm$=kn.document.createElementNS(Gs?$9:U9,s.$tag$),Gs&&s.$tag$==="foreignObject"&&(Gs=!1),gD(null,s,Gs),s.$children$)for(i=0;i<s.$children$.length;++i)c=rm(t,s,i),c&&r.appendChild(c);s.$tag$==="svg"?Gs=!1:r.tagName==="foreignObject"&&(Gs=!0)}return r["s-hn"]=TE,r},mD=(t,e,n,s,i,r)=>{let c=t,l;for(c.shadowRoot&&c.tagName===TE&&(c=c.shadowRoot);i<=r;++i)s[i]&&(l=rm(null,n,i),l&&(s[i].$elm$=l,R0(c,l,e)))},yD=(t,e,n)=>{for(let s=e;s<=n;++s){const i=t[s];if(i){const r=i.$elm$;r&&r.remove()}}},rB=(t,e,n,s,i=!1)=>{let r=0,c=0,l=0,f=0,d=e.length-1,h=e[0],g=e[d],m=s.length-1,y=s[0],w=s[m],v,E;for(;r<=d&&c<=m;)if(h==null)h=e[++r];else if(g==null)g=e[--d];else if(y==null)y=s[++c];else if(w==null)w=s[--m];else if(Gg(h,y,i))Au(h,y,i),h=e[++r],y=s[++c];else if(Gg(g,w,i))Au(g,w,i),g=e[--d],w=s[--m];else if(Gg(h,w,i))Au(h,w,i),R0(t,h.$elm$,g.$elm$.nextSibling),h=e[++r],w=s[--m];else if(Gg(g,y,i))Au(g,y,i),R0(t,g.$elm$,h.$elm$),g=e[--d],y=s[++c];else{for(l=-1,f=r;f<=d;++f)if(e[f]&&e[f].$key$!==null&&e[f].$key$===y.$key$){l=f;break}l>=0?(E=e[l],E.$tag$!==y.$tag$?v=rm(e&&e[c],n,l):(Au(E,y,i),e[l]=void 0,v=E.$elm$),y=s[++c]):(v=rm(e&&e[c],n,c),y=s[++c]),v&&R0(h.$elm$.parentNode,v,h.$elm$)}r>d?mD(t,s[m+1]==null?null:s[m+1].$elm$,n,s,c,m):c>m&&yD(e,r,d)},Gg=(t,e,n=!1)=>t.$tag$===e.$tag$?n?(n&&!t.$key$&&e.$key$&&(t.$key$=e.$key$),!0):t.$key$===e.$key$:!1,Au=(t,e,n=!1)=>{const s=e.$elm$=t.$elm$,i=t.$children$,r=e.$children$,c=e.$tag$,l=e.$text$;l===null?(Gs=c==="svg"?!0:c==="foreignObject"?!1:Gs,gD(t,e,Gs),i!==null&&r!==null?rB(s,i,e,r,n):r!==null?(t.$text$!==null&&(s.textContent=""),mD(s,null,e,r,0,r.length-1)):!n&&sm.updatable&&i!==null&&yD(i,0,i.length-1),Gs&&c==="svg"&&(Gs=!1)):t.$text$!==l&&(s.data=l)},R0=(t,e,n)=>t?.insertBefore(e,n),aB=(t,e,n=!1)=>{const s=t.$hostElement$,i=t.$vnode$||Eb(null,null),c=tB(e)?e:J9(null,null,e);if(TE=s.tagName,n&&c.$attrs$)for(const l of Object.keys(c.$attrs$))s.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(c.$attrs$[l]=s[l]);c.$tag$=null,c.$flags$|=4,t.$vnode$=c,c.$elm$=i.$elm$=s.shadowRoot||s,Au(i,c,n)},wD=(t,e)=>{if(e&&!t.$onRenderResolve$&&e["s-p"]){const n=e["s-p"].push(new Promise(s=>t.$onRenderResolve$=()=>{e["s-p"].splice(n-1,1),s()}))}},IE=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}wD(t,t.$ancestorComponent$);const n=()=>oB(t,e);if(e){queueMicrotask(()=>{n()});return}return H9(n)},oB=(t,e)=>{const n=t.$hostElement$,s=Ra("scheduleUpdate",t.$cmpMeta$.$tagName$),i=t.$lazyInstance$;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=zo(i,"componentWillLoad",void 0,n):r=zo(i,"componentWillUpdate",void 0,n),r=P4(r,()=>zo(i,"componentWillRender",void 0,n)),s(),P4(r,()=>lB(t,i,e))},P4=(t,e)=>cB(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),cB=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",lB=async(t,e,n)=>{var s;const i=t.$hostElement$,r=Ra("update",t.$cmpMeta$.$tagName$),c=i["s-rc"];n&&Z9(t);const l=Ra("render",t.$cmpMeta$.$tagName$);uB(t,e,i,n),c&&(c.map(f=>f()),i["s-rc"]=void 0),l(),r();{const f=(s=i["s-p"])!=null?s:[],d=()=>fB(t);f.length===0?d():(Promise.all(f).then(d),t.$flags$|=4,f.length=0)}},uB=(t,e,n,s)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,aB(t,e,s)}catch(i){Gu(i,t.$hostElement$)}return null},fB=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,s=Ra("postUpdate",e),i=t.$lazyInstance$,r=t.$ancestorComponent$;zo(i,"componentDidRender",void 0,n),t.$flags$&64?(zo(i,"componentDidUpdate",void 0,n),s()):(t.$flags$|=64,dB(n),zo(i,"componentDidLoad",void 0,n),s(),t.$onReadyResolve$(n),r||vD()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&CE(()=>IE(t,!1)),t.$flags$&=-517},vD=t=>{CE(()=>nB(kn,"appload",{detail:{namespace:M9}}))},zo=(t,e,n,s)=>{if(t&&t[e])try{return t[e](n)}catch(i){Gu(i,s)}},dB=t=>{var e;return t.classList.add((e=sm.hydratedSelectorName)!=null?e:"hydrated")},hB=(t,e)=>ir(t).$instanceValues$.get(e),P1=(t,e,n,s)=>{const i=ir(t);if(!i)return;if(!i)throw new Error(`Couldn't find host element for "${s.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const r=i.$instanceValues$.get(e),c=i.$flags$,l=i.$lazyInstance$;n=xb(n,s.$members$[e][0]);const f=Number.isNaN(r)&&Number.isNaN(n),d=n!==r&&!f;if((!(c&8)||r===void 0)&&d&&(i.$instanceValues$.set(e,n),l&&(c&18)===2)){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,r,e)===!1)return;IE(i,!1)}},bD=(t,e,n)=>{var s,i;const r=t.prototype;if(e.$members$||sm.watchCallback){const c=Object.entries((s=e.$members$)!=null?s:{});if(c.map(([l,[f]])=>{if(f&31||n&2&&f&32){const{get:d,set:h}=Object.getOwnPropertyDescriptor(r,l)||{};d&&(e.$members$[l][0]|=2048),h&&(e.$members$[l][0]|=4096),(n&1||!d)&&Object.defineProperty(r,l,{get(){{if((e.$members$[l][0]&2048)===0)return hB(this,l);const g=ir(this),m=g?g.$lazyInstance$:r;return m?m[l]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(r,l,{set(g){const m=ir(this);if(m){if(h){const y=f&32?this[l]:m.$hostElement$[l];typeof y>"u"&&m.$instanceValues$.get(l)?g=m.$instanceValues$.get(l):!m.$instanceValues$.get(l)&&y&&m.$instanceValues$.set(l,y),h.apply(this,[xb(g,f)]),g=f&32?this[l]:m.$hostElement$[l],P1(this,l,g,e);return}{if((n&1)===0||(e.$members$[l][0]&4096)===0){P1(this,l,g,e),n&1&&!m.$lazyInstance$&&m.$onReadyPromise$.then(()=>{e.$members$[l][0]&4096&&m.$lazyInstance$[l]!==m.$instanceValues$.get(l)&&(m.$lazyInstance$[l]=g)});return}const y=()=>{const w=m.$lazyInstance$[l];!m.$instanceValues$.get(l)&&w&&m.$instanceValues$.set(l,w),m.$lazyInstance$[l]=xb(g,f),P1(this,l,m.$lazyInstance$[l],e)};m.$lazyInstance$?y():m.$onReadyPromise$.then(()=>y())}}}})}}),n&1){const l=new Map;r.attributeChangedCallback=function(f,d,h){Un.jmp(()=>{var g;const m=l.get(f);if(this.hasOwnProperty(m)&&sm.lazyLoad)h=this[m],delete this[m];else{if(r.hasOwnProperty(m)&&typeof this[m]=="number"&&this[m]==h)return;if(m==null){const w=ir(this),v=w?.$flags$;if(w&&v&&!(v&8)&&v&128&&h!==d){const E=w.$lazyInstance$,C=(g=e.$watchers$)==null?void 0:g[f];C?.forEach(T=>{E[T]!=null&&E[T].call(E,h,d,f)})}return}}const y=Object.getOwnPropertyDescriptor(r,m);h=h===null&&typeof this[m]=="boolean"?!1:h,h!==this[m]&&(!y.get||y.set)&&(this[m]=h)})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...c.filter(([f,d])=>d[0]&31).map(([f,d])=>{const h=d[1]||f;return l.set(h,f),h})]))}}return t},pB=async(t,e,n,s)=>{let i;if((e.$flags$&32)===0){if(e.$flags$|=32,n.$lazyBundleId$){const f=k9(n,e);if(f&&"then"in f){const h=Y9();i=await f,h()}else i=f;if(!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(bD(i,n,2),i.isProxied=!0);const d=Ra("createInstance",n.$tagName$);e.$flags$|=8;try{new i(e)}catch(h){Gu(h,t)}e.$flags$&=-9,d(),Sb(e.$lazyInstance$,t)}else{i=t.constructor;const f=t.localName;customElements.whenDefined(f).then(()=>e.$flags$|=128)}if(i&&i.style){let f;typeof i.style=="string"&&(f=i.style);const d=hD(n);if(!im.has(d)){const h=Ra("registerStyles",n.$tagName$);X9(d,f,!!(n.$flags$&1)),h()}}}const r=e.$ancestorComponent$,c=()=>IE(e,!0);r&&r["s-rc"]?r["s-rc"].push(c):c()},Sb=(t,e)=>{zo(t,"connectedCallback",void 0,e)},gB=t=>{if((Un.$flags$&1)===0){const e=ir(t);if(!e)return;const n=e.$cmpMeta$,s=Ra("connectedCallback",n.$tagName$);if(e.$flags$&1)e?.$lazyInstance$?Sb(e.$lazyInstance$,t):e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>Sb(e.$lazyInstance$,t));else{e.$flags$|=1;{let i=t;for(;i=i.parentNode||i.host;)if(i["s-p"]){wD(e,e.$ancestorComponent$=i);break}}n.$members$&&Object.entries(n.$members$).map(([i,[r]])=>{if(r&31&&t.hasOwnProperty(i)){const c=t[i];delete t[i],t[i]=c}}),pB(t,e,n)}s()}},$4=(t,e)=>{zo(t,"disconnectedCallback",void 0,e||t)},mB=async t=>{if((Un.$flags$&1)===0){const e=ir(t);e?.$lazyInstance$?$4(e.$lazyInstance$,t):e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>$4(e.$lazyInstance$,t))}$u.has(t)&&$u.delete(t),t.shadowRoot&&$u.has(t.shadowRoot)&&$u.delete(t.shadowRoot)},yB=(t,e={})=>{var n;if(!kn.document){console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");return}const s=Ra(),i=[],r=e.exclude||[],c=kn.customElements,l=kn.document.head,f=l.querySelector("meta[charset]"),d=kn.document.createElement("style"),h=[];let g,m=!0;Object.assign(Un,e),Un.$resourcesUrl$=new URL(e.resourcesUrl||"./",kn.document.baseURI).href;let y=!1;if(t.map(w=>{w[1].map(v=>{const E={$flags$:v[0],$tagName$:v[1],$members$:v[2],$listeners$:v[3]};E.$flags$&4&&(y=!0),E.$members$=v[2];const C=E.$tagName$,T=class extends HTMLElement{constructor(N){if(super(N),this.hasRegisteredEventListeners=!1,N=this,L9(N,E),E.$flags$&1){if(!N.shadowRoot)G9.call(N,E);else if(N.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${E.$tagName$}! Mode is set to ${N.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}connectedCallback(){ir(this)&&(this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),g&&(clearTimeout(g),g=null),m?h.push(this):Un.jmp(()=>gB(this)))}disconnectedCallback(){Un.jmp(()=>mB(this)),Un.raf(()=>{var N;const I=ir(this);if(!I)return;const S=h.findIndex(A=>A===this);S>-1&&h.splice(S,1),((N=I?.$vnode$)==null?void 0:N.$elm$)instanceof Node&&!I.$vnode$.$elm$.isConnected&&delete I.$vnode$.$elm$})}componentOnReady(){var N;return(N=ir(this))==null?void 0:N.$onReadyPromise$}};E.$lazyBundleId$=w[0],!r.includes(C)&&!c.get(C)&&(i.push(C),c.define(C,bD(T,E,1)))})}),i.length>0&&(y&&(d.textContent+=lD),d.textContent+=i.sort()+B9,d.innerHTML.length)){d.setAttribute("data-styles","");const w=(n=Un.$nonce$)!=null?n:fD(kn.document);w!=null&&d.setAttribute("nonce",w),l.insertBefore(d,f?f.nextSibling:l.firstChild)}m=!1,h.length?h.map(w=>w.connectedCallback()):Un.jmp(()=>g=setTimeout(vD,30)),s()};const wB=()=>{},vB=async(t,e)=>{if(!(typeof window>"u"))return await wB(),yB([["connect-modal",[[257,"connect-modal",{defaultProviders:[16,"default-providers"],installedProviders:[16,"installed-providers"],callback:[16],cancelCallback:[16,"cancel-callback"]}]]]],e)};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();const bB=128,EB=128,ED=16;var U4;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(U4||(U4={}));var L4;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(L4||(L4={}));var er;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(er||(er={}));const $1=["onChainOnly","offChainOnly","any"];$1[0]+"",er.OnChainOnly,$1[1]+"",er.OffChainOnly,$1[2]+"",er.Any,er.OnChainOnly+"",er.OnChainOnly,er.OffChainOnly+"",er.OffChainOnly,er.Any+"",er.Any;var am;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(am||(am={}));var Pr;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(Pr||(Pr={}));var k4;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(k4||(k4={}));var B4;(function(t){t[t.P2PKH=0]="P2PKH",t[t.P2SH=1]="P2SH",t[t.P2WPKH=2]="P2WPKH",t[t.P2WSH=3]="P2WSH",t[t.P2SHNonSequential=5]="P2SHNonSequential",t[t.P2WSHNonSequential=7]="P2WSHNonSequential"})(B4||(B4={}));var j4;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(j4||(j4={}));var z4;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})(z4||(z4={}));var H4;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(H4||(H4={}));var kr;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(kr||(kr={}));var F4;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(F4||(F4={}));var V4;(function(t){t[t.BlockFound=0]="BlockFound",t[t.Extended=1]="Extended"})(V4||(V4={}));var q4;(function(t){t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed"})(q4||(q4={}));var W4;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther"})(W4||(W4={}));class xB extends Error{constructor(e){super(e),this.message=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class xD extends xB{constructor(e){super(e)}}function Cb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function SB(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function SD(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function CB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Cb(t.outputLen),Cb(t.blockLen)}function AB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NB(t,e){SD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const U1={number:Cb,bool:SB,bytes:SD,hash:CB,exists:AB,output:NB};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xr=(t,e)=>t<<32-e|t>>>e,TB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!TB)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IB(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function CD(t){if(typeof t=="string"&&(t=IB(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let DB=class{clone(){return this._cloneInto()}};function cl(t){const e=s=>t().update(CD(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function _B(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}class DE extends DB{constructor(e,n,s,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=L1(this.buffer)}update(e){U1.exists(this);const{view:n,buffer:s,blockLen:i}=this;e=CD(e);const r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=L1(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){U1.exists(this),U1.output(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;_B(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=L1(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.length=i,e.pos=l,e.finished=r,e.destroyed=c,i%n&&e.buffer.set(s),e}}const OB=(t,e,n)=>t&e^~t&n,MB=(t,e,n)=>t&e^t&n^e&n,RB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yo=new Uint32Array(64);class AD extends DE{constructor(){super(64,32,8,!1),this.A=mo[0]|0,this.B=mo[1]|0,this.C=mo[2]|0,this.D=mo[3]|0,this.E=mo[4]|0,this.F=mo[5]|0,this.G=mo[6]|0,this.H=mo[7]|0}get(){const{A:e,B:n,C:s,D:i,E:r,F:c,G:l,H:f}=this;return[e,n,s,i,r,c,l,f]}set(e,n,s,i,r,c,l,f){this.A=e|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=r|0,this.F=c|0,this.G=l|0,this.H=f|0}process(e,n){for(let g=0;g<16;g++,n+=4)yo[g]=e.getUint32(n,!1);for(let g=16;g<64;g++){const m=yo[g-15],y=yo[g-2],w=xr(m,7)^xr(m,18)^m>>>3,v=xr(y,17)^xr(y,19)^y>>>10;yo[g]=v+yo[g-7]+w+yo[g-16]|0}let{A:s,B:i,C:r,D:c,E:l,F:f,G:d,H:h}=this;for(let g=0;g<64;g++){const m=xr(l,6)^xr(l,11)^xr(l,25),y=h+m+OB(l,f,d)+RB[g]+yo[g]|0,v=(xr(s,2)^xr(s,13)^xr(s,22))+MB(s,i,r)|0;h=d,d=f,f=l,l=c+y|0,c=r,r=i,i=s,s=y+v|0}s=s+this.A|0,i=i+this.B|0,r=r+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(s,i,r,c,l,f,d,h)}roundClean(){yo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class PB extends AD{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}cl(()=>new AD);cl(()=>new PB);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const mt=BigInt(0),Qt=BigInt(1),Lo=BigInt(2),P0=BigInt(3),K4=BigInt(8),Nn=Object.freeze({a:mt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Qt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),G4=(t,e)=>(t+e/Lo)/e,Yg={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=Nn,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Qt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=n,c=BigInt("0x100000000000000000000000000000000"),l=G4(r*t,e),f=G4(-s*t,e);let d=De(t-l*n-f*i,e),h=De(-l*s-f*r,e);const g=d>c,m=h>c;if(g&&(d=e-d),m&&(h=e-h),d>c||h>c)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:g,k1:d,k2neg:m,k2:h}}},Uu=32,Ab=32,Y4=Uu+1,X4=2*Uu+1;function Q4(t){const{a:e,b:n}=Nn,s=De(t*t),i=De(s*t);return De(i+e*t+n)}const Xg=Nn.a===mt;function Z4(t){if(!(t instanceof gt))throw new TypeError("JacobianPoint expected")}class gt{constructor(e,n,s){this.x=e,this.y=n,this.z=s}static fromAffine(e){if(!(e instanceof xn))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(xn.ZERO)?gt.ZERO:new gt(e.x,e.y,Qt)}static toAffineBatch(e){const n=BB(e.map(s=>s.z));return e.map((s,i)=>s.toAffine(n[i]))}static normalizeZ(e){return gt.toAffineBatch(e).map(gt.fromAffine)}equals(e){Z4(e);const{x:n,y:s,z:i}=this,{x:r,y:c,z:l}=e,f=De(i*i),d=De(l*l),h=De(n*d),g=De(r*f),m=De(De(s*l)*d),y=De(De(c*i)*f);return h===g&&m===y}negate(){return new gt(this.x,De(-this.y),this.z)}double(){const{x:e,y:n,z:s}=this,i=De(e*e),r=De(n*n),c=De(r*r),l=e+r,f=De(Lo*(De(l*l)-i-c)),d=De(P0*i),h=De(d*d),g=De(h-Lo*f),m=De(d*(f-g)-K4*c),y=De(Lo*n*s);return new gt(g,m,y)}add(e){Z4(e);const{x:n,y:s,z:i}=this,{x:r,y:c,z:l}=e;if(r===mt||c===mt)return this;if(n===mt||s===mt)return e;const f=De(i*i),d=De(l*l),h=De(n*d),g=De(r*f),m=De(De(s*l)*d),y=De(De(c*i)*f),w=De(g-h),v=De(y-m);if(w===mt)return v===mt?this.double():gt.ZERO;const E=De(w*w),C=De(w*E),T=De(h*E),N=De(v*v-C-Lo*T),I=De(v*(T-N)-m*C),S=De(i*l*w);return new gt(N,I,S)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=gt.ZERO;if(typeof e=="bigint"&&e===mt)return n;let s=nN(e);if(s===Qt)return this;if(!Xg){let g=n,m=this;for(;s>mt;)s&Qt&&(g=g.add(m)),m=m.double(),s>>=Qt;return g}let{k1neg:i,k1:r,k2neg:c,k2:l}=Yg.splitScalar(s),f=n,d=n,h=this;for(;r>mt||l>mt;)r&Qt&&(f=f.add(h)),l&Qt&&(d=d.add(h)),h=h.double(),r>>=Qt,l>>=Qt;return i&&(f=f.negate()),c&&(d=d.negate()),d=new gt(De(d.x*Yg.beta),d.y,d.z),f.add(d)}precomputeWindow(e){const n=Xg?128/e+1:256/e+1,s=[];let i=this,r=i;for(let c=0;c<n;c++){r=i,s.push(r);for(let l=1;l<2**(e-1);l++)r=r.add(i),s.push(r);i=r.double()}return s}wNAF(e,n){!n&&this.equals(gt.BASE)&&(n=xn.BASE);const s=n&&n._WINDOW_SIZE||1;if(256%s)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=n&&Nb.get(n);i||(i=this.precomputeWindow(s),n&&s!==1&&(i=gt.normalizeZ(i),Nb.set(n,i)));let r=gt.ZERO,c=gt.BASE;const l=1+(Xg?128/s:256/s),f=2**(s-1),d=BigInt(2**s-1),h=2**s,g=BigInt(s);for(let m=0;m<l;m++){const y=m*f;let w=Number(e&d);e>>=g,w>f&&(w-=h,e+=Qt);const v=y,E=y+Math.abs(w)-1,C=m%2!==0,T=w<0;w===0?c=c.add(Qg(C,i[v])):r=r.add(Qg(T,i[E]))}return{p:r,f:c}}multiply(e,n){let s=nN(e),i,r;if(Xg){const{k1neg:c,k1:l,k2neg:f,k2:d}=Yg.splitScalar(s);let{p:h,f:g}=this.wNAF(l,n),{p:m,f:y}=this.wNAF(d,n);h=Qg(c,h),m=Qg(f,m),m=new gt(De(m.x*Yg.beta),m.y,m.z),i=h.add(m),r=g.add(y)}else{const{p:c,f:l}=this.wNAF(s,n);i=c,r=l}return gt.normalizeZ([i,r])[0]}toAffine(e){const{x:n,y:s,z:i}=this,r=this.equals(gt.ZERO);e==null&&(e=r?K4:_E(i));const c=e,l=De(c*c),f=De(l*c),d=De(n*l),h=De(s*f),g=De(i*c);if(r)return xn.ZERO;if(g!==Qt)throw new Error("invZ was invalid");return new xn(d,h)}}gt.BASE=new gt(Nn.Gx,Nn.Gy,Qt);gt.ZERO=new gt(mt,Qt,mt);function Qg(t,e){const n=e.negate();return t?n:e}const Nb=new WeakMap;class xn{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Nb.delete(this)}hasEvenY(){return this.y%Lo===mt}static fromCompressedHex(e){const n=e.length===32,s=Hu(n?e:e.subarray(1));if(!k1(s))throw new Error("Point is not on curve");const i=Q4(s);let r=kB(i);const c=(r&Qt)===Qt;n?c&&(r=De(-r)):(e[0]&1)===1!==c&&(r=De(-r));const l=new xn(s,r);return l.assertValidity(),l}static fromUncompressedHex(e){const n=Hu(e.subarray(1,Uu+1)),s=Hu(e.subarray(Uu+1,Uu*2+1)),i=new xn(n,s);return i.assertValidity(),i}static fromHex(e){const n=tN(e),s=n.length,i=n[0];if(s===Uu)return this.fromCompressedHex(n);if(s===Y4&&(i===2||i===3))return this.fromCompressedHex(n);if(s===X4&&i===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Y4} compressed bytes or ${X4} uncompressed bytes, not ${s}`)}static fromPrivateKey(e){return xn.BASE.multiply(HB(e))}static fromSignature(e,n,s){const{r:i,s:r}=FB(n);if(![0,1,2,3].includes(s))throw new Error("Cannot recover: invalid recovery bit");const c=zB(tN(e)),{n:l}=Nn,f=s===2||s===3?i+l:i,d=_E(f,l),h=De(-c*d,l),g=De(r*d,l),m=s&1?"03":"02",y=xn.fromHex(m+Jd(f)),w=xn.BASE.multiplyAndAddUnsafe(y,h,g);if(!w)throw new Error("Cannot recover signature: point at infinify");return w.assertValidity(),w}toRawBytes(e=!1){return eh(this.toHex(e))}toHex(e=!1){const n=Jd(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${Jd(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:s}=this;if(!k1(n)||!k1(s))throw new Error(e);const i=De(s*s),r=Q4(n);if(De(i-r)!==mt)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new xn(this.x,De(-this.y))}double(){return gt.fromAffine(this).double().toAffine()}add(e){return gt.fromAffine(this).add(gt.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return gt.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,s){const i=gt.fromAffine(this),r=n===mt||n===Qt||this!==xn.BASE?i.multiplyUnsafe(n):i.multiply(n),c=gt.fromAffine(e).multiplyUnsafe(s),l=r.add(c);return l.equals(gt.ZERO)?void 0:l.toAffine()}}xn.BASE=new xn(Nn.Gx,Nn.Gy);xn.ZERO=new xn(mt,mt);function J4(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function eN(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Ch(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Hu(n),left:t.subarray(e+2)}}function $B(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Ch(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=eN(t.subarray(2)),{data:s,left:i}=eN(n);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ch(i)}`);return{r:e,s}}class Qc{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,s="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${s}: Expected string or Uint8Array`);const i=n?Ch(e):e;if(i.length!==128)throw new Error(`${s}: Expected 64-byte hex`);return new Qc(om(i.slice(0,64)),om(i.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:s,s:i}=$B(n?e:eh(e));return new Qc(s,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!cm(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!cm(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Nn.n>>Qt;return this.s>e}normalizeS(){return this.hasHighS()?new Qc(this.r,De(-this.s,Nn.n)):this}toDERRawBytes(){return eh(this.toDERHex())}toDERHex(){const e=J4(vd(this.s)),n=J4(vd(this.r)),s=e.length/2,i=n.length/2,r=vd(s),c=vd(i);return`30${vd(i+s+4)}02${c}${n}02${r}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return eh(this.toCompactHex())}toCompactHex(){return Jd(this.r)+Jd(this.s)}}const UB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ch(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=UB[t[n]];return e}const LB=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Jd(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(mt<=t&&t<LB))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function vd(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function om(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function eh(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=n*2,i=t.slice(s,s+2),r=Number.parseInt(i,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");e[n]=r}return e}function Hu(t){return om(Ch(t))}function tN(t){return t instanceof Uint8Array?Uint8Array.from(t):eh(t)}function nN(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&cm(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function De(t,e=Nn.P){const n=t%e;return n>=mt?n:e+n}function bi(t,e){const{P:n}=Nn;let s=t;for(;e-- >mt;)s*=s,s%=n;return s}function kB(t){const{P:e}=Nn,n=BigInt(6),s=BigInt(11),i=BigInt(22),r=BigInt(23),c=BigInt(44),l=BigInt(88),f=t*t*t%e,d=f*f*t%e,h=bi(d,P0)*d%e,g=bi(h,P0)*d%e,m=bi(g,Lo)*f%e,y=bi(m,s)*m%e,w=bi(y,i)*y%e,v=bi(w,c)*w%e,E=bi(v,l)*v%e,C=bi(E,c)*w%e,T=bi(C,P0)*d%e,N=bi(T,r)*y%e,I=bi(N,n)*f%e,S=bi(I,Lo);if(S*S%e!==t)throw new Error("Cannot find square root");return S}function _E(t,e=Nn.P){if(t===mt||e<=mt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=De(t,e),s=e,i=mt,r=Qt;for(;n!==mt;){const l=s/n,f=s%n,d=i-r*l;s=n,n=f,i=r,r=d}if(s!==Qt)throw new Error("invert: does not exist");return De(i,e)}function BB(t,e=Nn.P){const n=new Array(t.length),s=t.reduce((r,c,l)=>c===mt?r:(n[l]=r,De(r*c,e)),Qt),i=_E(s,e);return t.reduceRight((r,c,l)=>c===mt?r:(n[l]=De(r*n[l],e),De(r*c,e)),i),n}function jB(t){const e=t.length*8-Ab*8,n=Hu(t);return e>0?n>>BigInt(e):n}function zB(t,e=!1){const n=jB(t);if(e)return n;const{n:s}=Nn;return n>=s?n-s:n}function cm(t){return mt<t&&t<Nn.n}function k1(t){return mt<t&&t<Nn.P}function HB(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Ab)throw new Error("Expected 32 bytes of private key");e=om(t)}else if(t instanceof Uint8Array){if(t.length!==Ab)throw new Error("Expected 32 bytes of private key");e=Hu(t)}else throw new TypeError("Expected valid private key");if(!cm(e))throw new Error("Expected private key: 0 < key < n");return e}function FB(t){if(t instanceof Qc)return t.assertValidity(),t;try{return Qc.fromDER(t)}catch{return Qc.fromCompact(t)}}xn.BASE._setWindowSize(8);var B1={},j1={},z1={},bd={},sN;function VB(){return sN||(sN=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.crypto=void 0,bd.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}),bd}var iN;function cf(){return iN||(iN=1,(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=VB(),n=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);t.u8=n;const s=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));t.u32=s;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);t.createView=i;const r=(I,S)=>I<<32-S|I>>>S;if(t.rotr=r,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const c=Array.from({length:256},(I,S)=>S.toString(16).padStart(2,"0"));function l(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let S="";for(let A=0;A<I.length;A++)S+=c[I[A]];return S}t.bytesToHex=l;function f(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const S=new Uint8Array(I.length/2);for(let A=0;A<S.length;A++){const _=A*2,D=I.slice(_,_+2),O=Number.parseInt(D,16);if(Number.isNaN(O)||O<0)throw new Error("Invalid byte sequence");S[A]=O}return S}t.hexToBytes=f;const d=async()=>{};t.nextTick=d;async function h(I,S,A){let _=Date.now();for(let D=0;D<I;D++){A(D);const O=Date.now()-_;O>=0&&O<S||(await(0,t.nextTick)(),_+=O)}}t.asyncLoop=h;function g(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}t.utf8ToBytes=g;function m(I){if(typeof I=="string"&&(I=g(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}t.toBytes=m;function y(...I){if(!I.every(_=>_ instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const S=I.reduce((_,D)=>_+D.length,0),A=new Uint8Array(S);for(let _=0,D=0;_<I.length;_++){const O=I[_];A.set(O,D),D+=O.length}return A}t.concatBytes=y;class w{clone(){return this._cloneInto()}}t.Hash=w;const v=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function E(I,S){if(S!==void 0&&(typeof S!="object"||!v(S)))throw new TypeError("Options should be object or undefined");return Object.assign(I,S)}t.checkOpts=E;function C(I){const S=_=>I().update(m(_)).digest(),A=I();return S.outputLen=A.outputLen,S.blockLen=A.blockLen,S.create=()=>I(),S}t.wrapConstructor=C;function T(I){const S=(_,D)=>I(D).update(m(_)).digest(),A=I({});return S.outputLen=A.outputLen,S.blockLen=A.blockLen,S.create=_=>I(_),S}t.wrapConstructorWithOpts=T;function N(I=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(I));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(I).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=N})(z1)),z1}var rN;function ND(){return rN||(rN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32decode=t.c32normalize=t.c32encode=t.c32=void 0;const e=cf();t.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const n="0123456789abcdef";function s(c,l){if(!c.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");c.length%2!==0&&(c=`0${c}`),c=c.toLowerCase();let f=[],d=0;for(let y=c.length-1;y>=0;y--)if(d<4){const w=n.indexOf(c[y])>>d;let v=0;y!==0&&(v=n.indexOf(c[y-1]));const E=1+d,C=v%(1<<E)<<5-E,T=t.c32[w+C];d=E,f.unshift(T)}else d=0;let h=0;for(let y=0;y<f.length&&f[y]==="0";y++)h++;f=f.slice(h);const g=new TextDecoder().decode((0,e.hexToBytes)(c)).match(/^\u0000*/),m=g?g[0].length:0;for(let y=0;y<m;y++)f.unshift(t.c32[0]);if(l){const y=l-f.length;for(let w=0;w<y;w++)f.unshift(t.c32[0])}return f.join("")}t.c32encode=s;function i(c){return c.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}t.c32normalize=i;function r(c,l){if(c=i(c),!c.match(`^[${t.c32}]*$`))throw new Error("Not a c32-encoded string");const f=c.match(`^${t.c32[0]}*`),d=f?f[0].length:0;let h=[],g=0,m=0;for(let v=c.length-1;v>=0;v--){m===4&&(h.unshift(n[g]),m=0,g=0);const C=(t.c32.indexOf(c[v])<<m)+g,T=n[C%16];if(m+=1,g=C>>4,g>1<<m)throw new Error("Panic error in decoding.");h.unshift(T)}h.unshift(n[g]),h.length%2===1&&h.unshift("0");let y=0;for(let v=0;v<h.length&&h[v]==="0";v++)y++;h=h.slice(y-y%2);let w=h.join("");for(let v=0;v<d;v++)w=`00${w}`;if(l){const v=l*2-w.length;for(let E=0;E<v;E+=2)w=`00${w}`}return w}t.c32decode=r})(j1)),j1}var Sc={},Cc={},Ed={},Kn={},aN;function qB(){if(aN)return Kn;aN=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.output=Kn.exists=Kn.hash=Kn.bytes=Kn.bool=Kn.number=void 0;function t(l){if(!Number.isSafeInteger(l)||l<0)throw new Error(`Wrong positive integer: ${l}`)}Kn.number=t;function e(l){if(typeof l!="boolean")throw new Error(`Expected boolean, not ${l}`)}Kn.bool=e;function n(l,...f){if(!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length>0&&!f.includes(l.length))throw new TypeError(`Expected Uint8Array of length ${f}, not of length=${l.length}`)}Kn.bytes=n;function s(l){if(typeof l!="function"||typeof l.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(l.outputLen),t(l.blockLen)}Kn.hash=s;function i(l,f=!0){if(l.destroyed)throw new Error("Hash instance has been destroyed");if(f&&l.finished)throw new Error("Hash#digest() has already been called")}Kn.exists=i;function r(l,f){n(l);const d=f.outputLen;if(l.length<d)throw new Error(`digestInto() expects output buffer of length at least ${d}`)}Kn.output=r;const c={number:t,bool:e,bytes:n,hash:s,exists:i,output:r};return Kn.default=c,Kn}var oN;function WB(){if(oN)return Ed;oN=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.SHA2=void 0;const t=qB(),e=cf();function n(i,r,c,l){if(typeof i.setBigUint64=="function")return i.setBigUint64(r,c,l);const f=BigInt(32),d=BigInt(4294967295),h=Number(c>>f&d),g=Number(c&d),m=l?4:0,y=l?0:4;i.setUint32(r+m,h,l),i.setUint32(r+y,g,l)}class s extends e.Hash{constructor(r,c,l,f){super(),this.blockLen=r,this.outputLen=c,this.padOffset=l,this.isLE=f,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,e.createView)(this.buffer)}update(r){t.default.exists(this);const{view:c,buffer:l,blockLen:f}=this;r=(0,e.toBytes)(r);const d=r.length;for(let h=0;h<d;){const g=Math.min(f-this.pos,d-h);if(g===f){const m=(0,e.createView)(r);for(;f<=d-h;h+=f)this.process(m,h);continue}l.set(r.subarray(h,h+g),this.pos),this.pos+=g,h+=g,this.pos===f&&(this.process(c,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){t.default.exists(this),t.default.output(r,this),this.finished=!0;const{buffer:c,view:l,blockLen:f,isLE:d}=this;let{pos:h}=this;c[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>f-h&&(this.process(l,0),h=0);for(let v=h;v<f;v++)c[v]=0;n(l,f-8,BigInt(this.length*8),d),this.process(l,0);const g=(0,e.createView)(r),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=m/4,w=this.get();if(y>w.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<y;v++)g.setUint32(4*v,w[v],d)}digest(){const{buffer:r,outputLen:c}=this;this.digestInto(r);const l=r.slice(0,c);return this.destroy(),l}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:c,buffer:l,length:f,finished:d,destroyed:h,pos:g}=this;return r.length=f,r.pos=g,r.finished=d,r.destroyed=h,f%c&&r.buffer.set(l),r}}return Ed.SHA2=s,Ed}var cN;function TD(){if(cN)return Cc;cN=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.sha224=Cc.sha256=void 0;const t=WB(),e=cf(),n=(d,h,g)=>d&h^~d&g,s=(d,h,g)=>d&h^d&g^h&g,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends t.SHA2{constructor(){super(64,32,8,!1),this.A=r[0]|0,this.B=r[1]|0,this.C=r[2]|0,this.D=r[3]|0,this.E=r[4]|0,this.F=r[5]|0,this.G=r[6]|0,this.H=r[7]|0}get(){const{A:h,B:g,C:m,D:y,E:w,F:v,G:E,H:C}=this;return[h,g,m,y,w,v,E,C]}set(h,g,m,y,w,v,E,C){this.A=h|0,this.B=g|0,this.C=m|0,this.D=y|0,this.E=w|0,this.F=v|0,this.G=E|0,this.H=C|0}process(h,g){for(let I=0;I<16;I++,g+=4)c[I]=h.getUint32(g,!1);for(let I=16;I<64;I++){const S=c[I-15],A=c[I-2],_=(0,e.rotr)(S,7)^(0,e.rotr)(S,18)^S>>>3,D=(0,e.rotr)(A,17)^(0,e.rotr)(A,19)^A>>>10;c[I]=D+c[I-7]+_+c[I-16]|0}let{A:m,B:y,C:w,D:v,E,F:C,G:T,H:N}=this;for(let I=0;I<64;I++){const S=(0,e.rotr)(E,6)^(0,e.rotr)(E,11)^(0,e.rotr)(E,25),A=N+S+n(E,C,T)+i[I]+c[I]|0,D=((0,e.rotr)(m,2)^(0,e.rotr)(m,13)^(0,e.rotr)(m,22))+s(m,y,w)|0;N=T,T=C,C=E,E=v+A|0,v=w,w=y,y=m,m=A+D|0}m=m+this.A|0,y=y+this.B|0,w=w+this.C|0,v=v+this.D|0,E=E+this.E|0,C=C+this.F|0,T=T+this.G|0,N=N+this.H|0,this.set(m,y,w,v,E,C,T,N)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class f extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}return Cc.sha256=(0,e.wrapConstructor)(()=>new l),Cc.sha224=(0,e.wrapConstructor)(()=>new f),Cc}var lN;function ID(){if(lN)return Sc;lN=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.c32checkDecode=Sc.c32checkEncode=void 0;const t=TD(),e=cf(),n=ND();function s(c){const l=(0,t.sha256)((0,t.sha256)((0,e.hexToBytes)(c)));return(0,e.bytesToHex)(l.slice(0,4))}function i(c,l){if(c<0||c>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!l.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");l=l.toLowerCase(),l.length%2!==0&&(l=`0${l}`);let f=c.toString(16);f.length===1&&(f=`0${f}`);const d=s(`${f}${l}`),h=(0,n.c32encode)(`${l}${d}`);return`${n.c32[c]}${h}`}Sc.c32checkEncode=i;function r(c){c=(0,n.c32normalize)(c);const l=(0,n.c32decode)(c.slice(1)),f=c[0],d=n.c32.indexOf(f),h=l.slice(-8);let g=d.toString(16);if(g.length===1&&(g=`0${g}`),s(`${g}${l.substring(0,l.length-8)}`)!==h)throw new Error("Invalid c32check string: checksum mismatch");return[d,l.substring(0,l.length-8)]}return Sc.c32checkDecode=r,Sc}var H1={},Ac={},F1,uN;function KB(){if(uN)return F1;uN=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var r=e.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=e.length,f=e.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,E=0,C=0,T=w.length;C!==T&&w[C]===0;)C++,v++;for(var N=(T-C)*h+1>>>0,I=new Uint8Array(N);C!==T;){for(var S=w[C],A=0,_=N-1;(S!==0||A<E)&&_!==-1;_--,A++)S+=256*I[_]>>>0,I[_]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");E=A,C++}for(var D=N-E;D!==N&&I[D]===0;)D++;for(var O=f.repeat(v);D<N;++D)O+=e.charAt(I[D]);return O}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;for(var v=0,E=0,C=0;w[v]===f;)E++,v++;for(var T=(w.length-v)*d+1>>>0,N=new Uint8Array(T);w[v];){var I=w.charCodeAt(v);if(I>255)return;var S=n[I];if(S===255)return;for(var A=0,_=T-1;(S!==0||A<C)&&_!==-1;_--,A++)S+=l*N[_]>>>0,N[_]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");C=A,v++}for(var D=T-C;D!==T&&N[D]===0;)D++;for(var O=new Uint8Array(E+(T-D)),P=E;D!==T;)O[P++]=N[D++];return O}function y(w){var v=m(w);if(v)return v;throw new Error("Non-base"+l+" character")}return{encode:g,decodeUnsafe:m,decode:y}}return F1=t,F1}var fN;function GB(){if(fN)return Ac;fN=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.decode=Ac.encode=void 0;const t=TD(),e=cf(),n=KB(),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function i(c,l="00"){const f=typeof c=="string"?(0,e.hexToBytes)(c):c,d=typeof l=="string"?(0,e.hexToBytes)(l):c;if(!(f instanceof Uint8Array)||!(d instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const h=(0,t.sha256)((0,t.sha256)(new Uint8Array([...d,...f])));return n(s).encode([...d,...f,...h.slice(0,4)])}Ac.encode=i;function r(c){const l=n(s).decode(c),f=l.slice(0,1),d=l.slice(1,-4),h=(0,t.sha256)((0,t.sha256)(new Uint8Array([...f,...d])));return l.slice(-4).forEach((g,m)=>{if(g!==h[m])throw new Error("Invalid checksum")}),{prefix:f,data:d}}return Ac.decode=r,Ac}var dN;function YB(){return dN||(dN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32ToB58=t.b58ToC32=t.c32addressDecode=t.c32address=t.versions=void 0;const e=ID(),n=GB(),s=cf();t.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const i={};i[0]=t.versions.mainnet.p2pkh,i[5]=t.versions.mainnet.p2sh,i[111]=t.versions.testnet.p2pkh,i[196]=t.versions.testnet.p2sh;const r={};r[t.versions.mainnet.p2pkh]=0,r[t.versions.mainnet.p2sh]=5,r[t.versions.testnet.p2pkh]=111,r[t.versions.testnet.p2sh]=196;function c(h,g){if(!g.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,e.c32checkEncode)(h,g)}`}t.c32address=c;function l(h){if(h.length<=5)throw new Error("Invalid c32 address: invalid length");if(h[0]!="S")throw new Error('Invalid c32 address: must start with "S"');return(0,e.c32checkDecode)(h.slice(1))}t.c32addressDecode=l;function f(h,g=-1){const m=n.decode(h),y=(0,s.bytesToHex)(m.data),w=parseInt((0,s.bytesToHex)(m.prefix),16);let v;return g<0?(v=w,i[w]!==void 0&&(v=i[w])):v=g,c(v,y)}t.b58ToC32=f;function d(h,g=-1){const m=l(h),y=m[0],w=m[1];let v;g<0?(v=y,r[y]!==void 0&&(v=r[y])):v=g;let E=v.toString(16);return E.length===1&&(E=`0${E}`),n.encode(w,E)}t.c32ToB58=d})(H1)),H1}var hN;function XB(){return hN||(hN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.b58ToC32=t.c32ToB58=t.versions=t.c32normalize=t.c32addressDecode=t.c32address=t.c32checkDecode=t.c32checkEncode=t.c32decode=t.c32encode=void 0;const e=ND();Object.defineProperty(t,"c32encode",{enumerable:!0,get:function(){return e.c32encode}}),Object.defineProperty(t,"c32decode",{enumerable:!0,get:function(){return e.c32decode}}),Object.defineProperty(t,"c32normalize",{enumerable:!0,get:function(){return e.c32normalize}});const n=ID();Object.defineProperty(t,"c32checkEncode",{enumerable:!0,get:function(){return n.c32checkEncode}}),Object.defineProperty(t,"c32checkDecode",{enumerable:!0,get:function(){return n.c32checkDecode}});const s=YB();Object.defineProperty(t,"c32address",{enumerable:!0,get:function(){return s.c32address}}),Object.defineProperty(t,"c32addressDecode",{enumerable:!0,get:function(){return s.c32addressDecode}}),Object.defineProperty(t,"c32ToB58",{enumerable:!0,get:function(){return s.c32ToB58}}),Object.defineProperty(t,"b58ToC32",{enumerable:!0,get:function(){return s.b58ToC32}}),Object.defineProperty(t,"versions",{enumerable:!0,get:function(){return s.versions}})})(B1)),B1}var QB=XB();const ZB=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),DD=Uint8Array.from({length:16},(t,e)=>e),JB=DD.map(t=>(9*t+5)%16);let OE=[DD],ME=[JB];for(let t=0;t<4;t++)for(let e of[OE,ME])e.push(e[t].map(n=>ZB[n]));const _D=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ej=OE.map((t,e)=>t.map(n=>_D[e][n])),tj=ME.map((t,e)=>t.map(n=>_D[e][n])),nj=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),sj=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Zg=(t,e)=>t<<e|t>>>32-e;function pN(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const Jg=new Uint32Array(16);class ij extends DE{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:i,h4:r}=this;return[e,n,s,i,r]}set(e,n,s,i,r){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=i|0,this.h4=r|0}process(e,n){for(let y=0;y<16;y++,n+=4)Jg[y]=e.getUint32(n,!0);let s=this.h0|0,i=s,r=this.h1|0,c=r,l=this.h2|0,f=l,d=this.h3|0,h=d,g=this.h4|0,m=g;for(let y=0;y<5;y++){const w=4-y,v=nj[y],E=sj[y],C=OE[y],T=ME[y],N=ej[y],I=tj[y];for(let S=0;S<16;S++){const A=Zg(s+pN(y,r,l,d)+Jg[C[S]]+v,N[S])+g|0;s=g,g=d,d=Zg(l,10)|0,l=r,r=A}for(let S=0;S<16;S++){const A=Zg(i+pN(w,c,f,h)+Jg[T[S]]+E,I[S])+m|0;i=m,m=h,h=Zg(f,10)|0,f=c,c=A}}this.set(this.h1+l+h|0,this.h2+d+m|0,this.h3+g+i|0,this.h4+s+c|0,this.h0+r+f|0)}roundClean(){Jg.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}cl(()=>new ij);const e0=BigInt(2**32-1),Tb=BigInt(32);function OD(t,e=!1){return e?{h:Number(t&e0),l:Number(t>>Tb&e0)}:{h:Number(t>>Tb&e0)|0,l:Number(t&e0)|0}}function rj(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:r,l:c}=OD(t[i],e);[n[i],s[i]]=[r,c]}return[n,s]}const aj=(t,e)=>BigInt(t>>>0)<<Tb|BigInt(e>>>0),oj=(t,e,n)=>t>>>n,cj=(t,e,n)=>t<<32-n|e>>>n,lj=(t,e,n)=>t>>>n|e<<32-n,uj=(t,e,n)=>t<<32-n|e>>>n,fj=(t,e,n)=>t<<64-n|e>>>n-32,dj=(t,e,n)=>t>>>n-32|e<<64-n,hj=(t,e)=>e,pj=(t,e)=>t,gj=(t,e,n)=>t<<n|e>>>32-n,mj=(t,e,n)=>e<<n|t>>>32-n,yj=(t,e,n)=>e<<n-32|t>>>64-n,wj=(t,e,n)=>t<<n-32|e>>>64-n;function vj(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const bj=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ej=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,xj=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Sj=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,Cj=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),Aj=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,Ke={fromBig:OD,split:rj,toBig:aj,shrSH:oj,shrSL:cj,rotrSH:lj,rotrSL:uj,rotrBH:fj,rotrBL:dj,rotr32H:hj,rotr32L:pj,rotlSH:gj,rotlSL:mj,rotlBH:yj,rotlBL:wj,add:vj,add3L:bj,add3H:Ej,add4L:xj,add4H:Sj,add5H:Aj,add5L:Cj},[Nj,Tj]=Ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),wo=new Uint32Array(80),vo=new Uint32Array(80);class Mm extends DE{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:E}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=E|0}process(e,n){for(let N=0;N<16;N++,n+=4)wo[N]=e.getUint32(n),vo[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=wo[N-15]|0,S=vo[N-15]|0,A=Ke.rotrSH(I,S,1)^Ke.rotrSH(I,S,8)^Ke.shrSH(I,S,7),_=Ke.rotrSL(I,S,1)^Ke.rotrSL(I,S,8)^Ke.shrSL(I,S,7),D=wo[N-2]|0,O=vo[N-2]|0,P=Ke.rotrSH(D,O,19)^Ke.rotrBH(D,O,61)^Ke.shrSH(D,O,6),U=Ke.rotrSL(D,O,19)^Ke.rotrBL(D,O,61)^Ke.shrSL(D,O,6),L=Ke.add4L(_,U,vo[N-7],vo[N-16]),H=Ke.add4H(L,A,P,wo[N-7],wo[N-16]);wo[N]=H|0,vo[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:E,Hh:C,Hl:T}=this;for(let N=0;N<80;N++){const I=Ke.rotrSH(g,m,14)^Ke.rotrSH(g,m,18)^Ke.rotrBH(g,m,41),S=Ke.rotrSL(g,m,14)^Ke.rotrSL(g,m,18)^Ke.rotrBL(g,m,41),A=g&y^~g&v,_=m&w^~m&E,D=Ke.add5L(T,S,_,Tj[N],vo[N]),O=Ke.add5H(D,C,I,A,Nj[N],wo[N]),P=D|0,U=Ke.rotrSH(s,i,28)^Ke.rotrBH(s,i,34)^Ke.rotrBH(s,i,39),L=Ke.rotrSL(s,i,28)^Ke.rotrBL(s,i,34)^Ke.rotrBL(s,i,39),H=s&r^s&l^r&l,q=i&c^i&f^c&f;C=v|0,T=E|0,v=y|0,E=w|0,y=g|0,w=m|0,{h:g,l:m}=Ke.add(d|0,h|0,O|0,P|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=Ke.add3L(P,L,q);s=Ke.add3H($,O,U,H),i=$|0}({h:s,l:i}=Ke.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=Ke.add(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=Ke.add(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=Ke.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=Ke.add(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=Ke.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:E}=Ke.add(this.Gh|0,this.Gl|0,v|0,E|0),{h:C,l:T}=Ke.add(this.Hh|0,this.Hl|0,C|0,T|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,E,C,T)}roundClean(){wo.fill(0),vo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ij extends Mm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Dj extends Mm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class _j extends Mm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}cl(()=>new Mm);cl(()=>new Ij);cl(()=>new Dj);cl(()=>new _j);var zd={exports:{}};zd.exports;var gN;function Oj(){return gN||(gN=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",g="[object GeneratorFunction]",m="[object Map]",y="[object Number]",w="[object Object]",v="[object Promise]",E="[object RegExp]",C="[object Set]",T="[object String]",N="[object Symbol]",I="[object WeakMap]",S="[object ArrayBuffer]",A="[object DataView]",_="[object Float32Array]",D="[object Float64Array]",O="[object Int8Array]",P="[object Int16Array]",U="[object Int32Array]",L="[object Uint8Array]",H="[object Uint8ClampedArray]",q="[object Uint16Array]",$="[object Uint32Array]",R=/[\\^$.*+?()[\]{}|]/g,k=/\w*$/,F=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,W={};W[r]=W[c]=W[S]=W[A]=W[l]=W[f]=W[_]=W[D]=W[O]=W[P]=W[U]=W[m]=W[y]=W[w]=W[E]=W[C]=W[T]=W[N]=W[L]=W[H]=W[q]=W[$]=!0,W[d]=W[h]=W[I]=!1;var j=typeof Jn=="object"&&Jn&&Jn.Object===Object&&Jn,X=typeof self=="object"&&self&&self.Object===Object&&self,Z=j||X||Function("return this")(),ee=e&&!e.nodeType&&e,ae=ee&&!0&&t&&!t.nodeType&&t,oe=ae&&ae.exports===ee;function be(z,se){return z.set(se[0],se[1]),z}function Ae(z,se){return z.add(se),z}function Ne(z,se){for(var fe=-1,xe=z?z.length:0;++fe<xe&&se(z[fe],fe,z)!==!1;);return z}function We(z,se){for(var fe=-1,xe=se.length,Pt=z.length;++fe<xe;)z[Pt+fe]=se[fe];return z}function Qe(z,se,fe,xe){for(var Pt=-1,un=z?z.length:0;++Pt<un;)fe=se(fe,z[Pt],Pt,z);return fe}function xt(z,se){for(var fe=-1,xe=Array(z);++fe<z;)xe[fe]=se(fe);return xe}function ki(z,se){return z?.[se]}function cn(z){var se=!1;if(z!=null&&typeof z.toString!="function")try{se=!!(z+"")}catch{}return se}function ii(z){var se=-1,fe=Array(z.size);return z.forEach(function(xe,Pt){fe[++se]=[Pt,xe]}),fe}function ri(z,se){return function(fe){return z(se(fe))}}function qr(z){var se=-1,fe=Array(z.size);return z.forEach(function(xe){fe[++se]=xe}),fe}var or=Array.prototype,yn=Function.prototype,fs=Object.prototype,ns=Z["__core-js_shared__"],cr=(function(){var z=/[^.]+$/.exec(ns&&ns.keys&&ns.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""})(),lr=yn.toString,St=fs.hasOwnProperty,ai=fs.toString,oi=RegExp("^"+lr.call(St).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wr=oe?Z.Buffer:void 0,Bi=Z.Symbol,ji=Z.Uint8Array,zi=ri(Object.getPrototypeOf,Object),sy=Object.create,iy=fs.propertyIsEnumerable,Zo=or.splice,Fn=Object.getOwnPropertySymbols,ur=Wr?Wr.isBuffer:void 0,ss=ri(Object.keys,Object),wf=Yr(Z,"DataView"),Jo=Yr(Z,"Map"),vf=Yr(Z,"Promise"),ka=Yr(Z,"Set"),Ba=Yr(Z,"WeakMap"),fr=Yr(Object,"create"),Kr=Vi(wf),yl=Vi(Jo),ec=Vi(vf),ry=Vi(ka),Tp=Vi(Ba),wl=Bi?Bi.prototype:void 0,ja=wl?wl.valueOf:void 0;function Gr(z){var se=-1,fe=z?z.length:0;for(this.clear();++se<fe;){var xe=z[se];this.set(xe[0],xe[1])}}function Ip(){this.__data__=fr?fr(null):{}}function Dp(z){return this.has(z)&&delete this.__data__[z]}function _p(z){var se=this.__data__;if(fr){var fe=se[z];return fe===s?void 0:fe}return St.call(se,z)?se[z]:void 0}function bf(z){var se=this.__data__;return fr?se[z]!==void 0:St.call(se,z)}function Ef(z,se){var fe=this.__data__;return fe[z]=fr&&se===void 0?s:se,this}Gr.prototype.clear=Ip,Gr.prototype.delete=Dp,Gr.prototype.get=_p,Gr.prototype.has=bf,Gr.prototype.set=Ef;function ci(z){var se=-1,fe=z?z.length:0;for(this.clear();++se<fe;){var xe=z[se];this.set(xe[0],xe[1])}}function Op(){this.__data__=[]}function dr(z){var se=this.__data__,fe=Hi(se,z);if(fe<0)return!1;var xe=se.length-1;return fe==xe?se.pop():Zo.call(se,fe,1),!0}function ln(z){var se=this.__data__,fe=Hi(se,z);return fe<0?void 0:se[fe][1]}function Vn(z){return Hi(this.__data__,z)>-1}function za(z,se){var fe=this.__data__,xe=Hi(fe,z);return xe<0?fe.push([z,se]):fe[xe][1]=se,this}ci.prototype.clear=Op,ci.prototype.delete=dr,ci.prototype.get=ln,ci.prototype.has=Vn,ci.prototype.set=za;function hr(z){var se=-1,fe=z?z.length:0;for(this.clear();++se<fe;){var xe=z[se];this.set(xe[0],xe[1])}}function ay(){this.__data__={hash:new Gr,map:new(Jo||ci),string:new Gr}}function oy(z){return sc(this,z).delete(z)}function Mp(z){return sc(this,z).get(z)}function tc(z){return sc(this,z).has(z)}function xf(z,se){return sc(this,z).set(z,se),this}hr.prototype.clear=ay,hr.prototype.delete=oy,hr.prototype.get=Mp,hr.prototype.has=tc,hr.prototype.set=xf;function Us(z){this.__data__=new ci(z)}function Ha(){this.__data__=new ci}function nc(z){return this.__data__.delete(z)}function Fa(z){return this.__data__.get(z)}function Jt(z){return this.__data__.has(z)}function Rp(z,se){var fe=this.__data__;if(fe instanceof ci){var xe=fe.__data__;if(!Jo||xe.length<n-1)return xe.push([z,se]),this;fe=this.__data__=new hr(xe)}return fe.set(z,se),this}Us.prototype.clear=Ha,Us.prototype.delete=nc,Us.prototype.get=Fa,Us.prototype.has=Jt,Us.prototype.set=Rp;function Pp(z,se){var fe=Al(z)||qa(z)?xt(z.length,String):[],xe=fe.length,Pt=!!xe;for(var un in z)St.call(z,un)&&!(Pt&&(un=="length"||dy(un,xe)))&&fe.push(un);return fe}function pr(z,se,fe){var xe=z[se];(!(St.call(z,se)&&Zr(xe,fe))||fe===void 0&&!(se in z))&&(z[se]=fe)}function Hi(z,se){for(var fe=z.length;fe--;)if(Zr(z[fe][0],se))return fe;return-1}function cy(z,se){return z&&Af(se,rc(se),z)}function vl(z,se,fe,xe,Pt,un,is){var qn;if(xe&&(qn=un?xe(z,Pt,un,is):xe(z)),qn!==void 0)return qn;if(!gr(z))return z;var Il=Al(z);if(Il){if(qn=Lp(z),!se)return Cf(z,qn)}else{var yr=Qr(z),Wa=yr==h||yr==g;if(ic(z))return ds(z,se);if(yr==w||yr==r||Wa&&!un){if(cn(z))return un?z:{};if(qn=kp(Wa?{}:z),!se)return Nf(z,cy(qn,z))}else{if(!W[yr])return un?z:{};qn=Tf(z,yr,vl,se)}}is||(is=new Us);var ac=is.get(z);if(ac)return ac;if(is.set(z,qn),!Il)var _f=fe?Va(z):rc(z);return Ne(_f||z,function(Of,Dl){_f&&(Dl=Of,Of=z[Dl]),pr(qn,Dl,vl(Of,se,fe,xe,Dl,z,is))}),qn}function $p(z){return gr(z)?sy(z):{}}function ly(z,se,fe){var xe=se(z);return Al(z)?xe:We(xe,fe(z))}function bl(z){return ai.call(z)}function El(z){if(!gr(z)||Cl(z))return!1;var se=ui(z)||cn(z)?oi:F;return se.test(Vi(z))}function Fi(z){if(!li(z))return ss(z);var se=[];for(var fe in Object(z))St.call(z,fe)&&fe!="constructor"&&se.push(fe);return se}function ds(z,se){if(se)return z.slice();var fe=new z.constructor(z.length);return z.copy(fe),fe}function xl(z){var se=new z.constructor(z.byteLength);return new ji(se).set(new ji(z)),se}function uy(z,se){var fe=se?xl(z.buffer):z.buffer;return new z.constructor(fe,z.byteOffset,z.byteLength)}function Sf(z,se,fe){var xe=se?fe(ii(z),!0):ii(z);return Qe(xe,be,new z.constructor)}function Up(z){var se=new z.constructor(z.source,k.exec(z));return se.lastIndex=z.lastIndex,se}function Sl(z,se,fe){var xe=se?fe(qr(z),!0):qr(z);return Qe(xe,Ae,new z.constructor)}function fy(z){return ja?Object(ja.call(z)):{}}function hs(z,se){var fe=se?xl(z.buffer):z.buffer;return new z.constructor(fe,z.byteOffset,z.length)}function Cf(z,se){var fe=-1,xe=z.length;for(se||(se=Array(xe));++fe<xe;)se[fe]=z[fe];return se}function Af(z,se,fe,xe){fe||(fe={});for(var Pt=-1,un=se.length;++Pt<un;){var is=se[Pt],qn=void 0;pr(fe,is,qn===void 0?z[is]:qn)}return fe}function Nf(z,se){return Af(z,Xr(z),se)}function Va(z){return ly(z,rc,Xr)}function sc(z,se){var fe=z.__data__;return hy(se)?fe[typeof se=="string"?"string":"hash"]:fe.map}function Yr(z,se){var fe=ki(z,se);return El(fe)?fe:void 0}var Xr=Fn?ri(Fn,Object):Tl,Qr=bl;(wf&&Qr(new wf(new ArrayBuffer(1)))!=A||Jo&&Qr(new Jo)!=m||vf&&Qr(vf.resolve())!=v||ka&&Qr(new ka)!=C||Ba&&Qr(new Ba)!=I)&&(Qr=function(z){var se=ai.call(z),fe=se==w?z.constructor:void 0,xe=fe?Vi(fe):void 0;if(xe)switch(xe){case Kr:return A;case yl:return m;case ec:return v;case ry:return C;case Tp:return I}return se});function Lp(z){var se=z.length,fe=z.constructor(se);return se&&typeof z[0]=="string"&&St.call(z,"index")&&(fe.index=z.index,fe.input=z.input),fe}function kp(z){return typeof z.constructor=="function"&&!li(z)?$p(zi(z)):{}}function Tf(z,se,fe,xe){var Pt=z.constructor;switch(se){case S:return xl(z);case l:case f:return new Pt(+z);case A:return uy(z,xe);case _:case D:case O:case P:case U:case L:case H:case q:case $:return hs(z,xe);case m:return Sf(z,xe,fe);case y:case T:return new Pt(z);case E:return Up(z);case C:return Sl(z,xe,fe);case N:return fy(z)}}function dy(z,se){return se=se??i,!!se&&(typeof z=="number"||K.test(z))&&z>-1&&z%1==0&&z<se}function hy(z){var se=typeof z;return se=="string"||se=="number"||se=="symbol"||se=="boolean"?z!=="__proto__":z===null}function Cl(z){return!!cr&&cr in z}function li(z){var se=z&&z.constructor,fe=typeof se=="function"&&se.prototype||fs;return z===fe}function Vi(z){if(z!=null){try{return lr.call(z)}catch{}try{return z+""}catch{}}return""}function If(z){return vl(z,!0,!0)}function Zr(z,se){return z===se||z!==z&&se!==se}function qa(z){return Bp(z)&&St.call(z,"callee")&&(!iy.call(z,"callee")||ai.call(z)==r)}var Al=Array.isArray;function Nl(z){return z!=null&&Df(z.length)&&!ui(z)}function Bp(z){return mr(z)&&Nl(z)}var ic=ur||jp;function ui(z){var se=gr(z)?ai.call(z):"";return se==h||se==g}function Df(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=i}function gr(z){var se=typeof z;return!!z&&(se=="object"||se=="function")}function mr(z){return!!z&&typeof z=="object"}function rc(z){return Nl(z)?Pp(z):Fi(z)}function Tl(){return[]}function jp(){return!1}t.exports=If})(zd,zd.exports)),zd.exports}Oj();var pn;(function(t){t.Int="int",t.UInt="uint",t.Buffer="buffer",t.BoolTrue="true",t.BoolFalse="false",t.PrincipalStandard="address",t.PrincipalContract="contract",t.ResponseOk="ok",t.ResponseErr="err",t.OptionalNone="none",t.OptionalSome="some",t.List="list",t.Tuple="tuple",t.StringASCII="ascii",t.StringUTF8="utf8"})(pn||(pn={}));var Ib;(function(t){t[t.int=0]="int",t[t.uint=1]="uint",t[t.buffer=2]="buffer",t[t.true=3]="true",t[t.false=4]="false",t[t.address=5]="address",t[t.contract=6]="contract",t[t.ok=7]="ok",t[t.err=8]="err",t[t.none=9]="none",t[t.some=10]="some",t[t.list=11]="list",t[t.tuple=12]="tuple",t[t.ascii=13]="ascii",t[t.utf8=14]="utf8"})(Ib||(Ib={}));function RE(t){return Ib[t]}const mN=BigInt("0xffffffffffffffffffffffffffffffff"),Mj=BigInt(0);BigInt("0x7fffffffffffffffffffffffffffffff");BigInt("-170141183460469231731687303715884105728");const Rj=t=>{const e=mE(t);if(e<Mj)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>mN)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${mN}`);return{type:pn.UInt,value:e}};var Xs;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.Asset=4]="Asset",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(Xs||(Xs={}));function Ah(t,e,n){const s=e||1,i=n||bB;if(ez(t,i))throw new Error(`String length exceeds maximum bytes ${i}`);return{type:Xs.LengthPrefixedString,content:t,lengthPrefixBytes:s,maxLengthBytes:i}}function Pj(t,e,n){return{type:Xs.Asset,address:up(t),contractName:Ah(e),assetName:Ah(n)}}function up(t){const e=QB.c32addressDecode(t);return{type:Xs.Address,version:e[0],hash160:e[1]}}function $j(t,e){const n=up(t),s=Ah(e);return{type:Xs.Principal,prefix:kr.Contract,address:n,contractName:s}}function Uj(t){const e=up(t);return{type:Xs.Principal,prefix:kr.Standard,address:e}}function Rm(t){const e=[];return e.push(tl(yE(t.version,1))),e.push(tl(t.hash160)),La(e)}function Lj(t){const e=[];return e.push(t.prefix),(t.prefix===kr.Standard||t.prefix===kr.Contract)&&e.push(Rm(t.address)),t.prefix===kr.Contract&&e.push(Nh(t.contractName)),La(e)}function Nh(t){const e=[],n=_m(t.content),s=n.byteLength;return e.push(tl(yE(s,t.lengthPrefixBytes))),e.push(n),La(e)}function kj(t){const e=[];return e.push(Rm(t.address)),e.push(Nh(t.contractName)),e.push(Nh(t.assetName)),La(e)}function Bj(t){return lp(jj(t))}function jj(t){const e=[];if(e.push(t.conditionType),e.push(Lj(t.principal)),(t.conditionType===Pr.Fungible||t.conditionType===Pr.NonFungible)&&e.push(kj(t.asset)),t.conditionType===Pr.NonFungible&&e.push(lf(t.assetName)),e.push(t.conditionCode),t.conditionType===Pr.STX||t.conditionType===Pr.Fungible){if(t.amount>BigInt("0xffffffffffffffff"))throw new xD("The post-condition amount may not be larger than 8 bytes");e.push(d9(t.amount,8))}return La(e)}function yN(t){const[e,n,s]=t.split(/\.|::/);return Pj(e,n,s)}function V1(t){if(t.includes(".")){const[e,n]=t.split(".");return $j(e,n)}else return Uj(t)}function Vr(t,e){return La([RE(t),e])}function zj(t){return new Uint8Array([RE(t.type)])}function Hj(t){return t.type===pn.OptionalNone?new Uint8Array([RE(t.type)]):Vr(t.type,lf(t.value))}function Fj(t){const e=new Uint8Array(4);return Om(e,Math.ceil(t.value.length/2),0),Vr(t.type,vE(e,tl(t.value)))}function Vj(t){const e=wE(p9(BigInt(t.value),BigInt(EB)),ED);return Vr(t.type,e)}function qj(t){const e=wE(BigInt(t.value),ED);return Vr(t.type,e)}function Wj(t){return Vr(t.type,Rm(up(t.value)))}function Kj(t){const[e,n]=tz(t.value);return Vr(t.type,vE(Rm(up(e)),Nh(Ah(n))))}function Gj(t){return Vr(t.type,lf(t.value))}function Yj(t){const e=[],n=new Uint8Array(4);Om(n,t.value.length,0),e.push(n);for(const s of t.value){const i=lf(s);e.push(i)}return Vr(t.type,La(e))}function Xj(t){const e=[],n=new Uint8Array(4);Om(n,Object.keys(t.value).length,0),e.push(n);const s=Object.keys(t.value).sort((i,r)=>i.localeCompare(r));for(const i of s){const r=Ah(i);e.push(Nh(r));const c=lf(t.value[i]);e.push(c)}return Vr(t.type,La(e))}function MD(t,e){const n=[],s=e=="ascii"?y9(t.value):_m(t.value),i=new Uint8Array(4);return Om(i,s.length,0),n.push(i),n.push(s),Vr(t.type,La(n))}function Qj(t){return MD(t,"ascii")}function Zj(t){return MD(t,"utf8")}function Jj(t){return lp(lf(t))}function lf(t){switch(t.type){case pn.BoolTrue:case pn.BoolFalse:return zj(t);case pn.OptionalNone:case pn.OptionalSome:return Hj(t);case pn.Buffer:return Fj(t);case pn.UInt:return qj(t);case pn.Int:return Vj(t);case pn.PrincipalStandard:return Wj(t);case pn.PrincipalContract:return Kj(t);case pn.ResponseOk:case pn.ResponseErr:return Gj(t);case pn.List:return Yj(t);case pn.Tuple:return Xj(t);case pn.StringASCII:return Qj(t);case pn.StringUTF8:return Zj(t);default:throw new xD("Unable to serialize. Invalid Clarity Value.")}}const ez=(t,e)=>t?_m(t).length>e:!1;function tz(t){const[e,n]=t.split(".");if(!e||!n)throw new Error(`Invalid contract identifier: ${t}`);return[e,n]}var Db;(function(t){t[t.eq=1]="eq",t[t.gt=2]="gt",t[t.lt=4]="lt",t[t.gte=3]="gte",t[t.lte=5]="lte",t[t.sent=16]="sent",t[t["not-sent"]=17]="not-sent"})(Db||(Db={}));function nz(t){switch(t.type){case"stx-postcondition":return{type:Xs.PostCondition,conditionType:Pr.STX,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:V1(t.address),conditionCode:q1(t.condition),amount:BigInt(t.amount)};case"ft-postcondition":return{type:Xs.PostCondition,conditionType:Pr.Fungible,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:V1(t.address),conditionCode:q1(t.condition),amount:BigInt(t.amount),asset:yN(t.asset)};case"nft-postcondition":return{type:Xs.PostCondition,conditionType:Pr.NonFungible,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:V1(t.address),conditionCode:q1(t.condition),asset:yN(t.asset),assetName:t.assetId};default:throw new Error("Invalid post condition type")}}function q1(t){return Db[t]}function wN(t){const e=nz(t);return Bj(e)}const vN=Jj;var t0={exports:{}},bN;function sz(){if(bN)return t0.exports;bN=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,A,_){return Function.prototype.apply.call(S,A,_)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function s(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(S){return S!==S};function r(){r.init.call(this)}t0.exports=r,t0.exports.once=C,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var c=10;function l(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");c=I}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function f(I){return I._maxListeners===void 0?r.defaultMaxListeners:I._maxListeners}r.prototype.getMaxListeners=function(){return f(this)},r.prototype.emit=function(S){for(var A=[],_=1;_<arguments.length;_++)A.push(arguments[_]);var D=S==="error",O=this._events;if(O!==void 0)D=D&&O.error===void 0;else if(!D)return!1;if(D){var P;if(A.length>0&&(P=A[0]),P instanceof Error)throw P;var U=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw U.context=P,U}var L=O[S];if(L===void 0)return!1;if(typeof L=="function")e(L,this,A);else for(var H=L.length,q=w(L,H),_=0;_<H;++_)e(q[_],this,A);return!0};function d(I,S,A,_){var D,O,P;if(l(A),O=I._events,O===void 0?(O=I._events=Object.create(null),I._eventsCount=0):(O.newListener!==void 0&&(I.emit("newListener",S,A.listener?A.listener:A),O=I._events),P=O[S]),P===void 0)P=O[S]=A,++I._eventsCount;else if(typeof P=="function"?P=O[S]=_?[A,P]:[P,A]:_?P.unshift(A):P.push(A),D=f(I),D>0&&P.length>D&&!P.warned){P.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=I,U.type=S,U.count=P.length,s(U)}return I}r.prototype.addListener=function(S,A){return d(this,S,A,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(S,A){return d(this,S,A,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(I,S,A){var _={fired:!1,wrapFn:void 0,target:I,type:S,listener:A},D=h.bind(_);return D.listener=A,_.wrapFn=D,D}r.prototype.once=function(S,A){return l(A),this.on(S,g(this,S,A)),this},r.prototype.prependOnceListener=function(S,A){return l(A),this.prependListener(S,g(this,S,A)),this},r.prototype.removeListener=function(S,A){var _,D,O,P,U;if(l(A),D=this._events,D===void 0)return this;if(_=D[S],_===void 0)return this;if(_===A||_.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete D[S],D.removeListener&&this.emit("removeListener",S,_.listener||A));else if(typeof _!="function"){for(O=-1,P=_.length-1;P>=0;P--)if(_[P]===A||_[P].listener===A){U=_[P].listener,O=P;break}if(O<0)return this;O===0?_.shift():v(_,O),_.length===1&&(D[S]=_[0]),D.removeListener!==void 0&&this.emit("removeListener",S,U||A)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(S){var A,_,D;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[S]),this;if(arguments.length===0){var O=Object.keys(_),P;for(D=0;D<O.length;++D)P=O[D],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=_[S],typeof A=="function")this.removeListener(S,A);else if(A!==void 0)for(D=A.length-1;D>=0;D--)this.removeListener(S,A[D]);return this};function m(I,S,A){var _=I._events;if(_===void 0)return[];var D=_[S];return D===void 0?[]:typeof D=="function"?A?[D.listener||D]:[D]:A?E(D):w(D,D.length)}r.prototype.listeners=function(S){return m(this,S,!0)},r.prototype.rawListeners=function(S){return m(this,S,!1)},r.listenerCount=function(I,S){return typeof I.listenerCount=="function"?I.listenerCount(S):y.call(I,S)},r.prototype.listenerCount=y;function y(I){var S=this._events;if(S!==void 0){var A=S[I];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(I,S){for(var A=new Array(S),_=0;_<S;++_)A[_]=I[_];return A}function v(I,S){for(;S+1<I.length;S++)I[S]=I[S+1];I.pop()}function E(I){for(var S=new Array(I.length),A=0;A<S.length;++A)S[A]=I[A].listener||I[A];return S}function C(I,S){return new Promise(function(A,_){function D(P){I.removeListener(S,O),_(P)}function O(){typeof I.removeListener=="function"&&I.removeListener("error",D),A([].slice.call(arguments))}N(I,S,O,{once:!0}),S!=="error"&&T(I,D,{once:!0})})}function T(I,S,A){typeof I.on=="function"&&N(I,"error",S,A)}function N(I,S,A,_){if(typeof I.on=="function")_.once?I.once(S,A):I.on(S,A);else if(typeof I.addEventListener=="function")I.addEventListener(S,function D(O){_.once&&I.removeEventListener(S,D),A(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return t0.exports}var $i=sz();const PE=sf($i);var W1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _b=function(t,e){return _b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)s.hasOwnProperty(i)&&(n[i]=s[i])},_b(t,e)};function iz(t,e){_b(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ob=function(){return Ob=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ob.apply(this,arguments)};function rz(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function az(t,e,n,s){var i=arguments.length,r=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(r=(i<3?c(r):i>3?c(e,n,r):c(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}function oz(t,e){return function(n,s){e(n,s,t)}}function cz(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lz(t,e,n,s){function i(r){return r instanceof n?r:new n(function(c){c(r)})}return new(n||(n=Promise))(function(r,c){function l(h){try{d(s.next(h))}catch(g){c(g)}}function f(h){try{d(s.throw(h))}catch(g){c(g)}}function d(h){h.done?r(h.value):i(h.value).then(l,f)}d((s=s.apply(t,e||[])).next())})}function uz(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(h){return f([d,h])}}function f(d){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(r=d[0]&2?i.return:d[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,d[1])).done)return r;switch(i=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],i=0}finally{s=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function fz(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]}function dz(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Mb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function RD(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,r=[],c;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return r}function hz(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(RD(arguments[e]));return t}function pz(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],c=0,l=r.length;c<l;c++,i++)s[i]=r[c];return s}function Th(t){return this instanceof Th?(this.v=t,this):new Th(t)}function gz(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),i,r=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(m){s[m]&&(i[m]=function(y){return new Promise(function(w,v){r.push([m,y,w,v])>1||l(m,y)})})}function l(m,y){try{f(s[m](y))}catch(w){g(r[0][3],w)}}function f(m){m.value instanceof Th?Promise.resolve(m.value.v).then(d,h):g(r[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function g(m,y){m(y),r.shift(),r.length&&l(r[0][0],r[0][1])}}function mz(t){var e,n;return e={},s("next"),s("throw",function(i){throw i}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(i,r){e[i]=t[i]?function(c){return(n=!n)?{value:Th(t[i](c)),done:i==="return"}:r?r(c):c}:r}}function yz(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Mb=="function"?Mb(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(r){n[r]=t[r]&&function(c){return new Promise(function(l,f){c=t[r](c),i(l,f,c.done,c.value)})}}function i(r,c,l,f){Promise.resolve(f).then(function(d){r({value:d,done:l})},c)}}function wz(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function vz(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function bz(t){return t&&t.__esModule?t:{default:t}}function Ez(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function xz(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Sz=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ob},__asyncDelegator:mz,__asyncGenerator:gz,__asyncValues:yz,__await:Th,__awaiter:lz,__classPrivateFieldGet:Ez,__classPrivateFieldSet:xz,__createBinding:fz,__decorate:az,__exportStar:dz,__extends:iz,__generator:uz,__importDefault:bz,__importStar:vz,__makeTemplateObject:wz,__metadata:cz,__param:oz,__read:RD,__rest:rz,__spread:hz,__spreadArrays:pz,__values:Mb},Symbol.toStringTag,{value:"Module"})),fp=a$(Sz);var K1={},xd={},EN;function Cz(){if(EN)return xd;EN=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return xd.delay=t,xd}var Nc={},G1={},Tc={},xN;function Az(){return xN||(xN=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ONE_THOUSAND=Tc.ONE_HUNDRED=void 0,Tc.ONE_HUNDRED=100,Tc.ONE_THOUSAND=1e3),Tc}var Y1={},SN;function Nz(){return SN||(SN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(Y1)),Y1}var CN;function PD(){return CN||(CN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Az(),t),e.__exportStar(Nz(),t)})(G1)),G1}var AN;function Tz(){if(AN)return Nc;AN=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.fromMiliseconds=Nc.toMiliseconds=void 0;const t=PD();function e(s){return s*t.ONE_THOUSAND}Nc.toMiliseconds=e;function n(s){return Math.floor(s/t.ONE_THOUSAND)}return Nc.fromMiliseconds=n,Nc}var NN;function Iz(){return NN||(NN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Cz(),t),e.__exportStar(Tz(),t)})(K1)),K1}var ru={},TN;function Dz(){if(TN)return ru;TN=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const s=this.get(n);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-s.started;this.timestamps.set(n,{started:s.started,elapsed:i})}get(n){const s=this.timestamps.get(n);if(typeof s>"u")throw new Error(`No timestamp found for label: ${n}`);return s}elapsed(n){const s=this.get(n);return s.elapsed||Date.now()-s.started}}return ru.Watch=t,ru.default=t,ru}var X1={},Sd={},IN;function _z(){if(IN)return Sd;IN=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.IWatch=void 0;class t{}return Sd.IWatch=t,Sd}var DN;function Oz(){return DN||(DN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),fp.__exportStar(_z(),t)})(X1)),X1}var _N;function Mz(){return _N||(_N=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Iz(),t),e.__exportStar(Dz(),t),e.__exportStar(Oz(),t),e.__exportStar(PD(),t)})(W1)),W1}var we=Mz();class ll{}let Rz=class extends ll{constructor(e){super()}};const ON=we.FIVE_SECONDS,ul={pulse:"heartbeat_pulse"};let Pz=class $D extends Rz{constructor(e){super(e),this.events=new $i.EventEmitter,this.interval=ON,this.interval=e?.interval||ON}static async init(e){const n=new $D(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(ul.pulse)}};const $z=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Uz=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Lz=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kz(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Bz(t);return}return e}function Bz(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function n0(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Lz.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($z.test(t)||Uz.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,kz)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}function jz(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function En(t,...e){try{return jz(t(...e))}catch(n){return Promise.reject(n)}}function zz(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Hz(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function $0(t){if(zz(t))return String(t);if(Hz(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return $0(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Rb="base64:";function Fz(t){return typeof t=="string"?t:Rb+Wz(t)}function Vz(t){return typeof t!="string"||!t.startsWith(Rb)?t:qz(t.slice(Rb.length))}function qz(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Wz(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ns(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Kz(...t){return Ns(t.join(":"))}function s0(t){return t=Ns(t),t?t+":":""}function Gz(t,e){if(e===void 0)return!0;let n=0,s=t.indexOf(":");for(;s>-1;)n++,s=t.indexOf(":",s+1);return n<=e}function Yz(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Xz="memory",Qz=()=>{const t=new Map;return{name:Xz,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Zz(t={}){const e={mounts:{"":t.driver||Qz()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const h of e.mountpoints)if(d.startsWith(h))return{base:h,relativeKey:d.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:d,driver:e.mounts[""]}},s=(d,h)=>e.mountpoints.filter(g=>g.startsWith(d)||h&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),i=(d,h)=>{if(e.watching){h=Ns(h);for(const g of e.watchListeners)g(d,h)}},r=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await MN(e.mounts[d],i,d)}},c=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},l=(d,h,g)=>{const m=new Map,y=w=>{let v=m.get(w.base);return v||(v={driver:w.driver,base:w.base,items:[]},m.set(w.base,v)),v};for(const w of d){const v=typeof w=="string",E=Ns(v?w:w.key),C=v?void 0:w.value,T=v||!w.options?h:{...h,...w.options},N=n(E);y(N).items.push({key:E,value:C,relativeKey:N.relativeKey,options:T})}return Promise.all([...m.values()].map(w=>g(w))).then(w=>w.flat())},f={hasItem(d,h={}){d=Ns(d);const{relativeKey:g,driver:m}=n(d);return En(m.hasItem,g,h)},getItem(d,h={}){d=Ns(d);const{relativeKey:g,driver:m}=n(d);return En(m.getItem,g,h).then(y=>n0(y))},getItems(d,h={}){return l(d,h,g=>g.driver.getItems?En(g.driver.getItems,g.items.map(m=>({key:m.relativeKey,options:m.options})),h).then(m=>m.map(y=>({key:Kz(g.base,y.key),value:n0(y.value)}))):Promise.all(g.items.map(m=>En(g.driver.getItem,m.relativeKey,m.options).then(y=>({key:m.key,value:n0(y)})))))},getItemRaw(d,h={}){d=Ns(d);const{relativeKey:g,driver:m}=n(d);return m.getItemRaw?En(m.getItemRaw,g,h):En(m.getItem,g,h).then(y=>Vz(y))},async setItem(d,h,g={}){if(h===void 0)return f.removeItem(d);d=Ns(d);const{relativeKey:m,driver:y}=n(d);y.setItem&&(await En(y.setItem,m,$0(h),g),y.watch||i("update",d))},async setItems(d,h){await l(d,h,async g=>{if(g.driver.setItems)return En(g.driver.setItems,g.items.map(m=>({key:m.relativeKey,value:$0(m.value),options:m.options})),h);g.driver.setItem&&await Promise.all(g.items.map(m=>En(g.driver.setItem,m.relativeKey,$0(m.value),m.options)))})},async setItemRaw(d,h,g={}){if(h===void 0)return f.removeItem(d,g);d=Ns(d);const{relativeKey:m,driver:y}=n(d);if(y.setItemRaw)await En(y.setItemRaw,m,h,g);else if(y.setItem)await En(y.setItem,m,Fz(h),g);else return;y.watch||i("update",d)},async removeItem(d,h={}){typeof h=="boolean"&&(h={removeMeta:h}),d=Ns(d);const{relativeKey:g,driver:m}=n(d);m.removeItem&&(await En(m.removeItem,g,h),(h.removeMeta||h.removeMata)&&await En(m.removeItem,g+"$",h),m.watch||i("remove",d))},async getMeta(d,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),d=Ns(d);const{relativeKey:g,driver:m}=n(d),y=Object.create(null);if(m.getMeta&&Object.assign(y,await En(m.getMeta,g,h)),!h.nativeOnly){const w=await En(m.getItem,g+"$",h).then(v=>n0(v));w&&typeof w=="object"&&(typeof w.atime=="string"&&(w.atime=new Date(w.atime)),typeof w.mtime=="string"&&(w.mtime=new Date(w.mtime)),Object.assign(y,w))}return y},setMeta(d,h,g={}){return this.setItem(d+"$",h,g)},removeMeta(d,h={}){return this.removeItem(d+"$",h)},async getKeys(d,h={}){d=s0(d);const g=s(d,!0);let m=[];const y=[];let w=!0;for(const E of g){E.driver.flags?.maxDepth||(w=!1);const C=await En(E.driver.getKeys,E.relativeBase,h);for(const T of C){const N=E.mountpoint+Ns(T);m.some(I=>N.startsWith(I))||y.push(N)}m=[E.mountpoint,...m.filter(T=>!T.startsWith(E.mountpoint))]}const v=h.maxDepth!==void 0&&!w;return y.filter(E=>(!v||Gz(E,h.maxDepth))&&Yz(E,d))},async clear(d,h={}){d=s0(d),await Promise.all(s(d,!1).map(async g=>{if(g.driver.clear)return En(g.driver.clear,g.relativeBase,h);if(g.driver.removeItem){const m=await g.driver.getKeys(g.relativeBase||"",h);return Promise.all(m.map(y=>g.driver.removeItem(y,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>RN(d)))},async watch(d){return await r(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==d),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(d,h){if(d=s0(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((g,m)=>m.length-g.length)),e.mounts[d]=h,e.watching&&Promise.resolve(MN(h,i,d)).then(g=>{e.unwatch[d]=g}).catch(console.error),f},async unmount(d,h=!0){d=s0(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&(e.unwatch[d]?.(),delete e.unwatch[d]),h&&await RN(e.mounts[d]),e.mountpoints=e.mountpoints.filter(g=>g!==d),delete e.mounts[d])},getMount(d=""){d=Ns(d)+":";const h=n(d);return{driver:h.driver,base:h.base}},getMounts(d="",h={}){return d=Ns(d),s(d,h.parents).map(m=>({driver:m.driver,base:m.mountpoint}))},keys:(d,h={})=>f.getKeys(d,h),get:(d,h={})=>f.getItem(d,h),set:(d,h,g={})=>f.setItem(d,h,g),has:(d,h={})=>f.hasItem(d,h),del:(d,h={})=>f.removeItem(d,h),remove:(d,h={})=>f.removeItem(d,h)};return f}function MN(t,e,n){return t.watch?t.watch((s,i)=>e(s,n+i)):()=>{}}async function RN(t){typeof t.dispose=="function"&&await En(t.dispose)}function fl(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function UD(t,e){let n;const s=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=fl(i),n.then(r=>{r.onclose=()=>n=void 0},()=>{}),n};return(i,r)=>s().then(c=>r(c.transaction(e,i).objectStore(e)))}let Q1;function dp(){return Q1||(Q1=UD("keyval-store","keyval")),Q1}function PN(t,e=dp()){return e("readonly",n=>fl(n.get(t)))}function Jz(t,e,n=dp()){return n("readwrite",s=>(s.put(e,t),fl(s.transaction)))}function eH(t,e=dp()){return e("readwrite",n=>(n.delete(t),fl(n.transaction)))}function tH(t=dp()){return t("readwrite",e=>(e.clear(),fl(e.transaction)))}function nH(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},fl(t.transaction)}function sH(t=dp()){return t("readonly",e=>{if(e.getAllKeys)return fl(e.getAllKeys());const n=[];return nH(e,s=>n.push(s.key)).then(()=>n)})}const iH=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),rH=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(s,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function nl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return rH(t)}catch{return t}}function Pa(t){return typeof t=="string"?t:iH(t)||""}const aH="idb-keyval";var oH=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let s;return t.dbName&&t.storeName&&(s=UD(t.dbName,t.storeName)),{name:aH,options:t,async hasItem(i){return!(typeof await PN(n(i),s)>"u")},async getItem(i){return await PN(n(i),s)??null},setItem(i,r){return Jz(n(i),r,s)},removeItem(i){return eH(n(i),s)},getKeys(){return sH(s)},clear(){return tH(s)}}};const cH="WALLET_CONNECT_V2_INDEXED_DB",lH="keyvaluestorage";let uH=class{constructor(){this.indexedDb=Zz({driver:oH({dbName:cH,storeName:lH})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Pa(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U0={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,s){this[n]=String(s)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(s){n[s]=void 0,delete n[s]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Z1<"u"&&Z1.localStorage?U0.exports=Z1.localStorage:typeof window<"u"&&window.localStorage?U0.exports=window.localStorage:U0.exports=new e})();function fH(t){var e;return[t[0],nl((e=t[1])!=null?e:"")]}let dH=class{constructor(){this.localStorage=U0.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(fH)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return nl(n)}async setItem(e,n){this.localStorage.setItem(e,Pa(n))}async removeItem(e){this.localStorage.removeItem(e)}};const hH="wc_storage_version",$N=1,pH=async(t,e,n)=>{const s=hH,i=await e.getItem(s);if(i&&i>=$N){n(e);return}const r=await t.getKeys();if(!r.length){n(e);return}const c=[];for(;r.length;){const l=r.shift();if(!l)continue;const f=l.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const d=await t.getItem(l);await e.setItem(l,d),c.push(l)}}await e.setItem(s,$N),n(e),gH(t,c)},gH=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let mH=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new dH;this.storage=e;try{const n=new uH;pH(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var J1,UN;function yH(){if(UN)return J1;UN=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}J1=e;function e(n,s,i){var r=i&&i.stringify||t,c=1;if(typeof n=="object"&&n!==null){var l=s.length+c;if(l===1)return n;var f=new Array(l);f[0]=r(n);for(var d=1;d<l;d++)f[d]=r(s[d]);return f.join(" ")}if(typeof n!="string")return n;var h=s.length;if(h===0)return n;for(var g="",m=1-c,y=-1,w=n&&n.length||0,v=0;v<w;){if(n.charCodeAt(v)===37&&v+1<w){switch(y=y>-1?y:0,n.charCodeAt(v+1)){case 100:case 102:if(m>=h||s[m]==null)break;y<v&&(g+=n.slice(y,v)),g+=Number(s[m]),y=v+2,v++;break;case 105:if(m>=h||s[m]==null)break;y<v&&(g+=n.slice(y,v)),g+=Math.floor(Number(s[m])),y=v+2,v++;break;case 79:case 111:case 106:if(m>=h||s[m]===void 0)break;y<v&&(g+=n.slice(y,v));var E=typeof s[m];if(E==="string"){g+="'"+s[m]+"'",y=v+2,v++;break}if(E==="function"){g+=s[m].name||"<anonymous>",y=v+2,v++;break}g+=r(s[m]),y=v+2,v++;break;case 115:if(m>=h)break;y<v&&(g+=n.slice(y,v)),g+=String(s[m]),y=v+2,v++;break;case 37:y<v&&(g+=n.slice(y,v)),g+="%",y=v+2,v++,m--;break}++m}++v}return y===-1?n:(y<w&&(g+=n.slice(y)),g)}return J1}var ev,LN;function wH(){if(LN)return ev;LN=1;const t=yH();ev=i;const e=S().console||{},n={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:w,res:w,err:m};function s(A,_){return Array.isArray(A)?A.filter(function(O){return O!=="!stdSerializers.err"}):A===!0?Object.keys(_):!1}function i(A){A=A||{},A.browser=A.browser||{};const _=A.browser.transmit;if(_&&typeof _.send!="function")throw Error("pino: transmit option must have a send function");const D=A.browser.write||e;A.browser.write&&(A.browser.asObject=!0);const O=A.serializers||{},P=s(A.browser.serialize,O);let U=A.browser.serialize;Array.isArray(A.browser.serialize)&&A.browser.serialize.indexOf("!stdSerializers.err")>-1&&(U=!1);const L=["error","fatal","warn","info","debug","trace"];typeof D=="function"&&(D.error=D.fatal=D.warn=D.info=D.debug=D.trace=D),A.enabled===!1&&(A.level="silent");const H=A.level||"info",q=Object.create(D);q.log||(q.log=E),Object.defineProperty(q,"levelVal",{get:R}),Object.defineProperty(q,"level",{get:k,set:F});const $={transmit:_,serialize:P,asObject:A.browser.asObject,levels:L,timestamp:y(A)};q.levels=i.levels,q.level=H,q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=E,q.serializers=O,q._serialize=P,q._stdErrSerialize=U,q.child=K,_&&(q._logEvent=g());function R(){return this.level==="silent"?1/0:this.levels.values[this.level]}function k(){return this._level}function F(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,r($,q,"error","log"),r($,q,"fatal","error"),r($,q,"warn","error"),r($,q,"info","log"),r($,q,"debug","log"),r($,q,"trace","log")}function K(W,j){if(!W)throw new Error("missing bindings for child Pino");j=j||{},P&&W.serializers&&(j.serializers=W.serializers);const X=j.serializers;if(P&&X){var Z=Object.assign({},O,X),ee=A.browser.serialize===!0?Object.keys(Z):P;delete W.serializers,f([W],ee,Z,this._stdErrSerialize)}function ae(oe){this._childLevel=(oe._childLevel|0)+1,this.error=d(oe,W,"error"),this.fatal=d(oe,W,"fatal"),this.warn=d(oe,W,"warn"),this.info=d(oe,W,"info"),this.debug=d(oe,W,"debug"),this.trace=d(oe,W,"trace"),Z&&(this.serializers=Z,this._serialize=ee),_&&(this._logEvent=g([].concat(oe._logEvent.bindings,W)))}return ae.prototype=this,new ae(this)}return q}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=n,i.stdTimeFunctions=Object.assign({},{nullTime:C,epochTime:T,unixTime:N,isoTime:I});function r(A,_,D,O){const P=Object.getPrototypeOf(_);_[D]=_.levelVal>_.levels.values[D]?E:P[D]?P[D]:e[D]||e[O]||E,c(A,_,D)}function c(A,_,D){!A.transmit&&_[D]===E||(_[D]=(function(O){return function(){const U=A.timestamp(),L=new Array(arguments.length),H=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var q=0;q<L.length;q++)L[q]=arguments[q];if(A.serialize&&!A.asObject&&f(L,this._serialize,this.serializers,this._stdErrSerialize),A.asObject?O.call(H,l(this,D,L,U)):O.apply(H,L),A.transmit){const $=A.transmit.level||_.level,R=i.levels.values[$],k=i.levels.values[D];if(k<R)return;h(this,{ts:U,methodLevel:D,methodValue:k,transmitValue:i.levels.values[A.transmit.level||_.level],send:A.transmit.send,val:_.levelVal},L)}}})(_[D]))}function l(A,_,D,O){A._serialize&&f(D,A._serialize,A.serializers,A._stdErrSerialize);const P=D.slice();let U=P[0];const L={};O&&(L.time=O),L.level=i.levels.values[_];let H=(A._childLevel|0)+1;if(H<1&&(H=1),U!==null&&typeof U=="object"){for(;H--&&typeof P[0]=="object";)Object.assign(L,P.shift());U=P.length?t(P.shift(),P):void 0}else typeof U=="string"&&(U=t(P.shift(),P));return U!==void 0&&(L.msg=U),L}function f(A,_,D,O){for(const P in A)if(O&&A[P]instanceof Error)A[P]=i.stdSerializers.err(A[P]);else if(typeof A[P]=="object"&&!Array.isArray(A[P]))for(const U in A[P])_&&_.indexOf(U)>-1&&U in D&&(A[P][U]=D[U](A[P][U]))}function d(A,_,D){return function(){const O=new Array(1+arguments.length);O[0]=_;for(var P=1;P<O.length;P++)O[P]=arguments[P-1];return A[D].apply(this,O)}}function h(A,_,D){const O=_.send,P=_.ts,U=_.methodLevel,L=_.methodValue,H=_.val,q=A._logEvent.bindings;f(D,A._serialize||Object.keys(A.serializers),A.serializers,A._stdErrSerialize===void 0?!0:A._stdErrSerialize),A._logEvent.ts=P,A._logEvent.messages=D.filter(function($){return q.indexOf($)===-1}),A._logEvent.level.label=U,A._logEvent.level.value=L,O(U,A._logEvent,H),A._logEvent=g(q)}function g(A){return{ts:0,messages:[],bindings:A||[],level:{label:"",value:0}}}function m(A){const _={type:A.constructor.name,msg:A.message,stack:A.stack};for(const D in A)_[D]===void 0&&(_[D]=A[D]);return _}function y(A){return typeof A.timestamp=="function"?A.timestamp:A.timestamp===!1?C:T}function w(){return{}}function v(A){return A}function E(){}function C(){return!1}function T(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function I(){return new Date(Date.now()).toISOString()}function S(){function A(_){return typeof _<"u"&&_}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return A(self)||A(window)||A(this)||{}}}return ev}var Nu=wH();const hp=sf(Nu),vH={level:"info"},pp="custom_context",$E=1e3*1024;let bH=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},kN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new bH(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},LD=class{constructor(e,n=$E){this.level=e??"error",this.levelValue=Nu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new kN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Nu.levels.values.error?console.error(e):n===Nu.levels.values.warn?console.warn(e):n===Nu.levels.values.debug?console.debug(e):n===Nu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Pa({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new kN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Pa({extraMetadata:e})),new Blob(n,{type:"application/json"})}},EH=class{constructor(e,n=$E){this.baseChunkLogger=new LD(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),s=document.createElement("a");s.href=n,s.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}},xH=class{constructor(e,n=$E){this.baseChunkLogger=new LD(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var SH=Object.defineProperty,CH=Object.defineProperties,AH=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertySymbols,NH=Object.prototype.hasOwnProperty,TH=Object.prototype.propertyIsEnumerable,jN=(t,e,n)=>e in t?SH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lm=(t,e)=>{for(var n in e||(e={}))NH.call(e,n)&&jN(t,n,e[n]);if(BN)for(var n of BN(e))TH.call(e,n)&&jN(t,n,e[n]);return t},um=(t,e)=>CH(t,AH(e));function gp(t){return um(lm({},t),{level:t?.level||vH.level})}function IH(t,e=pp){return t[e]||""}function DH(t,e,n=pp){return t[n]=e,t}function Ps(t,e=pp){let n="";return typeof t.bindings>"u"?n=IH(t,e):n=t.bindings().context||"",n}function _H(t,e,n=pp){const s=Ps(t,n);return s.trim()?`${s}/${e}`:e}function us(t,e,n=pp){const s=_H(t,e,n),i=t.child({context:s});return DH(i,s,n)}function OH(t){var e,n;const s=new EH((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hp(um(lm({},t.opts),{level:"trace",browser:um(lm({},(n=t.opts)==null?void 0:n.browser),{write:i=>s.write(i)})})),chunkLoggerController:s}}function MH(t){var e;const n=new xH((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hp(um(lm({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function kD(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?OH(t):MH(t)}var RH=Object.defineProperty,PH=(t,e,n)=>e in t?RH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zN=(t,e,n)=>PH(t,typeof e!="symbol"?e+"":e,n);let $H=class extends ll{constructor(e){super(),this.opts=e,zN(this,"protocol","wc"),zN(this,"version",2)}};var UH=Object.defineProperty,LH=(t,e,n)=>e in t?UH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kH=(t,e,n)=>LH(t,e+"",n);let BH=class extends ll{constructor(e,n){super(),this.core=e,this.logger=n,kH(this,"records",new Map)}},jH=class{constructor(e,n){this.logger=e,this.core=n}},zH=class extends ll{constructor(e,n){super(),this.relayer=e,this.logger=n}},HH=class extends ll{constructor(e){super()}},FH=class{constructor(e,n,s,i){this.core=e,this.logger=n,this.name=s}},VH=class extends ll{constructor(e,n){super(),this.relayer=e,this.logger=n}},qH=class extends ll{constructor(e,n){super(),this.core=e,this.logger=n}},WH=class{constructor(e,n,s){this.core=e,this.logger=n,this.store=s}},KH=class{constructor(e,n){this.projectId=e,this.logger=n}},GH=class{constructor(e,n,s){this.core=e,this.logger=n,this.telemetryEnabled=s}};var YH=Object.defineProperty,XH=(t,e,n)=>e in t?YH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HN=(t,e,n)=>XH(t,typeof e!="symbol"?e+"":e,n);let QH=class{constructor(e){this.opts=e,HN(this,"protocol","wc"),HN(this,"version",2)}},ZH=class{constructor(e){this.client=e}};function JH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function BD(t,...e){if(!JH(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function FN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eF(t,e){BD(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const au=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tv=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function tF(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function jD(t){return typeof t=="string"&&(t=tF(t)),BD(t),t}let nF=class{clone(){return this._cloneInto()}};function sF(t){const e=s=>t().update(jD(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function zD(t=32){if(au&&typeof au.getRandomValues=="function")return au.getRandomValues(new Uint8Array(t));if(au&&typeof au.randomBytes=="function")return au.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function iF(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}let rF=class extends nF{constructor(e,n,s,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tv(this.buffer)}update(e){FN(this);const{view:n,buffer:s,blockLen:i}=this;e=jD(e);const r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=tv(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){FN(this),eF(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;iF(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=tv(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.length=i,e.pos=l,e.finished=r,e.destroyed=c,i%n&&e.buffer.set(s),e}};const i0=BigInt(2**32-1),Pb=BigInt(32);function HD(t,e=!1){return e?{h:Number(t&i0),l:Number(t>>Pb&i0)}:{h:Number(t>>Pb&i0)|0,l:Number(t&i0)|0}}function aF(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:r,l:c}=HD(t[i],e);[n[i],s[i]]=[r,c]}return[n,s]}const oF=(t,e)=>BigInt(t>>>0)<<Pb|BigInt(e>>>0),cF=(t,e,n)=>t>>>n,lF=(t,e,n)=>t<<32-n|e>>>n,uF=(t,e,n)=>t>>>n|e<<32-n,fF=(t,e,n)=>t<<32-n|e>>>n,dF=(t,e,n)=>t<<64-n|e>>>n-32,hF=(t,e,n)=>t>>>n-32|e<<64-n,pF=(t,e)=>e,gF=(t,e)=>t,mF=(t,e,n)=>t<<n|e>>>32-n,yF=(t,e,n)=>e<<n|t>>>32-n,wF=(t,e,n)=>e<<n-32|t>>>64-n,vF=(t,e,n)=>t<<n-32|e>>>64-n;function bF(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const EF=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),xF=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,SF=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),CF=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,AF=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),NF=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,Ge={fromBig:HD,split:aF,toBig:oF,shrSH:cF,shrSL:lF,rotrSH:uF,rotrSL:fF,rotrBH:dF,rotrBL:hF,rotr32H:pF,rotr32L:gF,rotlSH:mF,rotlSL:yF,rotlBH:wF,rotlBL:vF,add:bF,add3L:EF,add3H:xF,add4L:SF,add4H:CF,add5H:NF,add5L:AF},[TF,IF]=Ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),bo=new Uint32Array(80),Eo=new Uint32Array(80);let DF=class extends rF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:E}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=E|0}process(e,n){for(let N=0;N<16;N++,n+=4)bo[N]=e.getUint32(n),Eo[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=bo[N-15]|0,S=Eo[N-15]|0,A=Ge.rotrSH(I,S,1)^Ge.rotrSH(I,S,8)^Ge.shrSH(I,S,7),_=Ge.rotrSL(I,S,1)^Ge.rotrSL(I,S,8)^Ge.shrSL(I,S,7),D=bo[N-2]|0,O=Eo[N-2]|0,P=Ge.rotrSH(D,O,19)^Ge.rotrBH(D,O,61)^Ge.shrSH(D,O,6),U=Ge.rotrSL(D,O,19)^Ge.rotrBL(D,O,61)^Ge.shrSL(D,O,6),L=Ge.add4L(_,U,Eo[N-7],Eo[N-16]),H=Ge.add4H(L,A,P,bo[N-7],bo[N-16]);bo[N]=H|0,Eo[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:E,Hh:C,Hl:T}=this;for(let N=0;N<80;N++){const I=Ge.rotrSH(g,m,14)^Ge.rotrSH(g,m,18)^Ge.rotrBH(g,m,41),S=Ge.rotrSL(g,m,14)^Ge.rotrSL(g,m,18)^Ge.rotrBL(g,m,41),A=g&y^~g&v,_=m&w^~m&E,D=Ge.add5L(T,S,_,IF[N],Eo[N]),O=Ge.add5H(D,C,I,A,TF[N],bo[N]),P=D|0,U=Ge.rotrSH(s,i,28)^Ge.rotrBH(s,i,34)^Ge.rotrBH(s,i,39),L=Ge.rotrSL(s,i,28)^Ge.rotrBL(s,i,34)^Ge.rotrBL(s,i,39),H=s&r^s&l^r&l,q=i&c^i&f^c&f;C=v|0,T=E|0,v=y|0,E=w|0,y=g|0,w=m|0,{h:g,l:m}=Ge.add(d|0,h|0,O|0,P|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=Ge.add3L(P,L,q);s=Ge.add3H($,O,U,H),i=$|0}({h:s,l:i}=Ge.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=Ge.add(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=Ge.add(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=Ge.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=Ge.add(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=Ge.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:E}=Ge.add(this.Gh|0,this.Gl|0,v|0,E|0),{h:C,l:T}=Ge.add(this.Hh|0,this.Hl|0,C|0,T|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,E,C,T)}roundClean(){bo.fill(0),Eo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const _F=sF(()=>new DF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UE=BigInt(0),FD=BigInt(1),OF=BigInt(2);function LE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kE(t){if(!LE(t))throw new Error("Uint8Array expected")}function nv(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const MF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function BE(t){kE(t);let e="";for(let n=0;n<t.length;n++)e+=MF[t[n]];return e}function VD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?UE:BigInt("0x"+t)}const pa={_0:48,_9:57,A:65,F:70,a:97,f:102};function VN(t){if(t>=pa._0&&t<=pa._9)return t-pa._0;if(t>=pa.A&&t<=pa.F)return t-(pa.A-10);if(t>=pa.a&&t<=pa.f)return t-(pa.a-10)}function qD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(n);for(let i=0,r=0;i<n;i++,r+=2){const c=VN(t.charCodeAt(r)),l=VN(t.charCodeAt(r+1));if(c===void 0||l===void 0){const f=t[r]+t[r+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+r)}s[i]=c*16+l}return s}function RF(t){return VD(BE(t))}function L0(t){return kE(t),VD(BE(Uint8Array.from(t).reverse()))}function WD(t,e){return qD(t.toString(16).padStart(e*2,"0"))}function $b(t,e){return WD(t,e).reverse()}function ga(t,e,n){let s;if(typeof e=="string")try{s=qD(e)}catch(r){throw new Error(t+" must be hex string or Uint8Array, cause: "+r)}else if(LE(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=s.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return s}function qN(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];kE(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}const sv=t=>typeof t=="bigint"&&UE<=t;function PF(t,e,n){return sv(t)&&sv(e)&&sv(n)&&e<=t&&t<n}function Cd(t,e,n,s){if(!PF(e,n,s))throw new Error("expected valid "+t+": "+n+" <= n < "+s+", got "+e)}function $F(t){let e;for(e=0;t>UE;t>>=FD,e+=1);return e}const UF=t=>(OF<<BigInt(t-1))-FD,LF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||LE(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jE(t,e,n={}){const s=(i,r,c)=>{const l=LF[r];if(typeof l!="function")throw new Error("invalid validator function");const f=t[i];if(!(c&&f===void 0)&&!l(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+r+", got "+f)};for(const[i,r]of Object.entries(e))s(i,r,!1);for(const[i,r]of Object.entries(n))s(i,r,!0);return t}function WN(t){const e=new WeakMap;return(n,...s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t(n,...s);return e.set(n,r),r}}const An=BigInt(0),Zt=BigInt(1),Lc=BigInt(2),kF=BigInt(3),Ub=BigInt(4),KN=BigInt(5),GN=BigInt(8);function mn(t,e){const n=t%e;return n>=An?n:e+n}function BF(t,e,n){if(e<An)throw new Error("invalid exponent, negatives unsupported");if(n<=An)throw new Error("invalid modulus");if(n===Zt)return An;let s=Zt;for(;e>An;)e&Zt&&(s=s*t%n),t=t*t%n,e>>=Zt;return s}function Sr(t,e,n){let s=t;for(;e-- >An;)s*=s,s%=n;return s}function YN(t,e){if(t===An)throw new Error("invert: expected non-zero number");if(e<=An)throw new Error("invert: expected positive modulus, got "+e);let n=mn(t,e),s=e,i=An,r=Zt;for(;n!==An;){const c=s/n,l=s%n,f=i-r*c;s=n,n=l,i=r,r=f}if(s!==Zt)throw new Error("invert: does not exist");return mn(i,e)}function jF(t){const e=(t-Zt)/Lc;let n,s,i;for(n=t-Zt,s=0;n%Lc===An;n/=Lc,s++);for(i=Lc;i<t&&BF(i,e,t)!==t-Zt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(s===1){const c=(t+Zt)/Ub;return function(l,f){const d=l.pow(f,c);if(!l.eql(l.sqr(d),f))throw new Error("Cannot find square root");return d}}const r=(n+Zt)/Lc;return function(c,l){if(c.pow(l,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=s,d=c.pow(c.mul(c.ONE,i),n),h=c.pow(l,r),g=c.pow(l,n);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let m=1;for(let w=c.sqr(g);m<f&&!c.eql(w,c.ONE);m++)w=c.sqr(w);const y=c.pow(d,Zt<<BigInt(f-m-1));d=c.sqr(y),h=c.mul(h,y),g=c.mul(g,d),f=m}return h}}function zF(t){if(t%Ub===kF){const e=(t+Zt)/Ub;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%GN===KN){const e=(t-KN)/GN;return function(n,s){const i=n.mul(s,Lc),r=n.pow(i,e),c=n.mul(s,r),l=n.mul(n.mul(c,Lc),r),f=n.mul(c,n.sub(l,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f}}return jF(t)}const HF=(t,e)=>(mn(t,e)&Zt)===Zt,FF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function VF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=FF.reduce((s,i)=>(s[i]="function",s),e);return jE(t,n)}function qF(t,e,n){if(n<An)throw new Error("invalid exponent, negatives unsupported");if(n===An)return t.ONE;if(n===Zt)return e;let s=t.ONE,i=e;for(;n>An;)n&Zt&&(s=t.mul(s,i)),i=t.sqr(i),n>>=Zt;return s}function WF(t,e){const n=new Array(e.length),s=e.reduce((r,c,l)=>t.is0(c)?r:(n[l]=r,t.mul(r,c)),t.ONE),i=t.inv(s);return e.reduceRight((r,c,l)=>t.is0(c)?r:(n[l]=t.mul(r,n[l]),t.mul(r,c)),i),n}function KD(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function GD(t,e,n=!1,s={}){if(t<=An)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:r}=KD(t,e);if(r>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:r,MASK:UF(i),ZERO:An,ONE:Zt,create:f=>mn(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return An<=f&&f<t},is0:f=>f===An,isOdd:f=>(f&Zt)===Zt,neg:f=>mn(-f,t),eql:(f,d)=>f===d,sqr:f=>mn(f*f,t),add:(f,d)=>mn(f+d,t),sub:(f,d)=>mn(f-d,t),mul:(f,d)=>mn(f*d,t),pow:(f,d)=>qF(l,f,d),div:(f,d)=>mn(f*YN(d,t),t),sqrN:f=>f*f,addN:(f,d)=>f+d,subN:(f,d)=>f-d,mulN:(f,d)=>f*d,inv:f=>YN(f,t),sqrt:s.sqrt||(f=>(c||(c=zF(t)),c(l,f))),invertBatch:f=>WF(l,f),cmov:(f,d,h)=>h?d:f,toBytes:f=>n?$b(f,r):WD(f,r),fromBytes:f=>{if(f.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+f.length);return n?L0(f):RF(f)}});return Object.freeze(l)}const XN=BigInt(0),r0=BigInt(1);function iv(t,e){const n=e.negate();return t?n:e}function YD(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function rv(t,e){YD(t,e);const n=Math.ceil(e/t)+1,s=2**(t-1);return{windows:n,windowSize:s}}function KF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,s)=>{if(!(n instanceof e))throw new Error("invalid point at index "+s)})}function GF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,s)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+s)})}const av=new WeakMap,XD=new WeakMap;function ov(t){return XD.get(t)||1}function YF(t,e){return{constTimeNegate:iv,hasPrecomputes(n){return ov(n)!==1},unsafeLadder(n,s,i=t.ZERO){let r=n;for(;s>XN;)s&r0&&(i=i.add(r)),r=r.double(),s>>=r0;return i},precomputeWindow(n,s){const{windows:i,windowSize:r}=rv(s,e),c=[];let l=n,f=l;for(let d=0;d<i;d++){f=l,c.push(f);for(let h=1;h<r;h++)f=f.add(l),c.push(f);l=f.double()}return c},wNAF(n,s,i){const{windows:r,windowSize:c}=rv(n,e);let l=t.ZERO,f=t.BASE;const d=BigInt(2**n-1),h=2**n,g=BigInt(n);for(let m=0;m<r;m++){const y=m*c;let w=Number(i&d);i>>=g,w>c&&(w-=h,i+=r0);const v=y,E=y+Math.abs(w)-1,C=m%2!==0,T=w<0;w===0?f=f.add(iv(C,s[v])):l=l.add(iv(T,s[E]))}return{p:l,f}},wNAFUnsafe(n,s,i,r=t.ZERO){const{windows:c,windowSize:l}=rv(n,e),f=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let g=0;g<c;g++){const m=g*l;if(i===XN)break;let y=Number(i&f);if(i>>=h,y>l&&(y-=d,i+=r0),y===0)continue;let w=s[m+Math.abs(y)-1];y<0&&(w=w.negate()),r=r.add(w)}return r},getPrecomputes(n,s,i){let r=av.get(s);return r||(r=this.precomputeWindow(s,n),n!==1&&av.set(s,i(r))),r},wNAFCached(n,s,i){const r=ov(n);return this.wNAF(r,this.getPrecomputes(r,n,i),s)},wNAFCachedUnsafe(n,s,i,r){const c=ov(n);return c===1?this.unsafeLadder(n,s,r):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),s,r)},setWindowSize(n,s){YD(s,e),XD.set(n,s),av.delete(n)}}}function XF(t,e,n,s){if(KF(n,t),GF(s,e),n.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,r=$F(BigInt(n.length)),c=r>12?r-3:r>4?r-2:r?2:1,l=(1<<c)-1,f=new Array(l+1).fill(i),d=Math.floor((e.BITS-1)/c)*c;let h=i;for(let g=d;g>=0;g-=c){f.fill(i);for(let y=0;y<s.length;y++){const w=s[y],v=Number(w>>BigInt(g)&BigInt(l));f[v]=f[v].add(n[y])}let m=i;for(let y=f.length-1,w=i;y>0;y--)w=w.add(f[y]),m=m.add(w);if(h=h.add(m),g!==0)for(let y=0;y<c;y++)h=h.double()}return h}function QF(t){return VF(t.Fp),jE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...KD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Gi=BigInt(0),vs=BigInt(1),a0=BigInt(2),ZF=BigInt(8),JF={zip215:!0};function eV(t){const e=QF(t);return jE(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function tV(t){const e=eV(t),{Fp:n,n:s,prehash:i,hash:r,randomBytes:c,nByteLength:l,h:f}=e,d=a0<<BigInt(l*8)-vs,h=n.create,g=GD(e.n,e.nBitLength),m=e.uvRatio||(($,R)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(R))}}catch{return{isValid:!1,value:Gi}}}),y=e.adjustScalarBytes||($=>$),w=e.domain||(($,R,k)=>{if(nv("phflag",k),R.length||k)throw new Error("Contexts/pre-hash are not supported");return $});function v($,R){Cd("coordinate "+$,R,Gi,d)}function E($){if(!($ instanceof N))throw new Error("ExtendedPoint expected")}const C=WN(($,R)=>{const{ex:k,ey:F,ez:K}=$,W=$.is0();R==null&&(R=W?ZF:n.inv(K));const j=h(k*R),X=h(F*R),Z=h(K*R);if(W)return{x:Gi,y:vs};if(Z!==vs)throw new Error("invZ was invalid");return{x:j,y:X}}),T=WN($=>{const{a:R,d:k}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:F,ey:K,ez:W,et:j}=$,X=h(F*F),Z=h(K*K),ee=h(W*W),ae=h(ee*ee),oe=h(X*R),be=h(ee*h(oe+Z)),Ae=h(ae+h(k*h(X*Z)));if(be!==Ae)throw new Error("bad point: equation left != right (1)");const Ne=h(F*K),We=h(W*j);if(Ne!==We)throw new Error("bad point: equation left != right (2)");return!0});class N{constructor(R,k,F,K){this.ex=R,this.ey=k,this.ez=F,this.et=K,v("x",R),v("y",k),v("z",F),v("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof N)throw new Error("extended point not allowed");const{x:k,y:F}=R||{};return v("x",k),v("y",F),new N(k,F,vs,h(k*F))}static normalizeZ(R){const k=n.invertBatch(R.map(F=>F.ez));return R.map((F,K)=>F.toAffine(k[K])).map(N.fromAffine)}static msm(R,k){return XF(N,g,R,k)}_setWindowSize(R){A.setWindowSize(this,R)}assertValidity(){T(this)}equals(R){E(R);const{ex:k,ey:F,ez:K}=this,{ex:W,ey:j,ez:X}=R,Z=h(k*X),ee=h(W*K),ae=h(F*X),oe=h(j*K);return Z===ee&&ae===oe}is0(){return this.equals(N.ZERO)}negate(){return new N(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:R}=e,{ex:k,ey:F,ez:K}=this,W=h(k*k),j=h(F*F),X=h(a0*h(K*K)),Z=h(R*W),ee=k+F,ae=h(h(ee*ee)-W-j),oe=Z+j,be=oe-X,Ae=Z-j,Ne=h(ae*be),We=h(oe*Ae),Qe=h(ae*Ae),xt=h(be*oe);return new N(Ne,We,xt,Qe)}add(R){E(R);const{a:k,d:F}=e,{ex:K,ey:W,ez:j,et:X}=this,{ex:Z,ey:ee,ez:ae,et:oe}=R;if(k===BigInt(-1)){const yn=h((W-K)*(ee+Z)),fs=h((W+K)*(ee-Z)),ns=h(fs-yn);if(ns===Gi)return this.double();const cr=h(j*a0*oe),lr=h(X*a0*ae),St=lr+cr,ai=fs+yn,oi=lr-cr,Wr=h(St*ns),Bi=h(ai*oi),ji=h(St*oi),zi=h(ns*ai);return new N(Wr,Bi,zi,ji)}const be=h(K*Z),Ae=h(W*ee),Ne=h(X*F*oe),We=h(j*ae),Qe=h((K+W)*(Z+ee)-be-Ae),xt=We-Ne,ki=We+Ne,cn=h(Ae-k*be),ii=h(Qe*xt),ri=h(ki*cn),qr=h(Qe*cn),or=h(xt*ki);return new N(ii,ri,or,qr)}subtract(R){return this.add(R.negate())}wNAF(R){return A.wNAFCached(this,R,N.normalizeZ)}multiply(R){const k=R;Cd("scalar",k,vs,s);const{p:F,f:K}=this.wNAF(k);return N.normalizeZ([F,K])[0]}multiplyUnsafe(R,k=N.ZERO){const F=R;return Cd("scalar",F,Gi,s),F===Gi?S:this.is0()||F===vs?this:A.wNAFCachedUnsafe(this,F,N.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return A.unsafeLadder(this,s).is0()}toAffine(R){return C(this,R)}clearCofactor(){const{h:R}=e;return R===vs?this:this.multiplyUnsafe(R)}static fromHex(R,k=!1){const{d:F,a:K}=e,W=n.BYTES;R=ga("pointHex",R,W),nv("zip215",k);const j=R.slice(),X=R[W-1];j[W-1]=X&-129;const Z=L0(j),ee=k?d:n.ORDER;Cd("pointHex.y",Z,Gi,ee);const ae=h(Z*Z),oe=h(ae-vs),be=h(F*ae-K);let{isValid:Ae,value:Ne}=m(oe,be);if(!Ae)throw new Error("Point.fromHex: invalid y coordinate");const We=(Ne&vs)===vs,Qe=(X&128)!==0;if(!k&&Ne===Gi&&Qe)throw new Error("Point.fromHex: x=0 and x_0=1");return Qe!==We&&(Ne=h(-Ne)),N.fromAffine({x:Ne,y:Z})}static fromPrivateKey(R){return O(R).point}toRawBytes(){const{x:R,y:k}=this.toAffine(),F=$b(k,n.BYTES);return F[F.length-1]|=R&vs?128:0,F}toHex(){return BE(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,vs,h(e.Gx*e.Gy)),N.ZERO=new N(Gi,vs,vs,Gi);const{BASE:I,ZERO:S}=N,A=YF(N,l*8);function _($){return mn($,s)}function D($){return _(L0($))}function O($){const R=n.BYTES;$=ga("private key",$,R);const k=ga("hashed private key",r($),2*R),F=y(k.slice(0,R)),K=k.slice(R,2*R),W=D(F),j=I.multiply(W),X=j.toRawBytes();return{head:F,prefix:K,scalar:W,point:j,pointBytes:X}}function P($){return O($).pointBytes}function U($=new Uint8Array,...R){const k=qN(...R);return D(r(w(k,ga("context",$),!!i)))}function L($,R,k={}){$=ga("message",$),i&&($=i($));const{prefix:F,scalar:K,pointBytes:W}=O(R),j=U(k.context,F,$),X=I.multiply(j).toRawBytes(),Z=U(k.context,X,W,$),ee=_(j+Z*K);Cd("signature.s",ee,Gi,s);const ae=qN(X,$b(ee,n.BYTES));return ga("result",ae,n.BYTES*2)}const H=JF;function q($,R,k,F=H){const{context:K,zip215:W}=F,j=n.BYTES;$=ga("signature",$,2*j),R=ga("message",R),k=ga("publicKey",k,j),W!==void 0&&nv("zip215",W),i&&(R=i(R));const X=L0($.slice(j,2*j));let Z,ee,ae;try{Z=N.fromHex(k,W),ee=N.fromHex($.slice(0,j),W),ae=I.multiplyUnsafe(X)}catch{return!1}if(!W&&Z.isSmallOrder())return!1;const oe=U(K,ee.toRawBytes(),Z.toRawBytes(),R);return ee.add(Z.multiplyUnsafe(oe)).subtract(ae).clearCofactor().equals(N.ZERO)}return I._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:L,verify:q,ExtendedPoint:N,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>c(n.BYTES),precompute($=8,R=N.BASE){return R._setWindowSize($),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const zE=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),QN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const nV=BigInt(1),ZN=BigInt(2);BigInt(3);const sV=BigInt(5),iV=BigInt(8);function rV(t){const e=BigInt(10),n=BigInt(20),s=BigInt(40),i=BigInt(80),r=zE,c=t*t%r*t%r,l=Sr(c,ZN,r)*c%r,f=Sr(l,nV,r)*t%r,d=Sr(f,sV,r)*f%r,h=Sr(d,e,r)*d%r,g=Sr(h,n,r)*h%r,m=Sr(g,s,r)*g%r,y=Sr(m,i,r)*m%r,w=Sr(y,i,r)*m%r,v=Sr(w,e,r)*d%r;return{pow_p_5_8:Sr(v,ZN,r)*t%r,b2:c}}function aV(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function oV(t,e){const n=zE,s=mn(e*e*e,n),i=mn(s*s*e,n),r=rV(t*i).pow_p_5_8;let c=mn(t*s*r,n);const l=mn(e*c*c,n),f=c,d=mn(c*QN,n),h=l===t,g=l===mn(-t,n),m=l===mn(-t*QN,n);return h&&(c=f),(g||m)&&(c=d),HF(c,n)&&(c=mn(-c,n)),{isValid:h||g,value:c}}const cV=GD(zE,void 0,!0),lV={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:cV,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:iV,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_F,randomBytes:zD,adjustScalarBytes:aV,uvRatio:oV},QD=tV(lV),uV="EdDSA",fV="JWT",fm=".",Pm="base64url",ZD="utf8",JD="utf8",dV=":",hV="did",pV="key",JN="base58btc",gV="z",mV="K36",yV=32;function HE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function e_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?HE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function t_(t,e){e||(e=t.reduce((i,r)=>i+r.length,0));const n=e_(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return HE(n)}function wV(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,E=0,C=0,T=w.length;C!==T&&w[C]===0;)C++,v++;for(var N=(T-C)*h+1>>>0,I=new Uint8Array(N);C!==T;){for(var S=w[C],A=0,_=N-1;(S!==0||A<E)&&_!==-1;_--,A++)S+=256*I[_]>>>0,I[_]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");E=A,C++}for(var D=N-E;D!==N&&I[D]===0;)D++;for(var O=f.repeat(v);D<N;++D)O+=t.charAt(I[D]);return O}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var E=0,C=0;w[v]===f;)E++,v++;for(var T=(w.length-v)*d+1>>>0,N=new Uint8Array(T);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=T-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var _=T-C;_!==T&&N[_]===0;)_++;for(var D=new Uint8Array(E+(T-_)),O=E;_!==T;)D[O++]=N[_++];return D}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var vV=wV,bV=vV;const n_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},EV=t=>new TextEncoder().encode(t),xV=t=>new TextDecoder().decode(t);let SV=class{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},CV=class{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return s_(this,e)}},AV=class{constructor(e){this.decoders=e}or(e){return s_(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const s_=(t,e)=>new AV({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let NV=class{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new SV(e,n,s),this.decoder=new CV(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const $m=({name:t,prefix:e,encode:n,decode:s})=>new NV(t,e,n,s),mp=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=bV(n,e);return $m({prefix:t,name:e,encode:s,decode:r=>n_(i(r))})},TV=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},IV=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},jn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>$m({prefix:e,name:t,encode(i){return IV(i,s,n)},decode(i){return TV(i,s,n,t)}}),DV=$m({prefix:"\0",name:"identity",encode:t=>xV(t),decode:t=>EV(t)});var _V=Object.freeze({__proto__:null,identity:DV});const OV=jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var MV=Object.freeze({__proto__:null,base2:OV});const RV=jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var PV=Object.freeze({__proto__:null,base8:RV});const $V=mp({prefix:"9",name:"base10",alphabet:"0123456789"});var UV=Object.freeze({__proto__:null,base10:$V});const LV=jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kV=jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var BV=Object.freeze({__proto__:null,base16:LV,base16upper:kV});const jV=jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zV=jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),HV=jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),FV=jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),VV=jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qV=jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WV=jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),KV=jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),GV=jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var YV=Object.freeze({__proto__:null,base32:jV,base32upper:zV,base32pad:HV,base32padupper:FV,base32hex:VV,base32hexupper:qV,base32hexpad:WV,base32hexpadupper:KV,base32z:GV});const XV=mp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),QV=mp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ZV=Object.freeze({__proto__:null,base36:XV,base36upper:QV});const JV=mp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eq=mp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tq=Object.freeze({__proto__:null,base58btc:JV,base58flickr:eq});const nq=jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sq=jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iq=jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rq=jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var aq=Object.freeze({__proto__:null,base64:nq,base64pad:sq,base64url:iq,base64urlpad:rq});const i_=Array.from(""),oq=i_.reduce((t,e,n)=>(t[n]=e,t),[]),cq=i_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function lq(t){return t.reduce((e,n)=>(e+=oq[n],e),"")}function uq(t){const e=[];for(const n of t){const s=cq[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const fq=$m({prefix:"",name:"base256emoji",encode:lq,decode:uq});var dq=Object.freeze({__proto__:null,base256emoji:fq}),hq=r_,eT=128,pq=-128,gq=Math.pow(2,31);function r_(t,e,n){e=e||[],n=n||0;for(var s=n;t>=gq;)e[n++]=t&255|eT,t/=128;for(;t&pq;)e[n++]=t&255|eT,t>>>=7;return e[n]=t|0,r_.bytes=n-s+1,e}var mq=Lb,yq=128,tT=127;function Lb(t,s){var n=0,s=s||0,i=0,r=s,c,l=t.length;do{if(r>=l)throw Lb.bytes=0,new RangeError("Could not decode varint");c=t[r++],n+=i<28?(c&tT)<<i:(c&tT)*Math.pow(2,i),i+=7}while(c>=yq);return Lb.bytes=r-s,n}var wq=Math.pow(2,7),vq=Math.pow(2,14),bq=Math.pow(2,21),Eq=Math.pow(2,28),xq=Math.pow(2,35),Sq=Math.pow(2,42),Cq=Math.pow(2,49),Aq=Math.pow(2,56),Nq=Math.pow(2,63),Tq=function(t){return t<wq?1:t<vq?2:t<bq?3:t<Eq?4:t<xq?5:t<Sq?6:t<Cq?7:t<Aq?8:t<Nq?9:10},Iq={encode:hq,decode:mq,encodingLength:Tq},a_=Iq;const nT=(t,e,n=0)=>(a_.encode(t,e,n),e),sT=t=>a_.encodingLength(t),kb=(t,e)=>{const n=e.byteLength,s=sT(t),i=s+sT(n),r=new Uint8Array(i+n);return nT(t,r,0),nT(n,r,s),r.set(e,i),new Dq(t,n,e,r)};let Dq=class{constructor(e,n,s,i){this.code=e,this.size=n,this.digest=s,this.bytes=i}};const o_=({name:t,code:e,encode:n})=>new _q(t,e,n);let _q=class{constructor(e,n,s){this.name=e,this.code=n,this.encode=s}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?kb(this.code,n):n.then(s=>kb(this.code,s))}else throw Error("Unknown type, must be binary type")}};const c_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Oq=o_({name:"sha2-256",code:18,encode:c_("SHA-256")}),Mq=o_({name:"sha2-512",code:19,encode:c_("SHA-512")});var Rq=Object.freeze({__proto__:null,sha256:Oq,sha512:Mq});const l_=0,Pq="identity",u_=n_,$q=t=>kb(l_,u_(t)),Uq={code:l_,name:Pq,encode:u_,digest:$q};var Lq=Object.freeze({__proto__:null,identity:Uq});new TextEncoder,new TextDecoder;const iT={..._V,...MV,...PV,...UV,...BV,...YV,...ZV,...tq,...aq,...dq};({...Rq,...Lq});function f_(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const rT=f_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),cv=f_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=e_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),d_={utf8:rT,"utf-8":rT,hex:iT.base16,latin1:cv,ascii:cv,binary:cv,...iT};function Um(t,e="utf8"){const n=d_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function uf(t,e="utf8"){const n=d_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?HE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function aT(t){return nl(Um(uf(t,Pm),ZD))}function dm(t){return Um(uf(Pa(t),ZD),Pm)}function h_(t){const e=uf(mV,JN),n=gV+Um(t_([e,t]),JN);return[hV,pV,n].join(dV)}function kq(t){return Um(t,Pm)}function Bq(t){return uf(t,Pm)}function jq(t){return uf([dm(t.header),dm(t.payload)].join(fm),JD)}function zq(t){return[dm(t.header),dm(t.payload),kq(t.signature)].join(fm)}function Bb(t){const e=t.split(fm),n=aT(e[0]),s=aT(e[1]),i=Bq(e[2]),r=uf(e.slice(0,2).join(fm),JD);return{header:n,payload:s,signature:i,data:r}}function oT(t=zD(yV)){const e=QD.getPublicKey(t);return{secretKey:t_([t,e]),publicKey:e}}async function Hq(t,e,n,s,i=we.fromMiliseconds(Date.now())){const r={alg:uV,typ:fV},c=h_(s.publicKey),l=i+n,f={iss:c,sub:t,aud:e,iat:i,exp:l},d=jq({header:r,payload:f}),h=QD.sign(d,s.secretKey.slice(0,32));return zq({header:r,payload:f,signature:h})}var cT=function(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},Fq=(function(){function t(e,n,s){this.name=e,this.version=n,this.os=s,this.type="browser"}return t})(),Vq=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),qq=(function(){function t(e,n,s,i){this.name=e,this.version=n,this.os=s,this.bot=i,this.type="bot-device"}return t})(),Wq=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),Kq=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),Gq=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Yq=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,lT=3,Xq=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Gq]],uT=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Qq(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Kq:typeof navigator<"u"?Jq(navigator.userAgent):tW()}function Zq(t){return t!==""&&Xq.reduce(function(e,n){var s=n[0],i=n[1];if(e)return e;var r=i.exec(t);return!!r&&[s,r]},!1)}function Jq(t){var e=Zq(t);if(!e)return null;var n=e[0],s=e[1];if(n==="searchbot")return new Wq;var i=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);i?i.length<lT&&(i=cT(cT([],i,!0),nW(lT-i.length),!0)):i=[];var r=i.join("."),c=eW(t),l=Yq.exec(t);return l&&l[1]?new qq(n,r,c,l[1]):new Fq(n,r,c)}function eW(t){for(var e=0,n=uT.length;e<n;e++){var s=uT[e],i=s[0],r=s[1],c=r.exec(t);if(c)return i}return null}function tW(){var t=typeof process<"u"&&process.version;return t?new Vq(process.version.slice(1)):null}function nW(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var _t={},fT;function p_(){if(fT)return _t;fT=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.getLocalStorage=_t.getLocalStorageOrThrow=_t.getCrypto=_t.getCryptoOrThrow=_t.getLocation=_t.getLocationOrThrow=_t.getNavigator=_t.getNavigatorOrThrow=_t.getDocument=_t.getDocumentOrThrow=_t.getFromWindowOrThrow=_t.getFromWindow=void 0;function t(m){let y;return typeof window<"u"&&typeof window[m]<"u"&&(y=window[m]),y}_t.getFromWindow=t;function e(m){const y=t(m);if(!y)throw new Error(`${m} is not defined in Window`);return y}_t.getFromWindowOrThrow=e;function n(){return e("document")}_t.getDocumentOrThrow=n;function s(){return t("document")}_t.getDocument=s;function i(){return e("navigator")}_t.getNavigatorOrThrow=i;function r(){return t("navigator")}_t.getNavigator=r;function c(){return e("location")}_t.getLocationOrThrow=c;function l(){return t("location")}_t.getLocation=l;function f(){return e("crypto")}_t.getCryptoOrThrow=f;function d(){return t("crypto")}_t.getCrypto=d;function h(){return e("localStorage")}_t.getLocalStorageOrThrow=h;function g(){return t("localStorage")}return _t.getLocalStorage=g,_t}var $a=p_(),Ad={},dT;function sW(){if(dT)return Ad;dT=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.getWindowMetadata=void 0;const t=p_();function e(){let n,s;try{n=t.getDocumentOrThrow(),s=t.getLocationOrThrow()}catch{return null}function i(){const y=n.getElementsByTagName("link"),w=[];for(let v=0;v<y.length;v++){const E=y[v],C=E.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const T=E.getAttribute("href");if(T)if(T.toLowerCase().indexOf("https:")===-1&&T.toLowerCase().indexOf("http:")===-1&&T.indexOf("//")!==0){let N=s.protocol+"//"+s.host;if(T.indexOf("/")===0)N+=T;else{const I=s.pathname.split("/");I.pop();const S=I.join("/");N+=S+"/"+T}w.push(N)}else if(T.indexOf("//")===0){const N=s.protocol+T;w.push(N)}else w.push(T)}}return w}function r(...y){const w=n.getElementsByTagName("meta");for(let v=0;v<w.length;v++){const E=w[v],C=["itemprop","property","name"].map(T=>E.getAttribute(T)).filter(T=>T?y.includes(T):!1);if(C.length&&C){const T=E.getAttribute("content");if(T)return T}}return""}function c(){let y=r("name","og:site_name","og:title","twitter:title");return y||(y=n.title),y}function l(){return r("description","og:description","twitter:description","keywords")}const f=c(),d=l(),h=s.origin,g=i();return{description:d,url:h,icons:g,name:f}}return Ad.getWindowMetadata=e,Ad}var iW=sW();function Ih(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function jb(t){return Ih(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const g_="2.31.0";let lv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${g_}`},Lm=class zb extends Error{constructor(e,n={}){const s=n.cause instanceof zb?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof zb&&n.cause.docsPath||n.docsPath,r=lv.getDocsUrl?.({...n,docsPath:i}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...s?[`Details: ${s}`]:[],...lv.version?[`Version: ${lv.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=g_}walk(e){return m_(this,e)}};function m_(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?m_(t.cause,e):e?null:t}let y_=class extends Lm{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function ff(t,{dir:e,size:n=32}={}){return typeof t=="string"?rW(t,{dir:e,size:n}):aW(t,{dir:e,size:n})}function rW(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new y_({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function aW(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new y_({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=e==="right";s[r?i:n-i-1]=t[r?i:t.length-i-1]}return s}let oW=class extends Lm{constructor({max:e,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},cW=class extends Lm{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function df(t,{size:e}){if(jb(t)>e)throw new cW({givenSize:jb(t),maxSize:e})}function Hb(t,e={}){const{signed:n}=e;e.size&&df(t,{size:e.size});const s=BigInt(t);if(!n)return s;const i=(t.length-2)/2,r=(1n<<BigInt(i)*8n-1n)-1n;return s<=r?s:s-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function lW(t,e={}){return Number(Hb(t,e))}const uW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fb(t,e={}){return typeof t=="number"||typeof t=="bigint"?v_(t,e):typeof t=="string"?hW(t,e):typeof t=="boolean"?fW(t,e):w_(t,e)}function fW(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(df(n,{size:e.size}),ff(n,{size:e.size})):n}function w_(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=uW[t[i]];const s=`0x${n}`;return typeof e.size=="number"?(df(s,{size:e.size}),ff(s,{dir:"right",size:e.size})):s}function v_(t,e={}){const{signed:n,size:s}=e,i=BigInt(t);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<c){const f=typeof t=="bigint"?"n":"";throw new oW({max:r?`${r}${f}`:void 0,min:`${c}${f}`,signed:n,size:s,value:`${t}${f}`})}const l=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?ff(l,{size:s}):l}const dW=new TextEncoder;function hW(t,e={}){const n=dW.encode(t);return w_(n,e)}const pW=new TextEncoder;function gW(t,e={}){return typeof t=="number"||typeof t=="bigint"?yW(t,e):typeof t=="boolean"?mW(t,e):Ih(t)?b_(t,e):E_(t,e)}function mW(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(df(n,{size:e.size}),ff(n,{size:e.size})):n}const ma={zero:48,nine:57,A:65,F:70,a:97,f:102};function hT(t){if(t>=ma.zero&&t<=ma.nine)return t-ma.zero;if(t>=ma.A&&t<=ma.F)return t-(ma.A-10);if(t>=ma.a&&t<=ma.f)return t-(ma.a-10)}function b_(t,e={}){let n=t;e.size&&(df(n,{size:e.size}),n=ff(n,{dir:"right",size:e.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,r=new Uint8Array(i);for(let c=0,l=0;c<i;c++){const f=hT(s.charCodeAt(l++)),d=hT(s.charCodeAt(l++));if(f===void 0||d===void 0)throw new Lm(`Invalid byte sequence ("${s[l-2]}${s[l-1]}" in "${s}").`);r[c]=f*16+d}return r}function yW(t,e){const n=v_(t,e);return b_(n)}function E_(t,e={}){const n=pW.encode(t);return typeof e.size=="number"?(df(n,{size:e.size}),ff(n,{dir:"right",size:e.size})):n}const o0=BigInt(2**32-1),pT=BigInt(32);function wW(t,e=!1){return e?{h:Number(t&o0),l:Number(t>>pT&o0)}:{h:Number(t>>pT&o0)|0,l:Number(t&o0)|0}}function vW(t,e=!1){const n=t.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let r=0;r<n;r++){const{h:c,l}=wW(t[r],e);[s[r],i[r]]=[c,l]}return[s,i]}const bW=(t,e,n)=>t<<n|e>>>32-n,EW=(t,e,n)=>e<<n|t>>>32-n,xW=(t,e,n)=>e<<n-32|t>>>64-n,SW=(t,e,n)=>t<<n-32|e>>>64-n,ou=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function CW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Dh(t,...e){if(!CW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fle(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");hm(t.outputLen),hm(t.blockLen)}function gT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function AW(t,e){Dh(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function NW(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function x_(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function dle(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function hle(t,e){return t<<32-e|t>>>e}const TW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function IW(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function DW(t){for(let e=0;e<t.length;e++)t[e]=IW(t[e]);return t}const mT=TW?t=>t:DW;function _W(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function S_(t){return typeof t=="string"&&(t=_W(t)),Dh(t),t}function ple(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];Dh(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}class OW{}function MW(t){const e=s=>t().update(S_(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gle(t=32){if(ou&&typeof ou.getRandomValues=="function")return ou.getRandomValues(new Uint8Array(t));if(ou&&typeof ou.randomBytes=="function")return Uint8Array.from(ou.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const RW=BigInt(0),Nd=BigInt(1),PW=BigInt(2),$W=BigInt(7),UW=BigInt(256),LW=BigInt(113),C_=[],A_=[],N_=[];for(let t=0,e=Nd,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],C_.push(2*(5*s+n)),A_.push((t+1)*(t+2)/2%64);let i=RW;for(let r=0;r<7;r++)e=(e<<Nd^(e>>$W)*LW)%UW,e&PW&&(i^=Nd<<(Nd<<BigInt(r))-Nd);N_.push(i)}const T_=vW(N_,!0),kW=T_[0],BW=T_[1],yT=(t,e,n)=>n>32?xW(t,e,n):bW(t,e,n),wT=(t,e,n)=>n>32?SW(t,e,n):EW(t,e,n);function jW(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,f=(c+2)%10,d=n[f],h=n[f+1],g=yT(d,h,1)^n[l],m=wT(d,h,1)^n[l+1];for(let y=0;y<50;y+=10)t[c+y]^=g,t[c+y+1]^=m}let i=t[2],r=t[3];for(let c=0;c<24;c++){const l=A_[c],f=yT(i,r,l),d=wT(i,r,l),h=C_[c];i=t[h],r=t[h+1],t[h]=f,t[h+1]=d}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=kW[s],t[1]^=BW[s]}x_(n)}class FE extends OW{constructor(e,n,s,i=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=r,hm(s),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=NW(this.state)}clone(){return this._cloneInto()}keccak(){mT(this.state32),jW(this.state32,this.rounds),mT(this.state32),this.posOut=0,this.pos=0}update(e){gT(this),e=S_(e),Dh(e);const{blockLen:n,state:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(n-this.pos,i-r);for(let l=0;l<c;l++)s[this.pos++]^=e[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:i}=this;e[s]^=n,(n&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){gT(this,!1),Dh(e),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,r=e.length;i<r;){this.posOut>=s&&this.keccak();const c=Math.min(s-this.posOut,r-i);e.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return hm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(AW(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,x_(this.state)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:i,rounds:r,enableXOF:c}=this;return e||(e=new FE(n,s,i,c,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const zW=(t,e,n)=>MW(()=>new FE(e,t,n)),HW=zW(1,136,256/8);function I_(t,e){const n=e||"hex",s=HW(Ih(t,{strict:!1})?gW(t):t);return n==="bytes"?s:Fb(s)}let FW=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}};const uv=new FW(8192);function VW(t,e){if(uv.has(`${t}.${e}`))return uv.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),s=I_(E_(n),"bytes"),i=n.split("");for(let c=0;c<40;c+=2)s[c>>1]>>4>=8&&i[c]&&(i[c]=i[c].toUpperCase()),(s[c>>1]&15)>=8&&i[c+1]&&(i[c+1]=i[c+1].toUpperCase());const r=`0x${i.join("")}`;return uv.set(`${t}.${e}`,r),r}function qW(t){const e=I_(`0x${t.substring(4)}`).substring(26);return VW(`0x${e}`)}async function WW({hash:t,signature:e}){const n=Ih(t)?t:Fb(t),{secp256k1:s}=await Sh(async()=>{const{secp256k1:c}=await import("./secp256k1-DudR3xwp.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:h,v:g,yParity:m}=e,y=Number(m??g),w=vT(y);return new s.Signature(Hb(d),Hb(h)).addRecoveryBit(w)}const c=Ih(e)?e:Fb(e);if(jb(c)!==65)throw new Error("invalid signature length");const l=lW(`0x${c.slice(130)}`),f=vT(l);return s.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function vT(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function KW({hash:t,signature:e}){return qW(await WW({hash:t,signature:e}))}function GW(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){const h=t.charAt(d),g=h.charCodeAt(0);if(e[g]!==255)throw new TypeError(h+" is ambiguous");e[g]=d}const n=t.length,s=t.charAt(0),i=Math.log(n)/Math.log(256),r=Math.log(256)/Math.log(n);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let h=0,g=0,m=0;const y=d.length;for(;m!==y&&d[m]===0;)m++,h++;const w=(y-m)*r+1>>>0,v=new Uint8Array(w);for(;m!==y;){let T=d[m],N=0;for(let I=w-1;(T!==0||N<g)&&I!==-1;I--,N++)T+=256*v[I]>>>0,v[I]=T%n>>>0,T=T/n>>>0;if(T!==0)throw new Error("Non-zero carry");g=N,m++}let E=w-g;for(;E!==w&&v[E]===0;)E++;let C=s.repeat(h);for(;E<w;++E)C+=t.charAt(v[E]);return C}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let h=0,g=0,m=0;for(;d[h]===s;)g++,h++;const y=(d.length-h)*i+1>>>0,w=new Uint8Array(y);for(;h<d.length;){const T=d.charCodeAt(h);if(T>255)return;let N=e[T];if(N===255)return;let I=0;for(let S=y-1;(N!==0||I<m)&&S!==-1;S--,I++)N+=n*w[S]>>>0,w[S]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,h++}let v=y-m;for(;v!==y&&w[v]===0;)v++;const E=new Uint8Array(g+(y-v));let C=g;for(;v!==y;)E[C++]=w[v++];return E}function f(d){const h=l(d);if(h)return h;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:l,decode:f}}var YW="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hf=GW(YW);function XW(t){const e=t.length;let n=0,s=0;for(;s<e;){let i=t.charCodeAt(s++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&s<e){const r=t.charCodeAt(s);(r&64512)===56320&&(++s,i=((i&1023)<<10)+(r&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function QW(t,e,n){const s=t.length;let i=n,r=0;for(;r<s;){let c=t.charCodeAt(r++);if((c&4294967168)===0){e[i++]=c;continue}else if((c&4294965248)===0)e[i++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&r<s){const l=t.charCodeAt(r);(l&64512)===56320&&(++r,c=((c&1023)<<10)+(l&1023)+65536)}(c&4294901760)===0?(e[i++]=c>>12&15|224,e[i++]=c>>6&63|128):(e[i++]=c>>18&7|240,e[i++]=c>>12&63|128,e[i++]=c>>6&63|128)}e[i++]=c&63|128}}const ZW=new TextEncoder,JW=50;function eK(t,e,n){ZW.encodeInto(t,e.subarray(n))}function tK(t,e,n){t.length>JW?eK(t,e,n):QW(t,e,n)}const nK=4096;function D_(t,e,n){let s=e;const i=s+n,r=[];let c="";for(;s<i;){const l=t[s++];if((l&128)===0)r.push(l);else if((l&224)===192){const f=t[s++]&63;r.push((l&31)<<6|f)}else if((l&240)===224){const f=t[s++]&63,d=t[s++]&63;r.push((l&31)<<12|f<<6|d)}else if((l&248)===240){const f=t[s++]&63,d=t[s++]&63,h=t[s++]&63;let g=(l&7)<<18|f<<12|d<<6|h;g>65535&&(g-=65536,r.push(g>>>10&1023|55296),g=56320|g&1023),r.push(g)}else r.push(l);r.length>=nK&&(c+=String.fromCharCode(...r),r.length=0)}return r.length>0&&(c+=String.fromCharCode(...r)),c}const sK=new TextDecoder,iK=200;function rK(t,e,n){const s=t.subarray(e,e+n);return sK.decode(s)}function aK(t,e,n){return n>iK?rK(t,e,n):D_(t,e,n)}class c0{constructor(e,n){this.type=e,this.data=n}}class Ys extends Error{constructor(e){super(e);const n=Object.create(Ys.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ys.name})}}const Td=4294967295;function oK(t,e,n){const s=n/4294967296,i=n;t.setUint32(e,s),t.setUint32(e+4,i)}function __(t,e,n){const s=Math.floor(n/4294967296),i=n;t.setUint32(e,s),t.setUint32(e+4,i)}function O_(t,e){const n=t.getInt32(e),s=t.getUint32(e+4);return n*4294967296+s}function cK(t,e){const n=t.getUint32(e),s=t.getUint32(e+4);return n*4294967296+s}const lK=-1,uK=4294967296-1,fK=17179869184-1;function dK({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=fK)if(e===0&&t<=uK){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,s=t&4294967295,i=new Uint8Array(8),r=new DataView(i.buffer);return r.setUint32(0,e<<2|n&3),r.setUint32(4,s),i}else{const n=new Uint8Array(12),s=new DataView(n.buffer);return s.setUint32(0,e),__(s,4,t),n}}function hK(t){const e=t.getTime(),n=Math.floor(e/1e3),s=(e-n*1e3)*1e6,i=Math.floor(s/1e9);return{sec:n+i,nsec:s-i*1e9}}function pK(t){if(t instanceof Date){const e=hK(t);return dK(e)}else return null}function gK(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),s=e.getUint32(4),i=(n&3)*4294967296+s,r=n>>>2;return{sec:i,nsec:r}}case 12:{const n=O_(e,4),s=e.getUint32(0);return{sec:n,nsec:s}}default:throw new Ys(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function mK(t){const e=gK(t);return new Date(e.sec*1e3+e.nsec/1e6)}const yK={type:lK,encode:pK,decode:mK};class pm{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(yK)}register({type:e,encode:n,decode:s}){if(e>=0)this.encoders[e]=n,this.decoders[e]=s;else{const i=-1-e;this.builtInEncoders[i]=n,this.builtInDecoders[i]=s}}tryToEncode(e,n){for(let s=0;s<this.builtInEncoders.length;s++){const i=this.builtInEncoders[s];if(i!=null){const r=i(e,n);if(r!=null){const c=-1-s;return new c0(c,r)}}}for(let s=0;s<this.encoders.length;s++){const i=this.encoders[s];if(i!=null){const r=i(e,n);if(r!=null){const c=s;return new c0(c,r)}}}return e instanceof c0?e:null}decode(e,n,s){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(e,n,s):new c0(n,e)}}pm.defaultCodec=new pm;function wK(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Vb(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):wK(t)?new Uint8Array(t):Uint8Array.from(t)}const vK=100,bK=2048;let EK=class M_{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??pm.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??vK,this.initialBufferSize=e?.initialBufferSize??bK,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new M_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),s=new Uint8Array(n),i=new DataView(n);s.set(this.bytes),this.view=i,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const s=XW(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),tK(e,this.bytes,this.pos),this.pos+=s}encodeObject(e,n){const s=this.extensionCodec.tryToEncode(e,this.context);if(s!=null)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const s=Vb(e);this.writeU8a(s)}encodeArray(e,n){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else if(s<4294967296)this.writeU8(221),this.writeU32(s);else throw new Error(`Too large array: ${s}`);for(const i of e)this.doEncode(i,n+1)}countWithoutUndefined(e,n){let s=0;for(const i of n)e[i]!==void 0&&s++;return s}encodeMap(e,n){const s=Object.keys(e);this.sortKeys&&s.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const r of s){const c=e[r];this.ignoreUndefined&&c===void 0||(this.encodeString(r),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const s=e.data(this.pos+6),i=s.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(s);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),oK(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),__(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function xK(t,e){return new EK(e).encodeSharedRef(t)}function fv(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const SK=16,CK=16;class AK{constructor(e=SK,n=CK){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let s=0;s<this.maxKeyLength;s++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,s){const i=this.caches[s-1];e:for(const r of i){const c=r.bytes;for(let l=0;l<s;l++)if(c[l]!==e[n+l])continue e;return r.str}return null}store(e,n){const s=this.caches[e.length-1],i={bytes:e,str:n};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=i:s.push(i)}decode(e,n,s){const i=this.find(e,n,s);if(i!=null)return this.hit++,i;this.miss++;const r=D_(e,n,s),c=Uint8Array.prototype.slice.call(e,n,n+s);return this.store(c,r),r}}const qb="array",th="map_key",R_="map_value",NK=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ys("The type of key must be string or number but "+typeof t)};class TK{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=qb,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=th,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===qb){const s=e;s.size=0,s.array=void 0,s.position=0,s.type=void 0}if(e.type===th||e.type===R_){const s=e;s.size=0,s.map=void 0,s.readCount=0,s.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Id=-1,VE=new DataView(new ArrayBuffer(0)),IK=new Uint8Array(VE.buffer);try{VE.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const bT=new RangeError("Insufficient data"),DK=new AK;let _K=class P_{constructor(e){this.totalPos=0,this.pos=0,this.view=VE,this.bytes=IK,this.headByte=Id,this.stack=new TK,this.entered=!1,this.extensionCodec=e?.extensionCodec??pm.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Td,this.maxBinLength=e?.maxBinLength??Td,this.maxArrayLength=e?.maxArrayLength??Td,this.maxMapLength=e?.maxMapLength??Td,this.maxExtLength=e?.maxExtLength??Td,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:DK,this.mapKeyConverter=e?.mapKeyConverter??NK}clone(){return new P_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Id,this.stack.reset()}setBuffer(e){const n=Vb(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Id&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),s=Vb(e),i=new Uint8Array(n.length+s.length);i.set(n),i.set(s,n.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:s}=this;return new RangeError(`Extra ${n.byteLength-s} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,s;for await(const l of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{s=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:i,pos:r,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${fv(i)} at ${c} (${r} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let s=n,i=-1;for await(const r of e){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(r),s&&(i=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=e-160;n=this.decodeString(i,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ys(`Unrecognized type byte: ${fv(e)}`);this.complete();const s=this.stack;for(;s.length>0;){const i=s.top();if(i.type===qb)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,s.release(i);else continue e;else if(i.type===th){if(n==="__proto__")throw new Ys("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=R_;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,s.release(i);else{i.key=null,i.type=th;continue e}}return n}}readHeadByte(){return this.headByte===Id&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Id}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ys(`Unrecognized array type byte: ${fv(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ys(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ys(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new Ys(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw bT;const s=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,s,e):i=aK(this.bytes,s,e),this.pos+=n+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===th:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ys(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw bT;const s=this.pos+n,i=this.bytes.subarray(s,s+e);return this.pos+=n+e,i}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ys(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+n),i=this.decodeBinary(e,n+1);return this.extensionCodec.decode(i,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=cK(this.view,this.pos);return this.pos+=8,e}readI64(){const e=O_(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function OK(t,e){return new _K(e).decode(t)}function qE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function $_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function nh(t,e){e||(e=t.reduce((i,r)=>i+r.length,0));const n=$_(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return qE(n)}function MK(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,E=0,C=0,T=w.length;C!==T&&w[C]===0;)C++,v++;for(var N=(T-C)*h+1>>>0,I=new Uint8Array(N);C!==T;){for(var S=w[C],A=0,_=N-1;(S!==0||A<E)&&_!==-1;_--,A++)S+=256*I[_]>>>0,I[_]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");E=A,C++}for(var D=N-E;D!==N&&I[D]===0;)D++;for(var O=f.repeat(v);D<N;++D)O+=t.charAt(I[D]);return O}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var E=0,C=0;w[v]===f;)E++,v++;for(var T=(w.length-v)*d+1>>>0,N=new Uint8Array(T);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=T-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var _=T-C;_!==T&&N[_]===0;)_++;for(var D=new Uint8Array(E+(T-_)),O=E;_!==T;)D[O++]=N[_++];return D}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var RK=MK,PK=RK;const $K=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},UK=t=>new TextEncoder().encode(t),LK=t=>new TextDecoder().decode(t);class kK{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class BK{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return U_(this,e)}}class jK{constructor(e){this.decoders=e}or(e){return U_(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const U_=(t,e)=>new jK({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class zK{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new kK(e,n,s),this.decoder=new BK(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const km=({name:t,prefix:e,encode:n,decode:s})=>new zK(t,e,n,s),yp=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=PK(n,e);return km({prefix:t,name:e,encode:s,decode:r=>$K(i(r))})},HK=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},FK=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},zn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>km({prefix:e,name:t,encode(i){return FK(i,s,n)},decode(i){return HK(i,s,n,t)}}),VK=km({prefix:"\0",name:"identity",encode:t=>LK(t),decode:t=>UK(t)}),qK=Object.freeze(Object.defineProperty({__proto__:null,identity:VK},Symbol.toStringTag,{value:"Module"})),WK=zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),KK=Object.freeze(Object.defineProperty({__proto__:null,base2:WK},Symbol.toStringTag,{value:"Module"})),GK=zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),YK=Object.freeze(Object.defineProperty({__proto__:null,base8:GK},Symbol.toStringTag,{value:"Module"})),XK=yp({prefix:"9",name:"base10",alphabet:"0123456789"}),QK=Object.freeze(Object.defineProperty({__proto__:null,base10:XK},Symbol.toStringTag,{value:"Module"})),ZK=zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),JK=zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eG=Object.freeze(Object.defineProperty({__proto__:null,base16:ZK,base16upper:JK},Symbol.toStringTag,{value:"Module"})),tG=zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nG=zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sG=zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iG=zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rG=zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aG=zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oG=zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cG=zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lG=zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),uG=Object.freeze(Object.defineProperty({__proto__:null,base32:tG,base32hex:rG,base32hexpad:oG,base32hexpadupper:cG,base32hexupper:aG,base32pad:sG,base32padupper:iG,base32upper:nG,base32z:lG},Symbol.toStringTag,{value:"Module"})),fG=yp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dG=yp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),hG=Object.freeze(Object.defineProperty({__proto__:null,base36:fG,base36upper:dG},Symbol.toStringTag,{value:"Module"})),pG=yp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gG=yp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mG=Object.freeze(Object.defineProperty({__proto__:null,base58btc:pG,base58flickr:gG},Symbol.toStringTag,{value:"Module"})),yG=zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wG=zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vG=zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bG=zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),EG=Object.freeze(Object.defineProperty({__proto__:null,base64:yG,base64pad:wG,base64url:vG,base64urlpad:bG},Symbol.toStringTag,{value:"Module"})),L_=Array.from(""),xG=L_.reduce((t,e,n)=>(t[n]=e,t),[]),SG=L_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function CG(t){return t.reduce((e,n)=>(e+=xG[n],e),"")}function AG(t){const e=[];for(const n of t){const s=SG[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const NG=km({prefix:"",name:"base256emoji",encode:CG,decode:AG}),TG=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:NG},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ET={...qK,...KK,...YK,...QK,...eG,...uG,...hG,...mG,...EG,...TG};function k_(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const xT=k_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),dv=k_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=$_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),B_={utf8:xT,"utf-8":xT,hex:ET.base16,latin1:dv,ascii:dv,binary:dv,...ET};function Oi(t,e="utf8"){const n=B_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Ms(t,e="utf8"){const n=B_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const IG={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var hv,ST;function j_(){if(ST)return hv;ST=1;const t="Input must be an string, Buffer or Uint8Array";function e(c){let l;if(c instanceof Uint8Array)l=c;else if(typeof c=="string")l=new TextEncoder().encode(c);else throw new Error(t);return l}function n(c){return Array.prototype.map.call(c,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function s(c){return(4294967296+c).toString(16).substring(1)}function i(c,l,f){let d=`
`+c+" = ";for(let h=0;h<l.length;h+=2){if(f===32)d+=s(l[h]).toUpperCase(),d+=" ",d+=s(l[h+1]).toUpperCase();else if(f===64)d+=s(l[h+1]).toUpperCase(),d+=s(l[h]).toUpperCase();else throw new Error("Invalid size "+f);h%6===4?d+=`
`+new Array(c.length+4).join(" "):h<l.length-2&&(d+=" ")}console.log(d)}function r(c,l,f){let d=new Date().getTime();const h=new Uint8Array(l);for(let m=0;m<l;m++)h[m]=m%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let m=0;m<f;m++){const y=c(h),w=new Date().getTime(),v=w-d;d=w,console.log("Hashed in "+v+"ms: "+y.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(v/1e3)*100)/100+" MB PER SECOND")}}return hv={normalizeInput:e,toHex:n,debugPrint:i,testSpeed:r},hv}var pv,CT;function DG(){if(CT)return pv;CT=1;const t=j_();function e(C,T,N){const I=C[T]+C[N];let S=C[T+1]+C[N+1];I>=4294967296&&S++,C[T]=I,C[T+1]=S}function n(C,T,N,I){let S=C[T]+N;N<0&&(S+=4294967296);let A=C[T+1]+I;S>=4294967296&&A++,C[T]=S,C[T+1]=A}function s(C,T){return C[T]^C[T+1]<<8^C[T+2]<<16^C[T+3]<<24}function i(C,T,N,I,S,A){const _=d[S],D=d[S+1],O=d[A],P=d[A+1];e(f,C,T),n(f,C,_,D);let U=f[I]^f[C],L=f[I+1]^f[C+1];f[I]=L,f[I+1]=U,e(f,N,I),U=f[T]^f[N],L=f[T+1]^f[N+1],f[T]=U>>>24^L<<8,f[T+1]=L>>>24^U<<8,e(f,C,T),n(f,C,O,P),U=f[I]^f[C],L=f[I+1]^f[C+1],f[I]=U>>>16^L<<16,f[I+1]=L>>>16^U<<16,e(f,N,I),U=f[T]^f[N],L=f[T+1]^f[N+1],f[T]=L>>>31^U<<1,f[T+1]=U>>>31^L<<1}const r=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(c.map(function(C){return C*2})),f=new Uint32Array(32),d=new Uint32Array(32);function h(C,T){let N=0;for(N=0;N<16;N++)f[N]=C.h[N],f[N+16]=r[N];for(f[24]=f[24]^C.t,f[25]=f[25]^C.t/4294967296,T&&(f[28]=~f[28],f[29]=~f[29]),N=0;N<32;N++)d[N]=s(C.b,4*N);for(N=0;N<12;N++)i(0,8,16,24,l[N*16+0],l[N*16+1]),i(2,10,18,26,l[N*16+2],l[N*16+3]),i(4,12,20,28,l[N*16+4],l[N*16+5]),i(6,14,22,30,l[N*16+6],l[N*16+7]),i(0,10,20,30,l[N*16+8],l[N*16+9]),i(2,12,22,24,l[N*16+10],l[N*16+11]),i(4,14,16,26,l[N*16+12],l[N*16+13]),i(6,8,18,28,l[N*16+14],l[N*16+15]);for(N=0;N<16;N++)C.h[N]=C.h[N]^f[N]^f[N+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function m(C,T,N,I){if(C===0||C>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(T&&T.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(N&&N.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(I&&I.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const S={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:C};g.fill(0),g[0]=C,T&&(g[1]=T.length),g[2]=1,g[3]=1,N&&g.set(N,32),I&&g.set(I,48);for(let A=0;A<16;A++)S.h[A]=r[A]^s(g,A*4);return T&&(y(S,T),S.c=128),S}function y(C,T){for(let N=0;N<T.length;N++)C.c===128&&(C.t+=C.c,h(C,!1),C.c=0),C.b[C.c++]=T[N]}function w(C){for(C.t+=C.c;C.c<128;)C.b[C.c++]=0;h(C,!0);const T=new Uint8Array(C.outlen);for(let N=0;N<C.outlen;N++)T[N]=C.h[N>>2]>>8*(N&3);return T}function v(C,T,N,I,S){N=N||64,C=t.normalizeInput(C),I&&(I=t.normalizeInput(I)),S&&(S=t.normalizeInput(S));const A=m(N,T,I,S);return y(A,C),w(A)}function E(C,T,N,I,S){const A=v(C,T,N,I,S);return t.toHex(A)}return pv={blake2b:v,blake2bHex:E,blake2bInit:m,blake2bUpdate:y,blake2bFinal:w},pv}var gv,AT;function _G(){if(AT)return gv;AT=1;const t=j_();function e(w,v){return w[v]^w[v+1]<<8^w[v+2]<<16^w[v+3]<<24}function n(w,v,E,C,T,N){c[w]=c[w]+c[v]+T,c[C]=s(c[C]^c[w],16),c[E]=c[E]+c[C],c[v]=s(c[v]^c[E],12),c[w]=c[w]+c[v]+N,c[C]=s(c[C]^c[w],8),c[E]=c[E]+c[C],c[v]=s(c[v]^c[E],7)}function s(w,v){return w>>>v^w<<32-v}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),r=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),l=new Uint32Array(16);function f(w,v){let E=0;for(E=0;E<8;E++)c[E]=w.h[E],c[E+8]=i[E];for(c[12]^=w.t,c[13]^=w.t/4294967296,v&&(c[14]=~c[14]),E=0;E<16;E++)l[E]=e(w.b,4*E);for(E=0;E<10;E++)n(0,4,8,12,l[r[E*16+0]],l[r[E*16+1]]),n(1,5,9,13,l[r[E*16+2]],l[r[E*16+3]]),n(2,6,10,14,l[r[E*16+4]],l[r[E*16+5]]),n(3,7,11,15,l[r[E*16+6]],l[r[E*16+7]]),n(0,5,10,15,l[r[E*16+8]],l[r[E*16+9]]),n(1,6,11,12,l[r[E*16+10]],l[r[E*16+11]]),n(2,7,8,13,l[r[E*16+12]],l[r[E*16+13]]),n(3,4,9,14,l[r[E*16+14]],l[r[E*16+15]]);for(E=0;E<8;E++)w.h[E]^=c[E]^c[E+8]}function d(w,v){if(!(w>0&&w<=32))throw new Error("Incorrect output length, should be in [1, 32]");const E=v?v.length:0;if(v&&!(E>0&&E<=32))throw new Error("Incorrect key length, should be in [1, 32]");const C={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:w};return C.h[0]^=16842752^E<<8^w,E>0&&(h(C,v),C.c=64),C}function h(w,v){for(let E=0;E<v.length;E++)w.c===64&&(w.t+=w.c,f(w,!1),w.c=0),w.b[w.c++]=v[E]}function g(w){for(w.t+=w.c;w.c<64;)w.b[w.c++]=0;f(w,!0);const v=new Uint8Array(w.outlen);for(let E=0;E<w.outlen;E++)v[E]=w.h[E>>2]>>8*(E&3)&255;return v}function m(w,v,E){E=E||32,w=t.normalizeInput(w);const C=d(E,v);return h(C,w),g(C)}function y(w,v,E){const C=m(w,v,E);return t.toHex(C)}return gv={blake2s:m,blake2sHex:y,blake2sInit:d,blake2sUpdate:h,blake2sFinal:g},gv}var mv,NT;function OG(){if(NT)return mv;NT=1;const t=DG(),e=_G();return mv={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},mv}var MG=OG(),RG={};const PG=":";function Fu(t){const[e,n]=t.split(PG);return{namespace:e,reference:n}}function z_(t,e){return t.includes(":")?[t]:e.chains||[]}var $G=Object.defineProperty,UG=Object.defineProperties,LG=Object.getOwnPropertyDescriptors,TT=Object.getOwnPropertySymbols,kG=Object.prototype.hasOwnProperty,BG=Object.prototype.propertyIsEnumerable,Wb=(t,e,n)=>e in t?$G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IT=(t,e)=>{for(var n in e||(e={}))kG.call(e,n)&&Wb(t,n,e[n]);if(TT)for(var n of TT(e))BG.call(e,n)&&Wb(t,n,e[n]);return t},jG=(t,e)=>UG(t,LG(e)),DT=(t,e,n)=>Wb(t,typeof e!="symbol"?e+"":e,n);const zG="ReactNative",Js={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},HG="js";function gm(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Qo(){return!$a.getDocument()&&!!$a.getNavigator()&&navigator.product===zG}function FG(){return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function VG(){return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function pf(){return!gm()&&!!$a.getNavigator()&&!!$a.getDocument()}function wp(){return Qo()?Js.reactNative:gm()?Js.node:pf()?Js.browser:Js.unknown}function _T(){var t;try{return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function qG(t,e){const n=new URLSearchParams(t);for(const s of Object.keys(e).sort())if(e.hasOwnProperty(s)){const i=e[s];i!==void 0&&n.set(s,i)}return n.toString()}function WG(t){var e,n;const s=H_();try{return t!=null&&t.url&&s.url&&new URL(t.url).host!==new URL(s.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${s.url}. This is probably unintended and can lead to issues.`),t.url=s.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),jG(IT(IT({},s),t),{url:t?.url||s.url,name:t?.name||s.name,description:t?.description||s.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:s.icons})}catch(i){return console.warn("Error populating app metadata",i),t||s}}function H_(){return iW.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function KG(){if(wp()===Js.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:s}=global.Platform;return[n,s].join("-")}const t=Qq();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function GG(){var t;const e=wp();return e===Js.browser?[e,((t=$a.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function F_(t,e,n){const s=KG(),i=GG();return[[t,e].join("-"),[HG,n].join("-"),s,i].join("/")}function YG({protocol:t,version:e,relayUrl:n,sdkVersion:s,auth:i,projectId:r,useOnCloseEvent:c,bundleId:l,packageName:f}){const d=n.split("?"),h=F_(t,e,s),g={auth:i,ua:h,projectId:r,useOnCloseEvent:c,packageName:f||void 0,bundleId:l||void 0},m=qG(d[1]||"",g);return d[0]+"?"+m}function Hc(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Kb(t){return Object.fromEntries(t.entries())}function Gb(t){return new Map(Object.entries(t))}function Pc(t=we.FIVE_MINUTES,e){const n=we.toMiliseconds(t||we.FIVE_MINUTES);let s,i,r,c;return{resolve:l=>{r&&s&&(clearTimeout(r),s(l),c=Promise.resolve(l))},reject:l=>{r&&i&&(clearTimeout(r),i(l))},done:()=>new Promise((l,f)=>{if(c)return l(c);r=setTimeout(()=>{const d=new Error(e);c=Promise.reject(d),f(d)},n),s=l,i=f})}}function ko(t,e,n){return new Promise(async(s,i)=>{const r=setTimeout(()=>i(new Error(n)),e);try{const c=await t;s(c)}catch(c){i(c)}clearTimeout(r)})}function V_(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function XG(t){return V_("topic",t)}function QG(t){return V_("id",t)}function q_(t){const[e,n]=t.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")s.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))s.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return s}function gn(t,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(t))}function Oo(t){return Date.now()>=we.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}function Br(t=[],e=[]){return[...new Set([...t,...e])]}async function ZG({id:t,topic:e,wcDeepLink:n}){var s;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,r=i?.href;if(typeof r!="string")return;const c=JG(r,t,e),l=wp();if(l===Js.browser){if(!((s=$a.getDocument())!=null&&s.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}eY(c)}else l===Js.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}function JG(t,e,n){const s=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const r=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${r}${iY(s,!0)}`}else i=`${i}/wc?${s}`;return i}function eY(t){let e="_self";sY()?e="_top":(nY()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function tY(t,e){let n="";try{if(pf()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(s){console.error(s)}return n}function OT(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),s=n.indexOf(e);return n[s+2]}function MT(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function WE(){return typeof process<"u"&&RG.IS_VITEST==="true"}function nY(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function sY(){try{return window.self!==window.top}catch{return!1}}function iY(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function W_(t){return Buffer.from(t,"base64").toString("utf-8")}function rY(t){return new Promise(e=>setTimeout(e,t))}let aY=class{constructor({limit:e}){DT(this,"limit"),DT(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const l0=BigInt(2**32-1),RT=BigInt(32);function K_(t,e=!1){return e?{h:Number(t&l0),l:Number(t>>RT&l0)}:{h:Number(t>>RT&l0)|0,l:Number(t&l0)|0}}function G_(t,e=!1){const n=t.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let r=0;r<n;r++){const{h:c,l}=K_(t[r],e);[s[r],i[r]]=[c,l]}return[s,i]}const PT=(t,e,n)=>t>>>n,$T=(t,e,n)=>t<<32-n|e>>>n,Mo=(t,e,n)=>t>>>n|e<<32-n,Ro=(t,e,n)=>t<<32-n|e>>>n,Hd=(t,e,n)=>t<<64-n|e>>>n-32,Fd=(t,e,n)=>t>>>n-32|e<<64-n,oY=(t,e)=>e,cY=(t,e)=>t,lY=(t,e,n)=>t<<n|e>>>32-n,uY=(t,e,n)=>e<<n|t>>>32-n,fY=(t,e,n)=>e<<n-32|t>>>64-n,dY=(t,e,n)=>t<<n-32|e>>>64-n;function tr(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const KE=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),GE=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,hY=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),pY=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,gY=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),mY=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,cu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function YE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ua(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ri(t,...e){if(!YE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function XE(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ua(t.outputLen),Ua(t.blockLen)}function Ko(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function QE(t,e){Ri(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function _h(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Pi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yv(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Cr(t,e){return t<<32-e|t>>>e}const Y_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function X_(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const xa=Y_?t=>t:t=>X_(t);function yY(t){for(let e=0;e<t.length;e++)t[e]=X_(t[e]);return t}const Po=Y_?t=>t:yY,Q_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",wY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Oh(t){if(Ri(t),Q_)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=wY[t[n]];return e}const ya={_0:48,_9:57,A:65,F:70,a:97,f:102};function UT(t){if(t>=ya._0&&t<=ya._9)return t-ya._0;if(t>=ya.A&&t<=ya.F)return t-(ya.A-10);if(t>=ya.a&&t<=ya.f)return t-(ya.a-10)}function ZE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Q_)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(n);for(let i=0,r=0;i<n;i++,r+=2){const c=UT(t.charCodeAt(r)),l=UT(t.charCodeAt(r+1));if(c===void 0||l===void 0){const f=t[r]+t[r+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+r)}s[i]=c*16+l}return s}function vY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function rr(t){return typeof t=="string"&&(t=vY(t)),Ri(t),t}function Fc(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];Ri(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}let Bm=class{};function vp(t){const e=s=>t().update(rr(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function bY(t){const e=(s,i)=>t(i).update(rr(s)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=s=>t(s),e}function gf(t=32){if(cu&&typeof cu.getRandomValues=="function")return cu.getRandomValues(new Uint8Array(t));if(cu&&typeof cu.randomBytes=="function")return Uint8Array.from(cu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const EY=BigInt(0),Dd=BigInt(1),xY=BigInt(2),SY=BigInt(7),CY=BigInt(256),AY=BigInt(113),Z_=[],J_=[],eO=[];for(let t=0,e=Dd,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],Z_.push(2*(5*s+n)),J_.push((t+1)*(t+2)/2%64);let i=EY;for(let r=0;r<7;r++)e=(e<<Dd^(e>>SY)*AY)%CY,e&xY&&(i^=Dd<<(Dd<<BigInt(r))-Dd);eO.push(i)}const tO=G_(eO,!0),NY=tO[0],TY=tO[1],LT=(t,e,n)=>n>32?fY(t,e,n):lY(t,e,n),kT=(t,e,n)=>n>32?dY(t,e,n):uY(t,e,n);function IY(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,f=(c+2)%10,d=n[f],h=n[f+1],g=LT(d,h,1)^n[l],m=kT(d,h,1)^n[l+1];for(let y=0;y<50;y+=10)t[c+y]^=g,t[c+y+1]^=m}let i=t[2],r=t[3];for(let c=0;c<24;c++){const l=J_[c],f=LT(i,r,l),d=kT(i,r,l),h=Z_[c];i=t[h],r=t[h+1],t[h]=f,t[h+1]=d}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=NY[s],t[1]^=TY[s]}Pi(n)}let DY=class nO extends Bm{constructor(e,n,s,i=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=r,Ua(s),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_h(this.state)}clone(){return this._cloneInto()}keccak(){Po(this.state32),IY(this.state32,this.rounds),Po(this.state32),this.posOut=0,this.pos=0}update(e){Ko(this),e=rr(e),Ri(e);const{blockLen:n,state:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(n-this.pos,i-r);for(let l=0;l<c;l++)s[this.pos++]^=e[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:i}=this;e[s]^=n,(n&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ko(this,!1),Ri(e),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,r=e.length;i<r;){this.posOut>=s&&this.keccak();const c=Math.min(s-this.posOut,r-i);e.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ua(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(QE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Pi(this.state)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:i,rounds:r,enableXOF:c}=this;return e||(e=new nO(n,s,i,c,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}};const _Y=(t,e,n)=>vp(()=>new DY(e,t,n)),OY=_Y(1,136,256/8);function MY(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}function RY(t,e,n){return t&e^~t&n}function PY(t,e,n){return t&e^t&n^e&n}let sO=class extends Bm{constructor(e,n,s,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.buffer=new Uint8Array(e),this.view=yv(this.buffer)}update(e){Ko(this),e=rr(e),Ri(e);const{view:n,buffer:s,blockLen:i}=this,r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=yv(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ko(this),QE(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,Pi(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;MY(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=yv(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.destroyed=c,e.finished=r,e.length=i,e.pos=l,i%n&&e.buffer.set(s),e}clone(){return this._cloneInto()}};const xo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Yn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),$Y=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),So=new Uint32Array(64);let UY=class extends sO{constructor(e=32){super(64,e,8,!1),this.A=xo[0]|0,this.B=xo[1]|0,this.C=xo[2]|0,this.D=xo[3]|0,this.E=xo[4]|0,this.F=xo[5]|0,this.G=xo[6]|0,this.H=xo[7]|0}get(){const{A:e,B:n,C:s,D:i,E:r,F:c,G:l,H:f}=this;return[e,n,s,i,r,c,l,f]}set(e,n,s,i,r,c,l,f){this.A=e|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=r|0,this.F=c|0,this.G=l|0,this.H=f|0}process(e,n){for(let g=0;g<16;g++,n+=4)So[g]=e.getUint32(n,!1);for(let g=16;g<64;g++){const m=So[g-15],y=So[g-2],w=Cr(m,7)^Cr(m,18)^m>>>3,v=Cr(y,17)^Cr(y,19)^y>>>10;So[g]=v+So[g-7]+w+So[g-16]|0}let{A:s,B:i,C:r,D:c,E:l,F:f,G:d,H:h}=this;for(let g=0;g<64;g++){const m=Cr(l,6)^Cr(l,11)^Cr(l,25),y=h+m+RY(l,f,d)+$Y[g]+So[g]|0,w=(Cr(s,2)^Cr(s,13)^Cr(s,22))+PY(s,i,r)|0;h=d,d=f,f=l,l=c+y|0,c=r,r=i,i=s,s=y+w|0}s=s+this.A|0,i=i+this.B|0,r=r+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(s,i,r,c,l,f,d,h)}roundClean(){Pi(So)}destroy(){this.set(0,0,0,0,0,0,0,0),Pi(this.buffer)}};const iO=G_(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),LY=iO[0],kY=iO[1],Co=new Uint32Array(80),Ao=new Uint32Array(80);let JE=class extends sO{constructor(e=64){super(128,e,16,!1),this.Ah=Yn[0]|0,this.Al=Yn[1]|0,this.Bh=Yn[2]|0,this.Bl=Yn[3]|0,this.Ch=Yn[4]|0,this.Cl=Yn[5]|0,this.Dh=Yn[6]|0,this.Dl=Yn[7]|0,this.Eh=Yn[8]|0,this.El=Yn[9]|0,this.Fh=Yn[10]|0,this.Fl=Yn[11]|0,this.Gh=Yn[12]|0,this.Gl=Yn[13]|0,this.Hh=Yn[14]|0,this.Hl=Yn[15]|0}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:E}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=E|0}process(e,n){for(let N=0;N<16;N++,n+=4)Co[N]=e.getUint32(n),Ao[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=Co[N-15]|0,S=Ao[N-15]|0,A=Mo(I,S,1)^Mo(I,S,8)^PT(I,S,7),_=Ro(I,S,1)^Ro(I,S,8)^$T(I,S,7),D=Co[N-2]|0,O=Ao[N-2]|0,P=Mo(D,O,19)^Hd(D,O,61)^PT(D,O,6),U=Ro(D,O,19)^Fd(D,O,61)^$T(D,O,6),L=hY(_,U,Ao[N-7],Ao[N-16]),H=pY(L,A,P,Co[N-7],Co[N-16]);Co[N]=H|0,Ao[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:E,Hh:C,Hl:T}=this;for(let N=0;N<80;N++){const I=Mo(g,m,14)^Mo(g,m,18)^Hd(g,m,41),S=Ro(g,m,14)^Ro(g,m,18)^Fd(g,m,41),A=g&y^~g&v,_=m&w^~m&E,D=gY(T,S,_,kY[N],Ao[N]),O=mY(D,C,I,A,LY[N],Co[N]),P=D|0,U=Mo(s,i,28)^Hd(s,i,34)^Hd(s,i,39),L=Ro(s,i,28)^Fd(s,i,34)^Fd(s,i,39),H=s&r^s&l^r&l,q=i&c^i&f^c&f;C=v|0,T=E|0,v=y|0,E=w|0,y=g|0,w=m|0,{h:g,l:m}=tr(d|0,h|0,O|0,P|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=KE(P,L,q);s=GE($,O,U,H),i=$|0}({h:s,l:i}=tr(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=tr(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=tr(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=tr(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=tr(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=tr(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:E}=tr(this.Gh|0,this.Gl|0,v|0,E|0),{h:C,l:T}=tr(this.Hh|0,this.Hl|0,C|0,T|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,E,C,T)}roundClean(){Pi(Co,Ao)}destroy(){Pi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},BY=class extends JE{constructor(){super(48),this.Ah=Gn[0]|0,this.Al=Gn[1]|0,this.Bh=Gn[2]|0,this.Bl=Gn[3]|0,this.Ch=Gn[4]|0,this.Cl=Gn[5]|0,this.Dh=Gn[6]|0,this.Dl=Gn[7]|0,this.Eh=Gn[8]|0,this.El=Gn[9]|0,this.Fh=Gn[10]|0,this.Fl=Gn[11]|0,this.Gh=Gn[12]|0,this.Gl=Gn[13]|0,this.Hh=Gn[14]|0,this.Hl=Gn[15]|0}};const Xn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class jY extends JE{constructor(){super(32),this.Ah=Xn[0]|0,this.Al=Xn[1]|0,this.Bh=Xn[2]|0,this.Bl=Xn[3]|0,this.Ch=Xn[4]|0,this.Cl=Xn[5]|0,this.Dh=Xn[6]|0,this.Dl=Xn[7]|0,this.Eh=Xn[8]|0,this.El=Xn[9]|0,this.Fh=Xn[10]|0,this.Fl=Xn[11]|0,this.Gh=Xn[12]|0,this.Gl=Xn[13]|0,this.Hh=Xn[14]|0,this.Hl=Xn[15]|0}}const jm=vp(()=>new UY),zY=vp(()=>new JE),HY=vp(()=>new BY),FY=vp(()=>new jY),VY=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),dn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ce=new Uint32Array(32);function No(t,e,n,s,i,r){const c=i[r],l=i[r+1];let f=Ce[2*t],d=Ce[2*t+1],h=Ce[2*e],g=Ce[2*e+1],m=Ce[2*n],y=Ce[2*n+1],w=Ce[2*s],v=Ce[2*s+1],E=KE(f,h,c);d=GE(E,d,g,l),f=E|0,{Dh:v,Dl:w}={Dh:v^d,Dl:w^f},{Dh:v,Dl:w}={Dh:oY(v,w),Dl:cY(v)},{h:y,l:m}=tr(y,m,v,w),{Bh:g,Bl:h}={Bh:g^y,Bl:h^m},{Bh:g,Bl:h}={Bh:Mo(g,h,24),Bl:Ro(g,h,24)},Ce[2*t]=f,Ce[2*t+1]=d,Ce[2*e]=h,Ce[2*e+1]=g,Ce[2*n]=m,Ce[2*n+1]=y,Ce[2*s]=w,Ce[2*s+1]=v}function To(t,e,n,s,i,r){const c=i[r],l=i[r+1];let f=Ce[2*t],d=Ce[2*t+1],h=Ce[2*e],g=Ce[2*e+1],m=Ce[2*n],y=Ce[2*n+1],w=Ce[2*s],v=Ce[2*s+1],E=KE(f,h,c);d=GE(E,d,g,l),f=E|0,{Dh:v,Dl:w}={Dh:v^d,Dl:w^f},{Dh:v,Dl:w}={Dh:Mo(v,w,16),Dl:Ro(v,w,16)},{h:y,l:m}=tr(y,m,v,w),{Bh:g,Bl:h}={Bh:g^y,Bl:h^m},{Bh:g,Bl:h}={Bh:Hd(g,h,63),Bl:Fd(g,h,63)},Ce[2*t]=f,Ce[2*t+1]=d,Ce[2*e]=h,Ce[2*e+1]=g,Ce[2*n]=m,Ce[2*n+1]=y,Ce[2*s]=w,Ce[2*s+1]=v}function qY(t,e={},n,s,i){if(Ua(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:r,salt:c,personalization:l}=e;if(r!==void 0&&(r.length<1||r.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==s)throw new Error("salt must be undefined or "+s);if(l!==void 0&&l.length!==i)throw new Error("personalization must be undefined or "+i)}class WY extends Bm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ua(e),Ua(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=_h(this.buffer)}update(e){Ko(this),e=rr(e),Ri(e);const{blockLen:n,buffer:s,buffer32:i}=this,r=e.length,c=e.byteOffset,l=e.buffer;for(let f=0;f<r;){this.pos===n&&(Po(i),this.compress(i,0,!1),Po(i),this.pos=0);const d=Math.min(n-this.pos,r-f),h=c+f;if(d===n&&!(h%4)&&f+d<r){const g=new Uint32Array(l,h,Math.floor((r-f)/4));Po(g);for(let m=0;f+n<r;m+=i.length,f+=n)this.length+=n,this.compress(g,m,!1);Po(g);continue}s.set(e.subarray(f,f+d),this.pos),this.pos+=d,this.length+=d,f+=d}return this}digestInto(e){Ko(this),QE(e,this);const{pos:n,buffer32:s}=this;this.finished=!0,Pi(this.buffer.subarray(n)),Po(s),this.compress(s,0,!0),Po(s);const i=_h(e);this.get().forEach((r,c)=>i[c]=xa(r))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){const{buffer:n,length:s,finished:i,destroyed:r,outputLen:c,pos:l}=this;return e||(e=new this.constructor({dkLen:c})),e.set(...this.get()),e.buffer.set(n),e.destroyed=r,e.finished=i,e.length=s,e.pos=l,e.outputLen=c,e}clone(){return this._cloneInto()}}class KY extends WY{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=dn[0]|0,this.v0h=dn[1]|0,this.v1l=dn[2]|0,this.v1h=dn[3]|0,this.v2l=dn[4]|0,this.v2h=dn[5]|0,this.v3l=dn[6]|0,this.v3h=dn[7]|0,this.v4l=dn[8]|0,this.v4h=dn[9]|0,this.v5l=dn[10]|0,this.v5h=dn[11]|0,this.v6l=dn[12]|0,this.v6h=dn[13]|0,this.v7l=dn[14]|0,this.v7h=dn[15]|0,qY(n,e,64,16,16);let{key:s,personalization:i,salt:r}=e,c=0;if(s!==void 0&&(s=rr(s),c=s.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,r!==void 0){r=rr(r);const l=_h(r);this.v4l^=xa(l[0]),this.v4h^=xa(l[1]),this.v5l^=xa(l[2]),this.v5h^=xa(l[3])}if(i!==void 0){i=rr(i);const l=_h(i);this.v6l^=xa(l[0]),this.v6h^=xa(l[1]),this.v7l^=xa(l[2]),this.v7h^=xa(l[3])}if(s!==void 0){const l=new Uint8Array(this.blockLen);l.set(s),this.update(l)}}get(){let{v0l:e,v0h:n,v1l:s,v1h:i,v2l:r,v2h:c,v3l:l,v3h:f,v4l:d,v4h:h,v5l:g,v5h:m,v6l:y,v6h:w,v7l:v,v7h:E}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,E){this.v0l=e|0,this.v0h=n|0,this.v1l=s|0,this.v1h=i|0,this.v2l=r|0,this.v2h=c|0,this.v3l=l|0,this.v3h=f|0,this.v4l=d|0,this.v4h=h|0,this.v5l=g|0,this.v5h=m|0,this.v6l=y|0,this.v6h=w|0,this.v7l=v|0,this.v7h=E|0}compress(e,n,s){this.get().forEach((f,d)=>Ce[d]=f),Ce.set(dn,16);let{h:i,l:r}=K_(BigInt(this.length));Ce[24]=dn[8]^r,Ce[25]=dn[9]^i,s&&(Ce[28]=~Ce[28],Ce[29]=~Ce[29]);let c=0;const l=VY;for(let f=0;f<12;f++)No(0,4,8,12,e,n+2*l[c++]),To(0,4,8,12,e,n+2*l[c++]),No(1,5,9,13,e,n+2*l[c++]),To(1,5,9,13,e,n+2*l[c++]),No(2,6,10,14,e,n+2*l[c++]),To(2,6,10,14,e,n+2*l[c++]),No(3,7,11,15,e,n+2*l[c++]),To(3,7,11,15,e,n+2*l[c++]),No(0,5,10,15,e,n+2*l[c++]),To(0,5,10,15,e,n+2*l[c++]),No(1,6,11,12,e,n+2*l[c++]),To(1,6,11,12,e,n+2*l[c++]),No(2,7,8,13,e,n+2*l[c++]),To(2,7,8,13,e,n+2*l[c++]),No(3,4,9,14,e,n+2*l[c++]),To(3,4,9,14,e,n+2*l[c++]);this.v0l^=Ce[0]^Ce[16],this.v0h^=Ce[1]^Ce[17],this.v1l^=Ce[2]^Ce[18],this.v1h^=Ce[3]^Ce[19],this.v2l^=Ce[4]^Ce[20],this.v2h^=Ce[5]^Ce[21],this.v3l^=Ce[6]^Ce[22],this.v3h^=Ce[7]^Ce[23],this.v4l^=Ce[8]^Ce[24],this.v4h^=Ce[9]^Ce[25],this.v5l^=Ce[10]^Ce[26],this.v5h^=Ce[11]^Ce[27],this.v6l^=Ce[12]^Ce[28],this.v6h^=Ce[13]^Ce[29],this.v7l^=Ce[14]^Ce[30],this.v7h^=Ce[15]^Ce[31],Pi(Ce)}destroy(){this.destroyed=!0,Pi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const GY=bY(t=>new KY(t)),YY="https://rpc.walletconnect.org/v1";function rO(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(OY(n)).toString("hex")}async function XY(t,e,n,s,i,r){switch(n.t){case"eip191":return await QY(t,e,n.s);case"eip1271":return await ZY(t,e,n.s,s,i,r);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function QY(t,e,n){return(await KW({hash:rO(e),signature:n})).toLowerCase()===t.toLowerCase()}async function ZY(t,e,n,s,i,r){const c=Fu(s);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${s}`);try{const l="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",d=n.substring(2),h=(d.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:rO(e)).substring(2),m=l+g+f+h+d,y=await fetch(`${r||YY}/?chainId=${s}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:JY(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:m},"latest"]})}),{result:w}=await y.json();return w?w.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function JY(){return Date.now()+Math.floor(Math.random()*1e3)}function eX(t){const e=atob(t),n=new Uint8Array(e.length);for(let c=0;c<e.length;c++)n[c]=e.charCodeAt(c);const s=n[0];if(s===0)throw new Error("No signatures found");const i=1+s*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const r=Buffer.from(t,"base64").slice(1,65);return hf.encode(r)}function tX(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(r=>r.charCodeAt(0)),s=new Uint8Array(n.length+e.length);s.set(n),s.set(e,n.length);const i=GY(s,{dkLen:32});return hf.encode(i)}function BT(t){const e=new Uint8Array(jm(nX(t)));return hf.encode(e)}function nX(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function jT(t){const e=Buffer.from(t,"base64"),n=OK(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const s=xK(n),i=Buffer.from("TX"),r=Buffer.concat([i,Buffer.from(s)]),c=FY(r);return x9.encode(c).replace(/=+$/,"")}function wv(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function sX(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),s=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(wv(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(wv(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(wv(s.length)),i.push(s);const r=Buffer.concat(i),c=jm(r);return Buffer.from(c).toString("hex").toUpperCase()}var iX=Object.defineProperty,rX=Object.defineProperties,aX=Object.getOwnPropertyDescriptors,zT=Object.getOwnPropertySymbols,oX=Object.prototype.hasOwnProperty,cX=Object.prototype.propertyIsEnumerable,HT=(t,e,n)=>e in t?iX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lX=(t,e)=>{for(var n in e||(e={}))oX.call(e,n)&&HT(t,n,e[n]);if(zT)for(var n of zT(e))cX.call(e,n)&&HT(t,n,e[n]);return t},uX=(t,e)=>rX(t,aX(e));const fX="did:pkh:",ex=t=>t?.split(":"),dX=t=>{const e=t&&ex(t);if(e)return t.includes(fX)?e[3]:e[1]},Yb=t=>{const e=t&&ex(t);if(e)return e[2]+":"+e[3]},mm=t=>{const e=t&&ex(t);if(e)return e.pop()};async function FT(t){const{cacao:e,projectId:n}=t,{s,p:i}=e,r=aO(i,i.iss),c=mm(i.iss);return await XY(c,r,s,Yb(i.iss),n)}const aO=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,s=mm(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const r=`URI: ${t.aud||t.uri}`,c=`Version: ${t.version}`,l=`Chain ID: ${dX(e)}`,f=`Nonce: ${t.nonce}`,d=`Issued At: ${t.iat}`,h=t.exp?`Expiration Time: ${t.exp}`:void 0,g=t.nbf?`Not Before: ${t.nbf}`:void 0,m=t.requestId?`Request ID: ${t.requestId}`:void 0,y=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,w=k0(t.resources);if(w){const v=Mh(w);i=EX(i,v)}return[n,s,"",i,"",r,c,l,f,d,h,g,m,y].filter(v=>v!=null).join(`
`)};function hX(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function pX(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function sl(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const s=t.att[n];if(Array.isArray(s))throw new Error(`Resource must be an object: ${n}`);if(typeof s!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(s).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(s).forEach(i=>{const r=s[i];if(!Array.isArray(r))throw new Error(`Ability limits ${i} must be an array of objects, found: ${r}`);if(!r.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);r.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${c}`)})})})}function gX(t,e,n,s={}){return n?.sort((i,r)=>i.localeCompare(r)),{att:{[t]:mX(e,n,s)}}}function mX(t,e,n={}){e=e?.sort((i,r)=>i.localeCompare(r));const s=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...s)}function oO(t){return sl(t),`urn:recap:${hX(t).replace(/=/g,"")}`}function Mh(t){const e=pX(t.replace("urn:recap:",""));return sl(e),e}function yX(t,e,n){const s=gX(t,e,n);return oO(s)}function wX(t){return t&&t.includes("urn:recap:")}function vX(t,e){const n=Mh(t),s=Mh(e),i=bX(n,s);return oO(i)}function bX(t,e){sl(t),sl(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,r)=>i.localeCompare(r)),s={att:{}};return n.forEach(i=>{var r,c;Object.keys(((r=t.att)==null?void 0:r[i])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[i])||{})).sort((l,f)=>l.localeCompare(f)).forEach(l=>{var f,d;s.att[i]=uX(lX({},s.att[i]),{[l]:((f=t.att[i])==null?void 0:f[l])||((d=e.att[i])==null?void 0:d[l])})})}),s}function EX(t="",e){sl(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const s=[];let i=0;Object.keys(e.att).forEach(l=>{const f=Object.keys(e.att[l]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));f.sort((g,m)=>g.action.localeCompare(m.action));const d={};f.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const h=Object.keys(d).map(g=>(i++,`(${i}) '${g}': '${d[g].join("', '")}' for '${l}'.`));s.push(h.join(", ").replace(".,","."))});const r=s.join(" "),c=`${n}${r}`;return`${t?t+" ":""}${c}`}function VT(t){var e;const n=Mh(t);sl(n);const s=(e=n.att)==null?void 0:e.eip155;return s?Object.keys(s).map(i=>i.split("/")[1]):[]}function qT(t){const e=Mh(t);sl(e);const n=[];return Object.values(e.att).forEach(s=>{Object.values(s).forEach(i=>{var r;(r=i?.[0])!=null&&r.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function k0(t){if(!t)return;const e=t?.[t.length-1];return wX(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function cO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function vv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ds(t,...e){if(!cO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function WT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xX(t,e){Ds(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ho(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Yu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function SX(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const CX=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function AX(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qb(t){if(typeof t=="string")t=AX(t);else if(cO(t))t=Zb(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function NX(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function TX(t,e){if(t.length!==e.length)return!1;let n=0;for(let s=0;s<t.length;s++)n|=t[s]^e[s];return n===0}const IX=(t,e)=>{function n(s,...i){if(Ds(s),!CX)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const d=i[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?Ds(d):Ds(d,t.nonceLength)}const r=t.tagLength;r&&i[1]!==void 0&&Ds(i[1]);const c=e(s,...i),l=(d,h)=>{if(h!==void 0){if(d!==2)throw new Error("cipher output not supported");Ds(h)}};let f=!1;return{encrypt(d,h){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Ds(d),l(c.encrypt.length,h),c.encrypt(d,h)},decrypt(d,h){if(Ds(d),r&&d.length<r)throw new Error("invalid ciphertext length: smaller than tagLength="+r);return l(c.decrypt.length,h),c.decrypt(d,h)}}}return Object.assign(n,t),n};function KT(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!_X(e))throw new Error("invalid output, must be aligned");return e}function GT(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r);t.setUint32(e+4,c,s),t.setUint32(e+0,l,s)}function DX(t,e,n){Xb(n);const s=new Uint8Array(16),i=SX(s);return GT(i,0,BigInt(e),n),GT(i,8,BigInt(t),n),s}function _X(t){return t.byteOffset%4===0}function Zb(t){return Uint8Array.from(t)}const lO=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),OX=lO("expand 16-byte k"),MX=lO("expand 32-byte k"),RX=Ho(OX),PX=Ho(MX);function ot(t,e){return t<<e|t>>>32-e}function Jb(t){return t.byteOffset%4===0}const u0=64,$X=16,uO=2**32-1,YT=new Uint32Array;function UX(t,e,n,s,i,r,c,l){const f=i.length,d=new Uint8Array(u0),h=Ho(d),g=Jb(i)&&Jb(r),m=g?Ho(i):YT,y=g?Ho(r):YT;for(let w=0;w<f;c++){if(t(e,n,s,h,c,l),c>=uO)throw new Error("arx: counter overflow");const v=Math.min(u0,f-w);if(g&&v===u0){const E=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let C=0,T;C<$X;C++)T=E+C,y[T]=m[T]^h[C];w+=u0;continue}for(let E=0,C;E<v;E++)C=w+E,r[C]=i[C]^d[E];w+=v}}function LX(t,e){const{allowShortKeys:n,extendNonceFn:s,counterLength:i,counterRight:r,rounds:c}=NX({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return vv(i),vv(c),Xb(r),Xb(n),(l,f,d,h,g=0)=>{Ds(l),Ds(f),Ds(d);const m=d.length;if(h===void 0&&(h=new Uint8Array(m)),Ds(h),vv(g),g<0||g>=uO)throw new Error("arx: counter overflow");if(h.length<m)throw new Error(`arx: output (${h.length}) is shorter than data (${m})`);const y=[];let w=l.length,v,E;if(w===32)y.push(v=Zb(l)),E=PX;else if(w===16&&n)v=new Uint8Array(32),v.set(l),v.set(l,16),E=RX,y.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);Jb(f)||y.push(f=Zb(f));const C=Ho(v);if(s){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");s(E,C,Ho(f.subarray(0,16)),C),f=f.subarray(16)}const T=16-i;if(T!==f.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const I=new Uint8Array(12);I.set(f,r?0:12-f.length),f=I,y.push(f)}const N=Ho(f);return UX(t,E,C,N,d,h,g,c),Yu(...y),h}}const On=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class kX{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Qb(e),Ds(e,32);const n=On(e,0),s=On(e,2),i=On(e,4),r=On(e,6),c=On(e,8),l=On(e,10),f=On(e,12),d=On(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|s<<3)&8191,this.r[2]=(s>>>10|i<<6)&7939,this.r[3]=(i>>>7|r<<9)&8191,this.r[4]=(r>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|l<<2)&8191,this.r[7]=(l>>>11|f<<5)&8065,this.r[8]=(f>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let h=0;h<8;h++)this.pad[h]=On(e,16+2*h)}process(e,n,s=!1){const i=s?0:2048,{h:r,r:c}=this,l=c[0],f=c[1],d=c[2],h=c[3],g=c[4],m=c[5],y=c[6],w=c[7],v=c[8],E=c[9],C=On(e,n+0),T=On(e,n+2),N=On(e,n+4),I=On(e,n+6),S=On(e,n+8),A=On(e,n+10),_=On(e,n+12),D=On(e,n+14);let O=r[0]+(C&8191),P=r[1]+((C>>>13|T<<3)&8191),U=r[2]+((T>>>10|N<<6)&8191),L=r[3]+((N>>>7|I<<9)&8191),H=r[4]+((I>>>4|S<<12)&8191),q=r[5]+(S>>>1&8191),$=r[6]+((S>>>14|A<<2)&8191),R=r[7]+((A>>>11|_<<5)&8191),k=r[8]+((_>>>8|D<<8)&8191),F=r[9]+(D>>>5|i),K=0,W=K+O*l+P*(5*E)+U*(5*v)+L*(5*w)+H*(5*y);K=W>>>13,W&=8191,W+=q*(5*m)+$*(5*g)+R*(5*h)+k*(5*d)+F*(5*f),K+=W>>>13,W&=8191;let j=K+O*f+P*l+U*(5*E)+L*(5*v)+H*(5*w);K=j>>>13,j&=8191,j+=q*(5*y)+$*(5*m)+R*(5*g)+k*(5*h)+F*(5*d),K+=j>>>13,j&=8191;let X=K+O*d+P*f+U*l+L*(5*E)+H*(5*v);K=X>>>13,X&=8191,X+=q*(5*w)+$*(5*y)+R*(5*m)+k*(5*g)+F*(5*h),K+=X>>>13,X&=8191;let Z=K+O*h+P*d+U*f+L*l+H*(5*E);K=Z>>>13,Z&=8191,Z+=q*(5*v)+$*(5*w)+R*(5*y)+k*(5*m)+F*(5*g),K+=Z>>>13,Z&=8191;let ee=K+O*g+P*h+U*d+L*f+H*l;K=ee>>>13,ee&=8191,ee+=q*(5*E)+$*(5*v)+R*(5*w)+k*(5*y)+F*(5*m),K+=ee>>>13,ee&=8191;let ae=K+O*m+P*g+U*h+L*d+H*f;K=ae>>>13,ae&=8191,ae+=q*l+$*(5*E)+R*(5*v)+k*(5*w)+F*(5*y),K+=ae>>>13,ae&=8191;let oe=K+O*y+P*m+U*g+L*h+H*d;K=oe>>>13,oe&=8191,oe+=q*f+$*l+R*(5*E)+k*(5*v)+F*(5*w),K+=oe>>>13,oe&=8191;let be=K+O*w+P*y+U*m+L*g+H*h;K=be>>>13,be&=8191,be+=q*d+$*f+R*l+k*(5*E)+F*(5*v),K+=be>>>13,be&=8191;let Ae=K+O*v+P*w+U*y+L*m+H*g;K=Ae>>>13,Ae&=8191,Ae+=q*h+$*d+R*f+k*l+F*(5*E),K+=Ae>>>13,Ae&=8191;let Ne=K+O*E+P*v+U*w+L*y+H*m;K=Ne>>>13,Ne&=8191,Ne+=q*g+$*h+R*d+k*f+F*l,K+=Ne>>>13,Ne&=8191,K=(K<<2)+K|0,K=K+W|0,W=K&8191,K=K>>>13,j+=K,r[0]=W,r[1]=j,r[2]=X,r[3]=Z,r[4]=ee,r[5]=ae,r[6]=oe,r[7]=be,r[8]=Ae,r[9]=Ne}finalize(){const{h:e,pad:n}=this,s=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=i,i=e[l]>>>13,e[l]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,s[0]=e[0]+5,i=s[0]>>>13,s[0]&=8191;for(let l=1;l<10;l++)s[l]=e[l]+i,i=s[l]>>>13,s[l]&=8191;s[9]-=8192;let r=(i^1)-1;for(let l=0;l<10;l++)s[l]&=r;r=~r;for(let l=0;l<10;l++)e[l]=e[l]&r|s[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+n[0];e[0]=c&65535;for(let l=1;l<8;l++)c=(e[l]+n[l]|0)+(c>>>16)|0,e[l]=c&65535;Yu(s)}update(e){WT(this),e=Qb(e),Ds(e);const{buffer:n,blockLen:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(s-this.pos,i-r);if(c===s){for(;s<=i-r;r+=s)this.process(e,r);continue}n.set(e.subarray(r,r+c),this.pos),this.pos+=c,r+=c,this.pos===s&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Yu(this.h,this.r,this.buffer,this.pad)}digestInto(e){WT(this),xX(e,this),this.finished=!0;const{buffer:n,h:s}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let r=0;for(let c=0;c<8;c++)e[r++]=s[c]>>>0,e[r++]=s[c]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}}function BX(t){const e=(s,i)=>t(i).update(Qb(s)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=s=>t(s),e}const jX=BX(t=>new kX(t));function zX(t,e,n,s,i,r=20){let c=t[0],l=t[1],f=t[2],d=t[3],h=e[0],g=e[1],m=e[2],y=e[3],w=e[4],v=e[5],E=e[6],C=e[7],T=i,N=n[0],I=n[1],S=n[2],A=c,_=l,D=f,O=d,P=h,U=g,L=m,H=y,q=w,$=v,R=E,k=C,F=T,K=N,W=I,j=S;for(let Z=0;Z<r;Z+=2)A=A+P|0,F=ot(F^A,16),q=q+F|0,P=ot(P^q,12),A=A+P|0,F=ot(F^A,8),q=q+F|0,P=ot(P^q,7),_=_+U|0,K=ot(K^_,16),$=$+K|0,U=ot(U^$,12),_=_+U|0,K=ot(K^_,8),$=$+K|0,U=ot(U^$,7),D=D+L|0,W=ot(W^D,16),R=R+W|0,L=ot(L^R,12),D=D+L|0,W=ot(W^D,8),R=R+W|0,L=ot(L^R,7),O=O+H|0,j=ot(j^O,16),k=k+j|0,H=ot(H^k,12),O=O+H|0,j=ot(j^O,8),k=k+j|0,H=ot(H^k,7),A=A+U|0,j=ot(j^A,16),R=R+j|0,U=ot(U^R,12),A=A+U|0,j=ot(j^A,8),R=R+j|0,U=ot(U^R,7),_=_+L|0,F=ot(F^_,16),k=k+F|0,L=ot(L^k,12),_=_+L|0,F=ot(F^_,8),k=k+F|0,L=ot(L^k,7),D=D+H|0,K=ot(K^D,16),q=q+K|0,H=ot(H^q,12),D=D+H|0,K=ot(K^D,8),q=q+K|0,H=ot(H^q,7),O=O+P|0,W=ot(W^O,16),$=$+W|0,P=ot(P^$,12),O=O+P|0,W=ot(W^O,8),$=$+W|0,P=ot(P^$,7);let X=0;s[X++]=c+A|0,s[X++]=l+_|0,s[X++]=f+D|0,s[X++]=d+O|0,s[X++]=h+P|0,s[X++]=g+U|0,s[X++]=m+L|0,s[X++]=y+H|0,s[X++]=w+q|0,s[X++]=v+$|0,s[X++]=E+R|0,s[X++]=C+k|0,s[X++]=T+F|0,s[X++]=N+K|0,s[X++]=I+W|0,s[X++]=S+j|0}const HX=LX(zX,{counterRight:!1,counterLength:4,allowShortKeys:!1}),FX=new Uint8Array(16),XT=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(FX.subarray(n))},VX=new Uint8Array(32);function QT(t,e,n,s,i){const r=t(e,n,VX),c=jX.create(r);i&&XT(c,i),XT(c,s);const l=DX(s.length,i?i.length:0,!0);c.update(l);const f=c.digest();return Yu(r,l),f}const qX=t=>(e,n,s)=>({encrypt(i,r){const c=i.length;r=KT(c+16,r,!1),r.set(i);const l=r.subarray(0,-16);t(e,n,l,l,1);const f=QT(t,e,n,l,s);return r.set(f,c),Yu(f),r},decrypt(i,r){r=KT(i.length-16,r,!1);const c=i.subarray(0,-16),l=i.subarray(-16),f=QT(t,e,n,c,s);if(!TX(l,f))throw new Error("invalid tag");return r.set(i.subarray(0,-16)),t(e,n,r,r,1),Yu(f),r}}),fO=IX({blockSize:64,nonceLength:12,tagLength:16},qX(HX));let dO=class extends Bm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,XE(e);const s=rr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,r=new Uint8Array(i);r.set(s.length>i?e.create().update(s).digest():s);for(let c=0;c<r.length;c++)r[c]^=54;this.iHash.update(r),this.oHash=e.create();for(let c=0;c<r.length;c++)r[c]^=106;this.oHash.update(r),Pi(r)}update(e){return Ko(this),this.iHash.update(e),this}digestInto(e){Ko(this),Ri(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:i,destroyed:r,blockLen:c,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=r,e.blockLen=c,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zm=(t,e,n)=>new dO(t,e).update(n).digest();zm.create=(t,e)=>new dO(t,e);function WX(t,e,n){return XE(t),n===void 0&&(n=new Uint8Array(t.outputLen)),zm(t,rr(n),rr(e))}const bv=Uint8Array.from([0]),ZT=Uint8Array.of();function KX(t,e,n,s=32){XE(t),Ua(s);const i=t.outputLen;if(s>255*i)throw new Error("Length should be <= 255*HashLen");const r=Math.ceil(s/i);n===void 0&&(n=ZT);const c=new Uint8Array(r*i),l=zm.create(t,e),f=l._cloneInto(),d=new Uint8Array(l.outputLen);for(let h=0;h<r;h++)bv[0]=h+1,f.update(h===0?ZT:d).update(n).update(bv).digestInto(d),c.set(d,i*h),l._cloneInto(f);return l.destroy(),f.destroy(),Pi(d,bv),c.slice(0,s)}const GX=(t,e,n,s,i)=>KX(t,WX(t,e,n),s,i),Hm=jm,tx=BigInt(0),e2=BigInt(1);function ym(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function f0(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?tx:BigInt("0x"+t)}function Fm(t){return hO(Oh(t))}function wm(t){return Ri(t),hO(Oh(Uint8Array.from(t).reverse()))}function nx(t,e){return ZE(t.toString(16).padStart(e*2,"0"))}function sx(t,e){return nx(t,e).reverse()}function Is(t,e,n){let s;if(typeof e=="string")try{s=ZE(e)}catch(r){throw new Error(t+" must be hex string or Uint8Array, cause: "+r)}else if(YE(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=s.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return s}const Ev=t=>typeof t=="bigint"&&tx<=t;function YX(t,e,n){return Ev(t)&&Ev(e)&&Ev(n)&&e<=t&&t<n}function t2(t,e,n,s){if(!YX(e,n,s))throw new Error("expected valid "+t+": "+n+" <= n < "+s+", got "+e)}function XX(t){let e;for(e=0;t>tx;t>>=e2,e+=1);return e}const Vm=t=>(e2<<BigInt(t))-e2;function QX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const s=m=>new Uint8Array(m),i=m=>Uint8Array.of(m);let r=s(t),c=s(t),l=0;const f=()=>{r.fill(1),c.fill(0),l=0},d=(...m)=>n(c,r,...m),h=(m=s(0))=>{c=d(i(0),m),r=d(),m.length!==0&&(c=d(i(1),m),r=d())},g=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const y=[];for(;m<e;){r=d();const w=r.slice();y.push(w),m+=r.length}return Fc(...y)};return(m,y)=>{f(),h(m);let w;for(;!(w=y(g()));)h();return f(),w}}function qm(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function s(i,r,c){const l=t[i];if(c&&l===void 0)return;const f=typeof l;if(f!==r||l===null)throw new Error(`param "${i}" is invalid: expected ${r}, got ${f}`)}Object.entries(e).forEach(([i,r])=>s(i,r,!1)),Object.entries(n).forEach(([i,r])=>s(i,r,!0))}function JT(t){const e=new WeakMap;return(n,...s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t(n,...s);return e.set(n,r),r}}const Os=BigInt(0),cs=BigInt(1),Vc=BigInt(2),ZX=BigInt(3),pO=BigInt(4),gO=BigInt(5),mO=BigInt(8);function Di(t,e){const n=t%e;return n>=Os?n:e+n}function Zi(t,e,n){let s=t;for(;e-- >Os;)s*=s,s%=n;return s}function e5(t,e){if(t===Os)throw new Error("invert: expected non-zero number");if(e<=Os)throw new Error("invert: expected positive modulus, got "+e);let n=Di(t,e),s=e,i=Os,r=cs;for(;n!==Os;){const c=s/n,l=s%n,f=i-r*c;s=n,n=l,i=r,r=f}if(s!==cs)throw new Error("invert: does not exist");return Di(i,e)}function yO(t,e){const n=(t.ORDER+cs)/pO,s=t.pow(e,n);if(!t.eql(t.sqr(s),e))throw new Error("Cannot find square root");return s}function JX(t,e){const n=(t.ORDER-gO)/mO,s=t.mul(e,Vc),i=t.pow(s,n),r=t.mul(e,i),c=t.mul(t.mul(r,Vc),i),l=t.mul(r,t.sub(c,t.ONE));if(!t.eql(t.sqr(l),e))throw new Error("Cannot find square root");return l}function eQ(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-cs,n=0;for(;e%Vc===Os;)e/=Vc,n++;let s=Vc;const i=mf(t);for(;t5(i,s)===1;)if(s++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return yO;let r=i.pow(s,e);const c=(e+cs)/Vc;return function(l,f){if(l.is0(f))return f;if(t5(l,f)!==1)throw new Error("Cannot find square root");let d=n,h=l.mul(l.ONE,r),g=l.pow(f,e),m=l.pow(f,c);for(;!l.eql(g,l.ONE);){if(l.is0(g))return l.ZERO;let y=1,w=l.sqr(g);for(;!l.eql(w,l.ONE);)if(y++,w=l.sqr(w),y===d)throw new Error("Cannot find square root");const v=cs<<BigInt(d-y-1),E=l.pow(h,v);d=y,h=l.sqr(E),g=l.mul(g,h),m=l.mul(m,E)}return m}}function tQ(t){return t%pO===ZX?yO:t%mO===gO?JX:eQ(t)}const nQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sQ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=nQ.reduce((s,i)=>(s[i]="function",s),e);return qm(t,n),t}function iQ(t,e,n){if(n<Os)throw new Error("invalid exponent, negatives unsupported");if(n===Os)return t.ONE;if(n===cs)return e;let s=t.ONE,i=e;for(;n>Os;)n&cs&&(s=t.mul(s,i)),i=t.sqr(i),n>>=cs;return s}function wO(t,e,n=!1){const s=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((c,l,f)=>t.is0(l)?c:(s[f]=c,t.mul(c,l)),t.ONE),r=t.inv(i);return e.reduceRight((c,l,f)=>t.is0(l)?c:(s[f]=t.mul(c,s[f]),t.mul(c,l)),r),s}function t5(t,e){const n=(t.ORDER-cs)/Vc,s=t.pow(e,n),i=t.eql(s,t.ONE),r=t.eql(s,t.ZERO),c=t.eql(s,t.neg(t.ONE));if(!i&&!r&&!c)throw new Error("invalid Legendre symbol result");return i?1:r?0:-1}function rQ(t,e){e!==void 0&&Ua(e);const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function mf(t,e,n=!1,s={}){if(t<=Os)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,r;if(typeof e=="object"&&e!=null){if(s.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(i=h.BITS),h.sqrt&&(r=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE)}else typeof e=="number"&&(i=e),s.sqrt&&(r=s.sqrt);const{nBitLength:c,nByteLength:l}=rQ(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Vm(c),ZERO:Os,ONE:cs,create:h=>Di(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Os<=h&&h<t},is0:h=>h===Os,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&cs)===cs,neg:h=>Di(-h,t),eql:(h,g)=>h===g,sqr:h=>Di(h*h,t),add:(h,g)=>Di(h+g,t),sub:(h,g)=>Di(h-g,t),mul:(h,g)=>Di(h*g,t),pow:(h,g)=>iQ(d,h,g),div:(h,g)=>Di(h*e5(g,t),t),sqrN:h=>h*h,addN:(h,g)=>h+g,subN:(h,g)=>h-g,mulN:(h,g)=>h*g,inv:h=>e5(h,t),sqrt:r||(h=>(f||(f=tQ(t)),f(d,h))),toBytes:h=>n?sx(h,l):nx(h,l),fromBytes:h=>{if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);return n?wm(h):Fm(h)},invertBatch:h=>wO(d,h),cmov:(h,g,m)=>m?g:h});return Object.freeze(d)}function vO(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function bO(t){const e=vO(t);return e+Math.ceil(e/2)}function aQ(t,e,n=!1){const s=t.length,i=vO(e),r=bO(e);if(s<16||s<r||s>1024)throw new Error("expected "+r+"-1024 bytes of input, got "+s);const c=n?wm(t):Fm(t),l=Di(c,e-cs)+cs;return n?sx(l,i):nx(l,i)}const Xu=BigInt(0),qc=BigInt(1);function sh(t,e){const n=e.negate();return t?n:e}function oQ(t,e,n){const s=r=>r.pz,i=wO(t.Fp,n.map(s));return n.map((r,c)=>r.toAffine(i[c])).map(t.fromAffine)}function EO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xv(t,e){EO(t,e);const n=Math.ceil(e/t)+1,s=2**(t-1),i=2**t,r=Vm(t),c=BigInt(t);return{windows:n,windowSize:s,mask:r,maxNumber:i,shiftBy:c}}function n5(t,e,n){const{windowSize:s,mask:i,maxNumber:r,shiftBy:c}=n;let l=Number(t&i),f=t>>c;l>s&&(l-=r,f+=qc);const d=e*s,h=d+Math.abs(l)-1,g=l===0,m=l<0,y=e%2!==0;return{nextN:f,offset:h,isZero:g,isNeg:m,isNegF:y,offsetF:d}}function cQ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,s)=>{if(!(n instanceof e))throw new Error("invalid point at index "+s)})}function lQ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,s)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+s)})}const Sv=new WeakMap,xO=new WeakMap;function Cv(t){return xO.get(t)||1}function s5(t){if(t!==Xu)throw new Error("invalid wNAF")}function uQ(t,e){return{constTimeNegate:sh,hasPrecomputes(n){return Cv(n)!==1},unsafeLadder(n,s,i=t.ZERO){let r=n;for(;s>Xu;)s&qc&&(i=i.add(r)),r=r.double(),s>>=qc;return i},precomputeWindow(n,s){const{windows:i,windowSize:r}=xv(s,e),c=[];let l=n,f=l;for(let d=0;d<i;d++){f=l,c.push(f);for(let h=1;h<r;h++)f=f.add(l),c.push(f);l=f.double()}return c},wNAF(n,s,i){let r=t.ZERO,c=t.BASE;const l=xv(n,e);for(let f=0;f<l.windows;f++){const{nextN:d,offset:h,isZero:g,isNeg:m,isNegF:y,offsetF:w}=n5(i,f,l);i=d,g?c=c.add(sh(y,s[w])):r=r.add(sh(m,s[h]))}return s5(i),{p:r,f:c}},wNAFUnsafe(n,s,i,r=t.ZERO){const c=xv(n,e);for(let l=0;l<c.windows&&i!==Xu;l++){const{nextN:f,offset:d,isZero:h,isNeg:g}=n5(i,l,c);if(i=f,!h){const m=s[d];r=r.add(g?m.negate():m)}}return s5(i),r},getPrecomputes(n,s,i){let r=Sv.get(s);return r||(r=this.precomputeWindow(s,n),n!==1&&(typeof i=="function"&&(r=i(r)),Sv.set(s,r))),r},wNAFCached(n,s,i){const r=Cv(n);return this.wNAF(r,this.getPrecomputes(r,n,i),s)},wNAFCachedUnsafe(n,s,i,r){const c=Cv(n);return c===1?this.unsafeLadder(n,s,r):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),s,r)},setWindowSize(n,s){EO(s,e),xO.set(n,s),Sv.delete(n)}}}function fQ(t,e,n,s){let i=e,r=t.ZERO,c=t.ZERO;for(;n>Xu||s>Xu;)n&qc&&(r=r.add(i)),s&qc&&(c=c.add(i)),i=i.double(),n>>=qc,s>>=qc;return{p1:r,p2:c}}function dQ(t,e,n,s){cQ(n,t),lQ(s,e);const i=n.length,r=s.length;if(i!==r)throw new Error("arrays of points and scalars must have equal length");const c=t.ZERO,l=XX(BigInt(i));let f=1;l>12?f=l-3:l>4?f=l-2:l>0&&(f=2);const d=Vm(f),h=new Array(Number(d)+1).fill(c),g=Math.floor((e.BITS-1)/f)*f;let m=c;for(let y=g;y>=0;y-=f){h.fill(c);for(let v=0;v<r;v++){const E=s[v],C=Number(E>>BigInt(y)&d);h[C]=h[C].add(n[v])}let w=c;for(let v=h.length-1,E=c;v>0;v--)E=E.add(h[v]),w=w.add(E);if(m=m.add(w),y!==0)for(let v=0;v<f;v++)m=m.double()}return m}function i5(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sQ(e),e}else return mf(t)}function hQ(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>Xu))throw new Error(`CURVE.${c} must be positive bigint`)}const s=i5(e.p,n.Fp),i=i5(e.n,n.Fn),r=["Gx","Gy","a","b"];for(const c of r)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const _d=BigInt(0),lu=BigInt(1),d0=BigInt(2);function pQ(t){return qm(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function gQ(t){const e=pQ(t),{P:n,type:s,adjustScalarBytes:i,powPminus2:r,randomBytes:c}=e,l=s==="x25519";if(!l&&s!=="x448")throw new Error("invalid type");const f=c||gf,d=l?255:448,h=l?32:56,g=BigInt(l?9:5),m=BigInt(l?121665:39081),y=l?d0**BigInt(254):d0**BigInt(447),w=l?BigInt(8)*d0**BigInt(251)-lu:BigInt(4)*d0**BigInt(445)-lu,v=y+w+lu,E=O=>Di(O,n),C=T(g);function T(O){return sx(E(O),h)}function N(O){const P=Is("u coordinate",O,h);return l&&(P[31]&=127),E(wm(P))}function I(O){return wm(i(Is("scalar",O,h)))}function S(O,P){const U=D(N(P),I(O));if(U===_d)throw new Error("invalid private or public key received");return T(U)}function A(O){return S(O,C)}function _(O,P,U){const L=E(O*(P-U));return P=E(P-L),U=E(U+L),{x_2:P,x_3:U}}function D(O,P){t2("u",O,_d,n),t2("scalar",P,y,v);const U=P,L=O;let H=lu,q=_d,$=O,R=lu,k=_d;for(let K=BigInt(d-1);K>=_d;K--){const W=U>>K&lu;k^=W,{x_2:H,x_3:$}=_(k,H,$),{x_2:q,x_3:R}=_(k,q,R),k=W;const j=H+q,X=E(j*j),Z=H-q,ee=E(Z*Z),ae=X-ee,oe=$+R,be=$-R,Ae=E(be*j),Ne=E(oe*Z),We=Ae+Ne,Qe=Ae-Ne;$=E(We*We),R=E(L*E(Qe*Qe)),H=E(X*ee),q=E(ae*(X+E(m*ae)))}({x_2:H,x_3:$}=_(k,H,$)),{x_2:q,x_3:R}=_(k,q,R);const F=r(q);return E(H*F)}return{scalarMult:S,scalarMultBase:A,getSharedSecret:(O,P)=>S(O,P),getPublicKey:O=>A(O),utils:{randomPrivateKey:()=>f(h)},GuBytes:C.slice()}}BigInt(0);const mQ=BigInt(1),r5=BigInt(2),yQ=BigInt(3),wQ=BigInt(5);BigInt(8);const SO={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function vQ(t){const e=BigInt(10),n=BigInt(20),s=BigInt(40),i=BigInt(80),r=SO.p,c=t*t%r*t%r,l=Zi(c,r5,r)*c%r,f=Zi(l,mQ,r)*t%r,d=Zi(f,wQ,r)*f%r,h=Zi(d,e,r)*d%r,g=Zi(h,n,r)*h%r,m=Zi(g,s,r)*g%r,y=Zi(m,i,r)*m%r,w=Zi(y,i,r)*m%r,v=Zi(w,e,r)*d%r;return{pow_p_5_8:Zi(v,r5,r)*t%r,b2:c}}function bQ(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const n2=(()=>{const t=SO.p;return gQ({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:s}=vQ(e);return Di(Zi(n,yQ,t)*s,t)},adjustScalarBytes:bQ})})();function a5(t){t.lowS!==void 0&&ym("lowS",t.lowS),t.prehash!==void 0&&ym("prehash",t.prehash)}class EQ extends Error{constructor(e=""){super(e)}}const Ca={Err:EQ,_tlv:{encode:(t,e)=>{const{Err:n}=Ca;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const s=e.length/2,i=f0(s);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const r=s>127?f0(i.length/2|128):"";return f0(t)+r+i+e},decode(t,e){const{Err:n}=Ca;let s=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[s++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[s++],r=!!(i&128);let c=0;if(!r)c=i;else{const f=i&127;if(!f)throw new n("tlv.decode(long): indefinite length not supported");if(f>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(s,s+f);if(d.length!==f)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const h of d)c=c<<8|h;if(s+=f,c<128)throw new n("tlv.decode(long): not minimal encoding")}const l=e.subarray(s,s+c);if(l.length!==c)throw new n("tlv.decode: wrong value length");return{v:l,l:e.subarray(s+c)}}},_int:{encode(t){const{Err:e}=Ca;if(t<ih)throw new e("integer: negative integers are not allowed");let n=f0(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ca;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Fm(t)}},toSig(t){const{Err:e,_int:n,_tlv:s}=Ca,i=Is("signature",t),{v:r,l:c}=s.decode(48,i);if(c.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:f}=s.decode(2,r),{v:d,l:h}=s.decode(2,f);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=Ca,s=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),r=s+i;return e.encode(48,r)}},ih=BigInt(0),rh=BigInt(1),xQ=BigInt(2),h0=BigInt(3),SQ=BigInt(4);function CQ(t,e,n){function s(i){const r=t.sqr(i),c=t.mul(r,i);return t.add(t.add(c,t.mul(i,e)),n)}return s}function CO(t,e,n){const{BYTES:s}=t;function i(r){let c;if(typeof r=="bigint")c=r;else{let l=Is("private key",r);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const f=new Uint8Array(s);f.set(l,f.length-l.length),l=f}try{c=t.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${s}, got ${typeof r}`)}}if(n&&(c=t.create(c)),!t.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return i}function AQ(t,e={}){const{Fp:n,Fn:s}=hQ("weierstrass",t,e),{h:i,n:r}=t;qm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(t.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(D,O,P){const{x:U,y:L}=O.toAffine(),H=n.toBytes(U);if(ym("isCompressed",P),P){l();const q=!n.isOdd(L);return Fc(AO(q),H)}else return Fc(Uint8Array.of(4),H,n.toBytes(L))}function d(D){Ri(D);const O=n.BYTES,P=O+1,U=2*O+1,L=D.length,H=D[0],q=D.subarray(1);if(L===P&&(H===2||H===3)){const $=n.fromBytes(q);if(!n.isValid($))throw new Error("bad point: is not on curve, wrong x");const R=m($);let k;try{k=n.sqrt(R)}catch(K){const W=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}l();const F=n.isOdd(k);return(H&1)===1!==F&&(k=n.neg(k)),{x:$,y:k}}else if(L===U&&H===4){const $=n.fromBytes(q.subarray(O*0,O*1)),R=n.fromBytes(q.subarray(O*1,O*2));if(!y($,R))throw new Error("bad point: is not on curve");return{x:$,y:R}}else throw new Error(`bad point: got length ${L}, expected compressed=${P} or uncompressed=${U}`)}const h=e.toBytes||f,g=e.fromBytes||d,m=CQ(n,t.a,t.b);function y(D,O){const P=n.sqr(O),U=m(D);return n.eql(P,U)}if(!y(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const w=n.mul(n.pow(t.a,h0),SQ),v=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(w,v)))throw new Error("bad curve params: a or b");function E(D,O,P=!1){if(!n.isValid(O)||P&&n.is0(O))throw new Error(`bad point coordinate ${D}`);return O}function C(D){if(!(D instanceof S))throw new Error("ProjectivePoint expected")}const T=JT((D,O)=>{const{px:P,py:U,pz:L}=D;if(n.eql(L,n.ONE))return{x:P,y:U};const H=D.is0();O==null&&(O=H?n.ONE:n.inv(L));const q=n.mul(P,O),$=n.mul(U,O),R=n.mul(L,O);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:q,y:$}}),N=JT(D=>{if(D.is0()){if(e.allowInfinityPoint&&!n.is0(D.py))return;throw new Error("bad point: ZERO")}const{x:O,y:P}=D.toAffine();if(!n.isValid(O)||!n.isValid(P))throw new Error("bad point: x or y not field elements");if(!y(O,P))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function I(D,O,P,U,L){return P=new S(n.mul(P.px,D),P.py,P.pz),O=sh(U,O),P=sh(L,P),O.add(P)}class S{constructor(O,P,U){this.px=E("x",O),this.py=E("y",P,!0),this.pz=E("z",U),Object.freeze(this)}static fromAffine(O){const{x:P,y:U}=O||{};if(!O||!n.isValid(P)||!n.isValid(U))throw new Error("invalid affine point");if(O instanceof S)throw new Error("projective point not allowed");return n.is0(P)&&n.is0(U)?S.ZERO:new S(P,U,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(O){return oQ(S,"pz",O)}static fromBytes(O){return Ri(O),S.fromHex(O)}static fromHex(O){const P=S.fromAffine(g(Is("pointHex",O)));return P.assertValidity(),P}static fromPrivateKey(O){const P=CO(s,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(P(O))}static msm(O,P){return dQ(S,s,O,P)}precompute(O=8,P=!0){return _.setWindowSize(this,O),P||this.multiply(h0),this}_setWindowSize(O){this.precompute(O)}assertValidity(){N(this)}hasEvenY(){const{y:O}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(O)}equals(O){C(O);const{px:P,py:U,pz:L}=this,{px:H,py:q,pz:$}=O,R=n.eql(n.mul(P,$),n.mul(H,L)),k=n.eql(n.mul(U,$),n.mul(q,L));return R&&k}negate(){return new S(this.px,n.neg(this.py),this.pz)}double(){const{a:O,b:P}=t,U=n.mul(P,h0),{px:L,py:H,pz:q}=this;let $=n.ZERO,R=n.ZERO,k=n.ZERO,F=n.mul(L,L),K=n.mul(H,H),W=n.mul(q,q),j=n.mul(L,H);return j=n.add(j,j),k=n.mul(L,q),k=n.add(k,k),$=n.mul(O,k),R=n.mul(U,W),R=n.add($,R),$=n.sub(K,R),R=n.add(K,R),R=n.mul($,R),$=n.mul(j,$),k=n.mul(U,k),W=n.mul(O,W),j=n.sub(F,W),j=n.mul(O,j),j=n.add(j,k),k=n.add(F,F),F=n.add(k,F),F=n.add(F,W),F=n.mul(F,j),R=n.add(R,F),W=n.mul(H,q),W=n.add(W,W),F=n.mul(W,j),$=n.sub($,F),k=n.mul(W,K),k=n.add(k,k),k=n.add(k,k),new S($,R,k)}add(O){C(O);const{px:P,py:U,pz:L}=this,{px:H,py:q,pz:$}=O;let R=n.ZERO,k=n.ZERO,F=n.ZERO;const K=t.a,W=n.mul(t.b,h0);let j=n.mul(P,H),X=n.mul(U,q),Z=n.mul(L,$),ee=n.add(P,U),ae=n.add(H,q);ee=n.mul(ee,ae),ae=n.add(j,X),ee=n.sub(ee,ae),ae=n.add(P,L);let oe=n.add(H,$);return ae=n.mul(ae,oe),oe=n.add(j,Z),ae=n.sub(ae,oe),oe=n.add(U,L),R=n.add(q,$),oe=n.mul(oe,R),R=n.add(X,Z),oe=n.sub(oe,R),F=n.mul(K,ae),R=n.mul(W,Z),F=n.add(R,F),R=n.sub(X,F),F=n.add(X,F),k=n.mul(R,F),X=n.add(j,j),X=n.add(X,j),Z=n.mul(K,Z),ae=n.mul(W,ae),X=n.add(X,Z),Z=n.sub(j,Z),Z=n.mul(K,Z),ae=n.add(ae,Z),j=n.mul(X,ae),k=n.add(k,j),j=n.mul(oe,ae),R=n.mul(ee,R),R=n.sub(R,j),j=n.mul(ee,X),F=n.mul(oe,F),F=n.add(F,j),new S(R,k,F)}subtract(O){return this.add(O.negate())}is0(){return this.equals(S.ZERO)}multiply(O){const{endo:P}=e;if(!s.isValidNot0(O))throw new Error("invalid scalar: out of range");let U,L;const H=q=>_.wNAFCached(this,q,S.normalizeZ);if(P){const{k1neg:q,k1:$,k2neg:R,k2:k}=P.splitScalar(O),{p:F,f:K}=H($),{p:W,f:j}=H(k);L=K.add(j),U=I(P.beta,F,W,q,R)}else{const{p:q,f:$}=H(O);U=q,L=$}return S.normalizeZ([U,L])[0]}multiplyUnsafe(O){const{endo:P}=e,U=this;if(!s.isValid(O))throw new Error("invalid scalar: out of range");if(O===ih||U.is0())return S.ZERO;if(O===rh)return U;if(_.hasPrecomputes(this))return this.multiply(O);if(P){const{k1neg:L,k1:H,k2neg:q,k2:$}=P.splitScalar(O),{p1:R,p2:k}=fQ(S,U,H,$);return I(P.beta,R,k,L,q)}else return _.wNAFCachedUnsafe(U,O)}multiplyAndAddUnsafe(O,P,U){const L=this.multiplyUnsafe(P).add(O.multiplyUnsafe(U));return L.is0()?void 0:L}toAffine(O){return T(this,O)}isTorsionFree(){const{isTorsionFree:O}=e;return i===rh?!0:O?O(S,this):_.wNAFCachedUnsafe(this,r).is0()}clearCofactor(){const{clearCofactor:O}=e;return i===rh?this:O?O(S,this):this.multiplyUnsafe(i)}toBytes(O=!0){return ym("isCompressed",O),this.assertValidity(),h(S,this,O)}toRawBytes(O=!0){return this.toBytes(O)}toHex(O=!0){return Oh(this.toBytes(O))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=s;const A=s.BITS,_=uQ(S,e.endo?Math.ceil(A/2):A);return S}function AO(t){return Uint8Array.of(t?2:3)}function NQ(t,e,n={}){qm(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const s=e.randomBytes||gf,i=e.hmac||((U,...L)=>zm(e.hash,U,Fc(...L))),{Fp:r,Fn:c}=t,{ORDER:l,BITS:f}=c;function d(U){const L=l>>rh;return U>L}function h(U){return d(U)?c.neg(U):U}function g(U,L){if(!c.isValidNot0(L))throw new Error(`invalid signature ${U}: out of range 1..CURVE.n`)}class m{constructor(L,H,q){g("r",L),g("s",H),this.r=L,this.s=H,q!=null&&(this.recovery=q),Object.freeze(this)}static fromCompact(L){const H=c.BYTES,q=Is("compactSignature",L,H*2);return new m(c.fromBytes(q.subarray(0,H)),c.fromBytes(q.subarray(H,H*2)))}static fromDER(L){const{r:H,s:q}=Ca.toSig(Is("DER",L));return new m(H,q)}assertValidity(){}addRecoveryBit(L){return new m(this.r,this.s,L)}recoverPublicKey(L){const H=r.ORDER,{r:q,s:$,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(l*xQ<H&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?q+l:q;if(!r.isValid(k))throw new Error("recovery id 2 or 3 invalid");const F=r.toBytes(k),K=t.fromHex(Fc(AO((R&1)===0),F)),W=c.inv(k),j=N(Is("msgHash",L)),X=c.create(-j*W),Z=c.create($*W),ee=t.BASE.multiplyUnsafe(X).add(K.multiplyUnsafe(Z));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c.neg(this.s),this.recovery):this}toBytes(L){if(L==="compact")return Fc(c.toBytes(this.r),c.toBytes(this.s));if(L==="der")return ZE(Ca.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Oh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Oh(this.toBytes("compact"))}}const y=CO(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),w={isValidPrivateKey(U){try{return y(U),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const U=l;return aQ(s(bO(U)),U)},precompute(U=8,L=t.BASE){return L.precompute(U,!1)}};function v(U,L=!0){return t.fromPrivateKey(U).toBytes(L)}function E(U){if(typeof U=="bigint")return!1;if(U instanceof t)return!0;const L=Is("key",U).length,H=r.BYTES,q=H+1,$=2*H+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===q))return L===q||L===$}function C(U,L,H=!0){if(E(U)===!0)throw new Error("first arg must be private key");if(E(L)===!1)throw new Error("second arg must be public key");return t.fromHex(L).multiply(y(U)).toBytes(H)}const T=e.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const L=Fm(U),H=U.length*8-f;return H>0?L>>BigInt(H):L},N=e.bits2int_modN||function(U){return c.create(T(U))},I=Vm(f);function S(U){return t2("num < 2^"+f,U,ih,I),c.toBytes(U)}function A(U,L,H=_){if(["recovered","canonical"].some(ee=>ee in H))throw new Error("sign() legacy options not supported");const{hash:q}=e;let{lowS:$,prehash:R,extraEntropy:k}=H;$==null&&($=!0),U=Is("msgHash",U),a5(H),R&&(U=Is("prehashed msgHash",q(U)));const F=N(U),K=y(L),W=[S(K),S(F)];if(k!=null&&k!==!1){const ee=k===!0?s(r.BYTES):k;W.push(Is("extraEntropy",ee))}const j=Fc(...W),X=F;function Z(ee){const ae=T(ee);if(!c.isValidNot0(ae))return;const oe=c.inv(ae),be=t.BASE.multiply(ae).toAffine(),Ae=c.create(be.x);if(Ae===ih)return;const Ne=c.create(oe*c.create(X+Ae*K));if(Ne===ih)return;let We=(be.x===Ae?0:2)|Number(be.y&rh),Qe=Ne;return $&&d(Ne)&&(Qe=h(Ne),We^=1),new m(Ae,Qe,We)}return{seed:j,k2sig:Z}}const _={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function O(U,L,H=_){const{seed:q,k2sig:$}=A(U,L,H);return QX(e.hash.outputLen,c.BYTES,i)(q,$)}t.BASE.precompute(8);function P(U,L,H,q=D){const $=U;L=Is("msgHash",L),H=Is("publicKey",H),a5(q);const{lowS:R,prehash:k,format:F}=q;if("strict"in q)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&!["compact","der","js"].includes(F))throw new Error('format must be "compact", "der" or "js"');const K=typeof $=="string"||YE($),W=!K&&!F&&typeof $=="object"&&$!==null&&typeof $.r=="bigint"&&typeof $.s=="bigint";if(!K&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,X;try{if(W)if(F===void 0||F==="js")j=new m($.r,$.s);else throw new Error("invalid format");if(K){try{F!=="compact"&&(j=m.fromDER($))}catch(We){if(!(We instanceof Ca.Err))throw We}!j&&F!=="der"&&(j=m.fromCompact($))}X=t.fromHex(H)}catch{return!1}if(!j||R&&j.hasHighS())return!1;k&&(L=e.hash(L));const{r:Z,s:ee}=j,ae=N(L),oe=c.inv(ee),be=c.create(ae*oe),Ae=c.create(Z*oe),Ne=t.BASE.multiplyUnsafe(be).add(X.multiplyUnsafe(Ae));return Ne.is0()?!1:c.create(Ne.x)===Z}return Object.freeze({getPublicKey:v,getSharedSecret:C,sign:O,verify:P,utils:w,Point:t,Signature:m})}function TQ(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,s=mf(e.n,t.nBitLength),i={Fp:n,Fn:s,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function IQ(t){const{CURVE:e,curveOpts:n}=TQ(t),s={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:s}}function DQ(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function _Q(t){const{CURVE:e,curveOpts:n,ecdsaOpts:s}=IQ(t),i=AQ(e,n),r=NQ(i,s,n);return DQ(t,r)}function s2(t,e){const n=s=>_Q({...t,hash:s});return{...n(e),create:n}}const NO={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},TO={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},IO={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},OQ=mf(NO.p),MQ=mf(TO.p),RQ=mf(IO.p),PQ=s2({...NO,Fp:OQ,lowS:!1},jm);s2({...TO,Fp:MQ,lowS:!1},HY),s2({...IO,Fp:RQ,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},zY);const $Q=PQ,DO="base10",ls="base16",sr="base64pad",$o="base64url",bp="utf8",_O=0,Ia=1,Ep=2,UQ=0,o5=1,ah=12,ix=32;function LQ(){const t=n2.utils.randomPrivateKey(),e=n2.getPublicKey(t);return{privateKey:Ms(t,ls),publicKey:Ms(e,ls)}}function i2(){const t=gf(ix);return Ms(t,ls)}function kQ(t,e){const n=n2.getSharedSecret(Oi(t,ls),Oi(e,ls)),s=GX(Hm,n,void 0,void 0,ix);return Ms(s,ls)}function B0(t){const e=Hm(Oi(t,ls));return Ms(e,ls)}function Or(t){const e=Hm(Oi(t,bp));return Ms(e,ls)}function OO(t){return Oi(`${t}`,DO)}function il(t){return Number(Ms(t,DO))}function MO(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function RO(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function BQ(t){const e=OO(typeof t.type<"u"?t.type:_O);if(il(e)===Ia&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Oi(t.senderPublicKey,ls):void 0,s=typeof t.iv<"u"?Oi(t.iv,ls):gf(ah),i=Oi(t.symKey,ls),r=fO(i,s).encrypt(Oi(t.message,bp)),c=PO({type:e,sealed:r,iv:s,senderPublicKey:n});return t.encoding===$o?MO(c):c}function jQ(t){const e=Oi(t.symKey,ls),{sealed:n,iv:s}=Rh({encoded:t.encoded,encoding:t.encoding}),i=fO(e,s).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Ms(i,bp)}function zQ(t,e){const n=OO(Ep),s=gf(ah),i=Oi(t,bp),r=PO({type:n,sealed:i,iv:s});return e===$o?MO(r):r}function HQ(t,e){const{sealed:n}=Rh({encoded:t,encoding:e});return Ms(n,bp)}function PO(t){if(il(t.type)===Ep)return Ms(nh([t.type,t.sealed]),sr);if(il(t.type)===Ia){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ms(nh([t.type,t.senderPublicKey,t.iv,t.sealed]),sr)}return Ms(nh([t.type,t.iv,t.sealed]),sr)}function Rh(t){const e=(t.encoding||sr)===$o?RO(t.encoded):t.encoded,n=Oi(e,sr),s=n.slice(UQ,o5),i=o5;if(il(s)===Ia){const f=i+ix,d=f+ah,h=n.slice(i,f),g=n.slice(f,d),m=n.slice(d);return{type:s,sealed:m,iv:g,senderPublicKey:h}}if(il(s)===Ep){const f=n.slice(i),d=gf(ah);return{type:s,sealed:f,iv:d}}const r=i+ah,c=n.slice(i,r),l=n.slice(r);return{type:s,sealed:l,iv:c}}function FQ(t,e){const n=Rh({encoded:t,encoding:e?.encoding});return $O({type:il(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ms(n.senderPublicKey,ls):void 0,receiverPublicKey:e?.receiverPublicKey})}function $O(t){const e=t?.type||_O;if(e===Ia){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function c5(t){return t.type===Ia&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function l5(t){return t.type===Ep}function VQ(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return nh([new Uint8Array([4]),e,n])}function qQ(t,e){const[n,s,i]=t.split("."),r=Buffer.from(RO(i),"base64");if(r.length!==64)throw new Error("Invalid signature length");const c=r.slice(0,32),l=r.slice(32,64),f=`${n}.${s}`,d=Hm(f),h=VQ(e);if(!$Q.verify(nh([c,l]),d,h))throw new Error("Invalid signature");return Bb(t).payload}const WQ="irn";function vm(t){return t?.relay||{protocol:WQ}}function Vd(t){const e=IG[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function KQ(t,e="-"){const n={},s="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(s)){const r=i.replace(s,""),c=t[i];n[r]=c}}),n}function u5(t){if(!t.includes("wc:")){const d=W_(t);d!=null&&d.includes("wc:")&&(t=d)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,s=t.substring(0,e),i=t.substring(e+1,n).split("@"),r=typeof n<"u"?t.substring(n):"",c=new URLSearchParams(r),l={};c.forEach((d,h)=>{l[h]=d});const f=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:s,topic:GQ(i[0]),version:parseInt(i[1],10),symKey:l.symKey,relay:KQ(l),methods:f,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function GQ(t){return t.startsWith("//")?t.substring(2):t}function YQ(t,e="-"){const n="relay",s={};return Object.keys(t).forEach(i=>{const r=i,c=n+e+r;t[r]&&(s[c]=t[r])}),s}function f5(t){const e=new URLSearchParams,n=YQ(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const s=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${s}`}function p0(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var XQ=Object.defineProperty,QQ=Object.defineProperties,ZQ=Object.getOwnPropertyDescriptors,d5=Object.getOwnPropertySymbols,JQ=Object.prototype.hasOwnProperty,eZ=Object.prototype.propertyIsEnumerable,h5=(t,e,n)=>e in t?XQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tZ=(t,e)=>{for(var n in e||(e={}))JQ.call(e,n)&&h5(t,n,e[n]);if(d5)for(var n of d5(e))eZ.call(e,n)&&h5(t,n,e[n]);return t},nZ=(t,e)=>QQ(t,ZQ(e));function yf(t){const e=[];return t.forEach(n=>{const[s,i]=n.split(":");e.push(`${s}:${i}`)}),e}function sZ(t){const e=[];return Object.values(t).forEach(n=>{e.push(...yf(n.accounts))}),e}function iZ(t,e){const n=[];return Object.values(t).forEach(s=>{yf(s.accounts).includes(e)&&n.push(...s.methods)}),n}function rZ(t,e){const n=[];return Object.values(t).forEach(s=>{yf(s.accounts).includes(e)&&n.push(...s.events)}),n}function Wm(t){return t.includes(":")}function Lu(t){return Wm(t)?t.split(":")[0]:t}function p5(t){var e,n,s;const i={};if(!jr(t))return i;for(const[r,c]of Object.entries(t)){const l=Wm(r)?[r]:c.chains,f=c.methods||[],d=c.events||[],h=Lu(r);i[h]=nZ(tZ({},i[h]),{chains:Br(l,(e=i[h])==null?void 0:e.chains),methods:Br(f,(n=i[h])==null?void 0:n.methods),events:Br(d,(s=i[h])==null?void 0:s.events)})}return i}function aZ(t){const e={};return t?.forEach(n=>{var s;const[i,r]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(s=e[i].chains)==null||s.push(`${i}:${r}`)}),e}function g5(t,e){e=e.map(s=>s.replace("did:pkh:",""));const n=aZ(e);for(const[s,i]of Object.entries(n))i.methods?i.methods=Br(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function oZ(t,e){var n,s,i,r,c,l;const f=p5(t),d=p5(e),h={},g=Object.keys(f).concat(Object.keys(d));for(const m of g)h[m]={chains:Br((n=f[m])==null?void 0:n.chains,(s=d[m])==null?void 0:s.chains),methods:Br((i=f[m])==null?void 0:i.methods,(r=d[m])==null?void 0:r.methods),events:Br((c=f[m])==null?void 0:c.events,(l=d[m])==null?void 0:l.events)};return h}const cZ={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},lZ={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ye(t,e){const{message:n,code:s}=lZ[t];return{message:e?`${n} ${e}`:n,code:s}}function zt(t,e){const{message:n,code:s}=cZ[t];return{message:e?`${n} ${e}`:n,code:s}}function Da(t,e){return!!Array.isArray(t)}function jr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ln(t){return typeof t>"u"}function on(t,e){return e&&Ln(t)?!0:typeof t=="string"&&!!t.trim().length}function rx(t,e){return e&&Ln(t)?!0:typeof t=="number"&&!isNaN(t)}function uZ(t,e){const{requiredNamespaces:n}=e,s=Object.keys(t.namespaces),i=Object.keys(n);let r=!0;return Hc(i,s)?(s.forEach(c=>{const{accounts:l,methods:f,events:d}=t.namespaces[c],h=yf(l),g=n[c];(!Hc(z_(c,g),h)||!Hc(g.methods,f)||!Hc(g.events,d))&&(r=!1)}),r):!1}function bm(t){return on(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function fZ(t){if(on(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&bm(n)}}return!1}function dZ(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(on(t,!1)){if(e(t))return!0;const n=W_(t);return e(n)}}catch{}return!1}function hZ(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function pZ(t){return t?.topic}function gZ(t,e){let n=null;return on(t?.publicKey,!1)||(n=ye("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function m5(t){let e=!0;return Da(t)?t.length&&(e=t.every(n=>on(n,!1))):e=!1,e}function mZ(t,e,n){let s=null;return Da(e)&&e.length?e.forEach(i=>{s||bm(i)||(s=zt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):bm(t)||(s=zt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function yZ(t,e,n){let s=null;return Object.entries(t).forEach(([i,r])=>{if(s)return;const c=mZ(i,z_(i,r),`${e} ${n}`);c&&(s=c)}),s}function wZ(t,e){let n=null;return Da(t)?t.forEach(s=>{n||fZ(s)||(n=zt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):n=zt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function vZ(t,e){let n=null;return Object.values(t).forEach(s=>{if(n)return;const i=wZ(s?.accounts,`${e} namespace`);i&&(n=i)}),n}function bZ(t,e){let n=null;return m5(t?.methods)?m5(t?.events)||(n=zt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=zt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function UO(t,e){let n=null;return Object.values(t).forEach(s=>{if(n)return;const i=bZ(s,`${e}, namespace`);i&&(n=i)}),n}function EZ(t,e,n){let s=null;if(t&&jr(t)){const i=UO(t,e);i&&(s=i);const r=yZ(t,e,n);r&&(s=r)}else s=ye("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return s}function Av(t,e){let n=null;if(t&&jr(t)){const s=UO(t,e);s&&(n=s);const i=vZ(t,e);i&&(n=i)}else n=ye("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function LO(t){return on(t.protocol,!0)}function xZ(t,e){let n=!1;return t?t&&Da(t)&&t.length&&t.forEach(s=>{n=LO(s)}):n=!0,n}function SZ(t){return typeof t=="number"}function Ts(t){return typeof t<"u"&&typeof t!==null}function CZ(t){return!(!t||typeof t!="object"||!t.code||!rx(t.code,!1)||!t.message||!on(t.message,!1))}function AZ(t){return!(Ln(t)||!on(t.method,!1))}function NZ(t){return!(Ln(t)||Ln(t.result)&&Ln(t.error)||!rx(t.id,!1)||!on(t.jsonrpc,!1))}function TZ(t){return!(Ln(t)||!on(t.name,!1))}function y5(t,e){return!(!bm(e)||!sZ(t).includes(e))}function IZ(t,e,n){return on(n,!1)?iZ(t,e).includes(n):!1}function DZ(t,e,n){return on(n,!1)?rZ(t,e).includes(n):!1}function w5(t,e,n){let s=null;const i=_Z(t),r=OZ(e),c=Object.keys(i),l=Object.keys(r),f=v5(Object.keys(t)),d=v5(Object.keys(e)),h=f.filter(g=>!d.includes(g));return h.length&&(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),Hc(c,l)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||s)return;const m=yf(e[g].accounts);m.includes(g)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${m.toString()}`))}),c.forEach(g=>{s||(Hc(i[g].methods,r[g].methods)?Hc(i[g].events,r[g].events)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${g}`)):s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${g}`))}),s}function _Z(t){const e={};return Object.keys(t).forEach(n=>{var s;n.includes(":")?e[n]=t[n]:(s=t[n].chains)==null||s.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function v5(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function OZ(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:yf(t[n].accounts)?.forEach(i=>{e[i]={accounts:t[n].accounts.filter(r=>r.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}),e}function MZ(t,e){return rx(t,!1)&&t<=e.max&&t>=e.min}function b5(){const t=wp();return new Promise(e=>{switch(t){case Js.browser:e(RZ());break;case Js.reactNative:e(PZ());break;case Js.node:e($Z());break;default:e(!0)}})}function RZ(){return pf()&&navigator?.onLine}async function PZ(){return Qo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function $Z(){return!0}function UZ(t){switch(wp()){case Js.browser:LZ(t);break;case Js.reactNative:kZ(t);break}}function LZ(t){!Qo()&&pf()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function kZ(t){Qo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function BZ(){var t;return pf()&&$a.getDocument()?((t=$a.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const Nv={};class Od{static get(e){return Nv[e]}static set(e,n){Nv[e]=n}static delete(e){delete Nv[e]}}function jZ(t){const e=hf.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function zZ({publicKey:t,signature:e,payload:n}){var s;const i=r2(n.method),r=128|parseInt(((s=n.version)==null?void 0:s.toString())||"4"),c=VZ(n.address),l=n.era==="00"?new Uint8Array([0]):r2(n.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const f=parseInt(n.nonce,16),d=new Uint8Array([f&255,f>>8&255]),h=BigInt(`0x${FZ(n.tip)}`),g=WZ(h),m=new Uint8Array([0,...t,c,...e,...l,...d,...g,...i]),y=qZ(m.length+1);return new Uint8Array([...y,r,...m])}function HZ(t){const e=r2(t),n=MG.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function r2(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function FZ(t){return t.startsWith("0x")?t.slice(2):t}function VZ(t){const e=hf.decode(t)[0];return e===42?0:e===60?2:1}function qZ(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function WZ(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function KZ(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=jZ(t.transaction.address),s=zZ({publicKey:n,signature:e,payload:t.transaction}),i=Buffer.from(s).toString("hex");return HZ(i)}const GZ="PARSE_ERROR",YZ="INVALID_REQUEST",XZ="METHOD_NOT_FOUND",QZ="INVALID_PARAMS",kO="INTERNAL_ERROR",ax="SERVER_ERROR",ZZ=[-32700,-32600,-32601,-32602,-32603],oh={[GZ]:{code:-32700,message:"Parse error"},[YZ]:{code:-32600,message:"Invalid Request"},[XZ]:{code:-32601,message:"Method not found"},[QZ]:{code:-32602,message:"Invalid params"},[kO]:{code:-32603,message:"Internal error"},[ax]:{code:-32e3,message:"Server error"}},BO=ax;function JZ(t){return ZZ.includes(t)}function E5(t){return Object.keys(oh).includes(t)?oh[t]:oh[BO]}function eJ(t){const e=Object.values(oh).find(n=>n.code===t);return e||oh[BO]}function jO(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Tv={},wa={},x5;function tJ(){if(x5)return wa;x5=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.isBrowserCryptoAvailable=wa.getSubtleCrypto=wa.getBrowerCrypto=void 0;function t(){return Jn?.crypto||Jn?.msCrypto||{}}wa.getBrowerCrypto=t;function e(){const s=t();return s.subtle||s.webkitSubtle}wa.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return wa.isBrowserCryptoAvailable=n,wa}var va={},S5;function nJ(){if(S5)return va;S5=1,Object.defineProperty(va,"__esModule",{value:!0}),va.isBrowser=va.isNode=va.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}va.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}va.isNode=e;function n(){return!t()&&!e()}return va.isBrowser=n,va}var C5;function sJ(){return C5||(C5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(tJ(),t),e.__exportStar(nJ(),t)})(Tv)),Tv}var iJ=sJ();function Dr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Wc(t=6){return BigInt(Dr(t))}function Bo(t,e,n){return{id:n||Dr(),jsonrpc:"2.0",method:t,params:e}}function Km(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gm(t,e,n){return{id:t,jsonrpc:"2.0",error:rJ(e)}}function rJ(t,e){return typeof t>"u"?E5(kO):(typeof t=="string"&&(t=Object.assign(Object.assign({},E5(ax)),{message:t})),JZ(t.code)&&(t=eJ(t.code)),t)}let aJ=class{},oJ=class extends aJ{constructor(){super()}},cJ=class extends oJ{constructor(e){super()}};const lJ="^https?:",uJ="^wss?:";function fJ(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function zO(t,e){const n=fJ(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function A5(t){return zO(t,lJ)}function N5(t){return zO(t,uJ)}function dJ(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function HO(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ox(t){return HO(t)&&"method"in t}function Ym(t){return HO(t)&&(_r(t)||Ii(t))}function _r(t){return"result"in t}function Ii(t){return"error"in t}let Ui=class extends cJ{constructor(e){super(e),this.events=new $i.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Bo(e.method,e.params||[],e.id||Wc().toString()),n)}async requestStrict(e,n){return new Promise(async(s,i)=>{if(!this.connection.connected)try{await this.open()}catch(r){i(r)}this.events.on(`${e.id}`,r=>{Ii(r)?i(r.error):s(r.result)});try{await this.connection.send(e,n)}catch(r){i(r)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ym(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const hJ=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),pJ=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",T5=t=>t.split("?")[0],I5=10,gJ=hJ();let mJ=class{constructor(e){if(this.url=e,this.events=new $i.EventEmitter,this.registering=!1,!N5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Pa(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!N5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,s)=>{const i=iJ.isReactNative()?void 0:{rejectUnauthorized:!dJ(e)},r=new gJ(e,[],i);pJ()?r.onerror=c=>{const l=c;s(this.emitError(l.error))}:r.on("error",c=>{s(this.emitError(c))}),r.onopen=()=>{this.onOpen(r),n(r)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const s=this.parseError(n),i=s.message||s.toString(),r=Gm(e,i);this.events.emit("payload",r)}parseError(e,n=this.url){return jO(e,T5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>I5&&this.events.setMaxListeners(I5)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${T5(this.url)}`));return this.events.emit("register_error",n),n}};var yJ={};const FO="wc",VO=2,a2="core",Hr=`${FO}@2:${a2}:`,wJ={logger:"error"},vJ={database:":memory:"},bJ="crypto",D5="client_ed25519_seed",EJ=we.ONE_DAY,xJ="keychain",SJ="0.3",CJ="messages",AJ="0.3",_5=we.SIX_HOURS,NJ="publisher",qO="irn",TJ="error",WO="wss://relay.walletconnect.org",IJ="relayer",Sn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},DJ="_subscription",Ei={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_J=.1,o2="2.21.5",kt={link_mode:"link_mode",relay:"relay"},j0={inbound:"inbound",outbound:"outbound"},OJ="0.3",MJ="WALLETCONNECT_CLIENT_ID",O5="WALLETCONNECT_LINK_MODE_APPS",Ws={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},RJ="subscription",PJ="0.3",$J="pairing",UJ="0.3",Md={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},kc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Yi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},LJ="history",kJ="0.3",BJ="expirer",Ti={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},jJ="0.3",zJ="verify-api",HJ="https://verify.walletconnect.com",KO="https://verify.walletconnect.org",ch=KO,FJ=`${ch}/v3`,VJ=[HJ,KO],qJ="echo",WJ="https://echo.walletconnect.com",Ir={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Sa={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Xi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ic={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Dc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Rd={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},KJ=.1,GJ="event-client",YJ=86400,XJ="https://pulse.walletconnect.org/batch";function QJ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,E=0,C=0,T=w.length;C!==T&&w[C]===0;)C++,v++;for(var N=(T-C)*h+1>>>0,I=new Uint8Array(N);C!==T;){for(var S=w[C],A=0,_=N-1;(S!==0||A<E)&&_!==-1;_--,A++)S+=256*I[_]>>>0,I[_]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");E=A,C++}for(var D=N-E;D!==N&&I[D]===0;)D++;for(var O=f.repeat(v);D<N;++D)O+=t.charAt(I[D]);return O}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var E=0,C=0;w[v]===f;)E++,v++;for(var T=(w.length-v)*d+1>>>0,N=new Uint8Array(T);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=T-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var _=T-C;_!==T&&N[_]===0;)_++;for(var D=new Uint8Array(E+(T-_)),O=E;_!==T;)D[O++]=N[_++];return D}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var ZJ=QJ,JJ=ZJ;const GO=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eee=t=>new TextEncoder().encode(t),tee=t=>new TextDecoder().decode(t);class nee{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class see{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YO(this,e)}}class iee{constructor(e){this.decoders=e}or(e){return YO(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const YO=(t,e)=>new iee({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class ree{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new nee(e,n,s),this.decoder=new see(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xm=({name:t,prefix:e,encode:n,decode:s})=>new ree(t,e,n,s),xp=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=JJ(n,e);return Xm({prefix:t,name:e,encode:s,decode:r=>GO(i(r))})},aee=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},oee=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},Hn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>Xm({prefix:e,name:t,encode(i){return oee(i,s,n)},decode(i){return aee(i,s,n,t)}}),cee=Xm({prefix:"\0",name:"identity",encode:t=>tee(t),decode:t=>eee(t)});var lee=Object.freeze({__proto__:null,identity:cee});const uee=Hn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fee=Object.freeze({__proto__:null,base2:uee});const dee=Hn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hee=Object.freeze({__proto__:null,base8:dee});const pee=xp({prefix:"9",name:"base10",alphabet:"0123456789"});var gee=Object.freeze({__proto__:null,base10:pee});const mee=Hn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yee=Hn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wee=Object.freeze({__proto__:null,base16:mee,base16upper:yee});const vee=Hn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bee=Hn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Eee=Hn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xee=Hn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),See=Hn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cee=Hn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Aee=Hn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nee=Hn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tee=Hn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Iee=Object.freeze({__proto__:null,base32:vee,base32upper:bee,base32pad:Eee,base32padupper:xee,base32hex:See,base32hexupper:Cee,base32hexpad:Aee,base32hexpadupper:Nee,base32z:Tee});const Dee=xp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_ee=xp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oee=Object.freeze({__proto__:null,base36:Dee,base36upper:_ee});const Mee=xp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ree=xp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pee=Object.freeze({__proto__:null,base58btc:Mee,base58flickr:Ree});const $ee=Hn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Uee=Hn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lee=Hn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kee=Hn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Bee=Object.freeze({__proto__:null,base64:$ee,base64pad:Uee,base64url:Lee,base64urlpad:kee});const XO=Array.from(""),jee=XO.reduce((t,e,n)=>(t[n]=e,t),[]),zee=XO.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Hee(t){return t.reduce((e,n)=>(e+=jee[n],e),"")}function Fee(t){const e=[];for(const n of t){const s=zee[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const Vee=Xm({prefix:"",name:"base256emoji",encode:Hee,decode:Fee});var qee=Object.freeze({__proto__:null,base256emoji:Vee}),Wee=QO,M5=128,Kee=-128,Gee=Math.pow(2,31);function QO(t,e,n){e=e||[],n=n||0;for(var s=n;t>=Gee;)e[n++]=t&255|M5,t/=128;for(;t&Kee;)e[n++]=t&255|M5,t>>>=7;return e[n]=t|0,QO.bytes=n-s+1,e}var Yee=c2,Xee=128,R5=127;function c2(t,s){var n=0,s=s||0,i=0,r=s,c,l=t.length;do{if(r>=l)throw c2.bytes=0,new RangeError("Could not decode varint");c=t[r++],n+=i<28?(c&R5)<<i:(c&R5)*Math.pow(2,i),i+=7}while(c>=Xee);return c2.bytes=r-s,n}var Qee=Math.pow(2,7),Zee=Math.pow(2,14),Jee=Math.pow(2,21),ete=Math.pow(2,28),tte=Math.pow(2,35),nte=Math.pow(2,42),ste=Math.pow(2,49),ite=Math.pow(2,56),rte=Math.pow(2,63),ate=function(t){return t<Qee?1:t<Zee?2:t<Jee?3:t<ete?4:t<tte?5:t<nte?6:t<ste?7:t<ite?8:t<rte?9:10},ote={encode:Wee,decode:Yee,encodingLength:ate},ZO=ote;const P5=(t,e,n=0)=>(ZO.encode(t,e,n),e),$5=t=>ZO.encodingLength(t),l2=(t,e)=>{const n=e.byteLength,s=$5(t),i=s+$5(n),r=new Uint8Array(i+n);return P5(t,r,0),P5(n,r,s),r.set(e,i),new cte(t,n,e,r)};class cte{constructor(e,n,s,i){this.code=e,this.size=n,this.digest=s,this.bytes=i}}const JO=({name:t,code:e,encode:n})=>new lte(t,e,n);class lte{constructor(e,n,s){this.name=e,this.code=n,this.encode=s}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?l2(this.code,n):n.then(s=>l2(this.code,s))}else throw Error("Unknown type, must be binary type")}}const eM=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),ute=JO({name:"sha2-256",code:18,encode:eM("SHA-256")}),fte=JO({name:"sha2-512",code:19,encode:eM("SHA-512")});var dte=Object.freeze({__proto__:null,sha256:ute,sha512:fte});const tM=0,hte="identity",nM=GO,pte=t=>l2(tM,nM(t)),gte={code:tM,name:hte,encode:nM,digest:pte};var mte=Object.freeze({__proto__:null,identity:gte});new TextEncoder,new TextDecoder;const U5={...lee,...fee,...hee,...gee,...wee,...Iee,...Oee,...Pee,...Bee,...qee};({...dte,...mte});function sM(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function yte(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?sM(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function iM(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const L5=iM("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Iv=iM("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=yte(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),wte={utf8:L5,"utf-8":L5,hex:U5.base16,latin1:Iv,ascii:Iv,binary:Iv,...U5};function vte(t,e="utf8"){const n=wte[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?sM(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var bte=Object.defineProperty,Ete=(t,e,n)=>e in t?bte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ar=(t,e,n)=>Ete(t,typeof e!="symbol"?e+"":e,n);let xte=class{constructor(e,n){this.core=e,this.logger=n,Ar(this,"keychain",new Map),Ar(this,"name",xJ),Ar(this,"version",SJ),Ar(this,"initialized",!1),Ar(this,"storagePrefix",Hr),Ar(this,"init",async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}}),Ar(this,"has",s=>(this.isInitialized(),this.keychain.has(s))),Ar(this,"set",async(s,i)=>{this.isInitialized(),this.keychain.set(s,i),await this.persist()}),Ar(this,"get",s=>{this.isInitialized();const i=this.keychain.get(s);if(typeof i>"u"){const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(r)}return i}),Ar(this,"del",async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()}),this.core=e,this.logger=us(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Kb(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Gb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Ste=Object.defineProperty,Cte=(t,e,n)=>e in t?Ste(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>Cte(t,typeof e!="symbol"?e+"":e,n);class Ate{constructor(e,n,s){this.core=e,this.logger=n,Mn(this,"name",bJ),Mn(this,"keychain"),Mn(this,"randomSessionIdentifier",i2()),Mn(this,"initialized",!1),Mn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Mn(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Mn(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),r=oT(i);return h_(r.publicKey)}),Mn(this,"generateKeyPair",()=>{this.isInitialized();const i=LQ();return this.setPrivateKey(i.publicKey,i.privateKey)}),Mn(this,"signJWT",async i=>{this.isInitialized();const r=await this.getClientSeed(),c=oT(r),l=this.randomSessionIdentifier;return await Hq(l,i,EJ,c)}),Mn(this,"generateSharedKey",(i,r,c)=>{this.isInitialized();const l=this.getPrivateKey(i),f=kQ(l,r);return this.setSymKey(f,c)}),Mn(this,"setSymKey",async(i,r)=>{this.isInitialized();const c=r||B0(i);return await this.keychain.set(c,i),c}),Mn(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Mn(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Mn(this,"encode",async(i,r,c)=>{this.isInitialized();const l=$O(c),f=Pa(r);if(l5(l))return zQ(f,c?.encoding);if(c5(l)){const m=l.senderPublicKey,y=l.receiverPublicKey;i=await this.generateSharedKey(m,y)}const d=this.getSymKey(i),{type:h,senderPublicKey:g}=l;return BQ({type:h,symKey:d,message:f,senderPublicKey:g,encoding:c?.encoding})}),Mn(this,"decode",async(i,r,c)=>{this.isInitialized();const l=FQ(r,c);if(l5(l)){const f=HQ(r,c?.encoding);return nl(f)}if(c5(l)){const f=l.receiverPublicKey,d=l.senderPublicKey;i=await this.generateSharedKey(f,d)}try{const f=this.getSymKey(i),d=jQ({symKey:f,encoded:r,encoding:c?.encoding});return nl(d)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}}),Mn(this,"getPayloadType",(i,r=sr)=>{const c=Rh({encoded:i,encoding:r});return il(c.type)}),Mn(this,"getPayloadSenderPublicKey",(i,r=sr)=>{const c=Rh({encoded:i,encoding:r});return c.senderPublicKey?Ms(c.senderPublicKey,ls):void 0}),this.core=e,this.logger=us(n,this.name),this.keychain=s||new xte(this.core,this.logger)}get context(){return Ps(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(D5)}catch{e=i2(),await this.keychain.set(D5,e)}return vte(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nte=Object.defineProperty,Tte=Object.defineProperties,Ite=Object.getOwnPropertyDescriptors,k5=Object.getOwnPropertySymbols,Dte=Object.prototype.hasOwnProperty,_te=Object.prototype.propertyIsEnumerable,u2=(t,e,n)=>e in t?Nte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ote=(t,e)=>{for(var n in e||(e={}))Dte.call(e,n)&&u2(t,n,e[n]);if(k5)for(var n of k5(e))_te.call(e,n)&&u2(t,n,e[n]);return t},Mte=(t,e)=>Tte(t,Ite(e)),Vs=(t,e,n)=>u2(t,typeof e!="symbol"?e+"":e,n);class Rte extends jH{constructor(e,n){super(e,n),this.logger=e,this.core=n,Vs(this,"messages",new Map),Vs(this,"messagesWithoutClientAck",new Map),Vs(this,"name",CJ),Vs(this,"version",AJ),Vs(this,"initialized",!1),Vs(this,"storagePrefix",Hr),Vs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}}),Vs(this,"set",async(s,i,r)=>{this.isInitialized();const c=Or(i);let l=this.messages.get(s);if(typeof l>"u"&&(l={}),typeof l[c]<"u")return c;if(l[c]=i,this.messages.set(s,l),r===j0.inbound){const f=this.messagesWithoutClientAck.get(s)||{};this.messagesWithoutClientAck.set(s,Mte(Ote({},f),{[c]:i}))}return await this.persist(),c}),Vs(this,"get",s=>{this.isInitialized();let i=this.messages.get(s);return typeof i>"u"&&(i={}),i}),Vs(this,"getWithoutAck",s=>{this.isInitialized();const i={};for(const r of s){const c=this.messagesWithoutClientAck.get(r)||{};i[r]=Object.values(c)}return i}),Vs(this,"has",(s,i)=>{this.isInitialized();const r=this.get(s),c=Or(i);return typeof r[c]<"u"}),Vs(this,"ack",async(s,i)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(s);if(typeof r>"u")return;const c=Or(i);delete r[c],Object.keys(r).length===0?this.messagesWithoutClientAck.delete(s):this.messagesWithoutClientAck.set(s,r),await this.persist()}),Vs(this,"del",async s=>{this.isInitialized(),this.messages.delete(s),this.messagesWithoutClientAck.delete(s),await this.persist()}),this.logger=us(e,this.name),this.core=n}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Kb(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Kb(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Gb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Gb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Pte=Object.defineProperty,$te=Object.defineProperties,Ute=Object.getOwnPropertyDescriptors,B5=Object.getOwnPropertySymbols,Lte=Object.prototype.hasOwnProperty,kte=Object.prototype.propertyIsEnumerable,f2=(t,e,n)=>e in t?Pte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g0=(t,e)=>{for(var n in e||(e={}))Lte.call(e,n)&&f2(t,n,e[n]);if(B5)for(var n of B5(e))kte.call(e,n)&&f2(t,n,e[n]);return t},Dv=(t,e)=>$te(t,Ute(e)),Qi=(t,e,n)=>f2(t,typeof e!="symbol"?e+"":e,n);class Bte extends zH{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Qi(this,"events",new $i.EventEmitter),Qi(this,"name",NJ),Qi(this,"queue",new Map),Qi(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),Qi(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Qi(this,"needsTransportRestart",!1),Qi(this,"publish",async(s,i,r)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:i,opts:r}});const l=r?.ttl||_5,f=vm(r),d=r?.prompt||!1,h=r?.tag||0,g=r?.id||Wc().toString(),m={topic:s,message:i,opts:{ttl:l,relay:f,prompt:d,tag:h,id:g,attestation:r?.attestation,tvf:r?.tvf}},y=`Failed to publish payload, please try again. id:${g} tag:${h}`;try{const w=new Promise(async v=>{const E=({id:T})=>{m.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(Sn.publish,E),v(m))};this.relayer.events.on(Sn.publish,E);const C=ko(new Promise((T,N)=>{this.rpcPublish({topic:s,message:i,ttl:l,prompt:d,tag:h,id:g,attestation:r?.attestation,tvf:r?.tvf}).then(T).catch(I=>{this.logger.warn(I,I?.message),N(I)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${h}`);try{await C,this.events.removeListener(Sn.publish,E)}catch(T){this.queue.set(g,Dv(g0({},m),{attempt:1})),this.logger.warn(T,T?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:s,message:i,opts:r}}),await ko(w,this.publishTimeout,y)}catch(w){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(w),(c=r?.internal)!=null&&c.throwOnFailedPublish)throw w}finally{this.queue.delete(g)}}),Qi(this,"on",(s,i)=>{this.events.on(s,i)}),Qi(this,"once",(s,i)=>{this.events.once(s,i)}),Qi(this,"off",(s,i)=>{this.events.off(s,i)}),Qi(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.relayer=e,this.logger=us(n,this.name),this.registerEventListeners()}get context(){return Ps(this.logger)}async rpcPublish(e){var n,s,i,r;const{topic:c,message:l,ttl:f=_5,prompt:d,tag:h,id:g,attestation:m,tvf:y}=e,w={method:Vd(vm().protocol).publish,params:g0({topic:c,message:l,ttl:f,prompt:d,tag:h,attestation:m},y),id:g};Ln((n=w.params)==null?void 0:n.prompt)&&((s=w.params)==null||delete s.prompt),Ln((i=w.params)==null?void 0:i.tag)&&((r=w.params)==null||delete r.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:w});const v=await this.relayer.request(w);return this.relayer.events.emit(Sn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const s=e.attempt+1;this.queue.set(n,Dv(g0({},e),{attempt:s}));const{topic:i,message:r,opts:c,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${s}`),await this.rpcPublish(Dv(g0({},e),{topic:i,message:r,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:l,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ul.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Sn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Sn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var jte=Object.defineProperty,zte=(t,e,n)=>e in t?jte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uu=(t,e,n)=>zte(t,typeof e!="symbol"?e+"":e,n);class Hte{constructor(){uu(this,"map",new Map),uu(this,"set",(e,n)=>{const s=this.get(e);this.exists(e,n)||this.map.set(e,[...s,n])}),uu(this,"get",e=>this.map.get(e)||[]),uu(this,"exists",(e,n)=>this.get(e).includes(n)),uu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,n))return;const i=s.filter(r=>r!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),uu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Fte=Object.defineProperty,Vte=Object.defineProperties,qte=Object.getOwnPropertyDescriptors,j5=Object.getOwnPropertySymbols,Wte=Object.prototype.hasOwnProperty,Kte=Object.prototype.propertyIsEnumerable,d2=(t,e,n)=>e in t?Fte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pd=(t,e)=>{for(var n in e||(e={}))Wte.call(e,n)&&d2(t,n,e[n]);if(j5)for(var n of j5(e))Kte.call(e,n)&&d2(t,n,e[n]);return t},_v=(t,e)=>Vte(t,qte(e)),Ot=(t,e,n)=>d2(t,typeof e!="symbol"?e+"":e,n);class Gte extends VH{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ot(this,"subscriptions",new Map),Ot(this,"topicMap",new Hte),Ot(this,"events",new $i.EventEmitter),Ot(this,"name",RJ),Ot(this,"version",PJ),Ot(this,"pending",new Map),Ot(this,"cached",[]),Ot(this,"initialized",!1),Ot(this,"storagePrefix",Hr),Ot(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),Ot(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Ot(this,"clientId"),Ot(this,"batchSubscribeTopicsLimit",500),Ot(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ot(this,"subscribe",async(s,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:i}});try{const r=vm(i),c={topic:s,relay:r,transportType:i?.transportType};this.pending.set(s,c);const l=await this.rpcSubscribe(s,r,i);return typeof l=="string"&&(this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:i}})),l}catch(r){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(r),r}}),Ot(this,"unsubscribe",async(s,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(s,i.id,i):await this.unsubscribeByTopic(s,i)}),Ot(this,"isSubscribed",s=>new Promise(i=>{i(this.topicMap.topics.includes(s))})),Ot(this,"isKnownTopic",s=>new Promise(i=>{i(this.topicMap.topics.includes(s)||this.pending.has(s)||this.cached.some(r=>r.topic===s))})),Ot(this,"on",(s,i)=>{this.events.on(s,i)}),Ot(this,"once",(s,i)=>{this.events.once(s,i)}),Ot(this,"off",(s,i)=>{this.events.off(s,i)}),Ot(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),Ot(this,"start",async()=>{await this.onConnect()}),Ot(this,"stop",async()=>{await this.onDisconnect()}),Ot(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ot(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const s=[];this.pending.forEach(i=>{s.push(i)}),await this.batchSubscribe(s)}),Ot(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ul.pulse,async()=>{await this.checkPending()}),this.events.on(Ws.created,async s=>{const i=Ws.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:s}),await this.persist()}),this.events.on(Ws.deleted,async s=>{const i=Ws.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:s}),await this.persist()})}),this.relayer=e,this.logger=us(n,this.name),this.clientId=""}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let s=!1;try{s=this.getSubscription(e).topic===n}catch{}return s}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const s=this.topicMap.get(e);await Promise.all(s.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:s}});try{const i=vm(s);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const r=zt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,r),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:s}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,s){var i;(!s||s?.transportType===kt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const r={method:Vd(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});const c=(i=s?.internal)==null?void 0:i.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if(s?.transportType===kt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(r).catch(h=>this.logger.warn(h))},we.toMiliseconds(we.ONE_SECOND)),l;const f=new Promise(async h=>{const g=m=>{m.topic===e&&(this.events.removeListener(Ws.created,g),h(m.id))};this.events.on(Ws.created,g);try{const m=await ko(new Promise((y,w)=>{this.relayer.request(r).catch(v=>{this.logger.warn(v,v?.message),w(v)}).then(y)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ws.created,g),h(m)}catch{}}),d=await ko(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return d?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Sn.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,s={method:Vd(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await ko(new Promise(i=>{this.relayer.request(s).catch(r=>this.logger.warn(r)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Sn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,s={method:Vd(n.protocol).batchFetchMessages,params:{topics:e.map(r=>r.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});let i;try{i=await await ko(new Promise((r,c)=>{this.relayer.request(s).catch(l=>{this.logger.warn(l),c(l)}).then(r)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Sn.connection_stalled)}return i}rpcUnsubscribe(e,n,s){const i={method:Vd(s.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,_v(Pd({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Pd({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,s){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Pd({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ws.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Ws.deleted,_v(Pd({},s),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ws.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let s=0;s<n;s++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Ws.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>_v(Pd({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await rY(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Or(e+await this.getClientId())}}var Yte=Object.defineProperty,z5=Object.getOwnPropertySymbols,Xte=Object.prototype.hasOwnProperty,Qte=Object.prototype.propertyIsEnumerable,h2=(t,e,n)=>e in t?Yte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H5=(t,e)=>{for(var n in e||(e={}))Xte.call(e,n)&&h2(t,n,e[n]);if(z5)for(var n of z5(e))Qte.call(e,n)&&h2(t,n,e[n]);return t},ct=(t,e,n)=>h2(t,typeof e!="symbol"?e+"":e,n);class Zte extends HH{constructor(e){super(e),ct(this,"protocol","wc"),ct(this,"version",2),ct(this,"core"),ct(this,"logger"),ct(this,"events",new $i.EventEmitter),ct(this,"provider"),ct(this,"messages"),ct(this,"subscriber"),ct(this,"publisher"),ct(this,"name",IJ),ct(this,"transportExplicitlyClosed",!1),ct(this,"initialized",!1),ct(this,"connectionAttemptInProgress",!1),ct(this,"relayUrl"),ct(this,"projectId"),ct(this,"packageName"),ct(this,"bundleId"),ct(this,"hasExperiencedNetworkDisruption",!1),ct(this,"pingTimeout"),ct(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),ct(this,"reconnectTimeout"),ct(this,"connectPromise"),ct(this,"reconnectInProgress",!1),ct(this,"requestsInFlight",[]),ct(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),ct(this,"request",async n=>{var s,i;this.logger.debug("Publishing Request Payload");const r=n.id||Wc().toString();await this.toEstablishConnection();try{this.logger.trace({id:r,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - publishing...");const c=`${r}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(c);const l=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),l}catch(c){throw this.logger.debug(`Failed to Publish Request: ${r}`),c}}),ct(this,"resetPingTimeout",()=>{gm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,s,i,r;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(r=(i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||r.call(i)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),ct(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ct(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Sn.connect)}),ct(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),ct(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Sn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ct(this,"registerProviderListeners",()=>{this.provider.on(Ei.payload,this.onPayloadHandler),this.provider.on(Ei.connect,this.onConnectHandler),this.provider.on(Ei.disconnect,this.onDisconnectHandler),this.provider.on(Ei.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?us(e.logger,this.name):hp(gp({level:e.logger||TJ})),this.messages=new Rte(this.logger,e.core),this.subscriber=new Gte(this,this.logger),this.publisher=new Bte(this,this.logger),this.relayUrl=e?.relayUrl||WO,this.projectId=e.projectId,FG()?this.packageName=_T():VG()&&(this.bundleId=_T()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Ps(this.logger)}get connected(){var e,n,s;return((s=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:s.readyState)===1||!1}get connecting(){var e,n,s;return((s=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:s.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,s){this.isInitialized(),await this.publisher.publish(e,n,s),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:kt.relay},j0.outbound)}async subscribe(e,n){var s,i,r;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((s=n?.internal)==null?void 0:s.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let l=((r=this.subscriber.topicMap.get(e))==null?void 0:r[0])||"",f;const d=h=>{h.topic===e&&(this.subscriber.off(Ws.created,d),f())};return await Promise.all([new Promise(h=>{f=h,this.subscriber.on(Ws.created,d)}),new Promise(async(h,g)=>{l=await this.subscriber.subscribe(e,H5({internal:{throwOnFailedPublish:c}},n)).catch(m=>{c&&g(m)})||l,h()})]),l}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ko(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,s)=>{await this.connect(e).then(n).catch(s).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await b5())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((s,i)=>s.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const s of n)try{await this.onMessageEvent(s)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:s}=e;if(!n.sessionExists){const i=gn(we.FIVE_MINUTES),r={topic:s,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(s,r)}this.events.emit(Sn.message,e),await this.recordMessageEvent(e,j0.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(s,i)=>{const r=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ei.disconnect,r),await ko(new Promise((c,l)=>{this.provider.connect().then(c).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{i(c)}).finally(()=>{this.provider.off(Ei.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,l)=>{const f=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ei.disconnect,f),await this.subscriber.start().then(c).catch(l).finally(()=>{this.provider.off(Ei.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,s()})}catch(s){await this.subscriber.stop();const i=s;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(s=>setTimeout(s,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,s,i,r;if(gm())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((r=(i=(s=this.provider)==null?void 0:s.connection)==null?void 0:i.socket)==null||r.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ui(new mJ(YG({sdkVersion:o2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:s,message:i}=e;await this.messages.set(s,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:s}=e;if(!s||s.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,s);return i&&this.logger.warn(`Ignoring duplicate message: ${s}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ox(e)){if(!e.method.endsWith(DJ))return;const n=e.params,{topic:s,message:i,publishedAt:r,attestation:c}=n.data,l={topic:s,message:i,publishedAt:r,transportType:kt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(H5({type:"event",event:n.id},l)),this.events.emit(n.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Ym(e)&&this.events.emit(Sn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,j0.inbound),this.events.emit(Sn.message,e))}async acknowledgePayload(e){const n=Km(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ei.payload,this.onPayloadHandler),this.provider.off(Ei.connect,this.onConnectHandler),this.provider.off(Ei.disconnect,this.onDisconnectHandler),this.provider.off(Ei.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await b5();UZ(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(s=>this.logger.error(s,s?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ul.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&BZ())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Sn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(_J)))))}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Jte(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function F5(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function V5(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ene="[object RegExp]",tne="[object String]",nne="[object Number]",sne="[object Boolean]",q5="[object Arguments]",ine="[object Symbol]",rne="[object Date]",ane="[object Map]",one="[object Set]",cne="[object Array]",lne="[object Function]",une="[object ArrayBuffer]",Ov="[object Object]",fne="[object Error]",dne="[object DataView]",hne="[object Uint8Array]",pne="[object Uint8ClampedArray]",gne="[object Uint16Array]",mne="[object Uint32Array]",yne="[object BigUint64Array]",wne="[object Int8Array]",vne="[object Int16Array]",bne="[object Int32Array]",Ene="[object BigInt64Array]",xne="[object Float32Array]",Sne="[object Float64Array]";function Cne(){}function W5(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Ane(t,e,n){return qd(t,e,void 0,void 0,void 0,void 0,n)}function qd(t,e,n,s,i,r,c){const l=c(t,e,n,s,i,r);if(l!==void 0)return l;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return lh(t,e,r,c)}return lh(t,e,r,c)}function lh(t,e,n,s){if(Object.is(t,e))return!0;let i=V5(t),r=V5(e);if(i===q5&&(i=Ov),r===q5&&(r=Ov),i!==r)return!1;switch(i){case tne:return t.toString()===e.toString();case nne:{const f=t.valueOf(),d=e.valueOf();return Jte(f,d)}case sne:case rne:case ine:return Object.is(t.valueOf(),e.valueOf());case ene:return t.source===e.source&&t.flags===e.flags;case lne:return t===e}n=n??new Map;const c=n.get(t),l=n.get(e);if(c!=null&&l!=null)return c===e;n.set(t,e),n.set(e,t);try{switch(i){case ane:{if(t.size!==e.size)return!1;for(const[f,d]of t.entries())if(!e.has(f)||!qd(d,e.get(f),f,t,e,n,s))return!1;return!0}case one:{if(t.size!==e.size)return!1;const f=Array.from(t.values()),d=Array.from(e.values());for(let h=0;h<f.length;h++){const g=f[h],m=d.findIndex(y=>qd(g,y,void 0,t,e,n,s));if(m===-1)return!1;d.splice(m,1)}return!0}case cne:case hne:case pne:case gne:case mne:case yne:case wne:case vne:case bne:case Ene:case xne:case Sne:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let f=0;f<t.length;f++)if(!qd(t[f],e[f],f,t,e,n,s))return!1;return!0}case une:return t.byteLength!==e.byteLength?!1:lh(new Uint8Array(t),new Uint8Array(e),n,s);case dne:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:lh(new Uint8Array(t),new Uint8Array(e),n,s);case fne:return t.name===e.name&&t.message===e.message;case Ov:{if(!(lh(t.constructor,e.constructor,n,s)||W5(t)&&W5(e)))return!1;const f=[...Object.keys(t),...F5(t)],d=[...Object.keys(e),...F5(e)];if(f.length!==d.length)return!1;for(let h=0;h<f.length;h++){const g=f[h],m=t[g];if(!Object.hasOwn(e,g))return!1;const y=e[g];if(!qd(m,y,g,t,e,n,s))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Nne(t,e){return Ane(t,e,Cne)}var Tne=Object.defineProperty,K5=Object.getOwnPropertySymbols,Ine=Object.prototype.hasOwnProperty,Dne=Object.prototype.propertyIsEnumerable,p2=(t,e,n)=>e in t?Tne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G5=(t,e)=>{for(var n in e||(e={}))Ine.call(e,n)&&p2(t,n,e[n]);if(K5)for(var n of K5(e))Dne.call(e,n)&&p2(t,n,e[n]);return t},bs=(t,e,n)=>p2(t,typeof e!="symbol"?e+"":e,n);class dl extends FH{constructor(e,n,s,i=Hr,r=void 0){super(e,n,s,i),this.core=e,this.logger=n,this.name=s,bs(this,"map",new Map),bs(this,"version",OJ),bs(this,"cached",[]),bs(this,"initialized",!1),bs(this,"getKey"),bs(this,"storagePrefix",Hr),bs(this,"recentlyDeleted",[]),bs(this,"recentlyDeletedLimit",200),bs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Ln(c)?this.map.set(this.getKey(c),c):hZ(c)?this.map.set(c.id,c):pZ(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),bs(this,"set",async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())}),bs(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),bs(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(f=>Nne(l[f],c[f]))):this.values)),bs(this,"update",async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const f=G5(G5({},this.getData(c)),l);this.map.set(c,f),await this.persist()}),bs(this,"delete",async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=us(n,this.name),this.storagePrefix=i,this.getKey=r}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _ne=Object.defineProperty,One=(t,e,n)=>e in t?_ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e,n)=>One(t,typeof e!="symbol"?e+"":e,n);class Mne{constructor(e,n){this.core=e,this.logger=n,tt(this,"name",$J),tt(this,"version",UJ),tt(this,"events",new PE),tt(this,"pairings"),tt(this,"initialized",!1),tt(this,"storagePrefix",Hr),tt(this,"ignoredPayloadTypes",[Ia]),tt(this,"registeredMethods",[]),tt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),tt(this,"register",({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]}),tt(this,"create",async s=>{this.isInitialized();const i=i2(),r=await this.core.crypto.setSymKey(i),c=gn(we.FIVE_MINUTES),l={protocol:qO},f={topic:r,expiry:c,relay:l,active:!1,methods:s?.methods},d=f5({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:i,relay:l,expiryTimestamp:c,methods:s?.methods});return this.events.emit(kc.create,f),this.core.expirer.set(r,c),await this.pairings.set(r,f),await this.core.relayer.subscribe(r,{transportType:s?.transportType}),{topic:r,uri:d}}),tt(this,"pair",async s=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:s?.uri,trace:[Ir.pairing_started]}});this.isValidPair(s,i);const{topic:r,symKey:c,relay:l,expiryTimestamp:f,methods:d}=u5(s.uri);i.props.properties.topic=r,i.addTrace(Ir.pairing_uri_validation_success),i.addTrace(Ir.pairing_uri_not_expired);let h;if(this.pairings.keys.includes(r)){if(h=this.pairings.get(r),i.addTrace(Ir.existing_pairing),h.active)throw i.setError(Sa.active_pairing_already_exists),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);i.addTrace(Ir.pairing_not_expired)}const g=f||gn(we.FIVE_MINUTES),m={topic:r,relay:l,expiry:g,active:!1,methods:d};this.core.expirer.set(r,g),await this.pairings.set(r,m),i.addTrace(Ir.store_new_pairing),s.activatePairing&&await this.activate({topic:r}),this.events.emit(kc.create,m),i.addTrace(Ir.emit_inactive_pairing),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(c,r),i.addTrace(Ir.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Sa.no_internet_connection)}try{await this.core.relayer.subscribe(r,{relay:l})}catch(y){throw i.setError(Sa.subscribe_pairing_topic_failure),y}return i.addTrace(Ir.subscribe_pairing_topic_success),m}),tt(this,"activate",async({topic:s})=>{this.isInitialized();const i=gn(we.FIVE_MINUTES);this.core.expirer.set(s,i),await this.pairings.update(s,{active:!0,expiry:i})}),tt(this,"ping",async s=>{this.isInitialized(),await this.isValidPing(s),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=s;if(this.pairings.keys.includes(i)){const r=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:l,reject:f}=Pc();this.events.once(pt("pairing_ping",r),({error:d})=>{d?f(d):l()}),await c()}}),tt(this,"updateExpiry",async({topic:s,expiry:i})=>{this.isInitialized(),await this.pairings.update(s,{expiry:i})}),tt(this,"updateMetadata",async({topic:s,metadata:i})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:i})}),tt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),tt(this,"disconnect",async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:i}=s;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",zt("USER_DISCONNECTED")),await this.deletePairing(i))}),tt(this,"formatUriFromPairing",s=>{this.isInitialized();const{topic:i,relay:r,expiry:c,methods:l}=s,f=this.core.crypto.keychain.get(i);return f5({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:r,expiryTimestamp:c,methods:l})}),tt(this,"sendRequest",async(s,i,r)=>{const c=Bo(i,r),l=await this.core.crypto.encode(s,c),f=Md[i].req;return this.core.history.set(s,c),this.core.relayer.publish(s,l,f),c.id}),tt(this,"sendResult",async(s,i,r)=>{const c=Km(s,r),l=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,s)).request.method,d=Md[f].res;await this.core.relayer.publish(i,l,d),await this.core.history.resolve(c)}),tt(this,"sendError",async(s,i,r)=>{const c=Gm(s,r),l=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,s)).request.method,d=Md[f]?Md[f].res:Md.unregistered_method.res;await this.core.relayer.publish(i,l,d),await this.core.history.resolve(c)}),tt(this,"deletePairing",async(s,i)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,zt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),i?Promise.resolve():this.core.expirer.del(s)])}),tt(this,"cleanup",async()=>{const s=this.pairings.getAll().filter(i=>Oo(i.expiry));await Promise.all(s.map(i=>this.deletePairing(i.topic)))}),tt(this,"onRelayEventRequest",async s=>{const{topic:i,payload:r}=s;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,r);default:return await this.onUnknownRpcMethodRequest(i,r)}}),tt(this,"onRelayEventResponse",async s=>{const{topic:i,payload:r}=s,c=(await this.core.history.get(i,r.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,r);default:return this.onUnknownRpcMethodResponse(c)}}),tt(this,"onPairingPingRequest",async(s,i)=>{const{id:r}=i;try{this.isValidPing({topic:s}),await this.sendResult(r,s,!0),this.events.emit(kc.ping,{id:r,topic:s})}catch(c){await this.sendError(r,s,c),this.logger.error(c)}}),tt(this,"onPairingPingResponse",(s,i)=>{const{id:r}=i;setTimeout(()=>{_r(i)?this.events.emit(pt("pairing_ping",r),{}):Ii(i)&&this.events.emit(pt("pairing_ping",r),{error:i.error})},500)}),tt(this,"onPairingDeleteRequest",async(s,i)=>{const{id:r}=i;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(kc.delete,{id:r,topic:s})}catch(c){await this.sendError(r,s,c),this.logger.error(c)}}),tt(this,"onUnknownRpcMethodRequest",async(s,i)=>{const{id:r,method:c}=i;try{if(this.registeredMethods.includes(c))return;const l=zt("WC_METHOD_UNSUPPORTED",c);await this.sendError(r,s,l),this.logger.error(l)}catch(l){await this.sendError(r,s,l),this.logger.error(l)}}),tt(this,"onUnknownRpcMethodResponse",s=>{this.registeredMethods.includes(s)||this.logger.error(zt("WC_METHOD_UNSUPPORTED",s))}),tt(this,"isValidPair",(s,i)=>{var r;if(!Ts(s)){const{message:l}=ye("MISSING_OR_INVALID",`pair() params: ${s}`);throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(!dZ(s.uri)){const{message:l}=ye("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw i.setError(Sa.malformed_pairing_uri),new Error(l)}const c=u5(s?.uri);if(!((r=c?.relay)!=null&&r.protocol)){const{message:l}=ye("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=ye("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(c!=null&&c.expiryTimestamp&&we.toMiliseconds(c?.expiryTimestamp)<Date.now()){i.setError(Sa.pairing_expired);const{message:l}=ye("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),tt(this,"isValidPing",async s=>{if(!Ts(s)){const{message:r}=ye("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(r)}const{topic:i}=s;await this.isValidPairingTopic(i)}),tt(this,"isValidDisconnect",async s=>{if(!Ts(s)){const{message:r}=ye("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(r)}const{topic:i}=s;await this.isValidPairingTopic(i)}),tt(this,"isValidPairingTopic",async s=>{if(!on(s,!1)){const{message:i}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(i)}if(!this.pairings.keys.includes(s)){const{message:i}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(i)}if(Oo(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:i}=ye("EXPIRED",`pairing topic: ${s}`);throw new Error(i)}}),this.core=e,this.logger=us(n,this.name),this.pairings=new dl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ps(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Sn.message,async e=>{const{topic:n,message:s,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==kt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))try{const r=await this.core.crypto.decode(n,s);ox(r)?(this.core.history.set(n,r),await this.onRelayEventRequest({topic:n,payload:r})):Ym(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:n,payload:r}),this.core.history.delete(n,r.id)),await this.core.relayer.messages.ack(n,s)}catch(r){this.logger.error(r)}})}registerExpirerEvents(){this.core.expirer.on(Ti.expired,async e=>{const{topic:n}=q_(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(kc.expire,{topic:n}))})}}var Rne=Object.defineProperty,Pne=(t,e,n)=>e in t?Rne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e,n)=>Pne(t,typeof e!="symbol"?e+"":e,n);class $ne extends BH{constructor(e,n){super(e,n),this.core=e,this.logger=n,Rn(this,"records",new Map),Rn(this,"events",new $i.EventEmitter),Rn(this,"name",LJ),Rn(this,"version",kJ),Rn(this,"cached",[]),Rn(this,"initialized",!1),Rn(this,"storagePrefix",Hr),Rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Rn(this,"set",(s,i,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:i,chainId:r}),this.records.has(i.id))return;const c={id:i.id,topic:s,request:{method:i.method,params:i.params||null},chainId:r,expiry:gn(we.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Yi.created,c)}),Rn(this,"resolve",async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const i=await this.getRecord(s.id);typeof i.response>"u"&&(i.response=Ii(s)?{error:s.error}:{result:s.result},this.records.set(i.id,i),this.persist(),this.events.emit(Yi.updated,i))}),Rn(this,"get",async(s,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:i}),await this.getRecord(i))),Rn(this,"delete",(s,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(r=>{if(r.topic===s){if(typeof i<"u"&&r.id!==i)return;this.records.delete(r.id),this.events.emit(Yi.deleted,r)}}),this.persist()}),Rn(this,"exists",async(s,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===s:!1)),Rn(this,"on",(s,i)=>{this.events.on(s,i)}),Rn(this,"once",(s,i)=>{this.events.once(s,i)}),Rn(this,"off",(s,i)=>{this.events.off(s,i)}),Rn(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.logger=us(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const s={topic:n.topic,request:Bo(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Yi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Yi.created,e=>{const n=Yi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Yi.updated,e=>{const n=Yi.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Yi.deleted,e=>{const n=Yi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ul.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Yi.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Une=Object.defineProperty,Lne=(t,e,n)=>e in t?Une(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qn=(t,e,n)=>Lne(t,typeof e!="symbol"?e+"":e,n);class kne extends qH{constructor(e,n){super(e,n),this.core=e,this.logger=n,Qn(this,"expirations",new Map),Qn(this,"events",new $i.EventEmitter),Qn(this,"name",BJ),Qn(this,"version",jJ),Qn(this,"cached",[]),Qn(this,"initialized",!1),Qn(this,"storagePrefix",Hr),Qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Qn(this,"has",s=>{try{const i=this.formatTarget(s);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Qn(this,"set",(s,i)=>{this.isInitialized();const r=this.formatTarget(s),c={target:r,expiry:i};this.expirations.set(r,c),this.checkExpiry(r,c),this.events.emit(Ti.created,{target:r,expiration:c})}),Qn(this,"get",s=>{this.isInitialized();const i=this.formatTarget(s);return this.getExpiration(i)}),Qn(this,"del",s=>{if(this.isInitialized(),this.has(s)){const i=this.formatTarget(s),r=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ti.deleted,{target:i,expiration:r})}}),Qn(this,"on",(s,i)=>{this.events.on(s,i)}),Qn(this,"once",(s,i)=>{this.events.once(s,i)}),Qn(this,"off",(s,i)=>{this.events.off(s,i)}),Qn(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.logger=us(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return XG(e);if(typeof e=="number")return QG(e);const{message:n}=ye("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ti.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(s),new Error(s)}return n}checkExpiry(e,n){const{expiry:s}=n;we.toMiliseconds(s)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ti.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ul.pulse,()=>this.checkExpirations()),this.events.on(Ti.created,e=>{const n=Ti.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ti.expired,e=>{const n=Ti.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ti.deleted,e=>{const n=Ti.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Bne=Object.defineProperty,jne=(t,e,n)=>e in t?Bne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>jne(t,typeof e!="symbol"?e+"":e,n);class zne extends WH{constructor(e,n,s){super(e,n,s),this.core=e,this.logger=n,this.store=s,rn(this,"name",zJ),rn(this,"abortController"),rn(this,"isDevEnv"),rn(this,"verifyUrlV3",FJ),rn(this,"storagePrefix",Hr),rn(this,"version",VO),rn(this,"publicKey"),rn(this,"fetchPromise"),rn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),rn(this,"register",async i=>{if(!pf()||this.isDevEnv)return;const r=window.location.origin,{id:c,decryptedId:l}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${r}&id=${c}&decryptedId=${l}`;try{const d=$a.getDocument(),h=this.startAbortTimer(we.ONE_SECOND*5),g=await new Promise((m,y)=>{const w=()=>{window.removeEventListener("message",E),d.body.removeChild(v),y("attestation aborted")};this.abortController.signal.addEventListener("abort",w);const v=d.createElement("iframe");v.src=f,v.style.display="none",v.addEventListener("error",w,{signal:this.abortController.signal});const E=C=>{if(C.data&&typeof C.data=="string")try{const T=JSON.parse(C.data);if(T.type==="verify_attestation"){if(Bb(T.attestation).payload.id!==c)return;clearInterval(h),d.body.removeChild(v),this.abortController.signal.removeEventListener("abort",w),window.removeEventListener("message",E),m(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};d.body.appendChild(v),window.addEventListener("message",E,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),rn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:r,hash:c,encryptedId:l}=i;if(r===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(r){if(Bb(r).payload.id!==l)return;const d=await this.isValidJwtAttestation(r);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!c)return;const f=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(c,f)}),rn(this,"fetchAttestation",async(i,r)=>{this.logger.debug(`resolving attestation: ${i} from url: ${r}`);const c=this.startAbortTimer(we.ONE_SECOND*5),l=await fetch(`${r}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0}),rn(this,"getVerifyUrl",i=>{let r=i||ch;return VJ.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${ch}`),r=ch),r}),rn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(we.FIVE_SECONDS),r=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await r.json()}catch(i){this.logger.warn(i)}}),rn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),rn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),rn(this,"isValidJwtAttestation",async i=>{const r=await this.getPublicKey();try{if(r)return this.validateAttestation(i,r)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(i,c)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),rn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),rn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async r=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),r(c))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),rn(this,"validateAttestation",(i,r)=>{const c=qQ(i,r.publicKey),l={hasExpired:we.toMiliseconds(c.exp)<Date.now(),payload:c};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=us(n,this.name),this.abortController=new AbortController,this.isDevEnv=WE(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ps(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}}var Hne=Object.defineProperty,Fne=(t,e,n)=>e in t?Hne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y5=(t,e,n)=>Fne(t,typeof e!="symbol"?e+"":e,n);class Vne extends KH{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Y5(this,"context",qJ),Y5(this,"registerDeviceToken",async s=>{const{clientId:i,token:r,notificationType:c,enableEncrypted:l=!1}=s,f=`${WJ}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:r,always_raw:l})})}),this.logger=us(n,this.context)}}var qne=Object.defineProperty,X5=Object.getOwnPropertySymbols,Wne=Object.prototype.hasOwnProperty,Kne=Object.prototype.propertyIsEnumerable,g2=(t,e,n)=>e in t?qne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$d=(t,e)=>{for(var n in e||(e={}))Wne.call(e,n)&&g2(t,n,e[n]);if(X5)for(var n of X5(e))Kne.call(e,n)&&g2(t,n,e[n]);return t},vn=(t,e,n)=>g2(t,typeof e!="symbol"?e+"":e,n);class Gne extends GH{constructor(e,n,s=!0){super(e,n,s),this.core=e,this.logger=n,vn(this,"context",GJ),vn(this,"storagePrefix",Hr),vn(this,"storageVersion",KJ),vn(this,"events",new Map),vn(this,"shouldPersist",!1),vn(this,"init",async()=>{if(!WE())try{const i={eventId:MT(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:F_(this.core.relayer.protocol,this.core.relayer.version,o2)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),vn(this,"createEvent",i=>{const{event:r="ERROR",type:c="",properties:{topic:l,trace:f}}=i,d=MT(),h=this.core.projectId||"",g=Date.now(),m=$d({eventId:d,timestamp:g,props:{event:r,type:c,properties:{topic:l,trace:f}},bundleId:h,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,m),this.shouldPersist=!0),m}),vn(this,"getEvent",i=>{const{eventId:r,topic:c}=i;if(r)return this.events.get(r);const l=Array.from(this.events.values()).find(f=>f.props.properties.topic===c);if(l)return $d($d({},l),this.setMethods(l.eventId))}),vn(this,"deleteEvent",i=>{const{eventId:r}=i;this.events.delete(r),this.shouldPersist=!0}),vn(this,"setEventListeners",()=>{this.core.heartbeat.on(ul.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(i.timestamp)>YJ&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),vn(this,"setMethods",i=>({addTrace:r=>this.addTrace(i,r),setError:r=>this.setError(i,r)})),vn(this,"addTrace",(i,r)=>{const c=this.events.get(i);c&&(c.props.properties.trace.push(r),this.events.set(i,c),this.shouldPersist=!0)}),vn(this,"setError",(i,r)=>{const c=this.events.get(i);c&&(c.props.type=r,c.timestamp=Date.now(),this.events.set(i,c),this.shouldPersist=!0)}),vn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),vn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(r=>{this.events.set(r.eventId,$d($d({},r),this.setMethods(r.eventId)))})}catch(i){this.logger.warn(i)}}),vn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[r,c]of this.events)c.props.type&&i.push(c);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const r of i)this.events.delete(r.eventId),this.shouldPersist=!0}catch(r){this.logger.warn(r)}}),vn(this,"sendEvent",async i=>{const r=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${XJ}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${o2}${r}`,{method:"POST",body:JSON.stringify(i)})}),vn(this,"getAppDomain",()=>H_().url),this.logger=us(n,this.context),this.telemetryEnabled=s,s?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Yne=Object.defineProperty,Q5=Object.getOwnPropertySymbols,Xne=Object.prototype.hasOwnProperty,Qne=Object.prototype.propertyIsEnumerable,m2=(t,e,n)=>e in t?Yne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z5=(t,e)=>{for(var n in e||(e={}))Xne.call(e,n)&&m2(t,n,e[n]);if(Q5)for(var n of Q5(e))Qne.call(e,n)&&m2(t,n,e[n]);return t},Mt=(t,e,n)=>m2(t,typeof e!="symbol"?e+"":e,n);let Zne=class rM extends $H{constructor(e){var n;super(e),Mt(this,"protocol",FO),Mt(this,"version",VO),Mt(this,"name",a2),Mt(this,"relayUrl"),Mt(this,"projectId"),Mt(this,"customStoragePrefix"),Mt(this,"events",new $i.EventEmitter),Mt(this,"logger"),Mt(this,"heartbeat"),Mt(this,"relayer"),Mt(this,"crypto"),Mt(this,"storage"),Mt(this,"history"),Mt(this,"expirer"),Mt(this,"pairing"),Mt(this,"verify"),Mt(this,"echoClient"),Mt(this,"linkModeSupportedApps"),Mt(this,"eventClient"),Mt(this,"initialized",!1),Mt(this,"logChunkController"),Mt(this,"on",(l,f)=>this.events.on(l,f)),Mt(this,"once",(l,f)=>this.events.once(l,f)),Mt(this,"off",(l,f)=>this.events.off(l,f)),Mt(this,"removeListener",(l,f)=>this.events.removeListener(l,f)),Mt(this,"dispatchEnvelope",({topic:l,message:f,sessionExists:d})=>{if(!l||!f)return;const h={topic:l,message:f,publishedAt:Date.now(),transportType:kt.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:d})});const s=this.getGlobalCore(e?.customStoragePrefix);if(s)try{return this.customStoragePrefix=s.customStoragePrefix,this.logger=s.logger,this.heartbeat=s.heartbeat,this.crypto=s.crypto,this.history=s.history,this.expirer=s.expirer,this.storage=s.storage,this.relayer=s.relayer,this.pairing=s.pairing,this.verify=s.verify,this.echoClient=s.echoClient,this.linkModeSupportedApps=s.linkModeSupportedApps,this.eventClient=s.eventClient,this.initialized=s.initialized,this.logChunkController=s.logChunkController,s}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||WO,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=gp({level:typeof e?.logger=="string"&&e.logger?e.logger:wJ.logger,name:a2}),{logger:r,chunkLoggerController:c}=kD({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,f;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=us(r,this.name),this.heartbeat=new Pz,this.crypto=new Ate(this,this.logger,e?.keychain),this.history=new $ne(this,this.logger),this.expirer=new kne(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new mH(Z5(Z5({},vJ),e?.storageOptions)),this.relayer=new Zte({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Mne(this,this.logger),this.verify=new zne(this,this.logger,this.storage),this.echoClient=new Vne(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Gne(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new rM(e);await n.initialize();const s=await n.crypto.getClientId();return await n.storage.setItem(MJ,s),n}get context(){return Ps(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(O5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(O5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,s=`${n}_count`;return globalThis[s]=(globalThis[s]||0)+1,globalThis[s]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[s]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const s=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[s]=e}catch(s){console.warn("Failed to set global WalletConnect core",s)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&yJ.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Jne=Zne,aM="wc",oM=2,cM="client",cx=`${aM}@${oM}:${cM}:`,Mv={name:cM,logger:"error"},J5="WALLETCONNECT_DEEPLINK_CHOICE",ese="proposal",eI="Proposal expired",tse="session",fu=we.SEVEN_DAYS,nse="engine",bn={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},Rv={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},Nr={idle:"IDLE",active:"ACTIVE"},sse={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},ise="request",rse=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ase="wc",ose="auth",cse="authKeys",lse="pairingTopics",use="requests",Qm=`${ase}@${1.5}:${ose}:`,z0=`${Qm}:PUB_KEY`;var fse=Object.defineProperty,dse=Object.defineProperties,hse=Object.getOwnPropertyDescriptors,tI=Object.getOwnPropertySymbols,pse=Object.prototype.hasOwnProperty,gse=Object.prototype.propertyIsEnumerable,y2=(t,e,n)=>e in t?fse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lt=(t,e)=>{for(var n in e||(e={}))pse.call(e,n)&&y2(t,n,e[n]);if(tI)for(var n of tI(e))gse.call(e,n)&&y2(t,n,e[n]);return t},Es=(t,e)=>dse(t,hse(e)),ge=(t,e,n)=>y2(t,typeof e!="symbol"?e+"":e,n);class mse extends ZH{constructor(e){super(e),ge(this,"name",nse),ge(this,"events",new PE),ge(this,"initialized",!1),ge(this,"requestQueue",{state:Nr.idle,queue:[]}),ge(this,"sessionRequestQueue",{state:Nr.idle,queue:[]}),ge(this,"emittedSessionRequests",new aY({limit:500})),ge(this,"requestQueueDelay",we.ONE_SECOND),ge(this,"expectedPairingMethodMap",new Map),ge(this,"recentlyDeletedMap",new Map),ge(this,"recentlyDeletedLimit",200),ge(this,"relayMessageCache",[]),ge(this,"pendingSessions",new Map),ge(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(bn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),ge(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=Es(Lt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=oZ(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:c,sessionProperties:l,scopedProperties:f,relays:d}=s;let h=i,g,m=!1;try{if(h){const A=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),A}if(!h||!m){const{topic:A,uri:_}=await this.client.core.pairing.create();h=A,g=_}if(!h){const{message:A}=ye("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(A)}const y=await this.client.core.crypto.generateKeyPair(),w=bn.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,v=gn(w),E=Es(Lt(Lt({requiredNamespaces:r,optionalNamespaces:c,relays:d??[{protocol:qO}],proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:h},l&&{sessionProperties:l}),f&&{scopedProperties:f}),{id:Dr()}),C=pt("session_connect",E.id),{reject:T,resolve:N,done:I}=Pc(w,eI),S=({id:A})=>{A===E.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(E.id),this.events.emit(C,{error:{message:eI,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(C,({error:A,session:_})=>{this.client.events.off("proposal_expire",S),A?T(A):_&&N(_)}),await this.sendRequest({topic:h,method:"wc_sessionPropose",params:E,throwOnFailedPublish:!0,clientRpcId:E.id}),await this.setProposal(E.id,E),{uri:g,approval:I}}),ge(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(s){throw this.client.logger.error("pair() failed"),s}}),ge(this,"approve",async n=>{var s,i,r;const c=this.client.core.eventClient.createEvent({properties:{topic:(s=n?.id)==null?void 0:s.toString(),trace:[Xi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(O){throw c.setError(Ic.no_internet_connection),O}try{await this.isValidProposalId(n?.id)}catch(O){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(Ic.proposal_not_found),O}try{await this.isValidApprove(n)}catch(O){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ic.session_approve_namespace_validation_failure),O}const{id:l,relayProtocol:f,namespaces:d,sessionProperties:h,scopedProperties:g,sessionConfig:m}=n,y=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:w,proposer:v,requiredNamespaces:E,optionalNamespaces:C}=y;let T=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:w});T||(T=(r=this.client.core.eventClient)==null?void 0:r.createEvent({type:Xi.session_approve_started,properties:{topic:w,trace:[Xi.session_approve_started,Xi.session_namespaces_validation_success]}}));const N=await this.client.core.crypto.generateKeyPair(),I=v.publicKey,S=await this.client.core.crypto.generateSharedKey(N,I),A=Lt(Lt(Lt({relay:{protocol:f??"irn"},namespaces:d,controller:{publicKey:N,metadata:this.client.metadata},expiry:gn(fu)},h&&{sessionProperties:h}),g&&{scopedProperties:g}),m&&{sessionConfig:m}),_=kt.relay;T.addTrace(Xi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:_})}catch(O){throw T.setError(Ic.subscribe_session_topic_failure),O}T.addTrace(Xi.subscribe_session_topic_success);const D=Es(Lt({},A),{topic:S,requiredNamespaces:E,optionalNamespaces:C,pairingTopic:w,acknowledged:!1,self:A.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:N,transportType:kt.relay});await this.client.session.set(S,D),T.addTrace(Xi.store_session);try{T.addTrace(Xi.publishing_session_settle),await this.sendRequest({topic:S,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(O=>{throw T?.setError(Ic.session_settle_publish_failure),O}),T.addTrace(Xi.session_settle_publish_success),T.addTrace(Xi.publishing_session_approve),await this.sendResult({id:l,topic:w,result:{relay:{protocol:f??"irn"},responderPublicKey:N},throwOnFailedPublish:!0}).catch(O=>{throw T?.setError(Ic.session_approve_publish_failure),O}),T.addTrace(Xi.session_approve_publish_success)}catch(O){throw this.client.logger.error(O),this.client.session.delete(S,zt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),O}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:w,metadata:v.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:w}),await this.setExpiry(S,gn(fu)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),ge(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:s,reason:i}=n;let r;try{r=this.client.proposal.get(s).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${s}) failed`),c}r&&await this.sendError({id:s,topic:r,error:i,rpcOpts:bn.wc_sessionPropose.reject}),await this.deleteProposal(s)}),ge(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:s,namespaces:i}=n,{done:r,resolve:c,reject:l}=Pc(),f=Dr(),d=Wc().toString(),h=this.client.session.get(s).namespaces;return this.events.once(pt("session_update",f),({error:g})=>{g?l(g):c()}),await this.client.session.update(s,{namespaces:i}),await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(s,{namespaces:h}),l(g)}),{acknowledged:r}}),ge(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:s}=n,i=Dr(),{done:r,resolve:c,reject:l}=Pc();return this.events.once(pt("session_extend",i),({error:f})=>{f?l(f):c()}),await this.setExpiry(s,gn(fu)),this.sendRequest({topic:s,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{l(f)}),{acknowledged:r}}),ge(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(E){throw this.client.logger.error("request() -> isValidRequest() failed"),E}const{chainId:s,request:i,topic:r,expiry:c=bn.wc_sessionRequest.req.ttl}=n,l=this.client.session.get(r);l?.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const f=Dr(),d=Wc().toString(),{done:h,resolve:g,reject:m}=Pc(c,"Request expired. Please try again.");this.events.once(pt("session_request",f),({error:E,result:C})=>{E?m(E):g(C)});const y="wc_sessionRequest",w=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(w)return await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:r,method:y,params:{request:Es(Lt({},i),{expiryTimestamp:gn(c)}),chainId:s},expiry:c,throwOnFailedPublish:!0,appLink:w}).catch(E=>m(E)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:s,id:f}),await h();const v={request:Es(Lt({},i),{expiryTimestamp:gn(c)}),chainId:s};return await Promise.all([new Promise(async E=>{await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:r,method:y,params:v,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(f,v)}).catch(C=>m(C)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:s,id:f}),E()}),new Promise(async E=>{var C;if(!((C=l.sessionConfig)!=null&&C.disableDeepLink)){const T=await tY(this.client.core.storage,J5);await ZG({id:f,topic:r,wcDeepLink:T})}E()}),h()]).then(E=>E[2])}),ge(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:s,response:i}=n,{id:r}=i,c=this.client.session.get(s);c.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);_r(i)?await this.sendResult({id:r,topic:s,result:i.result,throwOnFailedPublish:!0,appLink:l}):Ii(i)&&await this.sendError({id:r,topic:s,error:i.error,appLink:l}),this.cleanupAfterResponse(n)}),ge(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:s}=n;if(this.client.session.keys.includes(s)){const i=Dr(),r=Wc().toString(),{done:c,resolve:l,reject:f}=Pc();this.events.once(pt("session_ping",i),({error:d})=>{d?f(d):l()}),await Promise.all([this.sendRequest({topic:s,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:r}),c()])}else this.client.core.pairing.pairings.keys.includes(s)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:s}))}),ge(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:s,event:i,chainId:r}=n,c=Wc().toString(),l=Dr();await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:i,chainId:r},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:l})}),ge(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:s}=n;if(this.client.session.keys.includes(s))await this.sendRequest({topic:s,method:"wc_sessionDelete",params:zt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:s,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(s))await this.client.core.pairing.disconnect({topic:s});else{const{message:i}=ye("MISMATCHED_TOPIC",`Session or pairing topic not found: ${s}`);throw new Error(i)}}),ge(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(s=>uZ(s,n)))),ge(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ge(this,"authenticate",async(n,s)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const r=s&&this.client.core.linkModeSupportedApps.includes(s)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),c=r?kt.link_mode:kt.relay;c===kt.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:f="",uri:d,domain:h,nonce:g,type:m,exp:y,nbf:w,methods:v=[],expiry:E}=n,C=[...n.resources||[]],{topic:T,uri:N}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:N}});const I=await this.client.core.crypto.generateKeyPair(),S=B0(I);if(await Promise.all([this.client.auth.authKeys.set(z0,{responseTopic:S,publicKey:I}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:T})]),await this.client.core.relayer.subscribe(S,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${T}`),v.length>0){const{namespace:K}=Fu(l[0]);let W=yX(K,"request",v);k0(C)&&(W=vX(W,C.pop())),C.push(W)}const A=E&&E>bn.wc_sessionAuthenticate.req.ttl?E:bn.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:m??"caip122",chains:l,statement:f,aud:d,domain:h,version:"1",nonce:g,iat:new Date().toISOString(),exp:y,nbf:w,resources:C},requester:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:gn(A)},D={eip155:{chains:l,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:D,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:gn(bn.wc_sessionPropose.req.ttl),id:Dr()},{done:P,resolve:U,reject:L}=Pc(A,"Request expired"),H=Dr(),q=pt("session_connect",O.id),$=pt("session_request",H),R=async({error:K,session:W})=>{this.events.off($,k),K?L(K):W&&U({session:W})},k=async K=>{var W,j,X;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),K.error){const Ne=zt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return K.error.code===Ne.code?void 0:(this.events.off(q,R),L(K.error.message))}await this.deleteProposal(O.id),this.events.off(q,R);const{cacaos:Z,responder:ee}=K.result,ae=[],oe=[];for(const Ne of Z){await FT({cacao:Ne,projectId:this.client.core.projectId})||(this.client.logger.error(Ne,"Signature verification failed"),L(zt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:We}=Ne,Qe=k0(We.resources),xt=[Yb(We.iss)],ki=mm(We.iss);if(Qe){const cn=VT(Qe),ii=qT(Qe);ae.push(...cn),xt.push(...ii)}for(const cn of xt)oe.push(`${cn}:${ki}`)}const be=await this.client.core.crypto.generateSharedKey(I,ee.publicKey);let Ae;ae.length>0&&(Ae={topic:be,acknowledged:!0,self:{publicKey:I,metadata:this.client.metadata},peer:ee,controller:ee.publicKey,expiry:gn(fu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:g5([...new Set(ae)],[...new Set(oe)]),transportType:c},await this.client.core.relayer.subscribe(be,{transportType:c}),await this.client.session.set(be,Ae),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:ee.metadata}),Ae=this.client.session.get(be)),(W=this.client.metadata.redirect)!=null&&W.linkMode&&(j=ee.metadata.redirect)!=null&&j.linkMode&&(X=ee.metadata.redirect)!=null&&X.universal&&s&&(this.client.core.addLinkModeSupportedApp(ee.metadata.redirect.universal),this.client.session.update(be,{transportType:kt.link_mode})),U({auths:Z,session:Ae})};this.events.once(q,R),this.events.once($,k);let F;try{if(r){const K=Bo("wc_sessionAuthenticate",_,H);this.client.core.history.set(T,K);const W=await this.client.core.crypto.encode("",K,{type:Ep,encoding:$o});F=p0(s,T,W)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:_,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:O,expiry:bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(K){throw this.events.off(q,R),this.events.off($,k),K}return await this.setProposal(O.id,O),await this.setAuthRequest(H,{request:Es(Lt({},_),{verifyContext:{}}),pairingTopic:T,transportType:c}),{uri:F??N,response:P}}),ge(this,"approveSessionAuthenticate",async n=>{const{id:s,auths:i}=n,r=this.client.core.eventClient.createEvent({properties:{topic:s.toString(),trace:[Dc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(E){throw r.setError(Rd.no_internet_connection),E}const c=this.getPendingAuthRequest(s);if(!c)throw r.setError(Rd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${s}`);const l=c.transportType||kt.relay;l===kt.relay&&await this.confirmOnlineStateOrThrow();const f=c.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=B0(f),g={type:Ia,receiverPublicKey:f,senderPublicKey:d},m=[],y=[];for(const E of i){if(!await FT({cacao:E,projectId:this.client.core.projectId})){r.setError(Rd.invalid_cacao);const S=zt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:s,topic:h,error:S,encodeOpts:g}),new Error(S.message)}r.addTrace(Dc.cacaos_verified);const{p:C}=E,T=k0(C.resources),N=[Yb(C.iss)],I=mm(C.iss);if(T){const S=VT(T),A=qT(T);m.push(...S),N.push(...A)}for(const S of N)y.push(`${S}:${I}`)}const w=await this.client.core.crypto.generateSharedKey(d,f);r.addTrace(Dc.create_authenticated_session_topic);let v;if(m?.length>0){v={topic:w,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:f,metadata:c.requester.metadata},controller:f,expiry:gn(fu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:g5([...new Set(m)],[...new Set(y)]),transportType:l},r.addTrace(Dc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:l})}catch(E){throw r.setError(Rd.subscribe_authenticated_session_topic_failure),E}r.addTrace(Dc.subscribe_authenticated_session_topic_success),await this.client.session.set(w,v),r.addTrace(Dc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}r.addTrace(Dc.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:s,result:{cacaos:i,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,l)})}catch(E){throw r.setError(Rd.authenticated_session_approve_publish_failure),E}return await this.client.auth.requests.delete(s,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:r.eventId}),{session:v}}),ge(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:s,reason:i}=n,r=this.getPendingAuthRequest(s);if(!r)throw new Error(`Could not find pending auth request with id ${s}`);r.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const c=r.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),f=B0(c),d={type:Ia,receiverPublicKey:c,senderPublicKey:l};await this.sendError({id:s,topic:f,error:i,encodeOpts:d,rpcOpts:bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(r.requester.metadata,r.transportType)}),await this.client.auth.requests.delete(s,{message:"rejected",code:0}),await this.deleteProposal(s)}),ge(this,"formatAuthMessage",n=>{this.isInitialized();const{request:s,iss:i}=n;return aO(s,i)}),ge(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ge(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const s=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(r=>{var c,l;return((c=r.peerMetadata)==null?void 0:c.url)&&((l=r.peerMetadata)==null?void 0:l.url)===n.peer.metadata.url&&r.topic&&r.topic!==s.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(r=>this.client.core.pairing.disconnect({topic:r.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}}),ge(this,"deleteSession",async n=>{var s;const{topic:i,expirerHasDeleted:r=!1,emitEvent:c=!0,id:l=0}=n,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,zt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(J5).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===i&&this.deletePendingSessionRequest(d.id,zt("USER_DISCONNECTED"))}),i===((s=this.sessionRequestQueue.queue[0])==null?void 0:s.topic)&&(this.sessionRequestQueue.state=Nr.idle),c&&this.client.events.emit("session_delete",{id:l,topic:i})}),ge(this,"deleteProposal",async(n,s)=>{if(s)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Ic.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,zt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ge(this,"deletePendingSessionRequest",async(n,s,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,s),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(r=>r.id!==n),i&&(this.sessionRequestQueue.state=Nr.idle,this.client.events.emit("session_request_expire",{id:n}))}),ge(this,"deletePendingAuthRequest",async(n,s,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,s),i?Promise.resolve():this.client.core.expirer.del(n)])}),ge(this,"setExpiry",async(n,s)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,s),await this.client.session.update(n,{expiry:s}))}),ge(this,"setProposal",async(n,s)=>{this.client.core.expirer.set(n,gn(bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,s)}),ge(this,"setAuthRequest",async(n,s)=>{const{request:i,pairingTopic:r,transportType:c=kt.relay}=s;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:r,verifyContext:i.verifyContext,transportType:c})}),ge(this,"setPendingSessionRequest",async n=>{const{id:s,topic:i,params:r,verifyContext:c}=n,l=r.request.expiryTimestamp||gn(bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(s,l),await this.client.pendingRequest.set(s,{id:s,topic:i,params:r,verifyContext:c})}),ge(this,"sendRequest",async n=>{const{topic:s,method:i,params:r,expiry:c,relayRpcId:l,clientRpcId:f,throwOnFailedPublish:d,appLink:h,tvf:g}=n,m=Bo(i,r,f);let y;const w=!!h;try{const C=w?$o:sr;y=await this.client.core.crypto.encode(s,m,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${s} failed`),C}let v;if(rse.includes(i)){const C=Or(JSON.stringify(m)),T=Or(y);v=await this.client.core.verify.register({id:T,decryptedId:C})}const E=bn[i].req;if(E.attestation=v,c&&(E.ttl=c),l&&(E.id=l),this.client.core.history.set(s,m),w){const C=p0(h,s,y);await global.Linking.openURL(C,this.client.name)}else{const C=bn[i].req;c&&(C.ttl=c),l&&(C.id=l),C.tvf=Es(Lt({},g),{correlationId:m.id}),d?(C.internal=Es(Lt({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,y,C)):this.client.core.relayer.publish(s,y,C).catch(T=>this.client.logger.error(T))}return m.id}),ge(this,"sendResult",async n=>{const{id:s,topic:i,result:r,throwOnFailedPublish:c,encodeOpts:l,appLink:f}=n,d=Km(s,r);let h;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const w=g?$o:sr;h=await this.client.core.crypto.encode(i,d,Es(Lt({},l||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),w}let m,y;try{m=await this.client.core.history.get(i,s);const w=m.request;try{y=this.getTVFParams(s,w.params,r)}catch(v){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${v?.message}`)}}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${s}) failed`),w}if(g){const w=p0(f,i,h);await global.Linking.openURL(w,this.client.name)}else{const w=m.request.method,v=bn[w].res;v.tvf=Es(Lt({},y),{correlationId:s}),c?(v.internal=Es(Lt({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,h,v)):this.client.core.relayer.publish(i,h,v).catch(E=>this.client.logger.error(E))}await this.client.core.history.resolve(d)}),ge(this,"sendError",async n=>{const{id:s,topic:i,error:r,encodeOpts:c,rpcOpts:l,appLink:f}=n,d=Gm(s,r);let h;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const y=g?$o:sr;h=await this.client.core.crypto.encode(i,d,Es(Lt({},c||{}),{encoding:y}))}catch(y){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),y}let m;try{m=await this.client.core.history.get(i,s)}catch(y){throw this.client.logger.error(`sendError() -> history.get(${i}, ${s}) failed`),y}if(g){const y=p0(f,i,h);await global.Linking.openURL(y,this.client.name)}else{const y=m.request.method,w=l||bn[y].res;this.client.core.relayer.publish(i,h,w)}await this.client.core.history.resolve(d)}),ge(this,"cleanup",async()=>{const n=[],s=[];this.client.session.getAll().forEach(i=>{let r=!1;Oo(i.expiry)&&(r=!0),this.client.core.crypto.keychain.has(i.topic)||(r=!0),r&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Oo(i.expiryTimestamp)&&s.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...s.map(i=>this.deleteProposal(i))])}),ge(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ge(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ge(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Nr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Nr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Nr.idle}),ge(this,"processRequest",async n=>{const{topic:s,payload:i,attestation:r,transportType:c,encryptedId:l}=n,f=i.method;if(!this.shouldIgnorePairingRequest({topic:s,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:s,payload:i,attestation:r,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(s,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(s,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(s,i);case"wc_sessionPing":return await this.onSessionPingRequest(s,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(s,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:s,payload:i,attestation:r,encryptedId:l,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(s,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:s,payload:i,attestation:r,encryptedId:l,transportType:c});default:return this.client.logger.info(`Unsupported request method ${f}`)}}),ge(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i,transportType:r}=n,c=(await this.client.core.history.get(s,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,i,r);case"wc_sessionSettle":return this.onSessionSettleResponse(s,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,i);case"wc_sessionExtend":return this.onSessionExtendResponse(s,i);case"wc_sessionPing":return this.onSessionPingResponse(s,i);case"wc_sessionRequest":return this.onSessionRequestResponse(s,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(s,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),ge(this,"onRelayEventUnknownPayload",n=>{const{topic:s}=n,{message:i}=ye("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ge(this,"shouldIgnorePairingRequest",n=>{const{topic:s,requestMethod:i}=n,r=this.expectedPairingMethodMap.get(s);return!r||r.includes(i)?!1:!!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ge(this,"onSessionProposeRequest",async n=>{const{topic:s,payload:i,attestation:r,encryptedId:c}=n,{params:l,id:f}=i;try{const d=this.client.core.eventClient.getEvent({topic:s});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(Sa.proposal_listener_not_found)),this.isValidConnect(Lt({},i.params));const h=l.expiryTimestamp||gn(bn.wc_sessionPropose.req.ttl),g=Lt({id:f,pairingTopic:s,expiryTimestamp:h,attestation:r,encryptedId:c},l);await this.setProposal(f,g);const m=await this.getVerifyContext({attestationId:r,hash:Or(JSON.stringify(i)),encryptedId:c,metadata:g.proposer.metadata});d?.addTrace(Ir.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:m})}catch(d){await this.sendError({id:f,topic:s,error:d,rpcOpts:bn.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),ge(this,"onSessionProposeResponse",async(n,s,i)=>{const{id:r}=s;if(_r(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const h=await this.client.core.crypto.generateSharedKey(f,d);this.pendingSessions.set(r,{sessionTopic:h,pairingTopic:n,proposalId:r,publicKey:f});const g=await this.client.core.relayer.subscribe(h,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:n})}else if(Ii(s)){await this.deleteProposal(r);const c=pt("session_connect",r);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:s.error})}}),ge(this,"onSessionSettleRequest",async(n,s)=>{const{id:i,params:r}=s;try{this.isValidSessionSettleRequest(r);const{relay:c,controller:l,expiry:f,namespaces:d,sessionProperties:h,scopedProperties:g,sessionConfig:m}=s.params,y=[...this.pendingSessions.values()].find(E=>E.sessionTopic===n);if(!y)return this.client.logger.error(`Pending session not found for topic ${n}`);const w=this.client.proposal.get(y.proposalId),v=Es(Lt(Lt(Lt({topic:n,relay:c,expiry:f,namespaces:d,acknowledged:!0,pairingTopic:y.pairingTopic,requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces,controller:l.publicKey,self:{publicKey:y.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},h&&{sessionProperties:h}),g&&{scopedProperties:g}),m&&{sessionConfig:m}),{transportType:kt.relay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:y.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(pt("session_connect",y.proposalId),{session:v}),this.pendingSessions.delete(y.proposalId),this.deleteProposal(y.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:s.id,topic:n,result:!0})}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"onSessionSettleResponse",async(n,s)=>{const{id:i}=s;_r(s)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(pt("session_approve",i),{})):Ii(s)&&(await this.client.session.delete(n,zt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",i),{error:s.error}))}),ge(this,"onSessionUpdateRequest",async(n,s)=>{const{params:i,id:r}=s;try{const c=`${n}_session_update`,l=Od.get(c);if(l&&this.isRequestOutOfSync(l,r)){this.client.logger.warn(`Discarding out of sync request - ${r}`),this.sendError({id:r,topic:n,error:zt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Lt({topic:n},i));try{Od.set(c,r),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:r,topic:n,result:!0})}catch(f){throw Od.delete(c),f}this.client.events.emit("session_update",{id:r,topic:n,params:i})}catch(c){await this.sendError({id:r,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"isRequestOutOfSync",(n,s)=>s.toString().slice(0,-3)<n.toString().slice(0,-3)),ge(this,"onSessionUpdateResponse",(n,s)=>{const{id:i}=s,r=pt("session_update",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);_r(s)?this.events.emit(pt("session_update",i),{}):Ii(s)&&this.events.emit(pt("session_update",i),{error:s.error})}),ge(this,"onSessionExtendRequest",async(n,s)=>{const{id:i}=s;try{this.isValidExtend({topic:n}),await this.setExpiry(n,gn(fu)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(r){await this.sendError({id:i,topic:n,error:r}),this.client.logger.error(r)}}),ge(this,"onSessionExtendResponse",(n,s)=>{const{id:i}=s,r=pt("session_extend",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);_r(s)?this.events.emit(pt("session_extend",i),{}):Ii(s)&&this.events.emit(pt("session_extend",i),{error:s.error})}),ge(this,"onSessionPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(r){await this.sendError({id:i,topic:n,error:r}),this.client.logger.error(r)}}),ge(this,"onSessionPingResponse",(n,s)=>{const{id:i}=s,r=pt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners 2176`);_r(s)?this.events.emit(pt("session_ping",i),{}):Ii(s)&&this.events.emit(pt("session_ping",i),{error:s.error})},500)}),ge(this,"onSessionDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n,reason:s.params}),Promise.all([new Promise(r=>{this.client.core.relayer.once(Sn.publish,async()=>{r(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:zt("USER_DISCONNECTED")})]).catch(r=>this.client.logger.error(r))}catch(r){this.client.logger.error(r)}}),ge(this,"onSessionRequest",async n=>{var s,i,r;const{topic:c,payload:l,attestation:f,encryptedId:d,transportType:h}=n,{id:g,params:m}=l;try{await this.isValidRequest(Lt({topic:c},m));const y=this.client.session.get(c),w=await this.getVerifyContext({attestationId:f,hash:Or(JSON.stringify(Bo("wc_sessionRequest",m,g))),encryptedId:d,metadata:y.peer.metadata,transportType:h}),v={id:g,topic:c,params:m,verifyContext:w};await this.setPendingSessionRequest(v),h===kt.link_mode&&(s=y.peer.metadata.redirect)!=null&&s.universal&&this.client.core.addLinkModeSupportedApp((i=y.peer.metadata.redirect)==null?void 0:i.universal),(r=this.client.signConfig)!=null&&r.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(y){await this.sendError({id:g,topic:c,error:y}),this.client.logger.error(y)}}),ge(this,"onSessionRequestResponse",(n,s)=>{const{id:i}=s,r=pt("session_request",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);_r(s)?this.events.emit(pt("session_request",i),{result:s.result}):Ii(s)&&this.events.emit(pt("session_request",i),{error:s.error})}),ge(this,"onSessionEventRequest",async(n,s)=>{const{id:i,params:r}=s;try{const c=`${n}_session_event_${r.event.name}`,l=Od.get(c);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Lt({topic:n},r)),this.client.events.emit("session_event",{id:i,topic:n,params:r}),Od.set(c,i)}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"onSessionAuthenticateResponse",(n,s)=>{const{id:i}=s;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:s}),_r(s)?this.events.emit(pt("session_request",i),{result:s.result}):Ii(s)&&this.events.emit(pt("session_request",i),{error:s.error})}),ge(this,"onSessionAuthenticateRequest",async n=>{var s;const{topic:i,payload:r,attestation:c,encryptedId:l,transportType:f}=n;try{const{requester:d,authPayload:h,expiryTimestamp:g}=r.params,m=await this.getVerifyContext({attestationId:c,hash:Or(JSON.stringify(r)),encryptedId:l,metadata:d.metadata,transportType:f}),y={requester:d,pairingTopic:i,id:r.id,authPayload:h,verifyContext:m,expiryTimestamp:g};await this.setAuthRequest(r.id,{request:y,pairingTopic:i,transportType:f}),f===kt.link_mode&&(s=d.metadata.redirect)!=null&&s.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:r.params,id:r.id,verifyContext:m})}catch(d){this.client.logger.error(d);const h=r.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),m=this.getAppLinkIfEnabled(r.params.requester.metadata,f),y={type:Ia,receiverPublicKey:h,senderPublicKey:g};await this.sendError({id:r.id,topic:i,error:d,encodeOpts:y,rpcOpts:bn.wc_sessionAuthenticate.autoReject,appLink:m})}}),ge(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ge(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Nr.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),ge(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:s})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(r=>r.topic===n&&r.request.method==="wc_sessionRequest").forEach(r=>{const c=r.request.id,l=pt("session_request",c);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(pt("session_request",r.request.id),{error:s})})}),ge(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Nr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(s){this.client.logger.error(s)}}),ge(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Nr.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ge(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const s=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);s&&this.onSessionProposeRequest({topic:n.topic,payload:Bo("wc_sessionPropose",Es(Lt({},s),{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties,scopedProperties:s.scopedProperties}),s.id),attestation:s.attestation,encryptedId:s.encryptedId})}),ge(this,"isValidConnect",async n=>{if(!Ts(n)){const{message:d}=ye("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:c,scopedProperties:l,relays:f}=n;if(Ln(s)||await this.isValidPairingTopic(s),!xZ(f)){const{message:d}=ye("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(d)}if(!Ln(i)&&jr(i)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(i,"requiredNamespaces")}if(!Ln(r)&&jr(r)!==0&&this.validateNamespaces(r,"optionalNamespaces"),Ln(c)||this.validateSessionProps(c,"sessionProperties"),!Ln(l)){this.validateSessionProps(l,"scopedProperties");const d=Object.keys(i||{}).concat(Object.keys(r||{}));if(!Object.keys(l).every(h=>d.includes(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),ge(this,"validateNamespaces",(n,s)=>{const i=EZ(n,"connect()",s);if(i)throw new Error(i.message)}),ge(this,"isValidApprove",async n=>{if(!Ts(n))throw new Error(ye("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:s,namespaces:i,relayProtocol:r,sessionProperties:c,scopedProperties:l}=n;this.checkRecentlyDeleted(s),await this.isValidProposalId(s);const f=this.client.proposal.get(s),d=Av(i,"approve()");if(d)throw new Error(d.message);const h=w5(f.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!on(r,!0)){const{message:g}=ye("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(g)}if(Ln(c)||this.validateSessionProps(c,"sessionProperties"),!Ln(l)){this.validateSessionProps(l,"scopedProperties");const g=new Set(Object.keys(i));if(!Object.keys(l).every(m=>g.has(m.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),ge(this,"isValidReject",async n=>{if(!Ts(n)){const{message:r}=ye("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(r)}const{id:s,reason:i}=n;if(this.checkRecentlyDeleted(s),await this.isValidProposalId(s),!CZ(i)){const{message:r}=ye("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(r)}}),ge(this,"isValidSessionSettleRequest",n=>{if(!Ts(n)){const{message:d}=ye("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:s,controller:i,namespaces:r,expiry:c}=n;if(!LO(s)){const{message:d}=ye("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const l=gZ(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);const f=Av(r,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(Oo(c)){const{message:d}=ye("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),ge(this,"isValidUpdate",async n=>{if(!Ts(n)){const{message:f}=ye("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(f)}const{topic:s,namespaces:i}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s);const r=this.client.session.get(s),c=Av(i,"update()");if(c)throw new Error(c.message);const l=w5(r.requiredNamespaces,i,"update()");if(l)throw new Error(l.message)}),ge(this,"isValidExtend",async n=>{if(!Ts(n)){const{message:i}=ye("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:s}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s)}),ge(this,"isValidRequest",async n=>{if(!Ts(n)){const{message:f}=ye("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(f)}const{topic:s,request:i,chainId:r,expiry:c}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!y5(l,r)){const{message:f}=ye("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(f)}if(!AZ(i)){const{message:f}=ye("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!IZ(l,r,i.method)){const{message:f}=ye("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(c&&!MZ(c,Rv)){const{message:f}=ye("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Rv.min} and ${Rv.max}`);throw new Error(f)}}),ge(this,"isValidRespond",async n=>{var s;if(!Ts(n)){const{message:c}=ye("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:i,response:r}=n;try{await this.isValidSessionTopic(i)}catch(c){throw(s=n?.response)!=null&&s.id&&this.cleanupAfterResponse(n),c}if(!NZ(r)){const{message:c}=ye("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(c)}}),ge(this,"isValidPing",async n=>{if(!Ts(n)){const{message:i}=ye("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)}),ge(this,"isValidEmit",async n=>{if(!Ts(n)){const{message:l}=ye("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(l)}const{topic:s,event:i,chainId:r}=n;await this.isValidSessionTopic(s);const{namespaces:c}=this.client.session.get(s);if(!y5(c,r)){const{message:l}=ye("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(l)}if(!TZ(i)){const{message:l}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}if(!DZ(c,r,i.name)){const{message:l}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}}),ge(this,"isValidDisconnect",async n=>{if(!Ts(n)){const{message:i}=ye("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)}),ge(this,"isValidAuthenticate",n=>{const{chains:s,uri:i,domain:r,nonce:c}=n;if(!Array.isArray(s)||s.length===0)throw new Error("chains is required and must be a non-empty array");if(!on(i,!1))throw new Error("uri is required parameter");if(!on(r,!1))throw new Error("domain is required parameter");if(!on(c,!1))throw new Error("nonce is required parameter");if([...new Set(s.map(f=>Fu(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=Fu(s[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ge(this,"getVerifyContext",async n=>{const{attestationId:s,hash:i,encryptedId:r,metadata:c,transportType:l}=n,f={verified:{verifyUrl:c.verifyUrl||ch,validation:"UNKNOWN",origin:c.url||""}};try{if(l===kt.link_mode){const h=this.getAppLinkIfEnabled(c,l);return f.verified.validation=h&&new URL(h).origin===new URL(c.url).origin?"VALID":"INVALID",f}const d=await this.client.core.verify.resolve({attestationId:s,hash:i,encryptedId:r,verifyUrl:c.verifyUrl});d&&(f.verified.origin=d.origin,f.verified.isScam=d.isScam,f.verified.validation=d.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f}),ge(this,"validateSessionProps",(n,s)=>{Object.values(n).forEach((i,r)=>{if(i==null){const{message:c}=ye("MISSING_OR_INVALID",`${s} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[r]}`);throw new Error(c)}})}),ge(this,"getPendingAuthRequest",n=>{const s=this.client.auth.requests.get(n);return typeof s=="object"?s:void 0}),ge(this,"addToRecentlyDeleted",(n,s)=>{if(this.recentlyDeletedMap.set(n,s),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const r=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(i++>=r)break;this.recentlyDeletedMap.delete(c)}}}),ge(this,"checkRecentlyDeleted",n=>{const s=this.recentlyDeletedMap.get(n);if(s){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${s}: ${n}`);throw new Error(i)}}),ge(this,"isLinkModeEnabled",(n,s)=>{var i,r,c,l,f,d,h,g,m;return!n||s!==kt.link_mode?!1:((r=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:r.linkMode)===!0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==void 0&&((d=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.universal)!==void 0&&((g=n?.redirect)==null?void 0:g.universal)!==""&&((m=n?.redirect)==null?void 0:m.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ge(this,"getAppLinkIfEnabled",(n,s)=>{var i;return this.isLinkModeEnabled(n,s)?(i=n?.redirect)==null?void 0:i.universal:void 0}),ge(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const s=OT(n,"topic")||"",i=decodeURIComponent(OT(n,"wc_ev")||""),r=this.client.session.keys.includes(s);r&&this.client.session.update(s,{transportType:kt.link_mode}),this.client.core.dispatchEnvelope({topic:s,message:i,sessionExists:r})}),ge(this,"registerLinkModeListeners",async()=>{var n;if(WE()||Qo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const s=global==null?void 0:global.Linking;if(typeof s<"u"){s.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await s.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ge(this,"getTVFParams",(n,s,i)=>{var r,c,l;if(!((r=s.request)!=null&&r.method))return{};const f={correlationId:n,rpcMethods:[s.request.method],chainId:s.chainId};try{const d=this.extractTxHashesFromResult(s.request,i);f.txHashes=d,f.contractAddresses=this.isValidContractData(s.request.params)?[(l=(c=s.request.params)==null?void 0:c[0])==null?void 0:l.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return f}),ge(this,"isValidContractData",n=>{var s;if(!n)return!1;try{const i=n?.data||((s=n?.[0])==null?void 0:s.data);if(!i.startsWith("0x"))return!1;const r=i.slice(2);return/^[0-9a-fA-F]*$/.test(r)?r.length%2===0:!1}catch{}return!1}),ge(this,"extractTxHashesFromResult",(n,s)=>{var i;try{if(!s)return[];const r=n.method,c=sse[r];if(r==="sui_signTransaction")return[tX(s.transactionBytes)];if(r==="near_signTransaction")return[BT(s)];if(r==="near_signTransactions")return s.map(f=>BT(f));if(r==="xrpl_signTransactionFor"||r==="xrpl_signTransaction")return[(i=s.tx_json)==null?void 0:i.hash];if(r==="polkadot_signTransaction")return[KZ({transaction:n.params.transactionPayload,signature:s.signature})];if(r==="algo_signTxn")return Da(s)?s.map(f=>jT(f)):[jT(s)];if(r==="cosmos_signDirect")return[sX(s)];if(typeof s=="string")return[s];const l=s[c.key];if(Da(l))return r==="solana_signAllTransactions"?l.map(f=>eX(f)):l;if(typeof l=="string")return[l]}catch(r){this.client.logger.warn("Error extracting tx hashes from result",r)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[s,i]of Object.entries(n))for(const r of i)try{await this.onProviderMessageEvent({topic:s,message:r,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${s}, message: ${r}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Sn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:s,attestation:i,transportType:r}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(z0)?this.client.auth.authKeys.get(z0):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(n,s,{receiverPublicKey:c,encoding:r===kt.link_mode?$o:sr});ox(l)?(this.client.core.history.set(n,l),await this.onRelayEventRequest({topic:n,payload:l,attestation:i,transportType:r,encryptedId:Or(s)})):Ym(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:n,payload:l,transportType:r}),this.client.core.history.delete(n,l.id)):await this.onRelayEventUnknownPayload({topic:n,payload:l,transportType:r}),await this.client.core.relayer.messages.ack(n,s)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(Ti.expired,async e=>{const{topic:n,id:s}=q_(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ye("EXPIRED"),!0);if(s&&this.client.auth.requests.keys.includes(s))return await this.deletePendingAuthRequest(s,ye("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(kc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(kc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!on(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Oo(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ye("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!on(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Oo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ye("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ye("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(on(e,!1)){const{message:n}=ye("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ye("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!SZ(e)){const{message:n}=ye("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Oo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ye("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class yse extends dl{constructor(e,n){super(e,n,ese,cx),this.core=e,this.logger=n}}let wse=class extends dl{constructor(e,n){super(e,n,tse,cx),this.core=e,this.logger=n}};class vse extends dl{constructor(e,n){super(e,n,ise,cx,s=>s.id),this.core=e,this.logger=n}}class bse extends dl{constructor(e,n){super(e,n,cse,Qm,()=>z0),this.core=e,this.logger=n}}let Ese=class extends dl{constructor(e,n){super(e,n,lse,Qm),this.core=e,this.logger=n}};class xse extends dl{constructor(e,n){super(e,n,use,Qm,s=>s.id),this.core=e,this.logger=n}}var Sse=Object.defineProperty,Cse=(t,e,n)=>e in t?Sse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pv=(t,e,n)=>Cse(t,typeof e!="symbol"?e+"":e,n);class Ase{constructor(e,n){this.core=e,this.logger=n,Pv(this,"authKeys"),Pv(this,"pairingTopics"),Pv(this,"requests"),this.authKeys=new bse(this.core,this.logger),this.pairingTopics=new Ese(this.core,this.logger),this.requests=new xse(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Nse=Object.defineProperty,Tse=(t,e,n)=>e in t?Nse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nt=(t,e,n)=>Tse(t,typeof e!="symbol"?e+"":e,n);let Ise=class lM extends QH{constructor(e){super(e),nt(this,"protocol",aM),nt(this,"version",oM),nt(this,"name",Mv.name),nt(this,"metadata"),nt(this,"core"),nt(this,"logger"),nt(this,"events",new $i.EventEmitter),nt(this,"engine"),nt(this,"session"),nt(this,"proposal"),nt(this,"pendingRequest"),nt(this,"auth"),nt(this,"signConfig"),nt(this,"on",(s,i)=>this.events.on(s,i)),nt(this,"once",(s,i)=>this.events.once(s,i)),nt(this,"off",(s,i)=>this.events.off(s,i)),nt(this,"removeListener",(s,i)=>this.events.removeListener(s,i)),nt(this,"removeAllListeners",s=>this.events.removeAllListeners(s)),nt(this,"connect",async s=>{try{return await this.engine.connect(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"pair",async s=>{try{return await this.engine.pair(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"approve",async s=>{try{return await this.engine.approve(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"reject",async s=>{try{return await this.engine.reject(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"update",async s=>{try{return await this.engine.update(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"extend",async s=>{try{return await this.engine.extend(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"request",async s=>{try{return await this.engine.request(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"respond",async s=>{try{return await this.engine.respond(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"ping",async s=>{try{return await this.engine.ping(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"emit",async s=>{try{return await this.engine.emit(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"disconnect",async s=>{try{return await this.engine.disconnect(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"find",s=>{try{return this.engine.find(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}}),nt(this,"authenticate",async(s,i)=>{try{return await this.engine.authenticate(s,i)}catch(r){throw this.logger.error(r.message),r}}),nt(this,"formatAuthMessage",s=>{try{return this.engine.formatAuthMessage(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"approveSessionAuthenticate",async s=>{try{return await this.engine.approveSessionAuthenticate(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"rejectSessionAuthenticate",async s=>{try{return await this.engine.rejectSessionAuthenticate(s)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||Mv.name,this.metadata=WG(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hp(gp({level:e?.logger||Mv.logger}));this.core=e?.core||new Jne(e),this.logger=us(n,this.name),this.session=new wse(this.core,this.logger),this.proposal=new yse(this.core,this.logger),this.pendingRequest=new vse(this.core,this.logger),this.engine=new mse(this),this.auth=new Ase(this.core,this.logger)}static async init(e){const n=new lM(e);return await n.initialize(),n}get context(){return Ps(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var m0={exports:{}},nI;function Dse(){return nI||(nI=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Jn<"u"&&Jn,s=(function(){function r(){this.fetch=!1,this.DOMException=n.DOMException}return r.prototype=n,new r})();(function(r){(function(c){var l=typeof r<"u"&&r||typeof self<"u"&&self||typeof Jn<"u"&&Jn||{},f={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d($){return $&&DataView.prototype.isPrototypeOf($)}if(f.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function($){return $&&h.indexOf(Object.prototype.toString.call($))>-1};function m($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test($)||$==="")throw new TypeError('Invalid character in header field name: "'+$+'"');return $.toLowerCase()}function y($){return typeof $!="string"&&($=String($)),$}function w($){var R={next:function(){var k=$.shift();return{done:k===void 0,value:k}}};return f.iterable&&(R[Symbol.iterator]=function(){return R}),R}function v($){this.map={},$ instanceof v?$.forEach(function(R,k){this.append(k,R)},this):Array.isArray($)?$.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(R){this.append(R,$[R])},this)}v.prototype.append=function($,R){$=m($),R=y(R);var k=this.map[$];this.map[$]=k?k+", "+R:R},v.prototype.delete=function($){delete this.map[m($)]},v.prototype.get=function($){return $=m($),this.has($)?this.map[$]:null},v.prototype.has=function($){return this.map.hasOwnProperty(m($))},v.prototype.set=function($,R){this.map[m($)]=y(R)},v.prototype.forEach=function($,R){for(var k in this.map)this.map.hasOwnProperty(k)&&$.call(R,this.map[k],k,this)},v.prototype.keys=function(){var $=[];return this.forEach(function(R,k){$.push(k)}),w($)},v.prototype.values=function(){var $=[];return this.forEach(function(R){$.push(R)}),w($)},v.prototype.entries=function(){var $=[];return this.forEach(function(R,k){$.push([k,R])}),w($)},f.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function E($){if(!$._noBody){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}}function C($){return new Promise(function(R,k){$.onload=function(){R($.result)},$.onerror=function(){k($.error)}})}function T($){var R=new FileReader,k=C(R);return R.readAsArrayBuffer($),k}function N($){var R=new FileReader,k=C(R),F=/charset=([A-Za-z0-9_-]+)/.exec($.type),K=F?F[1]:"utf-8";return R.readAsText($,K),k}function I($){for(var R=new Uint8Array($),k=new Array(R.length),F=0;F<R.length;F++)k[F]=String.fromCharCode(R[F]);return k.join("")}function S($){if($.slice)return $.slice(0);var R=new Uint8Array($.byteLength);return R.set(new Uint8Array($)),R.buffer}function A(){return this.bodyUsed=!1,this._initBody=function($){this.bodyUsed=this.bodyUsed,this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:f.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:f.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:f.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():f.arrayBuffer&&f.blob&&d($)?(this._bodyArrayBuffer=S($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||g($))?this._bodyArrayBuffer=S($):this._bodyText=$=Object.prototype.toString.call($):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var $=E(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var $=E(this);return $||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var $=E(this);if($)return $;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D($){var R=$.toUpperCase();return _.indexOf(R)>-1?R:$}function O($,R){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var k=R.body;if($ instanceof O){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,R.headers||(this.headers=new v($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!k&&$._bodyInit!=null&&(k=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new v(R.headers)),this.method=D(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||(function(){if("AbortController"in l){var W=new AbortController;return W.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(k),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function P($){var R=new FormData;return $.trim().split("&").forEach(function(k){if(k){var F=k.split("="),K=F.shift().replace(/\+/g," "),W=F.join("=").replace(/\+/g," ");R.append(decodeURIComponent(K),decodeURIComponent(W))}}),R}function U($){var R=new v,k=$.replace(/\r?\n[\t ]+/g," ");return k.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var K=F.split(":"),W=K.shift().trim();if(W){var j=K.join(":").trim();try{R.append(W,j)}catch(X){console.warn("Response "+X.message)}}}),R}A.call(O.prototype);function L($,R){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new v(R.headers),this.url=R.url||"",this._initBody($)}A.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},L.error=function(){var $=new L(null,{status:200,statusText:""});return $.ok=!1,$.status=0,$.type="error",$};var H=[301,302,303,307,308];L.redirect=function($,R){if(H.indexOf(R)===-1)throw new RangeError("Invalid status code");return new L(null,{status:R,headers:{location:$}})},c.DOMException=l.DOMException;try{new c.DOMException}catch{c.DOMException=function(R,k){this.message=R,this.name=k;var F=Error(R);this.stack=F.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function q($,R){return new Promise(function(k,F){var K=new O($,R);if(K.signal&&K.signal.aborted)return F(new c.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function j(){W.abort()}W.onload=function(){var ee={statusText:W.statusText,headers:U(W.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(W.status<200||W.status>599)?ee.status=200:ee.status=W.status,ee.url="responseURL"in W?W.responseURL:ee.headers.get("X-Request-URL");var ae="response"in W?W.response:W.responseText;setTimeout(function(){k(new L(ae,ee))},0)},W.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){F(new c.DOMException("Aborted","AbortError"))},0)};function X(ee){try{return ee===""&&l.location.href?l.location.href:ee}catch{return ee}}if(W.open(K.method,X(K.url),!0),K.credentials==="include"?W.withCredentials=!0:K.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(f.blob?W.responseType="blob":f.arrayBuffer&&(W.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof v||l.Headers&&R.headers instanceof l.Headers)){var Z=[];Object.getOwnPropertyNames(R.headers).forEach(function(ee){Z.push(m(ee)),W.setRequestHeader(ee,y(R.headers[ee]))}),K.headers.forEach(function(ee,ae){Z.indexOf(ae)===-1&&W.setRequestHeader(ae,ee)})}else K.headers.forEach(function(ee,ae){W.setRequestHeader(ae,ee)});K.signal&&(K.signal.addEventListener("abort",j),W.onreadystatechange=function(){W.readyState===4&&K.signal.removeEventListener("abort",j)}),W.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return q.polyfill=!0,l.fetch||(l.fetch=q,l.Headers=v,l.Request=O,l.Response=L),c.Headers=v,c.Request=O,c.Response=L,c.fetch=q,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var i=n.fetch?n:s;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(m0,m0.exports)),m0.exports}var _se=Dse();const sI=sf(_se);var Ose=Object.defineProperty,Mse=Object.defineProperties,Rse=Object.getOwnPropertyDescriptors,iI=Object.getOwnPropertySymbols,Pse=Object.prototype.hasOwnProperty,$se=Object.prototype.propertyIsEnumerable,rI=(t,e,n)=>e in t?Ose(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aI=(t,e)=>{for(var n in e||(e={}))Pse.call(e,n)&&rI(t,n,e[n]);if(iI)for(var n of iI(e))$se.call(e,n)&&rI(t,n,e[n]);return t},oI=(t,e)=>Mse(t,Rse(e));const Use={Accept:"application/json","Content-Type":"application/json"},Lse="POST",cI={headers:Use,method:Lse},lI=10;let ar=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new $i.EventEmitter,this.isAvailable=!1,this.registering=!1,!A5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Pa(e),s=await(await sI(this.url,oI(aI({},cI),{body:n}))).json();this.onPayload({data:s})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!A5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Pa({id:1,jsonrpc:"2.0",method:"test",params:[]});await sI(e,oI(aI({},cI),{body:n}))}this.onOpen()}catch(n){const s=this.parseError(n);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const s=this.parseError(n),i=s.message||s.toString(),r=Gm(e,i);this.events.emit("payload",r)}parseError(e,n=this.url){return jO(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>lI&&this.events.setMaxListeners(lI)}};const uI="error",kse="wss://relay.walletconnect.org",Bse="wc",jse="universal_provider",y0=`${Bse}@2:${jse}:`,uM="https://rpc.walletconnect.org/v1/",Tu="generic",zse=`${uM}bundler`,Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function lx(t){return t==null||typeof t!="object"&&typeof t!="function"}function fM(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function dM(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Hse="[object RegExp]",hM="[object String]",pM="[object Number]",gM="[object Boolean]",mM="[object Arguments]",Fse="[object Symbol]",Vse="[object Date]",qse="[object Map]",Wse="[object Set]",Kse="[object Array]",Gse="[object ArrayBuffer]",Yse="[object Object]",Xse="[object DataView]",Qse="[object Uint8Array]",Zse="[object Uint8ClampedArray]",Jse="[object Uint16Array]",eie="[object Uint32Array]",tie="[object Int8Array]",nie="[object Int16Array]",sie="[object Int32Array]",iie="[object Float32Array]",rie="[object Float64Array]";function ux(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aie(t,e){return ku(t,void 0,t,new Map,e)}function ku(t,e,n,s=new Map,i=void 0){const r=i?.(t,e,n,s);if(r!=null)return r;if(lx(t))return t;if(s.has(t))return s.get(t);if(Array.isArray(t)){const c=new Array(t.length);s.set(t,c);for(let l=0;l<t.length;l++)c[l]=ku(t[l],l,n,s,i);return Object.hasOwn(t,"index")&&(c.index=t.index),Object.hasOwn(t,"input")&&(c.input=t.input),c}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const c=new RegExp(t.source,t.flags);return c.lastIndex=t.lastIndex,c}if(t instanceof Map){const c=new Map;s.set(t,c);for(const[l,f]of t)c.set(l,ku(f,l,n,s,i));return c}if(t instanceof Set){const c=new Set;s.set(t,c);for(const l of t)c.add(ku(l,void 0,n,s,i));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(ux(t)){const c=new(Object.getPrototypeOf(t)).constructor(t.length);s.set(t,c);for(let l=0;l<t.length;l++)c[l]=ku(t[l],l,n,s,i);return c}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const c=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return s.set(t,c),Bc(c,t,n,s,i),c}if(typeof File<"u"&&t instanceof File){const c=new File([t],t.name,{type:t.type});return s.set(t,c),Bc(c,t,n,s,i),c}if(t instanceof Blob){const c=new Blob([t],{type:t.type});return s.set(t,c),Bc(c,t,n,s,i),c}if(t instanceof Error){const c=new t.constructor;return s.set(t,c),c.message=t.message,c.name=t.name,c.stack=t.stack,c.cause=t.cause,Bc(c,t,n,s,i),c}if(typeof t=="object"&&oie(t)){const c=Object.create(Object.getPrototypeOf(t));return s.set(t,c),Bc(c,t,n,s,i),c}return t}function Bc(t,e,n=t,s,i){const r=[...Object.keys(e),...fM(e)];for(let c=0;c<r.length;c++){const l=r[c],f=Object.getOwnPropertyDescriptor(t,l);(f==null||f.writable)&&(t[l]=ku(e[l],l,n,s,i))}}function oie(t){switch(dM(t)){case mM:case Kse:case Gse:case Xse:case gM:case Vse:case iie:case rie:case tie:case nie:case sie:case qse:case pM:case Yse:case Hse:case Wse:case hM:case Fse:case Qse:case Zse:case Jse:case eie:return!0;default:return!1}}function cie(t,e){return aie(t,(n,s,i,r)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case pM:case hM:case gM:{const c=new t.constructor(t?.valueOf());return Bc(c,t),c}case mM:{const c={};return Bc(c,t),c.length=t.length,c[Symbol.iterator]=t[Symbol.iterator],c}default:return}})}function fI(t){return cie(t)}function dI(t){return t!==null&&typeof t=="object"&&dM(t)==="[object Arguments]"}function hI(t){return typeof t=="object"&&t!==null}function lie(){}function uie(t){return ux(t)}function fie(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function die(t){if(lx(t))return t;if(Array.isArray(t)||ux(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const s=new n(t);return s.lastIndex=t.lastIndex,s}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const s=new n(t.message);return s.stack=t.stack,s.name=t.name,s.cause=t.cause,s}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const s=Object.create(e);return Object.assign(s,t)}return t}function hie(t,...e){const n=e.slice(0,-1),s=e[e.length-1];let i=t;for(let r=0;r<n.length;r++){const c=n[r];i=w2(i,c,s,new Map)}return i}function w2(t,e,n,s){if(lx(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(s.has(e))return die(s.get(e));if(s.set(e,t),Array.isArray(e)){e=e.slice();for(let r=0;r<e.length;r++)e[r]=e[r]??void 0}const i=[...Object.keys(e),...fM(e)];for(let r=0;r<i.length;r++){const c=i[r];let l=e[c],f=t[c];if(dI(l)&&(l={...l}),dI(f)&&(f={...f}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=fI(l)),Array.isArray(l))if(typeof f=="object"&&f!=null){const h=[],g=Reflect.ownKeys(f);for(let m=0;m<g.length;m++){const y=g[m];h[y]=f[y]}f=h}else f=[];const d=n(f,l,c,t,e,s);d!=null?t[c]=d:Array.isArray(l)||hI(f)&&hI(l)?t[c]=w2(f,l,n,s):f==null&&fie(l)?t[c]=w2({},l,n,s):f==null&&uie(l)?t[c]=fI(l):(f===void 0||l!==void 0)&&(t[c]=l)}return t}function pie(t,...e){return hie(t,...e,lie)}var gie=Object.defineProperty,mie=Object.defineProperties,yie=Object.getOwnPropertyDescriptors,pI=Object.getOwnPropertySymbols,wie=Object.prototype.hasOwnProperty,vie=Object.prototype.propertyIsEnumerable,gI=(t,e,n)=>e in t?gie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w0=(t,e)=>{for(var n in e||(e={}))wie.call(e,n)&&gI(t,n,e[n]);if(pI)for(var n of pI(e))vie.call(e,n)&&gI(t,n,e[n]);return t},bie=(t,e)=>mie(t,yie(e));function ei(t,e,n){var s;const i=Fu(t);return((s=e.rpcMap)==null?void 0:s[i.reference])||`${uM}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function hl(t){return t.includes(":")?t.split(":")[1]:t}function yM(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Eie(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const s=[];return n.forEach(i=>{const r=e.namespaces[i].accounts;s.push(...r)}),s}function mI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var s,i;return((s=n?.chains)==null?void 0:s.length)&&((i=n?.chains)==null?void 0:i.length)>0}))}function v0(t={},e={}){const n=mI(yI(t)),s=mI(yI(e));return pie(n,s)}function yI(t){var e,n,s,i,r;const c={};if(!jr(t))return c;for(const[l,f]of Object.entries(t)){const d=Wm(l)?[l]:f.chains,h=f.methods||[],g=f.events||[],m=f.rpcMap||{},y=Lu(l);c[y]=bie(w0(w0({},c[y]),f),{chains:Br(d,(e=c[y])==null?void 0:e.chains),methods:Br(h,(n=c[y])==null?void 0:n.methods),events:Br(g,(s=c[y])==null?void 0:s.events)}),(jr(m)||jr(((i=c[y])==null?void 0:i.rpcMap)||{}))&&(c[y].rpcMap=w0(w0({},m),(r=c[y])==null?void 0:r.rpcMap))}return c}function wI(t){return t.includes(":")?t.split(":")[2]:t}function vI(t){const e={};for(const[n,s]of Object.entries(t)){const i=s.methods||[],r=s.events||[],c=s.accounts||[],l=Wm(n)?[n]:s.chains?s.chains:yM(s.accounts);e[n]={chains:l,methods:i,events:r,accounts:c}}return e}function $v(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const wM={},ft=t=>wM[t],Uv=(t,e)=>{wM[t]=e};var xie=Object.defineProperty,bI=Object.getOwnPropertySymbols,Sie=Object.prototype.hasOwnProperty,Cie=Object.prototype.propertyIsEnumerable,EI=(t,e,n)=>e in t?xie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xI=(t,e)=>{for(var n in e||(e={}))Sie.call(e,n)&&EI(t,n,e[n]);if(bI)for(var n of bI(e))Cie.call(e,n)&&EI(t,n,e[n]);return t};const SI="eip155",Aie=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Nie=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Lv=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,CI=t=>Object.keys(t).filter(e=>Aie.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),Tie=(t,e,n)=>{const{sessionProperties:s={},scopedProperties:i={}}=t,r={};if(!jr(i)&&!jr(s))return;const c=CI(s);for(const l of n){const f=Nie(l);if(!f)continue;r[Lv(f)]=c;const d=i?.[`${SI}:${f}`];if(d){const h=d?.[`${SI}:${f}:${e}`];r[Lv(f)]=xI(xI({},r[Lv(f)]),CI(h||d))}}for(const[l,f]of Object.entries(r))Object.keys(f).length===0&&delete r[l];return Object.keys(r).length>0?r:void 0};var Iie=Object.defineProperty,Die=(t,e,n)=>e in t?Iie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,du=(t,e,n)=>Die(t,typeof e!="symbol"?e+"":e,n);let _ie=class{constructor(e){du(this,"name","polkadot"),du(this,"client"),du(this,"httpProviders"),du(this,"events"),du(this,"namespace"),du(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var Oie=Object.defineProperty,Mie=Object.defineProperties,Rie=Object.getOwnPropertyDescriptors,AI=Object.getOwnPropertySymbols,Pie=Object.prototype.hasOwnProperty,$ie=Object.prototype.propertyIsEnumerable,v2=(t,e,n)=>e in t?Oie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NI=(t,e)=>{for(var n in e||(e={}))Pie.call(e,n)&&v2(t,n,e[n]);if(AI)for(var n of AI(e))$ie.call(e,n)&&v2(t,n,e[n]);return t},TI=(t,e)=>Mie(t,Rie(e)),hu=(t,e,n)=>v2(t,typeof e!="symbol"?e+"":e,n);let Uie=class{constructor(e){hu(this,"name","eip155"),hu(this,"client"),hu(this,"chainId"),hu(this,"namespace"),hu(this,"httpProviders"),hu(this,"events"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const s=n||ei(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=parseInt(hl(n));e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,s;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const r=parseInt(i,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${r}`);else throw new Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,s,i,r,c;const l=(s=(n=e.request)==null?void 0:n.params)==null?void 0:s[0],f=((r=(i=e.request)==null?void 0:i.params)==null?void 0:r[1])||[];if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(e.topic),h=((c=d?.sessionProperties)==null?void 0:c.capabilities)||{},g=`${l}${f.join(",")}`,m=h?.[g];if(m)return m;let y;try{y=Tie(d,l,f)}catch(v){console.warn("Failed to extract capabilities from session",v)}if(y)return y;const w=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:TI(NI({},d.sessionProperties||{}),{capabilities:TI(NI({},h||{}),{[g]:w})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return w}async getCallStatus(e){var n,s;const i=this.client.session.get(e.topic),r=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(r){const l=this.getBundlerUrl(e.chainId,r);try{return await this.getUserOperationReceipt(l,e)}catch(f){console.warn("Failed to fetch call status from bundler",f,l)}}const c=(s=i.sessionProperties)==null?void 0:s.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var s;const i=new URL(e),r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bo("eth_getUserOperationReceipt",[(s=n.request.params)==null?void 0:s[0]]))});if(!r.ok)throw new Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,n){return`${zse}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}};var Lie=Object.defineProperty,kie=(t,e,n)=>e in t?Lie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pu=(t,e,n)=>kie(t,typeof e!="symbol"?e+"":e,n);let Bie=class{constructor(e){pu(this,"name","solana"),pu(this,"client"),pu(this,"httpProviders"),pu(this,"events"),pu(this,"namespace"),pu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var jie=Object.defineProperty,zie=(t,e,n)=>e in t?jie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gu=(t,e,n)=>zie(t,typeof e!="symbol"?e+"":e,n);let Hie=class{constructor(e){gu(this,"name","cosmos"),gu(this,"client"),gu(this,"httpProviders"),gu(this,"events"),gu(this,"namespace"),gu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var Fie=Object.defineProperty,Vie=(t,e,n)=>e in t?Fie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mu=(t,e,n)=>Vie(t,typeof e!="symbol"?e+"":e,n);let qie=class{constructor(e){mu(this,"name","algorand"),mu(this,"client"),mu(this,"httpProviders"),mu(this,"events"),mu(this,"namespace"),mu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ui(new ar(s,ft("disableProviderPing")))}};var Wie=Object.defineProperty,Kie=(t,e,n)=>e in t?Wie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yu=(t,e,n)=>Kie(t,typeof e!="symbol"?e+"":e,n);class Gie{constructor(e){yu(this,"name","cip34"),yu(this,"client"),yu(this,"httpProviders"),yu(this,"events"),yu(this,"namespace"),yu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const s=this.getCardanoRPCUrl(n),i=hl(n);e[i]=this.createHttpProvider(i,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var Yie=Object.defineProperty,Xie=(t,e,n)=>e in t?Yie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wu=(t,e,n)=>Xie(t,typeof e!="symbol"?e+"":e,n);class Qie{constructor(e){wu(this,"name","elrond"),wu(this,"client"),wu(this,"httpProviders"),wu(this,"events"),wu(this,"namespace"),wu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var Zie=Object.defineProperty,Jie=(t,e,n)=>e in t?Zie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vu=(t,e,n)=>Jie(t,typeof e!="symbol"?e+"":e,n);class ere{constructor(e){vu(this,"name","multiversx"),vu(this,"client"),vu(this,"httpProviders"),vu(this,"events"),vu(this,"namespace"),vu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var tre=Object.defineProperty,nre=(t,e,n)=>e in t?tre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bu=(t,e,n)=>nre(t,typeof e!="symbol"?e+"":e,n);class sre{constructor(e){bu(this,"name","near"),bu(this,"client"),bu(this,"httpProviders"),bu(this,"events"),bu(this,"namespace"),bu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace);return typeof s>"u"?void 0:new Ui(new ar(s,ft("disableProviderPing")))}}var ire=Object.defineProperty,rre=(t,e,n)=>e in t?ire(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eu=(t,e,n)=>rre(t,typeof e!="symbol"?e+"":e,n);class are{constructor(e){Eu(this,"name","tezos"),Eu(this,"client"),Eu(this,"httpProviders"),Eu(this,"events"),Eu(this,"namespace"),Eu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace);return typeof s>"u"?void 0:new Ui(new ar(s))}}var ore=Object.defineProperty,cre=(t,e,n)=>e in t?ore(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xu=(t,e,n)=>cre(t,typeof e!="symbol"?e+"":e,n);class lre{constructor(e){xu(this,"name",Tu),xu(this,"client"),xu(this,"httpProviders"),xu(this,"events"),xu(this,"namespace"),xu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const s={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const r=Fu(i);s[`${r.namespace}:${r.reference}`]=this.createHttpProvider(i)}),s}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var ure=Object.defineProperty,fre=Object.defineProperties,dre=Object.getOwnPropertyDescriptors,II=Object.getOwnPropertySymbols,hre=Object.prototype.hasOwnProperty,pre=Object.prototype.propertyIsEnumerable,b2=(t,e,n)=>e in t?ure(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b0=(t,e)=>{for(var n in e||(e={}))hre.call(e,n)&&b2(t,n,e[n]);if(II)for(var n of II(e))pre.call(e,n)&&b2(t,n,e[n]);return t},kv=(t,e)=>fre(t,dre(e)),xi=(t,e,n)=>b2(t,typeof e!="symbol"?e+"":e,n);class Zm{constructor(e){xi(this,"client"),xi(this,"namespaces"),xi(this,"optionalNamespaces"),xi(this,"sessionProperties"),xi(this,"scopedProperties"),xi(this,"events",new PE),xi(this,"rpcProviders",{}),xi(this,"session"),xi(this,"providerOpts"),xi(this,"logger"),xi(this,"uri"),xi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hp(gp({level:e?.logger||uI})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new Zm(e);return await n.initialize(),n}async request(e,n,s){const[i,r]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:b0({},e),chainId:`${i}:${r}`,topic:this.session.topic,expiry:s})}sendAsync(e,n,s,i){const r=new Date().getTime();this.request(e,s,i).then(c=>n(null,Km(r,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:s,response:i}=await this.client.authenticate(e,n);s&&(this.uri=s,this.events.emit("display_uri",s));const r=await i();if(this.session=r.session,this.session){const c=vI(this.session.namespaces);this.namespaces=v0(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();this.session=i;const r=vI(i.namespaces);return this.namespaces=v0(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[s,i]=this.validateChain(e),r=this.getProvider(s);r.name===Tu?r.setDefaultChain(`${s}:${i}`,n):r.setDefaultChain(i,n)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Da(n)){for(const s of n)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Ise.init({core:this.providerOpts.core,logger:this.providerOpts.logger||uI,relayUrl:this.providerOpts.relayUrl||kse,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(s){throw this.logger.error("Failed to get session",s),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const s=this.client.session.getAll();this.session=s[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Lu(n)))];Uv("client",this.client),Uv("events",this.events),Uv("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const s=Eie(n,this.session);if(s?.length===0)return;const i=yM(s),r=v0(this.namespaces,this.optionalNamespaces),c=kv(b0({},r[n]),{accounts:s,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new Uie({namespace:c});break;case"algorand":this.rpcProviders[n]=new qie({namespace:c});break;case"solana":this.rpcProviders[n]=new Bie({namespace:c});break;case"cosmos":this.rpcProviders[n]=new Hie({namespace:c});break;case"polkadot":this.rpcProviders[n]=new _ie({namespace:c});break;case"cip34":this.rpcProviders[n]=new Gie({namespace:c});break;case"elrond":this.rpcProviders[n]=new Qie({namespace:c});break;case"multiversx":this.rpcProviders[n]=new ere({namespace:c});break;case"near":this.rpcProviders[n]=new sre({namespace:c});break;case"tezos":this.rpcProviders[n]=new are({namespace:c});break;default:this.rpcProviders[Tu]?this.rpcProviders[Tu].updateNamespace(c):this.rpcProviders[Tu]=new lre({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:s}=e;s===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:s,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:r}=s;if(r.name==="accountsChanged"){const c=r.data;c&&Da(c)&&this.events.emit("accountsChanged",c.map(wI))}else if(r.name==="chainChanged"){const c=s.chainId,l=s.event.data,f=Lu(c),d=$v(c)!==$v(l)?`${f}:${$v(l)}`:c;this.onChainChanged(d)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var s,i;if(e!==((s=this.session)==null?void 0:s.topic))return;const{namespaces:r}=n,c=(i=this.client)==null?void 0:i.session.get(e);this.session=kv(b0({},c),{namespaces:r}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",kv(b0({},zt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Tu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:s={},sessionProperties:i,scopedProperties:r}=e;this.optionalNamespaces=v0(n,s),this.sessionProperties=i,this.scopedProperties=r}validateChain(e){const[n,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,s];if(n&&!Object.keys(this.namespaces||{}).map(c=>Lu(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&s)return[n,s];const i=Lu(Object.keys(this.namespaces)[0]),r=this.rpcProviders[i].getDefaultChain();return[i,r]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[s,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(s,i),this.events.emit("chainChanged",i);const r=this.getProvider(s).getDefaultChain();n||this.getProvider(s).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:s,previousChainId:r,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:s}){var i,r;try{if(n===s)return;const c=(r=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:r.accounts;if(!c)return;const l=c.filter(f=>f.includes(`${s}:`)).map(wI);if(!Da(l))return;this.events.emit("accountsChanged",l)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const s=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[s]?this.namespaces[s]&&(this.namespaces[s].defaultChain=n):this.namespaces[s]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var s;const i=((s=this.session)==null?void 0:s.topic)||"";await this.client.core.storage.setItem(`${y0}/${e}${i}`,n)}async getFromStore(e){var n;const s=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${y0}/${e}${s}`)}async deleteFromStore(e){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${y0}/${e}${s}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const s of n)s.startsWith(y0)&&await this.client.core.storage.removeItem(s)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const gre=Zm;var DI={};const he={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof DI<"u"?DI.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},vM={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[s]=e.split(":");return he.CHAIN_NAME_MAP?.[s]||void 0}},bM=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var mre=20,yre=1,rl=1e6,_I=1e6,wre=-7,vre=21,bre=!1,Sp="[big.js] ",pl=Sp+"Invalid ",Jm=pl+"decimal places",Ere=pl+"rounding mode",EM=Sp+"Division by zero",Et={},zr=void 0,xre=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function xM(){function t(e){var n=this;if(!(n instanceof t))return e===zr?xM():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(pl+"value");e=e===0&&1/e<0?"-0":String(e)}Sre(n,e)}n.constructor=t}return t.prototype=Et,t.DP=mre,t.RM=yre,t.NE=wre,t.PE=vre,t.strict=bre,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Sre(t,e){var n,s,i;if(!xre.test(e))throw Error(pl+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),i=e.length,s=0;s<i&&e.charAt(s)=="0";)++s;if(s==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=n-s-1,t.c=[],n=0;s<=i;)t.c[n++]=+e.charAt(s++)}return t}function gl(t,e,n,s){var i=t.c;if(n===zr&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Ere);if(e<1)s=n===3&&(s||!!i[0])||e===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(s||i[1]!==zr))),i.length=1,s?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(s=n===1&&i[e]>=5||n===2&&(i[e]>5||i[e]===5&&(s||i[e+1]!==zr||i[e-1]&1))||n===3&&(s||!!i[0]),i.length=e,s){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function ml(t,e,n){var s=t.e,i=t.c.join(""),r=i.length;if(e)i=i.charAt(0)+(r>1?"."+i.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)i="0"+i;i="0."+i}else if(s>0)if(++s>r)for(s-=r;s--;)i+="0";else s<r&&(i=i.slice(0,s)+"."+i.slice(s));else r>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&n?"-"+i:i}Et.abs=function(){var t=new this.constructor(this);return t.s=1,t};Et.cmp=function(t){var e,n=this,s=n.c,i=(t=new n.constructor(t)).c,r=n.s,c=t.s,l=n.e,f=t.e;if(!s[0]||!i[0])return s[0]?r:i[0]?-c:0;if(r!=c)return r;if(e=r<0,l!=f)return l>f^e?1:-1;for(c=(l=s.length)<(f=i.length)?l:f,r=-1;++r<c;)if(s[r]!=i[r])return s[r]>i[r]^e?1:-1;return l==f?0:l>f^e?1:-1};Et.div=function(t){var e=this,n=e.constructor,s=e.c,i=(t=new n(t)).c,r=e.s==t.s?1:-1,c=n.DP;if(c!==~~c||c<0||c>rl)throw Error(Jm);if(!i[0])throw Error(EM);if(!s[0])return t.s=r,t.c=[t.e=0],t;var l,f,d,h,g,m=i.slice(),y=l=i.length,w=s.length,v=s.slice(0,l),E=v.length,C=t,T=C.c=[],N=0,I=c+(C.e=e.e-t.e)+1;for(C.s=r,r=I<0?0:I,m.unshift(0);E++<l;)v.push(0);do{for(d=0;d<10;d++){if(l!=(E=v.length))h=l>E?1:-1;else for(g=-1,h=0;++g<l;)if(i[g]!=v[g]){h=i[g]>v[g]?1:-1;break}if(h<0){for(f=E==l?i:m;E;){if(v[--E]<f[E]){for(g=E;g&&!v[--g];)v[g]=9;--v[g],v[E]+=10}v[E]-=f[E]}for(;!v[0];)v.shift()}else break}T[N++]=h?d:++d,v[0]&&h?v[E]=s[y]||0:v=[s[y]]}while((y++<w||v[0]!==zr)&&r--);return!T[0]&&N!=1&&(T.shift(),C.e--,I--),N>I&&gl(C,I,n.RM,v[0]!==zr),C};Et.eq=function(t){return this.cmp(t)===0};Et.gt=function(t){return this.cmp(t)>0};Et.gte=function(t){return this.cmp(t)>-1};Et.lt=function(t){return this.cmp(t)<0};Et.lte=function(t){return this.cmp(t)<1};Et.minus=Et.sub=function(t){var e,n,s,i,r=this,c=r.constructor,l=r.s,f=(t=new c(t)).s;if(l!=f)return t.s=-f,r.plus(t);var d=r.c.slice(),h=r.e,g=t.c,m=t.e;if(!d[0]||!g[0])return g[0]?t.s=-f:d[0]?t=new c(r):t.s=1,t;if(l=h-m){for((i=l<0)?(l=-l,s=d):(m=h,s=g),s.reverse(),f=l;f--;)s.push(0);s.reverse()}else for(n=((i=d.length<g.length)?d:g).length,l=f=0;f<n;f++)if(d[f]!=g[f]){i=d[f]<g[f];break}if(i&&(s=d,d=g,g=s,t.s=-t.s),(f=(n=g.length)-(e=d.length))>0)for(;f--;)d[e++]=0;for(f=e;n>l;){if(d[--n]<g[n]){for(e=n;e&&!d[--e];)d[e]=9;--d[e],d[n]+=10}d[n]-=g[n]}for(;d[--f]===0;)d.pop();for(;d[0]===0;)d.shift(),--m;return d[0]||(t.s=1,d=[m=0]),t.c=d,t.e=m,t};Et.mod=function(t){var e,n=this,s=n.constructor,i=n.s,r=(t=new s(t)).s;if(!t.c[0])throw Error(EM);return n.s=t.s=1,e=t.cmp(n)==1,n.s=i,t.s=r,e?new s(n):(i=s.DP,r=s.RM,s.DP=s.RM=0,n=n.div(t),s.DP=i,s.RM=r,this.minus(n.times(t)))};Et.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Et.plus=Et.add=function(t){var e,n,s,i=this,r=i.constructor;if(t=new r(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var c=i.e,l=i.c,f=t.e,d=t.c;if(!l[0]||!d[0])return d[0]||(l[0]?t=new r(i):t.s=i.s),t;if(l=l.slice(),e=c-f){for(e>0?(f=c,s=d):(e=-e,s=l),s.reverse();e--;)s.push(0);s.reverse()}for(l.length-d.length<0&&(s=d,d=l,l=s),e=d.length,n=0;e;l[e]%=10)n=(l[--e]=l[e]+d[e]+n)/10|0;for(n&&(l.unshift(n),++f),e=l.length;l[--e]===0;)l.pop();return t.c=l,t.e=f,t};Et.pow=function(t){var e=this,n=new e.constructor("1"),s=n,i=t<0;if(t!==~~t||t<-_I||t>_I)throw Error(pl+"exponent");for(i&&(t=-t);t&1&&(s=s.times(e)),t>>=1,!!t;)e=e.times(e);return i?n.div(s):s};Et.prec=function(t,e){if(t!==~~t||t<1||t>rl)throw Error(pl+"precision");return gl(new this.constructor(this),t,e)};Et.round=function(t,e){if(t===zr)t=0;else if(t!==~~t||t<-rl||t>rl)throw Error(Jm);return gl(new this.constructor(this),t+this.e+1,e)};Et.sqrt=function(){var t,e,n,s=this,i=s.constructor,r=s.s,c=s.e,l=new i("0.5");if(!s.c[0])return new i(s);if(r<0)throw Error(Sp+"No square root");r=Math.sqrt(+ml(s,!0,!0)),r===0||r===1/0?(e=s.c.join(""),e.length+c&1||(e+="0"),r=Math.sqrt(e),c=((c+1)/2|0)-(c<0||c&1),t=new i((r==1/0?"5e":(r=r.toExponential()).slice(0,r.indexOf("e")+1))+c)):t=new i(r+""),c=t.e+(i.DP+=4);do n=t,t=l.times(n.plus(s.div(n)));while(n.c.slice(0,c).join("")!==t.c.slice(0,c).join(""));return gl(t,(i.DP-=4)+t.e+1,i.RM)};Et.times=Et.mul=function(t){var e,n=this,s=n.constructor,i=n.c,r=(t=new s(t)).c,c=i.length,l=r.length,f=n.e,d=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!r[0])return t.c=[t.e=0],t;for(t.e=f+d,c<l&&(e=i,i=r,r=e,d=c,c=l,l=d),e=new Array(d=c+l);d--;)e[d]=0;for(f=l;f--;){for(l=0,d=c+f;d>f;)l=e[d]+r[f]*i[d-f-1]+l,e[d--]=l%10,l=l/10|0;e[d]=l}for(l?++t.e:e.shift(),f=e.length;!e[--f];)e.pop();return t.c=e,t};Et.toExponential=function(t,e){var n=this,s=n.c[0];if(t!==zr){if(t!==~~t||t<0||t>rl)throw Error(Jm);for(n=gl(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return ml(n,!0,!!s)};Et.toFixed=function(t,e){var n=this,s=n.c[0];if(t!==zr){if(t!==~~t||t<0||t>rl)throw Error(Jm);for(n=gl(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return ml(n,!1,!!s)};Et[Symbol.for("nodejs.util.inspect.custom")]=Et.toJSON=Et.toString=function(){var t=this,e=t.constructor;return ml(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Et.toNumber=function(){var t=+ml(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Sp+"Imprecise conversion");return t};Et.toPrecision=function(t,e){var n=this,s=n.constructor,i=n.c[0];if(t!==zr){if(t!==~~t||t<1||t>rl)throw Error(pl+"precision");for(n=gl(new s(n),t,e);n.c.length<t;)n.c.push(0)}return ml(n,t<=n.e||n.e<=s.NE||n.e>=s.PE,!!i)};Et.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Sp+"valueOf disallowed");return ml(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ud=xM();const Cre={bigNumber(t){return t?new Ud(t):new Ud(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ud(0);const n=new Ud(t),s=new Ud(e);return n.times(s)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Are=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Nre=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Tre=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ire={getERC20Abi:t=>he.USDT_CONTRACT_ADDRESSES.includes(t)?Tre:Are,getSwapAbi:()=>Nre},Qs={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,s,i]=e;if(!n||!s||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:s,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,s]=e;if(!n||!s)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:s}}},Ue={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function Bv(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Re={setItem(t,e){Bu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Bu())return localStorage.getItem(t)||void 0},removeItem(t){Bu()&&localStorage.removeItem(t)},clear(){Bu()&&localStorage.clear()}};function Bu(){return typeof window<"u"&&typeof localStorage<"u"}function jo(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Dre=Symbol(),OI=Object.getPrototypeOf,E2=new WeakMap,_re=t=>t&&(E2.has(t)?E2.get(t):OI(t)===Object.prototype||OI(t)===Array.prototype),Ore=t=>_re(t)&&t[Dre]||null,MI=(t,e=!0)=>{E2.set(t,e)},Em={},fx=t=>typeof t=="object"&&t!==null,Mre=t=>fx(t)&&!Cp.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),SM=(t,e)=>{const n=x2.get(t);if(n?.[0]===e)return n[1];const s=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return MI(s,!0),x2.set(t,[e,s]),Reflect.ownKeys(t).forEach(i=>{if(Object.getOwnPropertyDescriptor(s,i))return;const r=Reflect.get(t,i),{enumerable:c}=Reflect.getOwnPropertyDescriptor(t,i),l={value:r,enumerable:c,configurable:!0};if(Cp.has(r))MI(r,!1);else if(Go.has(r)){const[f,d]=Go.get(r);l.value=SM(f,d())}Object.defineProperty(s,i,l)}),Object.preventExtensions(s)},Rre=(t,e,n,s)=>({deleteProperty(i,r){const c=Reflect.get(i,r);n(r);const l=Reflect.deleteProperty(i,r);return l&&s(["delete",[r],c]),l},set(i,r,c,l){const f=!t()&&Reflect.has(i,r),d=Reflect.get(i,r,l);if(f&&(RI(d,c)||Ph.has(c)&&RI(d,Ph.get(c))))return!0;n(r),fx(c)&&(c=Ore(c)||c);const h=!Go.has(c)&&$re(c)?Rt(c):c;return e(r,h),Reflect.set(i,r,h,l),s(["set",[r],c,d]),!0}}),Go=new WeakMap,Cp=new WeakSet,x2=new WeakMap,Wd=[1,1],Ph=new WeakMap;let RI=Object.is,Pre=(t,e)=>new Proxy(t,e),$re=Mre,Ure=SM,Lre=Rre;function Rt(t={}){if(!fx(t))throw new Error("object required");const e=Ph.get(t);if(e)return e;let n=Wd[0];const s=new Set,i=(E,C=++Wd[0])=>{n!==C&&(n=C,s.forEach(T=>T(E,C)))};let r=Wd[1];const c=(E=++Wd[1])=>(r!==E&&!s.size&&(r=E,f.forEach(([C])=>{const T=C[1](E);T>n&&(n=T)})),n),l=E=>(C,T)=>{const N=[...C];N[1]=[E,...N[1]],i(N,T)},f=new Map,d=(E,C)=>{const T=!Cp.has(C)&&Go.get(C);if(T){if((Em?"production":void 0)!=="production"&&f.has(E))throw new Error("prop listener already exists");if(s.size){const N=T[2](l(E));f.set(E,[T,N])}else f.set(E,[T])}},h=E=>{var C;const T=f.get(E);T&&(f.delete(E),(C=T[1])==null||C.call(T))},g=E=>(s.add(E),s.size===1&&f.forEach(([T,N],I)=>{if((Em?"production":void 0)!=="production"&&N)throw new Error("remove already exists");const S=T[2](l(I));f.set(I,[T,S])}),()=>{s.delete(E),s.size===0&&f.forEach(([T,N],I)=>{N&&(N(),f.set(I,[T]))})});let m=!0;const y=Lre(()=>m,d,h,i),w=Pre(t,y);Ph.set(t,w);const v=[t,c,g];return Go.set(w,v),Reflect.ownKeys(t).forEach(E=>{const C=Object.getOwnPropertyDescriptor(t,E);"value"in C&&C.writable&&(w[E]=t[E])}),m=!1,w}function Bn(t,e,n){const s=Go.get(t);(Em?"production":void 0)!=="production"&&!s&&console.warn("Please use proxy object");let i;const r=[],c=s[2];let l=!1;const d=c(h=>{r.push(h),i||(i=Promise.resolve().then(()=>{i=void 0,l&&e(r.splice(0))}))});return l=!0,()=>{l=!1,d()}}function $h(t){const e=Go.get(t);(Em?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,s]=e;return Ure(n,s())}function al(t){return Cp.add(t),t}function kre(){return{proxyStateMap:Go,refSet:Cp,snapCache:x2,versionHolder:Wd,proxyCache:Ph}}function ts(t,e,n,s){let i=t[e];return Bn(t,()=>{const r=t[e];Object.is(i,r)||n(i=r)})}const{proxyStateMap:Bre,snapCache:jre}=kre(),E0=t=>Bre.has(t);function zre(t){const e=[];let n=0;const s=new Map,i=new WeakMap,r=()=>{const d=jre.get(l),h=d?.[1];if(h&&!i.has(h)){const g=new Map(s);i.set(h,g)}},c=d=>i.get(d)||s,l={data:e,index:n,epoch:0,get size(){return E0(this)||r(),c(this).size},get(d){const g=c(this).get(d);if(g===void 0){this.epoch;return}return this.data[g]},has(d){const h=c(this);return this.epoch,h.has(d)},set(d,h){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");const g=s.get(d);return g===void 0?(s.set(d,this.index),this.data[this.index++]=h):this.data[g]=h,this.epoch++,this},delete(d){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");const h=s.get(d);return h===void 0?!1:(delete this.data[h],s.delete(d),this.epoch++,!0)},clear(){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,s.clear()},forEach(d){this.epoch,c(this).forEach((g,m)=>{d(this.data[g],m,this)})},*entries(){this.epoch;const d=c(this);for(const[h,g]of d)yield[h,this.data[g]]},*keys(){this.epoch;const d=c(this);for(const h of d.keys())yield h},*values(){this.epoch;const d=c(this);for(const h of d.values())yield this.data[h]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},f=Rt(l);return Object.defineProperties(f,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(f),f}const CM=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Hre="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",yt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,BALANCE_SUPPORTED_CHAINS:[he.CHAIN.EVM,he.CHAIN.SOLANA],NAMES_SUPPORTED_CHAIN_NAMESPACES:[he.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[he.CHAIN.EVM,he.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},me={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=me.getActiveNamespace(),e=me.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,s=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:s}},setWalletConnectDeepLink({name:t,href:e}){try{Re.setItem(Ue.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Re.getItem(Ue.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Re.removeItem(Ue.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Re.setItem(Ue.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Re.setItem(Ue.ACTIVE_CAIP_NETWORK_ID,t),me.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Re.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Re.removeItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Bv(t);Re.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=me.getRecentWallets();e.find(s=>s.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Re.setItem(Ue.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Re.getItem(Ue.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=Bv(t);Re.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Re.getItem(Ue.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Bv(t);return Re.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Re.setItem(Ue.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Re.getItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Re.removeItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Re.getItem(Ue.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Re.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{Re.setItem(Ue.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Re.getItem(Ue.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Re.getItem(Ue.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Re.setItem(Ue.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=me.getConnectedNamespaces();e.includes(t)||(e.push(t),me.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=me.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),me.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Re.getItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Re.setItem(Ue.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Re.removeItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Re.getItem(Ue.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=me.getBalanceCache();Re.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=me.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;me.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=me.getBalanceCache();e[t.caipAddress]=t,Re.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Re.getItem(Ue.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=me.getBalanceCache();Re.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=me.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),me.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=me.getNativeBalanceCache();e[t.caipAddress]=t,Re.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Re.getItem(Ue.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=me.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;me.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=me.getEnsCache();e[t.address]=t,Re.setItem(Ue.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=me.getEnsCache();Re.setItem(Ue.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Re.getItem(Ue.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=me.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;me.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=me.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Re.setItem(Ue.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=me.getIdentityCache();Re.setItem(Ue.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Re.removeItem(Ue.PORTFOLIO_CACHE),Re.removeItem(Ue.NATIVE_BALANCE_CACHE),Re.removeItem(Ue.ENS_CACHE),Re.removeItem(Ue.IDENTITY_CACHE),Re.removeItem(Ue.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Re.setItem(Ue.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Re.getItem(Ue.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=me.getConnections(),s=n[e]??[],i=new Map;for(const c of s)i.set(c.connectorId,{...c});for(const c of t){const l=i.get(c.connectorId),f=c.connectorId===he.CONNECTOR_ID.AUTH;if(l&&!f){const d=new Set(l.accounts.map(g=>g.address.toLowerCase())),h=c.accounts.filter(g=>!d.has(g.address.toLowerCase()));l.accounts.push(...h)}else i.set(c.connectorId,{...c})}const r={...n,[e]:Array.from(i.values())};Re.setItem(Ue.CONNECTIONS,JSON.stringify(r))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Re.getItem(Ue.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const s=me.getConnections(),i=s[n]??[],r=new Map(i.map(l=>[l.connectorId,l])),c=r.get(t);c&&(c.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase()).length===0?r.delete(t):r.set(t,{...c,accounts:c.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase())})),Re.setItem(Ue.CONNECTIONS,JSON.stringify({...s,[n]:Array.from(r.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Re.getItem(Ue.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=me.getDisconnectedConnectorIds(),s=n[e]??[];s.push(t),Re.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(s))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=me.getDisconnectedConnectorIds();let s=n[e]??[];s=s.filter(i=>i.toLowerCase()!==t.toLowerCase()),Re.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(s))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(me.getDisconnectedConnectorIds()[e]??[]).some(i=>i.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=Re.getItem(Ue.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const s=me.getTransactionsCache()[t]?.[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;me.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:s}){try{const i=me.getTransactionsCache();i[t]={...i[t],[e]:{timestamp:n,transactions:s}},Re.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(i))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:s})}},removeTransactionsCache({address:t,chainId:e}){try{const n=me.getTransactionsCache(),s=n?.[t]||{},{[e]:i,...r}=s;Re.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:r}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=Re.getItem(Ue.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=me.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;me.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=me.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},Re.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=me.getTokenPriceCache();Re.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},Me={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return Me.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=yt.TEN_SEC_MS:!0},isAllowedRetry(t,e=yt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(Me.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),s=new URL(e);return n.hostname===s.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+yt.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...s)=>{function i(){t(...s)}n&&clearTimeout(n),n=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Me.isHttpUrl(t))return this.formatUniversalUrl(t,e);let s=t,i=n;s.includes("://")||(s=t.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),i&&!i?.endsWith("/")&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const r=encodeURIComponent(e);return{redirect:`${s}wc?uri=${r}`,redirectUniversalLink:i?`${i}wc?uri=${r}`:void 0,href:s}},formatUniversalUrl(t,e){if(!Me.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const s=encodeURIComponent(e);return{redirect:`${n}wc?uri=${s}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?me.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,s)=>{const i=new Image;i.onload=n,i.onerror=s,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,Me.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const s=Number(t);if(s){const i=Math.floor(s*1e3)/1e3;i&&(n=i.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return he.W3M_API_URL},getBlockchainApiUrl(){return he.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return he.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((s,i)=>{n[s]=i}),e.sort((s,i)=>{const r=n[s.id],c=n[i.id];return r!==void 0&&c!==void 0?r-c:r!==void 0?-1:c!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,s]=e.split(".");return{dollars:n,pennies:s}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(s=>{const i=s[e];return n.has(i)?!1:(n.add(i),!0)})},generateSdkVersion(t,e,n){const i=t.length===0?yt.ADAPTER_TYPES.UNIVERSAL:t.map(r=>r.adapterType).join(",");return`${e}-${i}-${n}`},createAccount(t,e,n,s,i){return{namespace:t,address:e,type:n,publicKey:s,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in he.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",r=t.substring(t.indexOf(i)+i.length),c=this.injectIntoUrl(decodeURIComponent(r),n,e);return t.replace(r,encodeURIComponent(c))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const s=t.indexOf(e);if(s===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",s),r=e.length,c=i!==-1?i:t.length,l=t.substring(0,s+r),f=t.substring(s+r,c),d=t.substring(i),h=f+n;return l+h+d}};async function Ld(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Ap{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:s,...i}){const r=this.createUrl(i);return(await Ld(r,{method:"GET",headers:e,signal:n,cache:s})).json()}async getBlob({headers:e,signal:n,...s}){const i=this.createUrl(s);return(await Ld(i,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await Ld(r,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}async put({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await Ld(r,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}async delete({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await Ld(r,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}createUrl({path:e,params:n}){const s=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([i,r])=>{r&&s.searchParams.append(i,r)}),this.clientId&&s.searchParams.append("clientId",this.clientId),s}}const Fre={getFeatureValue(t,e){const n=e?.[t];return n===void 0?yt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Me.isTelegram()){if(Me.isIos())return t.filter(e=>e!=="google");if(Me.isMac())return t.filter(e=>e!=="x");if(Me.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},_e=Rt({features:yt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:yt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),de={state:_e,subscribeKey(t,e){return ts(_e,t,e)},setOptions(t){Object.assign(_e,t)},setRemoteFeatures(t){if(!t)return;const e={..._e.remoteFeatures,...t};_e.remoteFeatures=e,_e.remoteFeatures?.socials&&(_e.remoteFeatures.socials=Fre.filterSocialsByPlatform(_e.remoteFeatures.socials)),_e.features?.pay&&(_e.remoteFeatures.email=!1,_e.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;_e.features||(_e.features=yt.DEFAULT_FEATURES);const e={..._e.features,...t};_e.features=e,_e.features?.pay&&_e.remoteFeatures&&(_e.remoteFeatures.email=!1,_e.remoteFeatures.socials=!1)},setProjectId(t){_e.projectId=t},setCustomRpcUrls(t){_e.customRpcUrls=t},setAllWallets(t){_e.allWallets=t},setIncludeWalletIds(t){_e.includeWalletIds=t},setExcludeWalletIds(t){_e.excludeWalletIds=t},setFeaturedWalletIds(t){_e.featuredWalletIds=t},setTokens(t){_e.tokens=t},setTermsConditionsUrl(t){_e.termsConditionsUrl=t},setPrivacyPolicyUrl(t){_e.privacyPolicyUrl=t},setCustomWallets(t){_e.customWallets=t},setIsSiweEnabled(t){_e.isSiweEnabled=t},setIsUniversalProvider(t){_e.isUniversalProvider=t},setSdkVersion(t){_e.sdkVersion=t},setMetadata(t){_e.metadata=t},setDisableAppend(t){_e.disableAppend=t},setEIP6963Enabled(t){_e.enableEIP6963=t},setDebug(t){_e.debug=t},setEnableWalletConnect(t){_e.enableWalletConnect=t},setEnableWalletGuide(t){_e.enableWalletGuide=t},setEnableAuthLogger(t){_e.enableAuthLogger=t},setEnableWallets(t){_e.enableWallets=t},setPreferUniversalLinks(t){_e.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(yt.SIWX_DEFAULTS))t[e]??=n;_e.siwx=t},setConnectMethodsOrder(t){_e.features={..._e.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){_e.features={..._e.features,walletFeaturesOrder:t}},setSocialsOrder(t){_e.remoteFeatures={..._e.remoteFeatures,socials:t}},setCollapseWallets(t){_e.features={..._e.features,collapseWallets:t}},setEnableEmbedded(t){_e.enableEmbedded=t},setAllowUnsupportedChain(t){_e.allowUnsupportedChain=t},setManualWCControl(t){_e.manualWCControl=t},setEnableNetworkSwitch(t){_e.enableNetworkSwitch=t},setEnableReconnect(t){_e.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(_e.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){_e.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return _e.universalProviderConfigOverride},getSnapshot(){return $h(_e)}},Vre=Object.freeze({enabled:!0,events:[]}),qre=new Ap({baseUrl:Me.getAnalyticsUrl(),clientId:null}),Wre=5,Kre=60*1e3,Io=Rt({...Vre}),Gre={state:Io,subscribeKey(t,e){return ts(Io,t,e)},async sendError(t,e){if(!Io.enabled)return;const n=Date.now();if(Io.events.filter(r=>{const c=new Date(r.properties.timestamp||"").getTime();return n-c<Kre}).length>=Wre)return;const i={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Io.events.push(i);try{if(typeof window>"u")return;const{projectId:r,sdkType:c,sdkVersion:l}=de.state;await qre.post({path:"/e",params:{projectId:r,st:c,sv:l||"html-wagmi-4.2.2"},body:{eventId:Me.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Io.enabled=!0},disable(){Io.enabled=!1},clearEvents(){Io.events=[]}};class Qu extends Error{constructor(e,n,s){super(e),this.name="AppKitError",this.category=n,this.originalError=s,Object.setPrototypeOf(this,Qu.prototype);let i=!1;if(s instanceof Error&&typeof s.stack=="string"&&s.stack){const r=s.stack,c=r.indexOf(`
`);if(c>-1){const l=r.substring(c+1);this.stack=`${this.name}: ${this.message}
${l}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,Qu):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function PI(t,e){const n=t instanceof Qu?t:new Qu(t instanceof Error?t.message:String(t),e,t);throw Gre.sendError(n,n.category),n}function ni(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(s=>{const i=t[s];if(typeof i=="function"){let r=i;i.constructor.name==="AsyncFunction"?r=async(...c)=>{try{return await i(...c)}catch(l){return PI(l,e)}}:r=(...c)=>{try{return i(...c)}catch(l){return PI(l,e)}},n[s]=r}else n[s]=i}),n}const Zc={ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Mr={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Yre={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,s=encodeURIComponent(n);if(t===Mr.PHANTOM.id&&!("phantom"in window)){const i=n.startsWith("https")?"https":"http",r=n.split("/")[2],c=encodeURIComponent(`${i}://${r}`);window.location.href=`${Mr.PHANTOM.url}/ul/browse/${s}?ref=${c}`}t===Mr.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Mr.SOLFLARE.url}/ul/v1/browse/${s}?ref=${s}`),e===he.CHAIN.SOLANA&&t===Mr.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Mr.COINBASE.url}/dapp?cb_url=${s}`)}},qs=Rt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Xre={state:qs,subscribeNetworkImages(t){return Bn(qs.networkImages,()=>t(qs.networkImages))},subscribeKey(t,e){return ts(qs,t,e)},subscribe(t){return Bn(qs,()=>t(qs))},setWalletImage(t,e){qs.walletImages[t]=e},setNetworkImage(t,e){qs.networkImages[t]=e},setChainImage(t,e){qs.chainImages[t]=e},setConnectorImage(t,e){qs.connectorImages={...qs.connectorImages,[t]:e}},setTokenImage(t,e){qs.tokenImages[t]=e},setCurrencyImage(t,e){qs.currencyImages[t]=e}},nr=ni(Xre),Qre={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},jv=Rt({networkImagePromises:{}}),AM={async fetchWalletImage(t){if(t)return await Le._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(jv.networkImagePromises[t]||(jv.networkImagePromises[t]=Le._fetchNetworkImage(t)),await jv.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return nr.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return nr.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return nr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return nr.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return nr.state.connectorImages[t.imageId]},getChainImage(t){return nr.state.networkImages[Qre[t]]}},Do=Rt({message:"",variant:"info",open:!1}),Zre={state:Do,subscribeKey(t,e){return ts(Do,t,e)},open(t,e){const{debug:n}=de.state,{code:s,displayMessage:i,debugMessage:r}=t;i&&n&&(Do.message=i,Do.variant=e,Do.open=!0),r&&console.error(typeof r=="function"?r():r,s?{code:s}:void 0)},close(){Do.open=!1,Do.message="",Do.variant="info"}},Zn=ni(Zre),Jre=Me.getAnalyticsUrl(),eae=new Ap({baseUrl:Jre,clientId:null}),tae=["MODAL_CREATED"],ba=Rt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),It={state:ba,subscribe(t){return Bn(ba,()=>t(ba))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=de.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Oe.state.address;if(tae.includes(t.data.event)||typeof window>"u")return;await eae.post({path:"/e",params:It.getSdkProperties(),body:{eventId:Me.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ba.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===he.HTTP_STATUS_CODES.FORBIDDEN&&!ba.reportedErrors.FORBIDDEN&&(Zn.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Bu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ba.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){ba.timestamp=Date.now(),ba.data=t,(de.state.features?.analytics||t.event==="INITIALIZE")&&It._sendAnalyticsEvent(ba)}},nae=Me.getApiUrl(),xs=new Ap({baseUrl:nae,clientId:null}),sae=40,$I=4,iae=20,Ve=Rt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Le={state:Ve,subscribeKey(t,e){return ts(Ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=de.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return de.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${xs.baseUrl}/getWalletImage/${t}`,n=await xs.getBlob({path:e,params:Le._getSdkProperties()});nr.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${xs.baseUrl}/public/getAssetImage/${t}`,n=await xs.getBlob({path:e,params:Le._getSdkProperties()});nr.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${xs.baseUrl}/public/getAssetImage/${t}`,n=await xs.getBlob({path:e,params:Le._getSdkProperties()});nr.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${xs.baseUrl}/public/getCurrencyImage/${t}`,n=await xs.getBlob({path:e,params:Le._getSdkProperties()});nr.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${xs.baseUrl}/public/getTokenImage/${t}`,n=await xs.getBlob({path:e,params:Le._getSdkProperties()});nr.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Me.isMobile()?t?.filter(n=>n.mobile_link||n.id===Mr.COINBASE.id?!0:V.state.activeChain==="solana"&&(n.id===Mr.SOLFLARE.id||n.id===Mr.PHANTOM.id)):t},async fetchProjectConfig(){return(await xs.get({path:"/appkit/v1/config",params:Le._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await xs.get({path:"/projects/v1/origins",params:Le._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===he.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=he.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=V.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!AM.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Le._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ve.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Le._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Le._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Le._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Le._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Mr).map(r=>r.id));const s=await xs.get({path:"/getWallets",params:{...Le._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Le._filterWalletsByPlatform(s?.data)||[],count:s?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=de.state;if(t?.length){const e={...Le._getSdkProperties(),page:1,entries:t?.length??$I,include:t},{data:n}=await Le.fetchWallets(e),s=[...n].sort((r,c)=>t.indexOf(r.id)-t.indexOf(c.id)),i=s.map(r=>r.image_id).filter(Boolean);await Promise.allSettled(i.map(r=>Le._fetchWalletImage(r))),Ve.featured=s,Ve.allFeatured=s}},async fetchRecommendedWallets(){try{Ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=de.state,s=[...e??[],...n??[]].filter(Boolean),i=V.getRequestedCaipNetworkIds().join(","),r={page:1,entries:$I,include:t,exclude:s,chains:i},{data:c,count:l}=await Le.fetchWallets(r),f=me.getRecentWallets(),d=c.map(g=>g.image_id).filter(Boolean),h=f.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...d,...h].map(g=>Le._fetchWalletImage(g))),Ve.recommended=c,Ve.allRecommended=c,Ve.count=l??0}catch{}finally{Ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:s}=de.state,i=V.getRequestedCaipNetworkIds().join(","),r=[...Ve.recommended.map(({id:h})=>h),...n??[],...s??[]].filter(Boolean),c={page:t,entries:sae,include:e,exclude:r,chains:i},{data:l,count:f}=await Le.fetchWallets(c),d=l.slice(0,iae).map(h=>h.image_id).filter(Boolean);await Promise.allSettled(d.map(h=>Le._fetchWalletImage(h))),Ve.wallets=Me.uniqueBy([...Ve.wallets,...Le._filterOutExtensions(l)],"id").filter(h=>h.chains?.some(g=>i.includes(g))),Ve.count=f>Ve.count?f:Ve.count,Ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Le.fetchWallets(e);n&&n.forEach(s=>{Ve.excludedWallets.push({rdns:s.rdns,name:s.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:s}=de.state,i=V.getRequestedCaipNetworkIds().join(",");Ve.search=[];const r={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:s,chains:i},{data:c}=await Le.fetchWallets(r);It.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const l=c.map(f=>f.image_id).filter(Boolean);await Promise.allSettled([...l.map(f=>Le._fetchWalletImage(f)),Me.wait(300)]),Ve.search=Le._filterOutExtensions(c)},initPromise(t,e){const n=Ve.promises[t];return n||(Ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:s=!0}={}){const i=[t&&Le.initPromise("connectorImages",Le.fetchConnectorImages),e&&Le.initPromise("featuredWallets",Le.fetchFeaturedWallets),n&&Le.initPromise("recommendedWallets",Le.fetchRecommendedWallets),s&&Le.initPromise("networkImages",Le.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){de.state.features?.analytics&&Le.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await xs.get({path:"/getAnalyticsConfig",params:Le._getSdkProperties()});de.setFeatures({analytics:t})}catch{de.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.recommended=Ve.allRecommended.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.filteredWallets=Ve.wallets.filter(n=>n.chains?.some(s=>e.includes(s)))},clearFilterByNamespaces(){Ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.recommended=Ve.allRecommended.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.filteredWallets=Ve.wallets.filter(n=>n.chains?.some(s=>e.includes(s)))}},Tt=Rt({view:"Connect",history:["Connect"],transactionStack:[]}),rae={state:Tt,subscribeKey(t,e){return ts(Tt,t,e)},pushTransactionStack(t){Tt.transactionStack.push(t)},popTransactionStack(t){const e=Tt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:s,onCancel:i}=e;switch(t){case"success":n?.();break;case"error":s?.(),ze.goBack();break;case"cancel":i?.(),ze.goBack();break}},push(t,e){t!==Tt.view&&(Tt.view=t,Tt.history.push(t),Tt.data=e)},reset(t,e){Tt.view=t,Tt.history=[t],Tt.data=e},replace(t,e){Tt.history.at(-1)===t||(Tt.view=t,Tt.history[Tt.history.length-1]=t,Tt.data=e)},goBack(){const t=V.state.activeCaipAddress,e=ze.state.view==="ConnectingFarcaster",n=!t&&e;if(Tt.history.length>1){Tt.history.pop();const[s]=Tt.history.slice(-1);s&&(t&&s==="Connect"?Tt.view="Account":Tt.view=s)}else st.close();Tt.data?.wallet&&(Tt.data.wallet=void 0),setTimeout(()=>{if(n){Oe.setFarcasterUrl(void 0,V.state.activeChain);const s=ve.getAuthConnector();s?.provider?.reload();const i=$h(de.state);s?.provider?.syncDappData?.({metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType})}},100)},goBackToIndex(t){if(Tt.history.length>1){Tt.history=Tt.history.slice(0,t+1);const[e]=Tt.history.slice(-1);e&&(Tt.view=e)}},goBackOrCloseModal(){ze.state.history.length>1?ze.goBack():st.close()}},ze=ni(rae),Ea=Rt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),S2={state:Ea,subscribe(t){return Bn(Ea,()=>t(Ea))},setThemeMode(t){Ea.themeMode=t;try{const e=ve.getAuthConnector();if(e){const n=S2.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:jo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ea.themeVariables={...Ea.themeVariables,...t};try{const e=ve.getAuthConnector();if(e){const n=S2.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:jo(Ea.themeVariables,Ea.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return $h(Ea)}},Ks=ni(S2),NM=Object.fromEntries(bM.map(t=>[t,void 0])),aae=Object.fromEntries(bM.map(t=>[t,!0])),lt=Rt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:NM,filterByNamespaceMap:aae}),oae={state:lt,subscribe(t){return Bn(lt,()=>{t(lt)})},subscribeKey(t,e){return ts(lt,t,e)},initialize(t){t.forEach(e=>{const n=me.getConnectedConnectorId(e);n&&ve.setConnectorId(n,e)})},setActiveConnector(t){t&&(lt.activeConnector=al(t))},setConnectors(t){t.filter(i=>!lt.allConnectors.some(r=>r.id===i.id&&ve.getConnectorName(r.name)===ve.getConnectorName(i.name)&&r.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&lt.allConnectors.push(al(i))});const n=ve.getEnabledNamespaces(),s=ve.getEnabledConnectors(n);lt.connectors=ve.mergeMultiChainConnectors(s)},filterByNamespaces(t){Object.keys(lt.filterByNamespaceMap).forEach(e=>{lt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{lt.filterByNamespaceMap[e]=!0}),ve.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){lt.filterByNamespaceMap[t]=e,ve.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ve.getEnabledNamespaces(),e=ve.getEnabledConnectors(t),n=ve.areAllNamespacesEnabled();lt.connectors=ve.mergeMultiChainConnectors(e),n?Le.clearFilterByNamespaces():Le.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(lt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return lt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(lt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ve.generateConnectorMapByName(t),n=[];return e.forEach(s=>{const i=s[0],r=i?.id===he.CONNECTOR_ID.AUTH;s.length>1&&i?n.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...s],type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&n.push(i)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:s}=n,i=ve.getConnectorName(s);if(!i)return;const r=e.get(i)||[];r.find(l=>l.chain===n.chain)||r.push(n),e.set(i,r)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(s=>s.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===he.CONNECTOR_ID.AUTH){const e=t,n=$h(de.state),s=Ks.getSnapshot().themeMode,i=Ks.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:s,themeVariables:i,w3mThemeVariables:jo(i,s)}),ve.setConnectors([t])}else ve.setConnectors([t])},getAuthConnector(t){const e=t||V.state.activeChain,n=lt.connectors.find(s=>s.id===he.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return lt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return lt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const s=n||V.state.activeChain;return lt.allConnectors.filter(r=>r.chain===s).find(r=>r.explorerId===t||r.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=$h(de.state),s=Ks.getSnapshot().themeMode,i=Ks.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:s,themeVariables:i,w3mThemeVariables:jo(i,s)})},getConnectorsByNamespace(t){const e=lt.allConnectors.filter(n=>n.chain===t);return ve.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&Fr(t)===Zc.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ve.getConnector({id:t.id,rdns:t.rdns});Yre.handleMobileDeeplinkRedirect(e?.explorerId||t.id,V.state.activeChain),e?ze.push("ConnectingExternal",{connector:e,wallet:t}):ze.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ve.getConnectorsByNamespace(t):ve.mergeMultiChainConnectors(lt.allConnectors)},setFilterByNamespace(t){lt.filterByNamespace=t,lt.connectors=ve.getConnectors(t),Le.setFilterByNamespace(t)},setConnectorId(t,e){t&&(lt.activeConnectorIds={...lt.activeConnectorIds,[e]:t},me.setConnectedConnectorId(e,t))},removeConnectorId(t){lt.activeConnectorIds={...lt.activeConnectorIds,[t]:void 0},me.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return lt.activeConnectorIds[t]},isConnected(t){return t?!!lt.activeConnectorIds[t]:Object.values(lt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){lt.activeConnectorIds={...NM}}},ve=ni(oae),cae=1e3,kd={checkNamespaceConnectorId(t,e){return ve.getConnectorId(t)===e},isSocialProvider(t){return yt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:s="Connect",onOpen:i,onConnect:r}){return new Promise((c,l)=>{if(t&&ve.setActiveConnector(e),i?.(Me.isMobile()&&t),s){const d=st.subscribeKey("open",h=>{h||(ze.state.view!==s&&ze.replace(s),d(),l(new Error("Modal closed")))})}const f=V.subscribeKey("activeCaipAddress",d=>{d&&(r?.(),n&&st.close(),f(),c(Qs.parseCaipAddress(d)))})})},connectExternal(t){return new Promise((e,n)=>{const s=V.subscribeKey("activeCaipAddress",i=>{i&&(st.close(),s(),e(Qs.parseCaipAddress(i)))});Ee.connectExternal(t,t.chain).catch(()=>{s(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:s,onConnect:i}){let r=Oe.state.socialWindow,c=Oe.state.socialProvider,l=!1,f=null;const d=e||V.state.activeChain,h=V.subscribeKey("activeCaipAddress",g=>{g&&(n&&st.close(),h())});return new Promise((g,m)=>{async function y(v){if(v.data?.resultUri)if(v.origin===he.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",y,!1);try{const E=ve.getAuthConnector(d);if(E&&!l){r&&(r.close(),Oe.setSocialWindow(void 0,d),r=Oe.state.socialWindow),l=!0;const C=v.data.resultUri;if(c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:c}}),c){me.setConnectedSocialProvider(c),await Ee.connectExternal({id:E.id,type:E.type,socialUri:C},E.chain);const T=V.state.activeCaipAddress;if(!T){m(new Error("Failed to connect"));return}g(Qs.parseCaipAddress(T)),It.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:c,caipNetworkId:V.getActiveCaipNetwork()?.caipNetworkId}})}}}catch{c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:c}}),m(new Error("Failed to connect"))}}else c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:c}})}async function w(){if(t&&(Oe.setSocialProvider(t,d),c=Oe.state.socialProvider,It.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:c}})),c==="farcaster"){s?.();const v=st.subscribeKey("open",C=>{!C&&t==="farcaster"&&(m(new Error("Popup closed")),i?.(),v())}),E=ve.getAuthConnector();if(E&&!Oe.state.farcasterUrl)try{const{url:C}=await E.provider.getFarcasterUri();Oe.setFarcasterUrl(C,d)}catch{m(new Error("Failed to connect to farcaster"))}}else{const v=ve.getAuthConnector();f=Me.returnOpenHref(`${he.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(v&&c){const{uri:E}=await v.provider.getSocialRedirectUri({provider:c});if(f&&E){Oe.setSocialWindow(f,d),r=Oe.state.socialWindow,f.location.href=E;const C=setInterval(()=>{r?.closed&&!l&&(m(new Error("Popup closed")),clearInterval(C))},1e3);window.addEventListener("message",y,!1)}else f?.close(),m(new Error("Failed to initiate social connection"))}}catch{m(new Error("Failed to initiate social connection")),f?.close()}}}w()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:s}){return new Promise((i,r)=>{if(n?.(),e){const l=st.subscribeKey("open",f=>{f||(ze.state.view!==e&&ze.replace(e),l(),r(new Error("Modal closed")))})}const c=V.subscribeKey("activeCaipAddress",l=>{l&&(s?.(),t&&st.close(),c(),i(Qs.parseCaipAddress(l)))})})},async updateEmail(){const t=me.getConnectedConnectorId(V.state.activeChain),e=ve.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==he.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await st.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((s,i)=>{const r=setInterval(()=>{const l=e.provider.getEmail()??"";l!==n&&(st.close(),clearInterval(r),c(),s({email:l}))},cae),c=st.subscribeKey("open",l=>{l||(ze.state.view!=="Connect"&&ze.push("Connect"),clearInterval(r),c(),i(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&Fr(t)===Zc.ACCOUNT_TYPES.EOA}};function TM(){const t=V.state.activeCaipNetwork?.chainNamespace||"eip155",e=V.state.activeCaipNetwork?.id||1,n=yt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Fr(t){return V.getAccountData(t)?.preferredAccountType}function UI(t){return V.state.activeCaipNetwork}const xm={getConnectionStatus(t,e){const n=ve.state.activeConnectorIds[e],s=Ee.getConnections(e);return!!n&&t.connectorId===n?"connected":s.some(c=>c.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(s=>{if((e?s.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const r=s.accounts.filter(c=>!n.some(f=>f.toLowerCase()===c.address.toLowerCase()));return{...s,accounts:r}}return s})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(s=>!n.has(s.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!de.state.remoteFeatures?.multiWallet,n=ve.state.activeConnectorIds[t],s=Ee.getConnections(t),r=(Ee.state.recentConnections.get(t)??[]).filter(l=>ve.getConnectorById(l.connectorId)),c=xm.excludeExistingConnections([...s.map(l=>l.connectorId),...n?[n]:[]],r);return e?{connections:s,recentConnections:c}:{connections:s.filter(l=>l.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}},$c=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hn=Rt({...$c}),lae={state:hn,subscribeKey(t,e){return ts(hn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Me.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hn.message=$c.message,hn.variant=$c.variant,hn.svg=$c.svg,hn.open=$c.open,hn.autoClose=$c.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:s=$c.autoClose}){hn.open?(hn.open=!1,setTimeout(()=>{hn.message=t,hn.variant=n,hn.svg=e,hn.open=!0,hn.autoClose=s},150)):(hn.message=t,hn.variant=n,hn.svg=e,hn.open=!0,hn.autoClose=s)}},$r=lae,jt=Rt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),uae={state:jt,subscribe(t){return Bn(jt,()=>t(jt))},setLastNetworkInView(t){jt.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");jt.loading=!0;try{const e=await ke.fetchTransactions({account:t,cursor:jt.next,chainId:V.state.activeCaipNetwork?.caipNetworkId}),n=H0.filterSpamTransactions(e.data),s=H0.filterByConnectedChain(n),i=[...jt.transactions,...s];jt.loading=!1,jt.transactions=i,jt.transactionsByYear=H0.groupTransactionsByYearAndMonth(jt.transactionsByYear,s),jt.empty=i.length===0,jt.next=e.next?e.next:void 0}catch{const n=V.state.activeChain;It.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:de.state.projectId,cursor:jt.next,isSmartAccount:Fr(n)===Zc.ACCOUNT_TYPES.SMART_ACCOUNT}}),$r.showError("Failed to fetch transactions"),jt.loading=!1,jt.empty=!0,jt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(s=>{const i=new Date(s.metadata.minedAt).getFullYear(),r=new Date(s.metadata.minedAt).getMonth(),c=n[i]??{},f=(c[r]??[]).filter(d=>d.id!==s.id);n[i]={...c,[r]:[...f,s].sort((d,h)=>new Date(h.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(s=>s.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=V.state.activeCaipNetwork?.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){jt.next=void 0},resetTransactions(){jt.transactions=[],jt.transactionsByYear={},jt.lastNetworkInView=void 0,jt.loading=!1,jt.empty=!1,jt.next=void 0}},H0=ni(uae,"API_ERROR"),ut=Rt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let _c;const fae={state:ut,subscribe(t){return Bn(ut,()=>t(ut))},subscribeKey(t,e){return ts(ut,t,e)},_getClient(){return ut._client},setClient(t){ut._client=al(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ee.syncStorageConnections(e)},syncStorageConnections(t){const e=me.getConnections(),n=t??Array.from(V.state.chains.keys());for(const s of n){const i=e[s]??[],r=new Map(ut.recentConnections);r.set(s,i),ut.recentConnections=r}},getConnections(t){return t?ut.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ee.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){if(Me.isTelegram()||Me.isSafari()&&Me.isIos()){if(_c){await _c,_c=void 0;return}if(!Me.isPairingExpired(ut?.wcPairingExpiry)){const t=ut.wcUri;ut.wcUri=t;return}_c=Ee._getClient()?.connectWalletConnect?.().catch(()=>{}),Ee.state.status="connecting",await _c,_c=void 0,ut.wcPairingExpiry=void 0,Ee.state.status="connected"}else await Ee._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const s=await Ee._getClient()?.connectExternal?.(t);return n&&V.setActiveNamespace(e),s},async reconnectExternal(t){await Ee._getClient()?.reconnectExternal?.(t);const e=t.chain||V.state.activeChain;e&&ve.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;st.setLoading(!0,V.state.activeChain);const n=ve.getAuthConnector();n&&(Oe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),me.setPreferredAccountTypes(Object.entries(V.state.chains).reduce((s,[i,r])=>{const c=i,l=Fr(c);return l!==void 0&&(s[c]=l),s},{})),await Ee.reconnectExternal(n),st.setLoading(!1,V.state.activeChain),It.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:V.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return Ee._getClient()?.signMessage(t)},parseUnits(t,e){return Ee._getClient()?.parseUnits(t,e)},formatUnits(t,e){return Ee._getClient()?.formatUnits(t,e)},async sendTransaction(t){return Ee._getClient()?.sendTransaction(t)},async getCapabilities(t){return Ee._getClient()?.getCapabilities(t)},async grantPermissions(t){return Ee._getClient()?.grantPermissions(t)},async walletGetAssets(t){return Ee._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return Ee._getClient()?.estimateGas(t)},async writeContract(t){return Ee._getClient()?.writeContract(t)},async getEnsAddress(t){return Ee._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return Ee._getClient()?.getEnsAvatar(t)},checkInstalled(t){return Ee._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){ut.wcUri=void 0,ut.wcPairingExpiry=void 0,ut.wcLinking=void 0,ut.recentWallet=void 0,ut.status="disconnected",H0.resetTransactions(),me.deleteWalletConnectDeepLink()},resetUri(){ut.wcUri=void 0,ut.wcPairingExpiry=void 0,_c=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=Ee.state;t&&me.setWalletConnectDeepLink(t),e&&me.setAppKitRecent(e),It.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:ze.state.data?.wallet?.name||"Unknown",caipNetworkId:V.getActiveCaipNetwork()?.caipNetworkId}})},setWcBasic(t){ut.wcBasic=t},setUri(t){ut.wcUri=t,ut.wcPairingExpiry=Me.getPairingExpiry()},setWcLinking(t){ut.wcLinking=t},setWcError(t){ut.wcError=t,ut.buffering=!1},setRecentWallet(t){ut.recentWallet=t},setBuffering(t){ut.buffering=t},setStatus(t){ut.status=t},setIsSwitchingConnection(t){ut.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await Ee._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(s){throw new Qu("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(ut.connections);n.set(e,t),ut.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const n=Oe.state.user?.accounts?.find(i=>i.type==="smartAccount"),s=n&&n.address.toLowerCase()===t.toLowerCase()&&kd.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ee.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const s=ve.getConnectorById(t.connectorId),i=t.connectorId===he.CONNECTOR_ID.AUTH;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);if(i)i&&n&&await Ee.handleAuthAccountSwitch({address:n,namespace:e});else return(await Ee.connectExternal({id:s.id,type:s.type,provider:s.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:s}){const i=ve.getConnectorById(t.connectorId),r=t.auth?.name?.toLowerCase(),c=t.connectorId===he.CONNECTOR_ID.AUTH,l=t.connectorId===he.CONNECTOR_ID.WALLET_CONNECT;if(!i)throw new Error(`No connector found for connection: ${t.connectorId}`);let f;if(c)if(r&&kd.isSocialProvider(r)){const{address:d}=await kd.connectSocial({social:r,closeModalOnConnect:s,onOpenFarcaster(){st.open({view:"ConnectingFarcaster"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else{const{address:d}=await kd.connectEmail({closeModalOnConnect:s,onOpen(){st.open({view:"EmailLogin"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else if(l){const{address:d}=await kd.connectWalletConnect({walletConnect:!0,connector:i,closeModalOnConnect:s,onOpen(h){st.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else{const d=await Ee.connectExternal({id:i.id,type:i.type,provider:i.provider,chain:e},e);d&&(f=d.address)}return c&&n&&await Ee.handleAuthAccountSwitch({address:n,namespace:e}),f},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:s,onChange:i}){let r;const c=Oe.getCaipAddress(n);if(c){const{address:f}=Qs.parseCaipAddress(c);r=f}const l=xm.getConnectionStatus(t,n);switch(l){case"connected":case"active":{const f=await Ee.handleActiveConnection({connection:t,namespace:n,address:e});if(r&&f){const d=f.toLowerCase()!==r.toLowerCase();i?.({address:f,namespace:n,hasSwitchedAccount:d,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const f=await Ee.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:s});f&&i?.({address:f,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${l}`)}}},Ee=ni(fae),Su=Rt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Aa={state:Su,subscribe(t){return Bn(Su,()=>t(Su))},subscribeOpen(t){return ts(Su,"open",t)},set(t){Object.assign(Su,{...Su,...t})}},dae={async getTokenList(){const t=V.state.activeCaipNetwork;return(await ke.fetchSwapTokens({chainId:t?.caipNetworkId}))?.tokens?.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=V.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await Ee?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await ke.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:s}){const i=await ke.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(i?.allowance&&n&&s){const r=Ee.parseUnits(n,s)||0;return BigInt(i.allowance)>=r}return!1},async getMyTokensWithBalance(t){const e=await gx.getMyTokensWithBalance(t);return Oe.setTokenBalance(e,V.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:TM(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},bt=Rt({tokenBalances:[],loading:!1}),hae={state:bt,subscribe(t){return Bn(bt,()=>t(bt))},subscribeKey(t,e){return ts(bt,t,e)},setToken(t){t&&(bt.token=al(t))},setTokenAmount(t){bt.sendTokenAmount=t},setReceiverAddress(t){bt.receiverAddress=t},setReceiverProfileImageUrl(t){bt.receiverProfileImageUrl=t},setReceiverProfileName(t){bt.receiverProfileName=t},setNetworkBalanceInUsd(t){bt.networkBalanceInUSD=t},setLoading(t){bt.loading=t},async sendToken(){try{switch(ht.setLoading(!0),V.state.activeCaipNetwork?.chainNamespace){case"eip155":await ht.sendEvmToken();return;case"solana":await ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ht.setLoading(!1)}},async sendEvmToken(){const t=V.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Fr(t);if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ht.state.token)throw new Error("A token is required");ht.state.token?.address?(It.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.address,amount:ht.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),await ht.sendERC20Token({receiverAddress:ht.state.receiverAddress,tokenAddress:ht.state.token.address,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals})):(It.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.symbol||"",amount:ht.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),await ht.sendNativeToken({receiverAddress:ht.state.receiverAddress,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals}))},async fetchTokenBalance(t){bt.loading=!0;const e=V.state.activeCaipNetwork?.caipNetworkId,n=V.state.activeCaipNetwork?.chainNamespace,s=V.state.activeCaipAddress,i=s?Me.getPlainAddress(s):void 0;if(bt.lastRetry&&!Me.isAllowedRetry(bt.lastRetry,30*yt.ONE_SEC_MS))return bt.loading=!1,[];try{if(i&&e&&n){const r=await gx.getMyTokensWithBalance();return bt.tokenBalances=r,bt.lastRetry=void 0,r}}catch(r){bt.lastRetry=Date.now(),t?.(r),$r.showError("Token Balance Unavailable")}finally{bt.loading=!1}return[]},fetchNetworkBalance(){if(bt.tokenBalances.length===0)return;const t=dae.mapBalancesToSwapTokens(bt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===TM());e&&(bt.networkBalanceInUSD=e?Cre.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){ze.pushTransactionStack({});const e=t.receiverAddress,n=Oe.state.address,s=Ee.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ee.sendTransaction({chainNamespace:he.CHAIN.EVM,to:e,address:n,data:"0x",value:s??BigInt(0)}),It.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Fr("eip155")===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token?.symbol||"",amount:t.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),Ee._getClient()?.updateBalance("eip155"),ht.resetSend()},async sendERC20Token(t){ze.pushTransactionStack({onSuccess(){ze.replace("Account")}});const e=Ee.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Oe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Me.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ee.writeContract({fromAddress:Oe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Ire.getERC20Abi(n),chainNamespace:he.CHAIN.EVM}),ht.resetSend()}},async sendSolanaToken(){if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");ze.pushTransactionStack({onSuccess(){ze.replace("Account")}}),await Ee.sendTransaction({chainNamespace:"solana",to:ht.state.receiverAddress,value:ht.state.sendTokenAmount}),Ee._getClient()?.updateBalance("solana"),ht.resetSend()},resetSend(){bt.token=void 0,bt.sendTokenAmount=void 0,bt.receiverAddress=void 0,bt.receiverProfileImageUrl=void 0,bt.receiverProfileName=void 0,bt.loading=!1,bt.tokenBalances=[]}},ht=ni(hae),zv={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},x0={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Se=Rt({chains:zre(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),pae={state:Se,subscribe(t){return Bn(Se,()=>{t(Se)})},subscribeKey(t,e){return ts(Se,t,e)},subscribeChainProp(t,e,n){let s;return Bn(Se.chains,()=>{const i=n||Se.activeChain;if(i){const r=Se.chains.get(i)?.[t];s!==r&&(s=r,e(r))}})},initialize(t,e,n){const{chainId:s,namespace:i}=me.getActiveNetworkProps(),r=e?.find(h=>h.id.toString()===s?.toString()),l=t.find(h=>h?.namespace===i)||t?.[0],f=t.map(h=>h.namespace).filter(h=>h!==void 0),d=de.state.enableEmbedded?new Set([...f]):new Set([...e?.map(h=>h.chainNamespace)??[]]);(t?.length===0||!l)&&(Se.noAdapters=!0),Se.noAdapters||(Se.activeChain=l?.namespace,Se.activeCaipNetwork=r,V.setChainNetworkData(l?.namespace,{caipNetwork:r}),Se.activeChain&&Aa.set({activeChain:l?.namespace})),d.forEach(h=>{const g=e?.filter(w=>w.chainNamespace===h),m=me.getPreferredAccountTypes()||{},y={...de.state.defaultAccountTypes,...m};V.state.chains.set(h,{namespace:h,networkState:Rt({...x0,caipNetwork:g?.[0]}),accountState:Rt({...zv,preferredAccountType:y[h]}),caipNetworks:g??[],...n}),V.setRequestedCaipNetworks(g??[],h)})},removeAdapter(t){if(Se.activeChain===t){const e=Array.from(Se.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&V.setActiveCaipNetwork(n)}}Se.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},s){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Se.chains.set(t.namespace,{namespace:t.namespace,networkState:{...x0,caipNetwork:s[0]},accountState:zv,caipNetworks:s,connectionControllerClient:n,networkControllerClient:e}),V.setRequestedCaipNetworks(s?.filter(i=>i.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Se.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(s=>s.id===t.id)||n.push(t),Se.chains.set(t.chainNamespace,{...e,caipNetworks:n}),V.setRequestedCaipNetworks(n,t.chainNamespace),ve.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=Se.chains.get(t);if(n){const s=Se.activeCaipNetwork?.id===e,i=[...n.caipNetworks?.filter(r=>r.id!==e)||[]];s&&n?.caipNetworks?.[0]&&V.setActiveCaipNetwork(n.caipNetworks[0]),Se.chains.set(t,{...n,caipNetworks:i}),V.setRequestedCaipNetworks(i||[],t),i.length===0&&ve.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Se.chains.get(t);n&&(n.networkState={...n.networkState||x0,...e},Se.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const s=Se.chains.get(t);if(s){const i={...s.accountState||zv,...e};Se.chains.set(t,{...s,accountState:i}),(Se.chains.size===1||Se.activeChain===t)&&(e.caipAddress&&(Se.activeCaipAddress=e.caipAddress),Oe.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const n=Se.chains.get(t);if(n){const s={...n.networkState||x0,...e};Se.chains.set(t,{...n,networkState:s})}},setAccountProp(t,e,n,s=!0){V.setChainAccountData(n,{[t]:e},s)},setActiveNamespace(t){Se.activeChain=t;const e=t?Se.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(Se.activeCaipAddress=e?.accountState?.caipAddress,Se.activeCaipNetwork=n,V.setChainNetworkData(t,{caipNetwork:n}),me.setActiveCaipNetworkId(n?.caipNetworkId),Aa.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Se.activeChain!==t.chainNamespace&&V.setIsSwitchingNamespace(!0);const e=Se.chains.get(t.chainNamespace);Se.activeChain=t.chainNamespace,Se.activeCaipNetwork=t,V.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Se.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Se.activeCaipAddress=void 0,V.setAccountProp("caipAddress",Se.activeCaipAddress,t.chainNamespace),e&&Oe.replaceState(e.accountState),ht.resetSend(),Aa.set({activeChain:Se.activeChain,selectedNetworkId:Se.activeCaipNetwork?.caipNetworkId}),me.setActiveCaipNetworkId(t.caipNetworkId),!V.checkIfSupportedNetwork(t.chainNamespace)&&de.state.enableNetworkSwitch&&!de.state.allowUnsupportedChain&&!Ee.state.wcBasic&&V.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Se.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==V.state.activeChain,n=V.getNetworkData(t)?.caipNetwork,s=V.getCaipNetworkByNamespace(t,n?.id);e&&s&&await V.switchActiveNetwork(s)},async switchActiveNetwork(t){const e=V.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const s=!V.state.chains.get(e)?.caipNetworks?.some(r=>r.id===Se.activeCaipNetwork?.id),i=V.getNetworkControllerClient(t.chainNamespace);if(i){try{await i.switchCaipNetwork(t),s&&st.close()}catch{ze.goBack()}It.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Se.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Se.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){const n=Se.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Se.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:s=[]}=e?.networkState||{};return Me.sortRequestedNetworks(n,s).filter(c=>c?.id)},getAllRequestedCaipNetworks(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=V.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){V.setAdapterNetworkState(e,{requestedCaipNetworks:t});const s=V.getAllRequestedCaipNetworks().map(r=>r.chainNamespace),i=Array.from(new Set(s));ve.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=V.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?Se.chains.get(t)?.networkState?.caipNetwork:Se.activeCaipNetwork},getActiveCaipAddress(){return Se.activeCaipAddress},getApprovedCaipNetworkIds(t){return Se.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await V.getNetworkControllerClient()?.getApprovedCaipNetworksData();V.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Se.activeCaipNetwork?.caipNetworkId,s=V.getRequestedCaipNetworks(t);return s.length?s?.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){return Se.activeChain?V.getRequestedCaipNetworks(Se.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){V.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=vM.caipNetworkIdToNumber(Se.activeCaipNetwork?.caipNetworkId),e=Se.activeChain;return!e||!t?!1:!!V.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){st.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Se.activeCaipNetwork;return!!(t?.chainNamespace&&yt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){V.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=V.state.chains.get(e)?.accountState?.preferredAccountType,s=de.state.defaultAccountTypes[e];Se.activeCaipAddress=void 0,V.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:s||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ve.removeConnectorId(e)},setIsSwitchingNamespace(t){Se.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Se.chains.forEach(n=>{he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?Se.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Se.activeChain;if(e)return V.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Se.activeChain;if(e)return V.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=V.state.chains.get(t),s=n?.caipNetworks?.find(i=>i.id===e);return s||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=ve.state.filterByNamespace;return(t?[Se.chains.get(t)]:Array.from(Se.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?V.getRequestedCaipNetworks(t):V.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Se.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Se.lastConnectedSIWECaipNetwork}},V=ni(pae),gae={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},IM=Me.getBlockchainApiUrl(),Ss=Rt({clientId:null,api:new Ap({baseUrl:IM,clientId:null}),supportedChains:{http:[],ws:[]}}),ke={state:Ss,async get(t){const{st:e,sv:n}=ke.getSdkProperties(),s=de.state.projectId,i={...t.params||{},st:e,sv:n,projectId:s};return Ss.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=de.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ss.supportedChains.http.length||await ke.getSupportedNetworks()}catch{return!1}return Ss.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ke.get({path:"v1/supported-chains"});return Ss.supportedChains=t,t}catch{return Ss.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ke.isNetworkSupported(e))return{avatar:"",name:""};const s=me.getIdentityFromCacheForAddress(t);if(s)return s;const i=await ke.get({path:`/v1/identity/${t}`,params:{sender:V.state.activeCaipAddress?Me.getPlainAddress(V.state.activeCaipAddress):void 0}});return me.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,signal:n,cache:s,chainId:i}){if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const c=me.getTransactionsCacheForAddress({address:t,chainId:i});if(c)return c;const l=await ke.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:i},signal:n,cache:s});return me.updateTransactionsCache({address:t,chainId:i,timestamp:Date.now(),transactions:l}),l},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:s,gasPrice:i}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:s,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const n=me.getTokenPriceCacheForAddresses(t);if(n)return n;const s=await Ss.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:de.state.projectId},headers:{"Content-Type":"application/json"}});return me.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:s}),s},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=ke.getSdkProperties();if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return ke.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:s,disableEstimate:i}){if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Ss.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:yt.CONVERT_SLIPPAGE_TOLERANCE},projectId:de.state.projectId,from:e,to:n,userAddress:s,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:s,sv:i}=ke.getSdkProperties();if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return ke.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:s,sv:i}})},async getBalance(t,e,n){const{st:s,sv:i}=ke.getSdkProperties();if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return $r.showError("Token Balance Unavailable"),{balances:[]};const c=`${e}:${t}`,l=me.getBalanceCacheForCaipAddress(c);if(l)return l;const f=await ke.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:s,sv:i}});return me.updateBalanceCache({caipAddress:c,balance:f,timestamp:Date.now()}),f},async lookupEnsName(t){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/reverse/${t}`,params:{sender:Oe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:s}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ss.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:s},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:s,paymentAmount:i}){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?(await Ss.api.post({path:"/v1/generators/onrampurl",params:{projectId:de.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:s,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ke.get({path:"/v1/onramp/options"})}catch{return gae}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:s}){try{return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?await Ss.api.post({path:"/v1/onramp/quote",params:{projectId:de.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:s}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await ke.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ss.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:de.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ss.clientId=t,Ss.api=new Ap({baseUrl:IM,clientId:t})}};function mae(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function LI(t){return mae(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const DM="2.38.2";let Hv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${DM}`};class ti extends Error{constructor(e,n={}){const s=n.cause instanceof ti?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof ti&&n.cause.docsPath||n.docsPath,r=Hv.getDocsUrl?.({...n,docsPath:i}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...s?[`Details: ${s}`]:[],...Hv.version?[`Version: ${Hv.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=DM}walk(e){return _M(this,e)}}function _M(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?_M(t.cause,e):e?null:t}class OM extends ti{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function dx(t,{dir:e,size:n=32}={}){return typeof t=="string"?yae(t,{dir:e,size:n}):wae(t,{dir:e,size:n})}function yae(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new OM({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function wae(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new OM({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=e==="right";s[r?i:n-i-1]=t[r?i:t.length-i-1]}return s}class vae extends ti{constructor({max:e,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class bae extends ti{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function MM(t,{size:e}){if(LI(t)>e)throw new bae({givenSize:LI(t),maxSize:e})}const Eae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kI(t,e={}){return typeof t=="number"||typeof t=="bigint"?Sae(t,e):typeof t=="string"?PM(t,e):typeof t=="boolean"?xae(t,e):RM(t,e)}function xae(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(MM(n,{size:e.size}),dx(n,{size:e.size})):n}function RM(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Eae[t[i]];const s=`0x${n}`;return typeof e.size=="number"?(MM(s,{size:e.size}),dx(s,{dir:"right",size:e.size})):s}function Sae(t,e={}){const{signed:n,size:s}=e,i=BigInt(t);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<c){const f=typeof t=="bigint"?"n":"";throw new vae({max:r?`${r}${f}`:void 0,min:`${c}${f}`,signed:n,size:s,value:`${t}${f}`})}const l=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?dx(l,{size:s}):l}const Cae=new TextEncoder;function PM(t,e={}){const n=Cae.encode(t);return RM(n,e)}class Aae extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}const Jc=(t,e,n)=>JSON.stringify(t,(s,i)=>typeof i=="bigint"?i.toString():i,n);function Nae(t,e){let n=t.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(e,"0");let[i,r]=[n.slice(0,n.length-e),n.slice(n.length-e)];return r=r.replace(/(0+)$/,""),`${s?"-":""}${i||"0"}${r?`.${r}`:""}`}const hx=t=>t;class uh extends ti{constructor({body:e,cause:n,details:s,headers:i,status:r,url:c}){super("HTTP request failed.",{cause:n,details:s,metaMessages:[r&&`Status: ${r}`,`URL: ${hx(c)}`,e&&`Request body: ${Jc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=r,this.url=c}}class $M extends ti{constructor({body:e,error:n,url:s}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${hx(s)}`,`Request body: ${Jc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class BI extends ti{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${hx(n)}`,`Request body: ${Jc(e)}`],name:"TimeoutError"})}}const Tae=-1;class $s extends ti{constructor(e,{code:n,docsPath:s,metaMessages:i,name:r,shortMessage:c}){super(c,{cause:e,docsPath:s,metaMessages:i||e?.metaMessages,name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||e.name,this.code=e instanceof $M?e.code:n??Tae}}class si extends $s{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Uh extends $s{constructor(e){super(e,{code:Uh.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Lh extends $s{constructor(e){super(e,{code:Lh.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class kh extends $s{constructor(e,{method:n}={}){super(e,{code:kh.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bh extends $s{constructor(e){super(e,{code:Bh.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zu extends $s{constructor(e){super(e,{code:Zu.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Zu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class jh extends $s{constructor(e){super(e,{code:jh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class zh extends $s{constructor(e){super(e,{code:zh.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(zh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Hh extends $s{constructor(e){super(e,{code:Hh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Ju extends $s{constructor(e){super(e,{code:Ju.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Ju,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Kc extends $s{constructor(e,{method:n}={}){super(e,{code:Kc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Kc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ef extends $s{constructor(e){super(e,{code:ef.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ef,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Fh extends $s{constructor(e){super(e,{code:Fh.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class el extends si{constructor(e){super(e,{code:el.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Vh extends si{constructor(e){super(e,{code:Vh.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class qh extends si{constructor(e,{method:n}={}){super(e,{code:qh.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Wh extends si{constructor(e){super(e,{code:Wh.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Wh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Kh extends si{constructor(e){super(e,{code:Kh.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Gh extends si{constructor(e){super(e,{code:Gh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Gh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Yh extends si{constructor(e){super(e,{code:Yh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Xh extends si{constructor(e){super(e,{code:Xh.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Qh extends si{constructor(e){super(e,{code:Qh.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Zh extends si{constructor(e){super(e,{code:Zh.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Zh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Jh extends si{constructor(e){super(e,{code:Jh.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ep extends si{constructor(e){super(e,{code:ep.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class tp extends si{constructor(e){super(e,{code:tp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Iae extends $s{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class px extends ti{constructor({cause:e,message:n}={}){const s=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${s?`with reason: ${s}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(px,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(px,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function Dae(){let t=()=>{},e=()=>{};return{promise:new Promise((s,i)=>{t=s,e=i}),resolve:t,reject:e}}const Fv=new Map;function _ae({fn:t,id:e,shouldSplitBatch:n,wait:s=0,sort:i}){const r=async()=>{const h=f();c();const g=h.map(({args:m})=>m);g.length!==0&&t(g).then(m=>{i&&Array.isArray(m)&&m.sort(i);for(let y=0;y<h.length;y++){const{resolve:w}=h[y];w?.([m[y],m])}}).catch(m=>{for(let y=0;y<h.length;y++){const{reject:w}=h[y];w?.(m)}})},c=()=>Fv.delete(e),l=()=>f().map(({args:h})=>h),f=()=>Fv.get(e)||[],d=h=>Fv.set(e,[...f(),h]);return{flush:c,async schedule(h){const{promise:g,resolve:m,reject:y}=Dae();return n?.([...l(),h])&&r(),f().length>0?(d({args:h,resolve:m,reject:y}),g):(d({args:h,resolve:m,reject:y}),setTimeout(r,s),g)}}}async function UM(t){return new Promise(e=>setTimeout(e,t))}function Oae(t,{delay:e=100,retryCount:n=2,shouldRetry:s=()=>!0}={}){return new Promise((i,r)=>{const c=async({count:l=0}={})=>{const f=async({error:d})=>{const h=typeof e=="function"?e({count:l,error:d}):e;h&&await UM(h),c({count:l+1})};try{const d=await t();i(d)}catch(d){if(l<n&&await s({count:l,error:d}))return f({error:d});r(d)}};c()})}const C2=256;let S0=C2,C0;function Mae(t=11){if(!C0||S0+t>C2*2){C0="",S0=0;for(let e=0;e<C2;e++)C0+=(256+Math.random()*256|0).toString(16).substring(1)}return C0.substring(S0,S0+++t)}const A0=new Aae(8192);function Rae(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(A0.get(n))return A0.get(n);const s=t().finally(()=>A0.delete(n));return A0.set(n,s),s}function Pae(t,e={}){return async(n,s={})=>{const{dedupe:i=!1,methods:r,retryDelay:c=150,retryCount:l=3,uid:f}={...e,...s},{method:d}=n;if(r?.exclude?.includes(d))throw new Kc(new Error("method not supported"),{method:d});if(r?.include&&!r.include.includes(d))throw new Kc(new Error("method not supported"),{method:d});const h=i?PM(`${f}.${Jc(n)}`):void 0;return Rae(()=>Oae(async()=>{try{return await t(n)}catch(g){const m=g;switch(m.code){case Uh.code:throw new Uh(m);case Lh.code:throw new Lh(m);case kh.code:throw new kh(m,{method:n.method});case Bh.code:throw new Bh(m);case Zu.code:throw new Zu(m);case jh.code:throw new jh(m);case zh.code:throw new zh(m);case Hh.code:throw new Hh(m);case Ju.code:throw new Ju(m);case Kc.code:throw new Kc(m,{method:n.method});case ef.code:throw new ef(m);case Fh.code:throw new Fh(m);case el.code:throw new el(m);case Vh.code:throw new Vh(m);case qh.code:throw new qh(m);case Wh.code:throw new Wh(m);case Kh.code:throw new Kh(m);case Gh.code:throw new Gh(m);case Yh.code:throw new Yh(m);case Xh.code:throw new Xh(m);case Qh.code:throw new Qh(m);case Zh.code:throw new Zh(m);case Jh.code:throw new Jh(m);case ep.code:throw new ep(m);case tp.code:throw new tp(m);case 5e3:throw new el(m);default:throw g instanceof ti?g:new Iae(m)}}},{delay:({count:g,error:m})=>{if(m&&m instanceof uh){const y=m?.headers?.get("Retry-After");if(y?.match(/\d/))return Number.parseInt(y,10)*1e3}return~~(1<<g)*c},retryCount:l,shouldRetry:({error:g})=>$ae(g)}),{enabled:i,id:h})}}function $ae(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===ef.code||t.code===Zu.code:t instanceof uh&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Uae(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,r)=>{(async()=>{let c;try{const l=new AbortController;n>0&&(c=setTimeout(()=>{s&&l.abort()},n)),i(await t({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&r(e),r(l)}finally{clearTimeout(c)}})()})}function Lae(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const jI=Lae();function kae(t,e={}){return{async request(n){const{body:s,fetchFn:i=e.fetchFn??fetch,onRequest:r=e.onRequest,onResponse:c=e.onResponse,timeout:l=e.timeout??1e4}=n,f={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:d,method:h,signal:g}=f;try{const m=await Uae(async({signal:w})=>{const v={...f,body:Array.isArray(s)?Jc(s.map(N=>({jsonrpc:"2.0",id:N.id??jI.take(),...N}))):Jc({jsonrpc:"2.0",id:s.id??jI.take(),...s}),headers:{"Content-Type":"application/json",...d},method:h||"POST",signal:g||(l>0?w:null)},E=new Request(t,v),C=await r?.(E,v)??{...v,url:t};return await i(C.url??t,C)},{errorInstance:new BI({body:s,url:t}),timeout:l,signal:!0});c&&await c(m);let y;if(m.headers.get("Content-Type")?.startsWith("application/json"))y=await m.json();else{y=await m.text();try{y=JSON.parse(y||"{}")}catch(w){if(m.ok)throw w;y={error:y}}}if(!m.ok)throw new uh({body:s,details:Jc(y.error)||m.statusText,headers:m.headers,status:m.status,url:t});return y}catch(m){throw m instanceof uh||m instanceof BI?m:new uh({body:s,cause:m,url:t})}}}}function LM({key:t,methods:e,name:n,request:s,retryCount:i=3,retryDelay:r=150,timeout:c,type:l},f){const d=Mae();return{config:{key:t,methods:e,name:n,request:s,retryCount:i,retryDelay:r,timeout:c,type:l},request:Pae(s,{methods:e,retryCount:i,retryDelay:r,uid:d}),value:f}}function zI(t,e={}){const{key:n="fallback",name:s="Fallback",rank:i=!1,shouldThrow:r=Bae,retryCount:c,retryDelay:l}=e;return(({chain:f,pollingInterval:d=4e3,timeout:h,...g})=>{let m=t,y=()=>{};const w=LM({key:n,name:s,async request({method:v,params:E}){let C;const T=async(N=0)=>{const I=m[N]({...g,chain:f,retryCount:0,timeout:h});try{const S=await I.request({method:v,params:E});return y({method:v,params:E,response:S,transport:I,status:"success"}),S}catch(S){if(y({error:S,method:v,params:E,transport:I,status:"error"}),r(S)||N===m.length-1||(C??=m.slice(N+1).some(A=>{const{include:_,exclude:D}=A({chain:f}).config.methods||{};return _?_.includes(v):D?!D.includes(v):!0}),!C))throw S;return T(N+1)}};return T()},retryCount:c,retryDelay:l,type:"fallback"},{onResponse:v=>y=v,transports:m.map(v=>v({chain:f,retryCount:0}))});if(i){const v=typeof i=="object"?i:{};jae({chain:f,interval:v.interval??d,onTransports:E=>m=E,ping:v.ping,sampleCount:v.sampleCount,timeout:v.timeout,transports:m,weights:v.weights})}return w})}function Bae(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Ju.code||t.code===el.code||px.nodeMessage.test(t.message)||t.code===5e3))}function jae({chain:t,interval:e=4e3,onTransports:n,ping:s,sampleCount:i=10,timeout:r=1e3,transports:c,weights:l={}}){const{stability:f=.7,latency:d=.3}=l,h=[],g=async()=>{const m=await Promise.all(c.map(async v=>{const E=v({chain:t,retryCount:0,timeout:r}),C=Date.now();let T,N;try{await(s?s({transport:E}):E.request({method:"net_listening"})),N=1}catch{N=0}finally{T=Date.now()}return{latency:T-C,success:N}}));h.push(m),h.length>i&&h.shift();const y=Math.max(...h.map(v=>Math.max(...v.map(({latency:E})=>E)))),w=c.map((v,E)=>{const C=h.map(A=>A[E].latency),N=1-C.reduce((A,_)=>A+_,0)/C.length/y,I=h.map(A=>A[E].success),S=I.reduce((A,_)=>A+_,0)/I.length;return S===0?[0,E]:[d*N+f*S,E]}).sort((v,E)=>E[0]-v[0]);n(w.map(([,v])=>c[v])),await UM(e),g()};g()}class zae extends ti{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function N0(t,e={}){const{batch:n,fetchFn:s,fetchOptions:i,key:r="http",methods:c,name:l="HTTP JSON-RPC",onFetchRequest:f,onFetchResponse:d,retryDelay:h,raw:g}=e;return({chain:m,retryCount:y,timeout:w})=>{const{batchSize:v=1e3,wait:E=0}=typeof n=="object"?n:{},C=e.retryCount??y,T=w??e.timeout??1e4,N=t||m?.rpcUrls.default.http[0];if(!N)throw new zae;const I=kae(N,{fetchFn:s,fetchOptions:i,onRequest:f,onResponse:d,timeout:T});return LM({key:r,methods:c,name:l,async request({method:S,params:A}){const _={method:S,params:A},{schedule:D}=_ae({id:N,wait:E,shouldSplitBatch(L){return L.length>v},fn:L=>I.request({body:L}),sort:(L,H)=>L.id-H.id}),O=async L=>n?D(L):[await I.request({body:L})],[{error:P,result:U}]=await O(_);if(g)return{error:P,result:U};if(P)throw new $M({body:_,error:P,url:N});return U},retryCount:C,retryDelay:h,timeout:T,type:"http"},{fetchOptions:i,url:N})}}const Vv={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Nae(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],s=parseInt(n,10);return isNaN(s)?"0x0":`0x${s.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},gx={async getMyTokensWithBalance(t){const e=Oe.state.address,n=V.state.activeCaipNetwork,s=ve.getConnectorId("eip155")===he.CONNECTOR_ID.AUTH;if(!e||!n)return[];const i=`${n.caipNetworkId}:${e}`,r=me.getBalanceCacheForCaipAddress(i);if(r)return r.balances;if(n.chainNamespace===he.CHAIN.EVM&&s){const l=await this.getEIP155Balances(e,n);if(l)return this.filterLowQualityTokens(l)}const c=await ke.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(c.balances)},async getEIP155Balances(t,e){try{const n=Vv.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await Ee.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const i=await Ee.walletGetAssets({account:t,chainFilter:[n]});if(!Vv.isWalletGetAssetsResponse(i))return null;const c=(i[n]||[]).map(l=>Vv.createBalance(l,e.caipNetworkId));return me.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Tr=Rt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Hae={state:Tr,replaceState(t){t&&Object.assign(Tr,al(t))},subscribe(t){return V.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let s;return V.subscribeChainProp("accountState",i=>{if(i){const r=i[t];s!==r&&(s=r,e(r))}},n)},setStatus(t,e){V.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return V.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const n=t?Me.getPlainAddress(t):void 0;e===V.state.activeChain&&(V.state.activeCaipAddress=t),V.setAccountProp("caipAddress",t,e),V.setAccountProp("address",n,e)},setBalance(t,e,n){V.setAccountProp("balance",t,n),V.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){V.setAccountProp("profileName",t,e)},setProfileImage(t,e){V.setAccountProp("profileImage",t,e)},setUser(t,e){V.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){V.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){V.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){V.setAccountProp("currentTab",t,V.state.activeChain)},setTokenBalance(t,e){t&&V.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){V.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){if(!n)return;const s=V.state.chains.get(n)?.accountState?.addressLabels||new Map;s.set(t,e),V.setAccountProp("addressLabels",s,n)},removeAddressLabel(t,e){if(!e)return;const n=V.state.chains.get(e)?.accountState?.addressLabels||new Map;n.delete(t),V.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){V.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){V.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&V.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){V.setAccountProp("socialWindow",t?al(t):void 0,e)},setFarcasterUrl(t,e){V.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Tr.balanceLoading=!0;const e=V.state.activeCaipNetwork?.caipNetworkId,n=V.state.activeCaipNetwork?.chainNamespace,s=V.state.activeCaipAddress,i=s?Me.getPlainAddress(s):void 0;if(Tr.lastRetry&&!Me.isAllowedRetry(Tr.lastRetry,30*yt.ONE_SEC_MS))return Tr.balanceLoading=!1,[];try{if(i&&e&&n){const r=await gx.getMyTokensWithBalance();return Oe.setTokenBalance(r,n),Tr.lastRetry=void 0,Tr.balanceLoading=!1,r}}catch(r){Tr.lastRetry=Date.now(),t?.(r),$r.showError("Token Balance Unavailable")}finally{Tr.balanceLoading=!1}return[]},resetAccount(t){V.resetAccount(t)}},Oe=ni(Hae),Fae={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=V.state.activeCaipNetwork,s=ze.state.data;if(t.id===n?.id)return;const r=Oe.getCaipAddress(V.state.activeChain),c=t.chainNamespace!==V.state.activeChain,l=Oe.getCaipAddress(t.chainNamespace),d=ve.getConnectorId(V.state.activeChain)===he.CONNECTOR_ID.AUTH,h=he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===t.chainNamespace);e||d&&h?ze.push("SwitchNetwork",{...s,network:t}):r&&c&&!l?ze.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ze.push("SwitchNetwork",{...s,network:t})}},Cs=Rt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Vae={state:Cs,subscribe(t){return Bn(Cs,()=>t(Cs))},subscribeKey(t,e){return ts(Cs,t,e)},async open(t){const e=t?.namespace,n=V.state.activeChain,s=e&&e!==n,i=V.getAccountData(t?.namespace)?.caipAddress;if(Ee.state.wcBasic?Le.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Le.prefetch(),ve.setFilterByNamespace(t?.namespace),st.setLoading(!0,e),e&&s){const r=V.getNetworkData(e)?.caipNetwork||V.getRequestedCaipNetworks(e)[0];r&&Fae.onSwitchNetwork({network:r,ignoreSwitchConfirmation:!0})}else{const r=V.state.noAdapters;de.state.manualWCControl||r&&!i?Me.isMobile()?ze.reset("AllWallets"):ze.reset("ConnectingWalletConnectBasic"):t?.view?ze.reset(t.view,t.data):i?ze.reset("Account"):ze.reset("Connect")}Cs.open=!0,Aa.set({open:!0}),It.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=de.state.enableEmbedded,e=!!V.state.activeCaipAddress;Cs.open&&It.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Cs.open=!1,ze.reset("Connect"),st.clearLoading(),t?e?ze.replace("Account"):ze.push("Connect"):Aa.set({open:!1}),Ee.resetUri()},setLoading(t,e){e&&Cs.loadingNamespaceMap.set(e,t),Cs.loading=t,Aa.set({loading:t})},clearLoading(){Cs.loadingNamespaceMap.clear(),Cs.loading=!1,Aa.set({loading:!1})},shake(){Cs.shake||(Cs.shake=!0,setTimeout(()=>{Cs.shake=!1},500))}},st=ni(Vae),fh={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},A2={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},qae={providers:CM,selectedProvider:null,error:null,purchaseCurrency:fh,paymentCurrency:A2,purchaseCurrencies:[fh],paymentCurrencies:[],quotesLoading:!1},it=Rt(qae),Wae={state:it,subscribe(t){return Bn(it,()=>t(it))},subscribeKey(t,e){return ts(it,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=V.state.activeChain,n=e===he.CHAIN.SOLANA?"SOL":"USDC",s=e?V.state.chains.get(e)?.accountState?.address??"":"",i=new URL(t.url);i.searchParams.append("publicKey",Hre),i.searchParams.append("destinationCurrencyCode",n),i.searchParams.append("walletAddress",s),i.searchParams.append("externalCustomerId",de.state.projectId),it.selectedProvider={...t,url:i.toString()}}else it.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=CM.filter(s=>e.includes(s.name));it.providers=n}else it.providers=[]},setPurchaseCurrency(t){it.purchaseCurrency=t},setPaymentCurrency(t){it.paymentCurrency=t},setPurchaseAmount(t){N2.state.purchaseAmount=t},setPaymentAmount(t){N2.state.paymentAmount=t},async getAvailableCurrencies(){const t=await ke.getOnrampOptions();it.purchaseCurrencies=t.purchaseCurrencies,it.paymentCurrencies=t.paymentCurrencies,it.paymentCurrency=t.paymentCurrencies[0]||A2,it.purchaseCurrency=t.purchaseCurrencies[0]||fh,await Le.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Le.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){it.quotesLoading=!0;try{const t=await ke.getOnrampQuote({purchaseCurrency:it.purchaseCurrency,paymentCurrency:it.paymentCurrency,amount:it.paymentAmount?.toString()||"0",network:it.purchaseCurrency?.symbol});return it.quotesLoading=!1,it.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return it.error=t.message,it.quotesLoading=!1,null}finally{it.quotesLoading=!1}},resetState(){it.selectedProvider=null,it.error=null,it.purchaseCurrency=fh,it.paymentCurrency=A2,it.purchaseCurrencies=[fh],it.paymentCurrencies=[],it.paymentAmount=void 0,it.purchaseAmount=void 0,it.quotesLoading=!1}},N2=ni(Wae),HI=2147483648,Kae={convertEVMChainIdToCoinType(t){if(t>=HI)throw new Error("Invalid chainId");return(HI|t)>>>0}},Si=Rt({suggestions:[],loading:!1}),Gae={state:Si,subscribe(t){return Bn(Si,()=>t(Si))},subscribeKey(t,e){return ts(Si,t,e)},async resolveName(t){try{return await ke.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await ke.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Si.loading=!0,Si.suggestions=[];const e=await ke.getEnsNameSuggestions(t);return Si.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Si.suggestions}catch(e){const n=dh.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Si.loading=!1}},async getNamesForAddress(t){try{if(!V.state.activeCaipNetwork)return[];const n=me.getEnsFromCacheForAddress(t);if(n)return n;const s=await ke.reverseLookupEnsName({address:t});return me.updateEnsCache({address:t,ens:s,timestamp:Date.now()}),s}catch(e){const n=dh.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=V.state.activeCaipNetwork,n=Oe.state.address,s=ve.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!s)throw new Error("Address or auth connector not found");Si.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ze.pushTransactionStack({onCancel(){ze.replace("RegisterAccountName")}});const r=await Ee.signMessage(i);Si.loading=!1;const c=e.id;if(!c)throw new Error("Network not found");const l=Kae.convertEVMChainIdToCoinType(Number(c));await ke.registerEnsName({coinType:l,address:n,signature:r,message:i}),Oe.setProfileName(t,e.chainNamespace),ze.replace("RegisterAccountNameSuccess")}catch(i){const r=dh.parseEnsApiError(i,`Error registering name ${t}`);throw ze.replace("RegisterAccountName"),new Error(r)}finally{Si.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},dh=ni(Gae);let Oc=null;const Rr={getSIWX(){return de.state.siwx},async initializeIfEnabled(t=V.getActiveCaipAddress()){const e=de.state.siwx;if(!(e&&t))return;const[n,s,i]=t.split(":");if(V.checkIfSupportedNetwork(n,`${n}:${s}`))try{if(de.state.remoteFeatures?.emailCapture){const c=V.getAccountData(n)?.user;await st.open({view:"DataCapture",data:{email:c?.email??void 0}});return}if(Oc&&await Oc,(await e.getSessions(`${n}:${s}`,i)).length)return;await st.open({view:"SIWXSignMessage"})}catch(r){console.error("SIWXUtil:initializeIfEnabled",r),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await Ee._getClient()?.disconnect().catch(console.error),ze.reset("Connect"),$r.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=de.state.siwx,e=Me.getPlainAddress(V.getActiveCaipAddress()),n=UI(),s=Ee._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!s)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),r=i.toString();ve.getConnectorId(n.chainNamespace)===he.CONNECTOR_ID.AUTH&&ze.pushTransactionStack({});const l=await s.signMessage(r);await t.addSession({data:i,message:r,signature:l}),V.setLastConnectedSIWECaipNetwork(n),st.close(),It.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const r=this.getSIWXEventProperties();(!st.state.open||ze.state.view==="ApproveTransaction")&&await st.open({view:"SIWXSignMessage"}),$r.showError("Error signing message"),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:r}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=V.getLastConnectedSIWECaipNetwork();if(n){const s=await t?.getSessions(n?.caipNetworkId,Me.getPlainAddress(V.getActiveCaipAddress())||"");s&&s.length>0?await V.switchActiveNetwork(n):await Ee.disconnect()}else await Ee.disconnect()}else st.close();st.close(),It.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=V.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async s=>{const i=await t?.getSessions(s.caipNetworkId,Me.getPlainAddress(V.getActiveCaipAddress())||"");i&&n.push(...i)})),n},async getSessions(t){const e=de.state.siwx;let n=t?.address;if(!n){const i=V.getActiveCaipAddress();n=Me.getPlainAddress(i)}let s=t?.caipNetworkId;return s||(s=V.getActiveCaipNetwork()?.caipNetworkId),e&&n&&s?e.getSessions(s,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=ze.state.view==="ApproveTransaction",n=ze.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:s,chainNamespace:i}){const r=Rr.getSIWX();if(!r||!i.includes(he.CHAIN.EVM)||de.state.remoteFeatures?.emailCapture){const h=await t.connect({chainId:e,socialUri:n,preferredAccountType:s});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const c=`${i}:${e}`,l=await r.createMessage({chainId:c,accountAddress:"<<AccountAddress>>"}),f={accountAddress:l.accountAddress,chainId:l.chainId,domain:l.domain,uri:l.uri,version:l.version,nonce:l.nonce,notBefore:l.notBefore,statement:l.statement,resources:l.resources,requestId:l.requestId,issuedAt:l.issuedAt,expirationTime:l.expirationTime,serializedMessage:l.toString()},d=await t.connect({chainId:e,socialUri:n,siwxMessage:f,preferredAccountType:s});return f.accountAddress=d.address,f.serializedMessage=d.message||"",d.signature&&d.message&&await Rr.addEmbeddedWalletSession(f,d.message,d.signature),{address:d.address,chainId:d.chainId,accounts:d.accounts}},async addEmbeddedWalletSession(t,e,n){if(Oc)return Oc;const s=Rr.getSIWX();return s?(Oc=s.addSession({data:t,message:e,signature:n}).finally(()=>{Oc=null}),Oc):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const s=Rr.getSIWX(),i=new Set(e.map(l=>l.split(":")[0]));if(!s||i.size!==1||!i.has("eip155"))return!1;const r=await s.createMessage({chainId:UI()?.caipNetworkId||"",accountAddress:""}),c=await t.authenticate({nonce:r.nonce,domain:r.domain,uri:r.uri,exp:r.expirationTime,iat:r.issuedAt,nbf:r.notBefore,requestId:r.requestId,version:r.version,resources:r.resources,statement:r.statement,chainId:r.chainId,methods:n,chains:[r.chainId,...e.filter(l=>l!==r.chainId)]});if($r.showLoading("Authenticating...",{autoClose:!1}),Oe.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),c?.auths?.length){const l=c.auths.map(f=>{const d=t.client.formatAuthMessage({request:f.p,iss:f.p.iss});return{data:{...f.p,accountAddress:f.p.iss.split(":").slice(-1).join(""),chainId:f.p.iss.split(":").slice(2,4).join(":"),uri:f.p.aud,version:f.p.version||r.version,expirationTime:f.p.exp,issuedAt:f.p.iat,notBefore:f.p.nbf},message:d,signature:f.s.s,cacao:f}});try{await s.setSessions(l),It.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Rr.getSIWXEventProperties()})}catch(f){throw console.error("SIWX:universalProviderAuth - failed to set sessions",f),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Rr.getSIWXEventProperties()}),await t.disconnect().catch(console.error),f}finally{$r.hide()}}return!0},getSIWXEventProperties(){const t=V.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:V.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Fr(t)===Zc.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Uc={EIP155:he.CHAIN.EVM,CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},np={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[he.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[he.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[he.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[he.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[he.CONNECTOR_ID.INJECTED]:"Browser Wallet",[he.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[he.CONNECTOR_ID.COINBASE]:"Coinbase",[he.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[he.CONNECTOR_ID.LEDGER]:"Ledger",[he.CONNECTOR_ID.SAFE]:"Safe"}},Zs={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,s])=>{e[`${Uc.EIP155}:${n}`]=s}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=V.state.activeChain;return he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ve.getConnectorId(e)===he.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let s=0;return new Promise(i=>{async function r(){return s+=1,await t()?i(!0):s>=n?i(!1):(setTimeout(r,e),null)}r()})}},Yae=new AbortController,Ci={EmbeddedWalletAbortController:Yae,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Bu()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systems date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},Xae={createLogger(t,e="error"){const n=gp({level:e}),{logger:s}=kD({opts:n});return s.error=(...i)=>{for(const r of i)if(r instanceof Error){t(r,...i);return}t(void 0,...i)},s}},Qae="rpc.walletconnect.org";function FI(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const qv=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Iu={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Qae}catch{n=!1}if(n){const s=new URL(t);return s.searchParams.has("projectId")||s.searchParams.set("projectId",e),s.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:he.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${he.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const s=t.rpcUrls?.default?.http?.[0];return qv.includes(e)?FI(e,n):s||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:s}){const i=this.getChainNamespace(t),r=this.getCaipNetworkId(t),c=t.rpcUrls?.default?.http?.[0],l=this.getDefaultRpcUrl(t,r,n),f=t?.rpcUrls?.chainDefault?.http?.[0]||c,d=s?.[r]?.map(m=>m.url)||[],h=[...d,...l?[l]:[]],g=[...d];return f&&!g.includes(f)&&g.push(f),{...t,chainNamespace:i,caipNetworkId:r,assets:{imageId:np.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:h},chainDefault:{http:g}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:s}){return t.map(i=>Iu.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:s,projectId:n}))},getViemTransport(t,e,n){const s=[];return n?.forEach(i=>{s.push(N0(i.url,i.config))}),qv.includes(t.caipNetworkId)&&s.push(N0(FI(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(i=>{s.push(N0(i))}),zI(s)},extendWagmiTransports(t,e,n){if(qv.includes(t.caipNetworkId)){const s=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return zI([n,N0(s)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:he.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=me.getActiveCaipNetworkId(),n=V.getAllRequestedCaipNetworks(),s=Array.from(V.state.chains?.keys()||[]),i=e?.split(":")[0],r=i?s.includes(i):!1,c=n?.find(f=>f.caipNetworkId===e);return r&&!c&&e?this.getUnsupportedNetwork(e):c||t||n?.[0]}},Sm={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},As=Rt({providers:{...Sm},providerIds:{...Sm}}),Yt={state:As,subscribeKey(t,e){return ts(As,t,e)},subscribe(t){return Bn(As,()=>{t(As)})},subscribeProviders(t){return Bn(As.providers,()=>t(As.providers))},setProvider(t,e){t&&e&&(As.providers[t]=al(e))},getProvider(t){if(t)return As.providers[t]},setProviderId(t,e){e&&(As.providerIds[t]=e)},getProviderId(t){if(t)return As.providerIds[t]},reset(){As.providers={...Sm},As.providerIds={...Sm}},resetChain(t){As.providers[t]=void 0,As.providerIds[t]=void 0}},Zae={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},T2={filterOutDuplicatesByRDNS(t){const e=de.state.enableEIP6963?ve.state.connectors:[],n=me.getRecentWallets(),s=e.map(l=>l.info?.rdns).filter(Boolean),i=n.map(l=>l.rdns).filter(Boolean),r=s.concat(i);if(r.includes("io.metamask.mobile")&&Me.isMobile()){const l=r.indexOf("io.metamask.mobile");r[l]="io.metamask"}return t.filter(l=>!(l?.rdns&&r.includes(String(l.rdns))||!l?.rdns&&e.some(d=>d.name===l.name)))},filterOutDuplicatesByIds(t){const e=ve.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),n=me.getRecentWallets(),s=e.map(l=>l.explorerId),i=n.map(l=>l.id),r=s.concat(i);return t.filter(l=>!r.includes(l?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ve.state,{featuredWalletIds:n}=de.state,s=e.filter(c=>c.type==="ANNOUNCED").reduce((c,l)=>(l.info?.rdns&&(c[l.info.rdns]=!0),c),{});return t.map(c=>({...c,installed:!!c.rdns&&!!s[c.rdns??""]})).sort((c,l)=>{const f=Number(l.installed)-Number(c.installed);if(f!==0)return f;if(n?.length){const d=n.indexOf(c.id),h=n.indexOf(l.id);if(d!==-1&&h!==-1)return d-h;if(d!==-1)return-1;if(h!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||de.state.features?.connectMethodsOrder,s=e||ve.state.connectors;if(n)return n;const{injected:i,announced:r}=F0.getConnectorsByType(s,Le.state.recommended,Le.state.featured),c=i.filter(F0.showConnector),l=r.filter(F0.showConnector);return c.length||l.length?["wallet","email","social"]:Zae.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Le.state.excludedWallets.some(s=>s.rdns===t.rdns),n=!!t.name&&Le.state.excludedWallets.some(s=>Zs.isLowerCaseMatch(s.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},F0={getConnectorsByType(t,e,n){const{customWallets:s}=de.state,i=me.getRecentWallets(),r=T2.filterOutDuplicateWallets(e),c=T2.filterOutDuplicateWallets(n),l=t.filter(g=>g.type==="MULTI_CHAIN"),f=t.filter(g=>g.type==="ANNOUNCED"),d=t.filter(g=>g.type==="INJECTED"),h=t.filter(g=>g.type==="EXTERNAL");return{custom:s,recent:i,external:h,multiChain:l,announced:f,injected:d,recommended:r,featured:c}},showConnector(t){const e=t.info?.rdns,n=!!e&&Le.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),s=!!t.name&&Le.state.excludedWallets.some(i=>Zs.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Me.isMobile()||Me.isMobile()&&!e&&!Ee.checkInstalled())||n||s)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||s))},getIsConnectedWithWC(){return Array.from(V.state.chains.values()).some(n=>ve.getConnectorId(n.namespace)===he.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:s,announced:i,injected:r,multiChain:c,external:l,overriddenConnectors:f=de.state.features?.connectorTypeOrder??[]}){const g=[{type:"walletConnect",isEnabled:de.state.enableWalletConnect},{type:"recent",isEnabled:s.length>0},{type:"injected",isEnabled:[...r,...i,...c].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:t.length>0}].filter(v=>v.isEnabled),m=new Set(g.map(v=>v.type)),y=f.filter(v=>m.has(v)).map(v=>({type:v,isEnabled:!0})),w=g.filter(({type:v})=>!y.some(({type:C})=>C===v));return Array.from(new Set([...y,...w].map(({type:v})=>v)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!Me.isMobile())return{accounts:[],chainId:void 0};if(t.id===he.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(s=>Number(s))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const V0=globalThis,mx=V0.ShadowRoot&&(V0.ShadyCSS===void 0||V0.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,yx=Symbol(),VI=new WeakMap;let kM=class{constructor(e,n,s){if(this._$cssResult$=!0,s!==yx)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(mx&&e===void 0){const s=n!==void 0&&n.length===1;s&&(e=VI.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&VI.set(n,e))}return e}toString(){return this.cssText}};const Ai=t=>new kM(typeof t=="string"?t:t+"",void 0,yx),Vu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce(((s,i,r)=>s+(c=>{if(c._$cssResult$===!0)return c.cssText;if(typeof c=="number")return c;throw Error("Value passed to 'css' function must be a 'css' function result: "+c+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1]),t[0]);return new kM(n,t,yx)},Jae=(t,e)=>{if(mx)t.adoptedStyleSheets=e.map((n=>n instanceof CSSStyleSheet?n:n.styleSheet));else for(const n of e){const s=document.createElement("style"),i=V0.litNonce;i!==void 0&&s.setAttribute("nonce",i),s.textContent=n.cssText,t.appendChild(s)}},qI=mx?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const s of e.cssRules)n+=s.cssText;return Ai(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:eoe,defineProperty:toe,getOwnPropertyDescriptor:noe,getOwnPropertyNames:soe,getOwnPropertySymbols:ioe,getPrototypeOf:roe}=Object,ey=globalThis,WI=ey.trustedTypes,aoe=WI?WI.emptyScript:"",ooe=ey.reactiveElementPolyfillSupport,hh=(t,e)=>t,I2={toAttribute(t,e){switch(e){case Boolean:t=t?aoe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},BM=(t,e)=>!eoe(t,e),KI={attribute:!0,type:String,converter:I2,reflect:!1,useDefault:!1,hasChanged:BM};Symbol.metadata??=Symbol("metadata"),ey.litPropertyMetadata??=new WeakMap;let Du=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=KI){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const s=Symbol(),i=this.getPropertyDescriptor(e,s,n);i!==void 0&&toe(this.prototype,e,i)}}static getPropertyDescriptor(e,n,s){const{get:i,set:r}=noe(this.prototype,e)??{get(){return this[n]},set(c){this[n]=c}};return{get:i,set(c){const l=i?.call(this);r?.call(this,c),this.requestUpdate(e,l,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??KI}static _$Ei(){if(this.hasOwnProperty(hh("elementProperties")))return;const e=roe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(hh("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(hh("properties"))){const n=this.properties,s=[...soe(n),...ioe(n)];for(const i of s)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[s,i]of n)this.elementProperties.set(s,i)}this._$Eh=new Map;for(const[n,s]of this.elementProperties){const i=this._$Eu(n,s);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const i of s)n.unshift(qI(i))}else e!==void 0&&n.push(qI(e));return n}static _$Eu(e,n){const s=n.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const s of n.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Jae(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,n,s){this._$AK(e,s)}_$ET(e,n){const s=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,s);if(i!==void 0&&s.reflect===!0){const r=(s.converter?.toAttribute!==void 0?s.converter:I2).toAttribute(n,s.type);this._$Em=e,r==null?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null}}_$AK(e,n){const s=this.constructor,i=s._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const r=s.getPropertyOptions(i),c=typeof r.converter=="function"?{fromAttribute:r.converter}:r.converter?.fromAttribute!==void 0?r.converter:I2;this._$Em=i;const l=c.fromAttribute(n,r.type);this[i]=l??this._$Ej?.get(i)??l,this._$Em=null}}requestUpdate(e,n,s){if(e!==void 0){const i=this.constructor,r=this[e];if(s??=i.getPropertyOptions(e),!((s.hasChanged??BM)(r,n)||s.useDefault&&s.reflect&&r===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,s))))return;this.C(e,n,s)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:s,reflect:i,wrapped:r},c){s&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,c??n??this[e]),r!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||s||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,r]of this._$Ep)this[i]=r;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,r]of s){const{wrapped:c}=r,l=this[i];c!==!0||this._$AL.has(i)||l===void 0||this.C(i,void 0,r,l)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach((s=>s.hostUpdate?.())),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach((n=>n.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Du.elementStyles=[],Du.shadowRootOptions={mode:"open"},Du[hh("elementProperties")]=new Map,Du[hh("finalized")]=new Map,ooe?.({ReactiveElement:Du}),(ey.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wx=globalThis,Cm=wx.trustedTypes,GI=Cm?Cm.createPolicy("lit-html",{createHTML:t=>t}):void 0,jM="$lit$",Uo=`lit$${Math.random().toFixed(9).slice(2)}$`,zM="?"+Uo,coe=`<${zM}>`,ol=document,sp=()=>ol.createComment(""),ip=t=>t===null||typeof t!="object"&&typeof t!="function",vx=Array.isArray,loe=t=>vx(t)||typeof t?.[Symbol.iterator]=="function",Wv=`[ 	
\f\r]`,Bd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,YI=/-->/g,XI=/>/g,Mc=RegExp(`>|${Wv}(?:([^\\s"'>=/]+)(${Wv}*=${Wv}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),QI=/'/g,ZI=/"/g,HM=/^(?:script|style|textarea|title)$/i,FM=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),jle=FM(1),zle=FM(2),tf=Symbol.for("lit-noChange"),Cn=Symbol.for("lit-nothing"),JI=new WeakMap,Gc=ol.createTreeWalker(ol,129);function VM(t,e){if(!vx(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return GI!==void 0?GI.createHTML(e):e}const uoe=(t,e)=>{const n=t.length-1,s=[];let i,r=e===2?"<svg>":e===3?"<math>":"",c=Bd;for(let l=0;l<n;l++){const f=t[l];let d,h,g=-1,m=0;for(;m<f.length&&(c.lastIndex=m,h=c.exec(f),h!==null);)m=c.lastIndex,c===Bd?h[1]==="!--"?c=YI:h[1]!==void 0?c=XI:h[2]!==void 0?(HM.test(h[2])&&(i=RegExp("</"+h[2],"g")),c=Mc):h[3]!==void 0&&(c=Mc):c===Mc?h[0]===">"?(c=i??Bd,g=-1):h[1]===void 0?g=-2:(g=c.lastIndex-h[2].length,d=h[1],c=h[3]===void 0?Mc:h[3]==='"'?ZI:QI):c===ZI||c===QI?c=Mc:c===YI||c===XI?c=Bd:(c=Mc,i=void 0);const y=c===Mc&&t[l+1].startsWith("/>")?" ":"";r+=c===Bd?f+coe:g>=0?(s.push(d),f.slice(0,g)+jM+f.slice(g)+Uo+y):f+Uo+(g===-2?l:y)}return[VM(t,r+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};let D2=class qM{constructor({strings:e,_$litType$:n},s){let i;this.parts=[];let r=0,c=0;const l=e.length-1,f=this.parts,[d,h]=uoe(e,n);if(this.el=qM.createElement(d,s),Gc.currentNode=this.el.content,n===2||n===3){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(i=Gc.nextNode())!==null&&f.length<l;){if(i.nodeType===1){if(i.hasAttributes())for(const g of i.getAttributeNames())if(g.endsWith(jM)){const m=h[c++],y=i.getAttribute(g).split(Uo),w=/([.?@])?(.*)/.exec(m);f.push({type:1,index:r,name:w[2],strings:y,ctor:w[1]==="."?doe:w[1]==="?"?hoe:w[1]==="@"?poe:ty}),i.removeAttribute(g)}else g.startsWith(Uo)&&(f.push({type:6,index:r}),i.removeAttribute(g));if(HM.test(i.tagName)){const g=i.textContent.split(Uo),m=g.length-1;if(m>0){i.textContent=Cm?Cm.emptyScript:"";for(let y=0;y<m;y++)i.append(g[y],sp()),Gc.nextNode(),f.push({type:2,index:++r});i.append(g[m],sp())}}}else if(i.nodeType===8)if(i.data===zM)f.push({type:2,index:r});else{let g=-1;for(;(g=i.data.indexOf(Uo,g+1))!==-1;)f.push({type:7,index:r}),g+=Uo.length-1}r++}}static createElement(e,n){const s=ol.createElement("template");return s.innerHTML=e,s}};function nf(t,e,n=t,s){if(e===tf)return e;let i=s!==void 0?n._$Co?.[s]:n._$Cl;const r=ip(e)?void 0:e._$litDirective$;return i?.constructor!==r&&(i?._$AO?.(!1),r===void 0?i=void 0:(i=new r(t),i._$AT(t,n,s)),s!==void 0?(n._$Co??=[])[s]=i:n._$Cl=i),i!==void 0&&(e=nf(t,i._$AS(t,e.values),i,s)),e}class foe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:s}=this._$AD,i=(e?.creationScope??ol).importNode(n,!0);Gc.currentNode=i;let r=Gc.nextNode(),c=0,l=0,f=s[0];for(;f!==void 0;){if(c===f.index){let d;f.type===2?d=new bx(r,r.nextSibling,this,e):f.type===1?d=new f.ctor(r,f.name,f.strings,this,e):f.type===6&&(d=new goe(r,this,e)),this._$AV.push(d),f=s[++l]}c!==f?.index&&(r=Gc.nextNode(),c++)}return Gc.currentNode=ol,i}p(e){let n=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,n),n+=s.strings.length-2):s._$AI(e[n])),n++}}let bx=class WM{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,s,i){this.type=2,this._$AH=Cn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=s,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=nf(this,e,n),ip(e)?e===Cn||e==null||e===""?(this._$AH!==Cn&&this._$AR(),this._$AH=Cn):e!==this._$AH&&e!==tf&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):loe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Cn&&ip(this._$AH)?this._$AA.nextSibling.data=e:this.T(ol.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:s}=e,i=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=D2.createElement(VM(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===i)this._$AH.p(n);else{const r=new foe(i,this),c=r.u(this.options);r.p(n),this.T(c),this._$AH=r}}_$AC(e){let n=JI.get(e.strings);return n===void 0&&JI.set(e.strings,n=new D2(e)),n}k(e){vx(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let s,i=0;for(const r of e)i===n.length?n.push(s=new WM(this.O(sp()),this.O(sp()),this,this.options)):s=n[i],s._$AI(r),i++;i<n.length&&(this._$AR(s&&s._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}};class ty{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,s,i,r){this.type=1,this._$AH=Cn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Cn}_$AI(e,n=this,s,i){const r=this.strings;let c=!1;if(r===void 0)e=nf(this,e,n,0),c=!ip(e)||e!==this._$AH&&e!==tf,c&&(this._$AH=e);else{const l=e;let f,d;for(e=r[0],f=0;f<r.length-1;f++)d=nf(this,l[s+f],n,f),d===tf&&(d=this._$AH[f]),c||=!ip(d)||d!==this._$AH[f],d===Cn?e=Cn:e!==Cn&&(e+=(d??"")+r[f+1]),this._$AH[f]=d}c&&!i&&this.j(e)}j(e){e===Cn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class doe extends ty{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Cn?void 0:e}}class hoe extends ty{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Cn)}}class poe extends ty{constructor(e,n,s,i,r){super(e,n,s,i,r),this.type=5}_$AI(e,n=this){if((e=nf(this,e,n,0)??Cn)===tf)return;const s=this._$AH,i=e===Cn&&s!==Cn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,r=e!==Cn&&(s===Cn||i);i&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class goe{constructor(e,n,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){nf(this,e)}}const moe=wx.litHtmlPolyfillSupport;moe?.(D2,bx),(wx.litHtmlVersions??=[]).push("3.3.1");const yoe=(t,e,n)=>{const s=n?.renderBefore??e;let i=s._$litPart$;if(i===void 0){const r=n?.renderBefore??null;s._$litPart$=i=new bx(e.insertBefore(sp(),r),r,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ex=globalThis;class q0 extends Du{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=yoe(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return tf}}q0._$litElement$=!0,q0.finalized=!0,Ex.litElementHydrateSupport?.({LitElement:q0});const woe=Ex.litElementPolyfillSupport;woe?.({LitElement:q0});(Ex.litElementVersions??=[]).push("4.2.1");let ph,Fo,Vo;function Hle(t,e){ph=document.createElement("style"),Fo=document.createElement("style"),Vo=document.createElement("style"),ph.textContent=qu(t).core.cssText,Fo.textContent=qu(t).dark.cssText,Vo.textContent=qu(t).light.cssText,document.head.appendChild(ph),document.head.appendChild(Fo),document.head.appendChild(Vo),KM(e)}function KM(t){Fo&&Vo&&(t==="light"?(Fo.removeAttribute("media"),Vo.media="enabled"):(Vo.removeAttribute("media"),Fo.media="enabled"))}function voe(t){ph&&Fo&&Vo&&(ph.textContent=qu(t).core.cssText,Fo.textContent=qu(t).dark.cssText,Vo.textContent=qu(t).light.cssText)}function qu(t){return{core:Vu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ai(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ai(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ai(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${Ai(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${Ai(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Vu`
      :root {
        --w3m-color-mix: ${Ai(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${Ai(jo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ai(jo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Vu`
      :root {
        --w3m-color-mix: ${Ai(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${Ai(jo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ai(jo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Fle=Vu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Vle=Vu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,qle=Vu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,W0={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([W0.getAddresses(t),W0.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const n=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:W0.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[np.NetworkImageIds[e.id]]}]})}},Cu={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function Np(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const e8=Np({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),t8=Np({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Np({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});const GM=Np({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Np({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const boe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},_a={getMethodsByChainNamespace(t){return boe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},s=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>s.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>s.add(i)),e.events&&Object.keys(e.events).forEach(i=>s.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[r]=i.split(":");r&&s.add(r)}),s.forEach(i=>{n[i]||(n[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,r])=>{n[i]&&(n[i].methods=r)}),e.chains&&Object.entries(e.chains).forEach(([i,r])=>{n[i]&&(n[i].chains=r)}),e.events&&Object.entries(e.events).forEach(([i,r])=>{n[i]&&(n[i].events=r)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([r,c])=>{const[l,f]=r.split(":");!l||!f||!n[l]||(n[l].rpcMap||(n[l].rpcMap={}),i.has(l)||(n[l].rpcMap={},i.add(l)),n[l].rpcMap[f]=c)})}return n},createNamespaces(t,e){const n=t.reduce((s,i)=>{const{id:r,chainNamespace:c,rpcUrls:l}=i,f=l.default.http[0];s[c]||(s[c]=this.createDefaultNamespace(c));const d=`${c}:${r}`,h=s[c];switch(h.chains.push(d),d){case e8.caipNetworkId:h.chains.push(e8.deprecatedCaipNetworkId);break;case t8.caipNetworkId:h.chains.push(t8.deprecatedCaipNetworkId);break}return h?.rpcMap&&f&&(h.rpcMap[r]=f),s},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await dh.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],s=e.accounts.map(i=>{const[r,c]=i.split(":");return`${r}:${c}`});return Array.from(new Set([...n,...s]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const s of[...e,...n])if(s.includes("*")){const r=`^${s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(r,"u").test(t))return!0}else try{if(new URL(s).origin===t)return!0}catch{if(s===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:s,onAccountsChanged:i,onChainChanged:r,onDisplayUri:c}){n&&t.on("connect",()=>{const l=_a.getWalletConnectAccounts(t,e);n(l)}),s&&t.on("disconnect",()=>{s()}),i&&t.on("session_event",l=>{if(_a.isSessionEventData(l)){const{name:f,data:d}=l.params.event;if(f==="accountsChanged"&&Array.isArray(d)){const h=d.filter(g=>Me.isCaipAddress(g)).map(g=>Qs.parseCaipAddress(g)).filter(g=>g.chainNamespace===e);i(h)}}}),r&&t.on("chainChanged",l=>{r(l)}),c&&t.on("display_uri",l=>{c(l)})},getWalletConnectAccounts(t,e){const n=new Set,s=t?.session?.namespaces?.[e]?.accounts?.map(i=>Qs.parseCaipAddress(i)).filter(({address:i})=>n.has(i.toLowerCase())?!1:(n.add(i.toLowerCase()),!0));return s&&s.length>0?s:[]}};class Eoe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case he.CHAIN.EVM:await this.syncEVMConnections(e);break;case he.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case he.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===he.CONNECTOR_ID.WALLET_CONNECT){const f=_a.getWalletConnectAccounts(s,this.namespace),d=n.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===f[0]?.chainId?.toString());f.length>0&&r({connectorId:l.id,accounts:f.map(h=>({address:h.address})),caipNetwork:d})}else{const{accounts:f,chainId:d}=await F0.fetchProviderData(l);if(f.length>0&&d){const h=n.find(g=>g.chainNamespace===this.namespace&&g.id.toString()===d.toString());r({connectorId:l.id,accounts:f.map(g=>({address:g})),caipNetwork:h}),l.provider&&l.id!==he.CONNECTOR_ID.AUTH&&l.id!==he.CONNECTOR_ID.WALLET_CONNECT&&c(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===he.CONNECTOR_ID.WALLET_CONNECT){const f=_a.getWalletConnectAccounts(s,this.namespace);f.length>0&&r({connectorId:l.id,accounts:f.map(d=>({address:d.address})),caipNetwork:n})}else{const f=await l.connect({chainId:n?.id});f&&(r({connectorId:l.id,accounts:[{address:f}],caipNetwork:n}),c(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===he.CONNECTOR_ID.WALLET_CONNECT){const m=_a.getWalletConnectAccounts(s,this.namespace);m.length>0&&r({connectorId:l.id,accounts:m.map(y=>({address:y.address})),caipNetwork:n});return}const f=await l.connect();let h=(await l.getAccountAddresses())?.map(m=>Me.createAccount(he.CHAIN.BITCOIN,m.address,m.purpose||"payment",m.publicKey,m.path));if(h&&h.length>1&&(h=[{namespace:he.CHAIN.BITCOIN,publicKey:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:he.CHAIN.BITCOIN,publicKey:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(l.chains.find(m=>m.id===n?.id)||l.chains[0]))throw new Error("The connector does not support any of the requested chains");f&&(c(l.id,l.provider),r({connectorId:l.id,accounts:h.map(m=>({address:m.address,type:m.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:s,connectors:i}){if(n){const c=s.find(d=>Zs.isLowerCaseMatch(d.connectorId,n));if(!c)return null;const l=i.find(d=>Zs.isLowerCaseMatch(d.id,c.connectorId)),f=e?c.accounts.find(d=>Zs.isLowerCaseMatch(d.address,e)):c.accounts[0];return{...c,account:f,connector:l}}const r=s.find(c=>c.accounts.length>0&&i.some(l=>Zs.isLowerCaseMatch(l.id,c.connectorId)));if(r){const[c]=r.accounts,l=i.find(f=>Zs.isLowerCaseMatch(f.id,r.connectorId));return{...r,account:c,connector:l}}return null}}const Kd={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class YM{constructor({provider:e,namespace:n}){this.id=he.CONNECTOR_ID.WALLET_CONNECT,this.name=np.ConnectorNamesMap[he.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=np.ConnectorImageIds[he.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=V.getCaipNetworks.bind(V),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),s=de.state.universalProviderConfigOverride,i=_a.createNamespaces(n,s);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Rr.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:xoe})}}const xoe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Soe=[he.CONNECTOR_ID.AUTH,he.CONNECTOR_ID.WALLET_CONNECT];class Coe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getConnectorId=n=>ve.getConnectorId(n),e&&this.construct(e),e?.namespace&&(this.connectionManager=new Eoe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const s=this.getCaipNetworks().filter(i=>i.chainNamespace===this.namespace).find(i=>i.id.toString()===n?.toString());e&&s&&this.addConnection({connectorId:he.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:s})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:he.CONNECTOR_ID.AUTH,type:"AUTH",name:he.CONNECTOR_NAMES.AUTH,provider:e,imageId:np.ConnectorImageIds[he.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(s=>n.has(s.id)?!1:(n.add(s.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(s=>n.has(s.connectorId.toLowerCase())?!1:(n.add(s.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Zs.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Oe.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const s=this.eventListeners.get(e);s&&s.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const s=this.eventListeners.get(e);s&&s.forEach(i=>i(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:s}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(s==="WALLET_CONNECT"){i.setDefaultChain(n.caipNetworkId);return}if(i&&s==="AUTH"){const r=i,c=Fr(n.chainNamespace);await r.switchNetwork({chainId:n.caipNetworkId});const l=await r.getUser({chainId:n.caipNetworkId,preferredAccountType:c});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof YM);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:s,chainId:i}=Me.getAccount(e[0]),r=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===i?.toString()),c=this.connectors.find(l=>l.id===n);s&&(this.emit("accountChanged",{address:s,chainId:i,connector:c}),this.addConnection({connectorId:n,accounts:e.map(l=>{const{address:f}=Me.getAccount(l);return{address:f}}),caipNetwork:r}))}}onAccountsChanged(e,n,s=!0){if(e.length>0){const{address:i}=Me.getAccount(e[0]),r=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});i&&Zs.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("accountChanged",{address:i,chainId:r?.caipNetwork?.id,connector:r?.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Me.getAccount(c);return{address:l}}),caipNetwork:r?.caipNetwork})}else s&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Zs.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const s=typeof e=="string"&&e.startsWith("0x")?W0.hexStringToNumber(e).toString():e.toString(),i=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),r=this.getCaipNetworks().filter(c=>c.chainNamespace===this.namespace).find(c=>c.id.toString()===s);i&&this.addConnection({connectorId:n,accounts:i.accounts,caipNetwork:r}),Zs.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:s})}listenProviderEvents(e,n){if(Soe.includes(e))return;const s=c=>this.onAccountsChanged(c,e),i=c=>this.onChainChanged(c,e),r=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",r),n.on("accountsChanged",s),n.on("chainChanged",i),this.providerHandlers[e]={provider:n,disconnect:r,accountsChanged:s,chainChanged:i})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:s,accountsChanged:i,chainChanged:r}=this.providerHandlers[e];n.removeListener("disconnect",s),n.removeListener("accountsChanged",i),n.removeListener("chainChanged",r),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class Aoe extends Coe{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new YM({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const s=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,r]=i.split(":");return r}).filter((i,r,c)=>c.indexOf(i)===r)||[];return Promise.resolve({accounts:s.map(i=>Me.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&yt.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Oe.state.balanceLoading&&e.chainId===V.state.activeCaipNetwork?.id)return{balance:Oe.state.balance||"0.00",symbol:Oe.state.balanceSymbol||""};const i=(await Oe.fetchTokenBalance()).find(r=>r.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&r.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:s,address:i}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let r="";return V.state.activeCaipNetwork?.chainNamespace===he.CHAIN.SOLANA?r=(await n.request({method:"solana_signMessage",params:{message:hf.encode(new TextEncoder().encode(s)),pubkey:i}},V.state.activeCaipNetwork?.caipNetworkId)).signature:r=await n.request({method:"personal_sign",params:[s,i]},V.state.activeCaipNetwork?.caipNetworkId),{signature:r}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,s=this.getWalletConnectConnector();if(n.chainNamespace===he.CHAIN.EVM)try{await s.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:kI(n.id)}]})}catch(i){if(i.code===Kd.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===Kd.ERROR_INVALID_CHAIN_ID||i.code===Kd.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===Kd.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await s.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:kI(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}s.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(s=>s.type==="WALLET_CONNECT")?.provider}}const Noe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture"],T0={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.multiWallet}},Toe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=T0[e],s=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(s)}},processFeature(t,e,n,s,i){const r=T0[t],c=e[r.localFeatureName];if(i&&!r.isAvailableOnBasic)return!1;if(s){const l=this.getApiConfig(r.apiFeatureName,n);return l?.config===null?this.processFallbackFeature(t,c):l?.config?(c!==void 0&&this.addWarning(c,t),this.processApiFeature(t,l)):!1}return this.processFallbackFeature(t,c)},processApiFeature(t,e){return T0[t].processApi(e)},processFallbackFeature(t,e){return T0[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let s=null,i=!1;try{s=await Le.fetchProjectConfig(),i=s!=null}catch(c){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",c)}const r=i&&!e?yt.DEFAULT_REMOTE_FEATURES:yt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const c of Noe){const l=this.processFeature(c,n,s,i,e);Object.assign(r,{[c]:l})}}catch(c){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",c),yt.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const c=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Zn.open({debugMessage:Ci.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(c)},"warning")}return r}};class Ioe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,s)=>{if(n){const i=V.getCaipNetworks(n)?.find(l=>l.id===s);if(i)return i;const r=V.getNetworkData(n)?.caipNetwork;return r||V.getRequestedCaipNetworks(n).filter(l=>l.chainNamespace===n)?.[0]}return V.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getActiveChainNamespace=()=>V.state.activeChain,this.setRequestedCaipNetworks=(n,s)=>{V.setRequestedCaipNetworks(n,s)},this.getApprovedCaipNetworkIds=()=>V.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>V.state.activeChain===n||!n?V.state.activeCaipAddress:V.state.chains.get(n)?.accountState?.caipAddress,this.setClientId=n=>{ke.setClientId(n)},this.getProvider=n=>Yt.getProvider(n),this.getProviderType=n=>Yt.getProviderId(n),this.getPreferredAccountType=n=>Fr(n),this.setCaipAddress=(n,s)=>{Oe.setCaipAddress(n,s)},this.setBalance=(n,s,i)=>{Oe.setBalance(n,s,i)},this.setProfileName=(n,s)=>{Oe.setProfileName(n,s)},this.setProfileImage=(n,s)=>{Oe.setProfileImage(n,s)},this.setUser=(n,s)=>{Oe.setUser(n,s)},this.resetAccount=n=>{Oe.resetAccount(n)},this.setCaipNetwork=n=>{V.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,s)=>{V.setChainNetworkData(s,{caipNetwork:n})},this.setStatus=(n,s)=>{Oe.setStatus(n,s),ve.isConnected()?me.setConnectionStatus("connected"):me.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>V.state.chains.get(n)?.accountState?.address,this.setConnectors=n=>{const s=[...ve.state.allConnectors,...n];ve.setConnectors(s)},this.setConnections=(n,s)=>{me.setConnections(n,s),Ee.setConnections(n,s)},this.fetchIdentity=n=>ke.fetchIdentity(n),this.getReownName=n=>dh.getNamesForAddress(n),this.getConnectors=()=>ve.getConnectors(),this.getConnectorImage=n=>AM.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?xm.getConnectionsData(n).connections:(Zn.open(he.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?xm.getConnectionsData(n).recentConnections:(Zn.open(he.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){Zn.open(he.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Ee.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){Zn.open(he.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}me.deleteAddressFromConnection(n),Ee.syncStorageConnections()},this.setConnectedWalletInfo=(n,s)=>{const i=Yt.getProviderId(s),r=n?{...n,type:i}:void 0;Oe.setConnectedWalletInfo(r,s)},this.getIsConnectedState=()=>!!V.state.activeCaipAddress,this.addAddressLabel=(n,s,i)=>{Oe.addAddressLabel(n,s,i)},this.removeAddressLabel=(n,s)=>{Oe.removeAddressLabel(n,s)},this.getAddress=n=>V.state.activeChain===n||!n?Oe.state.address:V.state.chains.get(n)?.accountState?.address,this.setApprovedCaipNetworksData=n=>V.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{V.resetNetwork(n)},this.addConnector=n=>{ve.addConnector(n)},this.resetWcConnection=()=>{Ee.resetWcConnection()},this.setAddressExplorerUrl=(n,s)=>{Oe.setAddressExplorerUrl(n,s)},this.setSmartAccountDeployed=(n,s)=>{Oe.setSmartAccountDeployed(n,s)},this.setPreferredAccountType=(n,s)=>{V.setAccountProp("preferredAccountType",n,s)},this.setEIP6963Enabled=n=>{de.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const s=e?.map(r=>r.namespace).filter(r=>!!r);if(s?.length)return[...new Set(s)];const i=n?.map(r=>r.chainNamespace);return[...new Set(i)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),de.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await Toe.fetchRemoteFeatures(e),de.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&N2.setOnrampProviders(this.remoteFeatures.onramp),(de.state.remoteFeatures?.email||Array.isArray(de.state.remoteFeatures?.socials)&&de.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Le.fetchAllowedOrigins();if(!e||!Me.isClient()){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;_a.isOriginAllowed(n,e,Kd.DEFAULT_ALLOWED_ANCESTORS)||Zn.open(Ci.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Zn.open(Ci.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Zn.open({displayMessage:Ci.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Ci.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}default:Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,It.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ks.setThemeMode(e.themeMode),e.themeVariables&&Ks.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");V.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&V.setActiveCaipNetwork(n)}initializeConnectionController(e){Ee.initialize(e.adapters??[]),Ee.setWcBasic(e.basic??!1)}initializeConnectorController(){ve.initialize(this.chainNamespaces)}initializeProjectSettings(e){de.setProjectId(e.projectId),de.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){de.setDebug(e.debug!==!1),de.setEnableWalletConnect(e.enableWalletConnect!==!1),de.setEnableWalletGuide(e.enableWalletGuide!==!1),de.setEnableWallets(e.enableWallets!==!1),de.setEIP6963Enabled(e.enableEIP6963!==!1),de.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),de.setEnableReconnect(e.enableReconnect!==!1),de.setEnableAuthLogger(e.enableAuthLogger!==!1),de.setCustomRpcUrls(e.customRpcUrls),de.setEnableEmbedded(e.enableEmbedded),de.setAllWallets(e.allWallets),de.setIncludeWalletIds(e.includeWalletIds),de.setExcludeWalletIds(e.excludeWalletIds),de.setFeaturedWalletIds(e.featuredWalletIds),de.setTokens(e.tokens),de.setTermsConditionsUrl(e.termsConditionsUrl),de.setPrivacyPolicyUrl(e.privacyPolicyUrl),de.setCustomWallets(e.customWallets),de.setFeatures(e.features),de.setAllowUnsupportedChain(e.allowUnsupportedChain),de.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),de.setPreferUniversalLinks(e.experimental_preferUniversalLinks),de.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),de.setMetadata(e.metadata),de.setDisableAppend(e.disableAppend),de.setEnableEmbedded(e.enableEmbedded),de.setSIWX(e.siwx),!e.projectId){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===he.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");de.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return Me.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const s=Iu.getUnsupportedNetwork(`${n}:${e}`);V.setActiveCaipNetwork(s)}}getDefaultNetwork(){return Iu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Iu.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Iu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(i=>i.id===e.defaultNetwork?.id);return n?Iu.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let s={connections:[]};const i=this.getAdapter(e);return(V.state.chains.get(e)?.accountState?.caipAddress||!de.state.enableReconnect)&&i?.disconnect&&(s=await i.disconnect({id:n})),this.setLoading(!1,e),s}catch(s){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${s.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=V.state.activeChain,n=this.getAdapter(e),s=this.getCaipNetwork(e)?.id,i=Ee.getConnections(e),r=this.remoteFeatures.multiWallet,c=i.length>0;if(!n)throw new Error("Adapter not found");const l=await n.connectWalletConnect(s);(!c||!r)&&this.close(),this.setClientId(l?.clientId||null),me.setConnectedNamespaces([...V.state.chains.keys()]),await this.syncWalletConnectAccount(),await Rr.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:s,type:i,provider:r,chain:c,caipNetwork:l,socialUri:f})=>{const d=V.state.activeChain,h=c||d,g=this.getAdapter(h);if(c&&c!==d&&!l){const w=this.getCaipNetworks().find(v=>v.chainNamespace===c);w&&this.setCaipNetwork(w)}if(!h)throw new Error("connectExternal: namespace not found");if(!g)throw new Error("connectExternal: adapter not found");const m=this.getCaipNetwork(h),y=await g.connect({id:e,address:n,info:s,type:i,provider:r,socialUri:f,chainId:l?.id||m?.id,rpcUrl:l?.rpcUrls?.default?.http?.[0]||m?.rpcUrls?.default?.http?.[0]});if(y)return me.addConnectedNamespace(h),this.syncProvider({...y,chainNamespace:h}),this.setStatus("connected",h),this.syncConnectedWalletInfo(h),me.removeDisconnectedConnectorId(e,h),{address:y.address}},reconnectExternal:async({id:e,info:n,type:s,provider:i})=>{const r=V.state.activeChain,c=this.getAdapter(r);if(!r)throw new Error("reconnectExternal: namespace not found");if(!c)throw new Error("reconnectExternal: adapter not found");c?.reconnect&&(await c?.reconnect({id:e,info:n,type:s,provider:i,chainId:this.getCaipNetwork()?.id}),me.addConnectedNamespace(r),this.syncConnectedWalletInfo(r))},disconnect:async e=>{const{id:n,chainNamespace:s,initialDisconnect:i}=e||{},r=s||V.state.activeChain,c=ve.getConnectorId(r),l=n===he.CONNECTOR_ID.AUTH||c===he.CONNECTOR_ID.AUTH,f=n===he.CONNECTOR_ID.WALLET_CONNECT||c===he.CONNECTOR_ID.WALLET_CONNECT;try{const d=Array.from(V.state.chains.keys());let h=s?[s]:d;(f||l)&&(h=d);const g=h.map(async w=>{const v=ve.getConnectorId(w),E=await this.disconnectNamespace(w,n||v);E&&(l&&me.deleteConnectedSocialProvider(),E.connections.forEach(C=>{me.addDisconnectedConnectorId(C.connectorId,w)})),i&&this.onDisconnectNamespace({chainNamespace:w,closeModal:!1})}),m=await Promise.allSettled(g);ht.resetSend(),Ee.resetWcConnection(),Rr.getSIWX()?.signOutOnDisconnect&&await Rr.clearSessions(),ve.setFilterByNamespace(void 0),Ee.syncStorageConnections();const y=m.filter(w=>w.status==="rejected");if(y.length>0)throw new Error(y.map(w=>w.reason.message).join(", "));It.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:s||"all"}})}catch(d){throw new Error(`Failed to disconnect chains: ${d.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=V.state.activeChain,s=this.getAdapter(V.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!s)throw new Error("signMessage: adapter not found");return(await s?.signMessage({message:e,address:Oe.state.address,provider:Yt.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(yt.SEND_SUPPORTED_NAMESPACES.includes(n)){const s=this.getAdapter(n);if(!s)throw new Error("sendTransaction: adapter not found");const i=Yt.getProvider(n);return(await s?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===he.CHAIN.EVM){const s=this.getAdapter(n);if(!s)throw new Error("estimateGas: adapter is required but got undefined");const i=Yt.getProvider(n),r=this.getCaipNetwork();if(!r)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await s?.estimateGas({...e,provider:i,caipNetwork:r}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=V.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Oe.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),Oe.state.profileImage||!1},getEnsAddress:async e=>await _a.resolveReownName(e),writeContract:async e=>{const n=V.state.activeChain,s=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!s)throw new Error("writeContract: adapter is required but got undefined");const i=this.getCaipNetwork(),r=this.getCaipAddress(),c=Yt.getProvider(n);if(!i||!r)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await s?.writeContract({...e,caipNetwork:i,provider:c,caipAddress:r}))?.hash},parseUnits:(e,n)=>{const s=this.getAdapter(V.state.activeChain);if(!s)throw new Error("parseUnits: adapter is required but got undefined");return s?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const s=this.getAdapter(V.state.activeChain);if(!s)throw new Error("formatUnits: adapter is required but got undefined");return s?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Oe.state.address||this.updateNativeBalance(Oe.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ee.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Yt.getProviderId(V.state.activeChain)===Uc.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Yt.getProvider(n),r=Yt.getProviderId(n);if(e.chainNamespace===V.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:i,providerType:r});else if(this.setCaipNetwork(e),r===Uc.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const c=this.getAddressByChainNamespace(n);c&&this.syncAccount({address:c,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const s=n.chains||[],i=n.accounts.map(r=>{const{chainId:c,chainNamespace:l}=Qs.parseCaipAddress(r);return`${l}:${c}`});return Array.from(new Set([...s,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,s)=>{const i=e?.find(r=>r.namespace===s);return i?(i.construct({namespace:s,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[s]=i):n[s]=new Aoe({namespace:s,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const s=me.getConnectionStatus();de.state.enableReconnect===!1?this.setStatus("disconnected",e):s==="connected"?this.setStatus("connecting",e):s==="disconnected"?(me.clearAddressCache(),this.setStatus(s,e)):this.setStatus(s,e),n.on("switchNetwork",({address:i,chainId:r})=>{const c=this.getCaipNetworks().find(d=>d.id.toString()===r.toString()||d.caipNetworkId.toString()===r.toString()),l=V.state.activeChain===e,f=V.state.chains.get(e)?.accountState?.address;if(c){const d=l&&i?i:f;d&&this.syncAccount({address:d,chainId:c.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)}),n.on("disconnect",()=>{const i=this.remoteFeatures.multiWallet,r=Array.from(Ee.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!i||r.length===0})}),n.on("connections",i=>{this.setConnections(i,e)}),n.on("pendingTransactions",()=>{const i=Oe.state.address,r=V.state.activeCaipNetwork;!i||!r?.id||this.updateNativeBalance(i,r.id,r.chainNamespace)}),n.on("accountChanged",({address:i,chainId:r,connector:c})=>{const l=V.state.activeChain===e;c?.provider&&(this.syncProvider({id:c.id,type:c.type,provider:c.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&r?this.syncAccount({address:i,chainId:r,chainNamespace:e}):l&&V.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:V.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,r,e),me.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Ee.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===he.CHAIN.EVM&&Me.isSafeApp()&&ve.setConnectorId(he.CONNECTOR_ID.SAFE,e);const n=ve.getConnectorId(e);switch(this.setStatus("connecting",e),n){case he.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case he.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:s}=e||{};V.resetAccount(n),V.resetNetwork(n),me.removeConnectedNamespace(n);const i=Array.from(V.state.chains.keys());(n?[n]:i).forEach(c=>me.addDisconnectedConnectorId(ve.getConnectorId(c)||"",c)),ve.removeConnectorId(n),Yt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),s!==!1&&st.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getCaipAddress(e),s=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!n,caipNetwork:s,getConnectorStorageInfo(i){const c=me.getConnections()[e]??[];return{hasDisconnected:me.isConnectorDisconnected(i,e),hasConnected:c.some(l=>Zs.isLowerCaseMatch(l.connectorId,i))}}})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),s=ve.getConnectorId(e),i=this.getCaipNetwork(e),c=ve.getConnectors(e).find(l=>l.id===s);try{if(!n||!c)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const l=await n?.syncConnection({namespace:e,id:c.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});l?(this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async s=>{const i=this.getAdapter(s);if(!i)return;const r=this.universalProvider?.session?.namespaces?.[s]?.accounts||[],c=V.state.activeCaipNetwork?.id,l=r.find(f=>{const{chainId:d}=Qs.parseCaipAddress(f);return d===c?.toString()})||r[0];if(l){const f=Qs.validateCaipAddress(l),{chainId:d,address:h}=Qs.parseCaipAddress(f);if(Yt.setProviderId(s,Uc.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&V.state.activeCaipNetwork&&i.namespace!==he.CHAIN.EVM){const g=i.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:V.state.activeCaipNetwork});Yt.setProvider(s,g)}else Yt.setProvider(s,this.universalProvider);ve.setConnectorId(he.CONNECTOR_ID.WALLET_CONNECT,s),me.addConnectedNamespace(s),await this.syncAccount({address:h,chainId:d,chainNamespace:s})}else e.includes(s)&&this.setStatus("disconnected",s);this.syncConnectedWalletInfo(s),await V.setApprovedCaipNetworksData(s)});await Promise.all(n)}syncProvider({type:e,provider:n,id:s,chainNamespace:i}){Yt.setProviderId(i,e),Yt.setProvider(i,n),ve.setConnectorId(s,i)}async syncAccount(e){const n=e.chainNamespace===V.state.activeChain,s=V.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:r,chainNamespace:c}=e,{chainId:l}=me.getActiveNetworkProps(),f=r||l,d=V.state.activeCaipNetwork?.name===he.UNSUPPORTED_NETWORK_NAME,h=V.getNetworkProp("supportsAllNetworks",c);if(this.setStatus("connected",c),!(d&&!h)&&f){let g=this.getCaipNetworks().find(w=>w.id.toString()===f.toString()),m=this.getCaipNetworks().find(w=>w.chainNamespace===c);if(!h&&!g&&!m){const w=this.getApprovedCaipNetworkIds()||[],v=w.find(C=>Qs.parseCaipNetworkId(C)?.chainId===f.toString()),E=w.find(C=>Qs.parseCaipNetworkId(C)?.chainNamespace===c);g=this.getCaipNetworks().find(C=>C.caipNetworkId===v),m=this.getCaipNetworks().find(C=>C.caipNetworkId===E||"deprecatedCaipNetworkId"in C&&C.deprecatedCaipNetworkId===E)}const y=g||m;y?.chainNamespace===V.state.activeChain?de.state.enableNetworkSwitch&&!de.state.allowUnsupportedChain&&V.state.activeCaipNetwork?.name===he.UNSUPPORTED_NETWORK_NAME?V.showUnsupportedChainUI():this.setCaipNetwork(y):n||s&&this.setCaipNetworkOfNamespace(s,c),this.syncConnectedWalletInfo(c),Zs.isLowerCaseMatch(i,Oe.state.address)||this.syncAccountInfo(i,y?.id,c),n?await this.syncBalance({address:i,chainId:y?.id,chainNamespace:c}):await this.syncBalance({address:i,chainId:s?.id,chainNamespace:c})}}async syncAccountInfo(e,n,s){const i=this.getCaipAddress(s),r=n||i?.split(":")[1];if(!r)return;const c=`${s}:${r}:${e}`;this.setCaipAddress(c,s),await this.syncIdentity({address:e,chainId:r,chainNamespace:s})}async syncReownName(e,n){try{const s=await this.getReownName(e);if(s[0]){const i=s[0];this.setProfileName(i.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=ve.getConnectorId(e),s=Yt.getProviderId(e);if(s===Uc.CONNECTOR_TYPE_ANNOUNCED||s===Uc.CONNECTOR_TYPE_INJECTED){if(n){const r=this.getConnectors().find(c=>{const l=c.id===n,f=c.info?.rdns===n,d=c.connectors?.some(h=>h.id===n||h.info?.rdns===n);return l||f||!!d});if(r){const{info:c,name:l,imageUrl:f}=r,d=f||this.getConnectorImage(r);this.setConnectedWalletInfo({name:l,icon:d,...c},e)}}}else if(s===Uc.CONNECTOR_TYPE_WALLET_CONNECT){const i=Yt.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===he.CONNECTOR_ID.COINBASE_SDK||n===he.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(f=>f.id===n),r=i?.name||"Coinbase Wallet",c=i?.imageUrl||this.getConnectorImage(i),l=i?.info;this.setConnectedWalletInfo({...l,name:r,icon:c},e)}}async syncBalance(e){!vM.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(s=>s.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,s){const i=this.getAdapter(s),r=V.getCaipNetworkByNamespace(s,n);if(i){const c=await i.getBalance({address:e,chainId:n,caipNetwork:r,tokens:this.options.tokens});return this.setBalance(c.balance,c.symbol,s),c}}async initializeUniversalAdapter(){const e=Xae.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};de.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await Zm.init(n),de.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{_a.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{Ee.setUri(n)},onConnect:()=>{Ee.finalizeWcConnection()},onDisconnect:()=>{V.state.noAdapters&&this.resetAccount(e),Ee.resetWcConnection()},onChainChanged:n=>{const s=V.state.activeChain,i=s&&ve.state.activeConnectorIds[s]===he.CONNECTOR_ID.WALLET_CONNECT;if(s===e&&(V.state.noAdapters||i)){const r=this.getCaipNetworks().find(l=>l.id.toString()===n.toString()||l.caipNetworkId.toString()===n.toString()),c=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(n);return}c?.id.toString()!==r?.id.toString()&&c?.chainNamespace===r?.chainNamespace&&this.setCaipNetwork(r)}},onAccountsChanged:n=>{const s=V.state.activeChain,i=s&&ve.state.activeConnectorIds[s]===he.CONNECTOR_ID.WALLET_CONNECT;if(s===e&&(V.state.noAdapters||i)&&n.length>0){const r=n[0];this.syncAccount({address:r.address,chainId:r.chainId,chainNamespace:r.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&Me.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){It.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Ci.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[s,i]=n??[],{message:r,alertErrorKey:c}=i??{};if(s&&r&&!this.reportedAlertErrors[s]){const l=Ci.ALERT_ERRORS[c];l&&(Zn.open(l,"error"),this.reportedAlertErrors[s]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const s=e;s.namespace=n,s.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=s)}async open(e){if(await this.injectModalUi(),e?.uri&&Ee.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return st.open({...e,data:{swap:e.arguments}})}return st.open(e)}async close(){await this.injectModalUi(),st.close()}setLoading(e,n){st.setLoading(e,n)}async disconnect(e){await Ee.disconnect({namespace:e})}getSIWX(){return de.state.siwx}getError(){return""}getChainId(){return V.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(s=>s.id===e.id);if(!n){Zn.open(Ci.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await V.switchActiveNetwork(n)}getWalletProvider(){return V.state.activeChain?Yt.state.providers[V.state.activeChain]:null}getWalletProviderType(){return Yt.getProviderId(V.state.activeChain)}subscribeProviders(e){return Yt.subscribeProviders(e)}getThemeMode(){return Ks.state.themeMode}getThemeVariables(){return Ks.state.themeVariables}setThemeMode(e){Ks.setThemeMode(e),KM(Ks.state.themeMode)}setTermsConditionsUrl(e){de.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){de.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ks.setThemeVariables(e),voe(Ks.state.themeVariables)}subscribeTheme(e){return Ks.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Ee.subscribe(e):(Zn.open(he.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?V.state.chains.get(e)?.accountState?.connectedWalletInfo:Oe.state.connectedWalletInfo}getAccount(e){const n=e||V.state.activeChain,s=ve.getAuthConnector(n),i=V.getAccountData(n),r=me.getConnectedConnectorId(V.state.activeChain),c=Ee.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const l=c.flatMap(f=>f.accounts.map(({address:d,type:h})=>Me.createAccount(n,d,h||"eoa")));if(i)return{allAccounts:l,caipAddress:i.caipAddress,address:Me.getPlainAddress(i.caipAddress),isConnected:!!i.caipAddress,status:i.status,embeddedWalletInfo:s&&r===he.CONNECTOR_ID.AUTH?{user:i.user?{...i.user,username:me.getConnectedSocialUsername()}:void 0,authProvider:i.socialProvider||"email",accountType:Fr(n),isSmartAccountDeployed:!!i.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const s=()=>{const i=this.getAccount(n);i&&e(i)};n?V.subscribeChainProp("accountState",s,n):V.subscribe(s),ve.subscribe(s)}subscribeNetwork(e){return V.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Oe.subscribeKey("connectedWalletInfo",e,n):Oe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Oe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){V.subscribeKey("activeCaipNetwork",e)}getState(){return Aa.state}getRemoteFeatures(){return de.state.remoteFeatures}subscribeState(e){return Aa.subscribe(e)}subscribeRemoteFeatures(e){return de.subscribeKey("remoteFeatures",e)}showErrorMessage(e){$r.showError(e)}showSuccessMessage(e){$r.showSuccess(e)}getEvent(){return{...It.state}}subscribeEvents(e){return It.subscribe(e)}replace(e){ze.replace(e)}redirect(e){ze.push(e)}popTransactionStack(e){ze.popTransactionStack(e)}isOpen(){return st.state.open}isTransactionStackEmpty(){return ze.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){de.setFeatures(e)}updateRemoteFeatures(e){de.setRemoteFeatures(e)}updateOptions(e){const s={...de.state||{},...e};de.setOptions(s)}setConnectMethodsOrder(e){de.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){de.setWalletFeaturesOrder(e)}setCollapseWallets(e){de.setCollapseWallets(e)}setSocialsOrder(e){de.setSocialsOrder(e)}getConnectMethodsOrder(){return T2.getConnectOrderMethod(de.state.features,ve.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const s=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(i=>i.id===s.id)||V.addNetwork(s)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===n)&&V.removeNetwork(e,n)}}let n8=!1;class Doe extends Ioe{async open(e){ve.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&Ee.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!n8&&Me.isClient()){if(await Sh(()=>import("./basic-B6XQjn9W.js"),__vite__mapDeps([0,1])),await Sh(()=>import("./w3m-modal-DTuskpo5.js"),__vite__mapDeps([2,1])),!document.querySelector("w3m-modal")){const n=document.createElement("w3m-modal");!de.state.disableAppend&&!de.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",n)}n8=!0}}}const _oe="1.7.17";function Ooe(t){return new Doe({...t,basic:!0,sdkVersion:`html-core-${_oe}`})}class xx{constructor({appKit:e,provider:n,config:s}){this.appKit=e,this.provider=n,this.config=s}static async init(e){const n=await gre.init({projectId:e.projectId,metadata:e.metadata}),s={networks:e.networks.flatMap(r=>r.chains),projectId:e.projectId,metadata:e.metadata,universalProvider:n,manualWCControl:!0},i=Ooe(s);return new xx({appKit:i,provider:n,config:e})}async connect(){const e=this.config?.networks.reduce((n,s)=>(n[s.namespace]={...s||{},methods:s?.methods||[],events:s?.events||[],chains:s?.chains?.map(i=>i.caipNetworkId)||[]},n),{});try{await this.appKit.open();const n=await this.provider.connect({optionalNamespaces:e});if(!n)throw new Error("Error connecting to wallet: No session found");return await this.appKit.close(),{session:n}}catch(n){throw await this.appKit.close(),new Error(`Error connecting to wallet: ${n instanceof Error?n.message:"Unknown error"}`)}}async disconnect(){await this.appKit.disconnect(),await this.provider.disconnect()}async request(e,n){return await this.provider.request(e,n)}}var Moe=Object.defineProperty,Roe=Object.defineProperties,Poe=Object.getOwnPropertyDescriptors,Am=Object.getOwnPropertySymbols,XM=Object.prototype.hasOwnProperty,QM=Object.prototype.propertyIsEnumerable,s8=(t,e,n)=>e in t?Moe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,as=(t,e)=>{for(var n in e||(e={}))XM.call(e,n)&&s8(t,n,e[n]);if(Am)for(var n of Am(e))QM.call(e,n)&&s8(t,n,e[n]);return t},Na=(t,e)=>Roe(t,Poe(e)),$oe=(t,e)=>{var n={};for(var s in t)XM.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Am)for(var s of Am(t))e.indexOf(s)<0&&QM.call(t,s)&&(n[s]=t[s]);return n},ju=class ZM extends Error{constructor(e,n,s,i){super(e),this.message=e,this.code=n,this.data=s,this.cause=i,this.name="JsonRpcError",this.message=e,this.code=n,this.data=s,this.cause=i}static fromResponse(e){return new ZM(e.message,e.code,e.data)}toString(){return`${this.name} (${this.code}): ${this.message}${this.data?`: ${JSON.stringify(this.data)}`:""}`}},Uoe=(t=>(t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UserRejection=-32e3]="UserRejection",t[t.MethodAddressMismatch=-32001]="MethodAddressMismatch",t[t.MethodAccessDenied=-32002]="MethodAccessDenied",t[t.UnknownError=-31e3]="UnknownError",t[t.UserCanceled=-31001]="UserCanceled",t))(Uoe||{}),JM="asigna-stx",Kv=(t,e)=>new Promise(n=>{function s(i){i.data.source===JM&&i.data[e]&&(n(i.data[e]),window.removeEventListener("message",s))}window.addEventListener("message",s),window.top.postMessage(koe(t,e),"*")}),Loe={authenticationRequest:async t=>Kv(t,"authenticationRequest"),transactionRequest:async t=>Kv(t,"transactionRequest"),request:async(t,e)=>Kv(e,t)},koe=(t,e)=>({source:JM,[e]:t}),Boe=()=>{typeof window>"u"||window.top!==window.self&&(window.AsignaProvider=Loe)};Boe();var joe=[{id:"LeatherProvider",name:"Leather",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=",webUrl:"https://leather.io",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",mozillaAddOnsUrl:"https://leather.io/install-extension"},{id:"XverseProviders.BitcoinProvider",name:"Xverse Wallet",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==",webUrl:"https://xverse.app",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg",googlePlayStoreUrl:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",iOSAppStoreUrl:"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513",mozillaAddOnsUrl:"https://www.xverse.app/download"},{id:"AsignaProvider",name:"Asigna Multisig",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==",webUrl:"https://asigna.io",chromeWebStoreUrl:"https://stx.asigna.io/"},{id:"FordefiProviders.UtxoProvider",name:"Fordefi",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIiIGhlaWdodD0iNDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZmlsbD0iIzEwMTExNCIgZD0iTTAgMGg0MnY0MkgweiIvPgogIDxwYXRoIGQ9Ik0xOS40NyAyNi44OUg1djMuNTdhNC41NyA0LjU3IDAgMCAwIDQuNTggNC41N2g1LjgzbDQuMDYtOC4xNFoiIGZpbGw9IiM3OTk0RkYiLz4KICA8cGF0aCBkPSJNNSAxNy40aDI3LjU4bC0zLjIgNi43OEg1VjE3LjRaIiBmaWxsPSIjNDg2REZGIi8+CiAgPHBhdGggZD0iTTE0LjY3IDdINXY3LjY4aDMzVjdoLTkuNjd2NS43NGgtMlY3aC05LjY3djUuNzRoLTEuOTlWN1oiIGZpbGw9IiM1Q0QxRkEiLz4KPC9zdmc+Cg==",webUrl:"https://www.fordefi.com/",chromeWebStoreUrl:"https://chromewebstore.google.com/detail/fordefi/hcmehenccjdmfbojapcbcofkgdpbnlle"}],zoe={id:"WalletConnectProvider",name:"WalletConnect",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSJub25lIj48bWFzayBpZD0iYSIgd2lkdGg9IjQwMCIgaGVpZ2h0PSI0MDAiIHg9IjAiIHk9IjAiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHN0eWxlPSJtYXNrLXR5cGU6bHVtaW5hbmNlIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDQwMHY0MDBIMFYwWiIvPjwvbWFzaz48ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjMzM5NkZGIiBkPSJNNDAwIDQwMEgwVjBoNDAwdjQwMFoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTIyLjUyIDE0OC45N2M0Mi43OS00MS43MyAxMTIuMTctNDEuNzMgMTU0Ljk2IDBsNS4xNSA1LjAyYTUuMjUgNS4yNSAwIDAgMSAwIDcuNTVsLTE3LjYyIDE3LjE4YTIuNzkgMi43OSAwIDAgMS0zLjg3IDBsLTcuMDktNi45Yy0yOS44NS0yOS4xMi03OC4yNS0yOS4xMi0xMDguMSAwbC03LjYgNy40YTIuNzkgMi43OSAwIDAgMS0zLjg3IDBsLTE3LjYxLTE3LjE5YTUuMjUgNS4yNSAwIDAgMSAwLTcuNTVsNS42NS01LjUxWm0xOTEuNCAzNS41MiAxNS42OCAxNS4zYTUuMjUgNS4yNSAwIDAgMSAwIDcuNTVsLTcwLjcgNjguOTRhNS41OCA1LjU4IDAgMCAxLTcuNzUgMGwtNTAuMTgtNDguOTNhMS40IDEuNCAwIDAgMC0xLjk0IDBsLTUwLjE4IDQ4LjkzYTUuNTggNS41OCAwIDAgMS03Ljc0IDBsLTcwLjctNjguOTRhNS4yNSA1LjI1IDAgMCAxIDAtNy41NmwxNS42Ny0xNS4yOWE1LjU4IDUuNTggMCAwIDEgNy43NSAwbDUwLjE4IDQ4Ljk0Yy41NC41MiAxLjQuNTIgMS45NCAwbDUwLjE4LTQ4Ljk0YTUuNTggNS41OCAwIDAgMSA3Ljc0IDBsNTAuMTggNDguOTRjLjU0LjUyIDEuNC41MiAxLjk0IDBsNTAuMTgtNDguOTRhNS41OCA1LjU4IDAgMCAxIDcuNzUgMFoiLz48L2c+PC9zdmc+",webUrl:"https://walletconnect.com/",chromeWebStoreUrl:""},Sx="@stacks/connect",Hoe={addresses:{stx:[],btc:[]},version:"0.0.1"},i8=t=>[...new Map(t.map(e=>[e.address,e])).values()].map(e=>{var n=$oe(e,[]);return"publicKey"in n&&delete n.publicKey,"derivationPath"in n&&delete n.derivationPath,"tweakedPublicKey"in n&&delete n.tweakedPublicKey,n});function Foe(t){try{let e=ny()||Hoe,n=Na(as({},e),{updatedAt:Date.now(),addresses:as(as({},e.addresses),t.addresses&&{stx:t.addresses.stx&&i8([...e.addresses.stx,...t.addresses.stx]),btc:t.addresses.btc&&i8([...e.addresses.btc,...t.addresses.btc])})});localStorage.setItem(Sx,lp(_m(JSON.stringify(n))))}catch(e){console.warn("Failed to store data in localStorage:",e)}}function Voe(){try{localStorage.removeItem(Sx)}catch(t){console.warn("Failed to clear localStorage:",t)}}function ny(){try{let t=localStorage.getItem(Sx);return t?JSON.parse(m9(tl(t))):null}catch(t){return console.warn("Failed to get data from localStorage:",t),null}}function qoe(){let t=cD();t&&"disconnect"in t&&t.disconnect(),T9(),Voe(),new ace().store.deleteSessionData()}function eR(){let t=ny();return t?.addresses.stx.length>0||t?.addresses.btc.length>0}var Woe=["stx_signMessage","stx_signTransaction","stx_signStructuredMessage","stx_getAccounts","stx_getAddresses","stx_updateProfile","stx_transferStx","stx_transferSip10Ft","stx_transferSip9Nft","stx_callContract","stx_deployContract","sendTransfer","signPsbt","getAddresses"],_2={id:1,chainNamespace:"stacks",caipNetworkId:"stacks:1",name:"Stacks",nativeCurrency:{name:"STX",symbol:"STX",decimals:6},rpcUrls:{default:{http:["https://api.mainnet.hiro.so"]}}},Koe={projectId:"your_project_id",metadata:{name:"Universal Connector",description:"Universal Connector",url:"https://appkit.reown.com",icons:["https://appkit.reown.com/icon.png"]},networks:[{namespace:"stacks",chains:[_2],methods:Woe,events:["stx_chainChanged","stx_accountsChanged"]},{namespace:"bip122",chains:[GM],methods:["signMessage","sendTransfer","signPsbt","getAccountAddresses"],events:["bip122_addressesChanged"]}]};function r8(t){return{jsonrpc:"2.0",id:1,result:t}}var Goe=class{constructor(t){this.connector=t}async connect(){try{let{session:t}=await this.connector.connect();return t}catch(t){throw console.error(">> WalletConnectProvider connect error",t),t}}get stacksAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session,n=e?.sessionProperties.stacks_getAddresses,s=JSON.parse(n||"[]"),i=[...e.namespaces.stacks.accounts.map(r=>({address:r.split(":")[2],publicKey:""}))||[],...s||[]].sort(r=>r.publicKey?1:-1);return Array.from(new Map(i.map(r=>[r.address,r])).values())}get btcAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session,n=e?.sessionProperties.bip122_getAccountAddresses,s=JSON.parse(n||"{}"),i=e.namespaces.bip122.accounts.map(c=>({address:c.split(":")[2],publicKey:""})),r=[...s?.payment.map(c=>Na(as({},c),{purpose:"payment"}))||[],...s?.ordinal.map(c=>Na(as({},c),{purpose:"ordinal"}))||[],...i||[]].sort(c=>c.publicKey?1:-1).sort((c,l)=>c?.address.length-l?.address.length);return Array.from(new Map(r.map(c=>[c.address,c])).values())}async getAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session;e||(e=await this.connect());let n=this.stacksAddresses||[],s=this.btcAddresses||[];return{addresses:[...n,...s]}}validateRpcMethod(t){var e,n,s,i;if(["getAddresses","stx_getAccounts","stx_getAddresses"].includes(t))return;if(!((e=this.connector.provider)!=null&&e.session))throw new Error("WalletConnectProvider not connected. Please connect first.");let r=(n=this.connector.provider)==null?void 0:n.session.namespaces,c=((s=r.stacks)==null?void 0:s.methods)||[],l=((i=r.bip122)==null?void 0:i.methods)||[];if(![...c,...l].includes(t))throw new Error(`WalletConnectProvider does not support method ${t}. Please use a supported method.`)}getTargetCaipNetworkId(t){var e,n,s,i,r,c,l,f;if(["getAddresses","stx_getAccounts","stx_getAddresses"].includes(t)||(i=(s=(n=(e=this.connector.provider)==null?void 0:e.session)==null?void 0:n.namespaces)==null?void 0:s.stacks)!=null&&i.methods.includes(t))return _2.caipNetworkId;if((f=(l=(c=(r=this.connector.provider)==null?void 0:r.session)==null?void 0:c.namespaces)==null?void 0:l.bip122)!=null&&f.methods.includes(t))return GM.caipNetworkId;throw new Error(`WalletConnectProvider does not support method ${t}. Please use a supported method.`)}async request(t,e){var n,s,i,r;try{this.validateRpcMethod(t);let c=this.getTargetCaipNetworkId(t);switch(t){case"getAddresses":case"stx_getAddresses":case"stx_getAccounts":let l=await this.getAddresses();return r8(l);case"stx_signMessage":let f=((r=(i=(s=(n=this.connector.provider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i.stacks)==null?void 0:r.accounts[0]).split(":")[2],d=await this.connector.request({method:t,params:as({address:f},e)},c);return r8(d);default:return await this.connector.request({method:t,params:e},c)}}catch(c){throw console.error(">> WalletConnectProvider request error",c),c}}async disconnect(){await this.connector.disconnect()}},Yoe=async t=>{let e=await xx.init(Na(as({},Koe),{projectId:t})),n=new Goe(e);window.WalletConnectProvider=n};async function a8(t,e,n){var s;try{let i=await t.request(e,n);if("error"in i)throw ju.fromResponse(i.error);return i.result}catch(i){if(i instanceof ju)throw i;if("jsonrpc"in i)throw ju.fromResponse(i.error);let r=(s=i.code)!=null?s:-31e3;throw new ju(i.message,r,i.data,i)}}function Xoe(t){return t?async function(e,n,s){let i=await a8(e,n,s);if((n==="getAddresses"||n==="wallet_connect")&&"addresses"in i){let{stx:r,btc:c}=ice(i.addresses).reduce((l,f)=>(l[f.address.startsWith("S")?"stx":"btc"].push(f),l),{stx:[],btc:[]});Foe({addresses:{stx:r,btc:c}})}return i}:a8}async function Cx(...t){let{options:e,method:n,params:s}=Qoe(t),i=joe;e!=null&&e.walletConnectProjectId&&(await Yoe(e.walletConnectProjectId).catch(console.error),i=[...i,zoe]);let r=Object.assign({provider:cD(),defaultProviders:i,forceWalletSelect:!1,persistWalletSelect:!0,enableOverrides:!0,enableLocalStorage:!0},tce(e)),c=nce(r.enableOverrides,Xoe(r.enableLocalStorage));if(r.provider&&!r.forceWalletSelect){let{method:l,params:f}=l8(r.provider,n,s,r.enableOverrides);return await c(r.provider,l,f8(f))}if(typeof window<"u")return vB(),new Promise((l,f)=>{let d=document.createElement("connect-modal");d.defaultProviders=o8(r.approvedProviderIds,i),d.installedProviders=o8(r.approvedProviderIds,D9(i));let h=document.body.style.overflow;document.body.style.overflow="hidden";let g=()=>{d.remove(),document.body.style.overflow=h};d.callback=y=>{g();let w=xE(y),{method:v,params:E}=l8(w,n,s,r.enableOverrides),C=sce(r.persistWalletSelect,y);l(c(w,v,f8(E)).then(C))},d.cancelCallback=()=>{g(),f(new ju("User canceled the request",-31001))},document.body.appendChild(d);let m=y=>{y.key==="Escape"&&(document.removeEventListener("keydown",m),d.remove(),f(new ju("User canceled the request",-31001)))};document.addEventListener("keydown",m)})}function Qoe(t){return typeof t[0]=="string"?{method:t[0],params:t[1]}:{options:t[0],method:t[1],params:t[2]}}function o8(t,e){return t?e.filter(n=>t.includes(n.id)):e}function Zoe(t){return Cx(Na(as({},t),{forceWalletSelect:!0}),"getAddresses",void 0)}function I0(t){return Joe(t)||ece(t)}function Joe(t){return"signMultipleTransactions"in t&&"createRepeatInscriptions"in t&&!(t!=null&&t.isLeather)&&!(t!=null&&t.isFordefi)}function ece(t){return"isFordefi"in t&&!!t.isFordefi}function c8(t){return"isLeather"in t&&!!t.isLeather}function tce(t){if(t===void 0)return{};let e={};for(let[n,s]of Object.entries(t))s!==void 0&&(e[n]=s);return e}function nce(t,e){return t?async(n,s,i)=>{let r=await e(n,s,i),c=as({},r);return r!==null&&"txId"in r&&r.txId&&!("txid"in c)&&(c.txid=r.txId),r!==null&&"hex"in r&&r.hex&&typeof r.hex=="string"&&!("psbt"in c)&&(c.psbt=oD.encode(tl(r.hex))),c}:e}function l8(t,e,n,s=!0){if(!s)return{method:e,params:n};if(I0(t)&&["getAddresses","stx_getAddresses"].includes(e))return{method:"wallet_connect",params:n};if(I0(t)&&e==="sendTransfer"){let i=Na(as({},n),{recipients:n.recipients.map(r=>Na(as({},r),{amount:Number(r.amount)})),network:void 0});return{method:e,params:i}}if(I0(t)&&e==="signPsbt"){let i=n.signInputs;if(!i)return{method:e,params:n};let r={};for(let l of i)typeof l!="number"&&l.address&&(r[l.address]||(r[l.address]=[]),r[l.address].push(l.index));let c={psbt:n.psbt,signInputs:r,broadcast:n.broadcast};return{method:e,params:c}}if(!I0(t)&&e==="stx_signMessage"){let i=as({},n);return delete i.publicKey,{method:e,params:i}}if(c8(t)&&e==="sendTransfer"){let i=Na(as({},n),{recipients:n.recipients.map(r=>Na(as({},r),{amount:r.amount.toString()}))});return{method:e,params:i}}if(c8(t)&&e==="signPsbt"){let i={hex:lp(oD.decode(n.psbt)),signAtIndex:n.signInputs.map(r=>typeof r=="number"?r:r.index),allowedSighash:n.allowedSighash,broadcast:n.broadcast,network:n.network};return{method:e,params:i}}return{method:e,params:n}}var u8=["stx-postcondition","ft-postcondition","nft-postcondition"];function f8(t){if(!t||typeof t!="object")return t;let e=as({},t);for(let[n,s]of Object.entries(t)){if(typeof s=="bigint"){e[n]=s.toString();continue}if(s){if(Array.isArray(s)){e[n]=s.map(i=>typeof i=="bigint"?i.toString():!i||typeof i!="object"||!("type"in i)?i:u8.includes(i.type)?wN(i):vN(i));continue}typeof s=="object"&&"type"in s&&(e[n]=u8.includes(s.type)?wN(s):vN(s))}}return JSON.parse(JSON.stringify(e))}function sce(t,e){return function(n){if(t)try{N9(e)}catch{}return n}}function ice(t){return t.slice().sort((e,n)=>{let s="purpose"in e&&e.purpose==="payment",i="purpose"in n&&n.purpose==="payment";return s&&!i?-1:!s&&i?1:0})}typeof window<"u"&&(window.__CONNECT_VERSION__="__VERSION__");var rce="blockstack-session",ace=class{constructor(t){t!=null&&t.appConfig&&(this.appConfig=t.appConfig),typeof window>"u"&&typeof self>"u"?this.store=new oce:this.store=new cce}makeAuthRequestToken(){}generateAndStoreTransitKey(){}getAuthResponseToken(){}isSignInPending(){return!1}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(){return Promise.resolve(this.loadUserData())}loadUserData(){let t=this.store.getSessionData().userData;if(!t)throw new gE("No user data found. Did the user sign in?");return t}encryptContent(){}decryptContent(){}signUserOut(t){this.store.deleteSessionData(),t&&typeof location<"u"&&location.href&&(location.href=t)}},tR=class{constructor(t){t&&this.setSessionData(t)}getSessionData(){throw new Error("Abstract class")}setSessionData(t){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}},oce=class extends tR{constructor(t){super(t),this.sessionData||this.setSessionData({})}getSessionData(){if(!this.sessionData)throw new gE("No session data was found.");return this.sessionData}setSessionData(t){return this.sessionData=t,!0}deleteSessionData(){return this.setSessionData({}),!0}},cce=class extends tR{constructor(t){var e;super(t),this.key=typeof((e=t?.storeOptions)==null?void 0:e.localStorageKey)=="string"?t.storeOptions.localStorageKey:rce,localStorage.getItem(this.key)||this.setSessionData({})}getSessionData(){let t=localStorage.getItem(this.key);if(!t)throw new gE("No session data was found in localStorage");return JSON.parse(t)}setSessionData(t){return localStorage.setItem(this.key,JSON.stringify(t)),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData({}),!0}},lce=(t=>(t.ContractCall="contract_call",t.ContractDeploy="smart_contract",t.STXTransfer="token_transfer",t))(lce||{}),uce=(t=>(t.BUFFER="buffer",t.UINT="uint",t.INT="int",t.PRINCIPAL="principal",t.BOOL="bool",t))(uce||{}),fce=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ALL=1]="ALL",t[t.NONE=2]="NONE",t[t.SINGLE=3]="SINGLE",t[t.ANYONECANPAY=128]="ANYONECANPAY",t))(fce||{});const dce=async(t,e)=>{try{if(eR()){const s=ny();if(s?.addresses?.stx?.[0]?.address){t(s.addresses.stx[0].address);return}}const n=await Zoe();if(n?.addresses?.stx?.[0]?.address){const s=n.addresses.stx[0].address;t(s)}}catch(n){console.error("Wallet connection error:",n),e&&e()}},hce=()=>{qoe()},pce=()=>eR(),gce=()=>ny()?.addresses?.stx?.[0]?.address||null,nR="ST28MDT9SAV31XJ73M2W3W5DVC1NWHYX713Q6SEP5",sR="quest-nft",mce=async()=>{try{const t=await Cx("stx_callContract",{contract:`${nR}.${sR}`,functionName:"mint-quest-pass",functionArgs:[],postConditionMode:am.Allow});return console.log("Quest Pass minted, txId:",t.txid),{success:!0,txId:t.txid,message:"Quest Pass NFT minted successfully!"}}catch(t){throw console.error("Error minting Quest Pass:",t),t}},iR=async t=>{try{const e=await Cx("stx_callContract",{contract:`${nR}.${sR}`,functionName:"mint-quest-badge",functionArgs:[Rj(t)],postConditionMode:am.Allow});return console.log(`Quest Badge Level ${t} minted, txId:`,e.txid),{success:!0,txId:e.txid,message:`Quest Badge Level ${t} minted successfully!`}}catch(e){throw console.error(`Error minting Quest Badge Level ${t}:`,e),e}},Ax=()=>{const{walletConnected:t,walletAddress:e,connectWallet:n,disconnectWallet:s}=Yo();Ta.useEffect(()=>{if(pce()){const l=gce();l&&n(l)}},[]);const i=async()=>{await dce(l=>{n(l)},()=>{console.log("Wallet connection cancelled")})},r=()=>{hce(),s()},c=l=>l?`${l.slice(0,6)}...${l.slice(-4)}`:"";return G.jsx("div",{className:"flex items-center gap-4",children:t?G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("div",{className:"bg-game-blue/20 border-2 border-game-yellow px-4 py-2 rounded-lg",children:G.jsx("span",{className:"font-retro text-sm",children:c(e)})}),G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-red-700 transition-all",children:"Disconnect"})]}):G.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"flex items-center gap-2 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:[G.jsx(u9,{}),"Connect Wallet"]})})},yce=({onStartGame:t,onMintPass:e})=>{const{walletConnected:n,questPassMinted:s}=Yo();return G.jsxs("div",{className:"min-h-screen bg-game-dark flex flex-col items-center justify-center p-8",children:[G.jsxs(Pe.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[G.jsx(Pe.h1,{className:"font-pixel text-4xl md:text-6xl text-game-yellow text-shadow-glow mb-4",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),G.jsx(Pe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"font-retro text-xl text-white mb-8 max-w-2xl",children:"A blockchain mining adventure on Stacks (Bitcoin Layer 2)"}),G.jsx("div",{className:"mb-12 flex justify-center",children:G.jsx(Ax,{})}),G.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-8 mb-8 max-w-3xl",children:[G.jsx("h2",{className:"font-pixel text-2xl text-game-yellow mb-6",children:"How to Play"}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[G.jsxs("div",{className:"flex items-start gap-3",children:[G.jsx(dE,{className:"text-game-yellow text-3xl mt-1"}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Physics Shooting"}),G.jsx("p",{className:"font-retro text-gray-300",children:"Drag and release to launch projectiles! Destroy blocks with realistic physics like Angry Birds"})]})]}),G.jsxs("div",{className:"flex items-start gap-3",children:[G.jsx(hE,{className:"text-blue-400 text-3xl mt-1"}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Level Up"}),G.jsx("p",{className:"font-retro text-gray-300",children:"Earn XP from mining. Every 500 XP = Level Up!"})]})]}),G.jsxs("div",{className:"flex items-start gap-3",children:[G.jsx(gb,{className:"text-green-400 text-3xl mt-1"}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Mint NFTs"}),G.jsx("p",{className:"font-retro text-gray-300",children:"Get Quest Pass to start, then mint Quest Badges as you level up"})]})]}),G.jsxs("div",{className:"flex items-start gap-3",children:[G.jsx(O1,{className:"text-purple-400 text-3xl mt-1"}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Compete"}),G.jsx("p",{className:"font-retro text-gray-300",children:"Climb the leaderboard and prove you're the ultimate miner!"})]})]})]})]}),G.jsxs("div",{className:"flex flex-col md:flex-row gap-6 justify-center items-center",children:[G.jsxs(Pe.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t("physics"),disabled:!n,className:`flex items-center gap-3 px-8 py-4 rounded-lg font-pixel text-lg transition-all ${n?"bg-game-yellow text-game-dark hover:box-shadow-neon cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[G.jsx(O1,{}),"Play Physics Mode"]}),G.jsxs(Pe.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t("classic"),disabled:!n,className:`flex items-center gap-3 px-8 py-4 rounded-lg font-pixel text-sm transition-all ${n?"bg-purple-600 text-white hover:bg-purple-700 cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[G.jsx(O1,{}),"Classic Mode"]}),n&&!s&&G.jsxs(Pe.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e,className:"flex items-center gap-3 bg-green-600 text-white px-8 py-4 rounded-lg font-pixel text-lg hover:bg-green-700 transition-all",children:[G.jsx(gb,{}),"Mint Quest Pass"]})]}),!n&&G.jsx(Pe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"font-retro text-gray-400 mt-6",children:" Connect your wallet to start playing"})]}),G.jsx(Pe.footer,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"absolute bottom-4 text-center font-retro text-gray-500",children:"Built on Stacks  Powered by Bitcoin"})]})},wce=({onLevelUp:t})=>{const{mineBlock:e,minedBlocks:n}=Yo(),[s,i]=pe.useState(null),[r,c]=pe.useState({}),l=10,f=Array.from({length:l*l},(m,y)=>y),d=m=>{if(n.includes(m))return;const y=e(m);y&&(i(m),c(w=>({...w,[m]:y.result})),setTimeout(()=>{i(null),y.levelUp&&t(y.newLevel)},800))},h=m=>{const y=r[m];if(!y)return"?";switch(y){case"coin":return G.jsx(dE,{className:"text-yellow-400 text-2xl"});case"crystal":return G.jsx(hE,{className:"text-blue-400 text-2xl"});case"trap":return G.jsx(G6,{className:"text-red-500 text-2xl"});case"empty":return G.jsx("span",{className:"text-gray-500 text-2xl",children:""});default:return"?"}},g=m=>{if(!n.includes(m))return"bg-gradient-to-br from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700";switch(r[m]){case"coin":return"bg-gradient-to-br from-yellow-600 to-yellow-800";case"crystal":return"bg-gradient-to-br from-blue-600 to-blue-800";case"trap":return"bg-gradient-to-br from-red-600 to-red-800";case"empty":return"bg-gradient-to-br from-gray-600 to-gray-800";default:return"bg-gray-700"}};return G.jsx("div",{className:"flex justify-center items-center p-4",children:G.jsx("div",{className:"grid grid-cols-10 gap-1 md:gap-2 max-w-4xl",children:f.map(m=>{const y=n.includes(m),w=s===m;return G.jsx(Pe.button,{onClick:()=>d(m),disabled:y,className:`
                w-10 h-10 md:w-14 md:h-14 lg:w-16 lg:h-16
                rounded-lg border-2 border-game-yellow/30
                flex items-center justify-center
                transition-all duration-300
                ${g(m)}
                ${y?"cursor-not-allowed":"cursor-pointer hover:border-game-yellow"}
                ${w?"border-game-yellow box-shadow-neon":""}
              `,whileHover:y?{}:{scale:1.1},whileTap:y?{}:{scale:.9},animate:w?{rotateY:[0,180],scale:[1,1.2,1]}:{},transition:{duration:.6},children:G.jsx(wh,{mode:"wait",children:y?G.jsx(Pe.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},children:h(m)},"result"):G.jsx(Pe.span,{className:"text-game-yellow text-2xl md:text-3xl font-pixel",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:"?"},"question")})},m)})})})},rR=({onMintBadge:t})=>{const{coins:e,crystals:n,traps:s,level:i,xp:r,questBadges:c}=Yo(),l=i*500,f=r/l*100;return G.jsxs("div",{className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-6 w-full max-w-md",children:[G.jsx("h2",{className:"font-pixel text-xl text-game-yellow mb-6 text-center",children:"Inventory"}),G.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[G.jsxs(Pe.div,{whileHover:{scale:1.05},className:"bg-yellow-900/30 border border-yellow-600 rounded-lg p-4 flex items-center gap-3",children:[G.jsx(dE,{className:"text-yellow-400 text-3xl"}),G.jsxs("div",{children:[G.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Coins"}),G.jsx("p",{className:"font-pixel text-xl text-white",children:e})]})]}),G.jsxs(Pe.div,{whileHover:{scale:1.05},className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4 flex items-center gap-3",children:[G.jsx(hE,{className:"text-blue-400 text-3xl"}),G.jsxs("div",{children:[G.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Crystals"}),G.jsx("p",{className:"font-pixel text-xl text-white",children:n})]})]}),G.jsxs(Pe.div,{whileHover:{scale:1.05},className:"bg-red-900/30 border border-red-600 rounded-lg p-4 flex items-center gap-3",children:[G.jsx(G6,{className:"text-red-400 text-3xl"}),G.jsxs("div",{children:[G.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Traps"}),G.jsx("p",{className:"font-pixel text-xl text-white",children:s})]})]}),G.jsxs(Pe.div,{whileHover:{scale:1.05},className:"bg-purple-900/30 border border-purple-600 rounded-lg p-4 flex items-center gap-3",children:[G.jsx(Q6,{className:"text-purple-400 text-3xl"}),G.jsxs("div",{children:[G.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Level"}),G.jsx("p",{className:"font-pixel text-xl text-white",children:i})]})]})]}),G.jsxs("div",{className:"mb-6",children:[G.jsxs("div",{className:"flex justify-between items-center mb-2",children:[G.jsx("span",{className:"font-retro text-sm text-gray-300",children:"XP Progress"}),G.jsxs("span",{className:"font-retro text-sm text-game-yellow",children:[r," / ",l]})]}),G.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 overflow-hidden border border-game-yellow/50",children:G.jsx(Pe.div,{className:"bg-gradient-to-r from-game-yellow to-yellow-600 h-full",initial:{width:0},animate:{width:`${f}%`},transition:{duration:.5}})})]}),c.length>0&&G.jsxs("div",{className:"mb-4",children:[G.jsxs("h3",{className:"font-pixel text-sm text-game-yellow mb-3 flex items-center gap-2",children:[G.jsx(l9,{className:"text-yellow-400"}),"Quest Badges"]}),G.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((d,h)=>G.jsx(Pe.div,{initial:{scale:0},animate:{scale:1},className:"bg-gradient-to-br from-yellow-600 to-orange-600 border-2 border-yellow-400 rounded-lg px-3 py-2",children:G.jsxs("span",{className:"font-pixel text-xs text-white",children:["Lvl ",d.level]})},h))})]}),i>c.length&&G.jsxs(Pe.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:from-green-500 hover:to-green-600 transition-all border-2 border-green-400",children:[" Mint Level ",i," Badge"]})]})},aR=({isOpen:t,level:e,onClose:n,onMintBadge:s})=>G.jsx(wh,{children:t&&G.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:G.jsxs(Pe.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",duration:.8},className:"bg-gradient-to-br from-game-dark to-purple-900 border-4 border-game-yellow rounded-lg p-8 max-w-md w-full text-center relative overflow-hidden",children:[[...Array(20)].map((i,r)=>G.jsx(Pe.div,{className:"absolute",initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:Math.random()*400-200,y:Math.random()*400-200},transition:{duration:2,delay:Math.random()*.5,repeat:1/0,repeatDelay:Math.random()*2},children:G.jsx(o9,{className:"text-game-yellow"})},r)),G.jsx(Pe.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"relative z-10",children:G.jsx(Q6,{className:"text-8xl text-game-yellow mx-auto mb-4"})}),G.jsx(Pe.h2,{className:"font-pixel text-3xl text-game-yellow mb-2 relative z-10",animate:{scale:[1,1.05,1]},transition:{duration:.5,repeat:1/0},children:"LEVEL UP!"}),G.jsxs(Pe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"font-retro text-2xl text-white mb-6 relative z-10",children:["You've reached Level ",e,"!"]}),G.jsxs(Pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-game-blue/20 border border-game-yellow/50 rounded-lg p-4 mb-6 relative z-10",children:[G.jsx(pE,{className:"text-yellow-400 text-4xl mx-auto mb-2"}),G.jsxs("p",{className:"font-retro text-gray-300",children:["Congratulations! You can now mint your Level ",e," Quest Badge NFT to commemorate this achievement!"]})]}),G.jsxs("div",{className:"flex gap-4 relative z-10",children:[G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Continue"}),G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n(),s()},className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:from-green-500 hover:to-green-600 transition-all border-2 border-green-400",children:"Mint Badge"})]})]})})}),Nx=({isOpen:t,onClose:e,type:n,level:s,onConfirm:i})=>{const[r,c]=pe.useState(!1),[l,f]=pe.useState(!1),d=async()=>{c(!0),await i(),c(!1),f(!0),setTimeout(()=>{f(!1),e()},2e3)},h=n==="pass",g=h?"Mint Quest Pass":`Mint Quest Badge Level ${s}`,m=h?"Your Quest Pass NFT grants you access to the Block Quest adventure. This is your proof of participation on the blockchain!":`Congratulations on reaching Level ${s}! Mint your Quest Badge NFT to commemorate this achievement on the blockchain.`,y=h?G.jsx(gb,{className:"text-6xl"}):G.jsx(pE,{className:"text-6xl"});return G.jsx(wh,{children:t&&G.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:G.jsxs(Pe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:w=>w.stopPropagation(),className:"bg-game-dark border-4 border-game-yellow rounded-lg p-8 max-w-md w-full relative",children:[G.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:G.jsx(c9,{className:"text-2xl"})}),G.jsx("div",{className:"text-center",children:l?G.jsxs(Pe.div,{initial:{scale:0},animate:{scale:1},className:"text-green-400",children:[G.jsx(Pe.div,{animate:{rotate:360},transition:{duration:1},children:""}),G.jsx("h2",{className:"font-pixel text-2xl mt-4",children:"Success!"}),G.jsx("p",{className:"font-retro text-lg mt-2",children:"NFT Minted Successfully"})]}):G.jsxs(G.Fragment,{children:[G.jsx(Pe.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"text-game-yellow mb-4 flex justify-center",children:y}),G.jsx("h2",{className:"font-pixel text-2xl text-game-yellow mb-4",children:g}),G.jsx("p",{className:"font-retro text-gray-300 mb-6",children:m}),G.jsxs("div",{className:"bg-game-blue/20 border border-game-yellow/50 rounded-lg p-4 mb-6",children:[G.jsx("p",{className:"font-retro text-sm text-gray-400 mb-2",children:"NFT Details:"}),G.jsxs("ul",{className:"font-retro text-sm text-white space-y-1 text-left",children:[G.jsxs("li",{children:[" Type: ",h?"Quest Pass":"Quest Badge"]}),!h&&G.jsxs("li",{children:[" Level: ",s]}),G.jsx("li",{children:" Network: Stacks Testnet"}),G.jsx("li",{children:" Gas Fee: ~0.001 STX"})]})]}),G.jsxs("div",{className:"flex gap-4",children:[G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,disabled:r,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all disabled:opacity-50",children:"Cancel"}),G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,disabled:r,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:r?G.jsxs(G.Fragment,{children:[G.jsx(a9,{className:"animate-spin"}),"Minting..."]}):"Mint NFT"})]})]})})]})})})},vce=({onBackHome:t})=>{const{level:e,resetGame:n,walletAddress:s,mintQuestBadge:i}=Yo(),[r,c]=pe.useState(!1),[l,f]=pe.useState(!1),[d,h]=pe.useState(1),g=v=>{h(v),c(!0)},m=()=>{f(!0)},y=async()=>{try{(await iR(e)).success&&i(e)}catch(v){console.error("Error minting Quest Badge:",v)}},w=()=>{window.confirm("Are you sure you want to reset your progress? This cannot be undone.")&&n()};return G.jsxs("div",{className:"min-h-screen bg-game-dark p-4",children:[G.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:G.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4",children:[G.jsx(Pe.h1,{className:"font-pixel text-2xl md:text-3xl text-game-yellow",animate:{opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx(Ax,{}),G.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:"bg-orange-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-orange-700 transition-all flex items-center gap-2",children:[G.jsx(X6,{}),"Reset"]}),G.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-game-blue text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-blue-700 transition-all flex items-center gap-2",children:[G.jsx(Y6,{}),"Home"]})]})]})}),G.jsx("div",{className:"max-w-7xl mx-auto",children:G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[G.jsx("div",{className:"lg:col-span-2",children:G.jsxs(Pe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4",children:[G.jsx("h2",{className:"font-pixel text-xl text-game-yellow mb-4 text-center",children:"Mining Grid"}),G.jsx(wce,{onLevelUp:g}),G.jsx("p",{className:"font-retro text-center text-gray-400 mt-4",children:"Click blocks to mine treasures!  Coins   Crystals   Traps"})]})}),G.jsx(Pe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"flex justify-center lg:justify-start",children:G.jsx(rR,{onMintBadge:m})})]})}),G.jsx(aR,{isOpen:r,level:d,onClose:()=>c(!1),onMintBadge:m}),G.jsx(Nx,{isOpen:l,onClose:()=>f(!1),type:"badge",level:e,onConfirm:y})]})};var K0={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var bce=K0.exports,d8;function Ece(){return d8||(d8=1,(function(t,e){(function(s,i){t.exports=i()})(bce,function(){return(function(n){var s={};function i(r){if(s[r])return s[r].exports;var c=s[r]={i:r,l:!1,exports:{}};return n[r].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=n,i.c=s,i.d=function(r,c,l){i.o(r,c)||Object.defineProperty(r,c,{enumerable:!0,get:l})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,c){if(c&1&&(r=i(r)),c&8||c&4&&typeof r=="object"&&r&&r.__esModule)return r;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),c&2&&typeof r!="string")for(var f in r)i.d(l,f,(function(d){return r[d]}).bind(null,f));return l},i.n=function(r){var c=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(c,"a",c),c},i.o=function(r,c){return Object.prototype.hasOwnProperty.call(r,c)},i.p="",i(i.s=20)})([(function(n,s){var i={};n.exports=i,(function(){i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(c,l){var f,d;typeof l=="boolean"?(f=2,d=l):(f=1,d=!0);for(var h=f;h<arguments.length;h++){var g=arguments[h];if(g)for(var m in g)d&&g[m]&&g[m].constructor===Object&&(!c[m]||c[m].constructor===Object)?(c[m]=c[m]||{},i.extend(c[m],d,g[m])):c[m]=g[m]}return c},i.clone=function(c,l){return i.extend({},l,c)},i.keys=function(c){if(Object.keys)return Object.keys(c);var l=[];for(var f in c)l.push(f);return l},i.values=function(c){var l=[];if(Object.keys){for(var f=Object.keys(c),d=0;d<f.length;d++)l.push(c[f[d]]);return l}for(var h in c)l.push(c[h]);return l},i.get=function(c,l,f,d){l=l.split(".").slice(f,d);for(var h=0;h<l.length;h+=1)c=c[l[h]];return c},i.set=function(c,l,f,d,h){var g=l.split(".").slice(d,h);return i.get(c,l,0,-1)[g[g.length-1]]=f,f},i.shuffle=function(c){for(var l=c.length-1;l>0;l--){var f=Math.floor(i.random()*(l+1)),d=c[l];c[l]=c[f],c[f]=d}return c},i.choose=function(c){return c[Math.floor(i.random()*c.length)]},i.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},i.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},i.isFunction=function(c){return typeof c=="function"},i.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},i.isString=function(c){return toString.call(c)==="[object String]"},i.clamp=function(c,l,f){return c<l?l:c>f?f:c},i.sign=function(c){return c<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(c,l){return c=typeof c<"u"?c:0,l=typeof l<"u"?l:1,c+r()*(l-c)};var r=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[c]||(i.warn(c),i._warnedOnce[c]=!0)},i.deprecated=function(c,l,f){c[l]=i.chain(function(){i.warnOnce(" deprecated ",f)},c[l])},i.nextId=function(){return i._nextId++},i.indexOf=function(c,l){if(c.indexOf)return c.indexOf(l);for(var f=0;f<c.length;f++)if(c[f]===l)return f;return-1},i.map=function(c,l){if(c.map)return c.map(l);for(var f=[],d=0;d<c.length;d+=1)f.push(l(c[d]));return f},i.topologicalSort=function(c){var l=[],f=[],d=[];for(var h in c)!f[h]&&!d[h]&&i._topologicalSort(h,f,d,c,l);return l},i._topologicalSort=function(c,l,f,d,h){var g=d[c]||[];f[c]=!0;for(var m=0;m<g.length;m+=1){var y=g[m];f[y]||l[y]||i._topologicalSort(y,l,f,d,h)}f[c]=!1,l[c]=!0,h.push(c)},i.chain=function(){for(var c=[],l=0;l<arguments.length;l+=1){var f=arguments[l];f._chained?c.push.apply(c,f._chained):c.push(f)}var d=function(){for(var h,g=new Array(arguments.length),m=0,y=arguments.length;m<y;m++)g[m]=arguments[m];for(m=0;m<c.length;m+=1){var w=c[m].apply(h,g);typeof w<"u"&&(h=w)}return h};return d._chained=c,d},i.chainPathBefore=function(c,l,f){return i.set(c,l,i.chain(f,i.get(c,l)))},i.chainPathAfter=function(c,l,f){return i.set(c,l,i.chain(i.get(c,l),f))},i.setDecomp=function(c){i._decomp=c},i.getDecomp=function(){var c=i._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof Jn<"u"&&(c=Jn.decomp)}catch{c=null}return c}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r){var c={min:{x:0,y:0},max:{x:0,y:0}};return r&&i.update(c,r),c},i.update=function(r,c,l){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var f=0;f<c.length;f++){var d=c[f];d.x>r.max.x&&(r.max.x=d.x),d.x<r.min.x&&(r.min.x=d.x),d.y>r.max.y&&(r.max.y=d.y),d.y<r.min.y&&(r.min.y=d.y)}l&&(l.x>0?r.max.x+=l.x:r.min.x+=l.x,l.y>0?r.max.y+=l.y:r.min.y+=l.y)},i.contains=function(r,c){return c.x>=r.min.x&&c.x<=r.max.x&&c.y>=r.min.y&&c.y<=r.max.y},i.overlaps=function(r,c){return r.min.x<=c.max.x&&r.max.x>=c.min.x&&r.max.y>=c.min.y&&r.min.y<=c.max.y},i.translate=function(r,c){r.min.x+=c.x,r.max.x+=c.x,r.min.y+=c.y,r.max.y+=c.y},i.shift=function(r,c){var l=r.max.x-r.min.x,f=r.max.y-r.min.y;r.min.x=c.x,r.max.x=c.x+l,r.min.y=c.y,r.max.y=c.y+f}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r,c){return{x:r||0,y:c||0}},i.clone=function(r){return{x:r.x,y:r.y}},i.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},i.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},i.rotate=function(r,c,l){var f=Math.cos(c),d=Math.sin(c);l||(l={});var h=r.x*f-r.y*d;return l.y=r.x*d+r.y*f,l.x=h,l},i.rotateAbout=function(r,c,l,f){var d=Math.cos(c),h=Math.sin(c);f||(f={});var g=l.x+((r.x-l.x)*d-(r.y-l.y)*h);return f.y=l.y+((r.x-l.x)*h+(r.y-l.y)*d),f.x=g,f},i.normalise=function(r){var c=i.magnitude(r);return c===0?{x:0,y:0}:{x:r.x/c,y:r.y/c}},i.dot=function(r,c){return r.x*c.x+r.y*c.y},i.cross=function(r,c){return r.x*c.y-r.y*c.x},i.cross3=function(r,c,l){return(c.x-r.x)*(l.y-r.y)-(c.y-r.y)*(l.x-r.x)},i.add=function(r,c,l){return l||(l={}),l.x=r.x+c.x,l.y=r.y+c.y,l},i.sub=function(r,c,l){return l||(l={}),l.x=r.x-c.x,l.y=r.y-c.y,l},i.mult=function(r,c){return{x:r.x*c,y:r.y*c}},i.div=function(r,c){return{x:r.x/c,y:r.y/c}},i.perp=function(r,c){return c=c===!0?-1:1,{x:c*-r.y,y:c*r.x}},i.neg=function(r){return{x:-r.x,y:-r.y}},i.angle=function(r,c){return Math.atan2(c.y-r.y,c.x-r.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(0);(function(){r.create=function(f,d){for(var h=[],g=0;g<f.length;g++){var m=f[g],y={x:m.x,y:m.y,index:g,body:d,isInternal:!1};h.push(y)}return h},r.fromPath=function(f,d){var h=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,g=[];return f.replace(h,function(m,y,w){g.push({x:parseFloat(y),y:parseFloat(w)})}),r.create(g,d)},r.centre=function(f){for(var d=r.area(f,!0),h={x:0,y:0},g,m,y,w=0;w<f.length;w++)y=(w+1)%f.length,g=c.cross(f[w],f[y]),m=c.mult(c.add(f[w],f[y]),g),h=c.add(h,m);return c.div(h,6*d)},r.mean=function(f){for(var d={x:0,y:0},h=0;h<f.length;h++)d.x+=f[h].x,d.y+=f[h].y;return c.div(d,f.length)},r.area=function(f,d){for(var h=0,g=f.length-1,m=0;m<f.length;m++)h+=(f[g].x-f[m].x)*(f[g].y+f[m].y),g=m;return d?h/2:Math.abs(h)/2},r.inertia=function(f,d){for(var h=0,g=0,m=f,y,w,v=0;v<m.length;v++)w=(v+1)%m.length,y=Math.abs(c.cross(m[w],m[v])),h+=y*(c.dot(m[w],m[w])+c.dot(m[w],m[v])+c.dot(m[v],m[v])),g+=y;return d/6*(h/g)},r.translate=function(f,d,h){h=typeof h<"u"?h:1;var g=f.length,m=d.x*h,y=d.y*h,w;for(w=0;w<g;w++)f[w].x+=m,f[w].y+=y;return f},r.rotate=function(f,d,h){if(d!==0){var g=Math.cos(d),m=Math.sin(d),y=h.x,w=h.y,v=f.length,E,C,T,N;for(N=0;N<v;N++)E=f[N],C=E.x-y,T=E.y-w,E.x=y+(C*g-T*m),E.y=w+(C*m+T*g);return f}},r.contains=function(f,d){for(var h=d.x,g=d.y,m=f.length,y=f[m-1],w,v=0;v<m;v++){if(w=f[v],(h-y.x)*(w.y-y.y)+(g-y.y)*(y.x-w.x)>0)return!1;y=w}return!0},r.scale=function(f,d,h,g){if(d===1&&h===1)return f;g=g||r.centre(f);for(var m,y,w=0;w<f.length;w++)m=f[w],y=c.sub(m,g),f[w].x=g.x+y.x*d,f[w].y=g.y+y.y*h;return f},r.chamfer=function(f,d,h,g,m){typeof d=="number"?d=[d]:d=d||[8],h=typeof h<"u"?h:-1,g=g||2,m=m||14;for(var y=[],w=0;w<f.length;w++){var v=f[w-1>=0?w-1:f.length-1],E=f[w],C=f[(w+1)%f.length],T=d[w<d.length?w:d.length-1];if(T===0){y.push(E);continue}var N=c.normalise({x:E.y-v.y,y:v.x-E.x}),I=c.normalise({x:C.y-E.y,y:E.x-C.x}),S=Math.sqrt(2*Math.pow(T,2)),A=c.mult(l.clone(N),T),_=c.normalise(c.mult(c.add(N,I),.5)),D=c.sub(E,c.mult(_,S)),O=h;h===-1&&(O=Math.pow(T,.32)*1.75),O=l.clamp(O,g,m),O%2===1&&(O+=1);for(var P=Math.acos(c.dot(N,I)),U=P/O,L=0;L<O;L++)y.push(c.add(c.rotate(A,U*L),D))}return y},r.clockwiseSort=function(f){var d=r.mean(f);return f.sort(function(h,g){return c.angle(d,h)-c.angle(d,g)}),f},r.isConvex=function(f){var d=0,h=f.length,g,m,y,w;if(h<3)return null;for(g=0;g<h;g++)if(m=(g+1)%h,y=(g+2)%h,w=(f[m].x-f[g].x)*(f[y].y-f[m].y),w-=(f[m].y-f[g].y)*(f[y].x-f[m].x),w<0?d|=1:w>0&&(d|=2),d===3)return!1;return d!==0?!0:null},r.hull=function(f){var d=[],h=[],g,m;for(f=f.slice(0),f.sort(function(y,w){var v=y.x-w.x;return v!==0?v:y.y-w.y}),m=0;m<f.length;m+=1){for(g=f[m];h.length>=2&&c.cross3(h[h.length-2],h[h.length-1],g)<=0;)h.pop();h.push(g)}for(m=f.length-1;m>=0;m-=1){for(g=f[m];d.length>=2&&c.cross3(d[d.length-2],d[d.length-1],g)<=0;)d.pop();d.push(g)}return d.pop(),h.pop(),d.concat(h)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(2),f=i(7),d=i(0),h=i(1),g=i(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(y){var w={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},v=d.extend(w,y);return m(v,y),v},r.nextGroup=function(y){return y?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var m=function(y,w){w=w||{},r.set(y,{bounds:y.bounds||h.create(y.vertices),positionPrev:y.positionPrev||l.clone(y.position),anglePrev:y.anglePrev||y.angle,vertices:y.vertices,parts:y.parts||[y],isStatic:y.isStatic,isSleeping:y.isSleeping,parent:y.parent||y}),c.rotate(y.vertices,y.angle,y.position),g.rotate(y.axes,y.angle),h.update(y.bounds,y.vertices,y.velocity),r.set(y,{axes:w.axes||y.axes,area:w.area||y.area,mass:w.mass||y.mass,inertia:w.inertia||y.inertia});var v=y.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),E=y.isStatic?"#555":"#ccc",C=y.isStatic&&y.render.fillStyle===null?1:0;y.render.fillStyle=y.render.fillStyle||v,y.render.strokeStyle=y.render.strokeStyle||E,y.render.lineWidth=y.render.lineWidth||C,y.render.sprite.xOffset+=-(y.bounds.min.x-y.position.x)/(y.bounds.max.x-y.bounds.min.x),y.render.sprite.yOffset+=-(y.bounds.min.y-y.position.y)/(y.bounds.max.y-y.bounds.min.y)};r.set=function(y,w,v){var E;typeof w=="string"&&(E=w,w={},w[E]=v);for(E in w)if(Object.prototype.hasOwnProperty.call(w,E))switch(v=w[E],E){case"isStatic":r.setStatic(y,v);break;case"isSleeping":f.set(y,v);break;case"mass":r.setMass(y,v);break;case"density":r.setDensity(y,v);break;case"inertia":r.setInertia(y,v);break;case"vertices":r.setVertices(y,v);break;case"position":r.setPosition(y,v);break;case"angle":r.setAngle(y,v);break;case"velocity":r.setVelocity(y,v);break;case"angularVelocity":r.setAngularVelocity(y,v);break;case"speed":r.setSpeed(y,v);break;case"angularSpeed":r.setAngularSpeed(y,v);break;case"parts":r.setParts(y,v);break;case"centre":r.setCentre(y,v);break;default:y[E]=v}},r.setStatic=function(y,w){for(var v=0;v<y.parts.length;v++){var E=y.parts[v];w?(E.isStatic||(E._original={restitution:E.restitution,friction:E.friction,mass:E.mass,inertia:E.inertia,density:E.density,inverseMass:E.inverseMass,inverseInertia:E.inverseInertia}),E.restitution=0,E.friction=1,E.mass=E.inertia=E.density=1/0,E.inverseMass=E.inverseInertia=0,E.positionPrev.x=E.position.x,E.positionPrev.y=E.position.y,E.anglePrev=E.angle,E.angularVelocity=0,E.speed=0,E.angularSpeed=0,E.motion=0):E._original&&(E.restitution=E._original.restitution,E.friction=E._original.friction,E.mass=E._original.mass,E.inertia=E._original.inertia,E.density=E._original.density,E.inverseMass=E._original.inverseMass,E.inverseInertia=E._original.inverseInertia,E._original=null),E.isStatic=w}},r.setMass=function(y,w){var v=y.inertia/(y.mass/6);y.inertia=v*(w/6),y.inverseInertia=1/y.inertia,y.mass=w,y.inverseMass=1/y.mass,y.density=y.mass/y.area},r.setDensity=function(y,w){r.setMass(y,w*y.area),y.density=w},r.setInertia=function(y,w){y.inertia=w,y.inverseInertia=1/y.inertia},r.setVertices=function(y,w){w[0].body===y?y.vertices=w:y.vertices=c.create(w,y),y.axes=g.fromVertices(y.vertices),y.area=c.area(y.vertices),r.setMass(y,y.density*y.area);var v=c.centre(y.vertices);c.translate(y.vertices,v,-1),r.setInertia(y,r._inertiaScale*c.inertia(y.vertices,y.mass)),c.translate(y.vertices,y.position),h.update(y.bounds,y.vertices,y.velocity)},r.setParts=function(y,w,v){var E;for(w=w.slice(0),y.parts.length=0,y.parts.push(y),y.parent=y,E=0;E<w.length;E++){var C=w[E];C!==y&&(C.parent=y,y.parts.push(C))}if(y.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var T=[];for(E=0;E<w.length;E++)T=T.concat(w[E].vertices);c.clockwiseSort(T);var N=c.hull(T),I=c.centre(N);r.setVertices(y,N),c.translate(y.vertices,I)}var S=r._totalProperties(y);y.area=S.area,y.parent=y,y.position.x=S.centre.x,y.position.y=S.centre.y,y.positionPrev.x=S.centre.x,y.positionPrev.y=S.centre.y,r.setMass(y,S.mass),r.setInertia(y,S.inertia),r.setPosition(y,S.centre)}},r.setCentre=function(y,w,v){v?(y.positionPrev.x+=w.x,y.positionPrev.y+=w.y,y.position.x+=w.x,y.position.y+=w.y):(y.positionPrev.x=w.x-(y.position.x-y.positionPrev.x),y.positionPrev.y=w.y-(y.position.y-y.positionPrev.y),y.position.x=w.x,y.position.y=w.y)},r.setPosition=function(y,w,v){var E=l.sub(w,y.position);v?(y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.velocity.x=E.x,y.velocity.y=E.y,y.speed=l.magnitude(E)):(y.positionPrev.x+=E.x,y.positionPrev.y+=E.y);for(var C=0;C<y.parts.length;C++){var T=y.parts[C];T.position.x+=E.x,T.position.y+=E.y,c.translate(T.vertices,E),h.update(T.bounds,T.vertices,y.velocity)}},r.setAngle=function(y,w,v){var E=w-y.angle;v?(y.anglePrev=y.angle,y.angularVelocity=E,y.angularSpeed=Math.abs(E)):y.anglePrev+=E;for(var C=0;C<y.parts.length;C++){var T=y.parts[C];T.angle+=E,c.rotate(T.vertices,E,y.position),g.rotate(T.axes,E),h.update(T.bounds,T.vertices,y.velocity),C>0&&l.rotateAbout(T.position,E,y.position,T.position)}},r.setVelocity=function(y,w){var v=y.deltaTime/r._baseDelta;y.positionPrev.x=y.position.x-w.x*v,y.positionPrev.y=y.position.y-w.y*v,y.velocity.x=(y.position.x-y.positionPrev.x)/v,y.velocity.y=(y.position.y-y.positionPrev.y)/v,y.speed=l.magnitude(y.velocity)},r.getVelocity=function(y){var w=r._baseDelta/y.deltaTime;return{x:(y.position.x-y.positionPrev.x)*w,y:(y.position.y-y.positionPrev.y)*w}},r.getSpeed=function(y){return l.magnitude(r.getVelocity(y))},r.setSpeed=function(y,w){r.setVelocity(y,l.mult(l.normalise(r.getVelocity(y)),w))},r.setAngularVelocity=function(y,w){var v=y.deltaTime/r._baseDelta;y.anglePrev=y.angle-w*v,y.angularVelocity=(y.angle-y.anglePrev)/v,y.angularSpeed=Math.abs(y.angularVelocity)},r.getAngularVelocity=function(y){return(y.angle-y.anglePrev)*r._baseDelta/y.deltaTime},r.getAngularSpeed=function(y){return Math.abs(r.getAngularVelocity(y))},r.setAngularSpeed=function(y,w){r.setAngularVelocity(y,d.sign(r.getAngularVelocity(y))*w)},r.translate=function(y,w,v){r.setPosition(y,l.add(y.position,w),v)},r.rotate=function(y,w,v,E){if(!v)r.setAngle(y,y.angle+w,E);else{var C=Math.cos(w),T=Math.sin(w),N=y.position.x-v.x,I=y.position.y-v.y;r.setPosition(y,{x:v.x+(N*C-I*T),y:v.y+(N*T+I*C)},E),r.setAngle(y,y.angle+w,E)}},r.scale=function(y,w,v,E){var C=0,T=0;E=E||y.position;for(var N=0;N<y.parts.length;N++){var I=y.parts[N];c.scale(I.vertices,w,v,E),I.axes=g.fromVertices(I.vertices),I.area=c.area(I.vertices),r.setMass(I,y.density*I.area),c.translate(I.vertices,{x:-I.position.x,y:-I.position.y}),r.setInertia(I,r._inertiaScale*c.inertia(I.vertices,I.mass)),c.translate(I.vertices,{x:I.position.x,y:I.position.y}),N>0&&(C+=I.area,T+=I.inertia),I.position.x=E.x+(I.position.x-E.x)*w,I.position.y=E.y+(I.position.y-E.y)*v,h.update(I.bounds,I.vertices,y.velocity)}y.parts.length>1&&(y.area=C,y.isStatic||(r.setMass(y,y.density*C),r.setInertia(y,T))),y.circleRadius&&(w===v?y.circleRadius*=w:y.circleRadius=null)},r.update=function(y,w){w=(typeof w<"u"?w:1e3/60)*y.timeScale;var v=w*w,E=r._timeCorrection?w/(y.deltaTime||w):1,C=1-y.frictionAir*(w/d._baseDelta),T=(y.position.x-y.positionPrev.x)*E,N=(y.position.y-y.positionPrev.y)*E;y.velocity.x=T*C+y.force.x/y.mass*v,y.velocity.y=N*C+y.force.y/y.mass*v,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.position.x+=y.velocity.x,y.position.y+=y.velocity.y,y.deltaTime=w,y.angularVelocity=(y.angle-y.anglePrev)*C*E+y.torque/y.inertia*v,y.anglePrev=y.angle,y.angle+=y.angularVelocity;for(var I=0;I<y.parts.length;I++){var S=y.parts[I];c.translate(S.vertices,y.velocity),I>0&&(S.position.x+=y.velocity.x,S.position.y+=y.velocity.y),y.angularVelocity!==0&&(c.rotate(S.vertices,y.angularVelocity,y.position),g.rotate(S.axes,y.angularVelocity),I>0&&l.rotateAbout(S.position,y.angularVelocity,y.position,S.position)),h.update(S.bounds,S.vertices,y.velocity)}},r.updateVelocities=function(y){var w=r._baseDelta/y.deltaTime,v=y.velocity;v.x=(y.position.x-y.positionPrev.x)*w,v.y=(y.position.y-y.positionPrev.y)*w,y.speed=Math.sqrt(v.x*v.x+v.y*v.y),y.angularVelocity=(y.angle-y.anglePrev)*w,y.angularSpeed=Math.abs(y.angularVelocity)},r.applyForce=function(y,w,v){var E={x:w.x-y.position.x,y:w.y-y.position.y};y.force.x+=v.x,y.force.y+=v.y,y.torque+=E.x*v.y-E.y*v.x},r._totalProperties=function(y){for(var w={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=y.parts.length===1?0:1;v<y.parts.length;v++){var E=y.parts[v],C=E.mass!==1/0?E.mass:1;w.mass+=C,w.area+=E.area,w.inertia+=E.inertia,w.centre=l.add(w.centre,l.mult(E.position,C))}return w.centre=l.div(w.centre,w.mass),w}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r.on=function(l,f,d){for(var h=f.split(" "),g,m=0;m<h.length;m++)g=h[m],l.events=l.events||{},l.events[g]=l.events[g]||[],l.events[g].push(d);return d},r.off=function(l,f,d){if(!f){l.events={};return}typeof f=="function"&&(d=f,f=c.keys(l.events).join(" "));for(var h=f.split(" "),g=0;g<h.length;g++){var m=l.events[h[g]],y=[];if(d&&m)for(var w=0;w<m.length;w++)m[w]!==d&&y.push(m[w]);l.events[h[g]]=y}},r.trigger=function(l,f,d){var h,g,m,y,w=l.events;if(w&&c.keys(w).length>0){d||(d={}),h=f.split(" ");for(var v=0;v<h.length;v++)if(g=h[v],m=w[g],m){y=c.clone(d,!1),y.name=g,y.source=l;for(var E=0;E<m.length;E++)m[E].apply(l,[y])}}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(5),l=i(0),f=i(1),d=i(4);(function(){r.create=function(h){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},h)},r.setModified=function(h,g,m,y){if(h.isModified=g,g&&h.cache&&(h.cache.allBodies=null,h.cache.allConstraints=null,h.cache.allComposites=null),m&&h.parent&&r.setModified(h.parent,g,m,y),y)for(var w=0;w<h.composites.length;w++){var v=h.composites[w];r.setModified(v,g,m,y)}},r.add=function(h,g){var m=[].concat(g);c.trigger(h,"beforeAdd",{object:g});for(var y=0;y<m.length;y++){var w=m[y];switch(w.type){case"body":if(w.parent!==w){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(h,w);break;case"constraint":r.addConstraint(h,w);break;case"composite":r.addComposite(h,w);break;case"mouseConstraint":r.addConstraint(h,w.constraint);break}}return c.trigger(h,"afterAdd",{object:g}),h},r.remove=function(h,g,m){var y=[].concat(g);c.trigger(h,"beforeRemove",{object:g});for(var w=0;w<y.length;w++){var v=y[w];switch(v.type){case"body":r.removeBody(h,v,m);break;case"constraint":r.removeConstraint(h,v,m);break;case"composite":r.removeComposite(h,v,m);break;case"mouseConstraint":r.removeConstraint(h,v.constraint);break}}return c.trigger(h,"afterRemove",{object:g}),h},r.addComposite=function(h,g){return h.composites.push(g),g.parent=h,r.setModified(h,!0,!0,!1),h},r.removeComposite=function(h,g,m){var y=l.indexOf(h.composites,g);if(y!==-1){var w=r.allBodies(g);r.removeCompositeAt(h,y);for(var v=0;v<w.length;v++)w[v].sleepCounter=0}if(m)for(var v=0;v<h.composites.length;v++)r.removeComposite(h.composites[v],g,!0);return h},r.removeCompositeAt=function(h,g){return h.composites.splice(g,1),r.setModified(h,!0,!0,!1),h},r.addBody=function(h,g){return h.bodies.push(g),r.setModified(h,!0,!0,!1),h},r.removeBody=function(h,g,m){var y=l.indexOf(h.bodies,g);if(y!==-1&&(r.removeBodyAt(h,y),g.sleepCounter=0),m)for(var w=0;w<h.composites.length;w++)r.removeBody(h.composites[w],g,!0);return h},r.removeBodyAt=function(h,g){return h.bodies.splice(g,1),r.setModified(h,!0,!0,!1),h},r.addConstraint=function(h,g){return h.constraints.push(g),r.setModified(h,!0,!0,!1),h},r.removeConstraint=function(h,g,m){var y=l.indexOf(h.constraints,g);if(y!==-1&&r.removeConstraintAt(h,y),m)for(var w=0;w<h.composites.length;w++)r.removeConstraint(h.composites[w],g,!0);return h},r.removeConstraintAt=function(h,g){return h.constraints.splice(g,1),r.setModified(h,!0,!0,!1),h},r.clear=function(h,g,m){if(m)for(var y=0;y<h.composites.length;y++)r.clear(h.composites[y],g,!0);return g?h.bodies=h.bodies.filter(function(w){return w.isStatic}):h.bodies.length=0,h.constraints.length=0,h.composites.length=0,r.setModified(h,!0,!0,!1),h},r.allBodies=function(h){if(h.cache&&h.cache.allBodies)return h.cache.allBodies;for(var g=[].concat(h.bodies),m=0;m<h.composites.length;m++)g=g.concat(r.allBodies(h.composites[m]));return h.cache&&(h.cache.allBodies=g),g},r.allConstraints=function(h){if(h.cache&&h.cache.allConstraints)return h.cache.allConstraints;for(var g=[].concat(h.constraints),m=0;m<h.composites.length;m++)g=g.concat(r.allConstraints(h.composites[m]));return h.cache&&(h.cache.allConstraints=g),g},r.allComposites=function(h){if(h.cache&&h.cache.allComposites)return h.cache.allComposites;for(var g=[].concat(h.composites),m=0;m<h.composites.length;m++)g=g.concat(r.allComposites(h.composites[m]));return h.cache&&(h.cache.allComposites=g),g},r.get=function(h,g,m){var y,w;switch(m){case"body":y=r.allBodies(h);break;case"constraint":y=r.allConstraints(h);break;case"composite":y=r.allComposites(h).concat(h);break}return y?(w=y.filter(function(v){return v.id.toString()===g.toString()}),w.length===0?null:w[0]):null},r.move=function(h,g,m){return r.remove(h,g),r.add(m,g),h},r.rebase=function(h){for(var g=r.allBodies(h).concat(r.allConstraints(h)).concat(r.allComposites(h)),m=0;m<g.length;m++)g[m].id=l.nextId();return h},r.translate=function(h,g,m){for(var y=m?r.allBodies(h):h.bodies,w=0;w<y.length;w++)d.translate(y[w],g);return h},r.rotate=function(h,g,m,y){for(var w=Math.cos(g),v=Math.sin(g),E=y?r.allBodies(h):h.bodies,C=0;C<E.length;C++){var T=E[C],N=T.position.x-m.x,I=T.position.y-m.y;d.setPosition(T,{x:m.x+(N*w-I*v),y:m.y+(N*v+I*w)}),d.rotate(T,g)}return h},r.scale=function(h,g,m,y,w){for(var v=w?r.allBodies(h):h.bodies,E=0;E<v.length;E++){var C=v[E],T=C.position.x-y.x,N=C.position.y-y.y;d.setPosition(C,{x:y.x+T*g,y:y.y+N*m}),d.scale(C,g,m)}return h},r.bounds=function(h){for(var g=r.allBodies(h),m=[],y=0;y<g.length;y+=1){var w=g[y];m.push(w.bounds.min,w.bounds.max)}return f.create(m)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(4),l=i(5),f=i(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(d,h){for(var g=h/f._baseDelta,m=r._motionSleepThreshold,y=0;y<d.length;y++){var w=d[y],v=c.getSpeed(w),E=c.getAngularSpeed(w),C=v*v+E*E;if(w.force.x!==0||w.force.y!==0){r.set(w,!1);continue}var T=Math.min(w.motion,C),N=Math.max(w.motion,C);w.motion=r._minBias*T+(1-r._minBias)*N,w.sleepThreshold>0&&w.motion<m?(w.sleepCounter+=1,w.sleepCounter>=w.sleepThreshold/g&&r.set(w,!0)):w.sleepCounter>0&&(w.sleepCounter-=1)}},r.afterCollisions=function(d){for(var h=r._motionSleepThreshold,g=0;g<d.length;g++){var m=d[g];if(m.isActive){var y=m.collision,w=y.bodyA.parent,v=y.bodyB.parent;if(!(w.isSleeping&&v.isSleeping||w.isStatic||v.isStatic)&&(w.isSleeping||v.isSleeping)){var E=w.isSleeping&&!w.isStatic?w:v,C=E===w?v:w;!E.isStatic&&C.motion>h&&r.set(E,!1)}}}},r.set=function(d,h){var g=d.isSleeping;h?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,g||l.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,g&&l.trigger(d,"sleepEnd"))}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(9);(function(){var f=[],d={overlap:0,axis:null},h={overlap:0,axis:null};r.create=function(g,m){return{pair:null,collided:!1,bodyA:g,bodyB:m,parentA:g.parent,parentB:m.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},r.collides=function(g,m,y){if(r._overlapAxes(d,g.vertices,m.vertices,g.axes),d.overlap<=0||(r._overlapAxes(h,m.vertices,g.vertices,m.axes),h.overlap<=0))return null;var w=y&&y.table[l.id(g,m)],v;w?v=w.collision:(v=r.create(g,m),v.collided=!0,v.bodyA=g.id<m.id?g:m,v.bodyB=g.id<m.id?m:g,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),g=v.bodyA,m=v.bodyB;var E;d.overlap<h.overlap?E=d:E=h;var C=v.normal,T=v.tangent,N=v.penetration,I=v.supports,S=E.overlap,A=E.axis,_=A.x,D=A.y,O=m.position.x-g.position.x,P=m.position.y-g.position.y;_*O+D*P>=0&&(_=-_,D=-D),C.x=_,C.y=D,T.x=-D,T.y=_,N.x=_*S,N.y=D*S,v.depth=S;var U=r._findSupports(g,m,C,1),L=0;if(c.contains(g.vertices,U[0])&&(I[L++]=U[0]),c.contains(g.vertices,U[1])&&(I[L++]=U[1]),L<2){var H=r._findSupports(m,g,C,-1);c.contains(m.vertices,H[0])&&(I[L++]=H[0]),L<2&&c.contains(m.vertices,H[1])&&(I[L++]=H[1])}return L===0&&(I[L++]=U[0]),v.supportCount=L,v},r._overlapAxes=function(g,m,y,w){var v=m.length,E=y.length,C=m[0].x,T=m[0].y,N=y[0].x,I=y[0].y,S=w.length,A=Number.MAX_VALUE,_=0,D,O,P,U,L,H;for(L=0;L<S;L++){var q=w[L],$=q.x,R=q.y,k=C*$+T*R,F=N*$+I*R,K=k,W=F;for(H=1;H<v;H+=1)U=m[H].x*$+m[H].y*R,U>K?K=U:U<k&&(k=U);for(H=1;H<E;H+=1)U=y[H].x*$+y[H].y*R,U>W?W=U:U<F&&(F=U);if(O=K-F,P=W-k,D=O<P?O:P,D<A&&(A=D,_=L,D<=0))break}g.axis=w[_],g.overlap=A},r._findSupports=function(g,m,y,w){var v=m.vertices,E=v.length,C=g.position.x,T=g.position.y,N=y.x*w,I=y.y*w,S=v[0],A=S,_=N*(C-A.x)+I*(T-A.y),D,O,P;for(P=1;P<E;P+=1)A=v[P],O=N*(C-A.x)+I*(T-A.y),O<_&&(_=O,S=A);return D=v[(E+S.index-1)%E],_=N*(C-D.x)+I*(T-D.y),A=v[(S.index+1)%E],N*(C-A.x)+I*(T-A.y)<_?(f[0]=S,f[1]=A,f):(f[0]=S,f[1]=D,f)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(16);(function(){r.create=function(l,f){var d=l.bodyA,h=l.bodyB,g={id:r.id(d,h),bodyA:d,bodyB:h,collision:l,contacts:[c.create(),c.create()],contactCount:0,separation:0,isActive:!0,isSensor:d.isSensor||h.isSensor,timeCreated:f,timeUpdated:f,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(g,l,f),g},r.update=function(l,f,d){var h=f.supports,g=f.supportCount,m=l.contacts,y=f.parentA,w=f.parentB;l.isActive=!0,l.timeUpdated=d,l.collision=f,l.separation=f.depth,l.inverseMass=y.inverseMass+w.inverseMass,l.friction=y.friction<w.friction?y.friction:w.friction,l.frictionStatic=y.frictionStatic>w.frictionStatic?y.frictionStatic:w.frictionStatic,l.restitution=y.restitution>w.restitution?y.restitution:w.restitution,l.slop=y.slop>w.slop?y.slop:w.slop,l.contactCount=g,f.pair=l;var v=h[0],E=m[0],C=h[1],T=m[1];(T.vertex===v||E.vertex===C)&&(m[1]=E,m[0]=E=T,T=m[1]),E.vertex=v,T.vertex=C},r.setActive=function(l,f,d){f?(l.isActive=!0,l.timeUpdated=d):(l.isActive=!1,l.contactCount=0)},r.id=function(l,f){return l.id<f.id?l.id.toString(36)+":"+f.id.toString(36):f.id.toString(36)+":"+l.id.toString(36)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(2),f=i(7),d=i(1),h=i(11),g=i(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(m){var y=m;y.bodyA&&!y.pointA&&(y.pointA={x:0,y:0}),y.bodyB&&!y.pointB&&(y.pointB={x:0,y:0});var w=y.bodyA?l.add(y.bodyA.position,y.pointA):y.pointA,v=y.bodyB?l.add(y.bodyB.position,y.pointB):y.pointB,E=l.magnitude(l.sub(w,v));y.length=typeof y.length<"u"?y.length:E,y.id=y.id||g.nextId(),y.label=y.label||"Constraint",y.type="constraint",y.stiffness=y.stiffness||(y.length>0?1:.7),y.damping=y.damping||0,y.angularStiffness=y.angularStiffness||0,y.angleA=y.bodyA?y.bodyA.angle:y.angleA,y.angleB=y.bodyB?y.bodyB.angle:y.angleB,y.plugin={};var C={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return y.length===0&&y.stiffness>.1?(C.type="pin",C.anchors=!1):y.stiffness<.9&&(C.type="spring"),y.render=g.extend(C,y.render),y},r.preSolveAll=function(m){for(var y=0;y<m.length;y+=1){var w=m[y],v=w.constraintImpulse;w.isStatic||v.x===0&&v.y===0&&v.angle===0||(w.position.x+=v.x,w.position.y+=v.y,w.angle+=v.angle)}},r.solveAll=function(m,y){for(var w=g.clamp(y/g._baseDelta,0,1),v=0;v<m.length;v+=1){var E=m[v],C=!E.bodyA||E.bodyA&&E.bodyA.isStatic,T=!E.bodyB||E.bodyB&&E.bodyB.isStatic;(C||T)&&r.solve(m[v],w)}for(v=0;v<m.length;v+=1)E=m[v],C=!E.bodyA||E.bodyA&&E.bodyA.isStatic,T=!E.bodyB||E.bodyB&&E.bodyB.isStatic,!C&&!T&&r.solve(m[v],w)},r.solve=function(m,y){var w=m.bodyA,v=m.bodyB,E=m.pointA,C=m.pointB;if(!(!w&&!v)){w&&!w.isStatic&&(l.rotate(E,w.angle-m.angleA,E),m.angleA=w.angle),v&&!v.isStatic&&(l.rotate(C,v.angle-m.angleB,C),m.angleB=v.angle);var T=E,N=C;if(w&&(T=l.add(w.position,E)),v&&(N=l.add(v.position,C)),!(!T||!N)){var I=l.sub(T,N),S=l.magnitude(I);S<r._minLength&&(S=r._minLength);var A=(S-m.length)/S,_=m.stiffness>=1||m.length===0,D=_?m.stiffness*y:m.stiffness*y*y,O=m.damping*y,P=l.mult(I,A*D),U=(w?w.inverseMass:0)+(v?v.inverseMass:0),L=(w?w.inverseInertia:0)+(v?v.inverseInertia:0),H=U+L,q,$,R,k,F;if(O>0){var K=l.create();R=l.div(I,S),F=l.sub(v&&l.sub(v.position,v.positionPrev)||K,w&&l.sub(w.position,w.positionPrev)||K),k=l.dot(R,F)}w&&!w.isStatic&&($=w.inverseMass/U,w.constraintImpulse.x-=P.x*$,w.constraintImpulse.y-=P.y*$,w.position.x-=P.x*$,w.position.y-=P.y*$,O>0&&(w.positionPrev.x-=O*R.x*k*$,w.positionPrev.y-=O*R.y*k*$),q=l.cross(E,P)/H*r._torqueDampen*w.inverseInertia*(1-m.angularStiffness),w.constraintImpulse.angle-=q,w.angle-=q),v&&!v.isStatic&&($=v.inverseMass/U,v.constraintImpulse.x+=P.x*$,v.constraintImpulse.y+=P.y*$,v.position.x+=P.x*$,v.position.y+=P.y*$,O>0&&(v.positionPrev.x+=O*R.x*k*$,v.positionPrev.y+=O*R.y*k*$),q=l.cross(C,P)/H*r._torqueDampen*v.inverseInertia*(1-m.angularStiffness),v.constraintImpulse.angle+=q,v.angle+=q)}}},r.postSolveAll=function(m){for(var y=0;y<m.length;y++){var w=m[y],v=w.constraintImpulse;if(!(w.isStatic||v.x===0&&v.y===0&&v.angle===0)){f.set(w,!1);for(var E=0;E<w.parts.length;E++){var C=w.parts[E];c.translate(C.vertices,v),E>0&&(C.position.x+=v.x,C.position.y+=v.y),v.angle!==0&&(c.rotate(C.vertices,v.angle,w.position),h.rotate(C.axes,v.angle),E>0&&l.rotateAbout(C.position,v.angle,w.position,C.position)),d.update(C.bounds,C.vertices,w.velocity)}v.angle*=r._warming,v.x*=r._warming,v.y*=r._warming}}},r.pointAWorld=function(m){return{x:(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),y:(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0)}},r.pointBWorld=function(m){return{x:(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),y:(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0)}},r.currentLength=function(m){var y=(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),w=(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0),v=(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),E=(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0),C=y-v,T=w-E;return Math.sqrt(C*C+T*T)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(0);(function(){r.fromVertices=function(f){for(var d={},h=0;h<f.length;h++){var g=(h+1)%f.length,m=c.normalise({x:f[g].y-f[h].y,y:f[h].x-f[g].x}),y=m.y===0?1/0:m.x/m.y;y=y.toFixed(3).toString(),d[y]=m}return l.values(d)},r.rotate=function(f,d){if(d!==0)for(var h=Math.cos(d),g=Math.sin(d),m=0;m<f.length;m++){var y=f[m],w;w=y.x*h-y.y*g,y.y=y.x*g+y.y*h,y.x=w}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(0),f=i(4),d=i(1),h=i(2);(function(){r.rectangle=function(g,m,y,w,v){v=v||{};var E={label:"Rectangle Body",position:{x:g,y:m},vertices:c.fromPath("L 0 0 L "+y+" 0 L "+y+" "+w+" L 0 "+w)};if(v.chamfer){var C=v.chamfer;E.vertices=c.chamfer(E.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete v.chamfer}return f.create(l.extend({},E,v))},r.trapezoid=function(g,m,y,w,v,E){E=E||{},v>=1&&l.warn("Bodies.trapezoid: slope parameter must be < 1."),v*=.5;var C=(1-v*2)*y,T=y*v,N=T+C,I=N+T,S;v<.5?S="L 0 0 L "+T+" "+-w+" L "+N+" "+-w+" L "+I+" 0":S="L 0 0 L "+N+" "+-w+" L "+I+" 0";var A={label:"Trapezoid Body",position:{x:g,y:m},vertices:c.fromPath(S)};if(E.chamfer){var _=E.chamfer;A.vertices=c.chamfer(A.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete E.chamfer}return f.create(l.extend({},A,E))},r.circle=function(g,m,y,w,v){w=w||{};var E={label:"Circle Body",circleRadius:y};v=v||25;var C=Math.ceil(Math.max(10,Math.min(v,y)));return C%2===1&&(C+=1),r.polygon(g,m,C,y,l.extend({},E,w))},r.polygon=function(g,m,y,w,v){if(v=v||{},y<3)return r.circle(g,m,w,v);for(var E=2*Math.PI/y,C="",T=E*.5,N=0;N<y;N+=1){var I=T+N*E,S=Math.cos(I)*w,A=Math.sin(I)*w;C+="L "+S.toFixed(3)+" "+A.toFixed(3)+" "}var _={label:"Polygon Body",position:{x:g,y:m},vertices:c.fromPath(C)};if(v.chamfer){var D=v.chamfer;_.vertices=c.chamfer(_.vertices,D.radius,D.quality,D.qualityMin,D.qualityMax),delete v.chamfer}return f.create(l.extend({},_,v))},r.fromVertices=function(g,m,y,w,v,E,C,T){var N=l.getDecomp(),I,S,A,_,D,O,P,U,L,H,q;for(I=!!(N&&N.quickDecomp),w=w||{},A=[],v=typeof v<"u"?v:!1,E=typeof E<"u"?E:.01,C=typeof C<"u"?C:10,T=typeof T<"u"?T:.01,l.isArray(y[0])||(y=[y]),H=0;H<y.length;H+=1)if(O=y[H],_=c.isConvex(O),D=!_,D&&!I&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),_||!I)_?O=c.clockwiseSort(O):O=c.hull(O),A.push({position:{x:g,y:m},vertices:O});else{var $=O.map(function(oe){return[oe.x,oe.y]});N.makeCCW($),E!==!1&&N.removeCollinearPoints($,E),T!==!1&&N.removeDuplicatePoints&&N.removeDuplicatePoints($,T);var R=N.quickDecomp($);for(P=0;P<R.length;P++){var k=R[P],F=k.map(function(oe){return{x:oe[0],y:oe[1]}});C>0&&c.area(F)<C||A.push({position:c.centre(F),vertices:F})}}for(P=0;P<A.length;P++)A[P]=f.create(l.extend(A[P],w));if(v){var K=5;for(P=0;P<A.length;P++){var W=A[P];for(U=P+1;U<A.length;U++){var j=A[U];if(d.overlaps(W.bounds,j.bounds)){var X=W.vertices,Z=j.vertices;for(L=0;L<W.vertices.length;L++)for(q=0;q<j.vertices.length;q++){var ee=h.magnitudeSquared(h.sub(X[(L+1)%X.length],Z[q])),ae=h.magnitudeSquared(h.sub(X[L],Z[(q+1)%Z.length]));ee<K&&ae<K&&(X[L].isInternal=!0,Z[q].isInternal=!0)}}}}}return A.length>1?(S=f.create(l.extend({parts:A.slice(0)},w)),f.setPosition(S,{x:g,y:m}),S):A[0]}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0),l=i(8);(function(){r.create=function(f){var d={bodies:[],collisions:[],pairs:null};return c.extend(d,f)},r.setBodies=function(f,d){f.bodies=d.slice(0)},r.clear=function(f){f.bodies=[],f.collisions=[]},r.collisions=function(f){var d=f.pairs,h=f.bodies,g=h.length,m=r.canCollide,y=l.collides,w=f.collisions,v=0,E,C;for(h.sort(r._compareBoundsX),E=0;E<g;E++){var T=h[E],N=T.bounds,I=T.bounds.max.x,S=T.bounds.max.y,A=T.bounds.min.y,_=T.isStatic||T.isSleeping,D=T.parts.length,O=D===1;for(C=E+1;C<g;C++){var P=h[C],U=P.bounds;if(U.min.x>I)break;if(!(S<U.min.y||A>U.max.y)&&!(_&&(P.isStatic||P.isSleeping))&&m(T.collisionFilter,P.collisionFilter)){var L=P.parts.length;if(O&&L===1){var H=y(T,P,d);H&&(w[v++]=H)}else for(var q=D>1?1:0,$=L>1?1:0,R=q;R<D;R++)for(var k=T.parts[R],N=k.bounds,F=$;F<L;F++){var K=P.parts[F],U=K.bounds;if(!(N.min.x>U.max.x||N.max.x<U.min.x||N.max.y<U.min.y||N.min.y>U.max.y)){var H=y(k,K,d);H&&(w[v++]=H)}}}}}return w.length!==v&&(w.length=v),w},r.canCollide=function(f,d){return f.group===d.group&&f.group!==0?f.group>0:(f.mask&d.category)!==0&&(d.mask&f.category)!==0},r._compareBoundsX=function(f,d){return f.bounds.min.x-d.bounds.min.x}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r.create=function(l){var f={};return l||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),f.element=l||document.body,f.absolute={x:0,y:0},f.position={x:0,y:0},f.mousedownPosition={x:0,y:0},f.mouseupPosition={x:0,y:0},f.offset={x:0,y:0},f.scale={x:1,y:1},f.wheelDelta=0,f.button=-1,f.pixelRatio=parseInt(f.element.getAttribute("data-pixel-ratio"),10)||1,f.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},f.mousemove=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g&&(f.button=0,d.preventDefault()),f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.sourceEvents.mousemove=d},f.mousedown=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g?(f.button=0,d.preventDefault()):f.button=d.button,f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mousedownPosition.x=f.position.x,f.mousedownPosition.y=f.position.y,f.sourceEvents.mousedown=d},f.mouseup=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g&&d.preventDefault(),f.button=-1,f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mouseupPosition.x=f.position.x,f.mouseupPosition.y=f.position.y,f.sourceEvents.mouseup=d},f.mousewheel=function(d){f.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault(),f.sourceEvents.mousewheel=d},r.setElement(f,f.element),f},r.setElement=function(l,f){l.element=f,f.addEventListener("mousemove",l.mousemove,{passive:!0}),f.addEventListener("mousedown",l.mousedown,{passive:!0}),f.addEventListener("mouseup",l.mouseup,{passive:!0}),f.addEventListener("wheel",l.mousewheel,{passive:!1}),f.addEventListener("touchmove",l.mousemove,{passive:!1}),f.addEventListener("touchstart",l.mousedown,{passive:!1}),f.addEventListener("touchend",l.mouseup,{passive:!1})},r.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},r.setOffset=function(l,f){l.offset.x=f.x,l.offset.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},r.setScale=function(l,f){l.scale.x=f.x,l.scale.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},r._getRelativeMousePosition=function(l,f,d){var h=f.getBoundingClientRect(),g=document.documentElement||document.body.parentNode||document.body,m=window.pageXOffset!==void 0?window.pageXOffset:g.scrollLeft,y=window.pageYOffset!==void 0?window.pageYOffset:g.scrollTop,w=l.changedTouches,v,E;return w?(v=w[0].pageX-h.left-m,E=w[0].pageY-h.top-y):(v=l.pageX-h.left-m,E=l.pageY-h.top-y),{x:v/(f.clientWidth/(f.width||f.clientWidth)*d),y:E/(f.clientHeight/(f.height||f.clientHeight)*d)}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r._registry={},r.register=function(l){if(r.isPlugin(l)||c.warn("Plugin.register:",r.toString(l),"does not implement all required fields."),l.name in r._registry){var f=r._registry[l.name],d=r.versionParse(l.version).number,h=r.versionParse(f.version).number;d>h?(c.warn("Plugin.register:",r.toString(f),"was upgraded to",r.toString(l)),r._registry[l.name]=l):d<h?c.warn("Plugin.register:",r.toString(f),"can not be downgraded to",r.toString(l)):l!==f&&c.warn("Plugin.register:",r.toString(l),"is already registered to different plugin object")}else r._registry[l.name]=l;return l},r.resolve=function(l){return r._registry[r.dependencyParse(l).name]},r.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},r.isPlugin=function(l){return l&&l.name&&l.version&&l.install},r.isUsed=function(l,f){return l.used.indexOf(f)>-1},r.isFor=function(l,f){var d=l.for&&r.dependencyParse(l.for);return!l.for||f.name===d.name&&r.versionSatisfies(f.version,d.range)},r.use=function(l,f){if(l.uses=(l.uses||[]).concat(f||[]),l.uses.length===0){c.warn("Plugin.use:",r.toString(l),"does not specify any dependencies to install.");return}for(var d=r.dependencies(l),h=c.topologicalSort(d),g=[],m=0;m<h.length;m+=1)if(h[m]!==l.name){var y=r.resolve(h[m]);if(!y){g.push(" "+h[m]);continue}r.isUsed(l,y.name)||(r.isFor(y,l)||(c.warn("Plugin.use:",r.toString(y),"is for",y.for,"but installed on",r.toString(l)+"."),y._warned=!0),y.install?y.install(l):(c.warn("Plugin.use:",r.toString(y),"does not specify an install function."),y._warned=!0),y._warned?(g.push(" "+r.toString(y)),delete y._warned):g.push(" "+r.toString(y)),l.used.push(y.name))}g.length>0&&c.info(g.join("  "))},r.dependencies=function(l,f){var d=r.dependencyParse(l),h=d.name;if(f=f||{},!(h in f)){l=r.resolve(l)||l,f[h]=c.map(l.uses||[],function(m){r.isPlugin(m)&&r.register(m);var y=r.dependencyParse(m),w=r.resolve(m);return w&&!r.versionSatisfies(w.version,y.range)?(c.warn("Plugin.dependencies:",r.toString(w),"does not satisfy",r.toString(y),"used by",r.toString(d)+"."),w._warned=!0,l._warned=!0):w||(c.warn("Plugin.dependencies:",r.toString(m),"used by",r.toString(d),"could not be resolved."),l._warned=!0),y.name});for(var g=0;g<f[h].length;g+=1)r.dependencies(f[h][g],f);return f}},r.dependencyParse=function(l){if(c.isString(l)){var f=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return f.test(l)||c.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},r.versionParse=function(l){var f=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;f.test(l)||c.warn("Plugin.versionParse:",l,"is not a valid version or range.");var d=f.exec(l),h=Number(d[4]),g=Number(d[5]),m=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:l,operator:d[1]||d[2]||"",major:h,minor:g,patch:m,parts:[h,g,m],prerelease:d[7],number:h*1e8+g*1e4+m}},r.versionSatisfies=function(l,f){f=f||"*";var d=r.versionParse(f),h=r.versionParse(l);if(d.isRange){if(d.operator==="*"||l==="*")return!0;if(d.operator===">")return h.number>d.number;if(d.operator===">=")return h.number>=d.number;if(d.operator==="~")return h.major===d.major&&h.minor===d.minor&&h.patch>=d.patch;if(d.operator==="^")return d.major>0?h.major===d.major&&h.number>=d.number:d.minor>0?h.minor===d.minor&&h.patch>=d.patch:h.patch===d.patch}return l===f||l==="*"}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(7),l=i(18),f=i(13),d=i(19),h=i(5),g=i(6),m=i(10),y=i(0),w=i(4);(function(){r._deltaMax=1e3/60,r.create=function(v){v=v||{};var E={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},C=y.extend(E,v);return C.world=v.world||g.create({label:"World"}),C.pairs=v.pairs||d.create(),C.detector=v.detector||f.create(),C.detector.pairs=C.pairs,C.grid={buckets:[]},C.world.gravity=C.gravity,C.broadphase=C.grid,C.metrics={},C},r.update=function(v,E){var C=y.now(),T=v.world,N=v.detector,I=v.pairs,S=v.timing,A=S.timestamp,_;E>r._deltaMax&&y.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",r._deltaMax.toFixed(3),"ms."),E=typeof E<"u"?E:y._baseDelta,E*=S.timeScale,S.timestamp+=E,S.lastDelta=E;var D={timestamp:S.timestamp,delta:E};h.trigger(v,"beforeUpdate",D);var O=g.allBodies(T),P=g.allConstraints(T);for(T.isModified&&(f.setBodies(N,O),g.setModified(T,!1,!1,!0)),v.enableSleeping&&c.update(O,E),r._bodiesApplyGravity(O,v.gravity),E>0&&r._bodiesUpdate(O,E),h.trigger(v,"beforeSolve",D),m.preSolveAll(O),_=0;_<v.constraintIterations;_++)m.solveAll(P,E);m.postSolveAll(O);var U=f.collisions(N);d.update(I,U,A),v.enableSleeping&&c.afterCollisions(I.list),I.collisionStart.length>0&&h.trigger(v,"collisionStart",{pairs:I.collisionStart,timestamp:S.timestamp,delta:E});var L=y.clamp(20/v.positionIterations,0,1);for(l.preSolvePosition(I.list),_=0;_<v.positionIterations;_++)l.solvePosition(I.list,E,L);for(l.postSolvePosition(O),m.preSolveAll(O),_=0;_<v.constraintIterations;_++)m.solveAll(P,E);for(m.postSolveAll(O),l.preSolveVelocity(I.list),_=0;_<v.velocityIterations;_++)l.solveVelocity(I.list,E);return r._bodiesUpdateVelocities(O),I.collisionActive.length>0&&h.trigger(v,"collisionActive",{pairs:I.collisionActive,timestamp:S.timestamp,delta:E}),I.collisionEnd.length>0&&h.trigger(v,"collisionEnd",{pairs:I.collisionEnd,timestamp:S.timestamp,delta:E}),r._bodiesClearForces(O),h.trigger(v,"afterUpdate",D),v.timing.lastElapsed=y.now()-C,v},r.merge=function(v,E){if(y.extend(v,E),E.world){v.world=E.world,r.clear(v);for(var C=g.allBodies(v.world),T=0;T<C.length;T++){var N=C[T];c.set(N,!1),N.id=y.nextId()}}},r.clear=function(v){d.clear(v.pairs),f.clear(v.detector)},r._bodiesClearForces=function(v){for(var E=v.length,C=0;C<E;C++){var T=v[C];T.force.x=0,T.force.y=0,T.torque=0}},r._bodiesApplyGravity=function(v,E){var C=typeof E.scale<"u"?E.scale:.001,T=v.length;if(!(E.x===0&&E.y===0||C===0))for(var N=0;N<T;N++){var I=v[N];I.isStatic||I.isSleeping||(I.force.y+=I.mass*E.y*C,I.force.x+=I.mass*E.x*C)}},r._bodiesUpdate=function(v,E){for(var C=v.length,T=0;T<C;T++){var N=v[T];N.isStatic||N.isSleeping||w.update(N,E)}},r._bodiesUpdateVelocities=function(v){for(var E=v.length,C=0;C<E;C++)w.updateVelocities(v[C])}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(0),f=i(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(d){var h,g,m,y=d.length;for(h=0;h<y;h++)g=d[h],g.isActive&&(m=g.contactCount,g.collision.parentA.totalContacts+=m,g.collision.parentB.totalContacts+=m)},r.solvePosition=function(d,h,g){var m,y,w,v,E,C,T,N,I=r._positionDampen*(g||1),S=l.clamp(h/l._baseDelta,0,1),A=d.length;for(m=0;m<A;m++)y=d[m],!(!y.isActive||y.isSensor)&&(w=y.collision,v=w.parentA,E=w.parentB,C=w.normal,y.separation=w.depth+C.x*(E.positionImpulse.x-v.positionImpulse.x)+C.y*(E.positionImpulse.y-v.positionImpulse.y));for(m=0;m<A;m++)y=d[m],!(!y.isActive||y.isSensor)&&(w=y.collision,v=w.parentA,E=w.parentB,C=w.normal,N=y.separation-y.slop*S,(v.isStatic||E.isStatic)&&(N*=2),v.isStatic||v.isSleeping||(T=I/v.totalContacts,v.positionImpulse.x+=C.x*N*T,v.positionImpulse.y+=C.y*N*T),E.isStatic||E.isSleeping||(T=I/E.totalContacts,E.positionImpulse.x-=C.x*N*T,E.positionImpulse.y-=C.y*N*T))},r.postSolvePosition=function(d){for(var h=r._positionWarming,g=d.length,m=c.translate,y=f.update,w=0;w<g;w++){var v=d[w],E=v.positionImpulse,C=E.x,T=E.y,N=v.velocity;if(v.totalContacts=0,C!==0||T!==0){for(var I=0;I<v.parts.length;I++){var S=v.parts[I];m(S.vertices,E),y(S.bounds,S.vertices,N),S.position.x+=C,S.position.y+=T}v.positionPrev.x+=C,v.positionPrev.y+=T,C*N.x+T*N.y<0?(E.x=0,E.y=0):(E.x*=h,E.y*=h)}}},r.preSolveVelocity=function(d){var h=d.length,g,m;for(g=0;g<h;g++){var y=d[g];if(!(!y.isActive||y.isSensor)){var w=y.contacts,v=y.contactCount,E=y.collision,C=E.parentA,T=E.parentB,N=E.normal,I=E.tangent;for(m=0;m<v;m++){var S=w[m],A=S.vertex,_=S.normalImpulse,D=S.tangentImpulse;if(_!==0||D!==0){var O=N.x*_+I.x*D,P=N.y*_+I.y*D;C.isStatic||C.isSleeping||(C.positionPrev.x+=O*C.inverseMass,C.positionPrev.y+=P*C.inverseMass,C.anglePrev+=C.inverseInertia*((A.x-C.position.x)*P-(A.y-C.position.y)*O)),T.isStatic||T.isSleeping||(T.positionPrev.x-=O*T.inverseMass,T.positionPrev.y-=P*T.inverseMass,T.anglePrev-=T.inverseInertia*((A.x-T.position.x)*P-(A.y-T.position.y)*O))}}}}},r.solveVelocity=function(d,h){var g=h/l._baseDelta,m=g*g,y=m*g,w=-r._restingThresh*g,v=r._restingThreshTangent,E=r._frictionNormalMultiplier*g,C=r._frictionMaxStatic,T=d.length,N,I,S,A;for(S=0;S<T;S++){var _=d[S];if(!(!_.isActive||_.isSensor)){var D=_.collision,O=D.parentA,P=D.parentB,U=D.normal.x,L=D.normal.y,H=D.tangent.x,q=D.tangent.y,$=_.inverseMass,R=_.friction*_.frictionStatic*E,k=_.contacts,F=_.contactCount,K=1/F,W=O.position.x-O.positionPrev.x,j=O.position.y-O.positionPrev.y,X=O.angle-O.anglePrev,Z=P.position.x-P.positionPrev.x,ee=P.position.y-P.positionPrev.y,ae=P.angle-P.anglePrev;for(A=0;A<F;A++){var oe=k[A],be=oe.vertex,Ae=be.x-O.position.x,Ne=be.y-O.position.y,We=be.x-P.position.x,Qe=be.y-P.position.y,xt=W-Ne*X,ki=j+Ae*X,cn=Z-Qe*ae,ii=ee+We*ae,ri=xt-cn,qr=ki-ii,or=U*ri+L*qr,yn=H*ri+q*qr,fs=_.separation+or,ns=Math.min(fs,1);ns=fs<0?0:ns;var cr=ns*R;yn<-cr||yn>cr?(I=yn>0?yn:-yn,N=_.friction*(yn>0?1:-1)*y,N<-I?N=-I:N>I&&(N=I)):(N=yn,I=C);var lr=Ae*L-Ne*U,St=We*L-Qe*U,ai=K/($+O.inverseInertia*lr*lr+P.inverseInertia*St*St),oi=(1+_.restitution)*or*ai;if(N*=ai,or<w)oe.normalImpulse=0;else{var Wr=oe.normalImpulse;oe.normalImpulse+=oi,oe.normalImpulse>0&&(oe.normalImpulse=0),oi=oe.normalImpulse-Wr}if(yn<-v||yn>v)oe.tangentImpulse=0;else{var Bi=oe.tangentImpulse;oe.tangentImpulse+=N,oe.tangentImpulse<-I&&(oe.tangentImpulse=-I),oe.tangentImpulse>I&&(oe.tangentImpulse=I),N=oe.tangentImpulse-Bi}var ji=U*oi+H*N,zi=L*oi+q*N;O.isStatic||O.isSleeping||(O.positionPrev.x+=ji*O.inverseMass,O.positionPrev.y+=zi*O.inverseMass,O.anglePrev+=(Ae*zi-Ne*ji)*O.inverseInertia),P.isStatic||P.isSleeping||(P.positionPrev.x-=ji*P.inverseMass,P.positionPrev.y-=zi*P.inverseMass,P.anglePrev-=(We*zi-Qe*ji)*P.inverseInertia)}}}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(9),l=i(0);(function(){r.create=function(f){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},f)},r.update=function(f,d,h){var g=c.update,m=c.create,y=c.setActive,w=f.table,v=f.list,E=v.length,C=E,T=f.collisionStart,N=f.collisionEnd,I=f.collisionActive,S=d.length,A=0,_=0,D=0,O,P,U;for(U=0;U<S;U++)O=d[U],P=O.pair,P?(P.isActive&&(I[D++]=P),g(P,O,h)):(P=m(O,h),w[P.id]=P,T[A++]=P,v[C++]=P);for(C=0,E=v.length,U=0;U<E;U++)P=v[U],P.timeUpdated>=h?v[C++]=P:(y(P,!1,h),P.collision.bodyA.sleepCounter>0&&P.collision.bodyB.sleepCounter>0?v[C++]=P:(N[_++]=P,delete w[P.id]));v.length!==C&&(v.length=C),T.length!==A&&(T.length=A),N.length!==_&&(N.length=_),I.length!==D&&(I.length=D)},r.clear=function(f){return f.table={},f.list.length=0,f.collisionStart.length=0,f.collisionActive.length=0,f.collisionEnd.length=0,f}})()}),(function(n,s,i){var r=n.exports=i(21);r.Axes=i(11),r.Bodies=i(12),r.Body=i(4),r.Bounds=i(1),r.Collision=i(8),r.Common=i(0),r.Composite=i(6),r.Composites=i(22),r.Constraint=i(10),r.Contact=i(16),r.Detector=i(13),r.Engine=i(17),r.Events=i(5),r.Grid=i(23),r.Mouse=i(14),r.MouseConstraint=i(24),r.Pair=i(9),r.Pairs=i(19),r.Plugin=i(15),r.Query=i(25),r.Render=i(26),r.Resolver=i(18),r.Runner=i(27),r.SAT=i(28),r.Sleeping=i(7),r.Svg=i(29),r.Vector=i(2),r.Vertices=i(3),r.World=i(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")}),(function(n,s,i){var r={};n.exports=r;var c=i(15),l=i(0);(function(){r.name="matter-js",r.version="0.20.0",r.uses=[],r.used=[],r.use=function(){c.use(r,Array.prototype.slice.call(arguments))},r.before=function(f,d){return f=f.replace(/^Matter./,""),l.chainPathBefore(r,f,d)},r.after=function(f,d){return f=f.replace(/^Matter./,""),l.chainPathAfter(r,f,d)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(6),l=i(10),f=i(0),d=i(4),h=i(12),g=f.deprecated;(function(){r.stack=function(m,y,w,v,E,C,T){for(var N=c.create({label:"Stack"}),I=m,S=y,A,_=0,D=0;D<v;D++){for(var O=0,P=0;P<w;P++){var U=T(I,S,P,D,A,_);if(U){var L=U.bounds.max.y-U.bounds.min.y,H=U.bounds.max.x-U.bounds.min.x;L>O&&(O=L),d.translate(U,{x:H*.5,y:L*.5}),I=U.bounds.max.x+E,c.addBody(N,U),A=U,_+=1}else I+=E}S+=O+C,I=m}return N},r.chain=function(m,y,w,v,E,C){for(var T=m.bodies,N=1;N<T.length;N++){var I=T[N-1],S=T[N],A=I.bounds.max.y-I.bounds.min.y,_=I.bounds.max.x-I.bounds.min.x,D=S.bounds.max.y-S.bounds.min.y,O=S.bounds.max.x-S.bounds.min.x,P={bodyA:I,pointA:{x:_*y,y:A*w},bodyB:S,pointB:{x:O*v,y:D*E}},U=f.extend(P,C);c.addConstraint(m,l.create(U))}return m.label+=" Chain",m},r.mesh=function(m,y,w,v,E){var C=m.bodies,T,N,I,S,A;for(T=0;T<w;T++){for(N=1;N<y;N++)I=C[N-1+T*y],S=C[N+T*y],c.addConstraint(m,l.create(f.extend({bodyA:I,bodyB:S},E)));if(T>0)for(N=0;N<y;N++)I=C[N+(T-1)*y],S=C[N+T*y],c.addConstraint(m,l.create(f.extend({bodyA:I,bodyB:S},E))),v&&N>0&&(A=C[N-1+(T-1)*y],c.addConstraint(m,l.create(f.extend({bodyA:A,bodyB:S},E)))),v&&N<y-1&&(A=C[N+1+(T-1)*y],c.addConstraint(m,l.create(f.extend({bodyA:A,bodyB:S},E))))}return m.label+=" Mesh",m},r.pyramid=function(m,y,w,v,E,C,T){return r.stack(m,y,w,v,E,C,function(N,I,S,A,_,D){var O=Math.min(v,Math.ceil(w/2)),P=_?_.bounds.max.x-_.bounds.min.x:0;if(!(A>O)){A=O-A;var U=A,L=w-1-A;if(!(S<U||S>L)){D===1&&d.translate(_,{x:(S+(w%2===1?1:-1))*P,y:0});var H=_?S*P:0;return T(m+H+S*E,I,S,A,_,D)}}})},r.newtonsCradle=function(m,y,w,v,E){for(var C=c.create({label:"Newtons Cradle"}),T=0;T<w;T++){var N=1.9,I=h.circle(m+T*(v*N),y+E,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=l.create({pointA:{x:m+T*(v*N),y},bodyB:I});c.addBody(C,I),c.addConstraint(C,S)}return C},g(r,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),r.car=function(m,y,w,v,E){var C=d.nextGroup(!0),T=20,N=-w*.5+T,I=w*.5-T,S=0,A=c.create({label:"Car"}),_=h.rectangle(m,y,w,v,{collisionFilter:{group:C},chamfer:{radius:v*.5},density:2e-4}),D=h.circle(m+N,y+S,E,{collisionFilter:{group:C},friction:.8}),O=h.circle(m+I,y+S,E,{collisionFilter:{group:C},friction:.8}),P=l.create({bodyB:_,pointB:{x:N,y:S},bodyA:D,stiffness:1,length:0}),U=l.create({bodyB:_,pointB:{x:I,y:S},bodyA:O,stiffness:1,length:0});return c.addBody(A,_),c.addBody(A,D),c.addBody(A,O),c.addConstraint(A,P),c.addConstraint(A,U),A},g(r,"car","Composites.car  moved to car example"),r.softBody=function(m,y,w,v,E,C,T,N,I,S){I=f.extend({inertia:1/0},I),S=f.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var A=r.stack(m,y,w,v,E,C,function(_,D){return h.circle(_,D,N,I)});return r.mesh(A,w,v,T,S),A.label="Soft Body",A},g(r,"softBody","Composites.softBody  moved to softBody and cloth examples")})()}),(function(n,s,i){var r={};n.exports=r;var c=i(9),l=i(0),f=l.deprecated;(function(){r.create=function(d){var h={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(h,d)},r.update=function(d,h,g,m){var y,w,v,E=g.world,C=d.buckets,T,N,I=!1;for(y=0;y<h.length;y++){var S=h[y];if(!(S.isSleeping&&!m)&&!(E.bounds&&(S.bounds.max.x<E.bounds.min.x||S.bounds.min.x>E.bounds.max.x||S.bounds.max.y<E.bounds.min.y||S.bounds.min.y>E.bounds.max.y))){var A=r._getRegion(d,S);if(!S.region||A.id!==S.region.id||m){(!S.region||m)&&(S.region=A);var _=r._regionUnion(A,S.region);for(w=_.startCol;w<=_.endCol;w++)for(v=_.startRow;v<=_.endRow;v++){N=r._getBucketId(w,v),T=C[N];var D=w>=A.startCol&&w<=A.endCol&&v>=A.startRow&&v<=A.endRow,O=w>=S.region.startCol&&w<=S.region.endCol&&v>=S.region.startRow&&v<=S.region.endRow;!D&&O&&O&&T&&r._bucketRemoveBody(d,T,S),(S.region===A||D&&!O||m)&&(T||(T=r._createBucket(C,N)),r._bucketAddBody(d,T,S))}S.region=A,I=!0}}}I&&(d.pairsList=r._createActivePairsList(d))},f(r,"update","Grid.update  replaced by Matter.Detector"),r.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},f(r,"clear","Grid.clear  replaced by Matter.Detector"),r._regionUnion=function(d,h){var g=Math.min(d.startCol,h.startCol),m=Math.max(d.endCol,h.endCol),y=Math.min(d.startRow,h.startRow),w=Math.max(d.endRow,h.endRow);return r._createRegion(g,m,y,w)},r._getRegion=function(d,h){var g=h.bounds,m=Math.floor(g.min.x/d.bucketWidth),y=Math.floor(g.max.x/d.bucketWidth),w=Math.floor(g.min.y/d.bucketHeight),v=Math.floor(g.max.y/d.bucketHeight);return r._createRegion(m,y,w,v)},r._createRegion=function(d,h,g,m){return{id:d+","+h+","+g+","+m,startCol:d,endCol:h,startRow:g,endRow:m}},r._getBucketId=function(d,h){return"C"+d+"R"+h},r._createBucket=function(d,h){var g=d[h]=[];return g},r._bucketAddBody=function(d,h,g){var m=d.pairs,y=c.id,w=h.length,v;for(v=0;v<w;v++){var E=h[v];if(!(g.id===E.id||g.isStatic&&E.isStatic)){var C=y(g,E),T=m[C];T?T[2]+=1:m[C]=[g,E,1]}}h.push(g)},r._bucketRemoveBody=function(d,h,g){var m=d.pairs,y=c.id,w;h.splice(l.indexOf(h,g),1);var v=h.length;for(w=0;w<v;w++){var E=m[y(g,h[w])];E&&(E[2]-=1)}},r._createActivePairsList=function(d){var h,g=d.pairs,m=l.keys(g),y=m.length,w=[],v;for(v=0;v<y;v++)h=g[m[v]],h[2]>0?w.push(h):delete g[m[v]];return w}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(7),f=i(14),d=i(5),h=i(13),g=i(10),m=i(6),y=i(0),w=i(1);(function(){r.create=function(v,E){var C=(v?v.mouse:null)||(E?E.mouse:null);C||(v&&v.render&&v.render.canvas?C=f.create(v.render.canvas):E&&E.element?C=f.create(E.element):(C=f.create(),y.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var T=g.create({label:"Mouse Constraint",pointA:C.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),N={type:"mouseConstraint",mouse:C,element:null,body:null,constraint:T,collisionFilter:{category:1,mask:4294967295,group:0}},I=y.extend(N,E);return d.on(v,"beforeUpdate",function(){var S=m.allBodies(v.world);r.update(I,S),r._triggerEvents(I)}),I},r.update=function(v,E){var C=v.mouse,T=v.constraint,N=v.body;if(C.button===0){if(T.bodyB)l.set(T.bodyB,!1),T.pointA=C.position;else for(var I=0;I<E.length;I++)if(N=E[I],w.contains(N.bounds,C.position)&&h.canCollide(N.collisionFilter,v.collisionFilter))for(var S=N.parts.length>1?1:0;S<N.parts.length;S++){var A=N.parts[S];if(c.contains(A.vertices,C.position)){T.pointA=C.position,T.bodyB=v.body=N,T.pointB={x:C.position.x-N.position.x,y:C.position.y-N.position.y},T.angleB=N.angle,l.set(N,!1),d.trigger(v,"startdrag",{mouse:C,body:N});break}}}else T.bodyB=v.body=null,T.pointB=null,N&&d.trigger(v,"enddrag",{mouse:C,body:N})},r._triggerEvents=function(v){var E=v.mouse,C=E.sourceEvents;C.mousemove&&d.trigger(v,"mousemove",{mouse:E}),C.mousedown&&d.trigger(v,"mousedown",{mouse:E}),C.mouseup&&d.trigger(v,"mouseup",{mouse:E}),f.clearSourceEvents(E)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(8),f=i(1),d=i(12),h=i(3);(function(){r.collides=function(g,m){for(var y=[],w=m.length,v=g.bounds,E=l.collides,C=f.overlaps,T=0;T<w;T++){var N=m[T],I=N.parts.length,S=I===1?0:1;if(C(N.bounds,v))for(var A=S;A<I;A++){var _=N.parts[A];if(C(_.bounds,v)){var D=E(_,g);if(D){y.push(D);break}}}}return y},r.ray=function(g,m,y,w){w=w||1e-100;for(var v=c.angle(m,y),E=c.magnitude(c.sub(m,y)),C=(y.x+m.x)*.5,T=(y.y+m.y)*.5,N=d.rectangle(C,T,E,w,{angle:v}),I=r.collides(N,g),S=0;S<I.length;S+=1){var A=I[S];A.body=A.bodyB=A.bodyA}return I},r.region=function(g,m,y){for(var w=[],v=0;v<g.length;v++){var E=g[v],C=f.overlaps(E.bounds,m);(C&&!y||!C&&y)&&w.push(E)}return w},r.point=function(g,m){for(var y=[],w=0;w<g.length;w++){var v=g[w];if(f.contains(v.bounds,m))for(var E=v.parts.length===1?0:1;E<v.parts.length;E++){var C=v.parts[E];if(f.contains(C.bounds,m)&&h.contains(C.vertices,m)){y.push(v);break}}}return y}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(4),l=i(0),f=i(6),d=i(1),h=i(5),g=i(2),m=i(14);(function(){var y,w;typeof window<"u"&&(y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(l.now())},1e3/60)},w=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(S){var A={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},_=l.extend(A,S);return _.canvas&&(_.canvas.width=_.options.width||_.canvas.width,_.canvas.height=_.options.height||_.canvas.height),_.mouse=S.mouse,_.engine=S.engine,_.canvas=_.canvas||C(_.options.width,_.options.height),_.context=_.canvas.getContext("2d"),_.textures={},_.bounds=_.bounds||{min:{x:0,y:0},max:{x:_.canvas.width,y:_.canvas.height}},_.controller=r,_.options.showBroadphase=!1,_.options.pixelRatio!==1&&r.setPixelRatio(_,_.options.pixelRatio),l.isElement(_.element)&&_.element.appendChild(_.canvas),_},r.run=function(S){(function A(_){S.frameRequestId=y(A),v(S,_),r.world(S,_),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&r.stats(S,S.context,_),(S.options.showPerformance||S.options.showDebug)&&r.performance(S,S.context,_),S.context.setTransform(1,0,0,1,0,0)})()},r.stop=function(S){w(S.frameRequestId)},r.setPixelRatio=function(S,A){var _=S.options,D=S.canvas;A==="auto"&&(A=T(D)),_.pixelRatio=A,D.setAttribute("data-pixel-ratio",A),D.width=_.width*A,D.height=_.height*A,D.style.width=_.width+"px",D.style.height=_.height+"px"},r.setSize=function(S,A,_){S.options.width=A,S.options.height=_,S.bounds.max.x=S.bounds.min.x+A,S.bounds.max.y=S.bounds.min.y+_,S.options.pixelRatio!==1?r.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=A,S.canvas.height=_)},r.lookAt=function(S,A,_,D){D=typeof D<"u"?D:!0,A=l.isArray(A)?A:[A],_=_||{x:0,y:0};for(var O={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<A.length;P+=1){var U=A[P],L=U.bounds?U.bounds.min:U.min||U.position||U,H=U.bounds?U.bounds.max:U.max||U.position||U;L&&H&&(L.x<O.min.x&&(O.min.x=L.x),H.x>O.max.x&&(O.max.x=H.x),L.y<O.min.y&&(O.min.y=L.y),H.y>O.max.y&&(O.max.y=H.y))}var q=O.max.x-O.min.x+2*_.x,$=O.max.y-O.min.y+2*_.y,R=S.canvas.height,k=S.canvas.width,F=k/R,K=q/$,W=1,j=1;K>F?j=K/F:W=F/K,S.options.hasBounds=!0,S.bounds.min.x=O.min.x,S.bounds.max.x=O.min.x+q*W,S.bounds.min.y=O.min.y,S.bounds.max.y=O.min.y+$*j,D&&(S.bounds.min.x+=q*.5-q*W*.5,S.bounds.max.x+=q*.5-q*W*.5,S.bounds.min.y+=$*.5-$*j*.5,S.bounds.max.y+=$*.5-$*j*.5),S.bounds.min.x-=_.x,S.bounds.max.x-=_.x,S.bounds.min.y-=_.y,S.bounds.max.y-=_.y,S.mouse&&(m.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),m.setOffset(S.mouse,S.bounds.min))},r.startViewTransform=function(S){var A=S.bounds.max.x-S.bounds.min.x,_=S.bounds.max.y-S.bounds.min.y,D=A/S.options.width,O=_/S.options.height;S.context.setTransform(S.options.pixelRatio/D,0,0,S.options.pixelRatio/O,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},r.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},r.world=function(S,A){var _=l.now(),D=S.engine,O=D.world,P=S.canvas,U=S.context,L=S.options,H=S.timing,q=f.allBodies(O),$=f.allConstraints(O),R=L.wireframes?L.wireframeBackground:L.background,k=[],F=[],K,W={timestamp:D.timing.timestamp};if(h.trigger(S,"beforeRender",W),S.currentBackground!==R&&I(S,R),U.globalCompositeOperation="source-in",U.fillStyle="transparent",U.fillRect(0,0,P.width,P.height),U.globalCompositeOperation="source-over",L.hasBounds){for(K=0;K<q.length;K++){var j=q[K];d.overlaps(j.bounds,S.bounds)&&k.push(j)}for(K=0;K<$.length;K++){var X=$[K],Z=X.bodyA,ee=X.bodyB,ae=X.pointA,oe=X.pointB;Z&&(ae=g.add(Z.position,X.pointA)),ee&&(oe=g.add(ee.position,X.pointB)),!(!ae||!oe)&&(d.contains(S.bounds,ae)||d.contains(S.bounds,oe))&&F.push(X)}r.startViewTransform(S),S.mouse&&(m.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),m.setOffset(S.mouse,S.bounds.min))}else F=$,k=q,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!L.wireframes||D.enableSleeping&&L.showSleeping?r.bodies(S,k,U):(L.showConvexHulls&&r.bodyConvexHulls(S,k,U),r.bodyWireframes(S,k,U)),L.showBounds&&r.bodyBounds(S,k,U),(L.showAxes||L.showAngleIndicator)&&r.bodyAxes(S,k,U),L.showPositions&&r.bodyPositions(S,k,U),L.showVelocity&&r.bodyVelocity(S,k,U),L.showIds&&r.bodyIds(S,k,U),L.showSeparations&&r.separations(S,D.pairs.list,U),L.showCollisions&&r.collisions(S,D.pairs.list,U),L.showVertexNumbers&&r.vertexNumbers(S,k,U),L.showMousePosition&&r.mousePosition(S,S.mouse,U),r.constraints(F,U),L.hasBounds&&r.endViewTransform(S),h.trigger(S,"afterRender",W),H.lastElapsed=l.now()-_},r.stats=function(S,A,_){for(var D=S.engine,O=D.world,P=f.allBodies(O),U=0,L=55,H=44,q=0,$=0,R=0;R<P.length;R+=1)U+=P[R].parts.length;var k={Part:U,Body:P.length,Cons:f.allConstraints(O).length,Comp:f.allComposites(O).length,Pair:D.pairs.list.length};A.fillStyle="#0e0f19",A.fillRect(q,$,L*5.5,H),A.font="12px Arial",A.textBaseline="top",A.textAlign="right";for(var F in k){var K=k[F];A.fillStyle="#aaa",A.fillText(F,q+L,$+8),A.fillStyle="#eee",A.fillText(K,q+L,$+26),q+=L}},r.performance=function(S,A){var _=S.engine,D=S.timing,O=D.deltaHistory,P=D.elapsedHistory,U=D.timestampElapsedHistory,L=D.engineDeltaHistory,H=D.engineUpdatesHistory,q=D.engineElapsedHistory,$=_.timing.lastUpdatesPerFrame,R=_.timing.lastDelta,k=E(O),F=E(P),K=E(L),W=E(H),j=E(q),X=E(U),Z=X/k||0,ee=Math.round(k/R),ae=1e3/k||0,oe=4,be=12,Ae=60,Ne=34,We=10,Qe=69;A.fillStyle="#0e0f19",A.fillRect(0,50,be*5+Ae*6+22,Ne),r.status(A,We,Qe,Ae,oe,O.length,Math.round(ae)+" fps",ae/r._goodFps,function(xt){return O[xt]/k-1}),r.status(A,We+be+Ae,Qe,Ae,oe,L.length,R.toFixed(2)+" dt",r._goodDelta/R,function(xt){return L[xt]/K-1}),r.status(A,We+(be+Ae)*2,Qe,Ae,oe,H.length,$+" upf",Math.pow(l.clamp(W/ee||1,0,1),4),function(xt){return H[xt]/W-1}),r.status(A,We+(be+Ae)*3,Qe,Ae,oe,q.length,j.toFixed(2)+" ut",1-$*j/r._goodFps,function(xt){return q[xt]/j-1}),r.status(A,We+(be+Ae)*4,Qe,Ae,oe,P.length,F.toFixed(2)+" rt",1-F/r._goodFps,function(xt){return P[xt]/F-1}),r.status(A,We+(be+Ae)*5,Qe,Ae,oe,U.length,Z.toFixed(2)+" x",Z*Z*Z,function(xt){return(U[xt]/O[xt]/Z||0)-1})},r.status=function(S,A,_,D,O,P,U,L,H){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(A,_+7,D,1),S.beginPath(),S.moveTo(A,_+7-O*l.clamp(.4*H(0),-2,2));for(var q=0;q<D;q+=1)S.lineTo(A+q,_+7-(q<P?O*l.clamp(.4*H(q),-2,2):0));S.stroke(),S.fillStyle="hsl("+l.clamp(25+95*L,0,120)+",100%,60%)",S.fillRect(A,_-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(U,A+D,_-5)},r.constraints=function(S,A){for(var _=A,D=0;D<S.length;D++){var O=S[D];if(!(!O.render.visible||!O.pointA||!O.pointB)){var P=O.bodyA,U=O.bodyB,L,H;if(P?L=g.add(P.position,O.pointA):L=O.pointA,O.render.type==="pin")_.beginPath(),_.arc(L.x,L.y,3,0,2*Math.PI),_.closePath();else{if(U?H=g.add(U.position,O.pointB):H=O.pointB,_.beginPath(),_.moveTo(L.x,L.y),O.render.type==="spring")for(var q=g.sub(H,L),$=g.perp(g.normalise(q)),R=Math.ceil(l.clamp(O.length/5,12,20)),k,F=1;F<R;F+=1)k=F%2===0?1:-1,_.lineTo(L.x+q.x*(F/R)+$.x*k*4,L.y+q.y*(F/R)+$.y*k*4);_.lineTo(H.x,H.y)}O.render.lineWidth&&(_.lineWidth=O.render.lineWidth,_.strokeStyle=O.render.strokeStyle,_.stroke()),O.render.anchors&&(_.fillStyle=O.render.strokeStyle,_.beginPath(),_.arc(L.x,L.y,3,0,2*Math.PI),_.arc(H.x,H.y,3,0,2*Math.PI),_.closePath(),_.fill())}}},r.bodies=function(S,A,_){var D=_;S.engine;var O=S.options,P=O.showInternalEdges||!O.wireframes,U,L,H,q;for(H=0;H<A.length;H++)if(U=A[H],!!U.render.visible){for(q=U.parts.length>1?1:0;q<U.parts.length;q++)if(L=U.parts[q],!!L.render.visible){if(O.showSleeping&&U.isSleeping?D.globalAlpha=.5*L.render.opacity:L.render.opacity!==1&&(D.globalAlpha=L.render.opacity),L.render.sprite&&L.render.sprite.texture&&!O.wireframes){var $=L.render.sprite,R=N(S,$.texture);D.translate(L.position.x,L.position.y),D.rotate(L.angle),D.drawImage(R,R.width*-$.xOffset*$.xScale,R.height*-$.yOffset*$.yScale,R.width*$.xScale,R.height*$.yScale),D.rotate(-L.angle),D.translate(-L.position.x,-L.position.y)}else{if(L.circleRadius)D.beginPath(),D.arc(L.position.x,L.position.y,L.circleRadius,0,2*Math.PI);else{D.beginPath(),D.moveTo(L.vertices[0].x,L.vertices[0].y);for(var k=1;k<L.vertices.length;k++)!L.vertices[k-1].isInternal||P?D.lineTo(L.vertices[k].x,L.vertices[k].y):D.moveTo(L.vertices[k].x,L.vertices[k].y),L.vertices[k].isInternal&&!P&&D.moveTo(L.vertices[(k+1)%L.vertices.length].x,L.vertices[(k+1)%L.vertices.length].y);D.lineTo(L.vertices[0].x,L.vertices[0].y),D.closePath()}O.wireframes?(D.lineWidth=1,D.strokeStyle=S.options.wireframeStrokeStyle,D.stroke()):(D.fillStyle=L.render.fillStyle,L.render.lineWidth&&(D.lineWidth=L.render.lineWidth,D.strokeStyle=L.render.strokeStyle,D.stroke()),D.fill())}D.globalAlpha=1}}},r.bodyWireframes=function(S,A,_){var D=_,O=S.options.showInternalEdges,P,U,L,H,q;for(D.beginPath(),L=0;L<A.length;L++)if(P=A[L],!!P.render.visible)for(q=P.parts.length>1?1:0;q<P.parts.length;q++){for(U=P.parts[q],D.moveTo(U.vertices[0].x,U.vertices[0].y),H=1;H<U.vertices.length;H++)!U.vertices[H-1].isInternal||O?D.lineTo(U.vertices[H].x,U.vertices[H].y):D.moveTo(U.vertices[H].x,U.vertices[H].y),U.vertices[H].isInternal&&!O&&D.moveTo(U.vertices[(H+1)%U.vertices.length].x,U.vertices[(H+1)%U.vertices.length].y);D.lineTo(U.vertices[0].x,U.vertices[0].y)}D.lineWidth=1,D.strokeStyle=S.options.wireframeStrokeStyle,D.stroke()},r.bodyConvexHulls=function(S,A,_){var D=_,O,P,U;for(D.beginPath(),P=0;P<A.length;P++)if(O=A[P],!(!O.render.visible||O.parts.length===1)){for(D.moveTo(O.vertices[0].x,O.vertices[0].y),U=1;U<O.vertices.length;U++)D.lineTo(O.vertices[U].x,O.vertices[U].y);D.lineTo(O.vertices[0].x,O.vertices[0].y)}D.lineWidth=1,D.strokeStyle="rgba(255,255,255,0.2)",D.stroke()},r.vertexNumbers=function(S,A,_){var D=_,O,P,U;for(O=0;O<A.length;O++){var L=A[O].parts;for(U=L.length>1?1:0;U<L.length;U++){var H=L[U];for(P=0;P<H.vertices.length;P++)D.fillStyle="rgba(255,255,255,0.2)",D.fillText(O+"_"+P,H.position.x+(H.vertices[P].x-H.position.x)*.8,H.position.y+(H.vertices[P].y-H.position.y)*.8)}}},r.mousePosition=function(S,A,_){var D=_;D.fillStyle="rgba(255,255,255,0.8)",D.fillText(A.position.x+"  "+A.position.y,A.position.x+5,A.position.y-5)},r.bodyBounds=function(S,A,_){var D=_;S.engine;var O=S.options;D.beginPath();for(var P=0;P<A.length;P++){var U=A[P];if(U.render.visible)for(var L=A[P].parts,H=L.length>1?1:0;H<L.length;H++){var q=L[H];D.rect(q.bounds.min.x,q.bounds.min.y,q.bounds.max.x-q.bounds.min.x,q.bounds.max.y-q.bounds.min.y)}}O.wireframes?D.strokeStyle="rgba(255,255,255,0.08)":D.strokeStyle="rgba(0,0,0,0.1)",D.lineWidth=1,D.stroke()},r.bodyAxes=function(S,A,_){var D=_;S.engine;var O=S.options,P,U,L,H;for(D.beginPath(),U=0;U<A.length;U++){var q=A[U],$=q.parts;if(q.render.visible)if(O.showAxes)for(L=$.length>1?1:0;L<$.length;L++)for(P=$[L],H=0;H<P.axes.length;H++){var R=P.axes[H];D.moveTo(P.position.x,P.position.y),D.lineTo(P.position.x+R.x*20,P.position.y+R.y*20)}else for(L=$.length>1?1:0;L<$.length;L++)for(P=$[L],H=0;H<P.axes.length;H++)D.moveTo(P.position.x,P.position.y),D.lineTo((P.vertices[0].x+P.vertices[P.vertices.length-1].x)/2,(P.vertices[0].y+P.vertices[P.vertices.length-1].y)/2)}O.wireframes?(D.strokeStyle="indianred",D.lineWidth=1):(D.strokeStyle="rgba(255, 255, 255, 0.4)",D.globalCompositeOperation="overlay",D.lineWidth=2),D.stroke(),D.globalCompositeOperation="source-over"},r.bodyPositions=function(S,A,_){var D=_;S.engine;var O=S.options,P,U,L,H;for(D.beginPath(),L=0;L<A.length;L++)if(P=A[L],!!P.render.visible)for(H=0;H<P.parts.length;H++)U=P.parts[H],D.arc(U.position.x,U.position.y,3,0,2*Math.PI,!1),D.closePath();for(O.wireframes?D.fillStyle="indianred":D.fillStyle="rgba(0,0,0,0.5)",D.fill(),D.beginPath(),L=0;L<A.length;L++)P=A[L],P.render.visible&&(D.arc(P.positionPrev.x,P.positionPrev.y,2,0,2*Math.PI,!1),D.closePath());D.fillStyle="rgba(255,165,0,0.8)",D.fill()},r.bodyVelocity=function(S,A,_){var D=_;D.beginPath();for(var O=0;O<A.length;O++){var P=A[O];if(P.render.visible){var U=c.getVelocity(P);D.moveTo(P.position.x,P.position.y),D.lineTo(P.position.x+U.x,P.position.y+U.y)}}D.lineWidth=3,D.strokeStyle="cornflowerblue",D.stroke()},r.bodyIds=function(S,A,_){var D=_,O,P;for(O=0;O<A.length;O++)if(A[O].render.visible){var U=A[O].parts;for(P=U.length>1?1:0;P<U.length;P++){var L=U[P];D.font="12px Arial",D.fillStyle="rgba(255,255,255,0.5)",D.fillText(L.id,L.position.x+10,L.position.y-10)}}},r.collisions=function(S,A,_){var D=_,O=S.options,P,U,L,H;for(D.beginPath(),L=0;L<A.length;L++)if(P=A[L],!!P.isActive)for(U=P.collision,H=0;H<P.contactCount;H++){var q=P.contacts[H],$=q.vertex;D.rect($.x-1.5,$.y-1.5,3.5,3.5)}for(O.wireframes?D.fillStyle="rgba(255,255,255,0.7)":D.fillStyle="orange",D.fill(),D.beginPath(),L=0;L<A.length;L++)if(P=A[L],!!P.isActive&&(U=P.collision,P.contactCount>0)){var R=P.contacts[0].vertex.x,k=P.contacts[0].vertex.y;P.contactCount===2&&(R=(P.contacts[0].vertex.x+P.contacts[1].vertex.x)/2,k=(P.contacts[0].vertex.y+P.contacts[1].vertex.y)/2),U.bodyB===U.supports[0].body||U.bodyA.isStatic===!0?D.moveTo(R-U.normal.x*8,k-U.normal.y*8):D.moveTo(R+U.normal.x*8,k+U.normal.y*8),D.lineTo(R,k)}O.wireframes?D.strokeStyle="rgba(255,165,0,0.7)":D.strokeStyle="orange",D.lineWidth=1,D.stroke()},r.separations=function(S,A,_){var D=_,O=S.options,P,U,L,H,q;for(D.beginPath(),q=0;q<A.length;q++)if(P=A[q],!!P.isActive){U=P.collision,L=U.bodyA,H=U.bodyB;var $=1;!H.isStatic&&!L.isStatic&&($=.5),H.isStatic&&($=0),D.moveTo(H.position.x,H.position.y),D.lineTo(H.position.x-U.penetration.x*$,H.position.y-U.penetration.y*$),$=1,!H.isStatic&&!L.isStatic&&($=.5),L.isStatic&&($=0),D.moveTo(L.position.x,L.position.y),D.lineTo(L.position.x+U.penetration.x*$,L.position.y+U.penetration.y*$)}O.wireframes?D.strokeStyle="rgba(255,165,0,0.5)":D.strokeStyle="orange",D.stroke()},r.inspector=function(S,A){S.engine;var _=S.selected,D=S.render,O=D.options,P;if(O.hasBounds){var U=D.bounds.max.x-D.bounds.min.x,L=D.bounds.max.y-D.bounds.min.y,H=U/D.options.width,q=L/D.options.height;A.scale(1/H,1/q),A.translate(-D.bounds.min.x,-D.bounds.min.y)}for(var $=0;$<_.length;$++){var R=_[$].data;switch(A.translate(.5,.5),A.lineWidth=1,A.strokeStyle="rgba(255,165,0,0.9)",A.setLineDash([1,2]),R.type){case"body":P=R.bounds,A.beginPath(),A.rect(Math.floor(P.min.x-3),Math.floor(P.min.y-3),Math.floor(P.max.x-P.min.x+6),Math.floor(P.max.y-P.min.y+6)),A.closePath(),A.stroke();break;case"constraint":var k=R.pointA;R.bodyA&&(k=R.pointB),A.beginPath(),A.arc(k.x,k.y,10,0,2*Math.PI),A.closePath(),A.stroke();break}A.setLineDash([]),A.translate(-.5,-.5)}S.selectStart!==null&&(A.translate(.5,.5),A.lineWidth=1,A.strokeStyle="rgba(255,165,0,0.6)",A.fillStyle="rgba(255,165,0,0.1)",P=S.selectBounds,A.beginPath(),A.rect(Math.floor(P.min.x),Math.floor(P.min.y),Math.floor(P.max.x-P.min.x),Math.floor(P.max.y-P.min.y)),A.closePath(),A.stroke(),A.fill(),A.translate(-.5,-.5)),O.hasBounds&&A.setTransform(1,0,0,1,0,0)};var v=function(S,A){var _=S.engine,D=S.timing,O=D.historySize,P=_.timing.timestamp;D.delta=A-D.lastTime||r._goodDelta,D.lastTime=A,D.timestampElapsed=P-D.lastTimestamp||0,D.lastTimestamp=P,D.deltaHistory.unshift(D.delta),D.deltaHistory.length=Math.min(D.deltaHistory.length,O),D.engineDeltaHistory.unshift(_.timing.lastDelta),D.engineDeltaHistory.length=Math.min(D.engineDeltaHistory.length,O),D.timestampElapsedHistory.unshift(D.timestampElapsed),D.timestampElapsedHistory.length=Math.min(D.timestampElapsedHistory.length,O),D.engineUpdatesHistory.unshift(_.timing.lastUpdatesPerFrame),D.engineUpdatesHistory.length=Math.min(D.engineUpdatesHistory.length,O),D.engineElapsedHistory.unshift(_.timing.lastElapsed),D.engineElapsedHistory.length=Math.min(D.engineElapsedHistory.length,O),D.elapsedHistory.unshift(D.lastElapsed),D.elapsedHistory.length=Math.min(D.elapsedHistory.length,O)},E=function(S){for(var A=0,_=0;_<S.length;_+=1)A+=S[_];return A/S.length||0},C=function(S,A){var _=document.createElement("canvas");return _.width=S,_.height=A,_.oncontextmenu=function(){return!1},_.onselectstart=function(){return!1},_},T=function(S){var A=S.getContext("2d"),_=window.devicePixelRatio||1,D=A.webkitBackingStorePixelRatio||A.mozBackingStorePixelRatio||A.msBackingStorePixelRatio||A.oBackingStorePixelRatio||A.backingStorePixelRatio||1;return _/D},N=function(S,A){var _=S.textures[A];return _||(_=S.textures[A]=new Image,_.src=A,_)},I=function(S,A){var _=A;/(jpg|gif|png)$/.test(A)&&(_="url("+A+")"),S.canvas.style.background=_,S.canvas.style.backgroundSize="contain",S.currentBackground=A}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(5),l=i(17),f=i(0);(function(){r._maxFrameDelta=1e3/15,r._frameDeltaFallback=1e3/60,r._timeBufferMargin=1.5,r._elapsedNextEstimate=1,r._smoothingLowerBound=.1,r._smoothingUpperBound=.9,r.create=function(h){var g={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},m=f.extend(g,h);return m.fps=0,m},r.run=function(h,g){return h.timeBuffer=r._frameDeltaFallback,(function m(y){h.frameRequestId=r._onNextFrame(h,m),y&&h.enabled&&r.tick(h,g,y)})(),h},r.tick=function(h,g,m){var y=f.now(),w=h.delta,v=0,E=m-h.timeLastTick;if((!E||!h.timeLastTick||E>Math.max(r._maxFrameDelta,h.maxFrameTime))&&(E=h.frameDelta||r._frameDeltaFallback),h.frameDeltaSmoothing){h.frameDeltaHistory.push(E),h.frameDeltaHistory=h.frameDeltaHistory.slice(-h.frameDeltaHistorySize);var C=h.frameDeltaHistory.slice(0).sort(),T=h.frameDeltaHistory.slice(C.length*r._smoothingLowerBound,C.length*r._smoothingUpperBound),N=d(T);E=N||E}h.frameDeltaSnapping&&(E=1e3/Math.round(1e3/E)),h.frameDelta=E,h.timeLastTick=m,h.timeBuffer+=h.frameDelta,h.timeBuffer=f.clamp(h.timeBuffer,0,h.frameDelta+w*r._timeBufferMargin),h.lastUpdatesDeferred=0;var I=h.maxUpdates||Math.ceil(h.maxFrameTime/w),S={timestamp:g.timing.timestamp};c.trigger(h,"beforeTick",S),c.trigger(h,"tick",S);for(var A=f.now();w>0&&h.timeBuffer>=w*r._timeBufferMargin;){c.trigger(h,"beforeUpdate",S),l.update(g,w),c.trigger(h,"afterUpdate",S),h.timeBuffer-=w,v+=1;var _=f.now()-y,D=f.now()-A,O=_+r._elapsedNextEstimate*D/v;if(v>=I||O>h.maxFrameTime){h.lastUpdatesDeferred=Math.round(Math.max(0,h.timeBuffer/w-r._timeBufferMargin));break}}g.timing.lastUpdatesPerFrame=v,c.trigger(h,"afterTick",S),h.frameDeltaHistory.length>=100&&(h.lastUpdatesDeferred&&Math.round(h.frameDelta/w)>I?f.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):h.lastUpdatesDeferred&&f.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof h.isFixed<"u"&&f.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(h.deltaMin||h.deltaMax)&&f.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),h.fps!==0&&f.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},r.stop=function(h){r._cancelNextFrame(h)},r._onNextFrame=function(h,g){if(typeof window<"u"&&window.requestAnimationFrame)h.frameRequestId=window.requestAnimationFrame(g);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return h.frameRequestId},r._cancelNextFrame=function(h){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(h.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var d=function(h){for(var g=0,m=h.length,y=0;y<m;y+=1)g+=h[y];return g/m||0}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(8),l=i(0),f=l.deprecated;(function(){r.collides=function(d,h){return c.collides(d,h)},f(r,"collides","SAT.collides  replaced by Collision.collides")})()}),(function(n,s,i){var r={};n.exports=r,i(1);var c=i(0);(function(){r.pathToVertices=function(l,f){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,h,g,m,y,w,v,E,C,T,N=[],I,S,A=0,_=0,D=0;f=f||15;var O=function(U,L,H){var q=H%2===1&&H>1;if(!C||U!=C.x||L!=C.y){C&&q?(I=C.x,S=C.y):(I=0,S=0);var $={x:I+U,y:S+L};(q||!C)&&(C=$),N.push($),_=I+U,D=S+L}},P=function(U){var L=U.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":_=U.x,D=U.y;break;case"H":_=U.x;break;case"V":D=U.y;break}O(_,D,U.pathSegType)}};for(r._svgPathToAbsolute(l),g=l.getTotalLength(),w=[],d=0;d<l.pathSegList.numberOfItems;d+=1)w.push(l.pathSegList.getItem(d));for(v=w.concat();A<g;){if(T=l.getPathSegAtLength(A),y=w[T],y!=E){for(;v.length&&v[0]!=y;)P(v.shift());E=y}switch(y.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":m=l.getPointAtLength(A),O(m.x,m.y,0);break}A+=f}for(d=0,h=v.length;d<h;++d)P(v[d]);return N},r._svgPathToAbsolute=function(l){for(var f,d,h,g,m,y,w=l.pathSegList,v=0,E=0,C=w.numberOfItems,T=0;T<C;++T){var N=w.getItem(T),I=N.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(I))"x"in N&&(v=N.x),"y"in N&&(E=N.y);else switch("x1"in N&&(h=v+N.x1),"x2"in N&&(m=v+N.x2),"y1"in N&&(g=E+N.y1),"y2"in N&&(y=E+N.y2),"x"in N&&(v+=N.x),"y"in N&&(E+=N.y),I){case"m":w.replaceItem(l.createSVGPathSegMovetoAbs(v,E),T);break;case"l":w.replaceItem(l.createSVGPathSegLinetoAbs(v,E),T);break;case"h":w.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(v),T);break;case"v":w.replaceItem(l.createSVGPathSegLinetoVerticalAbs(E),T);break;case"c":w.replaceItem(l.createSVGPathSegCurvetoCubicAbs(v,E,h,g,m,y),T);break;case"s":w.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(v,E,m,y),T);break;case"q":w.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(v,E,h,g),T);break;case"t":w.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(v,E),T);break;case"a":w.replaceItem(l.createSVGPathSegArcAbs(v,E,N.r1,N.r2,N.angle,N.largeArcFlag,N.sweepFlag),T);break;case"z":case"Z":v=f,E=d;break}(I=="M"||I=="m")&&(f=v,d=E)}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(6);i(0),(function(){r.create=c.create,r.add=c.add,r.remove=c.remove,r.clear=c.clear,r.addComposite=c.addComposite,r.addBody=c.addBody,r.addConstraint=c.addConstraint})()})])})})(K0)),K0.exports}var xce=Ece();const Pn=sf(xce),Sce=({onLevelComplete:t,onGameOver:e})=>{const n=pe.useRef(null),s=pe.useRef(null),i=pe.useRef(null),[r,c]=pe.useState(!1),[l,f]=pe.useState({x:0,y:0}),[d,h]=pe.useState({x:0,y:0}),[g,m]=pe.useState(5),[y,w]=pe.useState(0),[v,E]=pe.useState(0),{level:C,coins:T,crystals:N,traps:I}=Yo(),S={x:150,y:500},A=150;pe.useEffect(()=>{const $=Pn.Engine.create();s.current=$,$.gravity.y=1;const R=Pn.Render.create({element:n.current,engine:$,options:{width:800,height:600,wireframes:!1,background:"#0f172a"}});i.current=R;const k=Pn.Bodies.rectangle(400,590,810,20,{isStatic:!0,render:{fillStyle:"#fde047"}}),F=Pn.Bodies.rectangle(0,300,20,600,{isStatic:!0,render:{fillStyle:"#fde047"}}),K=Pn.Bodies.rectangle(800,300,20,600,{isStatic:!0,render:{fillStyle:"#fde047"}}),W=_(C);return Pn.World.add($.world,[k,F,K,...W]),Pn.Engine.run($),Pn.Render.run(R),Pn.Events.on($,"collisionStart",j=>{j.pairs.forEach(X=>{const{bodyA:Z,bodyB:ee}=X;if(Z.label==="projectile"||ee.label==="projectile"){const ae=Z.label==="projectile"?ee:Z;ae.label&&ae.label.includes("block")&&P(ae)}})}),()=>{Pn.Render.stop(R),Pn.Engine.clear($),R.canvas.remove()}},[C]);const _=$=>{const R=[],W=Math.min(3+Math.floor($/3),6);for(let j=0;j<W;j++){const X=W-j;for(let Z=0;Z<X;Z++){const ee=500+(Z-X/2)*45,ae=400-j*45,oe=D($),be=O(ee,ae,40,oe);R.push(be)}}return R},D=($,R)=>{const k=Math.random();return $<5?k<.8?"wooden":"crystal":$<10?k<.5?"wooden":k<.85?"stone":"crystal":k<.3?"wooden":k<.6?"stone":k<.85?"metal":"crystal"},O=($,R,k,F)=>{const K={wooden:"#8B4513",stone:"#808080",metal:"#4A4A4A",crystal:"#3b82f6",trap:"#ef4444"},W={wooden:.001,stone:.002,metal:.003,crystal:5e-4,trap:.001};return Pn.Bodies.rectangle($,R,k,k,{label:`${F}-block`,render:{fillStyle:K[F]},density:W[F],friction:.8,restitution:.3})},P=$=>{const R=$.label.split("-")[0];if(Math.sqrt($.velocity.x**2+$.velocity.y**2)>2){Pn.World.remove(s.current.world,$);const K={wooden:10,stone:25,metal:50,crystal:100,trap:-20}[R]||0;w(W=>W+K),E(W=>W+1)}},U=$=>{const R=n.current.getBoundingClientRect(),k=$.clientX-R.left,F=$.clientY-R.top;Math.sqrt((k-S.x)**2+(F-S.y)**2)<50&&g>0&&(c(!0),f({x:k,y:F}),h({x:k,y:F}))},L=$=>{if(!r)return;const R=n.current.getBoundingClientRect(),k=$.clientX-R.left,F=$.clientY-R.top,K=k-S.x,W=F-S.y;if(Math.sqrt(K**2+W**2)>A){const X=Math.atan2(W,K);h({x:S.x+Math.cos(X)*A,y:S.y+Math.sin(X)*A})}else h({x:k,y:F})},H=()=>{if(!r)return;c(!1);const $=S.x-d.x,R=S.y-d.y,k=Math.sqrt($**2+R**2)/10;q($*k*.01,R*k*.01),m(F=>F-1),h(S)},q=($,R)=>{const k=Pn.Bodies.circle(S.x,S.y,15,{label:"projectile",render:{fillStyle:"#fde047"},density:.004,restitution:.8});Pn.World.add(s.current.world,k),Pn.Body.setVelocity(k,{x:$,y:R}),setTimeout(()=>{s.current&&s.current.world&&Pn.World.remove(s.current.world,k)},5e3)};return pe.useEffect(()=>{g===0&&v<5?setTimeout(()=>e(),2e3):v>=10&&setTimeout(()=>t(y),2e3)},[g,v]),G.jsxs("div",{className:"relative",children:[G.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center z-10",children:[G.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:G.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Score: ",y]})}),G.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:G.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Level: ",C]})}),G.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:G.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Shots: ",g]})})]}),G.jsx("div",{ref:n,onMouseDown:U,onMouseMove:L,onMouseUp:H,onMouseLeave:()=>c(!1),className:"cursor-crosshair"}),r&&G.jsxs("svg",{className:"absolute top-0 left-0 pointer-events-none",width:"800",height:"600",children:[G.jsx("line",{x1:S.x,y1:S.y,x2:d.x,y2:d.y,stroke:"#fde047",strokeWidth:"2",strokeDasharray:"5,5"}),G.jsx("circle",{cx:d.x,cy:d.y,r:"15",fill:"#fde047",opacity:"0.5"})]})]})},Cce=({onBackHome:t})=>{const{level:e,xp:n,coins:s,crystals:i,resetGame:r,walletAddress:c,mintQuestBadge:l}=Yo(),[f,d]=pe.useState(!1),[h,g]=pe.useState(!1),[m,y]=pe.useState(!1),[w,v]=pe.useState(!1),[E,C]=pe.useState(1),[T,N]=pe.useState(0),I=U=>{N(U),y(!0);const L=n+U,H=e*500;L>=H&&setTimeout(()=>{C(e+1),d(!0)},2e3)},S=()=>{v(!0)},A=()=>{g(!0)},_=async()=>{try{(await iR(e)).success&&l(e)}catch(U){console.error("Error minting Quest Badge:",U)}},D=()=>{window.confirm("Are you sure you want to reset your progress? This cannot be undone.")&&r()},O=()=>{y(!1),window.location.reload()},P=()=>{v(!1),window.location.reload()};return G.jsxs("div",{className:"min-h-screen bg-game-dark",children:[G.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[G.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4 mb-4",children:[G.jsx(Pe.h1,{className:"font-pixel text-2xl md:text-3xl text-game-yellow",animate:{opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx(Ax,{}),G.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,className:"bg-orange-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-orange-700 transition-all flex items-center gap-2",children:[G.jsx(X6,{}),"Reset"]}),G.jsxs(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-game-blue text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-blue-700 transition-all flex items-center gap-2",children:[G.jsx(Y6,{}),"Home"]})]})]}),G.jsx(Pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4 mb-4",children:G.jsxs("p",{className:"font-retro text-center text-white",children:[" ",G.jsx("strong",{children:"Drag and release"})," the slingshot to launch projectiles!  Destroy blocks to earn points and level up!  Mint NFTs to commemorate your achievements!"]})}),G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[G.jsx("div",{className:"lg:col-span-3",children:G.jsx(Pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg overflow-hidden",children:G.jsx(Sce,{onLevelComplete:I,onGameOver:S})})}),G.jsx(Pe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"flex justify-center lg:justify-start",children:G.jsx(rR,{onMintBadge:A})})]})]}),G.jsx(wh,{children:m&&G.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:G.jsxs(Pe.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",duration:.8},className:"bg-gradient-to-br from-game-dark to-green-900 border-4 border-game-yellow rounded-lg p-8 max-w-md w-full text-center",children:[G.jsx(pE,{className:"text-8xl text-game-yellow mx-auto mb-4"}),G.jsx("h2",{className:"font-pixel text-3xl text-game-yellow mb-4",children:"LEVEL COMPLETE!"}),G.jsxs("p",{className:"font-retro text-2xl text-white mb-2",children:["Score: ",T]}),G.jsx("p",{className:"font-retro text-lg text-gray-300 mb-6",children:"Amazing work! Ready for the next challenge?"}),G.jsxs("div",{className:"flex gap-4",children:[G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Home"}),G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:"Next Level"})]})]})})}),G.jsx(wh,{children:w&&G.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:G.jsxs(Pe.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"bg-gradient-to-br from-game-dark to-red-900 border-4 border-red-600 rounded-lg p-8 max-w-md w-full text-center",children:[G.jsx("h2",{className:"font-pixel text-3xl text-red-500 mb-4",children:"GAME OVER"}),G.jsx("p",{className:"font-retro text-lg text-gray-300 mb-6",children:"Out of shots! Try again?"}),G.jsxs("div",{className:"flex gap-4",children:[G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Home"}),G.jsx(Pe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:P,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:"Retry"})]})]})})}),G.jsx(aR,{isOpen:f,level:E,onClose:()=>d(!1),onMintBadge:A}),G.jsx(Nx,{isOpen:h,onClose:()=>g(!1),type:"badge",level:e,onConfirm:_})]})};function Ace(){const[t,e]=pe.useState("home"),[n,s]=pe.useState("physics"),[i,r]=pe.useState(!1),{walletAddress:c,mintQuestPass:l}=Yo(),f=(m="physics")=>{s(m),e("game")},d=()=>{e("home")},h=()=>{r(!0)},g=async()=>{try{(await mce()).success&&l()}catch(m){console.error("Error minting Quest Pass:",m)}};return G.jsxs(G.Fragment,{children:[t==="home"?G.jsx(yce,{onStartGame:f,onMintPass:h}):n==="physics"?G.jsx(Cce,{onBackHome:d}):G.jsx(vce,{onBackHome:d}),G.jsx(Nx,{isOpen:i,onClose:()=>r(!1),type:"pass",onConfirm:g})]})}function Nce(){return G.jsx(w$,{children:G.jsx(Ace,{})})}y$.createRoot(document.getElementById("root")).render(G.jsx(Ta.StrictMode,{children:G.jsx(Nce,{})}));export{MW as $,Le as A,Rr as B,ve as C,Zn as D,It as E,Zae as F,Oe as G,Zs as H,Hle as I,BM as J,I2 as K,tf as L,st as M,OW as N,de as O,Qs as P,dle as Q,ze as R,me as S,Ks as T,gT as U,S_ as V,T2 as W,Dh as X,AW as Y,x_ as Z,Sh as _,Fle as a,hle as a0,fle as a1,hm as a2,gle as a3,ple as a4,q0 as b,Me as c,Ee as d,Vle as e,he as f,Dce as g,J9 as h,Vu as i,F0 as j,AM as k,V as l,nr as m,$r as n,yt as o,sf as p,zle as q,Ice as r,Iu as s,Cn as t,qle as u,Rt as v,ni as w,jle as x,ts as y,Bn as z};
