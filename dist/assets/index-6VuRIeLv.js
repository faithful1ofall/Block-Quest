const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/basic-Cyiy6uQu.js","assets/index-COHp9htO.js","assets/w3m-modal-B-PLHrie.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u$(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var d1={exports:{}},md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3;function f$(){if(s3)return md;s3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,i,r){var c=null;if(r!==void 0&&(c=""+r),i.key!==void 0&&(c=""+i.key),"key"in i){r={};for(var l in i)l!=="key"&&(r[l]=i[l])}else r=i;return i=r.ref,{$$typeof:t,type:s,key:c,ref:i!==void 0?i:null,props:r}}return md.Fragment=e,md.jsx=n,md.jsxs=n,md}var i3;function d$(){return i3||(i3=1,d1.exports=f$()),d1.exports}var z=d$(),h1={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function h$(){if(r3)return He;r3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function y(j){return j===null||typeof j!="object"?null:(j=m&&j[m]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function C(j,X,Z){this.props=j,this.context=X,this.refs=x,this.updater=Z||w}C.prototype.isReactComponent={},C.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=C.prototype;function N(j,X,Z){this.props=j,this.context=X,this.refs=x,this.updater=Z||w}var I=N.prototype=new D;I.constructor=N,v(I,C.prototype),I.isPureReactComponent=!0;var S=Array.isArray;function A(){}var O={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function _(j,X,Z){var ee=Z.ref;return{$$typeof:t,type:j,key:X,ref:ee!==void 0?ee:null,props:Z}}function R(j,X){return _(j.type,X,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function L(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return X[Z]})}var F=/\/+/g;function W(j,X){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):X.toString(36)}function $(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(A,A):(j.status="pending",j.then(function(X){j.status==="pending"&&(j.status="fulfilled",j.value=X)},function(X){j.status==="pending"&&(j.status="rejected",j.reason=X)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function P(j,X,Z,ee,ae){var oe=typeof j;(oe==="undefined"||oe==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(oe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case t:case e:be=!0;break;case h:return be=j._init,P(be(j._payload),X,Z,ee,ae)}}if(be)return ae=ae(j),be=ee===""?"."+W(j,0):ee,S(ae)?(Z="",be!=null&&(Z=be.replace(F,"$&/")+"/"),P(ae,X,Z,"",function(We){return We})):ae!=null&&(U(ae)&&(ae=R(ae,Z+(ae.key==null||j&&j.key===ae.key?"":(""+ae.key).replace(F,"$&/")+"/")+be)),X.push(ae)),1;be=0;var Ne=ee===""?".":ee+":";if(S(j))for(var Te=0;Te<j.length;Te++)ee=j[Te],oe=Ne+W(ee,Te),be+=P(ee,X,Z,oe,ae);else if(Te=y(j),typeof Te=="function")for(j=Te.call(j),Te=0;!(ee=j.next()).done;)ee=ee.value,oe=Ne+W(ee,Te++),be+=P(ee,X,Z,oe,ae);else if(oe==="object"){if(typeof j.then=="function")return P($(j),X,Z,ee,ae);throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return be}function k(j,X,Z){if(j==null)return j;var ee=[],ae=0;return P(j,ee,"","",function(oe){return X.call(Z,oe,ae++)}),ee}function V(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var K=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},G={map:k,forEach:function(j,X,Z){k(j,function(){X.apply(this,arguments)},Z)},count:function(j){var X=0;return k(j,function(){X++}),X},toArray:function(j){return k(j,function(X){return X})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return He.Activity=g,He.Children=G,He.Component=C,He.Fragment=n,He.Profiler=i,He.PureComponent=N,He.StrictMode=s,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,He.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},He.cache=function(j){return function(){return j.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(j,X,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=v({},j.props),ae=j.key;if(X!=null)for(oe in X.key!==void 0&&(ae=""+X.key),X)!T.call(X,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&X.ref===void 0||(ee[oe]=X[oe]);var oe=arguments.length-2;if(oe===1)ee.children=Z;else if(1<oe){for(var be=Array(oe),Ne=0;Ne<oe;Ne++)be[Ne]=arguments[Ne+2];ee.children=be}return _(j.type,ae,ee)},He.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},He.createElement=function(j,X,Z){var ee,ae={},oe=null;if(X!=null)for(ee in X.key!==void 0&&(oe=""+X.key),X)T.call(X,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ae[ee]=X[ee]);var be=arguments.length-2;if(be===1)ae.children=Z;else if(1<be){for(var Ne=Array(be),Te=0;Te<be;Te++)Ne[Te]=arguments[Te+2];ae.children=Ne}if(j&&j.defaultProps)for(ee in be=j.defaultProps,be)ae[ee]===void 0&&(ae[ee]=be[ee]);return _(j,oe,ae)},He.createRef=function(){return{current:null}},He.forwardRef=function(j){return{$$typeof:l,render:j}},He.isValidElement=U,He.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:V}},He.memo=function(j,X){return{$$typeof:d,type:j,compare:X===void 0?null:X}},He.startTransition=function(j){var X=O.T,Z={};O.T=Z;try{var ee=j(),ae=O.S;ae!==null&&ae(Z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(A,K)}catch(oe){K(oe)}finally{X!==null&&Z.types!==null&&(X.types=Z.types),O.T=X}},He.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},He.use=function(j){return O.H.use(j)},He.useActionState=function(j,X,Z){return O.H.useActionState(j,X,Z)},He.useCallback=function(j,X){return O.H.useCallback(j,X)},He.useContext=function(j){return O.H.useContext(j)},He.useDebugValue=function(){},He.useDeferredValue=function(j,X){return O.H.useDeferredValue(j,X)},He.useEffect=function(j,X){return O.H.useEffect(j,X)},He.useEffectEvent=function(j){return O.H.useEffectEvent(j)},He.useId=function(){return O.H.useId()},He.useImperativeHandle=function(j,X,Z){return O.H.useImperativeHandle(j,X,Z)},He.useInsertionEffect=function(j,X){return O.H.useInsertionEffect(j,X)},He.useLayoutEffect=function(j,X){return O.H.useLayoutEffect(j,X)},He.useMemo=function(j,X){return O.H.useMemo(j,X)},He.useOptimistic=function(j,X){return O.H.useOptimistic(j,X)},He.useReducer=function(j,X,Z){return O.H.useReducer(j,X,Z)},He.useRef=function(j){return O.H.useRef(j)},He.useState=function(j){return O.H.useState(j)},He.useSyncExternalStore=function(j,X,Z){return O.H.useSyncExternalStore(j,X,Z)},He.useTransition=function(){return O.H.useTransition()},He.version="19.2.0",He}var a3;function $2(){return a3||(a3=1,h1.exports=h$()),h1.exports}var ue=$2();const Ta=rf(ue);var p1={exports:{}},yd={},g1={exports:{}},m1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o3;function p$(){return o3||(o3=1,(function(t){function e(P,k){var V=P.length;P.push(k);e:for(;0<V;){var K=V-1>>>1,G=P[K];if(0<i(G,k))P[K]=k,P[V]=G,V=K;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var k=P[0],V=P.pop();if(V!==k){P[0]=V;e:for(var K=0,G=P.length,j=G>>>1;K<j;){var X=2*(K+1)-1,Z=P[X],ee=X+1,ae=P[ee];if(0>i(Z,V))ee<G&&0>i(ae,Z)?(P[K]=ae,P[ee]=V,K=ee):(P[K]=Z,P[X]=V,K=X);else if(ee<G&&0>i(ae,V))P[K]=ae,P[ee]=V,K=ee;else break e}}return k}function i(P,k){var V=P.sortIndex-k.sortIndex;return V!==0?V:P.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var f=[],d=[],h=1,g=null,m=3,y=!1,w=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(P){for(var k=n(d);k!==null;){if(k.callback===null)s(d);else if(k.startTime<=P)s(d),k.sortIndex=k.expirationTime,e(f,k);else break;k=n(d)}}function S(P){if(v=!1,I(P),!w)if(n(f)!==null)w=!0,A||(A=!0,L());else{var k=n(d);k!==null&&$(S,k.startTime-P)}}var A=!1,O=-1,T=5,_=-1;function R(){return x?!0:!(t.unstable_now()-_<T)}function U(){if(x=!1,A){var P=t.unstable_now();_=P;var k=!0;try{e:{w=!1,v&&(v=!1,D(O),O=-1),y=!0;var V=m;try{t:{for(I(P),g=n(f);g!==null&&!(g.expirationTime>P&&R());){var K=g.callback;if(typeof K=="function"){g.callback=null,m=g.priorityLevel;var G=K(g.expirationTime<=P);if(P=t.unstable_now(),typeof G=="function"){g.callback=G,I(P),k=!0;break t}g===n(f)&&s(f),I(P)}else s(f);g=n(f)}if(g!==null)k=!0;else{var j=n(d);j!==null&&$(S,j.startTime-P),k=!1}}break e}finally{g=null,m=V,y=!1}k=void 0}}finally{k?L():A=!1}}}var L;if(typeof N=="function")L=function(){N(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=U,L=function(){W.postMessage(null)}}else L=function(){C(U,0)};function $(P,k){O=C(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(P){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var V=m;m=k;try{return P()}finally{m=V}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=m;m=P;try{return k()}finally{m=V}},t.unstable_scheduleCallback=function(P,k,V){var K=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,P={id:h++,callback:k,priorityLevel:P,startTime:V,expirationTime:G,sortIndex:-1},V>K?(P.sortIndex=V,e(d,P),n(f)===null&&P===n(d)&&(v?(D(O),O=-1):v=!0,$(S,V-K))):(P.sortIndex=G,e(f,P),w||y||(w=!0,A||(A=!0,L()))),P},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(P){var k=m;return function(){var V=m;m=k;try{return P.apply(this,arguments)}finally{m=V}}}})(m1)),m1}var c3;function g$(){return c3||(c3=1,g1.exports=p$()),g1.exports}var y1={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l3;function m$(){if(l3)return Wn;l3=1;var t=$2();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(f,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:h}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wn.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(f,d,null,h)},Wn.flushSync=function(f){var d=c.T,h=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=d,s.p=h,s.d.f()}},Wn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},Wn.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Wn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,g=l(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):h==="script"&&s.d.X(f,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Wn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},Wn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=l(h,d.crossOrigin);s.d.L(f,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Wn.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=l(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},Wn.requestFormReset=function(f){s.d.r(f)},Wn.unstable_batchedUpdates=function(f,d){return f(d)},Wn.useFormState=function(f,d,h){return c.H.useFormState(f,d,h)},Wn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Wn.version="19.2.0",Wn}var u3;function y$(){if(u3)return y1.exports;u3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),y1.exports=m$(),y1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function w$(){if(f3)return yd;f3=1;var t=g$(),e=$2(),n=y$();function s(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function l(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(r(a)!==a)throw Error(s(188))}function d(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(s(188));return o!==a?null:a}for(var u=a,p=o;;){var b=u.return;if(b===null)break;var E=b.alternate;if(E===null){if(p=b.return,p!==null){u=p;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===u)return f(b),a;if(E===p)return f(b),o;E=E.sibling}throw Error(s(188))}if(u.return!==p.return)u=b,p=E;else{for(var M=!1,B=b.child;B;){if(B===u){M=!0,u=b,p=E;break}if(B===p){M=!0,p=b,u=E;break}B=B.sibling}if(!M){for(B=E.child;B;){if(B===u){M=!0,u=E,p=b;break}if(B===p){M=!0,p=E,u=b;break}B=B.sibling}if(!M)throw Error(s(189))}}if(u.alternate!==p)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function W(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case C:return"Profiler";case x:return"StrictMode";case S:return"Suspense";case A:return"SuspenseList";case _:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case N:return a.displayName||"Context";case D:return(a._context.displayName||"Context")+".Consumer";case I:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return o=a.displayName||null,o!==null?o:W(a.type)||"Memo";case T:o=a._payload,a=a._init;try{return W(a(o))}catch{}}return null}var $=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},K=[],G=-1;function j(a){return{current:a}}function X(a){0>G||(a.current=K[G],K[G]=null,G--)}function Z(a,o){G++,K[G]=a.current,a.current=o}var ee=j(null),ae=j(null),oe=j(null),be=j(null);function Ne(a,o){switch(Z(oe,o),Z(ae,a),Z(ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?NA(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=NA(o),a=TA(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(ee),Z(ee,a)}function Te(){X(ee),X(ae),X(oe)}function We(a){a.memoizedState!==null&&Z(be,a);var o=ee.current,u=TA(o,a.type);o!==u&&(Z(ae,a),Z(ee,u))}function Qe(a){ae.current===a&&(X(ee),X(ae)),be.current===a&&(X(be),dd._currentValue=V)}var Et,ki;function cn(a){if(Et===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Et=o&&o[1]||"",ki=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+a+ki}var ii=!1;function ri(a,o){if(!a||ii)return"";ii=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var ie=re}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(re){ie=re}a.call(fe.prototype)}}else{try{throw Error()}catch(re){ie=re}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),M=E[0],B=E[1];if(M&&B){var Y=M.split(`
`),ne=B.split(`
`);for(b=p=0;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;for(;b<ne.length&&!ne[b].includes("DetermineComponentFrameRoot");)b++;if(p===Y.length||b===ne.length)for(p=Y.length-1,b=ne.length-1;1<=p&&0<=b&&Y[p]!==ne[b];)b--;for(;1<=p&&0<=b;p--,b--)if(Y[p]!==ne[b]){if(p!==1||b!==1)do if(p--,b--,0>b||Y[p]!==ne[b]){var ce=`
`+Y[p].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=p&&0<=b);break}}}finally{ii=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?cn(u):""}function qr(a,o){switch(a.tag){case 26:case 27:case 5:return cn(a.type);case 16:return cn("Lazy");case 13:return a.child!==o&&o!==null?cn("Suspense Fallback"):cn("Suspense");case 19:return cn("SuspenseList");case 0:case 15:return ri(a.type,!1);case 11:return ri(a.type.render,!1);case 1:return ri(a.type,!0);case 31:return cn("Activity");default:return""}}function or(a){try{var o="",u=null;do o+=qr(a,u),u=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var yn=Object.prototype.hasOwnProperty,ds=t.unstable_scheduleCallback,ns=t.unstable_cancelCallback,cr=t.unstable_shouldYield,lr=t.unstable_requestPaint,St=t.unstable_now,ai=t.unstable_getCurrentPriorityLevel,oi=t.unstable_ImmediatePriority,Wr=t.unstable_UserBlockingPriority,Bi=t.unstable_NormalPriority,ji=t.unstable_LowPriority,zi=t.unstable_IdlePriority,ry=t.log,ay=t.unstable_setDisableYieldValue,Zo=null,Fn=null;function ur(a){if(typeof ry=="function"&&ay(a),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(Zo,a)}catch{}}var ss=Math.clz32?Math.clz32:bf,vf=Math.log,Jo=Math.LN2;function bf(a){return a>>>=0,a===0?32:31-(vf(a)/Jo|0)|0}var Ba=256,ja=262144,fr=4194304;function Gr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function yl(a,o,u){var p=a.pendingLanes;if(p===0)return 0;var b=0,E=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var B=p&134217727;return B!==0?(p=B&~E,p!==0?b=Gr(p):(M&=B,M!==0?b=Gr(M):u||(u=B&~a,u!==0&&(b=Gr(u))))):(B=p&~E,B!==0?b=Gr(B):M!==0?b=Gr(M):u||(u=p&~a,u!==0&&(b=Gr(u)))),b===0?0:o!==0&&o!==b&&(o&E)===0&&(E=b&-b,u=o&-o,E>=u||E===32&&(u&4194048)!==0)?o:b}function ec(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function oy(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tp(){var a=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),a}function wl(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function za(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Kr(a,o,u,p,b,E){var M=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var B=a.entanglements,Y=a.expirationTimes,ne=a.hiddenUpdates;for(u=M&~u;0<u;){var ce=31-ss(u),fe=1<<ce;B[ce]=0,Y[ce]=-1;var ie=ne[ce];if(ie!==null)for(ne[ce]=null,ce=0;ce<ie.length;ce++){var re=ie[ce];re!==null&&(re.lane&=-536870913)}u&=~fe}p!==0&&Ip(a,p,0),E!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=E&~(M&~o))}function Ip(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-ss(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|u&261930}function Dp(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var p=31-ss(u),b=1<<p;b&o|a[p]&o&&(a[p]|=o),u&=~b}}function Op(a,o){var u=o&-o;return u=(u&42)!==0?1:xf(u),(u&(a.suspendedLanes|o))!==0?0:u}function xf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ef(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ci(){var a=k.p;return a!==0?a:(a=window.event,a===void 0?32:XA(a.type))}function _p(a,o){var u=k.p;try{return k.p=a,o()}finally{k.p=u}}var dr=Math.random().toString(36).slice(2),ln="__reactFiber$"+dr,Vn="__reactProps$"+dr,Ha="__reactContainer$"+dr,hr="__reactEvents$"+dr,cy="__reactListeners$"+dr,ly="__reactHandles$"+dr,Mp="__reactResources$"+dr,tc="__reactMarker$"+dr;function Sf(a){delete a[ln],delete a[Vn],delete a[hr],delete a[cy],delete a[ly]}function Us(a){var o=a[ln];if(o)return o;for(var u=a.parentNode;u;){if(o=u[Ha]||u[ln]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=PA(a);a!==null;){if(u=a[ln])return u;a=PA(a)}return o}a=u,u=a.parentNode}return null}function Fa(a){if(a=a[ln]||a[Ha]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function nc(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(s(33))}function Va(a){var o=a[Mp];return o||(o=a[Mp]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Jt(a){a[tc]=!0}var Rp=new Set,Pp={};function pr(a,o){Hi(a,o),Hi(a+"Capture",o)}function Hi(a,o){for(Pp[a]=o,a=0;a<o.length;a++)Rp.add(o[a])}var uy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},$p={};function fy(a){return yn.call($p,a)?!0:yn.call(vl,a)?!1:uy.test(a)?$p[a]=!0:(vl[a]=!0,!1)}function bl(a,o,u){if(fy(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function xl(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function Fi(a,o,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+p)}}function hs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function El(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function dy(a,o,u){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,E=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return b.call(this)},set:function(M){u=""+M,E.call(this,M)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Cf(a){if(!a._valueTracker){var o=El(a)?"checked":"value";a._valueTracker=dy(a,o,""+a[o])}}function Up(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return a&&(p=El(a)?a.checked?"true":"false":a.value),a=p,a!==u?(o.setValue(a),!0):!1}function Sl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var hy=/[\n"\\]/g;function ps(a){return a.replace(hy,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Af(a,o,u,p,b,E,M,B){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),o!=null?M==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+hs(o)):a.value!==""+hs(o)&&(a.value=""+hs(o)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),o!=null?Tf(a,M,hs(o)):u!=null?Tf(a,M,hs(u)):p!=null&&a.removeAttribute("value"),b==null&&E!=null&&(a.defaultChecked=!!E),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.name=""+hs(B):a.removeAttribute("name")}function Nf(a,o,u,p,b,E,M,B){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),o!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){Cf(a);return}u=u!=null?""+hs(u):"",o=o!=null?""+hs(o):u,B||o===a.value||(a.value=o),a.defaultValue=o}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=B?a.checked:!!p,a.defaultChecked=!!p,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M),Cf(a)}function Tf(a,o,u){o==="number"&&Sl(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function qa(a,o,u,p){if(a=a.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<a.length;u++)b=o.hasOwnProperty("$"+a[u].value),a[u].selected!==b&&(a[u].selected=b),b&&p&&(a[u].defaultSelected=!0)}else{for(u=""+hs(u),o=null,b=0;b<a.length;b++){if(a[b].value===u){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}o!==null||a[b].disabled||(o=a[b])}o!==null&&(o.selected=!0)}}function sc(a,o,u){if(o!=null&&(o=""+hs(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+hs(u):""}function Yr(a,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(s(92));if($(p)){if(1<p.length)throw Error(s(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=hs(o),a.defaultValue=u,p=a.textContent,p===u&&p!==""&&p!==null&&(a.value=p),Cf(a)}function Xr(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(a,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,u):typeof u!="number"||u===0||Qr.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function kp(a,o,u){if(o!=null&&typeof o!="object")throw Error(s(62));if(a=a.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var b in o)p=o[b],o.hasOwnProperty(b)&&u[b]!==p&&Lp(a,b,p)}else for(var E in o)o.hasOwnProperty(E)&&Lp(a,E,o[E])}function If(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var py=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cl(a){return gy.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function li(){}var Vi=null;function Df(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zr=null,Wa=null;function Al(a){var o=Fa(a);if(o&&(a=o.stateNode)){var u=a[Vn]||null;e:switch(a=o.stateNode,o.type){case"input":if(Af(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ps(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==a&&p.form===a.form){var b=p[Vn]||null;if(!b)throw Error(s(90));Af(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===a.form&&Up(p)}break e;case"textarea":sc(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&qa(a,!!u.multiple,o,!1)}}}var Nl=!1;function Bp(a,o,u){if(Nl)return a(o,u);Nl=!0;try{var p=a(o);return p}finally{if(Nl=!1,(Zr!==null||Wa!==null)&&(Eg(),Zr&&(o=Zr,a=Wa,Wa=Zr=null,Al(o),a)))for(o=0;o<a.length;o++)Al(a[o])}}function ic(a,o){var u=a.stateNode;if(u===null)return null;var p=u[Vn]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=!1;if(ui)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Of=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Of=!1}var mr=null,rc=null,Tl=null;function jp(){if(Tl)return Tl;var a,o=rc,u=o.length,p,b="value"in mr?mr.value:mr.textContent,E=b.length;for(a=0;a<u&&o[a]===b[a];a++);var M=u-a;for(p=1;p<=M&&o[u-p]===b[E-p];p++);return Tl=b.slice(a,1<p?1-p:void 0)}function H(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function se(){return!0}function de(){return!1}function Ee(a){function o(u,p,b,E,M){this._reactName=u,this._targetInst=b,this.type=p,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(u=a[B],this[B]=u?u(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?se:de,this.isPropagationStopped=de,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),o}var Pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=Ee(Pt),is=g({},Pt,{view:0,detail:0}),qn=Ee(is),Il,yr,Ga,ac=g({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yy,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ga&&(Ga&&a.type==="mousemove"?(Il=a.screenX-Ga.screenX,yr=a.screenY-Ga.screenY):yr=Il=0,Ga=a),Il)},movementY:function(a){return"movementY"in a?a.movementY:yr}}),_f=Ee(ac),Mf=g({},ac,{dataTransfer:0}),Dl=Ee(Mf),fR=g({},is,{relatedTarget:0}),my=Ee(fR),dR=g({},Pt,{animationName:0,elapsedTime:0,pseudoElement:0}),hR=Ee(dR),pR=g({},Pt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),gR=Ee(pR),mR=g({},Pt,{data:0}),OE=Ee(mR),yR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=vR[a])?!!o[a]:!1}function yy(){return bR}var xR=g({},is,{key:function(a){if(a.key){var o=yR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=H(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yy,charCode:function(a){return a.type==="keypress"?H(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?H(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ER=Ee(xR),SR=g({},ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=Ee(SR),CR=g({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yy}),AR=Ee(CR),NR=g({},Pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),TR=Ee(NR),IR=g({},ac,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),DR=Ee(IR),OR=g({},Pt,{newState:0,oldState:0}),_R=Ee(OR),MR=[9,13,27,32],wy=ui&&"CompositionEvent"in window,Rf=null;ui&&"documentMode"in document&&(Rf=document.documentMode);var RR=ui&&"TextEvent"in window&&!Rf,ME=ui&&(!wy||Rf&&8<Rf&&11>=Rf),RE=" ",PE=!1;function $E(a,o){switch(a){case"keyup":return MR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UE(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ol=!1;function PR(a,o){switch(a){case"compositionend":return UE(o);case"keypress":return o.which!==32?null:(PE=!0,RE);case"textInput":return a=o.data,a===RE&&PE?null:a;default:return null}}function $R(a,o){if(Ol)return a==="compositionend"||!wy&&$E(a,o)?(a=jp(),Tl=rc=mr=null,Ol=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ME&&o.locale!=="ko"?null:o.data;default:return null}}var UR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LE(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!UR[a.type]:o==="textarea"}function kE(a,o,u,p){Zr?Wa?Wa.push(p):Wa=[p]:Zr=p,o=Dg(o,"onChange"),0<o.length&&(u=new un("onChange","change",null,u,p),a.push({event:u,listeners:o}))}var Pf=null,$f=null;function LR(a){bA(a,0)}function zp(a){var o=nc(a);if(Up(o))return a}function BE(a,o){if(a==="change")return o}var jE=!1;if(ui){var vy;if(ui){var by="oninput"in document;if(!by){var zE=document.createElement("div");zE.setAttribute("oninput","return;"),by=typeof zE.oninput=="function"}vy=by}else vy=!1;jE=vy&&(!document.documentMode||9<document.documentMode)}function HE(){Pf&&(Pf.detachEvent("onpropertychange",FE),$f=Pf=null)}function FE(a){if(a.propertyName==="value"&&zp($f)){var o=[];kE(o,$f,a,Df(a)),Bp(LR,o)}}function kR(a,o,u){a==="focusin"?(HE(),Pf=o,$f=u,Pf.attachEvent("onpropertychange",FE)):a==="focusout"&&HE()}function BR(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zp($f)}function jR(a,o){if(a==="click")return zp(o)}function zR(a,o){if(a==="input"||a==="change")return zp(o)}function HR(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Ls=typeof Object.is=="function"?Object.is:HR;function Uf(a,o){if(Ls(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var b=u[p];if(!yn.call(o,b)||!Ls(a[b],o[b]))return!1}return!0}function VE(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qE(a,o){var u=VE(a);a=0;for(var p;u;){if(u.nodeType===3){if(p=a+u.textContent.length,a<=o&&p>=o)return{node:u,offset:o-a};a=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=VE(u)}}function WE(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?WE(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function GE(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Sl(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Sl(a.document)}return o}function xy(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var FR=ui&&"documentMode"in document&&11>=document.documentMode,_l=null,Ey=null,Lf=null,Sy=!1;function KE(a,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Sy||_l==null||_l!==Sl(p)||(p=_l,"selectionStart"in p&&xy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Lf&&Uf(Lf,p)||(Lf=p,p=Dg(Ey,"onSelect"),0<p.length&&(o=new un("onSelect","select",null,o,u),a.push({event:o,listeners:p}),o.target=_l)))}function oc(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var Ml={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionrun:oc("Transition","TransitionRun"),transitionstart:oc("Transition","TransitionStart"),transitioncancel:oc("Transition","TransitionCancel"),transitionend:oc("Transition","TransitionEnd")},Cy={},YE={};ui&&(YE=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function cc(a){if(Cy[a])return Cy[a];if(!Ml[a])return a;var o=Ml[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in YE)return Cy[a]=o[u];return a}var XE=cc("animationend"),QE=cc("animationiteration"),ZE=cc("animationstart"),VR=cc("transitionrun"),qR=cc("transitionstart"),WR=cc("transitioncancel"),JE=cc("transitionend"),eS=new Map,Ay="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ay.push("scrollEnd");function qi(a,o){eS.set(a,o),pr(o,[a])}var Hp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},fi=[],Rl=0,Ny=0;function Fp(){for(var a=Rl,o=Ny=Rl=0;o<a;){var u=fi[o];fi[o++]=null;var p=fi[o];fi[o++]=null;var b=fi[o];fi[o++]=null;var E=fi[o];if(fi[o++]=null,p!==null&&b!==null){var M=p.pending;M===null?b.next=b:(b.next=M.next,M.next=b),p.pending=b}E!==0&&tS(u,b,E)}}function Vp(a,o,u,p){fi[Rl++]=a,fi[Rl++]=o,fi[Rl++]=u,fi[Rl++]=p,Ny|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function Ty(a,o,u,p){return Vp(a,o,u,p),qp(a)}function lc(a,o){return Vp(a,null,null,o),qp(a)}function tS(a,o,u){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u);for(var b=!1,E=a.return;E!==null;)E.childLanes|=u,p=E.alternate,p!==null&&(p.childLanes|=u),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(b=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,b&&o!==null&&(b=31-ss(u),a=E.hiddenUpdates,p=a[b],p===null?a[b]=[o]:p.push(o),o.lane=u|536870912),E):null}function qp(a){if(50<rd)throw rd=0,Uw=null,Error(s(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Pl={};function GR(a,o,u,p){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(a,o,u,p){return new GR(a,o,u,p)}function Iy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Jr(a,o){var u=a.alternate;return u===null?(u=ks(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function nS(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Wp(a,o,u,p,b,E){var M=0;if(p=a,typeof a=="function")Iy(a)&&(M=1);else if(typeof a=="string")M=ZP(a,u,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case _:return a=ks(31,u,o,b),a.elementType=_,a.lanes=E,a;case v:return uc(u.children,b,E,o);case x:M=8,b|=24;break;case C:return a=ks(12,u,o,b|2),a.elementType=C,a.lanes=E,a;case S:return a=ks(13,u,o,b),a.elementType=S,a.lanes=E,a;case A:return a=ks(19,u,o,b),a.elementType=A,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:M=10;break e;case D:M=9;break e;case I:M=11;break e;case O:M=14;break e;case T:M=16,p=null;break e}M=29,u=Error(s(130,a===null?"null":typeof a,"")),p=null}return o=ks(M,u,o,b),o.elementType=a,o.type=p,o.lanes=E,o}function uc(a,o,u,p){return a=ks(7,a,p,o),a.lanes=u,a}function Dy(a,o,u){return a=ks(6,a,null,o),a.lanes=u,a}function sS(a){var o=ks(18,null,null,0);return o.stateNode=a,o}function Oy(a,o,u){return o=ks(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var iS=new WeakMap;function di(a,o){if(typeof a=="object"&&a!==null){var u=iS.get(a);return u!==void 0?u:(o={value:a,source:o,stack:or(o)},iS.set(a,o),o)}return{value:a,source:o,stack:or(o)}}var $l=[],Ul=0,Gp=null,kf=0,hi=[],pi=0,Ka=null,wr=1,vr="";function ea(a,o){$l[Ul++]=kf,$l[Ul++]=Gp,Gp=a,kf=o}function rS(a,o,u){hi[pi++]=wr,hi[pi++]=vr,hi[pi++]=Ka,Ka=a;var p=wr;a=vr;var b=32-ss(p)-1;p&=~(1<<b),u+=1;var E=32-ss(o)+b;if(30<E){var M=b-b%5;E=(p&(1<<M)-1).toString(32),p>>=M,b-=M,wr=1<<32-ss(o)+b|u<<b|p,vr=E+a}else wr=1<<E|u<<b|p,vr=a}function _y(a){a.return!==null&&(ea(a,1),rS(a,1,0))}function My(a){for(;a===Gp;)Gp=$l[--Ul],$l[Ul]=null,kf=$l[--Ul],$l[Ul]=null;for(;a===Ka;)Ka=hi[--pi],hi[pi]=null,vr=hi[--pi],hi[pi]=null,wr=hi[--pi],hi[pi]=null}function aS(a,o){hi[pi++]=wr,hi[pi++]=vr,hi[pi++]=Ka,wr=o.id,vr=o.overflow,Ka=a}var Tn=null,$t=null,et=!1,Ya=null,gi=!1,Ry=Error(s(519));function Xa(a){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bf(di(o,a)),Ry}function oS(a){var o=a.stateNode,u=a.type,p=a.memoizedProps;switch(o[ln]=a,o[Vn]=p,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<od.length;u++)Xe(od[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Nf(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Yr(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||CA(o.textContent,u)?(p.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),p.onScroll!=null&&Xe("scroll",o),p.onScrollEnd!=null&&Xe("scrollend",o),p.onClick!=null&&(o.onclick=li),o=!0):o=!1,o||Xa(a,!0)}function cS(a){for(Tn=a.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:Tn=Tn.return}}function Ll(a){if(a!==Tn)return!1;if(!et)return cS(a),et=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Qw(a.type,a.memoizedProps)),u=!u),u&&$t&&Xa(a),cS(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));$t=RA(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));$t=RA(a)}else o===27?(o=$t,uo(a.type)?(a=n1,n1=null,$t=a):$t=o):$t=Tn?yi(a.stateNode.nextSibling):null;return!0}function fc(){$t=Tn=null,et=!1}function Py(){var a=Ya;return a!==null&&(ws===null?ws=a:ws.push.apply(ws,a),Ya=null),a}function Bf(a){Ya===null?Ya=[a]:Ya.push(a)}var $y=j(null),dc=null,ta=null;function Qa(a,o,u){Z($y,o._currentValue),o._currentValue=u}function na(a){a._currentValue=$y.current,X($y)}function Uy(a,o,u){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===u)break;a=a.return}}function Ly(a,o,u,p){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var E=b.dependencies;if(E!==null){var M=b.child;E=E.firstContext;e:for(;E!==null;){var B=E;E=b;for(var Y=0;Y<o.length;Y++)if(B.context===o[Y]){E.lanes|=u,B=E.alternate,B!==null&&(B.lanes|=u),Uy(E.return,u,a),p||(M=null);break e}E=B.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(s(341));M.lanes|=u,E=M.alternate,E!==null&&(E.lanes|=u),Uy(M,u,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function kl(a,o,u,p){a=null;for(var b=o,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var B=b.type;Ls(b.pendingProps.value,M.value)||(a!==null?a.push(B):a=[B])}}else if(b===be.current){if(M=b.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(dd):a=[dd])}b=b.return}a!==null&&Ly(o,a,u,p),o.flags|=262144}function Kp(a){for(a=a.firstContext;a!==null;){if(!Ls(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function hc(a){dc=a,ta=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function In(a){return lS(dc,a)}function Yp(a,o){return dc===null&&hc(a),lS(a,o)}function lS(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ta===null){if(a===null)throw Error(s(308));ta=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else ta=ta.next=o;return u}var KR=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},YR=t.unstable_scheduleCallback,XR=t.unstable_NormalPriority,en={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ky(){return{controller:new KR,data:new Map,refCount:0}}function jf(a){a.refCount--,a.refCount===0&&YR(XR,function(){a.controller.abort()})}var zf=null,By=0,Bl=0,jl=null;function QR(a,o){if(zf===null){var u=zf=[];By=0,Bl=Hw(),jl={status:"pending",value:void 0,then:function(p){u.push(p)}}}return By++,o.then(uS,uS),o}function uS(){if(--By===0&&zf!==null){jl!==null&&(jl.status="fulfilled");var a=zf;zf=null,Bl=0,jl=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ZR(a,o){var u=[],p={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(p.status="rejected",p.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),p}var fS=P.S;P.S=function(a,o){KC=St(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&QR(a,o),fS!==null&&fS(a,o)};var pc=j(null);function jy(){var a=pc.current;return a!==null?a:Dt.pooledCache}function Xp(a,o){o===null?Z(pc,pc.current):Z(pc,o.pool)}function dS(){var a=jy();return a===null?null:{parent:en._currentValue,pool:a}}var zl=Error(s(460)),zy=Error(s(474)),Qp=Error(s(542)),Zp={then:function(){}};function hS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function pS(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(li,li),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mS(a),a;default:if(typeof o.status=="string")o.then(li,li);else{if(a=Dt,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=p}},function(p){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,mS(a),a}throw mc=o,zl}}function gc(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(mc=u,zl):u}}var mc=null;function gS(){if(mc===null)throw Error(s(459));var a=mc;return mc=null,a}function mS(a){if(a===zl||a===Qp)throw Error(s(483))}var Hl=null,Hf=0;function Jp(a){var o=Hf;return Hf+=1,Hl===null&&(Hl=[]),pS(Hl,a,o)}function Ff(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function eg(a,o){throw o.$$typeof===m?Error(s(525)):(a=Object.prototype.toString.call(o),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function yS(a){function o(J,Q){if(a){var te=J.deletions;te===null?(J.deletions=[Q],J.flags|=16):te.push(Q)}}function u(J,Q){if(!a)return null;for(;Q!==null;)o(J,Q),Q=Q.sibling;return null}function p(J){for(var Q=new Map;J!==null;)J.key!==null?Q.set(J.key,J):Q.set(J.index,J),J=J.sibling;return Q}function b(J,Q){return J=Jr(J,Q),J.index=0,J.sibling=null,J}function E(J,Q,te){return J.index=te,a?(te=J.alternate,te!==null?(te=te.index,te<Q?(J.flags|=67108866,Q):te):(J.flags|=67108866,Q)):(J.flags|=1048576,Q)}function M(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function B(J,Q,te,le){return Q===null||Q.tag!==6?(Q=Dy(te,J.mode,le),Q.return=J,Q):(Q=b(Q,te),Q.return=J,Q)}function Y(J,Q,te,le){var $e=te.type;return $e===v?ce(J,Q,te.props.children,le,te.key):Q!==null&&(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===T&&gc($e)===Q.type)?(Q=b(Q,te.props),Ff(Q,te),Q.return=J,Q):(Q=Wp(te.type,te.key,te.props,null,J.mode,le),Ff(Q,te),Q.return=J,Q)}function ne(J,Q,te,le){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==te.containerInfo||Q.stateNode.implementation!==te.implementation?(Q=Oy(te,J.mode,le),Q.return=J,Q):(Q=b(Q,te.children||[]),Q.return=J,Q)}function ce(J,Q,te,le,$e){return Q===null||Q.tag!==7?(Q=uc(te,J.mode,le,$e),Q.return=J,Q):(Q=b(Q,te),Q.return=J,Q)}function fe(J,Q,te){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Dy(""+Q,J.mode,te),Q.return=J,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case y:return te=Wp(Q.type,Q.key,Q.props,null,J.mode,te),Ff(te,Q),te.return=J,te;case w:return Q=Oy(Q,J.mode,te),Q.return=J,Q;case T:return Q=gc(Q),fe(J,Q,te)}if($(Q)||L(Q))return Q=uc(Q,J.mode,te,null),Q.return=J,Q;if(typeof Q.then=="function")return fe(J,Jp(Q),te);if(Q.$$typeof===N)return fe(J,Yp(J,Q),te);eg(J,Q)}return null}function ie(J,Q,te,le){var $e=Q!==null?Q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $e!==null?null:B(J,Q,""+te,le);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return te.key===$e?Y(J,Q,te,le):null;case w:return te.key===$e?ne(J,Q,te,le):null;case T:return te=gc(te),ie(J,Q,te,le)}if($(te)||L(te))return $e!==null?null:ce(J,Q,te,le,null);if(typeof te.then=="function")return ie(J,Q,Jp(te),le);if(te.$$typeof===N)return ie(J,Q,Yp(J,te),le);eg(J,te)}return null}function re(J,Q,te,le,$e){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return J=J.get(te)||null,B(Q,J,""+le,$e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return J=J.get(le.key===null?te:le.key)||null,Y(Q,J,le,$e);case w:return J=J.get(le.key===null?te:le.key)||null,ne(Q,J,le,$e);case T:return le=gc(le),re(J,Q,te,le,$e)}if($(le)||L(le))return J=J.get(te)||null,ce(Q,J,le,$e,null);if(typeof le.then=="function")return re(J,Q,te,Jp(le),$e);if(le.$$typeof===N)return re(J,Q,te,Yp(Q,le),$e);eg(Q,le)}return null}function Ie(J,Q,te,le){for(var $e=null,rt=null,De=Q,qe=Q=0,Je=null;De!==null&&qe<te.length;qe++){De.index>qe?(Je=De,De=null):Je=De.sibling;var at=ie(J,De,te[qe],le);if(at===null){De===null&&(De=Je);break}a&&De&&at.alternate===null&&o(J,De),Q=E(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at,De=Je}if(qe===te.length)return u(J,De),et&&ea(J,qe),$e;if(De===null){for(;qe<te.length;qe++)De=fe(J,te[qe],le),De!==null&&(Q=E(De,Q,qe),rt===null?$e=De:rt.sibling=De,rt=De);return et&&ea(J,qe),$e}for(De=p(De);qe<te.length;qe++)Je=re(De,J,qe,te[qe],le),Je!==null&&(a&&Je.alternate!==null&&De.delete(Je.key===null?qe:Je.key),Q=E(Je,Q,qe),rt===null?$e=Je:rt.sibling=Je,rt=Je);return a&&De.forEach(function(mo){return o(J,mo)}),et&&ea(J,qe),$e}function Be(J,Q,te,le){if(te==null)throw Error(s(151));for(var $e=null,rt=null,De=Q,qe=Q=0,Je=null,at=te.next();De!==null&&!at.done;qe++,at=te.next()){De.index>qe?(Je=De,De=null):Je=De.sibling;var mo=ie(J,De,at.value,le);if(mo===null){De===null&&(De=Je);break}a&&De&&mo.alternate===null&&o(J,De),Q=E(mo,Q,qe),rt===null?$e=mo:rt.sibling=mo,rt=mo,De=Je}if(at.done)return u(J,De),et&&ea(J,qe),$e;if(De===null){for(;!at.done;qe++,at=te.next())at=fe(J,at.value,le),at!==null&&(Q=E(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at);return et&&ea(J,qe),$e}for(De=p(De);!at.done;qe++,at=te.next())at=re(De,J,qe,at.value,le),at!==null&&(a&&at.alternate!==null&&De.delete(at.key===null?qe:at.key),Q=E(at,Q,qe),rt===null?$e=at:rt.sibling=at,rt=at);return a&&De.forEach(function(l$){return o(J,l$)}),et&&ea(J,qe),$e}function Nt(J,Q,te,le){if(typeof te=="object"&&te!==null&&te.type===v&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case y:e:{for(var $e=te.key;Q!==null;){if(Q.key===$e){if($e=te.type,$e===v){if(Q.tag===7){u(J,Q.sibling),le=b(Q,te.props.children),le.return=J,J=le;break e}}else if(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===T&&gc($e)===Q.type){u(J,Q.sibling),le=b(Q,te.props),Ff(le,te),le.return=J,J=le;break e}u(J,Q);break}else o(J,Q);Q=Q.sibling}te.type===v?(le=uc(te.props.children,J.mode,le,te.key),le.return=J,J=le):(le=Wp(te.type,te.key,te.props,null,J.mode,le),Ff(le,te),le.return=J,J=le)}return M(J);case w:e:{for($e=te.key;Q!==null;){if(Q.key===$e)if(Q.tag===4&&Q.stateNode.containerInfo===te.containerInfo&&Q.stateNode.implementation===te.implementation){u(J,Q.sibling),le=b(Q,te.children||[]),le.return=J,J=le;break e}else{u(J,Q);break}else o(J,Q);Q=Q.sibling}le=Oy(te,J.mode,le),le.return=J,J=le}return M(J);case T:return te=gc(te),Nt(J,Q,te,le)}if($(te))return Ie(J,Q,te,le);if(L(te)){if($e=L(te),typeof $e!="function")throw Error(s(150));return te=$e.call(te),Be(J,Q,te,le)}if(typeof te.then=="function")return Nt(J,Q,Jp(te),le);if(te.$$typeof===N)return Nt(J,Q,Yp(J,te),le);eg(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Q!==null&&Q.tag===6?(u(J,Q.sibling),le=b(Q,te),le.return=J,J=le):(u(J,Q),le=Dy(te,J.mode,le),le.return=J,J=le),M(J)):u(J,Q)}return function(J,Q,te,le){try{Hf=0;var $e=Nt(J,Q,te,le);return Hl=null,$e}catch(De){if(De===zl||De===Qp)throw De;var rt=ks(29,De,null,J.mode);return rt.lanes=le,rt.return=J,rt}finally{}}}var yc=yS(!0),wS=yS(!1),Za=!1;function Hy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fy(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ja(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function eo(a,o,u){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(dt&2)!==0){var b=p.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),p.pending=o,o=qp(a),tS(a,null,u),o}return Vp(a,p,o,u),qp(a)}function Vf(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,Dp(a,u)}}function Vy(a,o){var u=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var b=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?b=E=M:E=E.next=M,u=u.next}while(u!==null);E===null?b=E=o:E=E.next=o}else b=E=o;u={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var qy=!1;function qf(){if(qy){var a=jl;if(a!==null)throw a}}function Wf(a,o,u,p){qy=!1;var b=a.updateQueue;Za=!1;var E=b.firstBaseUpdate,M=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var Y=B,ne=Y.next;Y.next=null,M===null?E=ne:M.next=ne,M=Y;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==M&&(B===null?ce.firstBaseUpdate=ne:B.next=ne,ce.lastBaseUpdate=Y))}if(E!==null){var fe=b.baseState;M=0,ce=ne=Y=null,B=E;do{var ie=B.lane&-536870913,re=ie!==B.lane;if(re?(Ze&ie)===ie:(p&ie)===ie){ie!==0&&ie===Bl&&(qy=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ie=a,Be=B;ie=o;var Nt=u;switch(Be.tag){case 1:if(Ie=Be.payload,typeof Ie=="function"){fe=Ie.call(Nt,fe,ie);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Be.payload,ie=typeof Ie=="function"?Ie.call(Nt,fe,ie):Ie,ie==null)break e;fe=g({},fe,ie);break e;case 2:Za=!0}}ie=B.callback,ie!==null&&(a.flags|=64,re&&(a.flags|=8192),re=b.callbacks,re===null?b.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(ne=ce=re,Y=fe):ce=ce.next=re,M|=ie;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;re=B,B=re.next,re.next=null,b.lastBaseUpdate=re,b.shared.pending=null}}while(!0);ce===null&&(Y=fe),b.baseState=Y,b.firstBaseUpdate=ne,b.lastBaseUpdate=ce,E===null&&(b.shared.lanes=0),ro|=M,a.lanes=M,a.memoizedState=fe}}function vS(a,o){if(typeof a!="function")throw Error(s(191,a));a.call(o)}function bS(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)vS(u[a],o)}var Fl=j(null),tg=j(0);function xS(a,o){a=fa,Z(tg,a),Z(Fl,o),fa=a|o.baseLanes}function Wy(){Z(tg,fa),Z(Fl,Fl.current)}function Gy(){fa=tg.current,X(Fl),X(tg)}var Bs=j(null),mi=null;function to(a){var o=a.alternate;Z(Gt,Gt.current&1),Z(Bs,a),mi===null&&(o===null||Fl.current!==null||o.memoizedState!==null)&&(mi=a)}function Ky(a){Z(Gt,Gt.current),Z(Bs,a),mi===null&&(mi=a)}function ES(a){a.tag===22?(Z(Gt,Gt.current),Z(Bs,a),mi===null&&(mi=a)):no()}function no(){Z(Gt,Gt.current),Z(Bs,Bs.current)}function js(a){X(Bs),mi===a&&(mi=null),X(Gt)}var Gt=j(0);function ng(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||e1(u)||t1(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var sa=0,Fe=null,Ct=null,tn=null,sg=!1,Vl=!1,wc=!1,ig=0,Gf=0,ql=null,JR=0;function Vt(){throw Error(s(321))}function Yy(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Ls(a[u],o[u]))return!1;return!0}function Xy(a,o,u,p,b,E){return sa=E,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=a===null||a.memoizedState===null?rC:fw,wc=!1,E=u(p,b),wc=!1,Vl&&(E=CS(o,u,p,b)),SS(a),E}function SS(a){P.H=Xf;var o=Ct!==null&&Ct.next!==null;if(sa=0,tn=Ct=Fe=null,sg=!1,Gf=0,ql=null,o)throw Error(s(300));a===null||nn||(a=a.dependencies,a!==null&&Kp(a)&&(nn=!0))}function CS(a,o,u,p){Fe=a;var b=0;do{if(Vl&&(ql=null),Gf=0,Vl=!1,25<=b)throw Error(s(301));if(b+=1,tn=Ct=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}P.H=aC,E=o(u,p)}while(Vl);return E}function eP(){var a=P.H,o=a.useState()[0];return o=typeof o.then=="function"?Kf(o):o,a=a.useState()[0],(Ct!==null?Ct.memoizedState:null)!==a&&(Fe.flags|=1024),o}function Qy(){var a=ig!==0;return ig=0,a}function Zy(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function Jy(a){if(sg){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}sg=!1}sa=0,tn=Ct=Fe=null,Vl=!1,Gf=ig=0,ql=null}function rs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Fe.memoizedState=tn=a:tn=tn.next=a,tn}function Kt(){if(Ct===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=Ct.next;var o=tn===null?Fe.memoizedState:tn.next;if(o!==null)tn=o,Ct=a;else{if(a===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));Ct=a,a={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},tn===null?Fe.memoizedState=tn=a:tn=tn.next=a}return tn}function rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kf(a){var o=Gf;return Gf+=1,ql===null&&(ql=[]),a=pS(ql,a,o),o=Fe,(tn===null?o.memoizedState:tn.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?rC:fw),a}function ag(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Kf(a);if(a.$$typeof===N)return In(a)}throw Error(s(438,String(a)))}function ew(a){var o=null,u=Fe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=Fe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=rg(),Fe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),p=0;p<a;p++)u[p]=R;return o.index++,u}function ia(a,o){return typeof o=="function"?o(a):o}function og(a){var o=Kt();return tw(o,Ct,a)}function tw(a,o,u){var p=a.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=u;var b=a.baseQueue,E=p.pending;if(E!==null){if(b!==null){var M=b.next;b.next=E.next,E.next=M}o.baseQueue=b=E,p.pending=null}if(E=a.baseState,b===null)a.memoizedState=E;else{o=b.next;var B=M=null,Y=null,ne=o,ce=!1;do{var fe=ne.lane&-536870913;if(fe!==ne.lane?(Ze&fe)===fe:(sa&fe)===fe){var ie=ne.revertLane;if(ie===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),fe===Bl&&(ce=!0);else if((sa&ie)===ie){ne=ne.next,ie===Bl&&(ce=!0);continue}else fe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(B=Y=fe,M=E):Y=Y.next=fe,Fe.lanes|=ie,ro|=ie;fe=ne.action,wc&&u(E,fe),E=ne.hasEagerState?ne.eagerState:u(E,fe)}else ie={lane:fe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(B=Y=ie,M=E):Y=Y.next=ie,Fe.lanes|=fe,ro|=fe;ne=ne.next}while(ne!==null&&ne!==o);if(Y===null?M=E:Y.next=B,!Ls(E,a.memoizedState)&&(nn=!0,ce&&(u=jl,u!==null)))throw u;a.memoizedState=E,a.baseState=M,a.baseQueue=Y,p.lastRenderedState=E}return b===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function nw(a){var o=Kt(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=u.dispatch,b=u.pending,E=o.memoizedState;if(b!==null){u.pending=null;var M=b=b.next;do E=a(E,M.action),M=M.next;while(M!==b);Ls(E,o.memoizedState)||(nn=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),u.lastRenderedState=E}return[E,p]}function AS(a,o,u){var p=Fe,b=Kt(),E=et;if(E){if(u===void 0)throw Error(s(407));u=u()}else u=o();var M=!Ls((Ct||b).memoizedState,u);if(M&&(b.memoizedState=u,nn=!0),b=b.queue,rw(IS.bind(null,p,b,a),[a]),b.getSnapshot!==o||M||tn!==null&&tn.memoizedState.tag&1){if(p.flags|=2048,Wl(9,{destroy:void 0},TS.bind(null,p,b,u,o),null),Dt===null)throw Error(s(349));E||(sa&127)!==0||NS(p,o,u)}return u}function NS(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Fe.updateQueue,o===null?(o=rg(),Fe.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function TS(a,o,u,p){o.value=u,o.getSnapshot=p,DS(o)&&OS(a)}function IS(a,o,u){return u(function(){DS(o)&&OS(a)})}function DS(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Ls(a,u)}catch{return!0}}function OS(a){var o=lc(a,2);o!==null&&vs(o,a,2)}function sw(a){var o=rs();if(typeof a=="function"){var u=a;if(a=u(),wc){ur(!0);try{u()}finally{ur(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},o}function _S(a,o,u,p){return a.baseState=u,tw(a,Ct,typeof p=="function"?p:ia)}function tP(a,o,u,p,b){if(ug(a))throw Error(s(485));if(a=o.action,a!==null){var E={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){E.listeners.push(M)}};P.T!==null?u(!0):E.isTransition=!1,p(E),u=o.pending,u===null?(E.next=o.pending=E,MS(o,E)):(E.next=u.next,o.pending=u.next=E)}}function MS(a,o){var u=o.action,p=o.payload,b=a.state;if(o.isTransition){var E=P.T,M={};P.T=M;try{var B=u(b,p),Y=P.S;Y!==null&&Y(M,B),RS(a,o,B)}catch(ne){iw(a,o,ne)}finally{E!==null&&M.types!==null&&(E.types=M.types),P.T=E}}else try{E=u(b,p),RS(a,o,E)}catch(ne){iw(a,o,ne)}}function RS(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){PS(a,o,p)},function(p){return iw(a,o,p)}):PS(a,o,u)}function PS(a,o,u){o.status="fulfilled",o.value=u,$S(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,MS(a,u)))}function iw(a,o,u){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,$S(o),o=o.next;while(o!==p)}a.action=null}function $S(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function US(a,o){return o}function LS(a,o){if(et){var u=Dt.formState;if(u!==null){e:{var p=Fe;if(et){if($t){t:{for(var b=$t,E=gi;b.nodeType!==8;){if(!E){b=null;break t}if(b=yi(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){$t=yi(b.nextSibling),p=b.data==="F!";break e}}Xa(p)}p=!1}p&&(o=u[0])}}return u=rs(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:US,lastRenderedState:o},u.queue=p,u=nC.bind(null,Fe,p),p.dispatch=u,p=sw(!1),E=uw.bind(null,Fe,!1,p.queue),p=rs(),b={state:o,dispatch:null,action:a,pending:null},p.queue=b,u=tP.bind(null,Fe,b,E,u),b.dispatch=u,p.memoizedState=a,[o,u,!1]}function kS(a){var o=Kt();return BS(o,Ct,a)}function BS(a,o,u){if(o=tw(a,o,US)[0],a=og(ia)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Kf(o)}catch(M){throw M===zl?Qp:M}else p=o;o=Kt();var b=o.queue,E=b.dispatch;return u!==o.memoizedState&&(Fe.flags|=2048,Wl(9,{destroy:void 0},nP.bind(null,b,u),null)),[p,E,a]}function nP(a,o){a.action=o}function jS(a){var o=Kt(),u=Ct;if(u!==null)return BS(o,u,a);Kt(),o=o.memoizedState,u=Kt();var p=u.queue.dispatch;return u.memoizedState=a,[o,p,!1]}function Wl(a,o,u,p){return a={tag:a,create:u,deps:p,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=rg(),Fe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(p=u.next,u.next=a,a.next=p,o.lastEffect=a),a}function zS(){return Kt().memoizedState}function cg(a,o,u,p){var b=rs();Fe.flags|=a,b.memoizedState=Wl(1|o,{destroy:void 0},u,p===void 0?null:p)}function lg(a,o,u,p){var b=Kt();p=p===void 0?null:p;var E=b.memoizedState.inst;Ct!==null&&p!==null&&Yy(p,Ct.memoizedState.deps)?b.memoizedState=Wl(o,E,u,p):(Fe.flags|=a,b.memoizedState=Wl(1|o,E,u,p))}function HS(a,o){cg(8390656,8,a,o)}function rw(a,o){lg(2048,8,a,o)}function sP(a){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=rg(),Fe.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function FS(a){var o=Kt().memoizedState;return sP({ref:o,nextImpl:a}),function(){if((dt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function VS(a,o){return lg(4,2,a,o)}function qS(a,o){return lg(4,4,a,o)}function WS(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function GS(a,o,u){u=u!=null?u.concat([a]):null,lg(4,4,WS.bind(null,o,a),u)}function aw(){}function KS(a,o){var u=Kt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&Yy(o,p[1])?p[0]:(u.memoizedState=[a,o],a)}function YS(a,o){var u=Kt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&Yy(o,p[1]))return p[0];if(p=a(),wc){ur(!0);try{a()}finally{ur(!1)}}return u.memoizedState=[p,o],p}function ow(a,o,u){return u===void 0||(sa&1073741824)!==0&&(Ze&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=XC(),Fe.lanes|=a,ro|=a,u)}function XS(a,o,u,p){return Ls(u,o)?u:Fl.current!==null?(a=ow(a,u,p),Ls(a,o)||(nn=!0),a):(sa&42)===0||(sa&1073741824)!==0&&(Ze&261930)===0?(nn=!0,a.memoizedState=u):(a=XC(),Fe.lanes|=a,ro|=a,o)}function QS(a,o,u,p,b){var E=k.p;k.p=E!==0&&8>E?E:8;var M=P.T,B={};P.T=B,uw(a,!1,o,u);try{var Y=b(),ne=P.S;if(ne!==null&&ne(B,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ce=ZR(Y,p);Yf(a,o,ce,Fs(a))}else Yf(a,o,p,Fs(a))}catch(fe){Yf(a,o,{then:function(){},status:"rejected",reason:fe},Fs())}finally{k.p=E,M!==null&&B.types!==null&&(M.types=B.types),P.T=M}}function iP(){}function cw(a,o,u,p){if(a.tag!==5)throw Error(s(476));var b=ZS(a).queue;QS(a,b,o,V,u===null?iP:function(){return JS(a),u(p)})}function ZS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:V},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function JS(a){var o=ZS(a);o.next===null&&(o=a.alternate.memoizedState),Yf(a,o.next.queue,{},Fs())}function lw(){return In(dd)}function eC(){return Kt().memoizedState}function tC(){return Kt().memoizedState}function rP(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=Fs();a=Ja(u);var p=eo(o,a,u);p!==null&&(vs(p,o,u),Vf(p,o,u)),o={cache:ky()},a.payload=o;return}o=o.return}}function aP(a,o,u){var p=Fs();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ug(a)?sC(o,u):(u=Ty(a,o,u,p),u!==null&&(vs(u,a,p),iC(u,o,p)))}function nC(a,o,u){var p=Fs();Yf(a,o,u,p)}function Yf(a,o,u,p){var b={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ug(a))sC(o,b);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var M=o.lastRenderedState,B=E(M,u);if(b.hasEagerState=!0,b.eagerState=B,Ls(B,M))return Vp(a,o,b,0),Dt===null&&Fp(),!1}catch{}finally{}if(u=Ty(a,o,b,p),u!==null)return vs(u,a,p),iC(u,o,p),!0}return!1}function uw(a,o,u,p){if(p={lane:2,revertLane:Hw(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ug(a)){if(o)throw Error(s(479))}else o=Ty(a,u,p,2),o!==null&&vs(o,a,2)}function ug(a){var o=a.alternate;return a===Fe||o!==null&&o===Fe}function sC(a,o){Vl=sg=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function iC(a,o,u){if((u&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,Dp(a,u)}}var Xf={readContext:In,use:ag,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Xf.useEffectEvent=Vt;var rC={readContext:In,use:ag,useCallback:function(a,o){return rs().memoizedState=[a,o===void 0?null:o],a},useContext:In,useEffect:HS,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,cg(4194308,4,WS.bind(null,o,a),u)},useLayoutEffect:function(a,o){return cg(4194308,4,a,o)},useInsertionEffect:function(a,o){cg(4,2,a,o)},useMemo:function(a,o){var u=rs();o=o===void 0?null:o;var p=a();if(wc){ur(!0);try{a()}finally{ur(!1)}}return u.memoizedState=[p,o],p},useReducer:function(a,o,u){var p=rs();if(u!==void 0){var b=u(o);if(wc){ur(!0);try{u(o)}finally{ur(!1)}}}else b=o;return p.memoizedState=p.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},p.queue=a,a=a.dispatch=aP.bind(null,Fe,a),[p.memoizedState,a]},useRef:function(a){var o=rs();return a={current:a},o.memoizedState=a},useState:function(a){a=sw(a);var o=a.queue,u=nC.bind(null,Fe,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:aw,useDeferredValue:function(a,o){var u=rs();return ow(u,a,o)},useTransition:function(){var a=sw(!1);return a=QS.bind(null,Fe,a.queue,!0,!1),rs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var p=Fe,b=rs();if(et){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),Dt===null)throw Error(s(349));(Ze&127)!==0||NS(p,o,u)}b.memoizedState=u;var E={value:u,getSnapshot:o};return b.queue=E,HS(IS.bind(null,p,E,a),[a]),p.flags|=2048,Wl(9,{destroy:void 0},TS.bind(null,p,E,u,o),null),u},useId:function(){var a=rs(),o=Dt.identifierPrefix;if(et){var u=vr,p=wr;u=(p&~(1<<32-ss(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=ig++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=JR++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:lw,useFormState:LS,useActionState:LS,useOptimistic:function(a){var o=rs();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=uw.bind(null,Fe,!0,u),u.dispatch=o,[a,o]},useMemoCache:ew,useCacheRefresh:function(){return rs().memoizedState=rP.bind(null,Fe)},useEffectEvent:function(a){var o=rs(),u={impl:a};return o.memoizedState=u,function(){if((dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},fw={readContext:In,use:ag,useCallback:KS,useContext:In,useEffect:rw,useImperativeHandle:GS,useInsertionEffect:VS,useLayoutEffect:qS,useMemo:YS,useReducer:og,useRef:zS,useState:function(){return og(ia)},useDebugValue:aw,useDeferredValue:function(a,o){var u=Kt();return XS(u,Ct.memoizedState,a,o)},useTransition:function(){var a=og(ia)[0],o=Kt().memoizedState;return[typeof a=="boolean"?a:Kf(a),o]},useSyncExternalStore:AS,useId:eC,useHostTransitionStatus:lw,useFormState:kS,useActionState:kS,useOptimistic:function(a,o){var u=Kt();return _S(u,Ct,a,o)},useMemoCache:ew,useCacheRefresh:tC};fw.useEffectEvent=FS;var aC={readContext:In,use:ag,useCallback:KS,useContext:In,useEffect:rw,useImperativeHandle:GS,useInsertionEffect:VS,useLayoutEffect:qS,useMemo:YS,useReducer:nw,useRef:zS,useState:function(){return nw(ia)},useDebugValue:aw,useDeferredValue:function(a,o){var u=Kt();return Ct===null?ow(u,a,o):XS(u,Ct.memoizedState,a,o)},useTransition:function(){var a=nw(ia)[0],o=Kt().memoizedState;return[typeof a=="boolean"?a:Kf(a),o]},useSyncExternalStore:AS,useId:eC,useHostTransitionStatus:lw,useFormState:jS,useActionState:jS,useOptimistic:function(a,o){var u=Kt();return Ct!==null?_S(u,Ct,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:ew,useCacheRefresh:tC};aC.useEffectEvent=FS;function dw(a,o,u,p){o=a.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var hw={enqueueSetState:function(a,o,u){a=a._reactInternals;var p=Fs(),b=Ja(p);b.payload=o,u!=null&&(b.callback=u),o=eo(a,b,p),o!==null&&(vs(o,a,p),Vf(o,a,p))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var p=Fs(),b=Ja(p);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=eo(a,b,p),o!==null&&(vs(o,a,p),Vf(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=Fs(),p=Ja(u);p.tag=2,o!=null&&(p.callback=o),o=eo(a,p,u),o!==null&&(vs(o,a,u),Vf(o,a,u))}};function oC(a,o,u,p,b,E,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,E,M):o.prototype&&o.prototype.isPureReactComponent?!Uf(u,p)||!Uf(b,E):!0}function cC(a,o,u,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==a&&hw.enqueueReplaceState(o,o.state,null)}function vc(a,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(a=a.defaultProps){u===o&&(u=g({},u));for(var b in a)u[b]===void 0&&(u[b]=a[b])}return u}function lC(a){Hp(a)}function uC(a){console.error(a)}function fC(a){Hp(a)}function fg(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function dC(a,o,u){try{var p=a.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function pw(a,o,u){return u=Ja(u),u.tag=3,u.payload={element:null},u.callback=function(){fg(a,o)},u}function hC(a){return a=Ja(a),a.tag=3,a}function pC(a,o,u,p){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var E=p.value;a.payload=function(){return b(E)},a.callback=function(){dC(o,u,p)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){dC(o,u,p),typeof b!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var B=p.stack;this.componentDidCatch(p.value,{componentStack:B!==null?B:""})})}function oP(a,o,u,p,b){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&kl(o,u,b,!0),u=Bs.current,u!==null){switch(u.tag){case 31:case 13:return mi===null?Sg():u.alternate===null&&qt===0&&(qt=3),u.flags&=-257,u.flags|=65536,u.lanes=b,p===Zp?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),Bw(a,p,b)),!1;case 22:return u.flags|=65536,p===Zp?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),Bw(a,p,b)),!1}throw Error(s(435,u.tag))}return Bw(a,p,b),Sg(),!1}if(et)return o=Bs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,p!==Ry&&(a=Error(s(422),{cause:p}),Bf(di(a,u)))):(p!==Ry&&(o=Error(s(423),{cause:p}),Bf(di(o,u))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,p=di(p,u),b=pw(a.stateNode,p,b),Vy(a,b),qt!==4&&(qt=2)),!1;var E=Error(s(520),{cause:p});if(E=di(E,u),id===null?id=[E]:id.push(E),qt!==4&&(qt=2),o===null)return!0;p=di(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=b&-b,u.lanes|=a,a=pw(u.stateNode,p,a),Vy(u,a),!1;case 1:if(o=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ao===null||!ao.has(E))))return u.flags|=65536,b&=-b,u.lanes|=b,b=hC(b),pC(b,a,u,p),Vy(u,b),!1}u=u.return}while(u!==null);return!1}var gw=Error(s(461)),nn=!1;function Dn(a,o,u,p){o.child=a===null?wS(o,null,u,p):yc(o,a.child,u,p)}function gC(a,o,u,p,b){u=u.render;var E=o.ref;if("ref"in p){var M={};for(var B in p)B!=="ref"&&(M[B]=p[B])}else M=p;return hc(o),p=Xy(a,o,u,M,E,b),B=Qy(),a!==null&&!nn?(Zy(a,o,b),ra(a,o,b)):(et&&B&&_y(o),o.flags|=1,Dn(a,o,p,b),o.child)}function mC(a,o,u,p,b){if(a===null){var E=u.type;return typeof E=="function"&&!Iy(E)&&E.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=E,yC(a,o,E,p,b)):(a=Wp(u.type,null,p,o,o.mode,b),a.ref=o.ref,a.return=o,o.child=a)}if(E=a.child,!Sw(a,b)){var M=E.memoizedProps;if(u=u.compare,u=u!==null?u:Uf,u(M,p)&&a.ref===o.ref)return ra(a,o,b)}return o.flags|=1,a=Jr(E,p),a.ref=o.ref,a.return=o,o.child=a}function yC(a,o,u,p,b){if(a!==null){var E=a.memoizedProps;if(Uf(E,p)&&a.ref===o.ref)if(nn=!1,o.pendingProps=p=E,Sw(a,b))(a.flags&131072)!==0&&(nn=!0);else return o.lanes=a.lanes,ra(a,o,b)}return mw(a,o,u,p,b)}function wC(a,o,u,p){var b=p.children,E=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,a!==null){for(p=o.child=a.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~E}else p=0,o.child=null;return vC(a,o,E,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Xp(o,E!==null?E.cachePool:null),E!==null?xS(o,E):Wy(),ES(o);else return p=o.lanes=536870912,vC(a,o,E!==null?E.baseLanes|u:u,u,p)}else E!==null?(Xp(o,E.cachePool),xS(o,E),no(),o.memoizedState=null):(a!==null&&Xp(o,null),Wy(),no());return Dn(a,o,b,u),o.child}function Qf(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function vC(a,o,u,p,b){var E=jy();return E=E===null?null:{parent:en._currentValue,pool:E},o.memoizedState={baseLanes:u,cachePool:E},a!==null&&Xp(o,null),Wy(),ES(o),a!==null&&kl(a,o,p,!0),o.childLanes=b,null}function dg(a,o){return o=pg({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function bC(a,o,u){return yc(o,a.child,null,u),a=dg(o,o.pendingProps),a.flags|=2,js(o),o.memoizedState=null,a}function cP(a,o,u){var p=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(et){if(p.mode==="hidden")return a=dg(o,p),o.lanes=536870912,Qf(null,a);if(Ky(o),(a=$t)?(a=MA(a,gi),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ka!==null?{id:wr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},u=sS(a),u.return=o,o.child=u,Tn=o,$t=null)):a=null,a===null)throw Xa(o);return o.lanes=536870912,null}return dg(o,p)}var E=a.memoizedState;if(E!==null){var M=E.dehydrated;if(Ky(o),b)if(o.flags&256)o.flags&=-257,o=bC(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(s(558));else if(nn||kl(a,o,u,!1),b=(u&a.childLanes)!==0,nn||b){if(p=Dt,p!==null&&(M=Op(p,u),M!==0&&M!==E.retryLane))throw E.retryLane=M,lc(a,M),vs(p,a,M),gw;Sg(),o=bC(a,o,u)}else a=E.treeContext,$t=yi(M.nextSibling),Tn=o,et=!0,Ya=null,gi=!1,a!==null&&aS(o,a),o=dg(o,p),o.flags|=4096;return o}return a=Jr(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function hg(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function mw(a,o,u,p,b){return hc(o),u=Xy(a,o,u,p,void 0,b),p=Qy(),a!==null&&!nn?(Zy(a,o,b),ra(a,o,b)):(et&&p&&_y(o),o.flags|=1,Dn(a,o,u,b),o.child)}function xC(a,o,u,p,b,E){return hc(o),o.updateQueue=null,u=CS(o,p,u,b),SS(a),p=Qy(),a!==null&&!nn?(Zy(a,o,E),ra(a,o,E)):(et&&p&&_y(o),o.flags|=1,Dn(a,o,u,E),o.child)}function EC(a,o,u,p,b){if(hc(o),o.stateNode===null){var E=Pl,M=u.contextType;typeof M=="object"&&M!==null&&(E=In(M)),E=new u(p,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=hw,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=p,E.state=o.memoizedState,E.refs={},Hy(o),M=u.contextType,E.context=typeof M=="object"&&M!==null?In(M):Pl,E.state=o.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(dw(o,u,M,p),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(M=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),M!==E.state&&hw.enqueueReplaceState(E,E.state,null),Wf(o,p,E,b),qf(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){E=o.stateNode;var B=o.memoizedProps,Y=vc(u,B);E.props=Y;var ne=E.context,ce=u.contextType;M=Pl,typeof ce=="object"&&ce!==null&&(M=In(ce));var fe=u.getDerivedStateFromProps;ce=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function",B=o.pendingProps!==B,ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B||ne!==M)&&cC(o,E,p,M),Za=!1;var ie=o.memoizedState;E.state=ie,Wf(o,p,E,b),qf(),ne=o.memoizedState,B||ie!==ne||Za?(typeof fe=="function"&&(dw(o,u,fe,p),ne=o.memoizedState),(Y=Za||oC(o,u,Y,p,ie,ne,M))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=ne),E.props=p,E.state=ne,E.context=M,p=Y):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{E=o.stateNode,Fy(a,o),M=o.memoizedProps,ce=vc(u,M),E.props=ce,fe=o.pendingProps,ie=E.context,ne=u.contextType,Y=Pl,typeof ne=="object"&&ne!==null&&(Y=In(ne)),B=u.getDerivedStateFromProps,(ne=typeof B=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M!==fe||ie!==Y)&&cC(o,E,p,Y),Za=!1,ie=o.memoizedState,E.state=ie,Wf(o,p,E,b),qf();var re=o.memoizedState;M!==fe||ie!==re||Za||a!==null&&a.dependencies!==null&&Kp(a.dependencies)?(typeof B=="function"&&(dw(o,u,B,p),re=o.memoizedState),(ce=Za||oC(o,u,ce,p,ie,re,Y)||a!==null&&a.dependencies!==null&&Kp(a.dependencies))?(ne||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,re,Y),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,re,Y)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=re),E.props=p,E.state=re,E.context=Y,p=ce):(typeof E.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(o.flags|=1024),p=!1)}return E=p,hg(a,o),p=(o.flags&128)!==0,E||p?(E=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,a!==null&&p?(o.child=yc(o,a.child,null,b),o.child=yc(o,null,u,b)):Dn(a,o,u,b),o.memoizedState=E.state,a=o.child):a=ra(a,o,b),a}function SC(a,o,u,p){return fc(),o.flags|=256,Dn(a,o,u,p),o.child}var yw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ww(a){return{baseLanes:a,cachePool:dS()}}function vw(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=Hs),a}function CC(a,o,u){var p=o.pendingProps,b=!1,E=(o.flags&128)!==0,M;if((M=E)||(M=a!==null&&a.memoizedState===null?!1:(Gt.current&2)!==0),M&&(b=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,a===null){if(et){if(b?to(o):no(),(a=$t)?(a=MA(a,gi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ka!==null?{id:wr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},u=sS(a),u.return=o,o.child=u,Tn=o,$t=null)):a=null,a===null)throw Xa(o);return t1(a)?o.lanes=32:o.lanes=536870912,null}var B=p.children;return p=p.fallback,b?(no(),b=o.mode,B=pg({mode:"hidden",children:B},b),p=uc(p,b,u,null),B.return=o,p.return=o,B.sibling=p,o.child=B,p=o.child,p.memoizedState=ww(u),p.childLanes=vw(a,M,u),o.memoizedState=yw,Qf(null,p)):(to(o),bw(o,B))}var Y=a.memoizedState;if(Y!==null&&(B=Y.dehydrated,B!==null)){if(E)o.flags&256?(to(o),o.flags&=-257,o=xw(a,o,u)):o.memoizedState!==null?(no(),o.child=a.child,o.flags|=128,o=null):(no(),B=p.fallback,b=o.mode,p=pg({mode:"visible",children:p.children},b),B=uc(B,b,u,null),B.flags|=2,p.return=o,B.return=o,p.sibling=B,o.child=p,yc(o,a.child,null,u),p=o.child,p.memoizedState=ww(u),p.childLanes=vw(a,M,u),o.memoizedState=yw,o=Qf(null,p));else if(to(o),t1(B)){if(M=B.nextSibling&&B.nextSibling.dataset,M)var ne=M.dgst;M=ne,p=Error(s(419)),p.stack="",p.digest=M,Bf({value:p,source:null,stack:null}),o=xw(a,o,u)}else if(nn||kl(a,o,u,!1),M=(u&a.childLanes)!==0,nn||M){if(M=Dt,M!==null&&(p=Op(M,u),p!==0&&p!==Y.retryLane))throw Y.retryLane=p,lc(a,p),vs(M,a,p),gw;e1(B)||Sg(),o=xw(a,o,u)}else e1(B)?(o.flags|=192,o.child=a.child,o=null):(a=Y.treeContext,$t=yi(B.nextSibling),Tn=o,et=!0,Ya=null,gi=!1,a!==null&&aS(o,a),o=bw(o,p.children),o.flags|=4096);return o}return b?(no(),B=p.fallback,b=o.mode,Y=a.child,ne=Y.sibling,p=Jr(Y,{mode:"hidden",children:p.children}),p.subtreeFlags=Y.subtreeFlags&65011712,ne!==null?B=Jr(ne,B):(B=uc(B,b,u,null),B.flags|=2),B.return=o,p.return=o,p.sibling=B,o.child=p,Qf(null,p),p=o.child,B=a.child.memoizedState,B===null?B=ww(u):(b=B.cachePool,b!==null?(Y=en._currentValue,b=b.parent!==Y?{parent:Y,pool:Y}:b):b=dS(),B={baseLanes:B.baseLanes|u,cachePool:b}),p.memoizedState=B,p.childLanes=vw(a,M,u),o.memoizedState=yw,Qf(a.child,p)):(to(o),u=a.child,a=u.sibling,u=Jr(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,a!==null&&(M=o.deletions,M===null?(o.deletions=[a],o.flags|=16):M.push(a)),o.child=u,o.memoizedState=null,u)}function bw(a,o){return o=pg({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function pg(a,o){return a=ks(22,a,null,o),a.lanes=0,a}function xw(a,o,u){return yc(o,a.child,null,u),a=bw(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function AC(a,o,u){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),Uy(a.return,o,u)}function Ew(a,o,u,p,b,E){var M=a.memoizedState;M===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:b,treeForkCount:E}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=p,M.tail=u,M.tailMode=b,M.treeForkCount=E)}function NC(a,o,u){var p=o.pendingProps,b=p.revealOrder,E=p.tail;p=p.children;var M=Gt.current,B=(M&2)!==0;if(B?(M=M&1|2,o.flags|=128):M&=1,Z(Gt,M),Dn(a,o,p,u),p=et?kf:0,!B&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&AC(a,u,o);else if(a.tag===19)AC(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)a=u.alternate,a!==null&&ng(a)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),Ew(o,!1,b,u,E,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(a=b.alternate,a!==null&&ng(a)===null){o.child=b;break}a=b.sibling,b.sibling=u,u=b,b=a}Ew(o,!0,u,null,E,p);break;case"together":Ew(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function ra(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),ro|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(kl(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(s(153));if(o.child!==null){for(a=o.child,u=Jr(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Jr(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function Sw(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Kp(a)))}function lP(a,o,u){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),Qa(o,en,a.memoizedState.cache),fc();break;case 27:case 5:We(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:Qa(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ky(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(to(o),o.flags|=128,null):(u&o.child.childLanes)!==0?CC(a,o,u):(to(o),a=ra(a,o,u),a!==null?a.sibling:null);to(o);break;case 19:var b=(a.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(kl(a,o,u,!1),p=(u&o.childLanes)!==0),b){if(p)return NC(a,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Z(Gt,Gt.current),p)break;return null;case 22:return o.lanes=0,wC(a,o,u,o.pendingProps);case 24:Qa(o,en,a.memoizedState.cache)}return ra(a,o,u)}function TC(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)nn=!0;else{if(!Sw(a,u)&&(o.flags&128)===0)return nn=!1,lP(a,o,u);nn=(a.flags&131072)!==0}else nn=!1,et&&(o.flags&1048576)!==0&&rS(o,kf,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=gc(o.elementType),o.type=a,typeof a=="function")Iy(a)?(p=vc(a,p),o.tag=1,o=EC(null,o,a,p,u)):(o.tag=0,o=mw(null,o,a,p,u));else{if(a!=null){var b=a.$$typeof;if(b===I){o.tag=11,o=gC(null,o,a,p,u);break e}else if(b===O){o.tag=14,o=mC(null,o,a,p,u);break e}}throw o=W(a)||a,Error(s(306,o,""))}}return o;case 0:return mw(a,o,o.type,o.pendingProps,u);case 1:return p=o.type,b=vc(p,o.pendingProps),EC(a,o,p,b,u);case 3:e:{if(Ne(o,o.stateNode.containerInfo),a===null)throw Error(s(387));p=o.pendingProps;var E=o.memoizedState;b=E.element,Fy(a,o),Wf(o,p,null,u);var M=o.memoizedState;if(p=M.cache,Qa(o,en,p),p!==E.cache&&Ly(o,[en],u,!0),qf(),p=M.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=SC(a,o,p,u);break e}else if(p!==b){b=di(Error(s(424)),o),Bf(b),o=SC(a,o,p,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for($t=yi(a.firstChild),Tn=o,et=!0,Ya=null,gi=!0,u=wS(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(fc(),p===b){o=ra(a,o,u);break e}Dn(a,o,p,u)}o=o.child}return o;case 26:return hg(a,o),a===null?(u=kA(o.type,null,o.pendingProps,null))?o.memoizedState=u:et||(u=o.type,a=o.pendingProps,p=Og(oe.current).createElement(u),p[ln]=o,p[Vn]=a,On(p,u,a),Jt(p),o.stateNode=p):o.memoizedState=kA(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return We(o),a===null&&et&&(p=o.stateNode=$A(o.type,o.pendingProps,oe.current),Tn=o,gi=!0,b=$t,uo(o.type)?(n1=b,$t=yi(p.firstChild)):$t=b),Dn(a,o,o.pendingProps.children,u),hg(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&et&&((b=p=$t)&&(p=BP(p,o.type,o.pendingProps,gi),p!==null?(o.stateNode=p,Tn=o,$t=yi(p.firstChild),gi=!1,b=!0):b=!1),b||Xa(o)),We(o),b=o.type,E=o.pendingProps,M=a!==null?a.memoizedProps:null,p=E.children,Qw(b,E)?p=null:M!==null&&Qw(b,M)&&(o.flags|=32),o.memoizedState!==null&&(b=Xy(a,o,eP,null,null,u),dd._currentValue=b),hg(a,o),Dn(a,o,p,u),o.child;case 6:return a===null&&et&&((a=u=$t)&&(u=jP(u,o.pendingProps,gi),u!==null?(o.stateNode=u,Tn=o,$t=null,a=!0):a=!1),a||Xa(o)),null;case 13:return CC(a,o,u);case 4:return Ne(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=yc(o,null,p,u):Dn(a,o,p,u),o.child;case 11:return gC(a,o,o.type,o.pendingProps,u);case 7:return Dn(a,o,o.pendingProps,u),o.child;case 8:return Dn(a,o,o.pendingProps.children,u),o.child;case 12:return Dn(a,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,Qa(o,o.type,p.value),Dn(a,o,p.children,u),o.child;case 9:return b=o.type._context,p=o.pendingProps.children,hc(o),b=In(b),p=p(b),o.flags|=1,Dn(a,o,p,u),o.child;case 14:return mC(a,o,o.type,o.pendingProps,u);case 15:return yC(a,o,o.type,o.pendingProps,u);case 19:return NC(a,o,u);case 31:return cP(a,o,u);case 22:return wC(a,o,u,o.pendingProps);case 24:return hc(o),p=In(en),a===null?(b=jy(),b===null&&(b=Dt,E=ky(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=u),b=E),o.memoizedState={parent:p,cache:b},Hy(o),Qa(o,en,b)):((a.lanes&u)!==0&&(Fy(a,o),Wf(o,null,null,u),qf()),b=a.memoizedState,E=o.memoizedState,b.parent!==p?(b={parent:p,cache:p},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Qa(o,en,p)):(p=E.cache,Qa(o,en,p),p!==b.cache&&Ly(o,[en],u,!0))),Dn(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function aa(a){a.flags|=4}function Cw(a,o,u,p,b){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(eA())a.flags|=8192;else throw mc=Zp,zy}else a.flags&=-16777217}function IC(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!FA(o))if(eA())a.flags|=8192;else throw mc=Zp,zy}function gg(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Tp():536870912,a.lanes|=o,Xl|=o)}function Zf(a,o){if(!et)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Ut(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,p=0;if(o)for(var b=a.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=u,o}function uP(a,o,u){var p=o.pendingProps;switch(My(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return u=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),na(en),Te(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Ll(o)?aa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Py())),Ut(o),null;case 26:var b=o.type,E=o.memoizedState;return a===null?(aa(o),E!==null?(Ut(o),IC(o,E)):(Ut(o),Cw(o,b,null,p,u))):E?E!==a.memoizedState?(aa(o),Ut(o),IC(o,E)):(Ut(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&aa(o),Ut(o),Cw(o,b,a,p,u)),null;case 27:if(Qe(o),u=oe.current,b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(!p){if(o.stateNode===null)throw Error(s(166));return Ut(o),null}a=ee.current,Ll(o)?oS(o):(a=$A(b,p,u),o.stateNode=a,aa(o))}return Ut(o),null;case 5:if(Qe(o),b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(!p){if(o.stateNode===null)throw Error(s(166));return Ut(o),null}if(E=ee.current,Ll(o))oS(o);else{var M=Og(oe.current);switch(E){case 1:E=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=M.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof p.is=="string"?M.createElement("select",{is:p.is}):M.createElement("select"),p.multiple?E.multiple=!0:p.size&&(E.size=p.size);break;default:E=typeof p.is=="string"?M.createElement(b,{is:p.is}):M.createElement(b)}}E[ln]=o,E[Vn]=p;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)E.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=E;e:switch(On(E,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&aa(o)}}return Ut(o),Cw(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&aa(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(s(166));if(a=oe.current,Ll(o)){if(a=o.stateNode,u=o.memoizedProps,p=null,b=Tn,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}a[ln]=o,a=!!(a.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||CA(a.nodeValue,u)),a||Xa(o,!0)}else a=Og(a).createTextNode(p),a[ln]=o,o.stateNode=a}return Ut(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(p=Ll(o),u!==null){if(a===null){if(!p)throw Error(s(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[ln]=o}else fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),a=!1}else u=Py(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(js(o),o):(js(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Ut(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Ll(o),p!==null&&p.dehydrated!==null){if(a===null){if(!b)throw Error(s(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[ln]=o}else fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),b=!1}else b=Py(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(js(o),o):(js(o),null)}return js(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,a=a!==null&&a.memoizedState!==null,u&&(p=o.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),gg(o,o.updateQueue),Ut(o),null);case 4:return Te(),a===null&&Ww(o.stateNode.containerInfo),Ut(o),null;case 10:return na(o.type),Ut(o),null;case 19:if(X(Gt),p=o.memoizedState,p===null)return Ut(o),null;if(b=(o.flags&128)!==0,E=p.rendering,E===null)if(b)Zf(p,!1);else{if(qt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(E=ng(a),E!==null){for(o.flags|=128,Zf(p,!1),a=E.updateQueue,o.updateQueue=a,gg(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)nS(u,a),u=u.sibling;return Z(Gt,Gt.current&1|2),et&&ea(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&St()>bg&&(o.flags|=128,b=!0,Zf(p,!1),o.lanes=4194304)}else{if(!b)if(a=ng(E),a!==null){if(o.flags|=128,b=!0,a=a.updateQueue,o.updateQueue=a,gg(o,a),Zf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!et)return Ut(o),null}else 2*St()-p.renderingStartTime>bg&&u!==536870912&&(o.flags|=128,b=!0,Zf(p,!1),o.lanes=4194304);p.isBackwards?(E.sibling=o.child,o.child=E):(a=p.last,a!==null?a.sibling=E:o.child=E,p.last=E)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=St(),a.sibling=null,u=Gt.current,Z(Gt,b?u&1|2:u&1),et&&ea(o,p.treeForkCount),a):(Ut(o),null);case 22:case 23:return js(o),Gy(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),u=o.updateQueue,u!==null&&gg(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),a!==null&&X(pc),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),na(en),Ut(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function fP(a,o){switch(My(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return na(en),Te(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Qe(o),null;case 31:if(o.memoizedState!==null){if(js(o),o.alternate===null)throw Error(s(340));fc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(js(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(s(340));fc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return X(Gt),null;case 4:return Te(),null;case 10:return na(o.type),null;case 22:case 23:return js(o),Gy(),a!==null&&X(pc),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return na(en),null;case 25:return null;default:return null}}function DC(a,o){switch(My(o),o.tag){case 3:na(en),Te();break;case 26:case 27:case 5:Qe(o);break;case 4:Te();break;case 31:o.memoizedState!==null&&js(o);break;case 13:js(o);break;case 19:X(Gt);break;case 10:na(o.type);break;case 22:case 23:js(o),Gy(),a!==null&&X(pc);break;case 24:na(en)}}function Jf(a,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var b=p.next;u=b;do{if((u.tag&a)===a){p=void 0;var E=u.create,M=u.inst;p=E(),M.destroy=p}u=u.next}while(u!==b)}}catch(B){vt(o,o.return,B)}}function so(a,o,u){try{var p=o.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var E=b.next;p=E;do{if((p.tag&a)===a){var M=p.inst,B=M.destroy;if(B!==void 0){M.destroy=void 0,b=o;var Y=u,ne=B;try{ne()}catch(ce){vt(b,Y,ce)}}}p=p.next}while(p!==E)}}catch(ce){vt(o,o.return,ce)}}function OC(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{bS(o,u)}catch(p){vt(a,a.return,p)}}}function _C(a,o,u){u.props=vc(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(p){vt(a,o,p)}}function ed(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof u=="function"?a.refCleanup=u(p):u.current=p}}catch(b){vt(a,o,b)}}function br(a,o){var u=a.ref,p=a.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(b){vt(a,o,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){vt(a,o,b)}else u.current=null}function MC(a){var o=a.type,u=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(b){vt(a,a.return,b)}}function Aw(a,o,u){try{var p=a.stateNode;RP(p,a.type,u,o),p[Vn]=o}catch(b){vt(a,a.return,b)}}function RC(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&uo(a.type)||a.tag===4}function Nw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||RC(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&uo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Tw(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=li));else if(p!==4&&(p===27&&uo(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(Tw(a,o,u),a=a.sibling;a!==null;)Tw(a,o,u),a=a.sibling}function mg(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(p!==4&&(p===27&&uo(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(mg(a,o,u),a=a.sibling;a!==null;)mg(a,o,u),a=a.sibling}function PC(a){var o=a.stateNode,u=a.memoizedProps;try{for(var p=a.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);On(o,p,u),o[ln]=a,o[Vn]=u}catch(E){vt(a,a.return,E)}}var oa=!1,sn=!1,Iw=!1,$C=typeof WeakSet=="function"?WeakSet:Set,wn=null;function dP(a,o){if(a=a.containerInfo,Yw=Lg,a=GE(a),xy(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var b=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var M=0,B=-1,Y=-1,ne=0,ce=0,fe=a,ie=null;t:for(;;){for(var re;fe!==u||b!==0&&fe.nodeType!==3||(B=M+b),fe!==E||p!==0&&fe.nodeType!==3||(Y=M+p),fe.nodeType===3&&(M+=fe.nodeValue.length),(re=fe.firstChild)!==null;)ie=fe,fe=re;for(;;){if(fe===a)break t;if(ie===u&&++ne===b&&(B=M),ie===E&&++ce===p&&(Y=M),(re=fe.nextSibling)!==null)break;fe=ie,ie=fe.parentNode}fe=re}u=B===-1||Y===-1?null:{start:B,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(Xw={focusedElem:a,selectionRange:u},Lg=!1,wn=o;wn!==null;)if(o=wn,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,wn=a;else for(;wn!==null;){switch(o=wn,E=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)b=a[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,u=o,b=E.memoizedProps,E=E.memoizedState,p=u.stateNode;try{var Ie=vc(u.type,b);a=p.getSnapshotBeforeUpdate(Ie,E),p.__reactInternalSnapshotBeforeUpdate=a}catch(Be){vt(u,u.return,Be)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Jw(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Jw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=o.sibling,a!==null){a.return=o.return,wn=a;break}wn=o.return}}function UC(a,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:la(a,u),p&4&&Jf(5,u);break;case 1:if(la(a,u),p&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(M){vt(u,u.return,M)}else{var b=vc(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(b,o,a.__reactInternalSnapshotBeforeUpdate)}catch(M){vt(u,u.return,M)}}p&64&&OC(u),p&512&&ed(u,u.return);break;case 3:if(la(a,u),p&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{bS(a,o)}catch(M){vt(u,u.return,M)}}break;case 27:o===null&&p&4&&PC(u);case 26:case 5:la(a,u),o===null&&p&4&&MC(u),p&512&&ed(u,u.return);break;case 12:la(a,u);break;case 31:la(a,u),p&4&&BC(a,u);break;case 13:la(a,u),p&4&&jC(a,u),p&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=xP.bind(null,u),zP(a,u))));break;case 22:if(p=u.memoizedState!==null||oa,!p){o=o!==null&&o.memoizedState!==null||sn,b=oa;var E=sn;oa=p,(sn=o)&&!E?ua(a,u,(u.subtreeFlags&8772)!==0):la(a,u),oa=b,sn=E}break;case 30:break;default:la(a,u)}}function LC(a){var o=a.alternate;o!==null&&(a.alternate=null,LC(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Sf(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Bt=null,gs=!1;function ca(a,o,u){for(u=u.child;u!==null;)kC(a,o,u),u=u.sibling}function kC(a,o,u){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Zo,u)}catch{}switch(u.tag){case 26:sn||br(u,o),ca(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||br(u,o);var p=Bt,b=gs;uo(u.type)&&(Bt=u.stateNode,gs=!1),ca(a,o,u),ld(u.stateNode),Bt=p,gs=b;break;case 5:sn||br(u,o);case 6:if(p=Bt,b=gs,Bt=null,ca(a,o,u),Bt=p,gs=b,Bt!==null)if(gs)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(u.stateNode)}catch(E){vt(u,o,E)}else try{Bt.removeChild(u.stateNode)}catch(E){vt(u,o,E)}break;case 18:Bt!==null&&(gs?(a=Bt,OA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),iu(a)):OA(Bt,u.stateNode));break;case 4:p=Bt,b=gs,Bt=u.stateNode.containerInfo,gs=!0,ca(a,o,u),Bt=p,gs=b;break;case 0:case 11:case 14:case 15:so(2,u,o),sn||so(4,u,o),ca(a,o,u);break;case 1:sn||(br(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&_C(u,o,p)),ca(a,o,u);break;case 21:ca(a,o,u);break;case 22:sn=(p=sn)||u.memoizedState!==null,ca(a,o,u),sn=p;break;default:ca(a,o,u)}}function BC(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{iu(a)}catch(u){vt(o,o.return,u)}}}function jC(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{iu(a)}catch(u){vt(o,o.return,u)}}function hP(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new $C),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new $C),o;default:throw Error(s(435,a.tag))}}function yg(a,o){var u=hP(a);o.forEach(function(p){if(!u.has(p)){u.add(p);var b=EP.bind(null,a,p);p.then(b,b)}})}function ms(a,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var b=u[p],E=a,M=o,B=M;e:for(;B!==null;){switch(B.tag){case 27:if(uo(B.type)){Bt=B.stateNode,gs=!1;break e}break;case 5:Bt=B.stateNode,gs=!1;break e;case 3:case 4:Bt=B.stateNode.containerInfo,gs=!0;break e}B=B.return}if(Bt===null)throw Error(s(160));kC(E,M,b),Bt=null,gs=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)zC(o,a),o=o.sibling}var Wi=null;function zC(a,o){var u=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ms(o,a),ys(a),p&4&&(so(3,a,a.return),Jf(3,a),so(5,a,a.return));break;case 1:ms(o,a),ys(a),p&512&&(sn||u===null||br(u,u.return)),p&64&&oa&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var b=Wi;if(ms(o,a),ys(a),p&512&&(sn||u===null||br(u,u.return)),p&4){var E=u!==null?u.memoizedState:null;if(p=a.memoizedState,u===null)if(p===null)if(a.stateNode===null){e:{p=a.type,u=a.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":E=b.getElementsByTagName("title")[0],(!E||E[tc]||E[ln]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(p),b.head.insertBefore(E,b.querySelector("head > title"))),On(E,p,u),E[ln]=a,Jt(E),p=E;break e;case"link":var M=zA("link","href",b).get(p+(u.href||""));if(M){for(var B=0;B<M.length;B++)if(E=M[B],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(B,1);break t}}E=b.createElement(p),On(E,p,u),b.head.appendChild(E);break;case"meta":if(M=zA("meta","content",b).get(p+(u.content||""))){for(B=0;B<M.length;B++)if(E=M[B],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(B,1);break t}}E=b.createElement(p),On(E,p,u),b.head.appendChild(E);break;default:throw Error(s(468,p))}E[ln]=a,Jt(E),p=E}a.stateNode=p}else HA(b,a.type,a.stateNode);else a.stateNode=jA(b,p,a.memoizedProps);else E!==p?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,p===null?HA(b,a.type,a.stateNode):jA(b,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Aw(a,a.memoizedProps,u.memoizedProps)}break;case 27:ms(o,a),ys(a),p&512&&(sn||u===null||br(u,u.return)),u!==null&&p&4&&Aw(a,a.memoizedProps,u.memoizedProps);break;case 5:if(ms(o,a),ys(a),p&512&&(sn||u===null||br(u,u.return)),a.flags&32){b=a.stateNode;try{Xr(b,"")}catch(Ie){vt(a,a.return,Ie)}}p&4&&a.stateNode!=null&&(b=a.memoizedProps,Aw(a,b,u!==null?u.memoizedProps:b)),p&1024&&(Iw=!0);break;case 6:if(ms(o,a),ys(a),p&4){if(a.stateNode===null)throw Error(s(162));p=a.memoizedProps,u=a.stateNode;try{u.nodeValue=p}catch(Ie){vt(a,a.return,Ie)}}break;case 3:if(Rg=null,b=Wi,Wi=_g(o.containerInfo),ms(o,a),Wi=b,ys(a),p&4&&u!==null&&u.memoizedState.isDehydrated)try{iu(o.containerInfo)}catch(Ie){vt(a,a.return,Ie)}Iw&&(Iw=!1,HC(a));break;case 4:p=Wi,Wi=_g(a.stateNode.containerInfo),ms(o,a),ys(a),Wi=p;break;case 12:ms(o,a),ys(a);break;case 31:ms(o,a),ys(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 13:ms(o,a),ys(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(vg=St()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 22:b=a.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,ne=oa,ce=sn;if(oa=ne||b,sn=ce||Y,ms(o,a),sn=ce,oa=ne,ys(a),p&8192)e:for(o=a.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||Y||oa||sn||bc(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){Y=u=o;try{if(E=Y.stateNode,b)M=E.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{B=Y.stateNode;var fe=Y.memoizedProps.style,ie=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;B.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ie){vt(Y,Y.return,Ie)}}}else if(o.tag===6){if(u===null){Y=o;try{Y.stateNode.nodeValue=b?"":Y.memoizedProps}catch(Ie){vt(Y,Y.return,Ie)}}}else if(o.tag===18){if(u===null){Y=o;try{var re=Y.stateNode;b?_A(re,!0):_A(Y.stateNode,!1)}catch(Ie){vt(Y,Y.return,Ie)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,yg(a,u))));break;case 19:ms(o,a),ys(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,yg(a,p)));break;case 30:break;case 21:break;default:ms(o,a),ys(a)}}function ys(a){var o=a.flags;if(o&2){try{for(var u,p=a.return;p!==null;){if(RC(p)){u=p;break}p=p.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var b=u.stateNode,E=Nw(a);mg(a,E,b);break;case 5:var M=u.stateNode;u.flags&32&&(Xr(M,""),u.flags&=-33);var B=Nw(a);mg(a,B,M);break;case 3:case 4:var Y=u.stateNode.containerInfo,ne=Nw(a);Tw(a,ne,Y);break;default:throw Error(s(161))}}catch(ce){vt(a,a.return,ce)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function HC(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;HC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function la(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)UC(a,o.alternate,o),o=o.sibling}function bc(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:so(4,o,o.return),bc(o);break;case 1:br(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&_C(o,o.return,u),bc(o);break;case 27:ld(o.stateNode);case 26:case 5:br(o,o.return),bc(o);break;case 22:o.memoizedState===null&&bc(o);break;case 30:bc(o);break;default:bc(o)}a=a.sibling}}function ua(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,b=a,E=o,M=E.flags;switch(E.tag){case 0:case 11:case 15:ua(b,E,u),Jf(4,E);break;case 1:if(ua(b,E,u),p=E,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ne){vt(p,p.return,ne)}if(p=E,b=p.updateQueue,b!==null){var B=p.stateNode;try{var Y=b.shared.hiddenCallbacks;if(Y!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Y.length;b++)vS(Y[b],B)}catch(ne){vt(p,p.return,ne)}}u&&M&64&&OC(E),ed(E,E.return);break;case 27:PC(E);case 26:case 5:ua(b,E,u),u&&p===null&&M&4&&MC(E),ed(E,E.return);break;case 12:ua(b,E,u);break;case 31:ua(b,E,u),u&&M&4&&BC(b,E);break;case 13:ua(b,E,u),u&&M&4&&jC(b,E);break;case 22:E.memoizedState===null&&ua(b,E,u),ed(E,E.return);break;case 30:break;default:ua(b,E,u)}o=o.sibling}}function Dw(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&jf(u))}function Ow(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&jf(a))}function Gi(a,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)FC(a,o,u,p),o=o.sibling}function FC(a,o,u,p){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(a,o,u,p),b&2048&&Jf(9,o);break;case 1:Gi(a,o,u,p);break;case 3:Gi(a,o,u,p),b&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&jf(a)));break;case 12:if(b&2048){Gi(a,o,u,p),a=o.stateNode;try{var E=o.memoizedProps,M=E.id,B=E.onPostCommit;typeof B=="function"&&B(M,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){vt(o,o.return,Y)}}else Gi(a,o,u,p);break;case 31:Gi(a,o,u,p);break;case 13:Gi(a,o,u,p);break;case 23:break;case 22:E=o.stateNode,M=o.alternate,o.memoizedState!==null?E._visibility&2?Gi(a,o,u,p):td(a,o):E._visibility&2?Gi(a,o,u,p):(E._visibility|=2,Gl(a,o,u,p,(o.subtreeFlags&10256)!==0||!1)),b&2048&&Dw(M,o);break;case 24:Gi(a,o,u,p),b&2048&&Ow(o.alternate,o);break;default:Gi(a,o,u,p)}}function Gl(a,o,u,p,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=a,M=o,B=u,Y=p,ne=M.flags;switch(M.tag){case 0:case 11:case 15:Gl(E,M,B,Y,b),Jf(8,M);break;case 23:break;case 22:var ce=M.stateNode;M.memoizedState!==null?ce._visibility&2?Gl(E,M,B,Y,b):td(E,M):(ce._visibility|=2,Gl(E,M,B,Y,b)),b&&ne&2048&&Dw(M.alternate,M);break;case 24:Gl(E,M,B,Y,b),b&&ne&2048&&Ow(M.alternate,M);break;default:Gl(E,M,B,Y,b)}o=o.sibling}}function td(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,p=o,b=p.flags;switch(p.tag){case 22:td(u,p),b&2048&&Dw(p.alternate,p);break;case 24:td(u,p),b&2048&&Ow(p.alternate,p);break;default:td(u,p)}o=o.sibling}}var nd=8192;function Kl(a,o,u){if(a.subtreeFlags&nd)for(a=a.child;a!==null;)VC(a,o,u),a=a.sibling}function VC(a,o,u){switch(a.tag){case 26:Kl(a,o,u),a.flags&nd&&a.memoizedState!==null&&JP(u,Wi,a.memoizedState,a.memoizedProps);break;case 5:Kl(a,o,u);break;case 3:case 4:var p=Wi;Wi=_g(a.stateNode.containerInfo),Kl(a,o,u),Wi=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=nd,nd=16777216,Kl(a,o,u),nd=p):Kl(a,o,u));break;default:Kl(a,o,u)}}function qC(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function sd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];wn=p,GC(p,a)}qC(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)WC(a),a=a.sibling}function WC(a){switch(a.tag){case 0:case 11:case 15:sd(a),a.flags&2048&&so(9,a,a.return);break;case 3:sd(a);break;case 12:sd(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,wg(a)):sd(a);break;default:sd(a)}}function wg(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];wn=p,GC(p,a)}qC(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:so(8,o,o.return),wg(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,wg(o));break;default:wg(o)}a=a.sibling}}function GC(a,o){for(;wn!==null;){var u=wn;switch(u.tag){case 0:case 11:case 15:so(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:jf(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,wn=p;else e:for(u=a;wn!==null;){p=wn;var b=p.sibling,E=p.return;if(LC(p),p===u){wn=null;break e}if(b!==null){b.return=E,wn=b;break e}wn=E}}}var pP={getCacheForType:function(a){var o=In(en),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return In(en).controller.signal}},gP=typeof WeakMap=="function"?WeakMap:Map,dt=0,Dt=null,Ye=null,Ze=0,wt=0,zs=null,io=!1,Yl=!1,_w=!1,fa=0,qt=0,ro=0,xc=0,Mw=0,Hs=0,Xl=0,id=null,ws=null,Rw=!1,vg=0,KC=0,bg=1/0,xg=null,ao=null,fn=0,oo=null,Ql=null,da=0,Pw=0,$w=null,YC=null,rd=0,Uw=null;function Fs(){return(dt&2)!==0&&Ze!==0?Ze&-Ze:P.T!==null?Hw():ci()}function XC(){if(Hs===0)if((Ze&536870912)===0||et){var a=ja;ja<<=1,(ja&3932160)===0&&(ja=262144),Hs=a}else Hs=536870912;return a=Bs.current,a!==null&&(a.flags|=32),Hs}function vs(a,o,u){(a===Dt&&(wt===2||wt===9)||a.cancelPendingCommit!==null)&&(Zl(a,0),co(a,Ze,Hs,!1)),za(a,u),((dt&2)===0||a!==Dt)&&(a===Dt&&((dt&2)===0&&(xc|=u),qt===4&&co(a,Ze,Hs,!1)),xr(a))}function QC(a,o,u){if((dt&6)!==0)throw Error(s(327));var p=!u&&(o&127)===0&&(o&a.expiredLanes)===0||ec(a,o),b=p?wP(a,o):kw(a,o,!0),E=p;do{if(b===0){Yl&&!p&&co(a,o,0,!1);break}else{if(u=a.current.alternate,E&&!mP(u)){b=kw(a,o,!1),E=!1;continue}if(b===2){if(E=o,a.errorRecoveryDisabledLanes&E)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var B=a;b=id;var Y=B.current.memoizedState.isDehydrated;if(Y&&(Zl(B,M).flags|=256),M=kw(B,M,!1),M!==2){if(_w&&!Y){B.errorRecoveryDisabledLanes|=E,xc|=E,b=4;break e}E=ws,ws=b,E!==null&&(ws===null?ws=E:ws.push.apply(ws,E))}b=M}if(E=!1,b!==2)continue}}if(b===1){Zl(a,0),co(a,o,0,!0);break}e:{switch(p=a,E=b,E){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:co(p,o,Hs,!io);break e;case 2:ws=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(b=vg+300-St(),10<b)){if(co(p,o,Hs,!io),yl(p,0,!0)!==0)break e;da=o,p.timeoutHandle=IA(ZC.bind(null,p,u,ws,xg,Rw,o,Hs,xc,Xl,io,E,"Throttled",-0,0),b);break e}ZC(p,u,ws,xg,Rw,o,Hs,xc,Xl,io,E,null,-0,0)}}break}while(!0);xr(a)}function ZC(a,o,u,p,b,E,M,B,Y,ne,ce,fe,ie,re){if(a.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},VC(o,E,fe);var Ie=(E&62914560)===E?vg-St():(E&4194048)===E?KC-St():0;if(Ie=e$(fe,Ie),Ie!==null){da=E,a.cancelPendingCommit=Ie(aA.bind(null,a,o,E,u,p,b,M,B,Y,ce,fe,null,ie,re)),co(a,E,M,!ne);return}}aA(a,o,E,u,p,b,M,B,Y)}function mP(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var b=u[p],E=b.getSnapshot;b=b.value;try{if(!Ls(E(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function co(a,o,u,p){o&=~Mw,o&=~xc,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var b=o;0<b;){var E=31-ss(b),M=1<<E;p[E]=-1,b&=~M}u!==0&&Ip(a,u,o)}function Eg(){return(dt&6)===0?(ad(0),!1):!0}function Lw(){if(Ye!==null){if(wt===0)var a=Ye.return;else a=Ye,ta=dc=null,Jy(a),Hl=null,Hf=0,a=Ye;for(;a!==null;)DC(a.alternate,a),a=a.return;Ye=null}}function Zl(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,UP(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),da=0,Lw(),Dt=a,Ye=u=Jr(a.current,null),Ze=o,wt=0,zs=null,io=!1,Yl=ec(a,o),_w=!1,Xl=Hs=Mw=xc=ro=qt=0,ws=id=null,Rw=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var b=31-ss(p),E=1<<b;o|=a[b],p&=~E}return fa=o,Fp(),u}function JC(a,o){Fe=null,P.H=Xf,o===zl||o===Qp?(o=gS(),wt=3):o===zy?(o=gS(),wt=4):wt=o===gw?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zs=o,Ye===null&&(qt=1,fg(a,di(o,a.current)))}function eA(){var a=Bs.current;return a===null?!0:(Ze&4194048)===Ze?mi===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?a===mi:!1}function tA(){var a=P.H;return P.H=Xf,a===null?Xf:a}function nA(){var a=P.A;return P.A=pP,a}function Sg(){qt=4,io||(Ze&4194048)!==Ze&&Bs.current!==null||(Yl=!0),(ro&134217727)===0&&(xc&134217727)===0||Dt===null||co(Dt,Ze,Hs,!1)}function kw(a,o,u){var p=dt;dt|=2;var b=tA(),E=nA();(Dt!==a||Ze!==o)&&(xg=null,Zl(a,o)),o=!1;var M=qt;e:do try{if(wt!==0&&Ye!==null){var B=Ye,Y=zs;switch(wt){case 8:Lw(),M=6;break e;case 3:case 2:case 9:case 6:Bs.current===null&&(o=!0);var ne=wt;if(wt=0,zs=null,Jl(a,B,Y,ne),u&&Yl){M=0;break e}break;default:ne=wt,wt=0,zs=null,Jl(a,B,Y,ne)}}yP(),M=qt;break}catch(ce){JC(a,ce)}while(!0);return o&&a.shellSuspendCounter++,ta=dc=null,dt=p,P.H=b,P.A=E,Ye===null&&(Dt=null,Ze=0,Fp()),M}function yP(){for(;Ye!==null;)sA(Ye)}function wP(a,o){var u=dt;dt|=2;var p=tA(),b=nA();Dt!==a||Ze!==o?(xg=null,bg=St()+500,Zl(a,o)):Yl=ec(a,o);e:do try{if(wt!==0&&Ye!==null){o=Ye;var E=zs;t:switch(wt){case 1:wt=0,zs=null,Jl(a,o,E,1);break;case 2:case 9:if(hS(E)){wt=0,zs=null,iA(o);break}o=function(){wt!==2&&wt!==9||Dt!==a||(wt=7),xr(a)},E.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:hS(E)?(wt=0,zs=null,iA(o)):(wt=0,zs=null,Jl(a,o,E,7));break;case 5:var M=null;switch(Ye.tag){case 26:M=Ye.memoizedState;case 5:case 27:var B=Ye;if(M?FA(M):B.stateNode.complete){wt=0,zs=null;var Y=B.sibling;if(Y!==null)Ye=Y;else{var ne=B.return;ne!==null?(Ye=ne,Cg(ne)):Ye=null}break t}}wt=0,zs=null,Jl(a,o,E,5);break;case 6:wt=0,zs=null,Jl(a,o,E,6);break;case 8:Lw(),qt=6;break e;default:throw Error(s(462))}}vP();break}catch(ce){JC(a,ce)}while(!0);return ta=dc=null,P.H=p,P.A=b,dt=u,Ye!==null?0:(Dt=null,Ze=0,Fp(),qt)}function vP(){for(;Ye!==null&&!cr();)sA(Ye)}function sA(a){var o=TC(a.alternate,a,fa);a.memoizedProps=a.pendingProps,o===null?Cg(a):Ye=o}function iA(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=xC(u,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=xC(u,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:Jy(o);default:DC(u,o),o=Ye=nS(o,fa),o=TC(u,o,fa)}a.memoizedProps=a.pendingProps,o===null?Cg(a):Ye=o}function Jl(a,o,u,p){ta=dc=null,Jy(o),Hl=null,Hf=0;var b=o.return;try{if(oP(a,b,o,u,Ze)){qt=1,fg(a,di(u,a.current)),Ye=null;return}}catch(E){if(b!==null)throw Ye=b,E;qt=1,fg(a,di(u,a.current)),Ye=null;return}o.flags&32768?(et||p===1?a=!0:Yl||(Ze&536870912)!==0?a=!1:(io=a=!0,(p===2||p===9||p===3||p===6)&&(p=Bs.current,p!==null&&p.tag===13&&(p.flags|=16384))),rA(o,a)):Cg(o)}function Cg(a){var o=a;do{if((o.flags&32768)!==0){rA(o,io);return}a=o.return;var u=uP(o.alternate,o,fa);if(u!==null){Ye=u;return}if(o=o.sibling,o!==null){Ye=o;return}Ye=o=a}while(o!==null);qt===0&&(qt=5)}function rA(a,o){do{var u=fP(a.alternate,a);if(u!==null){u.flags&=32767,Ye=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){Ye=a;return}Ye=a=u}while(a!==null);qt=6,Ye=null}function aA(a,o,u,p,b,E,M,B,Y){a.cancelPendingCommit=null;do Ag();while(fn!==0);if((dt&6)!==0)throw Error(s(327));if(o!==null){if(o===a.current)throw Error(s(177));if(E=o.lanes|o.childLanes,E|=Ny,Kr(a,u,E,M,B,Y),a===Dt&&(Ye=Dt=null,Ze=0),Ql=o,oo=a,da=u,Pw=E,$w=b,YC=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,SP(Bi,function(){return fA(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=P.T,P.T=null,b=k.p,k.p=2,M=dt,dt|=4;try{dP(a,o,u)}finally{dt=M,k.p=b,P.T=p}}fn=1,oA(),cA(),lA()}}function oA(){if(fn===1){fn=0;var a=oo,o=Ql,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var p=k.p;k.p=2;var b=dt;dt|=4;try{zC(o,a);var E=Xw,M=GE(a.containerInfo),B=E.focusedElem,Y=E.selectionRange;if(M!==B&&B&&B.ownerDocument&&WE(B.ownerDocument.documentElement,B)){if(Y!==null&&xy(B)){var ne=Y.start,ce=Y.end;if(ce===void 0&&(ce=ne),"selectionStart"in B)B.selectionStart=ne,B.selectionEnd=Math.min(ce,B.value.length);else{var fe=B.ownerDocument||document,ie=fe&&fe.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),Ie=B.textContent.length,Be=Math.min(Y.start,Ie),Nt=Y.end===void 0?Be:Math.min(Y.end,Ie);!re.extend&&Be>Nt&&(M=Nt,Nt=Be,Be=M);var J=qE(B,Be),Q=qE(B,Nt);if(J&&Q&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==Q.node||re.focusOffset!==Q.offset)){var te=fe.createRange();te.setStart(J.node,J.offset),re.removeAllRanges(),Be>Nt?(re.addRange(te),re.extend(Q.node,Q.offset)):(te.setEnd(Q.node,Q.offset),re.addRange(te))}}}}for(fe=[],re=B;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<fe.length;B++){var le=fe[B];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Lg=!!Yw,Xw=Yw=null}finally{dt=b,k.p=p,P.T=u}}a.current=o,fn=2}}function cA(){if(fn===2){fn=0;var a=oo,o=Ql,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var p=k.p;k.p=2;var b=dt;dt|=4;try{UC(a,o.alternate,o)}finally{dt=b,k.p=p,P.T=u}}fn=3}}function lA(){if(fn===4||fn===3){fn=0,lr();var a=oo,o=Ql,u=da,p=YC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fn=5:(fn=0,Ql=oo=null,uA(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(ao=null),Ef(u),o=o.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Zo,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=P.T,b=k.p,k.p=2,P.T=null;try{for(var E=a.onRecoverableError,M=0;M<p.length;M++){var B=p[M];E(B.value,{componentStack:B.stack})}}finally{P.T=o,k.p=b}}(da&3)!==0&&Ag(),xr(a),b=a.pendingLanes,(u&261930)!==0&&(b&42)!==0?a===Uw?rd++:(rd=0,Uw=a):rd=0,ad(0)}}function uA(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,jf(o)))}function Ag(){return oA(),cA(),lA(),fA()}function fA(){if(fn!==5)return!1;var a=oo,o=Pw;Pw=0;var u=Ef(da),p=P.T,b=k.p;try{k.p=32>u?32:u,P.T=null,u=$w,$w=null;var E=oo,M=da;if(fn=0,Ql=oo=null,da=0,(dt&6)!==0)throw Error(s(331));var B=dt;if(dt|=4,WC(E.current),FC(E,E.current,M,u),dt=B,ad(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Zo,E)}catch{}return!0}finally{k.p=b,P.T=p,uA(a,o)}}function dA(a,o,u){o=di(u,o),o=pw(a.stateNode,o,2),a=eo(a,o,2),a!==null&&(za(a,2),xr(a))}function vt(a,o,u){if(a.tag===3)dA(a,a,u);else for(;o!==null;){if(o.tag===3){dA(o,a,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ao===null||!ao.has(p))){a=di(u,a),u=hC(2),p=eo(o,u,2),p!==null&&(pC(u,p,o,a),za(p,2),xr(p));break}}o=o.return}}function Bw(a,o,u){var p=a.pingCache;if(p===null){p=a.pingCache=new gP;var b=new Set;p.set(o,b)}else b=p.get(o),b===void 0&&(b=new Set,p.set(o,b));b.has(u)||(_w=!0,b.add(u),a=bP.bind(null,a,o,u),o.then(a,a))}function bP(a,o,u){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Dt===a&&(Ze&u)===u&&(qt===4||qt===3&&(Ze&62914560)===Ze&&300>St()-vg?(dt&2)===0&&Zl(a,0):Mw|=u,Xl===Ze&&(Xl=0)),xr(a)}function hA(a,o){o===0&&(o=Tp()),a=lc(a,o),a!==null&&(za(a,o),xr(a))}function xP(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),hA(a,u)}function EP(a,o){var u=0;switch(a.tag){case 31:case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(u=b.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(o),hA(a,u)}function SP(a,o){return ds(a,o)}var Ng=null,eu=null,jw=!1,Tg=!1,zw=!1,lo=0;function xr(a){a!==eu&&a.next===null&&(eu===null?Ng=eu=a:eu=eu.next=a),Tg=!0,jw||(jw=!0,AP())}function ad(a,o){if(!zw&&Tg){zw=!0;do for(var u=!1,p=Ng;p!==null;){if(a!==0){var b=p.pendingLanes;if(b===0)var E=0;else{var M=p.suspendedLanes,B=p.pingedLanes;E=(1<<31-ss(42|a)+1)-1,E&=b&~(M&~B),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,yA(p,E))}else E=Ze,E=yl(p,p===Dt?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||ec(p,E)||(u=!0,yA(p,E));p=p.next}while(u);zw=!1}}function CP(){pA()}function pA(){Tg=jw=!1;var a=0;lo!==0&&$P()&&(a=lo);for(var o=St(),u=null,p=Ng;p!==null;){var b=p.next,E=gA(p,o);E===0?(p.next=null,u===null?Ng=b:u.next=b,b===null&&(eu=u)):(u=p,(a!==0||(E&3)!==0)&&(Tg=!0)),p=b}fn!==0&&fn!==5||ad(a),lo!==0&&(lo=0)}function gA(a,o){for(var u=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var M=31-ss(E),B=1<<M,Y=b[M];Y===-1?((B&u)===0||(B&p)!==0)&&(b[M]=oy(B,o)):Y<=o&&(a.expiredLanes|=B),E&=~B}if(o=Dt,u=Ze,u=yl(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,u===0||a===o&&(wt===2||wt===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&ns(p),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||ec(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(p!==null&&ns(p),Ef(u)){case 2:case 8:u=Wr;break;case 32:u=Bi;break;case 268435456:u=zi;break;default:u=Bi}return p=mA.bind(null,a),u=ds(u,p),a.callbackPriority=o,a.callbackNode=u,o}return p!==null&&p!==null&&ns(p),a.callbackPriority=2,a.callbackNode=null,2}function mA(a,o){if(fn!==0&&fn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Ag()&&a.callbackNode!==u)return null;var p=Ze;return p=yl(a,a===Dt?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(QC(a,p,o),gA(a,St()),a.callbackNode!=null&&a.callbackNode===u?mA.bind(null,a):null)}function yA(a,o){if(Ag())return null;QC(a,o,!0)}function AP(){LP(function(){(dt&6)!==0?ds(oi,CP):pA()})}function Hw(){if(lo===0){var a=Bl;a===0&&(a=Ba,Ba<<=1,(Ba&261888)===0&&(Ba=256)),lo=a}return lo}function wA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cl(""+a)}function vA(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function NP(a,o,u,p,b){if(o==="submit"&&u&&u.stateNode===b){var E=wA((b[Vn]||null).action),M=p.submitter;M&&(o=(o=M[Vn]||null)?wA(o.formAction):M.getAttribute("formAction"),o!==null&&(E=o,M=null));var B=new un("action","action",null,p,b);a.push({event:B,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(lo!==0){var Y=M?vA(b,M):new FormData(b);cw(u,{pending:!0,data:Y,method:b.method,action:E},null,Y)}}else typeof E=="function"&&(B.preventDefault(),Y=M?vA(b,M):new FormData(b),cw(u,{pending:!0,data:Y,method:b.method,action:E},E,Y))},currentTarget:b}]})}}for(var Fw=0;Fw<Ay.length;Fw++){var Vw=Ay[Fw],TP=Vw.toLowerCase(),IP=Vw[0].toUpperCase()+Vw.slice(1);qi(TP,"on"+IP)}qi(XE,"onAnimationEnd"),qi(QE,"onAnimationIteration"),qi(ZE,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(VR,"onTransitionRun"),qi(qR,"onTransitionStart"),qi(WR,"onTransitionCancel"),qi(JE,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(od));function bA(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var p=a[u],b=p.event;p=p.listeners;e:{var E=void 0;if(o)for(var M=p.length-1;0<=M;M--){var B=p[M],Y=B.instance,ne=B.currentTarget;if(B=B.listener,Y!==E&&b.isPropagationStopped())break e;E=B,b.currentTarget=ne;try{E(b)}catch(ce){Hp(ce)}b.currentTarget=null,E=Y}else for(M=0;M<p.length;M++){if(B=p[M],Y=B.instance,ne=B.currentTarget,B=B.listener,Y!==E&&b.isPropagationStopped())break e;E=B,b.currentTarget=ne;try{E(b)}catch(ce){Hp(ce)}b.currentTarget=null,E=Y}}}}function Xe(a,o){var u=o[hr];u===void 0&&(u=o[hr]=new Set);var p=a+"__bubble";u.has(p)||(xA(o,a,2,!1),u.add(p))}function qw(a,o,u){var p=0;o&&(p|=4),xA(u,a,p,o)}var Ig="_reactListening"+Math.random().toString(36).slice(2);function Ww(a){if(!a[Ig]){a[Ig]=!0,Rp.forEach(function(u){u!=="selectionchange"&&(DP.has(u)||qw(u,!1,a),qw(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Ig]||(o[Ig]=!0,qw("selectionchange",!1,o))}}function xA(a,o,u,p){switch(XA(o)){case 2:var b=s$;break;case 8:b=i$;break;default:b=o1}u=b.bind(null,o,u,a),b=void 0,!Of||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(o,u,{capture:!0,passive:b}):a.addEventListener(o,u,!0):b!==void 0?a.addEventListener(o,u,{passive:b}):a.addEventListener(o,u,!1)}function Gw(a,o,u,p,b){var E=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var B=p.stateNode.containerInfo;if(B===b)break;if(M===4)for(M=p.return;M!==null;){var Y=M.tag;if((Y===3||Y===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;B!==null;){if(M=Us(B),M===null)return;if(Y=M.tag,Y===5||Y===6||Y===26||Y===27){p=E=M;continue e}B=B.parentNode}}p=p.return}Bp(function(){var ne=E,ce=Df(u),fe=[];e:{var ie=eS.get(a);if(ie!==void 0){var re=un,Ie=a;switch(a){case"keypress":if(H(u)===0)break e;case"keydown":case"keyup":re=ER;break;case"focusin":Ie="focus",re=my;break;case"focusout":Ie="blur",re=my;break;case"beforeblur":case"afterblur":re=my;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=_f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=AR;break;case XE:case QE:case ZE:re=hR;break;case JE:re=TR;break;case"scroll":case"scrollend":re=qn;break;case"wheel":re=DR;break;case"copy":case"cut":case"paste":re=gR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=_E;break;case"toggle":case"beforetoggle":re=_R}var Be=(o&4)!==0,Nt=!Be&&(a==="scroll"||a==="scrollend"),J=Be?ie!==null?ie+"Capture":null:ie;Be=[];for(var Q=ne,te;Q!==null;){var le=Q;if(te=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||te===null||J===null||(le=ic(Q,J),le!=null&&Be.push(cd(Q,le,te))),Nt)break;Q=Q.return}0<Be.length&&(ie=new re(ie,Ie,null,u,ce),fe.push({event:ie,listeners:Be}))}}if((o&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ie&&u!==Vi&&(Ie=u.relatedTarget||u.fromElement)&&(Us(Ie)||Ie[Ha]))break e;if((re||ie)&&(ie=ce.window===ce?ce:(ie=ce.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(Ie=u.relatedTarget||u.toElement,re=ne,Ie=Ie?Us(Ie):null,Ie!==null&&(Nt=r(Ie),Be=Ie.tag,Ie!==Nt||Be!==5&&Be!==27&&Be!==6)&&(Ie=null)):(re=null,Ie=ne),re!==Ie)){if(Be=_f,le="onMouseLeave",J="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Be=_E,le="onPointerLeave",J="onPointerEnter",Q="pointer"),Nt=re==null?ie:nc(re),te=Ie==null?ie:nc(Ie),ie=new Be(le,Q+"leave",re,u,ce),ie.target=Nt,ie.relatedTarget=te,le=null,Us(ce)===ne&&(Be=new Be(J,Q+"enter",Ie,u,ce),Be.target=te,Be.relatedTarget=Nt,le=Be),Nt=le,re&&Ie)t:{for(Be=OP,J=re,Q=Ie,te=0,le=J;le;le=Be(le))te++;le=0;for(var $e=Q;$e;$e=Be($e))le++;for(;0<te-le;)J=Be(J),te--;for(;0<le-te;)Q=Be(Q),le--;for(;te--;){if(J===Q||Q!==null&&J===Q.alternate){Be=J;break t}J=Be(J),Q=Be(Q)}Be=null}else Be=null;re!==null&&EA(fe,ie,re,Be,!1),Ie!==null&&Nt!==null&&EA(fe,Nt,Ie,Be,!0)}}e:{if(ie=ne?nc(ne):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var rt=BE;else if(LE(ie))if(jE)rt=zR;else{rt=BR;var De=kR}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&If(ne.elementType)&&(rt=BE):rt=jR;if(rt&&(rt=rt(a,ne))){kE(fe,rt,u,ce);break e}De&&De(a,ie,ne),a==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&Tf(ie,"number",ie.value)}switch(De=ne?nc(ne):window,a){case"focusin":(LE(De)||De.contentEditable==="true")&&(_l=De,Ey=ne,Lf=null);break;case"focusout":Lf=Ey=_l=null;break;case"mousedown":Sy=!0;break;case"contextmenu":case"mouseup":case"dragend":Sy=!1,KE(fe,u,ce);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":KE(fe,u,ce)}var qe;if(wy)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ol?$E(a,u)&&(Je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(ME&&u.locale!=="ko"&&(Ol||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ol&&(qe=jp()):(mr=ce,rc="value"in mr?mr.value:mr.textContent,Ol=!0)),De=Dg(ne,Je),0<De.length&&(Je=new OE(Je,a,null,u,ce),fe.push({event:Je,listeners:De}),qe?Je.data=qe:(qe=UE(u),qe!==null&&(Je.data=qe)))),(qe=RR?PR(a,u):$R(a,u))&&(Je=Dg(ne,"onBeforeInput"),0<Je.length&&(De=new OE("onBeforeInput","beforeinput",null,u,ce),fe.push({event:De,listeners:Je}),De.data=qe)),NP(fe,a,ne,u,ce)}bA(fe,o)})}function cd(a,o,u){return{instance:a,listener:o,currentTarget:u}}function Dg(a,o){for(var u=o+"Capture",p=[];a!==null;){var b=a,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=ic(a,u),b!=null&&p.unshift(cd(a,b,E)),b=ic(a,o),b!=null&&p.push(cd(a,b,E))),a.tag===3)return p;a=a.return}return[]}function OP(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function EA(a,o,u,p,b){for(var E=o._reactName,M=[];u!==null&&u!==p;){var B=u,Y=B.alternate,ne=B.stateNode;if(B=B.tag,Y!==null&&Y===p)break;B!==5&&B!==26&&B!==27||ne===null||(Y=ne,b?(ne=ic(u,E),ne!=null&&M.unshift(cd(u,ne,Y))):b||(ne=ic(u,E),ne!=null&&M.push(cd(u,ne,Y)))),u=u.return}M.length!==0&&a.push({event:o,listeners:M})}var _P=/\r\n?/g,MP=/\u0000|\uFFFD/g;function SA(a){return(typeof a=="string"?a:""+a).replace(_P,`
`).replace(MP,"")}function CA(a,o){return o=SA(o),SA(a)===o}function At(a,o,u,p,b,E){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||Xr(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&Xr(a,""+p);break;case"className":xl(a,"class",p);break;case"tabIndex":xl(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(a,u,p);break;case"style":kp(a,p,E);break;case"data":if(o!=="object"){xl(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Cl(""+p),a.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(o!=="input"&&At(a,o,"name",b.name,b,null),At(a,o,"formEncType",b.formEncType,b,null),At(a,o,"formMethod",b.formMethod,b,null),At(a,o,"formTarget",b.formTarget,b,null)):(At(a,o,"encType",b.encType,b,null),At(a,o,"method",b.method,b,null),At(a,o,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Cl(""+p),a.setAttribute(u,p);break;case"onClick":p!=null&&(a.onclick=li);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}u=Cl(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""+p):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":p===!0?a.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,p):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(u,p):a.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(u):a.setAttribute(u,p);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),bl(a,"popover",p);break;case"xlinkActuate":Fi(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Fi(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Fi(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Fi(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Fi(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Fi(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Fi(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":bl(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=py.get(u)||u,bl(a,u,p))}}function Kw(a,o,u,p,b,E){switch(u){case"style":kp(a,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof p=="string"?Xr(a,p):(typeof p=="number"||typeof p=="bigint")&&Xr(a,""+p);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"onClick":p!=null&&(a.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pp.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),E=a[Vn]||null,E=E!=null?E[u]:null,typeof E=="function"&&a.removeEventListener(o,E,b),typeof p=="function")){typeof E!="function"&&E!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,p,b);break e}u in a?a[u]=p:p===!0?a.setAttribute(u,""):bl(a,u,p)}}}function On(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var p=!1,b=!1,E;for(E in u)if(u.hasOwnProperty(E)){var M=u[E];if(M!=null)switch(E){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:At(a,o,E,M,u,null)}}b&&At(a,o,"srcSet",u.srcSet,u,null),p&&At(a,o,"src",u.src,u,null);return;case"input":Xe("invalid",a);var B=E=M=b=null,Y=null,ne=null;for(p in u)if(u.hasOwnProperty(p)){var ce=u[p];if(ce!=null)switch(p){case"name":b=ce;break;case"type":M=ce;break;case"checked":Y=ce;break;case"defaultChecked":ne=ce;break;case"value":E=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,o));break;default:At(a,o,p,ce,u,null)}}Nf(a,E,B,Y,ne,M,b,!1);return;case"select":Xe("invalid",a),p=M=E=null;for(b in u)if(u.hasOwnProperty(b)&&(B=u[b],B!=null))switch(b){case"value":E=B;break;case"defaultValue":M=B;break;case"multiple":p=B;default:At(a,o,b,B,u,null)}o=E,u=M,a.multiple=!!p,o!=null?qa(a,!!p,o,!1):u!=null&&qa(a,!!p,u,!0);return;case"textarea":Xe("invalid",a),E=b=p=null;for(M in u)if(u.hasOwnProperty(M)&&(B=u[M],B!=null))switch(M){case"value":p=B;break;case"defaultValue":b=B;break;case"children":E=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:At(a,o,M,B,u,null)}Yr(a,p,b,E);return;case"option":for(Y in u)if(u.hasOwnProperty(Y)&&(p=u[Y],p!=null))switch(Y){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:At(a,o,Y,p,u,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(p=0;p<od.length;p++)Xe(od[p],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(p=u[ne],p!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:At(a,o,ne,p,u,null)}return;default:if(If(o)){for(ce in u)u.hasOwnProperty(ce)&&(p=u[ce],p!==void 0&&Kw(a,o,ce,p,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(p=u[B],p!=null&&At(a,o,B,p,u,null))}function RP(a,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,M=null,B=null,Y=null,ne=null,ce=null;for(re in u){var fe=u[re];if(u.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":Y=fe;default:p.hasOwnProperty(re)||At(a,o,re,null,p,fe)}}for(var ie in p){var re=p[ie];if(fe=u[ie],p.hasOwnProperty(ie)&&(re!=null||fe!=null))switch(ie){case"type":E=re;break;case"name":b=re;break;case"checked":ne=re;break;case"defaultChecked":ce=re;break;case"value":M=re;break;case"defaultValue":B=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,o));break;default:re!==fe&&At(a,o,ie,re,p,fe)}}Af(a,M,B,Y,ne,ce,E,b);return;case"select":re=M=B=ie=null;for(E in u)if(Y=u[E],u.hasOwnProperty(E)&&Y!=null)switch(E){case"value":break;case"multiple":re=Y;default:p.hasOwnProperty(E)||At(a,o,E,null,p,Y)}for(b in p)if(E=p[b],Y=u[b],p.hasOwnProperty(b)&&(E!=null||Y!=null))switch(b){case"value":ie=E;break;case"defaultValue":B=E;break;case"multiple":M=E;default:E!==Y&&At(a,o,b,E,p,Y)}o=B,u=M,p=re,ie!=null?qa(a,!!u,ie,!1):!!p!=!!u&&(o!=null?qa(a,!!u,o,!0):qa(a,!!u,u?[]:"",!1));return;case"textarea":re=ie=null;for(B in u)if(b=u[B],u.hasOwnProperty(B)&&b!=null&&!p.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:At(a,o,B,null,p,b)}for(M in p)if(b=p[M],E=u[M],p.hasOwnProperty(M)&&(b!=null||E!=null))switch(M){case"value":ie=b;break;case"defaultValue":re=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==E&&At(a,o,M,b,p,E)}sc(a,ie,re);return;case"option":for(var Ie in u)if(ie=u[Ie],u.hasOwnProperty(Ie)&&ie!=null&&!p.hasOwnProperty(Ie))switch(Ie){case"selected":a.selected=!1;break;default:At(a,o,Ie,null,p,ie)}for(Y in p)if(ie=p[Y],re=u[Y],p.hasOwnProperty(Y)&&ie!==re&&(ie!=null||re!=null))switch(Y){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:At(a,o,Y,ie,p,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)ie=u[Be],u.hasOwnProperty(Be)&&ie!=null&&!p.hasOwnProperty(Be)&&At(a,o,Be,null,p,ie);for(ne in p)if(ie=p[ne],re=u[ne],p.hasOwnProperty(ne)&&ie!==re&&(ie!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,o));break;default:At(a,o,ne,ie,p,re)}return;default:if(If(o)){for(var Nt in u)ie=u[Nt],u.hasOwnProperty(Nt)&&ie!==void 0&&!p.hasOwnProperty(Nt)&&Kw(a,o,Nt,void 0,p,ie);for(ce in p)ie=p[ce],re=u[ce],!p.hasOwnProperty(ce)||ie===re||ie===void 0&&re===void 0||Kw(a,o,ce,ie,p,re);return}}for(var J in u)ie=u[J],u.hasOwnProperty(J)&&ie!=null&&!p.hasOwnProperty(J)&&At(a,o,J,null,p,ie);for(fe in p)ie=p[fe],re=u[fe],!p.hasOwnProperty(fe)||ie===re||ie==null&&re==null||At(a,o,fe,ie,p,re)}function AA(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PP(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var b=u[p],E=b.transferSize,M=b.initiatorType,B=b.duration;if(E&&B&&AA(M)){for(M=0,B=b.responseEnd,p+=1;p<u.length;p++){var Y=u[p],ne=Y.startTime;if(ne>B)break;var ce=Y.transferSize,fe=Y.initiatorType;ce&&AA(fe)&&(Y=Y.responseEnd,M+=ce*(Y<B?1:(B-ne)/(Y-ne)))}if(--p,o+=8*(E+M)/(b.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Yw=null,Xw=null;function Og(a){return a.nodeType===9?a:a.ownerDocument}function NA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TA(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Qw(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Zw=null;function $P(){var a=window.event;return a&&a.type==="popstate"?a===Zw?!1:(Zw=a,!0):(Zw=null,!1)}var IA=typeof setTimeout=="function"?setTimeout:void 0,UP=typeof clearTimeout=="function"?clearTimeout:void 0,DA=typeof Promise=="function"?Promise:void 0,LP=typeof queueMicrotask=="function"?queueMicrotask:typeof DA<"u"?function(a){return DA.resolve(null).then(a).catch(kP)}:IA;function kP(a){setTimeout(function(){throw a})}function uo(a){return a==="head"}function OA(a,o){var u=o,p=0;do{var b=u.nextSibling;if(a.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(p===0){a.removeChild(b),iu(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")ld(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,ld(u);for(var E=u.firstChild;E;){var M=E.nextSibling,B=E.nodeName;E[tc]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=M}}else u==="body"&&ld(a.ownerDocument.body);u=b}while(u);iu(o)}function _A(a,o){var u=a;a=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=p}while(u)}function Jw(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jw(u),Sf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function BP(a,o,u,p){for(;a.nodeType===1;){var b=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[tc])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=yi(a.nextSibling),a===null)break}return null}function jP(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=yi(a.nextSibling),a===null))return null;return a}function MA(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=yi(a.nextSibling),a===null))return null;return a}function e1(a){return a.data==="$?"||a.data==="$~"}function t1(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function zP(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function yi(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var n1=null;function RA(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return yi(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function PA(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function $A(a,o,u){switch(o=Og(u),a){case"html":if(a=o.documentElement,!a)throw Error(s(452));return a;case"head":if(a=o.head,!a)throw Error(s(453));return a;case"body":if(a=o.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function ld(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Sf(a)}var wi=new Map,UA=new Set;function _g(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ha=k.d;k.d={f:HP,r:FP,D:VP,C:qP,L:WP,m:GP,X:YP,S:KP,M:XP};function HP(){var a=ha.f(),o=Eg();return a||o}function FP(a){var o=Fa(a);o!==null&&o.tag===5&&o.type==="form"?JS(o):ha.r(a)}var tu=typeof document>"u"?null:document;function LA(a,o,u){var p=tu;if(p&&typeof o=="string"&&o){var b=ps(o);b='link[rel="'+a+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),UA.has(b)||(UA.add(b),a={rel:a,crossOrigin:u,href:o},p.querySelector(b)===null&&(o=p.createElement("link"),On(o,"link",a),Jt(o),p.head.appendChild(o)))}}function VP(a){ha.D(a),LA("dns-prefetch",a,null)}function qP(a,o){ha.C(a,o),LA("preconnect",a,o)}function WP(a,o,u){ha.L(a,o,u);var p=tu;if(p&&a&&o){var b='link[rel="preload"][as="'+ps(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+ps(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+ps(u.imageSizes)+'"]')):b+='[href="'+ps(a)+'"]';var E=b;switch(o){case"style":E=nu(a);break;case"script":E=su(a)}wi.has(E)||(a=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),wi.set(E,a),p.querySelector(b)!==null||o==="style"&&p.querySelector(ud(E))||o==="script"&&p.querySelector(fd(E))||(o=p.createElement("link"),On(o,"link",a),Jt(o),p.head.appendChild(o)))}}function GP(a,o){ha.m(a,o);var u=tu;if(u&&a){var p=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+ps(p)+'"][href="'+ps(a)+'"]',E=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=su(a)}if(!wi.has(E)&&(a=g({rel:"modulepreload",href:a},o),wi.set(E,a),u.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(fd(E)))return}p=u.createElement("link"),On(p,"link",a),Jt(p),u.head.appendChild(p)}}}function KP(a,o,u){ha.S(a,o,u);var p=tu;if(p&&a){var b=Va(p).hoistableStyles,E=nu(a);o=o||"default";var M=b.get(E);if(!M){var B={loading:0,preload:null};if(M=p.querySelector(ud(E)))B.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},u),(u=wi.get(E))&&s1(a,u);var Y=M=p.createElement("link");Jt(Y),On(Y,"link",a),Y._p=new Promise(function(ne,ce){Y.onload=ne,Y.onerror=ce}),Y.addEventListener("load",function(){B.loading|=1}),Y.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Mg(M,o,p)}M={type:"stylesheet",instance:M,count:1,state:B},b.set(E,M)}}}function YP(a,o){ha.X(a,o);var u=tu;if(u&&a){var p=Va(u).hoistableScripts,b=su(a),E=p.get(b);E||(E=u.querySelector(fd(b)),E||(a=g({src:a,async:!0},o),(o=wi.get(b))&&i1(a,o),E=u.createElement("script"),Jt(E),On(E,"link",a),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function XP(a,o){ha.M(a,o);var u=tu;if(u&&a){var p=Va(u).hoistableScripts,b=su(a),E=p.get(b);E||(E=u.querySelector(fd(b)),E||(a=g({src:a,async:!0,type:"module"},o),(o=wi.get(b))&&i1(a,o),E=u.createElement("script"),Jt(E),On(E,"link",a),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function kA(a,o,u,p){var b=(b=oe.current)?_g(b):null;if(!b)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=nu(u.href),u=Va(b).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=nu(u.href);var E=Va(b).hoistableStyles,M=E.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,M),(E=b.querySelector(ud(a)))&&!E._p&&(M.instance=E,M.state.loading=5),wi.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},wi.set(a,u),E||QP(b,a,u,M.state))),o&&p===null)throw Error(s(528,""));return M}if(o&&p!==null)throw Error(s(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=su(u),u=Va(b).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function nu(a){return'href="'+ps(a)+'"'}function ud(a){return'link[rel="stylesheet"]['+a+"]"}function BA(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function QP(a,o,u,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),On(o,"link",u),Jt(o),a.head.appendChild(o))}function su(a){return'[src="'+ps(a)+'"]'}function fd(a){return"script[async]"+a}function jA(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+ps(u.href)+'"]');if(p)return o.instance=p,Jt(p),p;var b=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Jt(p),On(p,"style",b),Mg(p,u.precedence,a),o.instance=p;case"stylesheet":b=nu(u.href);var E=a.querySelector(ud(b));if(E)return o.state.loading|=4,o.instance=E,Jt(E),E;p=BA(u),(b=wi.get(b))&&s1(p,b),E=(a.ownerDocument||a).createElement("link"),Jt(E);var M=E;return M._p=new Promise(function(B,Y){M.onload=B,M.onerror=Y}),On(E,"link",p),o.state.loading|=4,Mg(E,u.precedence,a),o.instance=E;case"script":return E=su(u.src),(b=a.querySelector(fd(E)))?(o.instance=b,Jt(b),b):(p=u,(b=wi.get(E))&&(p=g({},u),i1(p,b)),a=a.ownerDocument||a,b=a.createElement("script"),Jt(b),On(b,"link",p),a.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Mg(p,u.precedence,a));return o.instance}function Mg(a,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,E=b,M=0;M<p.length;M++){var B=p[M];if(B.dataset.precedence===o)E=B;else if(E!==b)break}E?E.parentNode.insertBefore(a,E.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function s1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function i1(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Rg=null;function zA(a,o,u){if(Rg===null){var p=new Map,b=Rg=new Map;b.set(u,p)}else b=Rg,p=b.get(u),p||(p=new Map,b.set(u,p));if(p.has(a))return p;for(p.set(a,null),u=u.getElementsByTagName(a),b=0;b<u.length;b++){var E=u[b];if(!(E[tc]||E[ln]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var M=E.getAttribute(o)||"";M=a+M;var B=p.get(M);B?B.push(E):p.set(M,[E])}}return p}function HA(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function ZP(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function FA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function JP(a,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=nu(p.href),E=o.querySelector(ud(b));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Pg.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=E,Jt(E);return}E=o.ownerDocument||o,p=BA(p),(b=wi.get(b))&&s1(p,b),E=E.createElement("link"),Jt(E);var M=E;M._p=new Promise(function(B,Y){M.onload=B,M.onerror=Y}),On(E,"link",p),u.instance=E}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Pg.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var r1=0;function e$(a,o){return a.stylesheets&&a.count===0&&Ug(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var p=setTimeout(function(){if(a.stylesheets&&Ug(a,a.stylesheets),a.unsuspend){var E=a.unsuspend;a.unsuspend=null,E()}},6e4+o);0<a.imgBytes&&r1===0&&(r1=62500*PP());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ug(a,a.stylesheets),a.unsuspend)){var E=a.unsuspend;a.unsuspend=null,E()}},(a.imgBytes>r1?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Pg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ug(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $g=null;function Ug(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,$g=new Map,o.forEach(t$,a),$g=null,Pg.call(a))}function t$(a,o){if(!(o.state.loading&4)){var u=$g.get(a);if(u)var p=u.get(null);else{u=new Map,$g.set(a,u);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var M=b[E];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),p=M)}p&&u.set(null,p)}b=o.instance,M=b.getAttribute("data-precedence"),E=u.get(M)||p,E===p&&u.set(null,b),u.set(M,b),this.count++,p=Pg.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),E?E.parentNode.insertBefore(b,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),o.state.loading|=4}}var dd={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function n$(a,o,u,p,b,E,M,B,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.hiddenUpdates=wl(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function VA(a,o,u,p,b,E,M,B,Y,ne,ce,fe){return a=new n$(a,o,u,M,Y,ne,ce,fe,B),o=1,E===!0&&(o|=24),E=ks(3,null,null,o),a.current=E,E.stateNode=a,o=ky(),o.refCount++,a.pooledCache=o,o.refCount++,E.memoizedState={element:p,isDehydrated:u,cache:o},Hy(E),a}function qA(a){return a?(a=Pl,a):Pl}function WA(a,o,u,p,b,E){b=qA(b),p.context===null?p.context=b:p.pendingContext=b,p=Ja(o),p.payload={element:u},E=E===void 0?null:E,E!==null&&(p.callback=E),u=eo(a,p,o),u!==null&&(vs(u,a,o),Vf(u,a,o))}function GA(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function a1(a,o){GA(a,o),(a=a.alternate)&&GA(a,o)}function KA(a){if(a.tag===13||a.tag===31){var o=lc(a,67108864);o!==null&&vs(o,a,67108864),a1(a,67108864)}}function YA(a){if(a.tag===13||a.tag===31){var o=Fs();o=xf(o);var u=lc(a,o);u!==null&&vs(u,a,o),a1(a,o)}}var Lg=!0;function s$(a,o,u,p){var b=P.T;P.T=null;var E=k.p;try{k.p=2,o1(a,o,u,p)}finally{k.p=E,P.T=b}}function i$(a,o,u,p){var b=P.T;P.T=null;var E=k.p;try{k.p=8,o1(a,o,u,p)}finally{k.p=E,P.T=b}}function o1(a,o,u,p){if(Lg){var b=c1(p);if(b===null)Gw(a,o,p,kg,u),QA(a,p);else if(a$(b,a,o,u,p))p.stopPropagation();else if(QA(a,p),o&4&&-1<r$.indexOf(a)){for(;b!==null;){var E=Fa(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var M=Gr(E.pendingLanes);if(M!==0){var B=E;for(B.pendingLanes|=2,B.entangledLanes|=2;M;){var Y=1<<31-ss(M);B.entanglements[1]|=Y,M&=~Y}xr(E),(dt&6)===0&&(bg=St()+500,ad(0))}}break;case 31:case 13:B=lc(E,2),B!==null&&vs(B,E,2),Eg(),a1(E,2)}if(E=c1(p),E===null&&Gw(a,o,p,kg,u),E===b)break;b=E}b!==null&&p.stopPropagation()}else Gw(a,o,p,null,u)}}function c1(a){return a=Df(a),l1(a)}var kg=null;function l1(a){if(kg=null,a=Us(a),a!==null){var o=r(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=c(o),a!==null)return a;a=null}else if(u===31){if(a=l(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return kg=a,null}function XA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ai()){case oi:return 2;case Wr:return 8;case Bi:case ji:return 32;case zi:return 268435456;default:return 32}default:return 32}}var u1=!1,fo=null,ho=null,po=null,hd=new Map,pd=new Map,go=[],r$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QA(a,o){switch(a){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":hd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pd.delete(o.pointerId)}}function gd(a,o,u,p,b,E){return a===null||a.nativeEvent!==E?(a={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:E,targetContainers:[b]},o!==null&&(o=Fa(o),o!==null&&KA(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),a)}function a$(a,o,u,p,b){switch(o){case"focusin":return fo=gd(fo,a,o,u,p,b),!0;case"dragenter":return ho=gd(ho,a,o,u,p,b),!0;case"mouseover":return po=gd(po,a,o,u,p,b),!0;case"pointerover":var E=b.pointerId;return hd.set(E,gd(hd.get(E)||null,a,o,u,p,b)),!0;case"gotpointercapture":return E=b.pointerId,pd.set(E,gd(pd.get(E)||null,a,o,u,p,b)),!0}return!1}function ZA(a){var o=Us(a.target);if(o!==null){var u=r(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){a.blockedOn=o,_p(a.priority,function(){YA(u)});return}}else if(o===31){if(o=l(u),o!==null){a.blockedOn=o,_p(a.priority,function(){YA(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Bg(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=c1(a.nativeEvent);if(u===null){u=a.nativeEvent;var p=new u.constructor(u.type,u);Vi=p,u.target.dispatchEvent(p),Vi=null}else return o=Fa(u),o!==null&&KA(o),a.blockedOn=u,!1;o.shift()}return!0}function JA(a,o,u){Bg(a)&&u.delete(o)}function o$(){u1=!1,fo!==null&&Bg(fo)&&(fo=null),ho!==null&&Bg(ho)&&(ho=null),po!==null&&Bg(po)&&(po=null),hd.forEach(JA),pd.forEach(JA)}function jg(a,o){a.blockedOn===o&&(a.blockedOn=null,u1||(u1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,o$)))}var zg=null;function e3(a){zg!==a&&(zg=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zg===a&&(zg=null);for(var o=0;o<a.length;o+=3){var u=a[o],p=a[o+1],b=a[o+2];if(typeof p!="function"){if(l1(p||u)===null)continue;break}var E=Fa(u);E!==null&&(a.splice(o,3),o-=3,cw(E,{pending:!0,data:b,method:u.method,action:p},p,b))}}))}function iu(a){function o(Y){return jg(Y,a)}fo!==null&&jg(fo,a),ho!==null&&jg(ho,a),po!==null&&jg(po,a),hd.forEach(o),pd.forEach(o);for(var u=0;u<go.length;u++){var p=go[u];p.blockedOn===a&&(p.blockedOn=null)}for(;0<go.length&&(u=go[0],u.blockedOn===null);)ZA(u),u.blockedOn===null&&go.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var b=u[p],E=u[p+1],M=b[Vn]||null;if(typeof E=="function")M||e3(u);else if(M){var B=null;if(E&&E.hasAttribute("formAction")){if(b=E,M=E[Vn]||null)B=M.formAction;else if(l1(b)!==null)continue}else B=M.action;typeof B=="function"?u[p+1]=B:(u.splice(p,3),p-=3),e3(u)}}}function t3(){function a(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(M){return b=M})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function f1(a){this._internalRoot=a}Hg.prototype.render=f1.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(s(409));var u=o.current,p=Fs();WA(u,p,a,o,null,null)},Hg.prototype.unmount=f1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;WA(a.current,2,null,a,null,null),Eg(),o[Ha]=null}};function Hg(a){this._internalRoot=a}Hg.prototype.unstable_scheduleHydration=function(a){if(a){var o=ci();a={blockedOn:null,target:a,priority:o};for(var u=0;u<go.length&&o!==0&&o<go[u].priority;u++);go.splice(u,0,a),u===0&&ZA(a)}};var n3=e.version;if(n3!=="19.2.0")throw Error(s(527,n3,"19.2.0"));k.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=d(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var c$={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{Zo=Fg.inject(c$),Fn=Fg}catch{}}return yd.createRoot=function(a,o){if(!i(a))throw Error(s(299));var u=!1,p="",b=lC,E=uC,M=fC;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=VA(a,1,!1,null,null,u,p,null,b,E,M,t3),a[Ha]=o.current,Ww(a),new f1(o)},yd.hydrateRoot=function(a,o,u){if(!i(a))throw Error(s(299));var p=!1,b="",E=lC,M=uC,B=fC,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.formState!==void 0&&(Y=u.formState)),o=VA(a,1,!0,o,u??null,p,b,Y,E,M,B,t3),o.context=qA(null),u=o.current,p=Fs(),p=xf(p),b=Ja(p),b.callback=null,eo(u,b,p),u=p,o.current.lanes=u,za(o,u),xr(o),a[Ha]=o.current,Ww(a),new Hg(o)},yd.version="19.2.0",yd}var d3;function v$(){if(d3)return p1.exports;d3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),p1.exports=w$(),p1.exports}var b$=v$();const x$=rf(b$),y8=ue.createContext(),La=()=>{const t=ue.useContext(y8);if(!t)throw new Error("useGame must be used within GameProvider");return t},E$=({children:t})=>{const[e,n]=ue.useState(!1),[s,i]=ue.useState(""),[r,c]=ue.useState(0),[l,f]=ue.useState(0),[d,h]=ue.useState(0),[g,m]=ue.useState(1),[y,w]=ue.useState(0),[v,x]=ue.useState([]),[C,D]=ue.useState(!1),[N,I]=ue.useState([]);ue.useEffect(()=>{const L=localStorage.getItem("blockQuestData");if(L){const F=JSON.parse(L);c(F.coins||0),f(F.crystals||0),h(F.traps||0),m(F.level||1),w(F.xp||0),x(F.minedBlocks||[]),D(F.questPassMinted||!1),I(F.questBadges||[])}},[]),ue.useEffect(()=>{const L={coins:r,crystals:l,traps:d,level:g,xp:y,minedBlocks:v,questPassMinted:C,questBadges:N};localStorage.setItem("blockQuestData",JSON.stringify(L))},[r,l,d,g,y,v,C,N]);const U={walletConnected:e,walletAddress:s,coins:r,crystals:l,traps:d,level:g,xp:y,minedBlocks:v,questPassMinted:C,questBadges:N,mineBlock:L=>{if(v.includes(L))return null;const F=Math.random();let W,$=0;F<.6?(W="coin",c(V=>V+10),$=10):F<.8?(W="crystal",f(V=>V+1),$=50):F<.95?(W="empty",$=5):(W="trap",h(V=>V+1),$=-20),x(V=>[...V,L]);const P=Math.max(0,y+$);w(P);const k=g*500;return P>=k?(m(V=>V+1),w(0),{result:W,levelUp:!0,newLevel:g+1}):{result:W,levelUp:!1}},resetGame:()=>{c(0),f(0),h(0),m(1),w(0),x([]),localStorage.removeItem("blockQuestData")},connectWallet:L=>{n(!0),i(L)},disconnectWallet:()=>{n(!1),i("")},mintQuestPass:()=>{D(!0)},mintQuestBadge:L=>{I(F=>[...F,{level:L,timestamp:Date.now()}])}};return z.jsx(y8.Provider,{value:U,children:t})},U2=ue.createContext({});function L2(t){const e=ue.useRef(null);return e.current===null&&(e.current=t()),e.current}const k2=typeof window<"u",w8=k2?ue.useLayoutEffect:ue.useEffect,Tm=ue.createContext(null);function B2(t,e){t.indexOf(e)===-1&&t.push(e)}function j2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const _a=(t,e,n)=>n>e?e:n<t?t:n;let z2=()=>{};const Ma={},v8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function b8(t){return typeof t=="object"&&t!==null}const x8=t=>/^0[^.\s]+$/u.test(t);function H2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Mi=t=>t,S$=(t,e)=>n=>e(t(n)),rp=(...t)=>t.reduce(S$),mh=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class F2{constructor(){this.subscriptions=[]}add(e){return B2(this.subscriptions,e),()=>j2(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const c=this.subscriptions[r];c&&c(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ur=t=>t*1e3,Oi=t=>t/1e3;function E8(t,e){return e?t*(1e3/e):0}const S8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,C$=1e-7,A$=12;function N$(t,e,n,s,i){let r,c,l=0;do c=e+(n-e)/2,r=S8(c,s,i)-t,r>0?n=c:e=c;while(Math.abs(r)>C$&&++l<A$);return c}function ap(t,e,n,s){if(t===e&&n===s)return Mi;const i=r=>N$(r,0,1,t,n);return r=>r===0||r===1?r:S8(i(r),e,s)}const C8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,A8=t=>e=>1-t(1-e),N8=ap(.33,1.53,.69,.99),V2=A8(N8),T8=C8(V2),I8=t=>(t*=2)<1?.5*V2(t):.5*(2-Math.pow(2,-10*(t-1))),q2=t=>1-Math.sin(Math.acos(t)),D8=A8(q2),O8=C8(q2),T$=ap(.42,0,1,1),I$=ap(0,0,.58,1),_8=ap(.42,0,.58,1),D$=t=>Array.isArray(t)&&typeof t[0]!="number",M8=t=>Array.isArray(t)&&typeof t[0]=="number",O$={linear:Mi,easeIn:T$,easeInOut:_8,easeOut:I$,circIn:q2,circInOut:O8,circOut:D8,backIn:V2,backInOut:T8,backOut:N8,anticipate:I8},_$=t=>typeof t=="string",h3=t=>{if(M8(t)){z2(t.length===4);const[e,n,s,i]=t;return ap(e,n,s,i)}else if(_$(t))return O$[t];return t},Vg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function M$(t,e){let n=new Set,s=new Set,i=!1,r=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function f(h){c.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,g=!1,m=!1)=>{const w=m&&i?n:s;return g&&c.add(h),w.has(h)||w.add(h),h},cancel:h=>{s.delete(h),c.delete(h)},process:h=>{if(l=h,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(f),n.clear(),i=!1,r&&(r=!1,d.process(h))}};return d}const R$=40;function R8(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,c=Vg.reduce((N,I)=>(N[I]=M$(r),N),{}),{setup:l,read:f,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:y,postRender:w}=c,v=()=>{const N=Ma.useManualTiming?i.timestamp:performance.now();n=!1,Ma.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(N-i.timestamp,R$),1)),i.timestamp=N,i.isProcessing=!0,l.process(i),f.process(i),d.process(i),h.process(i),g.process(i),m.process(i),y.process(i),w.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(v))},x=()=>{n=!0,s=!0,i.isProcessing||t(v)};return{schedule:Vg.reduce((N,I)=>{const S=c[I];return N[I]=(A,O=!1,T=!1)=>(n||x(),S.schedule(A,O,T)),N},{}),cancel:N=>{for(let I=0;I<Vg.length;I++)c[Vg[I]].cancel(N)},state:i,steps:c}}const{schedule:Ht,cancel:Wo,state:$n,steps:w1}=R8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mi,!0);let O0;function P$(){O0=void 0}const _s={now:()=>(O0===void 0&&_s.set($n.isProcessing||Ma.useManualTiming?$n.timestamp:performance.now()),O0),set:t=>{O0=t,queueMicrotask(P$)}},P8=t=>e=>typeof e=="string"&&e.startsWith(t),W2=P8("--"),$$=P8("var(--"),G2=t=>$$(t)?U$.test(t.split("/*")[0].trim()):!1,U$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,af={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yh={...af,transform:t=>_a(0,1,t)},qg={...af,default:1},Yd=t=>Math.round(t*1e5)/1e5,K2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function L$(t){return t==null}const k$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Y2=(t,e)=>n=>!!(typeof n=="string"&&k$.test(n)&&n.startsWith(t)||e&&!L$(n)&&Object.prototype.hasOwnProperty.call(n,e)),$8=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,c,l]=s.match(K2);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},B$=t=>_a(0,255,t),v1={...af,transform:t=>Math.round(B$(t))},jc={test:Y2("rgb","red"),parse:$8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+v1.transform(t)+", "+v1.transform(e)+", "+v1.transform(n)+", "+Yd(yh.transform(s))+")"};function j$(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Qv={test:Y2("#"),parse:j$,transform:jc.transform},op=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_o=op("deg"),Lr=op("%"),je=op("px"),z$=op("vh"),H$=op("vw"),p3={...Lr,parse:t=>Lr.parse(t)/100,transform:t=>Lr.transform(t*100)},Ou={test:Y2("hsl","hue"),parse:$8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Lr.transform(Yd(e))+", "+Lr.transform(Yd(n))+", "+Yd(yh.transform(s))+")"},an={test:t=>jc.test(t)||Qv.test(t)||Ou.test(t),parse:t=>jc.test(t)?jc.parse(t):Ou.test(t)?Ou.parse(t):Qv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jc.transform(t):Ou.transform(t),getAnimatableNone:t=>{const e=an.parse(t);return e.alpha=0,an.transform(e)}},F$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function V$(t){return isNaN(t)&&typeof t=="string"&&(t.match(K2)?.length||0)+(t.match(F$)?.length||0)>0}const U8="number",L8="color",q$="var",W$="var(",g3="${}",G$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wh(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const l=e.replace(G$,f=>(an.test(f)?(s.color.push(r),i.push(L8),n.push(an.parse(f))):f.startsWith(W$)?(s.var.push(r),i.push(q$),n.push(f)):(s.number.push(r),i.push(U8),n.push(parseFloat(f))),++r,g3)).split(g3);return{values:n,split:l,indexes:s,types:i}}function k8(t){return wh(t).values}function B8(t){const{split:e,types:n}=wh(t),s=e.length;return i=>{let r="";for(let c=0;c<s;c++)if(r+=e[c],i[c]!==void 0){const l=n[c];l===U8?r+=Yd(i[c]):l===L8?r+=an.transform(i[c]):r+=i[c]}return r}}const K$=t=>typeof t=="number"?0:an.test(t)?an.getAnimatableNone(t):t;function Y$(t){const e=k8(t);return B8(t)(e.map(K$))}const Go={test:V$,parse:k8,createTransformer:B8,getAnimatableNone:Y$};function b1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function X$({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,c=0;if(!e)i=r=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,f=2*n-l;i=b1(f,l,t+1/3),r=b1(f,l,t),c=b1(f,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(c*255),alpha:s}}function Y0(t,e){return n=>n>0?e:t}const Ft=(t,e,n)=>t+(e-t)*n,x1=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},Q$=[Qv,jc,Ou],Z$=t=>Q$.find(e=>e.test(t));function m3(t){const e=Z$(t);if(!e)return!1;let n=e.parse(t);return e===Ou&&(n=X$(n)),n}const y3=(t,e)=>{const n=m3(t),s=m3(e);if(!n||!s)return Y0(t,e);const i={...n};return r=>(i.red=x1(n.red,s.red,r),i.green=x1(n.green,s.green,r),i.blue=x1(n.blue,s.blue,r),i.alpha=Ft(n.alpha,s.alpha,r),jc.transform(i))},Zv=new Set(["none","hidden"]);function J$(t,e){return Zv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function eU(t,e){return n=>Ft(t,e,n)}function X2(t){return typeof t=="number"?eU:typeof t=="string"?G2(t)?Y0:an.test(t)?y3:sU:Array.isArray(t)?j8:typeof t=="object"?an.test(t)?y3:tU:Y0}function j8(t,e){const n=[...t],s=n.length,i=t.map((r,c)=>X2(r)(r,e[c]));return r=>{for(let c=0;c<s;c++)n[c]=i[c](r);return n}}function tU(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=X2(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function nU(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],c=t.indexes[r][s[r]],l=t.values[c]??0;n[i]=l,s[r]++}return n}const sU=(t,e)=>{const n=Go.createTransformer(e),s=wh(t),i=wh(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Zv.has(t)&&!i.values.length||Zv.has(e)&&!s.values.length?J$(t,e):rp(j8(nU(s,i),i.values),n):Y0(t,e)};function z8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ft(t,e,n):X2(t)(t,e)}const iU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ht.update(e,n),stop:()=>Wo(e),now:()=>$n.isProcessing?$n.timestamp:_s.now()}},H8=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},X0=2e4;function Q2(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<X0;)e+=n,s=t.next(e);return e>=X0?1/0:e}function rU(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(Q2(s),X0);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:Oi(i)}}const aU=5;function F8(t,e,n){const s=Math.max(e-aU,0);return E8(n-t(s),e-s)}const Wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},E1=.001;function oU({duration:t=Wt.duration,bounce:e=Wt.bounce,velocity:n=Wt.velocity,mass:s=Wt.mass}){let i,r,c=1-e;c=_a(Wt.minDamping,Wt.maxDamping,c),t=_a(Wt.minDuration,Wt.maxDuration,Oi(t)),c<1?(i=d=>{const h=d*c,g=h*t,m=h-n,y=Jv(d,c),w=Math.exp(-g);return E1-m/y*w},r=d=>{const g=d*c*t,m=g*n+n,y=Math.pow(c,2)*Math.pow(d,2)*t,w=Math.exp(-g),v=Jv(Math.pow(d,2),c);return(-i(d)+E1>0?-1:1)*((m-y)*w)/v}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-E1+h*g},r=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const l=5/t,f=lU(i,r,l);if(t=Ur(t),isNaN(f))return{stiffness:Wt.stiffness,damping:Wt.damping,duration:t};{const d=Math.pow(f,2)*s;return{stiffness:d,damping:c*2*Math.sqrt(s*d),duration:t}}}const cU=12;function lU(t,e,n){let s=n;for(let i=1;i<cU;i++)s=s-t(s)/e(s);return s}function Jv(t,e){return t*Math.sqrt(1-e*e)}const uU=["duration","bounce"],fU=["stiffness","damping","mass"];function w3(t,e){return e.some(n=>t[n]!==void 0)}function dU(t){let e={velocity:Wt.velocity,stiffness:Wt.stiffness,damping:Wt.damping,mass:Wt.mass,isResolvedFromDuration:!1,...t};if(!w3(t,fU)&&w3(t,uU))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*_a(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Wt.mass,stiffness:i,damping:r}}else{const n=oU(t);e={...e,...n,mass:Wt.mass},e.isResolvedFromDuration=!0}return e}function Q0(t=Wt.visualDuration,e=Wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:f,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:y}=dU({...n,velocity:-Oi(n.velocity||0)}),w=m||0,v=d/(2*Math.sqrt(f*h)),x=c-r,C=Oi(Math.sqrt(f/h)),D=Math.abs(x)<5;s||(s=D?Wt.restSpeed.granular:Wt.restSpeed.default),i||(i=D?Wt.restDelta.granular:Wt.restDelta.default);let N;if(v<1){const S=Jv(C,v);N=A=>{const O=Math.exp(-v*C*A);return c-O*((w+v*C*x)/S*Math.sin(S*A)+x*Math.cos(S*A))}}else if(v===1)N=S=>c-Math.exp(-C*S)*(x+(w+C*x)*S);else{const S=C*Math.sqrt(v*v-1);N=A=>{const O=Math.exp(-v*C*A),T=Math.min(S*A,300);return c-O*((w+v*C*x)*Math.sinh(T)+S*x*Math.cosh(T))/S}}const I={calculatedDuration:y&&g||null,next:S=>{const A=N(S);if(y)l.done=S>=g;else{let O=S===0?w:0;v<1&&(O=S===0?Ur(w):F8(N,S,A));const T=Math.abs(O)<=s,_=Math.abs(c-A)<=i;l.done=T&&_}return l.value=l.done?c:A,l},toString:()=>{const S=Math.min(Q2(I),X0),A=H8(O=>I.next(S*O).value,S,30);return S+"ms "+A},toTransition:()=>{}};return I}Q0.applyToOptions=t=>{const e=rU(t,100,Q0);return t.ease=e.ease,t.duration=Ur(e.duration),t.type="keyframes",t};function eb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:c,min:l,max:f,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},y=T=>l!==void 0&&T<l||f!==void 0&&T>f,w=T=>l===void 0?f:f===void 0||Math.abs(l-T)<Math.abs(f-T)?l:f;let v=n*e;const x=g+v,C=c===void 0?x:c(x);C!==x&&(v=C-g);const D=T=>-v*Math.exp(-T/s),N=T=>C+D(T),I=T=>{const _=D(T),R=N(T);m.done=Math.abs(_)<=d,m.value=m.done?C:R};let S,A;const O=T=>{y(m.value)&&(S=T,A=Q0({keyframes:[m.value,w(m.value)],velocity:F8(N,T,m.value),damping:i,stiffness:r,restDelta:d,restSpeed:h}))};return O(0),{calculatedDuration:null,next:T=>{let _=!1;return!A&&S===void 0&&(_=!0,I(T),O(T)),S!==void 0&&T>=S?A.next(T-S):(!_&&I(T),m)}}}function hU(t,e,n){const s=[],i=n||Ma.mix||z8,r=t.length-1;for(let c=0;c<r;c++){let l=i(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||Mi:e;l=rp(f,l)}s.push(l)}return s}function pU(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(z2(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=hU(e,s,i),f=l.length,d=h=>{if(c&&h<t[0])return e[0];let g=0;if(f>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=mh(t[g],t[g+1],h);return l[g](m)};return n?h=>d(_a(t[0],t[r-1],h)):d}function gU(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=mh(0,e,s);t.push(Ft(n,1,i))}}function mU(t){const e=[0];return gU(e,t.length-1),e}function yU(t,e){return t.map(n=>n*e)}function wU(t,e){return t.map(()=>e||_8).splice(0,t.length-1)}function Xd({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=D$(s)?s.map(h3):h3(s),r={done:!1,value:e[0]},c=yU(n&&n.length===e.length?n:mU(e),t),l=pU(c,e,{ease:Array.isArray(i)?i:wU(e,i)});return{calculatedDuration:t,next:f=>(r.value=l(f),r.done=f>=t,r)}}const vU=t=>t!==null;function Z2(t,{repeat:e,repeatType:n="loop"},s,i=1){const r=t.filter(vU),l=i<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!l||s===void 0?r[l]:s}const bU={decay:eb,inertia:eb,tween:Xd,keyframes:Xd,spring:Q0};function V8(t){typeof t.type=="string"&&(t.type=bU[t.type])}class J2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xU=t=>t/100;class ex extends J2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==_s.now()&&this.tick(_s.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;V8(e);const{type:n=Xd,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:c=0}=e;let{keyframes:l}=e;const f=n||Xd;f!==Xd&&typeof l[0]!="number"&&(this.mixKeyframes=rp(xU,z8(l[0],l[1])),l=[0,100]);const d=f({...e,keyframes:l});r==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...l].reverse(),velocity:-c})),d.calculatedDuration===null&&(d.calculatedDuration=Q2(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:y,type:w,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,I=s;if(g){const T=Math.min(this.currentTime,i)/l;let _=Math.floor(T),R=T%1;!R&&T>=1&&(R=1),R===1&&_--,_=Math.min(_,g+1),!!(_%2)&&(m==="reverse"?(R=1-R,y&&(R-=y/l)):m==="mirror"&&(I=c)),N=_a(0,1,R)*l}const S=D?{done:!1,value:h[0]}:I.next(N);r&&(S.value=r(S.value));let{done:A}=S;!D&&f!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return O&&w!==eb&&(S.value=Z2(h,this.options,x,this.speed)),v&&v(S.value),O&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return Oi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oi(e)}get time(){return Oi(this.currentTime)}set time(e){e=Ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_s.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Oi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=iU,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_s.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function EU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zc=t=>t*180/Math.PI,tb=t=>{const e=zc(Math.atan2(t[1],t[0]));return nb(e)},SU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tb,rotateZ:tb,skewX:t=>zc(Math.atan(t[1])),skewY:t=>zc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},nb=t=>(t=t%360,t<0&&(t+=360),t),v3=tb,b3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),x3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:b3,scaleY:x3,scale:t=>(b3(t)+x3(t))/2,rotateX:t=>nb(zc(Math.atan2(t[6],t[5]))),rotateY:t=>nb(zc(Math.atan2(-t[2],t[0]))),rotateZ:v3,rotate:v3,skewX:t=>zc(Math.atan(t[4])),skewY:t=>zc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function sb(t){return t.includes("scale")?1:0}function ib(t,e){if(!t||t==="none")return sb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=CU,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=SU,i=l}if(!i)return sb(e);const r=s[e],c=i[1].split(",").map(NU);return typeof r=="function"?r(c):c[r]}const AU=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ib(n,e)};function NU(t){return parseFloat(t.trim())}const of=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cf=new Set(of),E3=t=>t===af||t===je,TU=new Set(["x","y","z"]),IU=of.filter(t=>!TU.has(t));function DU(t){const e=[];return IU.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Yc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ib(e,"x"),y:(t,{transform:e})=>ib(e,"y")};Yc.translateX=Yc.x;Yc.translateY=Yc.y;const Xc=new Set;let rb=!1,ab=!1,ob=!1;function q8(){if(ab){const t=Array.from(Xc).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=DU(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,c])=>{s.getValue(r)?.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}ab=!1,rb=!1,Xc.forEach(t=>t.complete(ob)),Xc.clear()}function W8(){Xc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ab=!0)})}function OU(){ob=!0,W8(),q8(),ob=!1}class tx{constructor(e,n,s,i,r,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Xc.add(this),rb||(rb=!0,Ht.read(W8),Ht.resolveKeyframes(q8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const r=i?.get(),c=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&n){const l=s.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),i&&r===void 0&&i.set(e[0])}EU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xc.delete(this)}cancel(){this.state==="scheduled"&&(Xc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _U=t=>t.startsWith("--");function MU(t,e,n){_U(e)?t.style.setProperty(e,n):t.style[e]=n}const RU=H2(()=>window.ScrollTimeline!==void 0),PU={};function $U(t,e){const n=H2(t);return()=>PU[e]??n()}const G8=$U(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zd=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,S3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zd([0,.65,.55,1]),circOut:zd([.55,0,1,.45]),backIn:zd([.31,.01,.66,-.59]),backOut:zd([.33,1.53,.69,.99])};function K8(t,e){if(t)return typeof t=="function"?G8()?H8(t,e):"ease-out":M8(t)?zd(t):Array.isArray(t)?t.map(n=>K8(n,e)||S3.easeOut):S3[t]}function UU(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:c="loop",ease:l="easeOut",times:f}={},d=void 0){const h={[e]:n};f&&(h.offset=f);const g=K8(l,i);Array.isArray(g)&&(h.easing=g);const m={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:r+1,direction:c==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function Y8(t){return typeof t=="function"&&"applyToOptions"in t}function LU({type:t,...e}){return Y8(t)&&G8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kU extends J2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:c=!1,finalKeyframe:l,onComplete:f}=e;this.isPseudoElement=!!r,this.allowFlatten=c,this.options=e,z2(typeof e.type!="string");const d=LU(e);this.animation=UU(n,s,i,d,r),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=Z2(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):MU(n,s,h),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Oi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oi(e)}get time(){return Oi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&RU()?(this.animation.timeline=e,Mi):n(this)}}const X8={anticipate:I8,backInOut:T8,circInOut:O8};function BU(t){return t in X8}function jU(t){typeof t.ease=="string"&&BU(t.ease)&&(t.ease=X8[t.ease])}const C3=10;class zU extends kU{constructor(e){jU(e),V8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new ex({...c,autoplay:!1}),f=Ur(this.finishedTime??this.time);n.setWithVelocity(l.sample(f-C3).value,l.sample(f).value,C3),l.stop()}}const A3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Go.test(t)||t==="0")&&!t.startsWith("url("));function HU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function FU(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],c=A3(i,e),l=A3(r,e);return!c||!l?!1:HU(t)||(n==="spring"||Y8(n))&&s}function cb(t){t.duration=0,t.type="keyframes"}const VU=new Set(["opacity","clipPath","filter","transform"]),qU=H2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WU(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return qU()&&n&&VU.has(n)&&(n!=="transform"||!d)&&!f&&!s&&i!=="mirror"&&r!==0&&c!=="inertia"}const GU=40;class KU extends J2{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:c="loop",keyframes:l,name:f,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=_s.now();const m={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:c,name:f,motionValue:d,element:h,...g},y=h?.KeyframeResolver||tx;this.keyframeResolver=new y(l,(w,v,x)=>this.onKeyframesResolved(w,v,m,!x),f,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:r,type:c,velocity:l,delay:f,isHandoff:d,onUpdate:h}=s;this.resolvedAt=_s.now(),FU(e,r,c,l)||((Ma.instantAnimations||!f)&&h?.(Z2(e,s,n)),e[0]=e[e.length-1],cb(s),s.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>GU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},y=!d&&WU(m)?new zU({...m,element:m.motionValue.owner.current}):new ex(m);y.finished.then(()=>this.notifyFinished()).catch(Mi),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),OU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XU(t){const e=YU.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function Q8(t,e,n=1){const[s,i]=XU(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const c=r.trim();return v8(c)?parseFloat(c):c}return G2(i)?Q8(i,e,n+1):i}function nx(t,e){return t?.[e]??t?.default??t}const Z8=new Set(["width","height","top","left","right","bottom",...of]),QU={test:t=>t==="auto",parse:t=>t},J8=t=>e=>e.test(t),e6=[af,je,Lr,_o,H$,z$,QU],N3=t=>e6.find(J8(t));function ZU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x8(t):!0}const JU=new Set(["brightness","contrast","saturate","opacity"]);function eL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(K2)||[];if(!s)return t;const i=n.replace(s,"");let r=JU.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const tL=/\b([a-z-]*)\(.*?\)/gu,lb={...Go,getAnimatableNone:t=>{const e=t.match(tL);return e?e.map(eL).join(" "):t}},T3={...af,transform:Math.round},nL={rotate:_o,rotateX:_o,rotateY:_o,rotateZ:_o,scale:qg,scaleX:qg,scaleY:qg,scaleZ:qg,skew:_o,skewX:_o,skewY:_o,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:yh,originX:p3,originY:p3,originZ:je},sx={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je,...nL,zIndex:T3,fillOpacity:yh,strokeOpacity:yh,numOctaves:T3},sL={...sx,color:an,backgroundColor:an,outlineColor:an,fill:an,stroke:an,borderColor:an,borderTopColor:an,borderRightColor:an,borderBottomColor:an,borderLeftColor:an,filter:lb,WebkitFilter:lb},t6=t=>sL[t];function n6(t,e){let n=t6(t);return n!==lb&&(n=Go),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const iL=new Set(["auto","none","0"]);function rL(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!iL.has(r)&&wh(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=n6(n,i)}class aL extends tx{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),G2(d))){const h=Q8(d,n.current);h!==void 0&&(e[f]=h),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Z8.has(s)||e.length!==2)return;const[i,r]=e,c=N3(i),l=N3(r);if(c!==l)if(E3(c)&&E3(l))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Yc[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||ZU(e[i]))&&s.push(i);s.length&&rL(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,c=s[r];s[r]=Yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,f])=>{e.getValue(l).set(f)}),this.resolveNoneKeyframes()}}function oL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=n?.[t]??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const s6=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function i6(t){return b8(t)&&"offsetHeight"in t}const I3=30,cL=t=>!isNaN(parseFloat(t));class lL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=_s.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_s.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new F2);const s=this.events[e].add(n);return e==="change"?()=>{s(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_s.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>I3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,I3);return E8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wu(t,e){return new lL(t,e)}const{schedule:ix}=R8(queueMicrotask,!1),Ji={x:!1,y:!1};function r6(){return Ji.x||Ji.y}function uL(t){return t==="x"||t==="y"?Ji[t]?null:(Ji[t]=!0,()=>{Ji[t]=!1}):Ji.x||Ji.y?null:(Ji.x=Ji.y=!0,()=>{Ji.x=Ji.y=!1})}function a6(t,e){const n=oL(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function D3(t){return!(t.pointerType==="touch"||r6())}function fL(t,e,n={}){const[s,i,r]=a6(t,n),c=l=>{if(!D3(l))return;const{target:f}=l,d=e(f,l);if(typeof d!="function"||!f)return;const h=g=>{D3(g)&&(d(g),f.removeEventListener("pointerleave",h))};f.addEventListener("pointerleave",h,i)};return s.forEach(l=>{l.addEventListener("pointerenter",c,i)}),r}const o6=(t,e)=>e?t===e?!0:o6(t,e.parentElement):!1,rx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,dL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hL(t){return dL.has(t.tagName)||t.tabIndex!==-1}const _0=new WeakSet;function O3(t){return e=>{e.key==="Enter"&&t(e)}}function S1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const pL=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=O3(()=>{if(_0.has(n))return;S1(n,"down");const i=O3(()=>{S1(n,"up")}),r=()=>S1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function _3(t){return rx(t)&&!r6()}function gL(t,e,n={}){const[s,i,r]=a6(t,n),c=l=>{const f=l.currentTarget;if(!_3(l))return;_0.add(f);const d=e(f,l),h=(y,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),_0.has(f)&&_0.delete(f),_3(y)&&typeof d=="function"&&d(y,{success:w})},g=y=>{h(y,f===window||f===document||n.useGlobalTarget||o6(f,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,i),i6(l)&&(l.addEventListener("focus",d=>pL(d,i)),!hL(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function c6(t){return b8(t)&&"ownerSVGElement"in t}function mL(t){return c6(t)&&t.tagName==="svg"}const es=t=>!!(t&&t.getVelocity),yL=[...e6,an,Go],wL=t=>yL.find(J8(t)),ax=ue.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function M3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vL(...t){return e=>{let n=!1;const s=t.map(i=>{const r=M3(i,e);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():M3(t[i],null)}}}}function bL(...t){return ue.useCallback(vL(...t),t)}class xL extends ue.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=i6(s)&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function EL({children:t,isPresent:e,anchorX:n,root:s}){const i=ue.useId(),r=ue.useRef(null),c=ue.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=ue.useContext(ax),f=bL(r,t?.ref);return ue.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:y}=c.current;if(e||!r.current||!d||!h)return;const w=n==="left"?`left: ${m}`:`right: ${y}`;r.current.dataset.motionPopId=i;const v=document.createElement("style");l&&(v.nonce=l);const x=s??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[e]),z.jsx(xL,{isPresent:e,childRef:r,sizeRef:c,children:ue.cloneElement(t,{ref:f})})}const SL=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:c,anchorX:l,root:f})=>{const d=L2(CL),h=ue.useId();let g=!0,m=ue.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const w of d.values())if(!w)return;s&&s()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,s]);return r&&g&&(m={...m}),ue.useMemo(()=>{d.forEach((y,w)=>d.set(w,!1))},[n]),ue.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),c==="popLayout"&&(t=z.jsx(EL,{isPresent:n,anchorX:l,root:f,children:t})),z.jsx(Tm.Provider,{value:m,children:t})};function CL(){return new Map}function l6(t=!0){const e=ue.useContext(Tm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=ue.useId();ue.useEffect(()=>{if(t)return i(r)},[t]);const c=ue.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,c]:[!0]}const Wg=t=>t.key||"";function R3(t){const e=[];return ue.Children.forEach(t,n=>{ue.isValidElement(n)&&e.push(n)}),e}const Gu=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:c=!1,anchorX:l="left",root:f})=>{const[d,h]=l6(c),g=ue.useMemo(()=>R3(t),[t]),m=c&&!d?[]:g.map(Wg),y=ue.useRef(!0),w=ue.useRef(g),v=L2(()=>new Map),[x,C]=ue.useState(g),[D,N]=ue.useState(g);w8(()=>{y.current=!1,w.current=g;for(let A=0;A<D.length;A++){const O=Wg(D[A]);m.includes(O)?v.delete(O):v.get(O)!==!0&&v.set(O,!1)}},[D,m.length,m.join("-")]);const I=[];if(g!==x){let A=[...g];for(let O=0;O<D.length;O++){const T=D[O],_=Wg(T);m.includes(_)||(A.splice(O,0,T),I.push(T))}return r==="wait"&&I.length&&(A=I),N(R3(A)),C(g),null}const{forceRender:S}=ue.useContext(U2);return z.jsx(z.Fragment,{children:D.map(A=>{const O=Wg(A),T=c&&!d?!1:g===D||m.includes(O),_=()=>{if(v.has(O))v.set(O,!0);else return;let R=!0;v.forEach(U=>{U||(R=!1)}),R&&(S?.(),N(w.current),c&&h?.(),s&&s())};return z.jsx(SL,{isPresent:T,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:r,root:f,onExitComplete:T?void 0:_,anchorX:l,children:A},O)})})},u6=ue.createContext({strict:!1}),P3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ku={};for(const t in P3)Ku[t]={isEnabled:e=>P3[t].some(n=>!!e[n])};function AL(t){for(const e in t)Ku[e]={...Ku[e],...t[e]}}const NL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Z0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||NL.has(t)}let f6=t=>!Z0(t);function TL(t){typeof t=="function"&&(f6=e=>e.startsWith("on")?!Z0(e):t(e))}try{TL(require("@emotion/is-prop-valid").default)}catch{}function IL(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(f6(i)||n===!0&&Z0(i)||!e&&!Z0(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Im=ue.createContext({});function Dm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function vh(t){return typeof t=="string"||Array.isArray(t)}const ox=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cx=["initial",...ox];function Om(t){return Dm(t.animate)||cx.some(e=>vh(t[e]))}function d6(t){return!!(Om(t)||t.variants)}function DL(t,e){if(Om(t)){const{initial:n,animate:s}=t;return{initial:n===!1||vh(n)?n:void 0,animate:vh(s)?s:void 0}}return t.inherit!==!1?e:{}}function OL(t){const{initial:e,animate:n}=DL(t,ue.useContext(Im));return ue.useMemo(()=>({initial:e,animate:n}),[$3(e),$3(n)])}function $3(t){return Array.isArray(t)?t.join(" "):t}const bh={};function _L(t){for(const e in t)bh[e]=t[e],W2(e)&&(bh[e].isCSSVariable=!0)}function h6(t,{layout:e,layoutId:n}){return cf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bh[t]||t==="opacity")}const ML={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RL=of.length;function PL(t,e,n){let s="",i=!0;for(let r=0;r<RL;r++){const c=of[r],l=t[c];if(l===void 0)continue;let f=!0;if(typeof l=="number"?f=l===(c.startsWith("scale")?1:0):f=parseFloat(l)===0,!f||n){const d=s6(l,sx[c]);if(!f){i=!1;const h=ML[c]||c;s+=`${h}(${d}) `}n&&(e[c]=d)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function lx(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let c=!1,l=!1;for(const f in e){const d=e[f];if(cf.has(f)){c=!0;continue}else if(W2(f)){i[f]=d;continue}else{const h=s6(d,sx[f]);f.startsWith("origin")?(l=!0,r[f]=h):s[f]=h}}if(e.transform||(c||n?s.transform=PL(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:f="50%",originY:d="50%",originZ:h=0}=r;s.transformOrigin=`${f} ${d} ${h}`}}const ux=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function p6(t,e,n){for(const s in e)!es(e[s])&&!h6(s,n)&&(t[s]=e[s])}function $L({transformTemplate:t},e){return ue.useMemo(()=>{const n=ux();return lx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function UL(t,e){const n=t.style||{},s={};return p6(s,n,t),Object.assign(s,$L(t,e)),s}function LL(t,e){const n={},s=UL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const kL={offset:"stroke-dashoffset",array:"stroke-dasharray"},BL={offset:"strokeDashoffset",array:"strokeDasharray"};function jL(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?kL:BL;t[r.offset]=je.transform(-s);const c=je.transform(e),l=je.transform(n);t[r.array]=`${c} ${l}`}function g6(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:c=0,...l},f,d,h){if(lx(t,l,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),s!==void 0&&(g.scale=s),i!==void 0&&jL(g,i,r,c,!1)}const m6=()=>({...ux(),attrs:{}}),y6=t=>typeof t=="string"&&t.toLowerCase()==="svg";function zL(t,e,n,s){const i=ue.useMemo(()=>{const r=m6();return g6(r,e,y6(s),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};p6(r,t.style,t),i.style={...r,...i.style}}return i}const HL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fx(t){return typeof t!="string"||t.includes("-")?!1:!!(HL.indexOf(t)>-1||/[A-Z]/u.test(t))}function FL(t,e,n,{latestValues:s},i,r=!1){const l=(fx(t)?zL:LL)(e,s,i,t),f=IL(e,typeof t=="string",r),d=t!==ue.Fragment?{...f,...l,ref:n}:{},{children:h}=e,g=ue.useMemo(()=>es(h)?h.get():h,[h]);return ue.createElement(t,{...d,children:g})}function U3(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function dx(t,e,n,s){if(typeof e=="function"){const[i,r]=U3(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=U3(s);e=e(n!==void 0?n:t.custom,i,r)}return e}function M0(t){return es(t)?t.get():t}function VL({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:qL(n,s,i,t),renderState:e()}}function qL(t,e,n,s){const i={},r=s(t,{});for(const m in r)i[m]=M0(r[m]);let{initial:c,animate:l}=t;const f=Om(t),d=d6(t);e&&d&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||c===!1;const g=h?l:c;if(g&&typeof g!="boolean"&&!Dm(g)){const m=Array.isArray(g)?g:[g];for(let y=0;y<m.length;y++){const w=dx(t,m[y]);if(w){const{transitionEnd:v,transition:x,...C}=w;for(const D in C){let N=C[D];if(Array.isArray(N)){const I=h?N.length-1:0;N=N[I]}N!==null&&(i[D]=N)}for(const D in v)i[D]=v[D]}}}return i}const w6=t=>(e,n)=>{const s=ue.useContext(Im),i=ue.useContext(Tm),r=()=>VL(t,e,s,i);return n?r():L2(r)};function hx(t,e,n){const{style:s}=t,i={};for(const r in s)(es(s[r])||e.style&&es(e.style[r])||h6(r,t)||n?.getValue(r)?.liveStyle!==void 0)&&(i[r]=s[r]);return i}const WL=w6({scrapeMotionValuesFromProps:hx,createRenderState:ux});function v6(t,e,n){const s=hx(t,e,n);for(const i in t)if(es(t[i])||es(e[i])){const r=of.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}const GL=w6({scrapeMotionValuesFromProps:v6,createRenderState:m6}),KL=Symbol.for("motionComponentSymbol");function _u(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function YL(t,e,n){return ue.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):_u(n)&&(n.current=s))},[e])}const px=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),XL="framerAppearId",b6="data-"+px(XL),x6=ue.createContext({});function QL(t,e,n,s,i){const{visualElement:r}=ue.useContext(Im),c=ue.useContext(u6),l=ue.useContext(Tm),f=ue.useContext(ax).reducedMotion,d=ue.useRef(null);s=s||c.renderer,!d.current&&s&&(d.current=s(t,{visualState:e,parent:r,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:f}));const h=d.current,g=ue.useContext(x6);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&ZL(d.current,n,i,g);const m=ue.useRef(!1);ue.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[b6],w=ue.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return w8(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),ue.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),w.current=!1),h.enteringChildren=void 0)}),h}function ZL(t,e,n,s){const{layoutId:i,layout:r,drag:c,dragConstraints:l,layoutScroll:f,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:E6(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!c||l&&_u(l),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:f,layoutRoot:d})}function E6(t){if(t)return t.options.allowProjection!==!1?t.projection:E6(t.parent)}function C1(t,{forwardMotionProps:e=!1}={},n,s){n&&AL(n);const i=fx(t)?GL:WL;function r(l,f){let d;const h={...ue.useContext(ax),...l,layoutId:JL(l)},{isStatic:g}=h,m=OL(l),y=i(l,g);if(!g&&k2){ek();const w=tk(h);d=w.MeasureLayout,m.visualElement=QL(t,y,h,s,w.ProjectionNode)}return z.jsxs(Im.Provider,{value:m,children:[d&&m.visualElement?z.jsx(d,{visualElement:m.visualElement,...h}):null,FL(t,l,YL(y,m.visualElement,f),y,g,e)]})}r.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=ue.forwardRef(r);return c[KL]=t,c}function JL({layoutId:t}){const e=ue.useContext(U2).id;return e&&t!==void 0?e+"-"+t:t}function ek(t,e){ue.useContext(u6).strict}function tk(t){const{drag:e,layout:n}=Ku;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function nk(t,e){if(typeof Proxy>"u")return C1;const n=new Map,s=(r,c)=>C1(r,c,t,e),i=(r,c)=>s(r,c);return new Proxy(i,{get:(r,c)=>c==="create"?s:(n.has(c)||n.set(c,C1(c,void 0,t,e)),n.get(c))})}function S6({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function sk({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ik(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function A1(t){return t===void 0||t===1}function ub({scale:t,scaleX:e,scaleY:n}){return!A1(t)||!A1(e)||!A1(n)}function Rc(t){return ub(t)||C6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function C6(t){return L3(t.x)||L3(t.y)}function L3(t){return t&&t!=="0%"}function J0(t,e,n){const s=t-n,i=e*s;return n+i}function k3(t,e,n,s,i){return i!==void 0&&(t=J0(t,i,s)),J0(t,n,s)+e}function fb(t,e=0,n=1,s,i){t.min=k3(t.min,e,n,s,i),t.max=k3(t.max,e,n,s,i)}function A6(t,{x:e,y:n}){fb(t.x,e.translate,e.scale,e.originPoint),fb(t.y,n.translate,n.scale,n.originPoint)}const B3=.999999999999,j3=1.0000000000001;function rk(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,c;for(let l=0;l<i;l++){r=n[l],c=r.projectionDelta;const{visualElement:f}=r.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ru(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,A6(t,c)),s&&Rc(r.latestValues)&&Ru(t,r.latestValues))}e.x<j3&&e.x>B3&&(e.x=1),e.y<j3&&e.y>B3&&(e.y=1)}function Mu(t,e){t.min=t.min+e,t.max=t.max+e}function z3(t,e,n,s,i=.5){const r=Ft(t.min,t.max,i);fb(t,e,n,r,s)}function Ru(t,e){z3(t.x,e.x,e.scaleX,e.scale,e.originX),z3(t.y,e.y,e.scaleY,e.scale,e.originY)}function N6(t,e){return S6(ik(t.getBoundingClientRect(),e))}function ak(t,e,n){const s=N6(t,n),{scroll:i}=e;return i&&(Mu(s.x,i.offset.x),Mu(s.y,i.offset.y)),s}const H3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pu=()=>({x:H3(),y:H3()}),F3=()=>({min:0,max:0}),Xt=()=>({x:F3(),y:F3()}),db={current:null},T6={current:!1};function ok(){if(T6.current=!0,!!k2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>db.current=t.matches;t.addEventListener("change",e),e()}else db.current=!1}const ck=new WeakMap;function lk(t,e,n){for(const s in e){const i=e[s],r=n[s];if(es(i))t.addValue(s,i);else if(es(r))t.addValue(s,Wu(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(s);t.addValue(s,Wu(c!==void 0?c:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const V3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uk{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=_s.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ht.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=Om(n),this.isVariantNode=d6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const y=g[m];f[m]!==void 0&&es(y)&&y.set(f[m])}}mount(e){this.current=e,ck.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),T6.current||ok(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:db.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Wo(this.notifyUpdate),Wo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=cf.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ku){const n=Ku[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<V3.length;s++){const i=V3[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,c=e[r];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=lk(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Wu(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(v8(s)||x8(s))?s=parseFloat(s):!wL(s)&&Go.test(n)&&(s=n6(e,n)),this.setBaseTarget(e,es(s)?s.get():s)),es(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=dx(this.props,n,this.presenceContext?.custom);r&&(s=r[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!es(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new F2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ix.render(this.render)}}class I6 extends uk{constructor(){super(...arguments),this.KeyframeResolver=aL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;es(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function D6(t,{style:e,vars:n},s,i){const r=t.style;let c;for(c in e)r[c]=e[c];i?.applyProjectionStyles(r,s);for(c in n)r.setProperty(c,n[c])}function fk(t){return window.getComputedStyle(t)}class dk extends I6{constructor(){super(...arguments),this.type="html",this.renderInstance=D6}readValueFromInstance(e,n){if(cf.has(n))return this.projection?.isProjecting?sb(n):AU(e,n);{const s=fk(e),i=(W2(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return N6(e,n)}build(e,n,s){lx(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return hx(e,n,s)}}const O6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hk(t,e,n,s){D6(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(O6.has(i)?i:px(i),e.attrs[i])}class pk extends I6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(cf.has(n)){const s=t6(n);return s&&s.default||0}return n=O6.has(n)?n:px(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return v6(e,n,s)}build(e,n,s){g6(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){hk(e,n,s,i)}mount(e){this.isSVGTag=y6(e.tagName),super.mount(e)}}const gk=(t,e)=>fx(t)?new pk(e):new dk(e,{allowProjection:t!==ue.Fragment});function zu(t,e,n){const s=t.getProps();return dx(s,e,n!==void 0?n:s.custom,t)}const hb=t=>Array.isArray(t);function mk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wu(n))}function yk(t){return hb(t)?t[t.length-1]||0:t}function wk(t,e){const n=zu(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const c in r){const l=yk(r[c]);mk(t,c,l)}}function vk(t){return!!(es(t)&&t.add)}function pb(t,e){const n=t.getValue("willChange");if(vk(n))return n.add(e);if(!n&&Ma.WillChange){const s=new Ma.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function _6(t){return t.props[b6]}const bk=t=>t!==null;function xk(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(bk),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[r]}const Ek={type:"spring",stiffness:500,damping:25,restSpeed:10},Sk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ck={type:"keyframes",duration:.8},Ak={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Nk=(t,{keyframes:e})=>e.length>2?Ck:cf.has(t)?t.startsWith("scale")?Sk(e[1]):Ek:Ak;function Tk({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:c,repeatDelay:l,from:f,elapsed:d,...h}){return!!Object.keys(h).length}const gx=(t,e,n,s={},i,r)=>c=>{const l=nx(s,t)||{},f=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Ur(f);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:r?void 0:i};Tk(l)||Object.assign(h,Nk(t,h)),h.duration&&(h.duration=Ur(h.duration)),h.repeatDelay&&(h.repeatDelay=Ur(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(cb(h),h.delay===0&&(g=!0)),(Ma.instantAnimations||Ma.skipAnimations)&&(g=!0,cb(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,g&&!r&&e.get()!==void 0){const m=xk(h.keyframes,l);if(m!==void 0){Ht.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new ex(h):new KU(h)};function Ik({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function M6(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:c,...l}=e;s&&(r=s);const f=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const g=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&Ik(d,h))continue;const y={delay:n,...nx(r||{},h)},w=g.get();if(w!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===w&&!y.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const C=_6(t);if(C){const D=window.MotionHandoffAnimation(C,h,Ht);D!==null&&(y.startTime=D,v=!0)}}pb(t,h),g.start(gx(h,g,m,t.shouldReduceMotion&&Z8.has(h)?{type:!1}:y,t,v));const x=g.animation;x&&f.push(x)}return c&&Promise.all(f).then(()=>{Ht.update(()=>{c&&wk(t,c)})}),f}function R6(t,e,n,s=0,i=1){const r=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),c=t.size,l=(c-1)*s;return typeof n=="function"?n(r,c):i===1?r*s:l-r*s}function gb(t,e,n={}){const s=zu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(M6(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return Dk(t,e,f,d,h,g,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[f,d]=l==="beforeChildren"?[r,c]:[c,r];return f().then(()=>d())}else return Promise.all([r(),c(n.delay)])}function Dk(t,e,n=0,s=0,i=0,r=1,c){const l=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),l.push(gb(f,e,{...c,delay:n+(typeof s=="function"?0:s)+R6(t.variantChildren,f,s,i,r)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(l)}function Ok(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>gb(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=gb(t,e,n);else{const i=typeof e=="function"?zu(t,e,n.custom):e;s=Promise.all(M6(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function P6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const _k=cx.length;function $6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_k;n++){const s=cx[n],i=t.props[s];(vh(i)||i===!1)&&(e[s]=i)}return e}const Mk=[...ox].reverse(),Rk=ox.length;function Pk(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Ok(t,n,s)))}function $k(t){let e=Pk(t),n=q3(),s=!0;const i=f=>(d,h)=>{const g=zu(t,h,f==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:y,...w}=g;d={...d,...w,...y}}return d};function r(f){e=f(t)}function c(f){const{props:d}=t,h=$6(t.parent)||{},g=[],m=new Set;let y={},w=1/0;for(let x=0;x<Rk;x++){const C=Mk[x],D=n[C],N=d[C]!==void 0?d[C]:h[C],I=vh(N),S=C===f?D.isActive:null;S===!1&&(w=x);let A=N===h[C]&&N!==d[C]&&I;if(A&&s&&t.manuallyAnimateOnMount&&(A=!1),D.protectedKeys={...y},!D.isActive&&S===null||!N&&!D.prevProp||Dm(N)||typeof N=="boolean")continue;const O=Uk(D.prevProp,N);let T=O||C===f&&D.isActive&&!A&&I||x>w&&I,_=!1;const R=Array.isArray(N)?N:[N];let U=R.reduce(i(C),{});S===!1&&(U={});const{prevResolvedValues:L={}}=D,F={...L,...U},W=k=>{T=!0,m.has(k)&&(_=!0,m.delete(k)),D.needsAnimating[k]=!0;const V=t.getValue(k);V&&(V.liveStyle=!1)};for(const k in F){const V=U[k],K=L[k];if(y.hasOwnProperty(k))continue;let G=!1;hb(V)&&hb(K)?G=!P6(V,K):G=V!==K,G?V!=null?W(k):m.add(k):V!==void 0&&m.has(k)?W(k):D.protectedKeys[k]=!0}D.prevProp=N,D.prevResolvedValues=U,D.isActive&&(y={...y,...U}),s&&t.blockInitialAnimation&&(T=!1);const $=A&&O;T&&(!$||_)&&g.push(...R.map(k=>{const V={type:C};if(typeof k=="string"&&s&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,G=zu(K,k);if(K.enteringChildren&&G){const{delayChildren:j}=G.transition||{};V.delay=R6(K.enteringChildren,t,j)}}return{animation:k,options:V}}))}if(m.size){const x={};if(typeof d.initial!="boolean"){const C=zu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(x.transition=C.transition)}m.forEach(C=>{const D=t.getBaseTarget(C),N=t.getValue(C);N&&(N.liveStyle=!0),x[C]=D??null}),g.push({animation:x})}let v=!!g.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(v=!1),s=!1,v?e(g):Promise.resolve()}function l(f,d){if(n[f].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(f,d)),n[f].isActive=d;const h=c(f);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:c,setActive:l,setAnimateFunction:r,getState:()=>n,reset:()=>{n=q3()}}}function Uk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!P6(e,t):!1}function Ec(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q3(){return{animate:Ec(!0),whileInView:Ec(),whileHover:Ec(),whileTap:Ec(),whileDrag:Ec(),whileFocus:Ec(),exit:Ec()}}class Xo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lk extends Xo{constructor(e){super(e),e.animationState||(e.animationState=$k(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Dm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let kk=0;class Bk extends Xo{constructor(){super(...arguments),this.id=kk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const jk={animation:{Feature:Lk},exit:{Feature:Bk}};function xh(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function cp(t){return{point:{x:t.pageX,y:t.pageY}}}const zk=t=>e=>rx(e)&&t(e,cp(e));function Qd(t,e,n,s){return xh(t,e,zk(n),s)}const U6=1e-4,Hk=1-U6,Fk=1+U6,L6=.01,Vk=0-L6,qk=0+L6;function os(t){return t.max-t.min}function Wk(t,e,n){return Math.abs(t-e)<=n}function W3(t,e,n,s=.5){t.origin=s,t.originPoint=Ft(e.min,e.max,t.origin),t.scale=os(n)/os(e),t.translate=Ft(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Hk&&t.scale<=Fk||isNaN(t.scale))&&(t.scale=1),(t.translate>=Vk&&t.translate<=qk||isNaN(t.translate))&&(t.translate=0)}function Zd(t,e,n,s){W3(t.x,e.x,n.x,s?s.originX:void 0),W3(t.y,e.y,n.y,s?s.originY:void 0)}function G3(t,e,n){t.min=n.min+e.min,t.max=t.min+os(e)}function Gk(t,e,n){G3(t.x,e.x,n.x),G3(t.y,e.y,n.y)}function K3(t,e,n){t.min=e.min-n.min,t.max=t.min+os(e)}function Jd(t,e,n){K3(t.x,e.x,n.x),K3(t.y,e.y,n.y)}function Ni(t){return[t("x"),t("y")]}const k6=({current:t})=>t?t.ownerDocument.defaultView:null,Y3=(t,e)=>Math.abs(t-e);function Kk(t,e){const n=Y3(t.x,e.x),s=Y3(t.y,e.y);return Math.sqrt(n**2+s**2)}class B6{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=T1(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=Kk(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:v}=m,{timestamp:x}=$n;this.history.push({...v,timestamp:x});const{onStart:C,onMove:D}=this.handlers;y||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=N1(y,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=T1(m.type==="pointercancel"?this.lastMoveEventInfo:N1(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,C),v&&v(m,C)},!rx(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=i||window;const l=cp(e),f=N1(l,this.transformPagePoint),{point:d}=f,{timestamp:h}=$n;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,T1(f,this.history)),this.removeListeners=rp(Qd(this.contextWindow,"pointermove",this.handlePointerMove),Qd(this.contextWindow,"pointerup",this.handlePointerUp),Qd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wo(this.updatePoint)}}function N1(t,e){return e?{point:e(t.point)}:t}function X3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function T1({point:t},e){return{point:t,delta:X3(t,j6(e)),offset:X3(t,Yk(e)),velocity:Xk(e,.1)}}function Yk(t){return t[0]}function j6(t){return t[t.length-1]}function Xk(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=j6(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Ur(e)));)n--;if(!s)return{x:0,y:0};const r=Oi(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const c={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Qk(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Ft(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Ft(n,t,s.max):Math.min(t,n)),t}function Q3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Zk(t,{top:e,left:n,bottom:s,right:i}){return{x:Q3(t.x,n,i),y:Q3(t.y,e,s)}}function Z3(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Jk(t,e){return{x:Z3(t.x,e.x),y:Z3(t.y,e.y)}}function e9(t,e){let n=.5;const s=os(t),i=os(e);return i>s?n=mh(e.min,e.max-s,t.min):s>i&&(n=mh(t.min,t.max-i,e.min)),_a(0,1,n)}function t9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mb=.35;function n9(t=mb){return t===!1?t=0:t===!0&&(t=mb),{x:J3(t,"left","right"),y:J3(t,"top","bottom")}}function J3(t,e,n){return{min:e4(t,e),max:e4(t,n)}}function e4(t,e){return typeof t=="number"?t:t[e]||0}const s9=new WeakMap;class i9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cp(g).point)},c=(g,m)=>{const{drag:y,dragPropagation:w,onDragStart:v}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uL(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ni(C=>{let D=this.getAxisMotionValue(C).get()||0;if(Lr.test(D)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[C];I&&(D=os(I)*(parseFloat(D)/100))}}this.originPoint[C]=D}),v&&Ht.postRender(()=>v(g,m)),pb(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:v,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=m;if(w&&this.currentDirection===null){this.currentDirection=r9(C),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),x&&x(g,m)},f=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ni(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new B6(e,{onSessionStart:r,onStart:c,onMove:l,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:k6(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ht.postRender(()=>l(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Gg(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=Qk(c,this.constraints[e],this.elastic[e])),r.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&_u(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Zk(s.layoutBox,e):this.constraints=!1,this.elastic=n9(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ni(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=t9(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_u(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=ak(s,i.root,this.visualElement.getTransformPagePoint());let c=Jk(i.layout.layoutBox,r);if(n){const l=n(sk(c));this.hasMutatedConstraints=!!l,l&&(c=S6(l))}return c}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),f=this.constraints||{},d=Ni(h=>{if(!Gg(h,n,this.currentDirection))return;let g=f&&f[h]||{};c&&(g={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,w={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...r,...g};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return pb(this.visualElement,e),s.start(gx(e,s,0,n,this.visualElement,!1))}stopAnimation(){Ni(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ni(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ni(n=>{const{drag:s}=this.getProps();if(!Gg(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:l}=i.layout.layoutBox[n];r.set(e[n]-Ft(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!_u(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ni(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const f=l.get();i[c]=e9({min:f,max:f},this.constraints[c])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ni(c=>{if(!Gg(c,e,null))return;const l=this.getAxisMotionValue(c),{min:f,max:d}=this.constraints[c];l.set(Ft(f,d,i[c]))})}addListeners(){if(!this.visualElement.current)return;s9.set(this.visualElement,this);const e=this.visualElement.current,n=Qd(e,"pointerdown",f=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();_u(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ht.read(s);const c=xh(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ni(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=f[h].translate,g.set(g.get()+f[h].translate))}),this.visualElement.render())}));return()=>{c(),n(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:c=mb,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:c,dragMomentum:l}}}function Gg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function r9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class a9 extends Xo{constructor(e){super(e),this.removeGroupControls=Mi,this.removeListeners=Mi,this.controls=new i9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mi}unmount(){this.removeGroupControls(),this.removeListeners()}}const t4=t=>(e,n)=>{t&&Ht.postRender(()=>t(e,n))};class o9 extends Xo{constructor(){super(...arguments),this.removePointerDownListener=Mi}onPointerDown(e){this.session=new B6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:t4(e),onStart:t4(n),onMove:s,onEnd:(r,c)=>{delete this.session,i&&Ht.postRender(()=>i(r,c))}}}mount(){this.removePointerDownListener=Qd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const R0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function n4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(je.test(t))t=parseFloat(t);else return t;const n=n4(t,e.target.x),s=n4(t,e.target.y);return`${n}% ${s}%`}},c9={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Go.parse(t);if(i.length>5)return s;const r=Go.createTransformer(t),c=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,f=n.y.scale*e.y;i[0+c]/=l,i[1+c]/=f;const d=Ft(l,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=d),typeof i[3+c]=="number"&&(i[3+c]/=d),r(i)}};let I1=!1;class l9 extends ue.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;_L(u9),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),I1&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),R0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:c}=s;return c&&(c.isPresent=r,I1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==r?c.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?c.promote():c.relegate()||Ht.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ix.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;I1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function z6(t){const[e,n]=l6(),s=ue.useContext(U2);return z.jsx(l9,{...t,layoutGroup:s,switchLayoutGroup:ue.useContext(x6),isPresent:e,safeToRemove:n})}const u9={borderRadius:{...wd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wd,borderTopRightRadius:wd,borderBottomLeftRadius:wd,borderBottomRightRadius:wd,boxShadow:c9};function f9(t,e,n){const s=es(t)?t:Wu(t);return s.start(gx("",s,e,n)),s.animation}const d9=(t,e)=>t.depth-e.depth;class h9{constructor(){this.children=[],this.isDirty=!1}add(e){B2(this.children,e),this.isDirty=!0}remove(e){j2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(d9),this.isDirty=!1,this.children.forEach(e)}}function p9(t,e){const n=_s.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(Wo(s),t(r-e))};return Ht.setup(s,!0),()=>Wo(s)}const H6=["TopLeft","TopRight","BottomLeft","BottomRight"],g9=H6.length,s4=t=>typeof t=="string"?parseFloat(t):t,i4=t=>typeof t=="number"||je.test(t);function m9(t,e,n,s,i,r){i?(t.opacity=Ft(0,n.opacity??1,y9(s)),t.opacityExit=Ft(e.opacity??1,0,w9(s))):r&&(t.opacity=Ft(e.opacity??1,n.opacity??1,s));for(let c=0;c<g9;c++){const l=`border${H6[c]}Radius`;let f=r4(e,l),d=r4(n,l);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||i4(f)===i4(d)?(t[l]=Math.max(Ft(s4(f),s4(d),s),0),(Lr.test(d)||Lr.test(f))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=Ft(e.rotate||0,n.rotate||0,s))}function r4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const y9=F6(0,.5,D8),w9=F6(.5,.95,Mi);function F6(t,e,n){return s=>s<t?0:s>e?1:n(mh(t,e,s))}function a4(t,e){t.min=e.min,t.max=e.max}function vi(t,e){a4(t.x,e.x),a4(t.y,e.y)}function o4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function c4(t,e,n,s,i){return t-=e,t=J0(t,1/n,s),i!==void 0&&(t=J0(t,1/i,s)),t}function v9(t,e=0,n=1,s=.5,i,r=t,c=t){if(Lr.test(e)&&(e=parseFloat(e),e=Ft(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=Ft(r.min,r.max,s);t===r&&(l-=e),t.min=c4(t.min,e,n,l,i),t.max=c4(t.max,e,n,l,i)}function l4(t,e,[n,s,i],r,c){v9(t,e[n],e[s],e[i],e.scale,r,c)}const b9=["x","scaleX","originX"],x9=["y","scaleY","originY"];function u4(t,e,n,s){l4(t.x,e,b9,n?n.x:void 0,s?s.x:void 0),l4(t.y,e,x9,n?n.y:void 0,s?s.y:void 0)}function f4(t){return t.translate===0&&t.scale===1}function V6(t){return f4(t.x)&&f4(t.y)}function d4(t,e){return t.min===e.min&&t.max===e.max}function E9(t,e){return d4(t.x,e.x)&&d4(t.y,e.y)}function h4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function q6(t,e){return h4(t.x,e.x)&&h4(t.y,e.y)}function p4(t){return os(t.x)/os(t.y)}function g4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class S9{constructor(){this.members=[]}add(e){B2(this.members,e),e.scheduleRender()}remove(e){if(j2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C9(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,c=n?.z||0;if((i||r||c)&&(s=`translate3d(${i}px, ${r}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:y,skewY:w}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),g&&(s+=`rotateX(${g}deg) `),m&&(s+=`rotateY(${m}deg) `),y&&(s+=`skewX(${y}deg) `),w&&(s+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,f=t.y.scale*e.y;return(l!==1||f!==1)&&(s+=`scale(${l}, ${f})`),s||"none"}const D1=["","X","Y","Z"],A9=1e3;let N9=0;function O1(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function W6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&W6(s)}function G6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(c={},l=e?.()){this.id=N9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(D9),this.nodes.forEach(R9),this.nodes.forEach(P9),this.nodes.forEach(O9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new h9)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new F2),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const f=this.eventHandlers.get(c);f&&f.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=c6(c)&&!mL(c),this.instance=c;const{layoutId:l,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||l)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{g=window.innerWidth}),t(c,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,h&&h(),h=p9(m,250),R0.hasAnimatedSinceResize&&(R0.hasAnimatedSinceResize=!1,this.nodes.forEach(w4)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||B9,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=d.getProps(),C=!this.targetLayout||!q6(this.targetLayout,y),D=!g&&m;if(this.options.layoutRoot||this.resumeFrom||D||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...nx(w,"layout"),onPlay:v,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,D)}else g||w4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($9),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&W6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:f}=this.options;if(l===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(y4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(M9),this.nodes.forEach(T9),this.nodes.forEach(I9)):this.nodes.forEach(y4),this.clearAllSnapshots();const l=_s.now();$n.delta=_a(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,w1.update.process($n),w1.preRender.process($n),w1.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ix.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_9),this.sharedNodes.forEach(U9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!os(this.snapshot.measuredBox.x)&&!os(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!V6(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;c&&this.instance&&(l||Rc(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let f=this.removeElementScroll(l);return c&&(f=this.removeTransform(f)),j9(f),{animationId:this.root.animationId,measuredBox:l,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Xt();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(z9))){const{scroll:d}=this.root;d&&(Mu(l.x,d.offset.x),Mu(l.y,d.offset.y))}return l}removeElementScroll(c){const l=Xt();if(vi(l,c),this.scroll?.wasRoot)return l;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&vi(l,c),Mu(l.x,h.offset.x),Mu(l.y,h.offset.y))}return l}applyTransform(c,l=!1){const f=Xt();vi(f,c);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ru(f,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rc(h.latestValues)&&Ru(f,h.latestValues)}return Rc(this.latestValues)&&Ru(f,this.latestValues),f}removeTransform(c){const l=Xt();vi(l,c);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Rc(d.latestValues))continue;ub(d.latestValues)&&d.updateSnapshot();const h=Xt(),g=d.measurePageBox();vi(h,g),u4(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Rc(this.latestValues)&&u4(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==l;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Jd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xt(),this.targetWithTransforms=Xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),A6(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Jd(this.relativeTargetOrigin,this.target,m.target),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ub(this.parent.latestValues)||C6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(f=!1),f)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;vi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;rk(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Xt());const{target:y}=c;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(o4(this.prevProjectionDelta.x,this.projectionDelta.x),o4(this.prevProjectionDelta.y,this.projectionDelta.y)),Zd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!g4(this.projectionDelta.x,this.prevProjectionDelta.x)||!g4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pu(),this.projectionDelta=Pu(),this.projectionDeltaWithTransform=Pu()}setAnimationOrigin(c,l=!1){const f=this.snapshot,d=f?f.latestValues:{},h={...this.latestValues},g=Pu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Xt(),y=f?f.source:void 0,w=this.layout?this.layout.source:void 0,v=y!==w,x=this.getStack(),C=!x||x.members.length<=1,D=!!(v&&!C&&this.options.crossfade===!0&&!this.path.some(k9));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const S=I/1e3;v4(g.x,c.x,S),v4(g.y,c.y,S),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L9(this.relativeTarget,this.relativeTargetOrigin,m,S),N&&E9(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Xt()),vi(N,this.relativeTarget)),v&&(this.animationValues=h,m9(h,d,this.latestValues,S,D,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Wo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{R0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wu(0)),this.currentAnimation=f9(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(A9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:f,layout:d,latestValues:h}=c;if(!(!l||!f||!d)){if(this!==c&&this.layout&&d&&K6(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Xt();const g=os(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+g;const m=os(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+m}vi(l,f),Ru(l,h),Zd(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new S9),this.sharedNodes.get(c).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(l=!0),!l)return;const d={};f.z&&O1("z",c,d,this.animationValues);for(let h=0;h<D1.length;h++)O1(`rotate${D1[h]}`,c,d,this.animationValues),O1(`skew${D1[h]}`,c,d,this.animationValues);c.render();for(const h in d)c.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=M0(l?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=M0(l?.pointerEvents)||""),this.hasProjected&&!Rc(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=C9(this.projectionDeltaWithTransform,this.treeScale,h);f&&(g=f(h,g)),c.transform=g;const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in bh){if(h[w]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:C}=bh[w],D=g==="none"?h[w]:v(h[w],d);if(x){const N=x.length;for(let I=0;I<N;I++)c[x[I]]=D}else C?this.options.visualElement.renderState.vars[w]=D:c[w]=D}this.options.layoutId&&(c.pointerEvents=d===this?M0(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(m4),this.root.sharedNodes.clear()}}}function T9(t){t.updateLayout()}function I9(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,r=e.source!==t.layout.source;i==="size"?Ni(h=>{const g=r?e.measuredBox[h]:e.layoutBox[h],m=os(g);g.min=n[h].min,g.max=g.min+m}):K6(i,e.layoutBox,n)&&Ni(h=>{const g=r?e.measuredBox[h]:e.layoutBox[h],m=os(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const c=Pu();Zd(c,n,e.layoutBox);const l=Pu();r?Zd(l,t.applyTransform(s,!0),e.measuredBox):Zd(l,n,e.layoutBox);const f=!V6(c);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const y=Xt();Jd(y,e.layoutBox,g.layoutBox);const w=Xt();Jd(w,n,m.layoutBox),q6(y,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function D9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function O9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _9(t){t.clearSnapshot()}function m4(t){t.clearMeasurements()}function y4(t){t.isLayoutDirty=!1}function M9(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function w4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function R9(t){t.resolveTargetDelta()}function P9(t){t.calcProjection()}function $9(t){t.resetSkewAndRotation()}function U9(t){t.removeLeadSnapshot()}function v4(t,e,n){t.translate=Ft(e.translate,0,n),t.scale=Ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function b4(t,e,n,s){t.min=Ft(e.min,n.min,s),t.max=Ft(e.max,n.max,s)}function L9(t,e,n,s){b4(t.x,e.x,n.x,s),b4(t.y,e.y,n.y,s)}function k9(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B9={duration:.45,ease:[.4,0,.1,1]},x4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),E4=x4("applewebkit/")&&!x4("chrome/")?Math.round:Mi;function S4(t){t.min=E4(t.min),t.max=E4(t.max)}function j9(t){S4(t.x),S4(t.y)}function K6(t,e,n){return t==="position"||t==="preserve-aspect"&&!Wk(p4(e),p4(n),.2)}function z9(t){return t!==t.root&&t.scroll?.wasRoot}const H9=G6({attachResizeListener:(t,e)=>xh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_1={current:void 0},Y6=G6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_1.current){const t=new H9({});t.mount(window),t.setOptions({layoutScroll:!0}),_1.current=t}return _1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),F9={pan:{Feature:o9},drag:{Feature:a9,ProjectionNode:Y6,MeasureLayout:z6}};function C4(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&Ht.postRender(()=>r(e,cp(e)))}class V9 extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=fL(e,(n,s)=>(C4(this.node,s,"Start"),i=>C4(this.node,i,"End"))))}unmount(){}}class q9 extends Xo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rp(xh(this.node.current,"focus",()=>this.onFocus()),xh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function A4(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&Ht.postRender(()=>r(e,cp(e)))}class W9 extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=gL(e,(n,s)=>(A4(this.node,s,"Start"),(i,{success:r})=>A4(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yb=new WeakMap,M1=new WeakMap,G9=t=>{const e=yb.get(t.target);e&&e(t)},K9=t=>{t.forEach(G9)};function Y9({root:t,...e}){const n=t||document;M1.has(n)||M1.set(n,{});const s=M1.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(K9,{root:t,...e})),s[i]}function X9(t,e,n){const s=Y9(e);return yb.set(t,n),s.observe(t),()=>{yb.delete(t),s.unobserve(t)}}const Q9={some:0,all:1};class Z9 extends Xo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,c={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Q9[i]},l=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(f)};return X9(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(J9(e,n))&&this.startObserver()}unmount(){}}function J9({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const e7={inView:{Feature:Z9},tap:{Feature:W9},focus:{Feature:q9},hover:{Feature:V9}},t7={layout:{ProjectionNode:Y6,MeasureLayout:z6}},n7={...jk,...e7,...F9,...t7},Ae=nk(n7,gk);var X6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N4=Ta.createContext&&Ta.createContext(X6),s7=["attr","size","title"];function i7(t,e){if(t==null)return{};var n=r7(t,e),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function r7(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},em.apply(this,arguments)}function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(s){a7(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function a7(t,e,n){return e=o7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o7(t){var e=c7(t,"string");return typeof e=="symbol"?e:e+""}function c7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q6(t){return t&&t.map((e,n)=>Ta.createElement(e.tag,tm({key:n},e.attr),Q6(e.child)))}function us(t){return e=>Ta.createElement(l7,em({attr:tm({},t.attr)},e),Q6(t.child))}function l7(t){var e=n=>{var{attr:s,size:i,title:r}=t,c=i7(t,s7),l=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),Ta.createElement("svg",em({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,c,{className:f,style:tm(tm({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&Ta.createElement("title",null,r),t.children)};return N4!==void 0?Ta.createElement(N4.Consumer,null,n=>e(n)):e(X6)}function I4(t){return us({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function Z6(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.5 88.5l-52 52L415 167c9.4 9.4 9.4 24.6 0 33.9l-17.4 17.4c11.8 26.1 18.4 55.1 18.4 85.6 0 114.9-93.1 208-208 208S0 418.9 0 304 93.1 96 208 96c30.5 0 59.5 6.6 85.6 18.4L311 97c9.4-9.4 24.6-9.4 33.9 0l26.5 26.5 52-52 17.1 17zM500 60h-24c-6.6 0-12 5.4-12 12s5.4 12 12 12h24c6.6 0 12-5.4 12-12s-5.4-12-12-12zM440 0c-6.6 0-12 5.4-12 12v24c0 6.6 5.4 12 12 12s12-5.4 12-12V12c0-6.6-5.4-12-12-12zm33.9 55l17-17c4.7-4.7 4.7-12.3 0-17-4.7-4.7-12.3-4.7-17 0l-17 17c-4.7 4.7-4.7 12.3 0 17 4.8 4.7 12.4 4.7 17 0zm-67.8 0c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17zm67.8 34c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17zM112 272c0-35.3 28.7-64 64-64 8.8 0 16-7.2 16-16s-7.2-16-16-16c-52.9 0-96 43.1-96 96 0 8.8 7.2 16 16 16s16-7.2 16-16z"},child:[]}]})(t)}function _m(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(t)}function Kg(t){return us({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(t)}function J6(t){return us({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function eD(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function u7(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function f7(t){return us({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function d7(t){return us({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function h7(t){return us({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}function p7(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function mx(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M258.396 21.375l-17.503 64.1c-1.133 2.452-1.782 5.172-1.782 8.05 0 10.634 8.62 19.256 19.255 19.256 10.634 0 19.256-8.62 19.256-19.255 0-.72-.045-1.426-.122-2.125h.022l-.05-.18c-.23-1.917-.737-3.746-1.488-5.45l-17.586-64.395zm118.21 31.494l-46.21 45.77c-6.03 3.254-10.126 9.626-10.126 16.956 0 10.633 8.622 19.254 19.255 19.254.668 0 1.327-.034 1.977-.1 7.608 5.175 14.85 11.125 21.6 17.875 57.872 57.872 57.87 151.418 0 209.29-6.75 6.747-13.99 12.694-21.594 17.868-.65-.066-1.308-.1-1.975-.1-10.634 0-19.256 8.623-19.256 19.256 0 7.006 3.757 13.12 9.352 16.49l46.694 46.252-18.545-70.55c6.468-4.81 12.67-10.137 18.536-16.003l6.608-6.61-.334-.332c3.252-3.637 6.305-7.388 9.183-11.23l71.057 18.68-51.63-52.126c6.54-15.08 10.757-30.926 12.636-46.996l70.61-19.282-70.56-19.267c-1.82-15.925-5.937-31.633-12.343-46.59l51.234-51.727-70.318 18.483c-4.842-6.536-10.22-12.8-16.144-18.723-5.794-5.794-11.916-11.063-18.298-15.824l18.587-70.717zm-236.307.005l17.112 65.107c.218 1.76.662 3.45 1.322 5.032l.153.582c-6.38 4.76-12.498 10.023-18.29 15.814-5.92 5.92-11.294 12.18-16.136 18.715L54.024 139.61l51.31 51.802c-6.41 14.945-10.535 30.64-12.376 46.553l-70.562 19.27L92.95 276.5c1.856 16.108 6.06 31.994 12.595 47.105l-51.574 52.07 70.952-18.648c4.722 6.312 9.94 12.368 15.676 18.102 5.815 5.814 11.96 11.102 18.367 15.876-1.004 2.215-1.613 4.646-1.707 7.213l-16.678 63.456 48.91-48.447-.037-.08c3.86-3.52 6.297-8.575 6.297-14.21 0-10.634-8.622-19.256-19.256-19.256-.395 0-.786.015-1.176.04-7.573-5.16-14.783-11.088-21.506-17.81-57.872-57.872-57.872-151.417 0-209.29 6.725-6.723 13.938-12.65 21.514-17.81.39.022.782.036 1.178.036 10.634 0 19.254-8.62 19.254-19.254 0-6.22-2.963-11.736-7.54-15.256L140.3 52.875zm127.436 89.87v49.02l33.602 19.292 46.18-25.045-79.782-43.268zm-18.69.312l-79.722 42.957 46.31 24.955 33.413-19.062v-48.85zM159.9 202.164v114.012l46.346-24.975v-64.063L159.9 202.164zm196.985.027l-46.342 25.134v63.7l46.342 25.136V202.19zm-98.367 5.83l-33.584 19.158v64.285l33.584 19.162 33.336-19.145v-64.318l-33.336-19.14zm43.082 99.416l-33.864 19.445v47.056l78.24-42.432-44.376-24.068zm-86.24.084l-44.495 23.976 78.182 42.127v-46.885L215.36 307.52zm43.005 94.234c-10.634 0-19.254 8.622-19.254 19.256 0 2.74.582 5.342 1.615 7.703l17.67 64.713 17.787-65.12c.57-1.39.965-2.86 1.197-4.388l.06-.23h-.026c.122-.878.207-1.767.207-2.678 0-10.634-8.62-19.256-19.255-19.256z"},child:[]}]})(t)}function tD(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 16c48 96 24 120 72 168 0 0 44.864 0 69.53-21.688A135.765 135.765 0 0 0 120.25 256a135.765 135.765 0 0 0 271.5 0 135.765 135.765 0 0 0-36.375-92.906C380.22 183.997 424 184 424 184c48-48 24-72 72-168-96 48-120 24-168 72 0 0 .004 44.6 21.5 69.313a135.765 135.765 0 0 0-186.72-.344C183.987 132.19 184 88 184 88c-48-48-72-24-168-72zm72 312c-48 48-24 72-72 168 96-48 120-24 168-72 0 0 0-48-24-72s-72-24-72-24zm336 0s-48 0-72 24-24 72-24 72c48 48 72 24 168 72-48-96-24-120-72-168z"},child:[]}]})(t)}function wb(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M227.4 34.7c-10.1 0-20.2.2-30.2.5l6.1 65.6-61.1-62.5c-31.3 2.5-62.5 6.6-93.8 12.5l34.2 28.4-48-.6c35.1 100.2 6.9 182.6-.3 292.1L130 476.5c10-1.3 19.9-2.4 29.6-3.3l21.5-42.2 18.6 28.8 41.5-33.5.8 43c82.9-.2 157.7 9.1 235.7 7.9-28.2-73-31.2-143.6-31.9-209.2l-33.3-19.1 32.7-33.9c-.4-21.3-1.3-42-3.6-61.9l-57.4.7 50.2-41.7c-3.8-15.5-9-30.4-16.1-44.7l-29.5-23.9C335 38 281.2 34.6 227.4 34.7zm58.7 37c10.6 24.75 21.1 49.5 31.7 74.3 7.5-10.5 14.9-21 22.4-31.5 16 27.2 32 54.3 48 81.5l-16.2 9.5-33.3-56.7-42.5 59.4-15.2-10.9 24-33.5-21.9-51.5-24.6 40.1 12 22.6-16.5 8.8-18.3-34.5-24.8 58.2-17.2-7.4 32.5-76.2 7.7-18c4.8 9.2 9.6 18.3 14.5 27.4 12.5-20.6 25.1-41.11 37.7-61.6zM91.2 128c6.72 1.6 13.4 3.4 19.2 5.3-2.1 5.9-4.1 11.8-6.2 17.6-5.79-1.6-11.72-3.4-16.9-4.7 1.39-6 2.62-12.1 3.9-18.2zm37.9 13.4c6.3 3.8 12 7.2 17 12.8L132.6 167c-4-3.7-8.6-7-12.8-9.4zm28.7 32.3c2.1 7.4 2.1 15.7 1.6 22.5l-18.5-2.4c.1-5.1.3-10-1-14.5zm-21.2 35.7l17.2 7.1c-3.3 6.6-5.1 12.7-8.6 17.8l-16.3-9c2.6-5.4 5.6-10.8 7.7-15.9zm-16.5 34.1l17.7 6.1c-1.5 5.4-3 11.2-3.6 16.2l-18.6-2c1.3-7.5 2.1-14 4.5-20.3zm207.8 17.4c8.5 1 14.6 3 21.7 7.1l-9.8 16c-4.1-2.8-9.4-3.8-13.5-4.5zm-21.2 1.5c1.1 6.1 2.5 12.2 3.9 18.3-5.9 1.3-11.7 3.3-16.5 5.1l-6.8-17.4c6.7-2.4 13.5-4.7 19.4-6zm-37.9 15.9l11 15.1c-5.6 4-11.8 7.8-16.8 10.6l-8.9-16.4c5.1-2.9 10.6-6.3 14.7-9.3zM135.3 281c1.5 4.7 4.2 9.2 6.9 12.1l-13.8 12.6c-5.5-5.7-9.5-13.5-11.2-20.1zm230.3 3.3c3.5 6.4 6.8 12.7 8.7 19.1l-17.8 5.6c-2-5.4-4.3-10.8-6.8-14.8zm-127.4 10.9l6.9 17.3c-6.4 2.7-12.9 4.8-18.6 6.5l-5-18c5.9-1.6 11.3-3.8 16.7-5.8zm-83.8 6.2c5.3 1.7 10.8 3.4 15.7 4.2-1.2 6.1-2 12.3-2.8 18.5-7-1-14.5-3.3-20.5-5.7zm50 3.5l2.8 18.5c-7.2 1.3-13.4 1.6-19.8 1.9l-.4-18.7c5.9-.2 11.6-.8 17.4-1.7zm174.5 18c1 6.4 1.6 12.9 2.2 19.3l-18.7 1.5c-.4-6-.9-11.9-2-17.8zm-67.6 30.8c18.9 3.5 44.9 16.2 68.9 33.9 7.4-9.9 14.4-20.4 21.3-31.1l30.1 12.9c-4.7 12.3-15 25.6-28.6 37.2 17 16.2 30.9 34.5 37 53-13.8-18.1-31.1-31.8-50.3-42.8-23.4 15.8-52.7 25.9-79.6 20.4 22.9-4.4 40.6-16.6 55.8-32.6-16.5-7.5-33.8-13.9-51.3-20.1z"},child:[]}]})(t)}function yx(t){return us({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.156 21.625c-45.605 0-86.876 2.852-117.22 7.563-15.17 2.355-27.554 5.11-36.874 8.53-4.66 1.71-8.568 3.515-11.968 6.094-3.238 2.457-6.65 6.36-6.97 11.75h-.75c0 10.08.362 20.022 1.064 29.813H57.53c-.12-7.952.003-15.922.376-23.875l-26.812-6.28C22.55 161.892 64.1 265.716 140.564 339.655l15.655-29.594c-4.198-3.477-8.25-7.063-12.157-10.75 5.846-6.112 12.293-11.76 19.28-16.843 13.468 13.172 28.182 23.565 43.813 30.655 22.114 17.744 8.053 29.368-23.5 36.25 58.863 10.6 38.948 62.267-14.125 92.313-2.14.27-4.256.523-6.28.812-12.047 1.718-21.876 3.71-29.406 6.25-3.765 1.27-6.958 2.6-9.906 4.656-2.95 2.055-6.626 5.705-6.626 11.406 0 5.702 3.677 9.32 6.626 11.375 2.948 2.055 6.14 3.387 9.906 4.657 7.53 2.54 17.36 4.532 29.406 6.25 24.094 3.436 56.784 5.53 92.906 5.53 36.123 0 68.812-2.094 92.906-5.53 12.048-1.718 21.877-3.71 29.407-6.25 3.764-1.27 6.957-2.602 9.905-4.656 2.948-2.055 6.625-5.674 6.625-11.375 0-5.702-3.677-9.352-6.625-11.407-2.948-2.055-6.14-3.387-9.906-4.656-7.53-2.54-17.36-4.532-29.408-6.25-2.013-.287-4.12-.544-6.25-.813-53.076-30.045-72.99-81.71-14.125-92.312-31.568-6.886-45.63-18.522-23.468-36.28 15.74-7.15 30.547-17.655 44.092-30.97 6.648 4.773 12.84 10.038 18.47 15.72-4.105 4.172-8.338 8.257-12.72 12.217l16.188 29.594c79.118-71.955 116.195-179.53 110.03-285l-27.342 7.97c.45 7.61.64 15.19.562 22.75h-25.594c.702-9.792 1.063-19.735 1.063-29.814h-.75c-.323-5.39-3.763-9.293-7-11.75-3.402-2.58-7.31-4.383-11.97-6.093-9.32-3.422-21.704-6.177-36.875-8.532-30.342-4.71-71.613-7.563-117.22-7.563zm0 18.688c44.822 0 85.426 2.854 114.344 7.343 14.46 2.245 26.06 4.932 33.313 7.594 1.04.382 1.775.75 2.625 1.125-.85.375-1.58.742-2.625 1.125-7.252 2.662-18.854 5.38-33.313 7.625-28.918 4.49-69.522 7.344-114.344 7.344-44.82 0-85.425-2.855-114.344-7.345-14.46-2.245-26.06-4.963-33.312-7.625-1.05-.386-1.77-.748-2.625-1.125.853-.376 1.577-.74 2.625-1.125 7.252-2.662 18.853-5.35 33.313-7.594 28.918-4.49 69.522-7.343 114.343-7.343zm-197.25 71.874H86.25c8.057 57.878 28.23 108.83 56.188 146.25-6.974 5.74-13.407 11.968-19.188 18.688-38.648-46.456-59.042-104.647-64.344-164.938zm367.188 0h27C447.51 171.82 425.336 228.34 388.03 275c-5.44-6.055-11.406-11.73-17.842-16.97 27.81-37.38 47.873-88.175 55.906-145.842z"},child:[]}]})(t)}const nD={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(nD);class g7 extends Error{constructor(e){super();let n=e.message,s=`Error Code: ${e.code}`,i=this.stack;if(i)s+=`Stack Trace:
${i}`;else try{throw new Error}catch(r){i=r.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${s}`,this.message=n,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class wx extends g7{constructor(e){super({code:nD.INVALID_STATE,message:e}),this.message=e,this.name="NoSessionDataError"}}function m7(t,e){return xx(vx(t),e)}function vx(t){if(typeof t=="bigint")return t;if(typeof t=="string")return BigInt(t);if(typeof t=="number"){if(!Number.isInteger(t))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(t>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(t)}if(S7(t,Uint8Array))return BigInt(`0x${lp(t)}`);throw new TypeError("intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.")}function y7(t){return/^0x/i.test(t)?t.slice(2):t}function bx(t,e=8){return(typeof t=="bigint"?t:vx(t)).toString(16).padStart(e*2,"0")}function xx(t,e=16){const n=bx(t,e);return tl(n)}function w7(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}const v7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lp(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const n of t)e+=v7[n];return e}function tl(t){if(typeof t!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof t}`);t=y7(t),t=t.length%2?`0${t}`:t;const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=n*2,i=t.slice(s,s+2),r=Number.parseInt(i,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");e[n]=r}return e}function Mm(t){return new TextEncoder().encode(t)}function b7(t){return new TextDecoder().decode(t)}function x7(t){const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n)&255);return new Uint8Array(e)}function E7(t){return!Number.isInteger(t)||t<0||t>255}function D4(t){if(t.some(E7))throw new Error("Some values are invalid bytes.");return new Uint8Array(t)}function Ex(...t){if(!t.every(s=>s instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}function ka(t){return Ex(...t.map(e=>typeof e=="number"?D4([e]):e instanceof Array?D4(e):e))}function S7(t,e){return t instanceof e||t?.constructor?.name?.toLowerCase()===e.name}function Rm(t,e,n=0){return t[n+3]=e,e>>>=8,t[n+2]=e,e>>>=8,t[n+1]=e,e>>>=8,t[n]=e,t}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function C7(t,...e){if(!sD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function iD(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Eh(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Sx(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function vb(t){if(!Array.isArray(t))throw new Error("array expected")}function nm(t,e){if(!iD(!0,e))throw new Error(`${t}: array of strings expected`)}function A7(t,e){if(!iD(!1,e))throw new Error(`${t}: array of numbers expected`)}function rD(...t){const e=r=>r,n=(r,c)=>l=>r(c(l)),s=t.map(r=>r.encode).reduceRight(n,e),i=t.map(r=>r.decode).reduce(n,e);return{encode:s,decode:i}}function aD(t){const e=typeof t=="string"?t.split(""):t,n=e.length;nm("alphabet",e);const s=new Map(e.map((i,r)=>[i,r]));return{encode:i=>(vb(i),i.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:i=>(vb(i),i.map(r=>{Eh("alphabet.decode",r);const c=s.get(r);if(c===void 0)throw new Error(`Unknown letter: "${r}". Allowed: ${t}`);return c}))}}function oD(t=""){return Eh("join",t),{encode:e=>(nm("join.decode",e),e.join(t)),decode:e=>(Eh("join.decode",e),e.split(t))}}function cD(t,e="="){return Sx(t),Eh("padding",e),{encode(n){for(nm("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){nm("padding.decode",n);let s=n.length;if(s*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;s>0&&n[s-1]===e;s--)if((s-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,s)}}}const lD=(t,e)=>e===0?t:lD(e,t%e),sm=(t,e)=>t+(e-lD(t,e)),R1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function O4(t,e,n,s){if(vb(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(sm(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${sm(e,n)}`);let i=0,r=0;const c=R1[e],l=R1[n]-1,f=[];for(const d of t){if(Sx(d),d>=c)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(i=i<<e|d,r+e>32)throw new Error(`convertRadix2: carry overflow pos=${r} from=${e}`);for(r+=e;r>=n;r-=n)f.push((i>>r-n&l)>>>0);const h=R1[r];if(h===void 0)throw new Error("invalid carry");i&=h-1}if(i=i<<n-r&l,!s&&r>=e)throw new Error("Excess padding");if(!s&&i>0)throw new Error(`Non-zero padding: ${i}`);return s&&r>0&&f.push(i>>>0),f}function uD(t,e=!1){if(Sx(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(sm(8,t)>32||sm(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!sD(n))throw new Error("radix2.encode input should be Uint8Array");return O4(Array.from(n),8,t,!e)},decode:n=>(A7("radix2.decode",n),Uint8Array.from(O4(n,t,8,e)))}}const N7=rD(uD(5),aD("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),cD(5),oD("")),T7=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",I7=(t,e)=>{Eh("base64",t);const n=/^[A-Za-z0-9=+/]+$/,s="base64";if(t.length>0&&!n.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:s,lastChunkHandling:"strict"})},fD=T7?{encode(t){return C7(t),t.toBase64()},decode(t){return I7(t)}}:rD(uD(6),aD("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),cD(6),oD("")),Cx="STX_PROVIDER",D7=()=>typeof window>"u"?null:window.localStorage.getItem(Cx),O7=t=>{typeof window<"u"&&window.localStorage.setItem(Cx,t)},_7=()=>{typeof window<"u"&&window.localStorage.removeItem(Cx)},M7=()=>{if(typeof window>"u")return[];const t=window.webbtc_stx_providers||[],e=window.wbip_providers||[];return[...t,...e]},R7=(t=[])=>{if(typeof window>"u")return[];const e=M7(),n=t.filter(s=>e.find(r=>r.id===s.id)?!1:!!Ax(s.id));return e.concat(n)},dD=()=>{const t=D7();return Ax(t)},Ax=t=>t?.split(".").reduce((e,n)=>e?.[n],window),P7="modulepreload",$7=function(t){return"/"+t},_4={},Sh=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");i=f(n.map(d=>{if(d=$7(d),d in _4)return;_4[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":P7,h||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return i.then(c=>{for(const l of c||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})},U7="connect-ui",im={hydratedSelectorName:"hydrated",lazyLoad:!0,updatable:!0,watchCallback:!1};var L7=Object.defineProperty,k7=(t,e)=>{for(var n in e)L7(t,n,{get:e[n],enumerable:!0})},B7="http://www.w3.org/2000/svg",j7="http://www.w3.org/1999/xhtml",ir=t=>{if(t.__stencil__getHostRef)return t.__stencil__getHostRef()},$ce=(t,e)=>{t.__stencil__getHostRef=()=>e,e.$lazyInstance$=t},z7=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};n.$onReadyPromise$=new Promise(i=>n.$onReadyResolve$=i),t["s-p"]=[],t["s-rc"]=[];const s=n;return t.__stencil__getHostRef=()=>s,s},M4=(t,e)=>e in t,Yu=(t,e)=>(0,console.error)(t,e),P1=new Map,H7=(t,e,n)=>{const s=t.$tagName$.replace(/-/g,"_"),i=t.$lazyBundleId$;if(!i)return;const r=P1.get(i);if(r)return r[s];{const c=l=>(P1.set(i,l),l[s]);switch(i){case"connect-modal":return Sh(()=>import("./connect-modal.entry-BXUcNvnZ.js"),[]).then(c,Yu)}}return Sh(()=>import(`./${i}.entry.js`),[]).then(c=>(P1.set(i,c),c[s]),c=>{Yu(c,e.$hostElement$)})},rm=new Map,F7="{visibility:hidden}.hydrated{visibility:inherit}",hD="slot-fb{display:contents}slot-fb[hidden]{display:none}",kn=typeof window<"u"?window:{},Un={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,s)=>t.addEventListener(e,n,s),rel:(t,e,n,s)=>t.removeEventListener(e,n,s),ce:(t,e)=>new CustomEvent(t,e)},V7=t=>Promise.resolve(t),Nx=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),bb=Nx?!!kn.document&&Object.getOwnPropertyDescriptor(kn.document.adoptedStyleSheets,"length").writable:!1,xb=!1,R4=[],pD=[],q7=(t,e)=>n=>{t.push(n),xb||(xb=!0,Un.$flags$&4?Tx(Eb):Un.raf(Eb))},P4=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Yu(n)}t.length=0},Eb=()=>{P4(R4),P4(pD),(xb=R4.length>0)&&Un.raf(Eb)},Tx=t=>V7().then(t),W7=q7(pD),Ix=t=>(t=typeof t,t==="object"||t==="function");function gD(t){var e,n,s;return(s=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?s:void 0}var G7=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),K7={};k7(K7,{err:()=>mD,map:()=>Y7,ok:()=>Sb,unwrap:()=>X7,unwrapErr:()=>Q7});var Sb=t=>({isOk:!0,isErr:!1,value:t}),mD=t=>({isOk:!1,isErr:!0,value:t});function Y7(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(s=>Sb(s)):Sb(n)}if(t.isErr){const n=t.value;return mD(n)}throw"should never get here"}var X7=t=>{if(t.isOk)return t.value;throw t.value},Q7=t=>{if(t.isErr)return t.value;throw t.value};var vd;function Z7(t){var e;const n=this.attachShadow({mode:"open"});vd===void 0&&(vd=(e=void 0)!=null?e:null),vd&&(bb?n.adoptedStyleSheets.push(vd):n.adoptedStyleSheets=[...n.adoptedStyleSheets,vd])}var Ra=(t,e="")=>()=>{},J7=(t,e)=>()=>{},$u=new WeakMap,eB=(t,e,n)=>{let s=rm.get(t);Nx&&n?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,rm.set(t,s)},tB=(t,e,n)=>{var s;const i=yD(e),r=rm.get(i);if(!kn.document)return i;if(t=t.nodeType===11?t:kn.document,r)if(typeof r=="string"){t=t.head||t;let c=$u.get(t),l;if(c||$u.set(t,c=new Set),!c.has(i)){{l=kn.document.createElement("style"),l.innerHTML=r;const f=(s=Un.$nonce$)!=null?s:gD(kn.document);if(f!=null&&l.setAttribute("nonce",f),!(e.$flags$&1))if(t.nodeName==="HEAD"){const d=t.querySelectorAll("link[rel=preconnect]"),h=d.length>0?d[d.length-1].nextSibling:t.querySelector("style");t.insertBefore(l,h?.parentNode===t?h:null)}else if("host"in t)if(Nx){const d=new CSSStyleSheet;d.replaceSync(r),bb?t.adoptedStyleSheets.unshift(d):t.adoptedStyleSheets=[d,...t.adoptedStyleSheets]}else{const d=t.querySelector("style");d?d.innerHTML=r+d.innerHTML:t.prepend(l)}else t.append(l);e.$flags$&1&&t.insertBefore(l,null)}e.$flags$&4&&(l.innerHTML+=hD),c&&c.add(i)}}else t.adoptedStyleSheets.includes(r)||(bb?t.adoptedStyleSheets.push(r):t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return i},nB=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,s=e.$flags$,i=Ra("attachStyles",e.$tagName$),r=tB(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);s&10&&(n["s-sc"]=r,n.classList.add(r+"-h")),i()},yD=(t,e)=>"sc-"+t.$tagName$,sB=(t,e,...n)=>{let s=null,i=null,r=!1,c=!1;const l=[],f=h=>{for(let g=0;g<h.length;g++)s=h[g],Array.isArray(s)?f(s):s!=null&&typeof s!="boolean"&&((r=typeof t!="function"&&!Ix(s))&&(s=String(s)),r&&c?l[l.length-1].$text$+=s:l.push(r?Cb(null,s):s),c=r)};if(f(n),e){e.key&&(i=e.key);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(g=>h[g]).join(" "))}}const d=Cb(t,null);return d.$attrs$=e,l.length>0&&(d.$children$=l),d.$key$=i,d},Cb=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n},iB={},rB=t=>t&&t.$tag$===iB,Dx=t=>{const e=G7(t);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${e}))(${e}\\b)`,"g")};Dx("::slotted");Dx(":host");Dx(":host-context");var Ab=(t,e,n)=>{if(typeof t=="string"&&(e&16||e&8)&&(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")))try{return JSON.parse(t)}catch{}return t!=null&&!Ix(t),t},Uce=t=>{var e;return(e=ir(t))==null?void 0:e.$hostElement$},aB=(t,e,n)=>{const s=Un.ce(e,n);return t.dispatchEvent(s),s},$4=(t,e,n,s,i,r,c)=>{if(n===s)return;let l=M4(t,e),f=e.toLowerCase();if(e==="class"){const d=t.classList,h=U4(n);let g=U4(s);d.remove(...h.filter(m=>m&&!g.includes(m))),d.add(...g.filter(m=>m&&!h.includes(m)))}else if(e!=="key")if(!l&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):M4(kn,f)?e=f.slice(2):e=f[2]+e.slice(3),n||s){const d=e.endsWith(wD);e=e.replace(cB,""),n&&Un.rel(t,e,n,d),s&&Un.ael(t,e,s,d)}}else{const d=Ix(s);if((l||d&&s!==null)&&!i)try{if(t.tagName.includes("-"))t[e]!==s&&(t[e]=s);else{const h=s??"";e==="list"?l=!1:(n==null||t[e]!=h)&&(typeof t.__lookupSetter__(e)=="function"?t[e]=h:t.setAttribute(e,h))}}catch{}s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&t.removeAttribute(e):(!l||r&4||i)&&!d&&t.nodeType===1&&(s=s===!0?"":s,t.setAttribute(e,s))}},oB=/\s/,U4=t=>(typeof t=="object"&&t&&"baseVal"in t&&(t=t.baseVal),!t||typeof t!="string"?[]:t.split(oB)),wD="Capture",cB=new RegExp(wD+"$"),vD=(t,e,n,s)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||{},c=e.$attrs$||{};for(const l of L4(Object.keys(r)))l in c||$4(i,l,r[l],void 0,n,e.$flags$);for(const l of L4(Object.keys(c)))$4(i,l,r[l],c[l],n,e.$flags$)};function L4(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var Ox,Ks=!1,am=(t,e,n)=>{const s=e.$children$[n];let i=0,r,c;if(s.$text$!==null)r=s.$elm$=kn.document.createTextNode(s.$text$);else{if(Ks||(Ks=s.$tag$==="svg"),!kn.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(r=s.$elm$=kn.document.createElementNS(Ks?B7:j7,s.$tag$),Ks&&s.$tag$==="foreignObject"&&(Ks=!1),vD(null,s,Ks),s.$children$)for(i=0;i<s.$children$.length;++i)c=am(t,s,i),c&&r.appendChild(c);s.$tag$==="svg"?Ks=!1:r.tagName==="foreignObject"&&(Ks=!0)}return r["s-hn"]=Ox,r},bD=(t,e,n,s,i,r)=>{let c=t,l;for(c.shadowRoot&&c.tagName===Ox&&(c=c.shadowRoot);i<=r;++i)s[i]&&(l=am(null,n,i),l&&(s[i].$elm$=l,P0(c,l,e)))},xD=(t,e,n)=>{for(let s=e;s<=n;++s){const i=t[s];if(i){const r=i.$elm$;r&&r.remove()}}},lB=(t,e,n,s,i=!1)=>{let r=0,c=0,l=0,f=0,d=e.length-1,h=e[0],g=e[d],m=s.length-1,y=s[0],w=s[m],v,x;for(;r<=d&&c<=m;)if(h==null)h=e[++r];else if(g==null)g=e[--d];else if(y==null)y=s[++c];else if(w==null)w=s[--m];else if(Yg(h,y,i))Au(h,y,i),h=e[++r],y=s[++c];else if(Yg(g,w,i))Au(g,w,i),g=e[--d],w=s[--m];else if(Yg(h,w,i))Au(h,w,i),P0(t,h.$elm$,g.$elm$.nextSibling),h=e[++r],w=s[--m];else if(Yg(g,y,i))Au(g,y,i),P0(t,g.$elm$,h.$elm$),g=e[--d],y=s[++c];else{for(l=-1,f=r;f<=d;++f)if(e[f]&&e[f].$key$!==null&&e[f].$key$===y.$key$){l=f;break}l>=0?(x=e[l],x.$tag$!==y.$tag$?v=am(e&&e[c],n,l):(Au(x,y,i),e[l]=void 0,v=x.$elm$),y=s[++c]):(v=am(e&&e[c],n,c),y=s[++c]),v&&P0(h.$elm$.parentNode,v,h.$elm$)}r>d?bD(t,s[m+1]==null?null:s[m+1].$elm$,n,s,c,m):c>m&&xD(e,r,d)},Yg=(t,e,n=!1)=>t.$tag$===e.$tag$?n?(n&&!t.$key$&&e.$key$&&(t.$key$=e.$key$),!0):t.$key$===e.$key$:!1,Au=(t,e,n=!1)=>{const s=e.$elm$=t.$elm$,i=t.$children$,r=e.$children$,c=e.$tag$,l=e.$text$;l===null?(Ks=c==="svg"?!0:c==="foreignObject"?!1:Ks,vD(t,e,Ks),i!==null&&r!==null?lB(s,i,e,r,n):r!==null?(t.$text$!==null&&(s.textContent=""),bD(s,null,e,r,0,r.length-1)):!n&&im.updatable&&i!==null&&xD(i,0,i.length-1),Ks&&c==="svg"&&(Ks=!1)):t.$text$!==l&&(s.data=l)},P0=(t,e,n)=>t?.insertBefore(e,n),uB=(t,e,n=!1)=>{const s=t.$hostElement$,i=t.$vnode$||Cb(null,null),c=rB(e)?e:sB(null,null,e);if(Ox=s.tagName,n&&c.$attrs$)for(const l of Object.keys(c.$attrs$))s.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(c.$attrs$[l]=s[l]);c.$tag$=null,c.$flags$|=4,t.$vnode$=c,c.$elm$=i.$elm$=s.shadowRoot||s,Au(i,c,n)},ED=(t,e)=>{if(e&&!t.$onRenderResolve$&&e["s-p"]){const n=e["s-p"].push(new Promise(s=>t.$onRenderResolve$=()=>{e["s-p"].splice(n-1,1),s()}))}},_x=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}ED(t,t.$ancestorComponent$);const n=()=>fB(t,e);if(e){queueMicrotask(()=>{n()});return}return W7(n)},fB=(t,e)=>{const n=t.$hostElement$,s=Ra("scheduleUpdate",t.$cmpMeta$.$tagName$),i=t.$lazyInstance$;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Ho(i,"componentWillLoad",void 0,n):r=Ho(i,"componentWillUpdate",void 0,n),r=k4(r,()=>Ho(i,"componentWillRender",void 0,n)),s(),k4(r,()=>hB(t,i,e))},k4=(t,e)=>dB(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),dB=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",hB=async(t,e,n)=>{var s;const i=t.$hostElement$,r=Ra("update",t.$cmpMeta$.$tagName$),c=i["s-rc"];n&&nB(t);const l=Ra("render",t.$cmpMeta$.$tagName$);pB(t,e,i,n),c&&(c.map(f=>f()),i["s-rc"]=void 0),l(),r();{const f=(s=i["s-p"])!=null?s:[],d=()=>gB(t);f.length===0?d():(Promise.all(f).then(d),t.$flags$|=4,f.length=0)}},pB=(t,e,n,s)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,uB(t,e,s)}catch(i){Yu(i,t.$hostElement$)}return null},gB=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,s=Ra("postUpdate",e),i=t.$lazyInstance$,r=t.$ancestorComponent$;Ho(i,"componentDidRender",void 0,n),t.$flags$&64?(Ho(i,"componentDidUpdate",void 0,n),s()):(t.$flags$|=64,mB(n),Ho(i,"componentDidLoad",void 0,n),s(),t.$onReadyResolve$(n),r||SD()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&Tx(()=>_x(t,!1)),t.$flags$&=-517},SD=t=>{Tx(()=>aB(kn,"appload",{detail:{namespace:U7}}))},Ho=(t,e,n,s)=>{if(t&&t[e])try{return t[e](n)}catch(i){Yu(i,s)}},mB=t=>{var e;return t.classList.add((e=im.hydratedSelectorName)!=null?e:"hydrated")},yB=(t,e)=>ir(t).$instanceValues$.get(e),$1=(t,e,n,s)=>{const i=ir(t);if(!i)return;if(!i)throw new Error(`Couldn't find host element for "${s.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const r=i.$instanceValues$.get(e),c=i.$flags$,l=i.$lazyInstance$;n=Ab(n,s.$members$[e][0]);const f=Number.isNaN(r)&&Number.isNaN(n),d=n!==r&&!f;if((!(c&8)||r===void 0)&&d&&(i.$instanceValues$.set(e,n),l&&(c&18)===2)){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,r,e)===!1)return;_x(i,!1)}},CD=(t,e,n)=>{var s,i;const r=t.prototype;if(e.$members$||im.watchCallback){const c=Object.entries((s=e.$members$)!=null?s:{});if(c.map(([l,[f]])=>{if(f&31||n&2&&f&32){const{get:d,set:h}=Object.getOwnPropertyDescriptor(r,l)||{};d&&(e.$members$[l][0]|=2048),h&&(e.$members$[l][0]|=4096),(n&1||!d)&&Object.defineProperty(r,l,{get(){{if((e.$members$[l][0]&2048)===0)return yB(this,l);const g=ir(this),m=g?g.$lazyInstance$:r;return m?m[l]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(r,l,{set(g){const m=ir(this);if(m){if(h){const y=f&32?this[l]:m.$hostElement$[l];typeof y>"u"&&m.$instanceValues$.get(l)?g=m.$instanceValues$.get(l):!m.$instanceValues$.get(l)&&y&&m.$instanceValues$.set(l,y),h.apply(this,[Ab(g,f)]),g=f&32?this[l]:m.$hostElement$[l],$1(this,l,g,e);return}{if((n&1)===0||(e.$members$[l][0]&4096)===0){$1(this,l,g,e),n&1&&!m.$lazyInstance$&&m.$onReadyPromise$.then(()=>{e.$members$[l][0]&4096&&m.$lazyInstance$[l]!==m.$instanceValues$.get(l)&&(m.$lazyInstance$[l]=g)});return}const y=()=>{const w=m.$lazyInstance$[l];!m.$instanceValues$.get(l)&&w&&m.$instanceValues$.set(l,w),m.$lazyInstance$[l]=Ab(g,f),$1(this,l,m.$lazyInstance$[l],e)};m.$lazyInstance$?y():m.$onReadyPromise$.then(()=>y())}}}})}}),n&1){const l=new Map;r.attributeChangedCallback=function(f,d,h){Un.jmp(()=>{var g;const m=l.get(f);if(this.hasOwnProperty(m)&&im.lazyLoad)h=this[m],delete this[m];else{if(r.hasOwnProperty(m)&&typeof this[m]=="number"&&this[m]==h)return;if(m==null){const w=ir(this),v=w?.$flags$;if(w&&v&&!(v&8)&&v&128&&h!==d){const x=w.$lazyInstance$,C=(g=e.$watchers$)==null?void 0:g[f];C?.forEach(D=>{x[D]!=null&&x[D].call(x,h,d,f)})}return}}const y=Object.getOwnPropertyDescriptor(r,m);h=h===null&&typeof this[m]=="boolean"?!1:h,h!==this[m]&&(!y.get||y.set)&&(this[m]=h)})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...c.filter(([f,d])=>d[0]&31).map(([f,d])=>{const h=d[1]||f;return l.set(h,f),h})]))}}return t},wB=async(t,e,n,s)=>{let i;if((e.$flags$&32)===0){if(e.$flags$|=32,n.$lazyBundleId$){const f=H7(n,e);if(f&&"then"in f){const h=J7();i=await f,h()}else i=f;if(!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(CD(i,n,2),i.isProxied=!0);const d=Ra("createInstance",n.$tagName$);e.$flags$|=8;try{new i(e)}catch(h){Yu(h,t)}e.$flags$&=-9,d(),Nb(e.$lazyInstance$,t)}else{i=t.constructor;const f=t.localName;customElements.whenDefined(f).then(()=>e.$flags$|=128)}if(i&&i.style){let f;typeof i.style=="string"&&(f=i.style);const d=yD(n);if(!rm.has(d)){const h=Ra("registerStyles",n.$tagName$);eB(d,f,!!(n.$flags$&1)),h()}}}const r=e.$ancestorComponent$,c=()=>_x(e,!0);r&&r["s-rc"]?r["s-rc"].push(c):c()},Nb=(t,e)=>{Ho(t,"connectedCallback",void 0,e)},vB=t=>{if((Un.$flags$&1)===0){const e=ir(t);if(!e)return;const n=e.$cmpMeta$,s=Ra("connectedCallback",n.$tagName$);if(e.$flags$&1)e?.$lazyInstance$?Nb(e.$lazyInstance$,t):e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>Nb(e.$lazyInstance$,t));else{e.$flags$|=1;{let i=t;for(;i=i.parentNode||i.host;)if(i["s-p"]){ED(e,e.$ancestorComponent$=i);break}}n.$members$&&Object.entries(n.$members$).map(([i,[r]])=>{if(r&31&&t.hasOwnProperty(i)){const c=t[i];delete t[i],t[i]=c}}),wB(t,e,n)}s()}},B4=(t,e)=>{Ho(t,"disconnectedCallback",void 0,e||t)},bB=async t=>{if((Un.$flags$&1)===0){const e=ir(t);e?.$lazyInstance$?B4(e.$lazyInstance$,t):e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>B4(e.$lazyInstance$,t))}$u.has(t)&&$u.delete(t),t.shadowRoot&&$u.has(t.shadowRoot)&&$u.delete(t.shadowRoot)},xB=(t,e={})=>{var n;if(!kn.document){console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");return}const s=Ra(),i=[],r=e.exclude||[],c=kn.customElements,l=kn.document.head,f=l.querySelector("meta[charset]"),d=kn.document.createElement("style"),h=[];let g,m=!0;Object.assign(Un,e),Un.$resourcesUrl$=new URL(e.resourcesUrl||"./",kn.document.baseURI).href;let y=!1;if(t.map(w=>{w[1].map(v=>{const x={$flags$:v[0],$tagName$:v[1],$members$:v[2],$listeners$:v[3]};x.$flags$&4&&(y=!0),x.$members$=v[2];const C=x.$tagName$,D=class extends HTMLElement{constructor(N){if(super(N),this.hasRegisteredEventListeners=!1,N=this,z7(N,x),x.$flags$&1){if(!N.shadowRoot)Z7.call(N,x);else if(N.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${x.$tagName$}! Mode is set to ${N.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}connectedCallback(){ir(this)&&(this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),g&&(clearTimeout(g),g=null),m?h.push(this):Un.jmp(()=>vB(this)))}disconnectedCallback(){Un.jmp(()=>bB(this)),Un.raf(()=>{var N;const I=ir(this);if(!I)return;const S=h.findIndex(A=>A===this);S>-1&&h.splice(S,1),((N=I?.$vnode$)==null?void 0:N.$elm$)instanceof Node&&!I.$vnode$.$elm$.isConnected&&delete I.$vnode$.$elm$})}componentOnReady(){var N;return(N=ir(this))==null?void 0:N.$onReadyPromise$}};x.$lazyBundleId$=w[0],!r.includes(C)&&!c.get(C)&&(i.push(C),c.define(C,CD(D,x,1)))})}),i.length>0&&(y&&(d.textContent+=hD),d.textContent+=i.sort()+F7,d.innerHTML.length)){d.setAttribute("data-styles","");const w=(n=Un.$nonce$)!=null?n:gD(kn.document);w!=null&&d.setAttribute("nonce",w),l.insertBefore(d,f?f.nextSibling:l.firstChild)}m=!1,h.length?h.map(w=>w.connectedCallback()):Un.jmp(()=>g=setTimeout(SD,30)),s()};const EB=()=>{},SB=async(t,e)=>{if(!(typeof window>"u"))return await EB(),xB([["connect-modal",[[257,"connect-modal",{defaultProviders:[16,"default-providers"],installedProviders:[16,"installed-providers"],callback:[16],cancelCallback:[16,"cancel-callback"]}]]]],e)};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();const CB=128,AB=128,AD=16;var j4;(function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.VersionedSmartContract=6]="VersionedSmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t[t.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",t[t.TenureChange=7]="TenureChange",t[t.NakamotoCoinbase=8]="NakamotoCoinbase"})(j4||(j4={}));var z4;(function(t){t[t.Clarity1=1]="Clarity1",t[t.Clarity2=2]="Clarity2",t[t.Clarity3=3]="Clarity3"})(z4||(z4={}));var er;(function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"})(er||(er={}));const U1=["onChainOnly","offChainOnly","any"];U1[0]+"",er.OnChainOnly,U1[1]+"",er.OffChainOnly,U1[2]+"",er.Any,er.OnChainOnly+"",er.OnChainOnly,er.OffChainOnly+"",er.OffChainOnly,er.Any+"",er.Any;var om;(function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"})(om||(om={}));var Pr;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(Pr||(Pr={}));var H4;(function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"})(H4||(H4={}));var F4;(function(t){t[t.P2PKH=0]="P2PKH",t[t.P2SH=1]="P2SH",t[t.P2WPKH=2]="P2WPKH",t[t.P2WSH=3]="P2WSH",t[t.P2SHNonSequential=5]="P2SHNonSequential",t[t.P2WSHNonSequential=7]="P2WSHNonSequential"})(F4||(F4={}));var V4;(function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"})(V4||(V4={}));var q4;(function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"})(q4||(q4={}));var W4;(function(t){t[t.Sends=16]="Sends",t[t.DoesNotSend=17]="DoesNotSend"})(W4||(W4={}));var kr;(function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"})(kr||(kr={}));var G4;(function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"})(G4||(G4={}));var K4;(function(t){t[t.BlockFound=0]="BlockFound",t[t.Extended=1]="Extended"})(K4||(K4={}));var Y4;(function(t){t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed"})(Y4||(Y4={}));var X4;(function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther"})(X4||(X4={}));class NB extends Error{constructor(e){super(e),this.message=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class ND extends NB{constructor(e){super(e)}}function Tb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function TB(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function TD(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function IB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tb(t.outputLen),Tb(t.blockLen)}function DB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function OB(t,e){TD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const L1={number:Tb,bool:TB,bytes:TD,hash:IB,exists:DB,output:OB};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Er=(t,e)=>t<<32-e|t>>>e,_B=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_B)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MB(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function ID(t){if(typeof t=="string"&&(t=MB(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let RB=class{clone(){return this._cloneInto()}};function cl(t){const e=s=>t().update(ID(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function PB(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}class Mx extends RB{constructor(e,n,s,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=k1(this.buffer)}update(e){L1.exists(this);const{view:n,buffer:s,blockLen:i}=this;e=ID(e);const r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=k1(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){L1.exists(this),L1.output(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;PB(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=k1(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.length=i,e.pos=l,e.finished=r,e.destroyed=c,i%n&&e.buffer.set(s),e}}const $B=(t,e,n)=>t&e^~t&n,UB=(t,e,n)=>t&e^t&n^e&n,LB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wo=new Uint32Array(64);class DD extends Mx{constructor(){super(64,32,8,!1),this.A=yo[0]|0,this.B=yo[1]|0,this.C=yo[2]|0,this.D=yo[3]|0,this.E=yo[4]|0,this.F=yo[5]|0,this.G=yo[6]|0,this.H=yo[7]|0}get(){const{A:e,B:n,C:s,D:i,E:r,F:c,G:l,H:f}=this;return[e,n,s,i,r,c,l,f]}set(e,n,s,i,r,c,l,f){this.A=e|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=r|0,this.F=c|0,this.G=l|0,this.H=f|0}process(e,n){for(let g=0;g<16;g++,n+=4)wo[g]=e.getUint32(n,!1);for(let g=16;g<64;g++){const m=wo[g-15],y=wo[g-2],w=Er(m,7)^Er(m,18)^m>>>3,v=Er(y,17)^Er(y,19)^y>>>10;wo[g]=v+wo[g-7]+w+wo[g-16]|0}let{A:s,B:i,C:r,D:c,E:l,F:f,G:d,H:h}=this;for(let g=0;g<64;g++){const m=Er(l,6)^Er(l,11)^Er(l,25),y=h+m+$B(l,f,d)+LB[g]+wo[g]|0,v=(Er(s,2)^Er(s,13)^Er(s,22))+UB(s,i,r)|0;h=d,d=f,f=l,l=c+y|0,c=r,r=i,i=s,s=y+v|0}s=s+this.A|0,i=i+this.B|0,r=r+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(s,i,r,c,l,f,d,h)}roundClean(){wo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class kB extends DD{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}cl(()=>new DD);cl(()=>new kB);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const mt=BigInt(0),Qt=BigInt(1),ko=BigInt(2),$0=BigInt(3),Q4=BigInt(8),Nn=Object.freeze({a:mt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Qt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Z4=(t,e)=>(t+e/ko)/e,Xg={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=Nn,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Qt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=n,c=BigInt("0x100000000000000000000000000000000"),l=Z4(r*t,e),f=Z4(-s*t,e);let d=Oe(t-l*n-f*i,e),h=Oe(-l*s-f*r,e);const g=d>c,m=h>c;if(g&&(d=e-d),m&&(h=e-h),d>c||h>c)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:g,k1:d,k2neg:m,k2:h}}},Uu=32,Ib=32,J4=Uu+1,eN=2*Uu+1;function tN(t){const{a:e,b:n}=Nn,s=Oe(t*t),i=Oe(s*t);return Oe(i+e*t+n)}const Qg=Nn.a===mt;function nN(t){if(!(t instanceof gt))throw new TypeError("JacobianPoint expected")}class gt{constructor(e,n,s){this.x=e,this.y=n,this.z=s}static fromAffine(e){if(!(e instanceof En))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(En.ZERO)?gt.ZERO:new gt(e.x,e.y,Qt)}static toAffineBatch(e){const n=FB(e.map(s=>s.z));return e.map((s,i)=>s.toAffine(n[i]))}static normalizeZ(e){return gt.toAffineBatch(e).map(gt.fromAffine)}equals(e){nN(e);const{x:n,y:s,z:i}=this,{x:r,y:c,z:l}=e,f=Oe(i*i),d=Oe(l*l),h=Oe(n*d),g=Oe(r*f),m=Oe(Oe(s*l)*d),y=Oe(Oe(c*i)*f);return h===g&&m===y}negate(){return new gt(this.x,Oe(-this.y),this.z)}double(){const{x:e,y:n,z:s}=this,i=Oe(e*e),r=Oe(n*n),c=Oe(r*r),l=e+r,f=Oe(ko*(Oe(l*l)-i-c)),d=Oe($0*i),h=Oe(d*d),g=Oe(h-ko*f),m=Oe(d*(f-g)-Q4*c),y=Oe(ko*n*s);return new gt(g,m,y)}add(e){nN(e);const{x:n,y:s,z:i}=this,{x:r,y:c,z:l}=e;if(r===mt||c===mt)return this;if(n===mt||s===mt)return e;const f=Oe(i*i),d=Oe(l*l),h=Oe(n*d),g=Oe(r*f),m=Oe(Oe(s*l)*d),y=Oe(Oe(c*i)*f),w=Oe(g-h),v=Oe(y-m);if(w===mt)return v===mt?this.double():gt.ZERO;const x=Oe(w*w),C=Oe(w*x),D=Oe(h*x),N=Oe(v*v-C-ko*D),I=Oe(v*(D-N)-m*C),S=Oe(i*l*w);return new gt(N,I,S)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=gt.ZERO;if(typeof e=="bigint"&&e===mt)return n;let s=aN(e);if(s===Qt)return this;if(!Qg){let g=n,m=this;for(;s>mt;)s&Qt&&(g=g.add(m)),m=m.double(),s>>=Qt;return g}let{k1neg:i,k1:r,k2neg:c,k2:l}=Xg.splitScalar(s),f=n,d=n,h=this;for(;r>mt||l>mt;)r&Qt&&(f=f.add(h)),l&Qt&&(d=d.add(h)),h=h.double(),r>>=Qt,l>>=Qt;return i&&(f=f.negate()),c&&(d=d.negate()),d=new gt(Oe(d.x*Xg.beta),d.y,d.z),f.add(d)}precomputeWindow(e){const n=Qg?128/e+1:256/e+1,s=[];let i=this,r=i;for(let c=0;c<n;c++){r=i,s.push(r);for(let l=1;l<2**(e-1);l++)r=r.add(i),s.push(r);i=r.double()}return s}wNAF(e,n){!n&&this.equals(gt.BASE)&&(n=En.BASE);const s=n&&n._WINDOW_SIZE||1;if(256%s)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=n&&Db.get(n);i||(i=this.precomputeWindow(s),n&&s!==1&&(i=gt.normalizeZ(i),Db.set(n,i)));let r=gt.ZERO,c=gt.BASE;const l=1+(Qg?128/s:256/s),f=2**(s-1),d=BigInt(2**s-1),h=2**s,g=BigInt(s);for(let m=0;m<l;m++){const y=m*f;let w=Number(e&d);e>>=g,w>f&&(w-=h,e+=Qt);const v=y,x=y+Math.abs(w)-1,C=m%2!==0,D=w<0;w===0?c=c.add(Zg(C,i[v])):r=r.add(Zg(D,i[x]))}return{p:r,f:c}}multiply(e,n){let s=aN(e),i,r;if(Qg){const{k1neg:c,k1:l,k2neg:f,k2:d}=Xg.splitScalar(s);let{p:h,f:g}=this.wNAF(l,n),{p:m,f:y}=this.wNAF(d,n);h=Zg(c,h),m=Zg(f,m),m=new gt(Oe(m.x*Xg.beta),m.y,m.z),i=h.add(m),r=g.add(y)}else{const{p:c,f:l}=this.wNAF(s,n);i=c,r=l}return gt.normalizeZ([i,r])[0]}toAffine(e){const{x:n,y:s,z:i}=this,r=this.equals(gt.ZERO);e==null&&(e=r?Q4:Rx(i));const c=e,l=Oe(c*c),f=Oe(l*c),d=Oe(n*l),h=Oe(s*f),g=Oe(i*c);if(r)return En.ZERO;if(g!==Qt)throw new Error("invZ was invalid");return new En(d,h)}}gt.BASE=new gt(Nn.Gx,Nn.Gy,Qt);gt.ZERO=new gt(mt,Qt,mt);function Zg(t,e){const n=e.negate();return t?n:e}const Db=new WeakMap;class En{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Db.delete(this)}hasEvenY(){return this.y%ko===mt}static fromCompressedHex(e){const n=e.length===32,s=Hu(n?e:e.subarray(1));if(!B1(s))throw new Error("Point is not on curve");const i=tN(s);let r=HB(i);const c=(r&Qt)===Qt;n?c&&(r=Oe(-r)):(e[0]&1)===1!==c&&(r=Oe(-r));const l=new En(s,r);return l.assertValidity(),l}static fromUncompressedHex(e){const n=Hu(e.subarray(1,Uu+1)),s=Hu(e.subarray(Uu+1,Uu*2+1)),i=new En(n,s);return i.assertValidity(),i}static fromHex(e){const n=rN(e),s=n.length,i=n[0];if(s===Uu)return this.fromCompressedHex(n);if(s===J4&&(i===2||i===3))return this.fromCompressedHex(n);if(s===eN&&i===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${J4} compressed bytes or ${eN} uncompressed bytes, not ${s}`)}static fromPrivateKey(e){return En.BASE.multiply(WB(e))}static fromSignature(e,n,s){const{r:i,s:r}=GB(n);if(![0,1,2,3].includes(s))throw new Error("Cannot recover: invalid recovery bit");const c=qB(rN(e)),{n:l}=Nn,f=s===2||s===3?i+l:i,d=Rx(f,l),h=Oe(-c*d,l),g=Oe(r*d,l),m=s&1?"03":"02",y=En.fromHex(m+eh(f)),w=En.BASE.multiplyAndAddUnsafe(y,h,g);if(!w)throw new Error("Cannot recover signature: point at infinify");return w.assertValidity(),w}toRawBytes(e=!1){return th(this.toHex(e))}toHex(e=!1){const n=eh(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${eh(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:s}=this;if(!B1(n)||!B1(s))throw new Error(e);const i=Oe(s*s),r=tN(n);if(Oe(i-r)!==mt)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new En(this.x,Oe(-this.y))}double(){return gt.fromAffine(this).double().toAffine()}add(e){return gt.fromAffine(this).add(gt.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return gt.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,s){const i=gt.fromAffine(this),r=n===mt||n===Qt||this!==En.BASE?i.multiplyUnsafe(n):i.multiply(n),c=gt.fromAffine(e).multiplyUnsafe(s),l=r.add(c);return l.equals(gt.ZERO)?void 0:l.toAffine()}}En.BASE=new En(Nn.Gx,Nn.Gy);En.ZERO=new En(mt,mt);function sN(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function iN(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Ch(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Hu(n),left:t.subarray(e+2)}}function BB(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Ch(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=iN(t.subarray(2)),{data:s,left:i}=iN(n);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ch(i)}`);return{r:e,s}}class Qc{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,s="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${s}: Expected string or Uint8Array`);const i=n?Ch(e):e;if(i.length!==128)throw new Error(`${s}: Expected 64-byte hex`);return new Qc(cm(i.slice(0,64)),cm(i.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:s,s:i}=BB(n?e:th(e));return new Qc(s,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!lm(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!lm(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Nn.n>>Qt;return this.s>e}normalizeS(){return this.hasHighS()?new Qc(this.r,Oe(-this.s,Nn.n)):this}toDERRawBytes(){return th(this.toDERHex())}toDERHex(){const e=sN(bd(this.s)),n=sN(bd(this.r)),s=e.length/2,i=n.length/2,r=bd(s),c=bd(i);return`30${bd(i+s+4)}02${c}${n}02${r}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return th(this.toCompactHex())}toCompactHex(){return eh(this.r)+eh(this.s)}}const jB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ch(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=jB[t[n]];return e}const zB=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function eh(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(mt<=t&&t<zB))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function bd(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function cm(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function th(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=n*2,i=t.slice(s,s+2),r=Number.parseInt(i,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");e[n]=r}return e}function Hu(t){return cm(Ch(t))}function rN(t){return t instanceof Uint8Array?Uint8Array.from(t):th(t)}function aN(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&lm(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Oe(t,e=Nn.P){const n=t%e;return n>=mt?n:e+n}function bi(t,e){const{P:n}=Nn;let s=t;for(;e-- >mt;)s*=s,s%=n;return s}function HB(t){const{P:e}=Nn,n=BigInt(6),s=BigInt(11),i=BigInt(22),r=BigInt(23),c=BigInt(44),l=BigInt(88),f=t*t*t%e,d=f*f*t%e,h=bi(d,$0)*d%e,g=bi(h,$0)*d%e,m=bi(g,ko)*f%e,y=bi(m,s)*m%e,w=bi(y,i)*y%e,v=bi(w,c)*w%e,x=bi(v,l)*v%e,C=bi(x,c)*w%e,D=bi(C,$0)*d%e,N=bi(D,r)*y%e,I=bi(N,n)*f%e,S=bi(I,ko);if(S*S%e!==t)throw new Error("Cannot find square root");return S}function Rx(t,e=Nn.P){if(t===mt||e<=mt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Oe(t,e),s=e,i=mt,r=Qt;for(;n!==mt;){const l=s/n,f=s%n,d=i-r*l;s=n,n=f,i=r,r=d}if(s!==Qt)throw new Error("invert: does not exist");return Oe(i,e)}function FB(t,e=Nn.P){const n=new Array(t.length),s=t.reduce((r,c,l)=>c===mt?r:(n[l]=r,Oe(r*c,e)),Qt),i=Rx(s,e);return t.reduceRight((r,c,l)=>c===mt?r:(n[l]=Oe(r*n[l],e),Oe(r*c,e)),i),n}function VB(t){const e=t.length*8-Ib*8,n=Hu(t);return e>0?n>>BigInt(e):n}function qB(t,e=!1){const n=VB(t);if(e)return n;const{n:s}=Nn;return n>=s?n-s:n}function lm(t){return mt<t&&t<Nn.n}function B1(t){return mt<t&&t<Nn.P}function WB(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Ib)throw new Error("Expected 32 bytes of private key");e=cm(t)}else if(t instanceof Uint8Array){if(t.length!==Ib)throw new Error("Expected 32 bytes of private key");e=Hu(t)}else throw new TypeError("Expected valid private key");if(!lm(e))throw new Error("Expected private key: 0 < key < n");return e}function GB(t){if(t instanceof Qc)return t.assertValidity(),t;try{return Qc.fromDER(t)}catch{return Qc.fromCompact(t)}}En.BASE._setWindowSize(8);var j1={},z1={},H1={},xd={},oN;function KB(){return oN||(oN=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.crypto=void 0,xd.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}),xd}var cN;function lf(){return cN||(cN=1,(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=KB(),n=I=>new Uint8Array(I.buffer,I.byteOffset,I.byteLength);t.u8=n;const s=I=>new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4));t.u32=s;const i=I=>new DataView(I.buffer,I.byteOffset,I.byteLength);t.createView=i;const r=(I,S)=>I<<32-S|I>>>S;if(t.rotr=r,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const c=Array.from({length:256},(I,S)=>S.toString(16).padStart(2,"0"));function l(I){if(!(I instanceof Uint8Array))throw new Error("Uint8Array expected");let S="";for(let A=0;A<I.length;A++)S+=c[I[A]];return S}t.bytesToHex=l;function f(I){if(typeof I!="string")throw new TypeError("hexToBytes: expected string, got "+typeof I);if(I.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const S=new Uint8Array(I.length/2);for(let A=0;A<S.length;A++){const O=A*2,T=I.slice(O,O+2),_=Number.parseInt(T,16);if(Number.isNaN(_)||_<0)throw new Error("Invalid byte sequence");S[A]=_}return S}t.hexToBytes=f;const d=async()=>{};t.nextTick=d;async function h(I,S,A){let O=Date.now();for(let T=0;T<I;T++){A(T);const _=Date.now()-O;_>=0&&_<S||(await(0,t.nextTick)(),O+=_)}}t.asyncLoop=h;function g(I){if(typeof I!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof I}`);return new TextEncoder().encode(I)}t.utf8ToBytes=g;function m(I){if(typeof I=="string"&&(I=g(I)),!(I instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof I})`);return I}t.toBytes=m;function y(...I){if(!I.every(O=>O instanceof Uint8Array))throw new Error("Uint8Array list expected");if(I.length===1)return I[0];const S=I.reduce((O,T)=>O+T.length,0),A=new Uint8Array(S);for(let O=0,T=0;O<I.length;O++){const _=I[O];A.set(_,T),T+=_.length}return A}t.concatBytes=y;class w{clone(){return this._cloneInto()}}t.Hash=w;const v=I=>Object.prototype.toString.call(I)==="[object Object]"&&I.constructor===Object;function x(I,S){if(S!==void 0&&(typeof S!="object"||!v(S)))throw new TypeError("Options should be object or undefined");return Object.assign(I,S)}t.checkOpts=x;function C(I){const S=O=>I().update(m(O)).digest(),A=I();return S.outputLen=A.outputLen,S.blockLen=A.blockLen,S.create=()=>I(),S}t.wrapConstructor=C;function D(I){const S=(O,T)=>I(T).update(m(O)).digest(),A=I({});return S.outputLen=A.outputLen,S.blockLen=A.blockLen,S.create=O=>I(O),S}t.wrapConstructorWithOpts=D;function N(I=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(I));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(I).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=N})(H1)),H1}var lN;function OD(){return lN||(lN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32decode=t.c32normalize=t.c32encode=t.c32=void 0;const e=lf();t.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const n="0123456789abcdef";function s(c,l){if(!c.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");c.length%2!==0&&(c=`0${c}`),c=c.toLowerCase();let f=[],d=0;for(let y=c.length-1;y>=0;y--)if(d<4){const w=n.indexOf(c[y])>>d;let v=0;y!==0&&(v=n.indexOf(c[y-1]));const x=1+d,C=v%(1<<x)<<5-x,D=t.c32[w+C];d=x,f.unshift(D)}else d=0;let h=0;for(let y=0;y<f.length&&f[y]==="0";y++)h++;f=f.slice(h);const g=new TextDecoder().decode((0,e.hexToBytes)(c)).match(/^\u0000*/),m=g?g[0].length:0;for(let y=0;y<m;y++)f.unshift(t.c32[0]);if(l){const y=l-f.length;for(let w=0;w<y;w++)f.unshift(t.c32[0])}return f.join("")}t.c32encode=s;function i(c){return c.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}t.c32normalize=i;function r(c,l){if(c=i(c),!c.match(`^[${t.c32}]*$`))throw new Error("Not a c32-encoded string");const f=c.match(`^${t.c32[0]}*`),d=f?f[0].length:0;let h=[],g=0,m=0;for(let v=c.length-1;v>=0;v--){m===4&&(h.unshift(n[g]),m=0,g=0);const C=(t.c32.indexOf(c[v])<<m)+g,D=n[C%16];if(m+=1,g=C>>4,g>1<<m)throw new Error("Panic error in decoding.");h.unshift(D)}h.unshift(n[g]),h.length%2===1&&h.unshift("0");let y=0;for(let v=0;v<h.length&&h[v]==="0";v++)y++;h=h.slice(y-y%2);let w=h.join("");for(let v=0;v<d;v++)w=`00${w}`;if(l){const v=l*2-w.length;for(let x=0;x<v;x+=2)w=`00${w}`}return w}t.c32decode=r})(z1)),z1}var Sc={},Cc={},Ed={},Gn={},uN;function YB(){if(uN)return Gn;uN=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.output=Gn.exists=Gn.hash=Gn.bytes=Gn.bool=Gn.number=void 0;function t(l){if(!Number.isSafeInteger(l)||l<0)throw new Error(`Wrong positive integer: ${l}`)}Gn.number=t;function e(l){if(typeof l!="boolean")throw new Error(`Expected boolean, not ${l}`)}Gn.bool=e;function n(l,...f){if(!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length>0&&!f.includes(l.length))throw new TypeError(`Expected Uint8Array of length ${f}, not of length=${l.length}`)}Gn.bytes=n;function s(l){if(typeof l!="function"||typeof l.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(l.outputLen),t(l.blockLen)}Gn.hash=s;function i(l,f=!0){if(l.destroyed)throw new Error("Hash instance has been destroyed");if(f&&l.finished)throw new Error("Hash#digest() has already been called")}Gn.exists=i;function r(l,f){n(l);const d=f.outputLen;if(l.length<d)throw new Error(`digestInto() expects output buffer of length at least ${d}`)}Gn.output=r;const c={number:t,bool:e,bytes:n,hash:s,exists:i,output:r};return Gn.default=c,Gn}var fN;function XB(){if(fN)return Ed;fN=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.SHA2=void 0;const t=YB(),e=lf();function n(i,r,c,l){if(typeof i.setBigUint64=="function")return i.setBigUint64(r,c,l);const f=BigInt(32),d=BigInt(4294967295),h=Number(c>>f&d),g=Number(c&d),m=l?4:0,y=l?0:4;i.setUint32(r+m,h,l),i.setUint32(r+y,g,l)}class s extends e.Hash{constructor(r,c,l,f){super(),this.blockLen=r,this.outputLen=c,this.padOffset=l,this.isLE=f,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=(0,e.createView)(this.buffer)}update(r){t.default.exists(this);const{view:c,buffer:l,blockLen:f}=this;r=(0,e.toBytes)(r);const d=r.length;for(let h=0;h<d;){const g=Math.min(f-this.pos,d-h);if(g===f){const m=(0,e.createView)(r);for(;f<=d-h;h+=f)this.process(m,h);continue}l.set(r.subarray(h,h+g),this.pos),this.pos+=g,h+=g,this.pos===f&&(this.process(c,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){t.default.exists(this),t.default.output(r,this),this.finished=!0;const{buffer:c,view:l,blockLen:f,isLE:d}=this;let{pos:h}=this;c[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>f-h&&(this.process(l,0),h=0);for(let v=h;v<f;v++)c[v]=0;n(l,f-8,BigInt(this.length*8),d),this.process(l,0);const g=(0,e.createView)(r),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=m/4,w=this.get();if(y>w.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<y;v++)g.setUint32(4*v,w[v],d)}digest(){const{buffer:r,outputLen:c}=this;this.digestInto(r);const l=r.slice(0,c);return this.destroy(),l}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:c,buffer:l,length:f,finished:d,destroyed:h,pos:g}=this;return r.length=f,r.pos=g,r.finished=d,r.destroyed=h,f%c&&r.buffer.set(l),r}}return Ed.SHA2=s,Ed}var dN;function _D(){if(dN)return Cc;dN=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.sha224=Cc.sha256=void 0;const t=XB(),e=lf(),n=(d,h,g)=>d&h^~d&g,s=(d,h,g)=>d&h^d&g^h&g,i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends t.SHA2{constructor(){super(64,32,8,!1),this.A=r[0]|0,this.B=r[1]|0,this.C=r[2]|0,this.D=r[3]|0,this.E=r[4]|0,this.F=r[5]|0,this.G=r[6]|0,this.H=r[7]|0}get(){const{A:h,B:g,C:m,D:y,E:w,F:v,G:x,H:C}=this;return[h,g,m,y,w,v,x,C]}set(h,g,m,y,w,v,x,C){this.A=h|0,this.B=g|0,this.C=m|0,this.D=y|0,this.E=w|0,this.F=v|0,this.G=x|0,this.H=C|0}process(h,g){for(let I=0;I<16;I++,g+=4)c[I]=h.getUint32(g,!1);for(let I=16;I<64;I++){const S=c[I-15],A=c[I-2],O=(0,e.rotr)(S,7)^(0,e.rotr)(S,18)^S>>>3,T=(0,e.rotr)(A,17)^(0,e.rotr)(A,19)^A>>>10;c[I]=T+c[I-7]+O+c[I-16]|0}let{A:m,B:y,C:w,D:v,E:x,F:C,G:D,H:N}=this;for(let I=0;I<64;I++){const S=(0,e.rotr)(x,6)^(0,e.rotr)(x,11)^(0,e.rotr)(x,25),A=N+S+n(x,C,D)+i[I]+c[I]|0,T=((0,e.rotr)(m,2)^(0,e.rotr)(m,13)^(0,e.rotr)(m,22))+s(m,y,w)|0;N=D,D=C,C=x,x=v+A|0,v=w,w=y,y=m,m=A+T|0}m=m+this.A|0,y=y+this.B|0,w=w+this.C|0,v=v+this.D|0,x=x+this.E|0,C=C+this.F|0,D=D+this.G|0,N=N+this.H|0,this.set(m,y,w,v,x,C,D,N)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class f extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}return Cc.sha256=(0,e.wrapConstructor)(()=>new l),Cc.sha224=(0,e.wrapConstructor)(()=>new f),Cc}var hN;function MD(){if(hN)return Sc;hN=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.c32checkDecode=Sc.c32checkEncode=void 0;const t=_D(),e=lf(),n=OD();function s(c){const l=(0,t.sha256)((0,t.sha256)((0,e.hexToBytes)(c)));return(0,e.bytesToHex)(l.slice(0,4))}function i(c,l){if(c<0||c>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!l.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");l=l.toLowerCase(),l.length%2!==0&&(l=`0${l}`);let f=c.toString(16);f.length===1&&(f=`0${f}`);const d=s(`${f}${l}`),h=(0,n.c32encode)(`${l}${d}`);return`${n.c32[c]}${h}`}Sc.c32checkEncode=i;function r(c){c=(0,n.c32normalize)(c);const l=(0,n.c32decode)(c.slice(1)),f=c[0],d=n.c32.indexOf(f),h=l.slice(-8);let g=d.toString(16);if(g.length===1&&(g=`0${g}`),s(`${g}${l.substring(0,l.length-8)}`)!==h)throw new Error("Invalid c32check string: checksum mismatch");return[d,l.substring(0,l.length-8)]}return Sc.c32checkDecode=r,Sc}var F1={},Ac={},V1,pN;function QB(){if(pN)return V1;pN=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var r=e.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=e.length,f=e.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,x=0,C=0,D=w.length;C!==D&&w[C]===0;)C++,v++;for(var N=(D-C)*h+1>>>0,I=new Uint8Array(N);C!==D;){for(var S=w[C],A=0,O=N-1;(S!==0||A<x)&&O!==-1;O--,A++)S+=256*I[O]>>>0,I[O]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");x=A,C++}for(var T=N-x;T!==N&&I[T]===0;)T++;for(var _=f.repeat(v);T<N;++T)_+=e.charAt(I[T]);return _}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;for(var v=0,x=0,C=0;w[v]===f;)x++,v++;for(var D=(w.length-v)*d+1>>>0,N=new Uint8Array(D);w[v];){var I=w.charCodeAt(v);if(I>255)return;var S=n[I];if(S===255)return;for(var A=0,O=D-1;(S!==0||A<C)&&O!==-1;O--,A++)S+=l*N[O]>>>0,N[O]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");C=A,v++}for(var T=D-C;T!==D&&N[T]===0;)T++;for(var _=new Uint8Array(x+(D-T)),R=x;T!==D;)_[R++]=N[T++];return _}function y(w){var v=m(w);if(v)return v;throw new Error("Non-base"+l+" character")}return{encode:g,decodeUnsafe:m,decode:y}}return V1=t,V1}var gN;function ZB(){if(gN)return Ac;gN=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.decode=Ac.encode=void 0;const t=_D(),e=lf(),n=QB(),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function i(c,l="00"){const f=typeof c=="string"?(0,e.hexToBytes)(c):c,d=typeof l=="string"?(0,e.hexToBytes)(l):c;if(!(f instanceof Uint8Array)||!(d instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const h=(0,t.sha256)((0,t.sha256)(new Uint8Array([...d,...f])));return n(s).encode([...d,...f,...h.slice(0,4)])}Ac.encode=i;function r(c){const l=n(s).decode(c),f=l.slice(0,1),d=l.slice(1,-4),h=(0,t.sha256)((0,t.sha256)(new Uint8Array([...f,...d])));return l.slice(-4).forEach((g,m)=>{if(g!==h[m])throw new Error("Invalid checksum")}),{prefix:f,data:d}}return Ac.decode=r,Ac}var mN;function JB(){return mN||(mN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.c32ToB58=t.b58ToC32=t.c32addressDecode=t.c32address=t.versions=void 0;const e=MD(),n=ZB(),s=lf();t.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const i={};i[0]=t.versions.mainnet.p2pkh,i[5]=t.versions.mainnet.p2sh,i[111]=t.versions.testnet.p2pkh,i[196]=t.versions.testnet.p2sh;const r={};r[t.versions.mainnet.p2pkh]=0,r[t.versions.mainnet.p2sh]=5,r[t.versions.testnet.p2pkh]=111,r[t.versions.testnet.p2sh]=196;function c(h,g){if(!g.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,e.c32checkEncode)(h,g)}`}t.c32address=c;function l(h){if(h.length<=5)throw new Error("Invalid c32 address: invalid length");if(h[0]!="S")throw new Error('Invalid c32 address: must start with "S"');return(0,e.c32checkDecode)(h.slice(1))}t.c32addressDecode=l;function f(h,g=-1){const m=n.decode(h),y=(0,s.bytesToHex)(m.data),w=parseInt((0,s.bytesToHex)(m.prefix),16);let v;return g<0?(v=w,i[w]!==void 0&&(v=i[w])):v=g,c(v,y)}t.b58ToC32=f;function d(h,g=-1){const m=l(h),y=m[0],w=m[1];let v;g<0?(v=y,r[y]!==void 0&&(v=r[y])):v=g;let x=v.toString(16);return x.length===1&&(x=`0${x}`),n.encode(w,x)}t.c32ToB58=d})(F1)),F1}var yN;function ej(){return yN||(yN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.b58ToC32=t.c32ToB58=t.versions=t.c32normalize=t.c32addressDecode=t.c32address=t.c32checkDecode=t.c32checkEncode=t.c32decode=t.c32encode=void 0;const e=OD();Object.defineProperty(t,"c32encode",{enumerable:!0,get:function(){return e.c32encode}}),Object.defineProperty(t,"c32decode",{enumerable:!0,get:function(){return e.c32decode}}),Object.defineProperty(t,"c32normalize",{enumerable:!0,get:function(){return e.c32normalize}});const n=MD();Object.defineProperty(t,"c32checkEncode",{enumerable:!0,get:function(){return n.c32checkEncode}}),Object.defineProperty(t,"c32checkDecode",{enumerable:!0,get:function(){return n.c32checkDecode}});const s=JB();Object.defineProperty(t,"c32address",{enumerable:!0,get:function(){return s.c32address}}),Object.defineProperty(t,"c32addressDecode",{enumerable:!0,get:function(){return s.c32addressDecode}}),Object.defineProperty(t,"c32ToB58",{enumerable:!0,get:function(){return s.c32ToB58}}),Object.defineProperty(t,"b58ToC32",{enumerable:!0,get:function(){return s.b58ToC32}}),Object.defineProperty(t,"versions",{enumerable:!0,get:function(){return s.versions}})})(j1)),j1}var tj=ej();const nj=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),RD=Uint8Array.from({length:16},(t,e)=>e),sj=RD.map(t=>(9*t+5)%16);let Px=[RD],$x=[sj];for(let t=0;t<4;t++)for(let e of[Px,$x])e.push(e[t].map(n=>nj[n]));const PD=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),ij=Px.map((t,e)=>t.map(n=>PD[e][n])),rj=$x.map((t,e)=>t.map(n=>PD[e][n])),aj=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),oj=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Jg=(t,e)=>t<<e|t>>>32-e;function wN(t,e,n,s){return t===0?e^n^s:t===1?e&n|~e&s:t===2?(e|~n)^s:t===3?e&s|n&~s:e^(n|~s)}const e0=new Uint32Array(16);class cj extends Mx{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:s,h3:i,h4:r}=this;return[e,n,s,i,r]}set(e,n,s,i,r){this.h0=e|0,this.h1=n|0,this.h2=s|0,this.h3=i|0,this.h4=r|0}process(e,n){for(let y=0;y<16;y++,n+=4)e0[y]=e.getUint32(n,!0);let s=this.h0|0,i=s,r=this.h1|0,c=r,l=this.h2|0,f=l,d=this.h3|0,h=d,g=this.h4|0,m=g;for(let y=0;y<5;y++){const w=4-y,v=aj[y],x=oj[y],C=Px[y],D=$x[y],N=ij[y],I=rj[y];for(let S=0;S<16;S++){const A=Jg(s+wN(y,r,l,d)+e0[C[S]]+v,N[S])+g|0;s=g,g=d,d=Jg(l,10)|0,l=r,r=A}for(let S=0;S<16;S++){const A=Jg(i+wN(w,c,f,h)+e0[D[S]]+x,I[S])+m|0;i=m,m=h,h=Jg(f,10)|0,f=c,c=A}}this.set(this.h1+l+h|0,this.h2+d+m|0,this.h3+g+i|0,this.h4+s+c|0,this.h0+r+f|0)}roundClean(){e0.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}cl(()=>new cj);const t0=BigInt(2**32-1),Ob=BigInt(32);function $D(t,e=!1){return e?{h:Number(t&t0),l:Number(t>>Ob&t0)}:{h:Number(t>>Ob&t0)|0,l:Number(t&t0)|0}}function lj(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:r,l:c}=$D(t[i],e);[n[i],s[i]]=[r,c]}return[n,s]}const uj=(t,e)=>BigInt(t>>>0)<<Ob|BigInt(e>>>0),fj=(t,e,n)=>t>>>n,dj=(t,e,n)=>t<<32-n|e>>>n,hj=(t,e,n)=>t>>>n|e<<32-n,pj=(t,e,n)=>t<<32-n|e>>>n,gj=(t,e,n)=>t<<64-n|e>>>n-32,mj=(t,e,n)=>t>>>n-32|e<<64-n,yj=(t,e)=>e,wj=(t,e)=>t,vj=(t,e,n)=>t<<n|e>>>32-n,bj=(t,e,n)=>e<<n|t>>>32-n,xj=(t,e,n)=>e<<n-32|t>>>64-n,Ej=(t,e,n)=>t<<n-32|e>>>64-n;function Sj(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Cj=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Aj=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,Nj=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Tj=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,Ij=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),Dj=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,Ge={fromBig:$D,split:lj,toBig:uj,shrSH:fj,shrSL:dj,rotrSH:hj,rotrSL:pj,rotrBH:gj,rotrBL:mj,rotr32H:yj,rotr32L:wj,rotlSH:vj,rotlSL:bj,rotlBH:xj,rotlBL:Ej,add:Sj,add3L:Cj,add3H:Aj,add4L:Nj,add4H:Tj,add5H:Dj,add5L:Ij},[Oj,_j]=Ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),vo=new Uint32Array(80),bo=new Uint32Array(80);class Pm extends Mx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:x}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=x|0}process(e,n){for(let N=0;N<16;N++,n+=4)vo[N]=e.getUint32(n),bo[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=vo[N-15]|0,S=bo[N-15]|0,A=Ge.rotrSH(I,S,1)^Ge.rotrSH(I,S,8)^Ge.shrSH(I,S,7),O=Ge.rotrSL(I,S,1)^Ge.rotrSL(I,S,8)^Ge.shrSL(I,S,7),T=vo[N-2]|0,_=bo[N-2]|0,R=Ge.rotrSH(T,_,19)^Ge.rotrBH(T,_,61)^Ge.shrSH(T,_,6),U=Ge.rotrSL(T,_,19)^Ge.rotrBL(T,_,61)^Ge.shrSL(T,_,6),L=Ge.add4L(O,U,bo[N-7],bo[N-16]),F=Ge.add4H(L,A,R,vo[N-7],vo[N-16]);vo[N]=F|0,bo[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:x,Hh:C,Hl:D}=this;for(let N=0;N<80;N++){const I=Ge.rotrSH(g,m,14)^Ge.rotrSH(g,m,18)^Ge.rotrBH(g,m,41),S=Ge.rotrSL(g,m,14)^Ge.rotrSL(g,m,18)^Ge.rotrBL(g,m,41),A=g&y^~g&v,O=m&w^~m&x,T=Ge.add5L(D,S,O,_j[N],bo[N]),_=Ge.add5H(T,C,I,A,Oj[N],vo[N]),R=T|0,U=Ge.rotrSH(s,i,28)^Ge.rotrBH(s,i,34)^Ge.rotrBH(s,i,39),L=Ge.rotrSL(s,i,28)^Ge.rotrBL(s,i,34)^Ge.rotrBL(s,i,39),F=s&r^s&l^r&l,W=i&c^i&f^c&f;C=v|0,D=x|0,v=y|0,x=w|0,y=g|0,w=m|0,{h:g,l:m}=Ge.add(d|0,h|0,_|0,R|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=Ge.add3L(R,L,W);s=Ge.add3H($,_,U,F),i=$|0}({h:s,l:i}=Ge.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=Ge.add(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=Ge.add(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=Ge.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=Ge.add(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=Ge.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:x}=Ge.add(this.Gh|0,this.Gl|0,v|0,x|0),{h:C,l:D}=Ge.add(this.Hh|0,this.Hl|0,C|0,D|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,x,C,D)}roundClean(){vo.fill(0),bo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Mj extends Pm{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Rj extends Pm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Pj extends Pm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}cl(()=>new Pm);cl(()=>new Mj);cl(()=>new Rj);cl(()=>new Pj);var Hd={exports:{}};Hd.exports;var vN;function $j(){return vN||(vN=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",g="[object GeneratorFunction]",m="[object Map]",y="[object Number]",w="[object Object]",v="[object Promise]",x="[object RegExp]",C="[object Set]",D="[object String]",N="[object Symbol]",I="[object WeakMap]",S="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",T="[object Float64Array]",_="[object Int8Array]",R="[object Int16Array]",U="[object Int32Array]",L="[object Uint8Array]",F="[object Uint8ClampedArray]",W="[object Uint16Array]",$="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,k=/\w*$/,V=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,G={};G[r]=G[c]=G[S]=G[A]=G[l]=G[f]=G[O]=G[T]=G[_]=G[R]=G[U]=G[m]=G[y]=G[w]=G[x]=G[C]=G[D]=G[N]=G[L]=G[F]=G[W]=G[$]=!0,G[d]=G[h]=G[I]=!1;var j=typeof Jn=="object"&&Jn&&Jn.Object===Object&&Jn,X=typeof self=="object"&&self&&self.Object===Object&&self,Z=j||X||Function("return this")(),ee=e&&!e.nodeType&&e,ae=ee&&!0&&t&&!t.nodeType&&t,oe=ae&&ae.exports===ee;function be(H,se){return H.set(se[0],se[1]),H}function Ne(H,se){return H.add(se),H}function Te(H,se){for(var de=-1,Ee=H?H.length:0;++de<Ee&&se(H[de],de,H)!==!1;);return H}function We(H,se){for(var de=-1,Ee=se.length,Pt=H.length;++de<Ee;)H[Pt+de]=se[de];return H}function Qe(H,se,de,Ee){for(var Pt=-1,un=H?H.length:0;++Pt<un;)de=se(de,H[Pt],Pt,H);return de}function Et(H,se){for(var de=-1,Ee=Array(H);++de<H;)Ee[de]=se(de);return Ee}function ki(H,se){return H?.[se]}function cn(H){var se=!1;if(H!=null&&typeof H.toString!="function")try{se=!!(H+"")}catch{}return se}function ii(H){var se=-1,de=Array(H.size);return H.forEach(function(Ee,Pt){de[++se]=[Pt,Ee]}),de}function ri(H,se){return function(de){return H(se(de))}}function qr(H){var se=-1,de=Array(H.size);return H.forEach(function(Ee){de[++se]=Ee}),de}var or=Array.prototype,yn=Function.prototype,ds=Object.prototype,ns=Z["__core-js_shared__"],cr=(function(){var H=/[^.]+$/.exec(ns&&ns.keys&&ns.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""})(),lr=yn.toString,St=ds.hasOwnProperty,ai=ds.toString,oi=RegExp("^"+lr.call(St).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wr=oe?Z.Buffer:void 0,Bi=Z.Symbol,ji=Z.Uint8Array,zi=ri(Object.getPrototypeOf,Object),ry=Object.create,ay=ds.propertyIsEnumerable,Zo=or.splice,Fn=Object.getOwnPropertySymbols,ur=Wr?Wr.isBuffer:void 0,ss=ri(Object.keys,Object),vf=Yr(Z,"DataView"),Jo=Yr(Z,"Map"),bf=Yr(Z,"Promise"),Ba=Yr(Z,"Set"),ja=Yr(Z,"WeakMap"),fr=Yr(Object,"create"),Gr=Vi(vf),yl=Vi(Jo),ec=Vi(bf),oy=Vi(Ba),Tp=Vi(ja),wl=Bi?Bi.prototype:void 0,za=wl?wl.valueOf:void 0;function Kr(H){var se=-1,de=H?H.length:0;for(this.clear();++se<de;){var Ee=H[se];this.set(Ee[0],Ee[1])}}function Ip(){this.__data__=fr?fr(null):{}}function Dp(H){return this.has(H)&&delete this.__data__[H]}function Op(H){var se=this.__data__;if(fr){var de=se[H];return de===s?void 0:de}return St.call(se,H)?se[H]:void 0}function xf(H){var se=this.__data__;return fr?se[H]!==void 0:St.call(se,H)}function Ef(H,se){var de=this.__data__;return de[H]=fr&&se===void 0?s:se,this}Kr.prototype.clear=Ip,Kr.prototype.delete=Dp,Kr.prototype.get=Op,Kr.prototype.has=xf,Kr.prototype.set=Ef;function ci(H){var se=-1,de=H?H.length:0;for(this.clear();++se<de;){var Ee=H[se];this.set(Ee[0],Ee[1])}}function _p(){this.__data__=[]}function dr(H){var se=this.__data__,de=Hi(se,H);if(de<0)return!1;var Ee=se.length-1;return de==Ee?se.pop():Zo.call(se,de,1),!0}function ln(H){var se=this.__data__,de=Hi(se,H);return de<0?void 0:se[de][1]}function Vn(H){return Hi(this.__data__,H)>-1}function Ha(H,se){var de=this.__data__,Ee=Hi(de,H);return Ee<0?de.push([H,se]):de[Ee][1]=se,this}ci.prototype.clear=_p,ci.prototype.delete=dr,ci.prototype.get=ln,ci.prototype.has=Vn,ci.prototype.set=Ha;function hr(H){var se=-1,de=H?H.length:0;for(this.clear();++se<de;){var Ee=H[se];this.set(Ee[0],Ee[1])}}function cy(){this.__data__={hash:new Kr,map:new(Jo||ci),string:new Kr}}function ly(H){return sc(this,H).delete(H)}function Mp(H){return sc(this,H).get(H)}function tc(H){return sc(this,H).has(H)}function Sf(H,se){return sc(this,H).set(H,se),this}hr.prototype.clear=cy,hr.prototype.delete=ly,hr.prototype.get=Mp,hr.prototype.has=tc,hr.prototype.set=Sf;function Us(H){this.__data__=new ci(H)}function Fa(){this.__data__=new ci}function nc(H){return this.__data__.delete(H)}function Va(H){return this.__data__.get(H)}function Jt(H){return this.__data__.has(H)}function Rp(H,se){var de=this.__data__;if(de instanceof ci){var Ee=de.__data__;if(!Jo||Ee.length<n-1)return Ee.push([H,se]),this;de=this.__data__=new hr(Ee)}return de.set(H,se),this}Us.prototype.clear=Fa,Us.prototype.delete=nc,Us.prototype.get=Va,Us.prototype.has=Jt,Us.prototype.set=Rp;function Pp(H,se){var de=Al(H)||Wa(H)?Et(H.length,String):[],Ee=de.length,Pt=!!Ee;for(var un in H)St.call(H,un)&&!(Pt&&(un=="length"||py(un,Ee)))&&de.push(un);return de}function pr(H,se,de){var Ee=H[se];(!(St.call(H,se)&&Zr(Ee,de))||de===void 0&&!(se in H))&&(H[se]=de)}function Hi(H,se){for(var de=H.length;de--;)if(Zr(H[de][0],se))return de;return-1}function uy(H,se){return H&&Nf(se,rc(se),H)}function vl(H,se,de,Ee,Pt,un,is){var qn;if(Ee&&(qn=un?Ee(H,Pt,un,is):Ee(H)),qn!==void 0)return qn;if(!gr(H))return H;var Il=Al(H);if(Il){if(qn=Lp(H),!se)return Af(H,qn)}else{var yr=Qr(H),Ga=yr==h||yr==g;if(ic(H))return hs(H,se);if(yr==w||yr==r||Ga&&!un){if(cn(H))return un?H:{};if(qn=kp(Ga?{}:H),!se)return Tf(H,uy(qn,H))}else{if(!G[yr])return un?H:{};qn=If(H,yr,vl,se)}}is||(is=new Us);var ac=is.get(H);if(ac)return ac;if(is.set(H,qn),!Il)var _f=de?qa(H):rc(H);return Te(_f||H,function(Mf,Dl){_f&&(Dl=Mf,Mf=H[Dl]),pr(qn,Dl,vl(Mf,se,de,Ee,Dl,H,is))}),qn}function $p(H){return gr(H)?ry(H):{}}function fy(H,se,de){var Ee=se(H);return Al(H)?Ee:We(Ee,de(H))}function bl(H){return ai.call(H)}function xl(H){if(!gr(H)||Cl(H))return!1;var se=ui(H)||cn(H)?oi:V;return se.test(Vi(H))}function Fi(H){if(!li(H))return ss(H);var se=[];for(var de in Object(H))St.call(H,de)&&de!="constructor"&&se.push(de);return se}function hs(H,se){if(se)return H.slice();var de=new H.constructor(H.length);return H.copy(de),de}function El(H){var se=new H.constructor(H.byteLength);return new ji(se).set(new ji(H)),se}function dy(H,se){var de=se?El(H.buffer):H.buffer;return new H.constructor(de,H.byteOffset,H.byteLength)}function Cf(H,se,de){var Ee=se?de(ii(H),!0):ii(H);return Qe(Ee,be,new H.constructor)}function Up(H){var se=new H.constructor(H.source,k.exec(H));return se.lastIndex=H.lastIndex,se}function Sl(H,se,de){var Ee=se?de(qr(H),!0):qr(H);return Qe(Ee,Ne,new H.constructor)}function hy(H){return za?Object(za.call(H)):{}}function ps(H,se){var de=se?El(H.buffer):H.buffer;return new H.constructor(de,H.byteOffset,H.length)}function Af(H,se){var de=-1,Ee=H.length;for(se||(se=Array(Ee));++de<Ee;)se[de]=H[de];return se}function Nf(H,se,de,Ee){de||(de={});for(var Pt=-1,un=se.length;++Pt<un;){var is=se[Pt],qn=void 0;pr(de,is,qn===void 0?H[is]:qn)}return de}function Tf(H,se){return Nf(H,Xr(H),se)}function qa(H){return fy(H,rc,Xr)}function sc(H,se){var de=H.__data__;return gy(se)?de[typeof se=="string"?"string":"hash"]:de.map}function Yr(H,se){var de=ki(H,se);return xl(de)?de:void 0}var Xr=Fn?ri(Fn,Object):Tl,Qr=bl;(vf&&Qr(new vf(new ArrayBuffer(1)))!=A||Jo&&Qr(new Jo)!=m||bf&&Qr(bf.resolve())!=v||Ba&&Qr(new Ba)!=C||ja&&Qr(new ja)!=I)&&(Qr=function(H){var se=ai.call(H),de=se==w?H.constructor:void 0,Ee=de?Vi(de):void 0;if(Ee)switch(Ee){case Gr:return A;case yl:return m;case ec:return v;case oy:return C;case Tp:return I}return se});function Lp(H){var se=H.length,de=H.constructor(se);return se&&typeof H[0]=="string"&&St.call(H,"index")&&(de.index=H.index,de.input=H.input),de}function kp(H){return typeof H.constructor=="function"&&!li(H)?$p(zi(H)):{}}function If(H,se,de,Ee){var Pt=H.constructor;switch(se){case S:return El(H);case l:case f:return new Pt(+H);case A:return dy(H,Ee);case O:case T:case _:case R:case U:case L:case F:case W:case $:return ps(H,Ee);case m:return Cf(H,Ee,de);case y:case D:return new Pt(H);case x:return Up(H);case C:return Sl(H,Ee,de);case N:return hy(H)}}function py(H,se){return se=se??i,!!se&&(typeof H=="number"||K.test(H))&&H>-1&&H%1==0&&H<se}function gy(H){var se=typeof H;return se=="string"||se=="number"||se=="symbol"||se=="boolean"?H!=="__proto__":H===null}function Cl(H){return!!cr&&cr in H}function li(H){var se=H&&H.constructor,de=typeof se=="function"&&se.prototype||ds;return H===de}function Vi(H){if(H!=null){try{return lr.call(H)}catch{}try{return H+""}catch{}}return""}function Df(H){return vl(H,!0,!0)}function Zr(H,se){return H===se||H!==H&&se!==se}function Wa(H){return Bp(H)&&St.call(H,"callee")&&(!ay.call(H,"callee")||ai.call(H)==r)}var Al=Array.isArray;function Nl(H){return H!=null&&Of(H.length)&&!ui(H)}function Bp(H){return mr(H)&&Nl(H)}var ic=ur||jp;function ui(H){var se=gr(H)?ai.call(H):"";return se==h||se==g}function Of(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=i}function gr(H){var se=typeof H;return!!H&&(se=="object"||se=="function")}function mr(H){return!!H&&typeof H=="object"}function rc(H){return Nl(H)?Pp(H):Fi(H)}function Tl(){return[]}function jp(){return!1}t.exports=Df})(Hd,Hd.exports)),Hd.exports}$j();var pn;(function(t){t.Int="int",t.UInt="uint",t.Buffer="buffer",t.BoolTrue="true",t.BoolFalse="false",t.PrincipalStandard="address",t.PrincipalContract="contract",t.ResponseOk="ok",t.ResponseErr="err",t.OptionalNone="none",t.OptionalSome="some",t.List="list",t.Tuple="tuple",t.StringASCII="ascii",t.StringUTF8="utf8"})(pn||(pn={}));var _b;(function(t){t[t.int=0]="int",t[t.uint=1]="uint",t[t.buffer=2]="buffer",t[t.true=3]="true",t[t.false=4]="false",t[t.address=5]="address",t[t.contract=6]="contract",t[t.ok=7]="ok",t[t.err=8]="err",t[t.none=9]="none",t[t.some=10]="some",t[t.list=11]="list",t[t.tuple=12]="tuple",t[t.ascii=13]="ascii",t[t.utf8=14]="utf8"})(_b||(_b={}));function Ux(t){return _b[t]}const bN=BigInt("0xffffffffffffffffffffffffffffffff"),Uj=BigInt(0);BigInt("0x7fffffffffffffffffffffffffffffff");BigInt("-170141183460469231731687303715884105728");const Lj=t=>{const e=vx(t);if(e<Uj)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>bN)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${bN}`);return{type:pn.UInt,value:e}};var Xs;(function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.Asset=4]="Asset",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField"})(Xs||(Xs={}));function Ah(t,e,n){const s=e||1,i=n||CB;if(iz(t,i))throw new Error(`String length exceeds maximum bytes ${i}`);return{type:Xs.LengthPrefixedString,content:t,lengthPrefixBytes:s,maxLengthBytes:i}}function kj(t,e,n){return{type:Xs.Asset,address:up(t),contractName:Ah(e),assetName:Ah(n)}}function up(t){const e=tj.c32addressDecode(t);return{type:Xs.Address,version:e[0],hash160:e[1]}}function Bj(t,e){const n=up(t),s=Ah(e);return{type:Xs.Principal,prefix:kr.Contract,address:n,contractName:s}}function jj(t){const e=up(t);return{type:Xs.Principal,prefix:kr.Standard,address:e}}function $m(t){const e=[];return e.push(tl(bx(t.version,1))),e.push(tl(t.hash160)),ka(e)}function zj(t){const e=[];return e.push(t.prefix),(t.prefix===kr.Standard||t.prefix===kr.Contract)&&e.push($m(t.address)),t.prefix===kr.Contract&&e.push(Nh(t.contractName)),ka(e)}function Nh(t){const e=[],n=Mm(t.content),s=n.byteLength;return e.push(tl(bx(s,t.lengthPrefixBytes))),e.push(n),ka(e)}function Hj(t){const e=[];return e.push($m(t.address)),e.push(Nh(t.contractName)),e.push(Nh(t.assetName)),ka(e)}function Fj(t){return lp(Vj(t))}function Vj(t){const e=[];if(e.push(t.conditionType),e.push(zj(t.principal)),(t.conditionType===Pr.Fungible||t.conditionType===Pr.NonFungible)&&e.push(Hj(t.asset)),t.conditionType===Pr.NonFungible&&e.push(uf(t.assetName)),e.push(t.conditionCode),t.conditionType===Pr.STX||t.conditionType===Pr.Fungible){if(t.amount>BigInt("0xffffffffffffffff"))throw new ND("The post-condition amount may not be larger than 8 bytes");e.push(m7(t.amount,8))}return ka(e)}function xN(t){const[e,n,s]=t.split(/\.|::/);return kj(e,n,s)}function q1(t){if(t.includes(".")){const[e,n]=t.split(".");return Bj(e,n)}else return jj(t)}function Vr(t,e){return ka([Ux(t),e])}function qj(t){return new Uint8Array([Ux(t.type)])}function Wj(t){return t.type===pn.OptionalNone?new Uint8Array([Ux(t.type)]):Vr(t.type,uf(t.value))}function Gj(t){const e=new Uint8Array(4);return Rm(e,Math.ceil(t.value.length/2),0),Vr(t.type,Ex(e,tl(t.value)))}function Kj(t){const e=xx(w7(BigInt(t.value),BigInt(AB)),AD);return Vr(t.type,e)}function Yj(t){const e=xx(BigInt(t.value),AD);return Vr(t.type,e)}function Xj(t){return Vr(t.type,$m(up(t.value)))}function Qj(t){const[e,n]=rz(t.value);return Vr(t.type,Ex($m(up(e)),Nh(Ah(n))))}function Zj(t){return Vr(t.type,uf(t.value))}function Jj(t){const e=[],n=new Uint8Array(4);Rm(n,t.value.length,0),e.push(n);for(const s of t.value){const i=uf(s);e.push(i)}return Vr(t.type,ka(e))}function ez(t){const e=[],n=new Uint8Array(4);Rm(n,Object.keys(t.value).length,0),e.push(n);const s=Object.keys(t.value).sort((i,r)=>i.localeCompare(r));for(const i of s){const r=Ah(i);e.push(Nh(r));const c=uf(t.value[i]);e.push(c)}return Vr(t.type,ka(e))}function UD(t,e){const n=[],s=e=="ascii"?x7(t.value):Mm(t.value),i=new Uint8Array(4);return Rm(i,s.length,0),n.push(i),n.push(s),Vr(t.type,ka(n))}function tz(t){return UD(t,"ascii")}function nz(t){return UD(t,"utf8")}function sz(t){return lp(uf(t))}function uf(t){switch(t.type){case pn.BoolTrue:case pn.BoolFalse:return qj(t);case pn.OptionalNone:case pn.OptionalSome:return Wj(t);case pn.Buffer:return Gj(t);case pn.UInt:return Yj(t);case pn.Int:return Kj(t);case pn.PrincipalStandard:return Xj(t);case pn.PrincipalContract:return Qj(t);case pn.ResponseOk:case pn.ResponseErr:return Zj(t);case pn.List:return Jj(t);case pn.Tuple:return ez(t);case pn.StringASCII:return tz(t);case pn.StringUTF8:return nz(t);default:throw new ND("Unable to serialize. Invalid Clarity Value.")}}const iz=(t,e)=>t?Mm(t).length>e:!1;function rz(t){const[e,n]=t.split(".");if(!e||!n)throw new Error(`Invalid contract identifier: ${t}`);return[e,n]}var Mb;(function(t){t[t.eq=1]="eq",t[t.gt=2]="gt",t[t.lt=4]="lt",t[t.gte=3]="gte",t[t.lte=5]="lte",t[t.sent=16]="sent",t[t["not-sent"]=17]="not-sent"})(Mb||(Mb={}));function az(t){switch(t.type){case"stx-postcondition":return{type:Xs.PostCondition,conditionType:Pr.STX,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:q1(t.address),conditionCode:W1(t.condition),amount:BigInt(t.amount)};case"ft-postcondition":return{type:Xs.PostCondition,conditionType:Pr.Fungible,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:q1(t.address),conditionCode:W1(t.condition),amount:BigInt(t.amount),asset:xN(t.asset)};case"nft-postcondition":return{type:Xs.PostCondition,conditionType:Pr.NonFungible,principal:t.address==="origin"?{type:Xs.Principal,prefix:kr.Origin}:q1(t.address),conditionCode:W1(t.condition),asset:xN(t.asset),assetName:t.assetId};default:throw new Error("Invalid post condition type")}}function W1(t){return Mb[t]}function EN(t){const e=az(t);return Fj(e)}const SN=sz;var n0={exports:{}},CN;function oz(){if(CN)return n0.exports;CN=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,A,O){return Function.prototype.apply.call(S,A,O)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function s(I){console&&console.warn&&console.warn(I)}var i=Number.isNaN||function(S){return S!==S};function r(){r.init.call(this)}n0.exports=r,n0.exports.once=C,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var c=10;function l(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");c=I}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function f(I){return I._maxListeners===void 0?r.defaultMaxListeners:I._maxListeners}r.prototype.getMaxListeners=function(){return f(this)},r.prototype.emit=function(S){for(var A=[],O=1;O<arguments.length;O++)A.push(arguments[O]);var T=S==="error",_=this._events;if(_!==void 0)T=T&&_.error===void 0;else if(!T)return!1;if(T){var R;if(A.length>0&&(R=A[0]),R instanceof Error)throw R;var U=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw U.context=R,U}var L=_[S];if(L===void 0)return!1;if(typeof L=="function")e(L,this,A);else for(var F=L.length,W=w(L,F),O=0;O<F;++O)e(W[O],this,A);return!0};function d(I,S,A,O){var T,_,R;if(l(A),_=I._events,_===void 0?(_=I._events=Object.create(null),I._eventsCount=0):(_.newListener!==void 0&&(I.emit("newListener",S,A.listener?A.listener:A),_=I._events),R=_[S]),R===void 0)R=_[S]=A,++I._eventsCount;else if(typeof R=="function"?R=_[S]=O?[A,R]:[R,A]:O?R.unshift(A):R.push(A),T=f(I),T>0&&R.length>T&&!R.warned){R.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=I,U.type=S,U.count=R.length,s(U)}return I}r.prototype.addListener=function(S,A){return d(this,S,A,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(S,A){return d(this,S,A,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(I,S,A){var O={fired:!1,wrapFn:void 0,target:I,type:S,listener:A},T=h.bind(O);return T.listener=A,O.wrapFn=T,T}r.prototype.once=function(S,A){return l(A),this.on(S,g(this,S,A)),this},r.prototype.prependOnceListener=function(S,A){return l(A),this.prependListener(S,g(this,S,A)),this},r.prototype.removeListener=function(S,A){var O,T,_,R,U;if(l(A),T=this._events,T===void 0)return this;if(O=T[S],O===void 0)return this;if(O===A||O.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete T[S],T.removeListener&&this.emit("removeListener",S,O.listener||A));else if(typeof O!="function"){for(_=-1,R=O.length-1;R>=0;R--)if(O[R]===A||O[R].listener===A){U=O[R].listener,_=R;break}if(_<0)return this;_===0?O.shift():v(O,_),O.length===1&&(T[S]=O[0]),T.removeListener!==void 0&&this.emit("removeListener",S,U||A)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(S){var A,O,T;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[S]),this;if(arguments.length===0){var _=Object.keys(O),R;for(T=0;T<_.length;++T)R=_[T],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=O[S],typeof A=="function")this.removeListener(S,A);else if(A!==void 0)for(T=A.length-1;T>=0;T--)this.removeListener(S,A[T]);return this};function m(I,S,A){var O=I._events;if(O===void 0)return[];var T=O[S];return T===void 0?[]:typeof T=="function"?A?[T.listener||T]:[T]:A?x(T):w(T,T.length)}r.prototype.listeners=function(S){return m(this,S,!0)},r.prototype.rawListeners=function(S){return m(this,S,!1)},r.listenerCount=function(I,S){return typeof I.listenerCount=="function"?I.listenerCount(S):y.call(I,S)},r.prototype.listenerCount=y;function y(I){var S=this._events;if(S!==void 0){var A=S[I];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(I,S){for(var A=new Array(S),O=0;O<S;++O)A[O]=I[O];return A}function v(I,S){for(;S+1<I.length;S++)I[S]=I[S+1];I.pop()}function x(I){for(var S=new Array(I.length),A=0;A<S.length;++A)S[A]=I[A].listener||I[A];return S}function C(I,S){return new Promise(function(A,O){function T(R){I.removeListener(S,_),O(R)}function _(){typeof I.removeListener=="function"&&I.removeListener("error",T),A([].slice.call(arguments))}N(I,S,_,{once:!0}),S!=="error"&&D(I,T,{once:!0})})}function D(I,S,A){typeof I.on=="function"&&N(I,"error",S,A)}function N(I,S,A,O){if(typeof I.on=="function")O.once?I.once(S,A):I.on(S,A);else if(typeof I.addEventListener=="function")I.addEventListener(S,function T(_){O.once&&I.removeEventListener(S,T),A(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return n0.exports}var $i=oz();const Lx=rf($i);var G1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rb=function(t,e){return Rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)s.hasOwnProperty(i)&&(n[i]=s[i])},Rb(t,e)};function cz(t,e){Rb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Pb=function(){return Pb=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pb.apply(this,arguments)};function lz(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function uz(t,e,n,s){var i=arguments.length,r=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(r=(i<3?c(r):i>3?c(e,n,r):c(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}function fz(t,e){return function(n,s){e(n,s,t)}}function dz(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hz(t,e,n,s){function i(r){return r instanceof n?r:new n(function(c){c(r)})}return new(n||(n=Promise))(function(r,c){function l(h){try{d(s.next(h))}catch(g){c(g)}}function f(h){try{d(s.throw(h))}catch(g){c(g)}}function d(h){h.done?r(h.value):i(h.value).then(l,f)}d((s=s.apply(t,e||[])).next())})}function pz(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(h){return f([d,h])}}function f(d){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(r=d[0]&2?i.return:d[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,d[1])).done)return r;switch(i=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],i=0}finally{s=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function gz(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]}function mz(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $b(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function LD(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,r=[],c;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return r}function yz(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(LD(arguments[e]));return t}function wz(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],c=0,l=r.length;c<l;c++,i++)s[i]=r[c];return s}function Th(t){return this instanceof Th?(this.v=t,this):new Th(t)}function vz(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),i,r=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(m){s[m]&&(i[m]=function(y){return new Promise(function(w,v){r.push([m,y,w,v])>1||l(m,y)})})}function l(m,y){try{f(s[m](y))}catch(w){g(r[0][3],w)}}function f(m){m.value instanceof Th?Promise.resolve(m.value.v).then(d,h):g(r[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function g(m,y){m(y),r.shift(),r.length&&l(r[0][0],r[0][1])}}function bz(t){var e,n;return e={},s("next"),s("throw",function(i){throw i}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(i,r){e[i]=t[i]?function(c){return(n=!n)?{value:Th(t[i](c)),done:i==="return"}:r?r(c):c}:r}}function xz(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $b=="function"?$b(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(r){n[r]=t[r]&&function(c){return new Promise(function(l,f){c=t[r](c),i(l,f,c.done,c.value)})}}function i(r,c,l,f){Promise.resolve(f).then(function(d){r({value:d,done:l})},c)}}function Ez(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Sz(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Cz(t){return t&&t.__esModule?t:{default:t}}function Az(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Nz(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Tz=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Pb},__asyncDelegator:bz,__asyncGenerator:vz,__asyncValues:xz,__await:Th,__awaiter:hz,__classPrivateFieldGet:Az,__classPrivateFieldSet:Nz,__createBinding:gz,__decorate:uz,__exportStar:mz,__extends:cz,__generator:pz,__importDefault:Cz,__importStar:Sz,__makeTemplateObject:Ez,__metadata:dz,__param:fz,__read:LD,__rest:lz,__spread:yz,__spreadArrays:wz,__values:$b},Symbol.toStringTag,{value:"Module"})),fp=u$(Tz);var K1={},Sd={},AN;function Iz(){if(AN)return Sd;AN=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Sd.delay=t,Sd}var Nc={},Y1={},Tc={},NN;function Dz(){return NN||(NN=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ONE_THOUSAND=Tc.ONE_HUNDRED=void 0,Tc.ONE_HUNDRED=100,Tc.ONE_THOUSAND=1e3),Tc}var X1={},TN;function Oz(){return TN||(TN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(X1)),X1}var IN;function kD(){return IN||(IN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Dz(),t),e.__exportStar(Oz(),t)})(Y1)),Y1}var DN;function _z(){if(DN)return Nc;DN=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.fromMiliseconds=Nc.toMiliseconds=void 0;const t=kD();function e(s){return s*t.ONE_THOUSAND}Nc.toMiliseconds=e;function n(s){return Math.floor(s/t.ONE_THOUSAND)}return Nc.fromMiliseconds=n,Nc}var ON;function Mz(){return ON||(ON=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Iz(),t),e.__exportStar(_z(),t)})(K1)),K1}var ru={},_N;function Rz(){if(_N)return ru;_N=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const s=this.get(n);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-s.started;this.timestamps.set(n,{started:s.started,elapsed:i})}get(n){const s=this.timestamps.get(n);if(typeof s>"u")throw new Error(`No timestamp found for label: ${n}`);return s}elapsed(n){const s=this.get(n);return s.elapsed||Date.now()-s.started}}return ru.Watch=t,ru.default=t,ru}var Q1={},Cd={},MN;function Pz(){if(MN)return Cd;MN=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.IWatch=void 0;class t{}return Cd.IWatch=t,Cd}var RN;function $z(){return RN||(RN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),fp.__exportStar(Pz(),t)})(Q1)),Q1}var PN;function Uz(){return PN||(PN=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(Mz(),t),e.__exportStar(Rz(),t),e.__exportStar($z(),t),e.__exportStar(kD(),t)})(G1)),G1}var we=Uz();class ll{}let Lz=class extends ll{constructor(e){super()}};const $N=we.FIVE_SECONDS,ul={pulse:"heartbeat_pulse"};let kz=class BD extends Lz{constructor(e){super(e),this.events=new $i.EventEmitter,this.interval=$N,this.interval=e?.interval||$N}static async init(e){const n=new BD(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(ul.pulse)}};const Bz=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,jz=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,zz=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Hz(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Fz(t);return}return e}function Fz(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function s0(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!zz.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Bz.test(t)||jz.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Hz)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}function Vz(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function xn(t,...e){try{return Vz(t(...e))}catch(n){return Promise.reject(n)}}function qz(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Wz(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function U0(t){if(qz(t))return String(t);if(Wz(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return U0(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ub="base64:";function Gz(t){return typeof t=="string"?t:Ub+Xz(t)}function Kz(t){return typeof t!="string"||!t.startsWith(Ub)?t:Yz(t.slice(Ub.length))}function Yz(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Xz(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ts(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Qz(...t){return Ts(t.join(":"))}function i0(t){return t=Ts(t),t?t+":":""}function Zz(t,e){if(e===void 0)return!0;let n=0,s=t.indexOf(":");for(;s>-1;)n++,s=t.indexOf(":",s+1);return n<=e}function Jz(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const eH="memory",tH=()=>{const t=new Map;return{name:eH,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function nH(t={}){const e={mounts:{"":t.driver||tH()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const h of e.mountpoints)if(d.startsWith(h))return{base:h,relativeKey:d.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:d,driver:e.mounts[""]}},s=(d,h)=>e.mountpoints.filter(g=>g.startsWith(d)||h&&d.startsWith(g)).map(g=>({relativeBase:d.length>g.length?d.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),i=(d,h)=>{if(e.watching){h=Ts(h);for(const g of e.watchListeners)g(d,h)}},r=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await UN(e.mounts[d],i,d)}},c=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},l=(d,h,g)=>{const m=new Map,y=w=>{let v=m.get(w.base);return v||(v={driver:w.driver,base:w.base,items:[]},m.set(w.base,v)),v};for(const w of d){const v=typeof w=="string",x=Ts(v?w:w.key),C=v?void 0:w.value,D=v||!w.options?h:{...h,...w.options},N=n(x);y(N).items.push({key:x,value:C,relativeKey:N.relativeKey,options:D})}return Promise.all([...m.values()].map(w=>g(w))).then(w=>w.flat())},f={hasItem(d,h={}){d=Ts(d);const{relativeKey:g,driver:m}=n(d);return xn(m.hasItem,g,h)},getItem(d,h={}){d=Ts(d);const{relativeKey:g,driver:m}=n(d);return xn(m.getItem,g,h).then(y=>s0(y))},getItems(d,h={}){return l(d,h,g=>g.driver.getItems?xn(g.driver.getItems,g.items.map(m=>({key:m.relativeKey,options:m.options})),h).then(m=>m.map(y=>({key:Qz(g.base,y.key),value:s0(y.value)}))):Promise.all(g.items.map(m=>xn(g.driver.getItem,m.relativeKey,m.options).then(y=>({key:m.key,value:s0(y)})))))},getItemRaw(d,h={}){d=Ts(d);const{relativeKey:g,driver:m}=n(d);return m.getItemRaw?xn(m.getItemRaw,g,h):xn(m.getItem,g,h).then(y=>Kz(y))},async setItem(d,h,g={}){if(h===void 0)return f.removeItem(d);d=Ts(d);const{relativeKey:m,driver:y}=n(d);y.setItem&&(await xn(y.setItem,m,U0(h),g),y.watch||i("update",d))},async setItems(d,h){await l(d,h,async g=>{if(g.driver.setItems)return xn(g.driver.setItems,g.items.map(m=>({key:m.relativeKey,value:U0(m.value),options:m.options})),h);g.driver.setItem&&await Promise.all(g.items.map(m=>xn(g.driver.setItem,m.relativeKey,U0(m.value),m.options)))})},async setItemRaw(d,h,g={}){if(h===void 0)return f.removeItem(d,g);d=Ts(d);const{relativeKey:m,driver:y}=n(d);if(y.setItemRaw)await xn(y.setItemRaw,m,h,g);else if(y.setItem)await xn(y.setItem,m,Gz(h),g);else return;y.watch||i("update",d)},async removeItem(d,h={}){typeof h=="boolean"&&(h={removeMeta:h}),d=Ts(d);const{relativeKey:g,driver:m}=n(d);m.removeItem&&(await xn(m.removeItem,g,h),(h.removeMeta||h.removeMata)&&await xn(m.removeItem,g+"$",h),m.watch||i("remove",d))},async getMeta(d,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),d=Ts(d);const{relativeKey:g,driver:m}=n(d),y=Object.create(null);if(m.getMeta&&Object.assign(y,await xn(m.getMeta,g,h)),!h.nativeOnly){const w=await xn(m.getItem,g+"$",h).then(v=>s0(v));w&&typeof w=="object"&&(typeof w.atime=="string"&&(w.atime=new Date(w.atime)),typeof w.mtime=="string"&&(w.mtime=new Date(w.mtime)),Object.assign(y,w))}return y},setMeta(d,h,g={}){return this.setItem(d+"$",h,g)},removeMeta(d,h={}){return this.removeItem(d+"$",h)},async getKeys(d,h={}){d=i0(d);const g=s(d,!0);let m=[];const y=[];let w=!0;for(const x of g){x.driver.flags?.maxDepth||(w=!1);const C=await xn(x.driver.getKeys,x.relativeBase,h);for(const D of C){const N=x.mountpoint+Ts(D);m.some(I=>N.startsWith(I))||y.push(N)}m=[x.mountpoint,...m.filter(D=>!D.startsWith(x.mountpoint))]}const v=h.maxDepth!==void 0&&!w;return y.filter(x=>(!v||Zz(x,h.maxDepth))&&Jz(x,d))},async clear(d,h={}){d=i0(d),await Promise.all(s(d,!1).map(async g=>{if(g.driver.clear)return xn(g.driver.clear,g.relativeBase,h);if(g.driver.removeItem){const m=await g.driver.getKeys(g.relativeBase||"",h);return Promise.all(m.map(y=>g.driver.removeItem(y,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>LN(d)))},async watch(d){return await r(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==d),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(d,h){if(d=i0(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((g,m)=>m.length-g.length)),e.mounts[d]=h,e.watching&&Promise.resolve(UN(h,i,d)).then(g=>{e.unwatch[d]=g}).catch(console.error),f},async unmount(d,h=!0){d=i0(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&(e.unwatch[d]?.(),delete e.unwatch[d]),h&&await LN(e.mounts[d]),e.mountpoints=e.mountpoints.filter(g=>g!==d),delete e.mounts[d])},getMount(d=""){d=Ts(d)+":";const h=n(d);return{driver:h.driver,base:h.base}},getMounts(d="",h={}){return d=Ts(d),s(d,h.parents).map(m=>({driver:m.driver,base:m.mountpoint}))},keys:(d,h={})=>f.getKeys(d,h),get:(d,h={})=>f.getItem(d,h),set:(d,h,g={})=>f.setItem(d,h,g),has:(d,h={})=>f.hasItem(d,h),del:(d,h={})=>f.removeItem(d,h),remove:(d,h={})=>f.removeItem(d,h)};return f}function UN(t,e,n){return t.watch?t.watch((s,i)=>e(s,n+i)):()=>{}}async function LN(t){typeof t.dispose=="function"&&await xn(t.dispose)}function fl(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function jD(t,e){let n;const s=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=fl(i),n.then(r=>{r.onclose=()=>n=void 0},()=>{}),n};return(i,r)=>s().then(c=>r(c.transaction(e,i).objectStore(e)))}let Z1;function dp(){return Z1||(Z1=jD("keyval-store","keyval")),Z1}function kN(t,e=dp()){return e("readonly",n=>fl(n.get(t)))}function sH(t,e,n=dp()){return n("readwrite",s=>(s.put(e,t),fl(s.transaction)))}function iH(t,e=dp()){return e("readwrite",n=>(n.delete(t),fl(n.transaction)))}function rH(t=dp()){return t("readwrite",e=>(e.clear(),fl(e.transaction)))}function aH(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},fl(t.transaction)}function oH(t=dp()){return t("readonly",e=>{if(e.getAllKeys)return fl(e.getAllKeys());const n=[];return aH(e,s=>n.push(s.key)).then(()=>n)})}const cH=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),lH=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(s,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function nl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return lH(t)}catch{return t}}function Pa(t){return typeof t=="string"?t:cH(t)||""}const uH="idb-keyval";var fH=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let s;return t.dbName&&t.storeName&&(s=jD(t.dbName,t.storeName)),{name:uH,options:t,async hasItem(i){return!(typeof await kN(n(i),s)>"u")},async getItem(i){return await kN(n(i),s)??null},setItem(i,r){return sH(n(i),r,s)},removeItem(i){return iH(n(i),s)},getKeys(){return oH(s)},clear(){return rH(s)}}};const dH="WALLET_CONNECT_V2_INDEXED_DB",hH="keyvaluestorage";let pH=class{constructor(){this.indexedDb=nH({driver:fH({dbName:dH,storeName:hH})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Pa(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var J1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L0={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,s){this[n]=String(s)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(s){n[s]=void 0,delete n[s]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof J1<"u"&&J1.localStorage?L0.exports=J1.localStorage:typeof window<"u"&&window.localStorage?L0.exports=window.localStorage:L0.exports=new e})();function gH(t){var e;return[t[0],nl((e=t[1])!=null?e:"")]}let mH=class{constructor(){this.localStorage=L0.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(gH)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return nl(n)}async setItem(e,n){this.localStorage.setItem(e,Pa(n))}async removeItem(e){this.localStorage.removeItem(e)}};const yH="wc_storage_version",BN=1,wH=async(t,e,n)=>{const s=yH,i=await e.getItem(s);if(i&&i>=BN){n(e);return}const r=await t.getKeys();if(!r.length){n(e);return}const c=[];for(;r.length;){const l=r.shift();if(!l)continue;const f=l.toLowerCase();if(f.includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect")){const d=await t.getItem(l);await e.setItem(l,d),c.push(l)}}await e.setItem(s,BN),n(e),vH(t,c)},vH=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let bH=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new mH;this.storage=e;try{const n=new pH;wH(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var ev,jN;function xH(){if(jN)return ev;jN=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}ev=e;function e(n,s,i){var r=i&&i.stringify||t,c=1;if(typeof n=="object"&&n!==null){var l=s.length+c;if(l===1)return n;var f=new Array(l);f[0]=r(n);for(var d=1;d<l;d++)f[d]=r(s[d]);return f.join(" ")}if(typeof n!="string")return n;var h=s.length;if(h===0)return n;for(var g="",m=1-c,y=-1,w=n&&n.length||0,v=0;v<w;){if(n.charCodeAt(v)===37&&v+1<w){switch(y=y>-1?y:0,n.charCodeAt(v+1)){case 100:case 102:if(m>=h||s[m]==null)break;y<v&&(g+=n.slice(y,v)),g+=Number(s[m]),y=v+2,v++;break;case 105:if(m>=h||s[m]==null)break;y<v&&(g+=n.slice(y,v)),g+=Math.floor(Number(s[m])),y=v+2,v++;break;case 79:case 111:case 106:if(m>=h||s[m]===void 0)break;y<v&&(g+=n.slice(y,v));var x=typeof s[m];if(x==="string"){g+="'"+s[m]+"'",y=v+2,v++;break}if(x==="function"){g+=s[m].name||"<anonymous>",y=v+2,v++;break}g+=r(s[m]),y=v+2,v++;break;case 115:if(m>=h)break;y<v&&(g+=n.slice(y,v)),g+=String(s[m]),y=v+2,v++;break;case 37:y<v&&(g+=n.slice(y,v)),g+="%",y=v+2,v++,m--;break}++m}++v}return y===-1?n:(y<w&&(g+=n.slice(y)),g)}return ev}var tv,zN;function EH(){if(zN)return tv;zN=1;const t=xH();tv=i;const e=S().console||{},n={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:w,res:w,err:m};function s(A,O){return Array.isArray(A)?A.filter(function(_){return _!=="!stdSerializers.err"}):A===!0?Object.keys(O):!1}function i(A){A=A||{},A.browser=A.browser||{};const O=A.browser.transmit;if(O&&typeof O.send!="function")throw Error("pino: transmit option must have a send function");const T=A.browser.write||e;A.browser.write&&(A.browser.asObject=!0);const _=A.serializers||{},R=s(A.browser.serialize,_);let U=A.browser.serialize;Array.isArray(A.browser.serialize)&&A.browser.serialize.indexOf("!stdSerializers.err")>-1&&(U=!1);const L=["error","fatal","warn","info","debug","trace"];typeof T=="function"&&(T.error=T.fatal=T.warn=T.info=T.debug=T.trace=T),A.enabled===!1&&(A.level="silent");const F=A.level||"info",W=Object.create(T);W.log||(W.log=x),Object.defineProperty(W,"levelVal",{get:P}),Object.defineProperty(W,"level",{get:k,set:V});const $={transmit:O,serialize:R,asObject:A.browser.asObject,levels:L,timestamp:y(A)};W.levels=i.levels,W.level=F,W.setMaxListeners=W.getMaxListeners=W.emit=W.addListener=W.on=W.prependListener=W.once=W.prependOnceListener=W.removeListener=W.removeAllListeners=W.listeners=W.listenerCount=W.eventNames=W.write=W.flush=x,W.serializers=_,W._serialize=R,W._stdErrSerialize=U,W.child=K,O&&(W._logEvent=g());function P(){return this.level==="silent"?1/0:this.levels.values[this.level]}function k(){return this._level}function V(G){if(G!=="silent"&&!this.levels.values[G])throw Error("unknown level "+G);this._level=G,r($,W,"error","log"),r($,W,"fatal","error"),r($,W,"warn","error"),r($,W,"info","log"),r($,W,"debug","log"),r($,W,"trace","log")}function K(G,j){if(!G)throw new Error("missing bindings for child Pino");j=j||{},R&&G.serializers&&(j.serializers=G.serializers);const X=j.serializers;if(R&&X){var Z=Object.assign({},_,X),ee=A.browser.serialize===!0?Object.keys(Z):R;delete G.serializers,f([G],ee,Z,this._stdErrSerialize)}function ae(oe){this._childLevel=(oe._childLevel|0)+1,this.error=d(oe,G,"error"),this.fatal=d(oe,G,"fatal"),this.warn=d(oe,G,"warn"),this.info=d(oe,G,"info"),this.debug=d(oe,G,"debug"),this.trace=d(oe,G,"trace"),Z&&(this.serializers=Z,this._serialize=ee),O&&(this._logEvent=g([].concat(oe._logEvent.bindings,G)))}return ae.prototype=this,new ae(this)}return W}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=n,i.stdTimeFunctions=Object.assign({},{nullTime:C,epochTime:D,unixTime:N,isoTime:I});function r(A,O,T,_){const R=Object.getPrototypeOf(O);O[T]=O.levelVal>O.levels.values[T]?x:R[T]?R[T]:e[T]||e[_]||x,c(A,O,T)}function c(A,O,T){!A.transmit&&O[T]===x||(O[T]=(function(_){return function(){const U=A.timestamp(),L=new Array(arguments.length),F=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var W=0;W<L.length;W++)L[W]=arguments[W];if(A.serialize&&!A.asObject&&f(L,this._serialize,this.serializers,this._stdErrSerialize),A.asObject?_.call(F,l(this,T,L,U)):_.apply(F,L),A.transmit){const $=A.transmit.level||O.level,P=i.levels.values[$],k=i.levels.values[T];if(k<P)return;h(this,{ts:U,methodLevel:T,methodValue:k,transmitValue:i.levels.values[A.transmit.level||O.level],send:A.transmit.send,val:O.levelVal},L)}}})(O[T]))}function l(A,O,T,_){A._serialize&&f(T,A._serialize,A.serializers,A._stdErrSerialize);const R=T.slice();let U=R[0];const L={};_&&(L.time=_),L.level=i.levels.values[O];let F=(A._childLevel|0)+1;if(F<1&&(F=1),U!==null&&typeof U=="object"){for(;F--&&typeof R[0]=="object";)Object.assign(L,R.shift());U=R.length?t(R.shift(),R):void 0}else typeof U=="string"&&(U=t(R.shift(),R));return U!==void 0&&(L.msg=U),L}function f(A,O,T,_){for(const R in A)if(_&&A[R]instanceof Error)A[R]=i.stdSerializers.err(A[R]);else if(typeof A[R]=="object"&&!Array.isArray(A[R]))for(const U in A[R])O&&O.indexOf(U)>-1&&U in T&&(A[R][U]=T[U](A[R][U]))}function d(A,O,T){return function(){const _=new Array(1+arguments.length);_[0]=O;for(var R=1;R<_.length;R++)_[R]=arguments[R-1];return A[T].apply(this,_)}}function h(A,O,T){const _=O.send,R=O.ts,U=O.methodLevel,L=O.methodValue,F=O.val,W=A._logEvent.bindings;f(T,A._serialize||Object.keys(A.serializers),A.serializers,A._stdErrSerialize===void 0?!0:A._stdErrSerialize),A._logEvent.ts=R,A._logEvent.messages=T.filter(function($){return W.indexOf($)===-1}),A._logEvent.level.label=U,A._logEvent.level.value=L,_(U,A._logEvent,F),A._logEvent=g(W)}function g(A){return{ts:0,messages:[],bindings:A||[],level:{label:"",value:0}}}function m(A){const O={type:A.constructor.name,msg:A.message,stack:A.stack};for(const T in A)O[T]===void 0&&(O[T]=A[T]);return O}function y(A){return typeof A.timestamp=="function"?A.timestamp:A.timestamp===!1?C:D}function w(){return{}}function v(A){return A}function x(){}function C(){return!1}function D(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function I(){return new Date(Date.now()).toISOString()}function S(){function A(O){return typeof O<"u"&&O}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return A(self)||A(window)||A(this)||{}}}return tv}var Nu=EH();const hp=rf(Nu),SH={level:"info"},pp="custom_context",kx=1e3*1024;let CH=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},HN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new CH(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},zD=class{constructor(e,n=kx){this.level=e??"error",this.levelValue=Nu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new HN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Nu.levels.values.error?console.error(e):n===Nu.levels.values.warn?console.warn(e):n===Nu.levels.values.debug?console.debug(e):n===Nu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Pa({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new HN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Pa({extraMetadata:e})),new Blob(n,{type:"application/json"})}},AH=class{constructor(e,n=kx){this.baseChunkLogger=new zD(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),s=document.createElement("a");s.href=n,s.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}},NH=class{constructor(e,n=kx){this.baseChunkLogger=new zD(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var TH=Object.defineProperty,IH=Object.defineProperties,DH=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,OH=Object.prototype.hasOwnProperty,_H=Object.prototype.propertyIsEnumerable,VN=(t,e,n)=>e in t?TH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,um=(t,e)=>{for(var n in e||(e={}))OH.call(e,n)&&VN(t,n,e[n]);if(FN)for(var n of FN(e))_H.call(e,n)&&VN(t,n,e[n]);return t},fm=(t,e)=>IH(t,DH(e));function gp(t){return fm(um({},t),{level:t?.level||SH.level})}function MH(t,e=pp){return t[e]||""}function RH(t,e,n=pp){return t[n]=e,t}function Ps(t,e=pp){let n="";return typeof t.bindings>"u"?n=MH(t,e):n=t.bindings().context||"",n}function PH(t,e,n=pp){const s=Ps(t,n);return s.trim()?`${s}/${e}`:e}function fs(t,e,n=pp){const s=PH(t,e,n),i=t.child({context:s});return RH(i,s,n)}function $H(t){var e,n;const s=new AH((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hp(fm(um({},t.opts),{level:"trace",browser:fm(um({},(n=t.opts)==null?void 0:n.browser),{write:i=>s.write(i)})})),chunkLoggerController:s}}function UH(t){var e;const n=new NH((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hp(fm(um({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function HD(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$H(t):UH(t)}var LH=Object.defineProperty,kH=(t,e,n)=>e in t?LH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qN=(t,e,n)=>kH(t,typeof e!="symbol"?e+"":e,n);let BH=class extends ll{constructor(e){super(),this.opts=e,qN(this,"protocol","wc"),qN(this,"version",2)}};var jH=Object.defineProperty,zH=(t,e,n)=>e in t?jH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HH=(t,e,n)=>zH(t,e+"",n);let FH=class extends ll{constructor(e,n){super(),this.core=e,this.logger=n,HH(this,"records",new Map)}},VH=class{constructor(e,n){this.logger=e,this.core=n}},qH=class extends ll{constructor(e,n){super(),this.relayer=e,this.logger=n}},WH=class extends ll{constructor(e){super()}},GH=class{constructor(e,n,s,i){this.core=e,this.logger=n,this.name=s}},KH=class extends ll{constructor(e,n){super(),this.relayer=e,this.logger=n}},YH=class extends ll{constructor(e,n){super(),this.core=e,this.logger=n}},XH=class{constructor(e,n,s){this.core=e,this.logger=n,this.store=s}},QH=class{constructor(e,n){this.projectId=e,this.logger=n}},ZH=class{constructor(e,n,s){this.core=e,this.logger=n,this.telemetryEnabled=s}};var JH=Object.defineProperty,eF=(t,e,n)=>e in t?JH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WN=(t,e,n)=>eF(t,typeof e!="symbol"?e+"":e,n);let tF=class{constructor(e){this.opts=e,WN(this,"protocol","wc"),WN(this,"version",2)}},nF=class{constructor(e){this.client=e}};function sF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function FD(t,...e){if(!sF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iF(t,e){FD(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const au=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nv=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function rF(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function VD(t){return typeof t=="string"&&(t=rF(t)),FD(t),t}let aF=class{clone(){return this._cloneInto()}};function oF(t){const e=s=>t().update(VD(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function qD(t=32){if(au&&typeof au.getRandomValues=="function")return au.getRandomValues(new Uint8Array(t));if(au&&typeof au.randomBytes=="function")return au.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function cF(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}let lF=class extends aF{constructor(e,n,s,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nv(this.buffer)}update(e){GN(this);const{view:n,buffer:s,blockLen:i}=this;e=VD(e);const r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=nv(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){GN(this),iF(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;cF(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=nv(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.length=i,e.pos=l,e.finished=r,e.destroyed=c,i%n&&e.buffer.set(s),e}};const r0=BigInt(2**32-1),Lb=BigInt(32);function WD(t,e=!1){return e?{h:Number(t&r0),l:Number(t>>Lb&r0)}:{h:Number(t>>Lb&r0)|0,l:Number(t&r0)|0}}function uF(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:r,l:c}=WD(t[i],e);[n[i],s[i]]=[r,c]}return[n,s]}const fF=(t,e)=>BigInt(t>>>0)<<Lb|BigInt(e>>>0),dF=(t,e,n)=>t>>>n,hF=(t,e,n)=>t<<32-n|e>>>n,pF=(t,e,n)=>t>>>n|e<<32-n,gF=(t,e,n)=>t<<32-n|e>>>n,mF=(t,e,n)=>t<<64-n|e>>>n-32,yF=(t,e,n)=>t>>>n-32|e<<64-n,wF=(t,e)=>e,vF=(t,e)=>t,bF=(t,e,n)=>t<<n|e>>>32-n,xF=(t,e,n)=>e<<n|t>>>32-n,EF=(t,e,n)=>e<<n-32|t>>>64-n,SF=(t,e,n)=>t<<n-32|e>>>64-n;function CF(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const AF=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),NF=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,TF=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),IF=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,DF=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),OF=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,Ke={fromBig:WD,split:uF,toBig:fF,shrSH:dF,shrSL:hF,rotrSH:pF,rotrSL:gF,rotrBH:mF,rotrBL:yF,rotr32H:wF,rotr32L:vF,rotlSH:bF,rotlSL:xF,rotlBH:EF,rotlBL:SF,add:CF,add3L:AF,add3H:NF,add4L:TF,add4H:IF,add5H:OF,add5L:DF},[_F,MF]=Ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xo=new Uint32Array(80),Eo=new Uint32Array(80);let RF=class extends lF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:x}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=x|0}process(e,n){for(let N=0;N<16;N++,n+=4)xo[N]=e.getUint32(n),Eo[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=xo[N-15]|0,S=Eo[N-15]|0,A=Ke.rotrSH(I,S,1)^Ke.rotrSH(I,S,8)^Ke.shrSH(I,S,7),O=Ke.rotrSL(I,S,1)^Ke.rotrSL(I,S,8)^Ke.shrSL(I,S,7),T=xo[N-2]|0,_=Eo[N-2]|0,R=Ke.rotrSH(T,_,19)^Ke.rotrBH(T,_,61)^Ke.shrSH(T,_,6),U=Ke.rotrSL(T,_,19)^Ke.rotrBL(T,_,61)^Ke.shrSL(T,_,6),L=Ke.add4L(O,U,Eo[N-7],Eo[N-16]),F=Ke.add4H(L,A,R,xo[N-7],xo[N-16]);xo[N]=F|0,Eo[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:x,Hh:C,Hl:D}=this;for(let N=0;N<80;N++){const I=Ke.rotrSH(g,m,14)^Ke.rotrSH(g,m,18)^Ke.rotrBH(g,m,41),S=Ke.rotrSL(g,m,14)^Ke.rotrSL(g,m,18)^Ke.rotrBL(g,m,41),A=g&y^~g&v,O=m&w^~m&x,T=Ke.add5L(D,S,O,MF[N],Eo[N]),_=Ke.add5H(T,C,I,A,_F[N],xo[N]),R=T|0,U=Ke.rotrSH(s,i,28)^Ke.rotrBH(s,i,34)^Ke.rotrBH(s,i,39),L=Ke.rotrSL(s,i,28)^Ke.rotrBL(s,i,34)^Ke.rotrBL(s,i,39),F=s&r^s&l^r&l,W=i&c^i&f^c&f;C=v|0,D=x|0,v=y|0,x=w|0,y=g|0,w=m|0,{h:g,l:m}=Ke.add(d|0,h|0,_|0,R|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=Ke.add3L(R,L,W);s=Ke.add3H($,_,U,F),i=$|0}({h:s,l:i}=Ke.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=Ke.add(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=Ke.add(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=Ke.add(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=Ke.add(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=Ke.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:x}=Ke.add(this.Gh|0,this.Gl|0,v|0,x|0),{h:C,l:D}=Ke.add(this.Hh|0,this.Hl|0,C|0,D|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,x,C,D)}roundClean(){xo.fill(0),Eo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const PF=oF(()=>new RF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bx=BigInt(0),GD=BigInt(1),$F=BigInt(2);function jx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zx(t){if(!jx(t))throw new Error("Uint8Array expected")}function sv(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const UF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hx(t){zx(t);let e="";for(let n=0;n<t.length;n++)e+=UF[t[n]];return e}function KD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Bx:BigInt("0x"+t)}const pa={_0:48,_9:57,A:65,F:70,a:97,f:102};function KN(t){if(t>=pa._0&&t<=pa._9)return t-pa._0;if(t>=pa.A&&t<=pa.F)return t-(pa.A-10);if(t>=pa.a&&t<=pa.f)return t-(pa.a-10)}function YD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(n);for(let i=0,r=0;i<n;i++,r+=2){const c=KN(t.charCodeAt(r)),l=KN(t.charCodeAt(r+1));if(c===void 0||l===void 0){const f=t[r]+t[r+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+r)}s[i]=c*16+l}return s}function LF(t){return KD(Hx(t))}function k0(t){return zx(t),KD(Hx(Uint8Array.from(t).reverse()))}function XD(t,e){return YD(t.toString(16).padStart(e*2,"0"))}function kb(t,e){return XD(t,e).reverse()}function ga(t,e,n){let s;if(typeof e=="string")try{s=YD(e)}catch(r){throw new Error(t+" must be hex string or Uint8Array, cause: "+r)}else if(jx(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=s.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return s}function YN(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];zx(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}const iv=t=>typeof t=="bigint"&&Bx<=t;function kF(t,e,n){return iv(t)&&iv(e)&&iv(n)&&e<=t&&t<n}function Ad(t,e,n,s){if(!kF(e,n,s))throw new Error("expected valid "+t+": "+n+" <= n < "+s+", got "+e)}function BF(t){let e;for(e=0;t>Bx;t>>=GD,e+=1);return e}const jF=t=>($F<<BigInt(t-1))-GD,zF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jx(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Fx(t,e,n={}){const s=(i,r,c)=>{const l=zF[r];if(typeof l!="function")throw new Error("invalid validator function");const f=t[i];if(!(c&&f===void 0)&&!l(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+r+", got "+f)};for(const[i,r]of Object.entries(e))s(i,r,!1);for(const[i,r]of Object.entries(n))s(i,r,!0);return t}function XN(t){const e=new WeakMap;return(n,...s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t(n,...s);return e.set(n,r),r}}const An=BigInt(0),Zt=BigInt(1),Lc=BigInt(2),HF=BigInt(3),Bb=BigInt(4),QN=BigInt(5),ZN=BigInt(8);function mn(t,e){const n=t%e;return n>=An?n:e+n}function FF(t,e,n){if(e<An)throw new Error("invalid exponent, negatives unsupported");if(n<=An)throw new Error("invalid modulus");if(n===Zt)return An;let s=Zt;for(;e>An;)e&Zt&&(s=s*t%n),t=t*t%n,e>>=Zt;return s}function Sr(t,e,n){let s=t;for(;e-- >An;)s*=s,s%=n;return s}function JN(t,e){if(t===An)throw new Error("invert: expected non-zero number");if(e<=An)throw new Error("invert: expected positive modulus, got "+e);let n=mn(t,e),s=e,i=An,r=Zt;for(;n!==An;){const c=s/n,l=s%n,f=i-r*c;s=n,n=l,i=r,r=f}if(s!==Zt)throw new Error("invert: does not exist");return mn(i,e)}function VF(t){const e=(t-Zt)/Lc;let n,s,i;for(n=t-Zt,s=0;n%Lc===An;n/=Lc,s++);for(i=Lc;i<t&&FF(i,e,t)!==t-Zt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(s===1){const c=(t+Zt)/Bb;return function(l,f){const d=l.pow(f,c);if(!l.eql(l.sqr(d),f))throw new Error("Cannot find square root");return d}}const r=(n+Zt)/Lc;return function(c,l){if(c.pow(l,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=s,d=c.pow(c.mul(c.ONE,i),n),h=c.pow(l,r),g=c.pow(l,n);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let m=1;for(let w=c.sqr(g);m<f&&!c.eql(w,c.ONE);m++)w=c.sqr(w);const y=c.pow(d,Zt<<BigInt(f-m-1));d=c.sqr(y),h=c.mul(h,y),g=c.mul(g,d),f=m}return h}}function qF(t){if(t%Bb===HF){const e=(t+Zt)/Bb;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%ZN===QN){const e=(t-QN)/ZN;return function(n,s){const i=n.mul(s,Lc),r=n.pow(i,e),c=n.mul(s,r),l=n.mul(n.mul(c,Lc),r),f=n.mul(c,n.sub(l,n.ONE));if(!n.eql(n.sqr(f),s))throw new Error("Cannot find square root");return f}}return VF(t)}const WF=(t,e)=>(mn(t,e)&Zt)===Zt,GF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function KF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=GF.reduce((s,i)=>(s[i]="function",s),e);return Fx(t,n)}function YF(t,e,n){if(n<An)throw new Error("invalid exponent, negatives unsupported");if(n===An)return t.ONE;if(n===Zt)return e;let s=t.ONE,i=e;for(;n>An;)n&Zt&&(s=t.mul(s,i)),i=t.sqr(i),n>>=Zt;return s}function XF(t,e){const n=new Array(e.length),s=e.reduce((r,c,l)=>t.is0(c)?r:(n[l]=r,t.mul(r,c)),t.ONE),i=t.inv(s);return e.reduceRight((r,c,l)=>t.is0(c)?r:(n[l]=t.mul(r,n[l]),t.mul(r,c)),i),n}function QD(t,e){const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function ZD(t,e,n=!1,s={}){if(t<=An)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:r}=QD(t,e);if(r>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:r,MASK:jF(i),ZERO:An,ONE:Zt,create:f=>mn(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return An<=f&&f<t},is0:f=>f===An,isOdd:f=>(f&Zt)===Zt,neg:f=>mn(-f,t),eql:(f,d)=>f===d,sqr:f=>mn(f*f,t),add:(f,d)=>mn(f+d,t),sub:(f,d)=>mn(f-d,t),mul:(f,d)=>mn(f*d,t),pow:(f,d)=>YF(l,f,d),div:(f,d)=>mn(f*JN(d,t),t),sqrN:f=>f*f,addN:(f,d)=>f+d,subN:(f,d)=>f-d,mulN:(f,d)=>f*d,inv:f=>JN(f,t),sqrt:s.sqrt||(f=>(c||(c=qF(t)),c(l,f))),invertBatch:f=>XF(l,f),cmov:(f,d,h)=>h?d:f,toBytes:f=>n?kb(f,r):XD(f,r),fromBytes:f=>{if(f.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+f.length);return n?k0(f):LF(f)}});return Object.freeze(l)}const eT=BigInt(0),a0=BigInt(1);function rv(t,e){const n=e.negate();return t?n:e}function JD(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function av(t,e){JD(t,e);const n=Math.ceil(e/t)+1,s=2**(t-1);return{windows:n,windowSize:s}}function QF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,s)=>{if(!(n instanceof e))throw new Error("invalid point at index "+s)})}function ZF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,s)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+s)})}const ov=new WeakMap,eO=new WeakMap;function cv(t){return eO.get(t)||1}function JF(t,e){return{constTimeNegate:rv,hasPrecomputes(n){return cv(n)!==1},unsafeLadder(n,s,i=t.ZERO){let r=n;for(;s>eT;)s&a0&&(i=i.add(r)),r=r.double(),s>>=a0;return i},precomputeWindow(n,s){const{windows:i,windowSize:r}=av(s,e),c=[];let l=n,f=l;for(let d=0;d<i;d++){f=l,c.push(f);for(let h=1;h<r;h++)f=f.add(l),c.push(f);l=f.double()}return c},wNAF(n,s,i){const{windows:r,windowSize:c}=av(n,e);let l=t.ZERO,f=t.BASE;const d=BigInt(2**n-1),h=2**n,g=BigInt(n);for(let m=0;m<r;m++){const y=m*c;let w=Number(i&d);i>>=g,w>c&&(w-=h,i+=a0);const v=y,x=y+Math.abs(w)-1,C=m%2!==0,D=w<0;w===0?f=f.add(rv(C,s[v])):l=l.add(rv(D,s[x]))}return{p:l,f}},wNAFUnsafe(n,s,i,r=t.ZERO){const{windows:c,windowSize:l}=av(n,e),f=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let g=0;g<c;g++){const m=g*l;if(i===eT)break;let y=Number(i&f);if(i>>=h,y>l&&(y-=d,i+=a0),y===0)continue;let w=s[m+Math.abs(y)-1];y<0&&(w=w.negate()),r=r.add(w)}return r},getPrecomputes(n,s,i){let r=ov.get(s);return r||(r=this.precomputeWindow(s,n),n!==1&&ov.set(s,i(r))),r},wNAFCached(n,s,i){const r=cv(n);return this.wNAF(r,this.getPrecomputes(r,n,i),s)},wNAFCachedUnsafe(n,s,i,r){const c=cv(n);return c===1?this.unsafeLadder(n,s,r):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),s,r)},setWindowSize(n,s){JD(s,e),eO.set(n,s),ov.delete(n)}}}function eV(t,e,n,s){if(QF(n,t),ZF(s,e),n.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,r=BF(BigInt(n.length)),c=r>12?r-3:r>4?r-2:r?2:1,l=(1<<c)-1,f=new Array(l+1).fill(i),d=Math.floor((e.BITS-1)/c)*c;let h=i;for(let g=d;g>=0;g-=c){f.fill(i);for(let y=0;y<s.length;y++){const w=s[y],v=Number(w>>BigInt(g)&BigInt(l));f[v]=f[v].add(n[y])}let m=i;for(let y=f.length-1,w=i;y>0;y--)w=w.add(f[y]),m=m.add(w);if(h=h.add(m),g!==0)for(let y=0;y<c;y++)h=h.double()}return h}function tV(t){return KF(t.Fp),Fx(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...QD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ki=BigInt(0),bs=BigInt(1),o0=BigInt(2),nV=BigInt(8),sV={zip215:!0};function iV(t){const e=tV(t);return Fx(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function rV(t){const e=iV(t),{Fp:n,n:s,prehash:i,hash:r,randomBytes:c,nByteLength:l,h:f}=e,d=o0<<BigInt(l*8)-bs,h=n.create,g=ZD(e.n,e.nBitLength),m=e.uvRatio||(($,P)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(P))}}catch{return{isValid:!1,value:Ki}}}),y=e.adjustScalarBytes||($=>$),w=e.domain||(($,P,k)=>{if(sv("phflag",k),P.length||k)throw new Error("Contexts/pre-hash are not supported");return $});function v($,P){Ad("coordinate "+$,P,Ki,d)}function x($){if(!($ instanceof N))throw new Error("ExtendedPoint expected")}const C=XN(($,P)=>{const{ex:k,ey:V,ez:K}=$,G=$.is0();P==null&&(P=G?nV:n.inv(K));const j=h(k*P),X=h(V*P),Z=h(K*P);if(G)return{x:Ki,y:bs};if(Z!==bs)throw new Error("invZ was invalid");return{x:j,y:X}}),D=XN($=>{const{a:P,d:k}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:V,ey:K,ez:G,et:j}=$,X=h(V*V),Z=h(K*K),ee=h(G*G),ae=h(ee*ee),oe=h(X*P),be=h(ee*h(oe+Z)),Ne=h(ae+h(k*h(X*Z)));if(be!==Ne)throw new Error("bad point: equation left != right (1)");const Te=h(V*K),We=h(G*j);if(Te!==We)throw new Error("bad point: equation left != right (2)");return!0});class N{constructor(P,k,V,K){this.ex=P,this.ey=k,this.ez=V,this.et=K,v("x",P),v("y",k),v("z",V),v("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(P){if(P instanceof N)throw new Error("extended point not allowed");const{x:k,y:V}=P||{};return v("x",k),v("y",V),new N(k,V,bs,h(k*V))}static normalizeZ(P){const k=n.invertBatch(P.map(V=>V.ez));return P.map((V,K)=>V.toAffine(k[K])).map(N.fromAffine)}static msm(P,k){return eV(N,g,P,k)}_setWindowSize(P){A.setWindowSize(this,P)}assertValidity(){D(this)}equals(P){x(P);const{ex:k,ey:V,ez:K}=this,{ex:G,ey:j,ez:X}=P,Z=h(k*X),ee=h(G*K),ae=h(V*X),oe=h(j*K);return Z===ee&&ae===oe}is0(){return this.equals(N.ZERO)}negate(){return new N(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:P}=e,{ex:k,ey:V,ez:K}=this,G=h(k*k),j=h(V*V),X=h(o0*h(K*K)),Z=h(P*G),ee=k+V,ae=h(h(ee*ee)-G-j),oe=Z+j,be=oe-X,Ne=Z-j,Te=h(ae*be),We=h(oe*Ne),Qe=h(ae*Ne),Et=h(be*oe);return new N(Te,We,Et,Qe)}add(P){x(P);const{a:k,d:V}=e,{ex:K,ey:G,ez:j,et:X}=this,{ex:Z,ey:ee,ez:ae,et:oe}=P;if(k===BigInt(-1)){const yn=h((G-K)*(ee+Z)),ds=h((G+K)*(ee-Z)),ns=h(ds-yn);if(ns===Ki)return this.double();const cr=h(j*o0*oe),lr=h(X*o0*ae),St=lr+cr,ai=ds+yn,oi=lr-cr,Wr=h(St*ns),Bi=h(ai*oi),ji=h(St*oi),zi=h(ns*ai);return new N(Wr,Bi,zi,ji)}const be=h(K*Z),Ne=h(G*ee),Te=h(X*V*oe),We=h(j*ae),Qe=h((K+G)*(Z+ee)-be-Ne),Et=We-Te,ki=We+Te,cn=h(Ne-k*be),ii=h(Qe*Et),ri=h(ki*cn),qr=h(Qe*cn),or=h(Et*ki);return new N(ii,ri,or,qr)}subtract(P){return this.add(P.negate())}wNAF(P){return A.wNAFCached(this,P,N.normalizeZ)}multiply(P){const k=P;Ad("scalar",k,bs,s);const{p:V,f:K}=this.wNAF(k);return N.normalizeZ([V,K])[0]}multiplyUnsafe(P,k=N.ZERO){const V=P;return Ad("scalar",V,Ki,s),V===Ki?S:this.is0()||V===bs?this:A.wNAFCachedUnsafe(this,V,N.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return A.unsafeLadder(this,s).is0()}toAffine(P){return C(this,P)}clearCofactor(){const{h:P}=e;return P===bs?this:this.multiplyUnsafe(P)}static fromHex(P,k=!1){const{d:V,a:K}=e,G=n.BYTES;P=ga("pointHex",P,G),sv("zip215",k);const j=P.slice(),X=P[G-1];j[G-1]=X&-129;const Z=k0(j),ee=k?d:n.ORDER;Ad("pointHex.y",Z,Ki,ee);const ae=h(Z*Z),oe=h(ae-bs),be=h(V*ae-K);let{isValid:Ne,value:Te}=m(oe,be);if(!Ne)throw new Error("Point.fromHex: invalid y coordinate");const We=(Te&bs)===bs,Qe=(X&128)!==0;if(!k&&Te===Ki&&Qe)throw new Error("Point.fromHex: x=0 and x_0=1");return Qe!==We&&(Te=h(-Te)),N.fromAffine({x:Te,y:Z})}static fromPrivateKey(P){return _(P).point}toRawBytes(){const{x:P,y:k}=this.toAffine(),V=kb(k,n.BYTES);return V[V.length-1]|=P&bs?128:0,V}toHex(){return Hx(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,bs,h(e.Gx*e.Gy)),N.ZERO=new N(Ki,bs,bs,Ki);const{BASE:I,ZERO:S}=N,A=JF(N,l*8);function O($){return mn($,s)}function T($){return O(k0($))}function _($){const P=n.BYTES;$=ga("private key",$,P);const k=ga("hashed private key",r($),2*P),V=y(k.slice(0,P)),K=k.slice(P,2*P),G=T(V),j=I.multiply(G),X=j.toRawBytes();return{head:V,prefix:K,scalar:G,point:j,pointBytes:X}}function R($){return _($).pointBytes}function U($=new Uint8Array,...P){const k=YN(...P);return T(r(w(k,ga("context",$),!!i)))}function L($,P,k={}){$=ga("message",$),i&&($=i($));const{prefix:V,scalar:K,pointBytes:G}=_(P),j=U(k.context,V,$),X=I.multiply(j).toRawBytes(),Z=U(k.context,X,G,$),ee=O(j+Z*K);Ad("signature.s",ee,Ki,s);const ae=YN(X,kb(ee,n.BYTES));return ga("result",ae,n.BYTES*2)}const F=sV;function W($,P,k,V=F){const{context:K,zip215:G}=V,j=n.BYTES;$=ga("signature",$,2*j),P=ga("message",P),k=ga("publicKey",k,j),G!==void 0&&sv("zip215",G),i&&(P=i(P));const X=k0($.slice(j,2*j));let Z,ee,ae;try{Z=N.fromHex(k,G),ee=N.fromHex($.slice(0,j),G),ae=I.multiplyUnsafe(X)}catch{return!1}if(!G&&Z.isSmallOrder())return!1;const oe=U(K,ee.toRawBytes(),Z.toRawBytes(),P);return ee.add(Z.multiplyUnsafe(oe)).subtract(ae).clearCofactor().equals(N.ZERO)}return I._setWindowSize(8),{CURVE:e,getPublicKey:R,sign:L,verify:W,ExtendedPoint:N,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>c(n.BYTES),precompute($=8,P=N.BASE){return P._setWindowSize($),P.multiply(BigInt(3)),P}}}}BigInt(0),BigInt(1);const Vx=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),tT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const aV=BigInt(1),nT=BigInt(2);BigInt(3);const oV=BigInt(5),cV=BigInt(8);function lV(t){const e=BigInt(10),n=BigInt(20),s=BigInt(40),i=BigInt(80),r=Vx,c=t*t%r*t%r,l=Sr(c,nT,r)*c%r,f=Sr(l,aV,r)*t%r,d=Sr(f,oV,r)*f%r,h=Sr(d,e,r)*d%r,g=Sr(h,n,r)*h%r,m=Sr(g,s,r)*g%r,y=Sr(m,i,r)*m%r,w=Sr(y,i,r)*m%r,v=Sr(w,e,r)*d%r;return{pow_p_5_8:Sr(v,nT,r)*t%r,b2:c}}function uV(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function fV(t,e){const n=Vx,s=mn(e*e*e,n),i=mn(s*s*e,n),r=lV(t*i).pow_p_5_8;let c=mn(t*s*r,n);const l=mn(e*c*c,n),f=c,d=mn(c*tT,n),h=l===t,g=l===mn(-t,n),m=l===mn(-t*tT,n);return h&&(c=f),(g||m)&&(c=d),WF(c,n)&&(c=mn(-c,n)),{isValid:h||g,value:c}}const dV=ZD(Vx,void 0,!0),hV={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:dV,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:cV,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:PF,randomBytes:qD,adjustScalarBytes:uV,uvRatio:fV},tO=rV(hV),pV="EdDSA",gV="JWT",dm=".",Um="base64url",nO="utf8",sO="utf8",mV=":",yV="did",wV="key",sT="base58btc",vV="z",bV="K36",xV=32;function qx(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function iO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qx(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function rO(t,e){e||(e=t.reduce((i,r)=>i+r.length,0));const n=iO(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return qx(n)}function EV(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,x=0,C=0,D=w.length;C!==D&&w[C]===0;)C++,v++;for(var N=(D-C)*h+1>>>0,I=new Uint8Array(N);C!==D;){for(var S=w[C],A=0,O=N-1;(S!==0||A<x)&&O!==-1;O--,A++)S+=256*I[O]>>>0,I[O]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");x=A,C++}for(var T=N-x;T!==N&&I[T]===0;)T++;for(var _=f.repeat(v);T<N;++T)_+=t.charAt(I[T]);return _}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var x=0,C=0;w[v]===f;)x++,v++;for(var D=(w.length-v)*d+1>>>0,N=new Uint8Array(D);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=D-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var O=D-C;O!==D&&N[O]===0;)O++;for(var T=new Uint8Array(x+(D-O)),_=x;O!==D;)T[_++]=N[O++];return T}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var SV=EV,CV=SV;const aO=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},AV=t=>new TextEncoder().encode(t),NV=t=>new TextDecoder().decode(t);let TV=class{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},IV=class{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return oO(this,e)}},DV=class{constructor(e){this.decoders=e}or(e){return oO(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const oO=(t,e)=>new DV({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let OV=class{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new TV(e,n,s),this.decoder=new IV(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Lm=({name:t,prefix:e,encode:n,decode:s})=>new OV(t,e,n,s),mp=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=CV(n,e);return Lm({prefix:t,name:e,encode:s,decode:r=>aO(i(r))})},_V=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},MV=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},jn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>Lm({prefix:e,name:t,encode(i){return MV(i,s,n)},decode(i){return _V(i,s,n,t)}}),RV=Lm({prefix:"\0",name:"identity",encode:t=>NV(t),decode:t=>AV(t)});var PV=Object.freeze({__proto__:null,identity:RV});const $V=jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var UV=Object.freeze({__proto__:null,base2:$V});const LV=jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var kV=Object.freeze({__proto__:null,base8:LV});const BV=mp({prefix:"9",name:"base10",alphabet:"0123456789"});var jV=Object.freeze({__proto__:null,base10:BV});const zV=jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HV=jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var FV=Object.freeze({__proto__:null,base16:zV,base16upper:HV});const VV=jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qV=jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WV=jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),GV=jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KV=jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YV=jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),XV=jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QV=jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZV=jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var JV=Object.freeze({__proto__:null,base32:VV,base32upper:qV,base32pad:WV,base32padupper:GV,base32hex:KV,base32hexupper:YV,base32hexpad:XV,base32hexpadupper:QV,base32z:ZV});const eq=mp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tq=mp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var nq=Object.freeze({__proto__:null,base36:eq,base36upper:tq});const sq=mp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iq=mp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rq=Object.freeze({__proto__:null,base58btc:sq,base58flickr:iq});const aq=jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oq=jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cq=jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lq=jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var uq=Object.freeze({__proto__:null,base64:aq,base64pad:oq,base64url:cq,base64urlpad:lq});const cO=Array.from(""),fq=cO.reduce((t,e,n)=>(t[n]=e,t),[]),dq=cO.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function hq(t){return t.reduce((e,n)=>(e+=fq[n],e),"")}function pq(t){const e=[];for(const n of t){const s=dq[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const gq=Lm({prefix:"",name:"base256emoji",encode:hq,decode:pq});var mq=Object.freeze({__proto__:null,base256emoji:gq}),yq=lO,iT=128,wq=-128,vq=Math.pow(2,31);function lO(t,e,n){e=e||[],n=n||0;for(var s=n;t>=vq;)e[n++]=t&255|iT,t/=128;for(;t&wq;)e[n++]=t&255|iT,t>>>=7;return e[n]=t|0,lO.bytes=n-s+1,e}var bq=jb,xq=128,rT=127;function jb(t,s){var n=0,s=s||0,i=0,r=s,c,l=t.length;do{if(r>=l)throw jb.bytes=0,new RangeError("Could not decode varint");c=t[r++],n+=i<28?(c&rT)<<i:(c&rT)*Math.pow(2,i),i+=7}while(c>=xq);return jb.bytes=r-s,n}var Eq=Math.pow(2,7),Sq=Math.pow(2,14),Cq=Math.pow(2,21),Aq=Math.pow(2,28),Nq=Math.pow(2,35),Tq=Math.pow(2,42),Iq=Math.pow(2,49),Dq=Math.pow(2,56),Oq=Math.pow(2,63),_q=function(t){return t<Eq?1:t<Sq?2:t<Cq?3:t<Aq?4:t<Nq?5:t<Tq?6:t<Iq?7:t<Dq?8:t<Oq?9:10},Mq={encode:yq,decode:bq,encodingLength:_q},uO=Mq;const aT=(t,e,n=0)=>(uO.encode(t,e,n),e),oT=t=>uO.encodingLength(t),zb=(t,e)=>{const n=e.byteLength,s=oT(t),i=s+oT(n),r=new Uint8Array(i+n);return aT(t,r,0),aT(n,r,s),r.set(e,i),new Rq(t,n,e,r)};let Rq=class{constructor(e,n,s,i){this.code=e,this.size=n,this.digest=s,this.bytes=i}};const fO=({name:t,code:e,encode:n})=>new Pq(t,e,n);let Pq=class{constructor(e,n,s){this.name=e,this.code=n,this.encode=s}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?zb(this.code,n):n.then(s=>zb(this.code,s))}else throw Error("Unknown type, must be binary type")}};const dO=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$q=fO({name:"sha2-256",code:18,encode:dO("SHA-256")}),Uq=fO({name:"sha2-512",code:19,encode:dO("SHA-512")});var Lq=Object.freeze({__proto__:null,sha256:$q,sha512:Uq});const hO=0,kq="identity",pO=aO,Bq=t=>zb(hO,pO(t)),jq={code:hO,name:kq,encode:pO,digest:Bq};var zq=Object.freeze({__proto__:null,identity:jq});new TextEncoder,new TextDecoder;const cT={...PV,...UV,...kV,...jV,...FV,...JV,...nq,...rq,...uq,...mq};({...Lq,...zq});function gO(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const lT=gO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),lv=gO("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=iO(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),mO={utf8:lT,"utf-8":lT,hex:cT.base16,latin1:lv,ascii:lv,binary:lv,...cT};function km(t,e="utf8"){const n=mO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ff(t,e="utf8"){const n=mO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qx(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function uT(t){return nl(km(ff(t,Um),nO))}function hm(t){return km(ff(Pa(t),nO),Um)}function yO(t){const e=ff(bV,sT),n=vV+km(rO([e,t]),sT);return[yV,wV,n].join(mV)}function Hq(t){return km(t,Um)}function Fq(t){return ff(t,Um)}function Vq(t){return ff([hm(t.header),hm(t.payload)].join(dm),sO)}function qq(t){return[hm(t.header),hm(t.payload),Hq(t.signature)].join(dm)}function Hb(t){const e=t.split(dm),n=uT(e[0]),s=uT(e[1]),i=Fq(e[2]),r=ff(e.slice(0,2).join(dm),sO);return{header:n,payload:s,signature:i,data:r}}function fT(t=qD(xV)){const e=tO.getPublicKey(t);return{secretKey:rO([t,e]),publicKey:e}}async function Wq(t,e,n,s,i=we.fromMiliseconds(Date.now())){const r={alg:pV,typ:gV},c=yO(s.publicKey),l=i+n,f={iss:c,sub:t,aud:e,iat:i,exp:l},d=Vq({header:r,payload:f}),h=tO.sign(d,s.secretKey.slice(0,32));return qq({header:r,payload:f,signature:h})}var dT=function(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},Gq=(function(){function t(e,n,s){this.name=e,this.version=n,this.os=s,this.type="browser"}return t})(),Kq=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),Yq=(function(){function t(e,n,s,i){this.name=e,this.version=n,this.os=s,this.bot=i,this.type="bot-device"}return t})(),Xq=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),Qq=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),Zq=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Jq=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,hT=3,eW=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Zq]],pT=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function tW(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Qq:typeof navigator<"u"?sW(navigator.userAgent):rW()}function nW(t){return t!==""&&eW.reduce(function(e,n){var s=n[0],i=n[1];if(e)return e;var r=i.exec(t);return!!r&&[s,r]},!1)}function sW(t){var e=nW(t);if(!e)return null;var n=e[0],s=e[1];if(n==="searchbot")return new Xq;var i=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);i?i.length<hT&&(i=dT(dT([],i,!0),aW(hT-i.length),!0)):i=[];var r=i.join("."),c=iW(t),l=Jq.exec(t);return l&&l[1]?new Yq(n,r,c,l[1]):new Gq(n,r,c)}function iW(t){for(var e=0,n=pT.length;e<n;e++){var s=pT[e],i=s[0],r=s[1],c=r.exec(t);if(c)return i}return null}function rW(){var t=typeof process<"u"&&process.version;return t?new Kq(process.version.slice(1)):null}function aW(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ot={},gT;function wO(){if(gT)return Ot;gT=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.getLocalStorage=Ot.getLocalStorageOrThrow=Ot.getCrypto=Ot.getCryptoOrThrow=Ot.getLocation=Ot.getLocationOrThrow=Ot.getNavigator=Ot.getNavigatorOrThrow=Ot.getDocument=Ot.getDocumentOrThrow=Ot.getFromWindowOrThrow=Ot.getFromWindow=void 0;function t(m){let y;return typeof window<"u"&&typeof window[m]<"u"&&(y=window[m]),y}Ot.getFromWindow=t;function e(m){const y=t(m);if(!y)throw new Error(`${m} is not defined in Window`);return y}Ot.getFromWindowOrThrow=e;function n(){return e("document")}Ot.getDocumentOrThrow=n;function s(){return t("document")}Ot.getDocument=s;function i(){return e("navigator")}Ot.getNavigatorOrThrow=i;function r(){return t("navigator")}Ot.getNavigator=r;function c(){return e("location")}Ot.getLocationOrThrow=c;function l(){return t("location")}Ot.getLocation=l;function f(){return e("crypto")}Ot.getCryptoOrThrow=f;function d(){return t("crypto")}Ot.getCrypto=d;function h(){return e("localStorage")}Ot.getLocalStorageOrThrow=h;function g(){return t("localStorage")}return Ot.getLocalStorage=g,Ot}var $a=wO(),Nd={},mT;function oW(){if(mT)return Nd;mT=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.getWindowMetadata=void 0;const t=wO();function e(){let n,s;try{n=t.getDocumentOrThrow(),s=t.getLocationOrThrow()}catch{return null}function i(){const y=n.getElementsByTagName("link"),w=[];for(let v=0;v<y.length;v++){const x=y[v],C=x.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const D=x.getAttribute("href");if(D)if(D.toLowerCase().indexOf("https:")===-1&&D.toLowerCase().indexOf("http:")===-1&&D.indexOf("//")!==0){let N=s.protocol+"//"+s.host;if(D.indexOf("/")===0)N+=D;else{const I=s.pathname.split("/");I.pop();const S=I.join("/");N+=S+"/"+D}w.push(N)}else if(D.indexOf("//")===0){const N=s.protocol+D;w.push(N)}else w.push(D)}}return w}function r(...y){const w=n.getElementsByTagName("meta");for(let v=0;v<w.length;v++){const x=w[v],C=["itemprop","property","name"].map(D=>x.getAttribute(D)).filter(D=>D?y.includes(D):!1);if(C.length&&C){const D=x.getAttribute("content");if(D)return D}}return""}function c(){let y=r("name","og:site_name","og:title","twitter:title");return y||(y=n.title),y}function l(){return r("description","og:description","twitter:description","keywords")}const f=c(),d=l(),h=s.origin,g=i();return{description:d,url:h,icons:g,name:f}}return Nd.getWindowMetadata=e,Nd}var cW=oW();function Ih(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Fb(t){return Ih(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const vO="2.31.0";let uv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${vO}`},Bm=class Vb extends Error{constructor(e,n={}){const s=n.cause instanceof Vb?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof Vb&&n.cause.docsPath||n.docsPath,r=uv.getDocsUrl?.({...n,docsPath:i}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...s?[`Details: ${s}`]:[],...uv.version?[`Version: ${uv.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=vO}walk(e){return bO(this,e)}};function bO(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?bO(t.cause,e):e?null:t}let xO=class extends Bm{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function df(t,{dir:e,size:n=32}={}){return typeof t=="string"?lW(t,{dir:e,size:n}):uW(t,{dir:e,size:n})}function lW(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new xO({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function uW(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new xO({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=e==="right";s[r?i:n-i-1]=t[r?i:t.length-i-1]}return s}let fW=class extends Bm{constructor({max:e,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},dW=class extends Bm{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function hf(t,{size:e}){if(Fb(t)>e)throw new dW({givenSize:Fb(t),maxSize:e})}function qb(t,e={}){const{signed:n}=e;e.size&&hf(t,{size:e.size});const s=BigInt(t);if(!n)return s;const i=(t.length-2)/2,r=(1n<<BigInt(i)*8n-1n)-1n;return s<=r?s:s-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function hW(t,e={}){return Number(qb(t,e))}const pW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Wb(t,e={}){return typeof t=="number"||typeof t=="bigint"?SO(t,e):typeof t=="string"?yW(t,e):typeof t=="boolean"?gW(t,e):EO(t,e)}function gW(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(hf(n,{size:e.size}),df(n,{size:e.size})):n}function EO(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=pW[t[i]];const s=`0x${n}`;return typeof e.size=="number"?(hf(s,{size:e.size}),df(s,{dir:"right",size:e.size})):s}function SO(t,e={}){const{signed:n,size:s}=e,i=BigInt(t);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<c){const f=typeof t=="bigint"?"n":"";throw new fW({max:r?`${r}${f}`:void 0,min:`${c}${f}`,signed:n,size:s,value:`${t}${f}`})}const l=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?df(l,{size:s}):l}const mW=new TextEncoder;function yW(t,e={}){const n=mW.encode(t);return EO(n,e)}const wW=new TextEncoder;function vW(t,e={}){return typeof t=="number"||typeof t=="bigint"?xW(t,e):typeof t=="boolean"?bW(t,e):Ih(t)?CO(t,e):AO(t,e)}function bW(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(hf(n,{size:e.size}),df(n,{size:e.size})):n}const ma={zero:48,nine:57,A:65,F:70,a:97,f:102};function yT(t){if(t>=ma.zero&&t<=ma.nine)return t-ma.zero;if(t>=ma.A&&t<=ma.F)return t-(ma.A-10);if(t>=ma.a&&t<=ma.f)return t-(ma.a-10)}function CO(t,e={}){let n=t;e.size&&(hf(n,{size:e.size}),n=df(n,{dir:"right",size:e.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,r=new Uint8Array(i);for(let c=0,l=0;c<i;c++){const f=yT(s.charCodeAt(l++)),d=yT(s.charCodeAt(l++));if(f===void 0||d===void 0)throw new Bm(`Invalid byte sequence ("${s[l-2]}${s[l-1]}" in "${s}").`);r[c]=f*16+d}return r}function xW(t,e){const n=SO(t,e);return CO(n)}function AO(t,e={}){const n=wW.encode(t);return typeof e.size=="number"?(hf(n,{size:e.size}),df(n,{dir:"right",size:e.size})):n}const c0=BigInt(2**32-1),wT=BigInt(32);function EW(t,e=!1){return e?{h:Number(t&c0),l:Number(t>>wT&c0)}:{h:Number(t>>wT&c0)|0,l:Number(t&c0)|0}}function SW(t,e=!1){const n=t.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let r=0;r<n;r++){const{h:c,l}=EW(t[r],e);[s[r],i[r]]=[c,l]}return[s,i]}const CW=(t,e,n)=>t<<n|e>>>32-n,AW=(t,e,n)=>e<<n|t>>>32-n,NW=(t,e,n)=>e<<n-32|t>>>64-n,TW=(t,e,n)=>t<<n-32|e>>>64-n,ou=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function IW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Dh(t,...e){if(!IW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wle(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");pm(t.outputLen),pm(t.blockLen)}function vT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function DW(t,e){Dh(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function OW(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function NO(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function vle(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ble(t,e){return t<<32-e|t>>>e}const _W=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function MW(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function RW(t){for(let e=0;e<t.length;e++)t[e]=MW(t[e]);return t}const bT=_W?t=>t:RW;function PW(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function TO(t){return typeof t=="string"&&(t=PW(t)),Dh(t),t}function xle(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];Dh(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}class $W{}function UW(t){const e=s=>t().update(TO(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ele(t=32){if(ou&&typeof ou.getRandomValues=="function")return ou.getRandomValues(new Uint8Array(t));if(ou&&typeof ou.randomBytes=="function")return Uint8Array.from(ou.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const LW=BigInt(0),Td=BigInt(1),kW=BigInt(2),BW=BigInt(7),jW=BigInt(256),zW=BigInt(113),IO=[],DO=[],OO=[];for(let t=0,e=Td,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],IO.push(2*(5*s+n)),DO.push((t+1)*(t+2)/2%64);let i=LW;for(let r=0;r<7;r++)e=(e<<Td^(e>>BW)*zW)%jW,e&kW&&(i^=Td<<(Td<<BigInt(r))-Td);OO.push(i)}const _O=SW(OO,!0),HW=_O[0],FW=_O[1],xT=(t,e,n)=>n>32?NW(t,e,n):CW(t,e,n),ET=(t,e,n)=>n>32?TW(t,e,n):AW(t,e,n);function VW(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,f=(c+2)%10,d=n[f],h=n[f+1],g=xT(d,h,1)^n[l],m=ET(d,h,1)^n[l+1];for(let y=0;y<50;y+=10)t[c+y]^=g,t[c+y+1]^=m}let i=t[2],r=t[3];for(let c=0;c<24;c++){const l=DO[c],f=xT(i,r,l),d=ET(i,r,l),h=IO[c];i=t[h],r=t[h+1],t[h]=f,t[h+1]=d}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=HW[s],t[1]^=FW[s]}NO(n)}class Wx extends $W{constructor(e,n,s,i=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=r,pm(s),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=OW(this.state)}clone(){return this._cloneInto()}keccak(){bT(this.state32),VW(this.state32,this.rounds),bT(this.state32),this.posOut=0,this.pos=0}update(e){vT(this),e=TO(e),Dh(e);const{blockLen:n,state:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(n-this.pos,i-r);for(let l=0;l<c;l++)s[this.pos++]^=e[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:i}=this;e[s]^=n,(n&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){vT(this,!1),Dh(e),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,r=e.length;i<r;){this.posOut>=s&&this.keccak();const c=Math.min(s-this.posOut,r-i);e.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return pm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(DW(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,NO(this.state)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:i,rounds:r,enableXOF:c}=this;return e||(e=new Wx(n,s,i,c,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const qW=(t,e,n)=>UW(()=>new Wx(e,t,n)),WW=qW(1,136,256/8);function MO(t,e){const n=e||"hex",s=WW(Ih(t,{strict:!1})?vW(t):t);return n==="bytes"?s:Wb(s)}let GW=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}};const fv=new GW(8192);function KW(t,e){if(fv.has(`${t}.${e}`))return fv.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),s=MO(AO(n),"bytes"),i=n.split("");for(let c=0;c<40;c+=2)s[c>>1]>>4>=8&&i[c]&&(i[c]=i[c].toUpperCase()),(s[c>>1]&15)>=8&&i[c+1]&&(i[c+1]=i[c+1].toUpperCase());const r=`0x${i.join("")}`;return fv.set(`${t}.${e}`,r),r}function YW(t){const e=MO(`0x${t.substring(4)}`).substring(26);return KW(`0x${e}`)}async function XW({hash:t,signature:e}){const n=Ih(t)?t:Wb(t),{secp256k1:s}=await Sh(async()=>{const{secp256k1:c}=await import("./secp256k1-DtBXxA24.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:h,v:g,yParity:m}=e,y=Number(m??g),w=ST(y);return new s.Signature(qb(d),qb(h)).addRecoveryBit(w)}const c=Ih(e)?e:Wb(e);if(Fb(c)!==65)throw new Error("invalid signature length");const l=hW(`0x${c.slice(130)}`),f=ST(l);return s.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(f)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ST(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function QW({hash:t,signature:e}){return YW(await XW({hash:t,signature:e}))}function ZW(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){const h=t.charAt(d),g=h.charCodeAt(0);if(e[g]!==255)throw new TypeError(h+" is ambiguous");e[g]=d}const n=t.length,s=t.charAt(0),i=Math.log(n)/Math.log(256),r=Math.log(256)/Math.log(n);function c(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let h=0,g=0,m=0;const y=d.length;for(;m!==y&&d[m]===0;)m++,h++;const w=(y-m)*r+1>>>0,v=new Uint8Array(w);for(;m!==y;){let D=d[m],N=0;for(let I=w-1;(D!==0||N<g)&&I!==-1;I--,N++)D+=256*v[I]>>>0,v[I]=D%n>>>0,D=D/n>>>0;if(D!==0)throw new Error("Non-zero carry");g=N,m++}let x=w-g;for(;x!==w&&v[x]===0;)x++;let C=s.repeat(h);for(;x<w;++x)C+=t.charAt(v[x]);return C}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let h=0,g=0,m=0;for(;d[h]===s;)g++,h++;const y=(d.length-h)*i+1>>>0,w=new Uint8Array(y);for(;h<d.length;){const D=d.charCodeAt(h);if(D>255)return;let N=e[D];if(N===255)return;let I=0;for(let S=y-1;(N!==0||I<m)&&S!==-1;S--,I++)N+=n*w[S]>>>0,w[S]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,h++}let v=y-m;for(;v!==y&&w[v]===0;)v++;const x=new Uint8Array(g+(y-v));let C=g;for(;v!==y;)x[C++]=w[v++];return x}function f(d){const h=l(d);if(h)return h;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:l,decode:f}}var JW="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const pf=ZW(JW);function eG(t){const e=t.length;let n=0,s=0;for(;s<e;){let i=t.charCodeAt(s++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&s<e){const r=t.charCodeAt(s);(r&64512)===56320&&(++s,i=((i&1023)<<10)+(r&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function tG(t,e,n){const s=t.length;let i=n,r=0;for(;r<s;){let c=t.charCodeAt(r++);if((c&4294967168)===0){e[i++]=c;continue}else if((c&4294965248)===0)e[i++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&r<s){const l=t.charCodeAt(r);(l&64512)===56320&&(++r,c=((c&1023)<<10)+(l&1023)+65536)}(c&4294901760)===0?(e[i++]=c>>12&15|224,e[i++]=c>>6&63|128):(e[i++]=c>>18&7|240,e[i++]=c>>12&63|128,e[i++]=c>>6&63|128)}e[i++]=c&63|128}}const nG=new TextEncoder,sG=50;function iG(t,e,n){nG.encodeInto(t,e.subarray(n))}function rG(t,e,n){t.length>sG?iG(t,e,n):tG(t,e,n)}const aG=4096;function RO(t,e,n){let s=e;const i=s+n,r=[];let c="";for(;s<i;){const l=t[s++];if((l&128)===0)r.push(l);else if((l&224)===192){const f=t[s++]&63;r.push((l&31)<<6|f)}else if((l&240)===224){const f=t[s++]&63,d=t[s++]&63;r.push((l&31)<<12|f<<6|d)}else if((l&248)===240){const f=t[s++]&63,d=t[s++]&63,h=t[s++]&63;let g=(l&7)<<18|f<<12|d<<6|h;g>65535&&(g-=65536,r.push(g>>>10&1023|55296),g=56320|g&1023),r.push(g)}else r.push(l);r.length>=aG&&(c+=String.fromCharCode(...r),r.length=0)}return r.length>0&&(c+=String.fromCharCode(...r)),c}const oG=new TextDecoder,cG=200;function lG(t,e,n){const s=t.subarray(e,e+n);return oG.decode(s)}function uG(t,e,n){return n>cG?lG(t,e,n):RO(t,e,n)}class l0{constructor(e,n){this.type=e,this.data=n}}class Ys extends Error{constructor(e){super(e);const n=Object.create(Ys.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ys.name})}}const Id=4294967295;function fG(t,e,n){const s=n/4294967296,i=n;t.setUint32(e,s),t.setUint32(e+4,i)}function PO(t,e,n){const s=Math.floor(n/4294967296),i=n;t.setUint32(e,s),t.setUint32(e+4,i)}function $O(t,e){const n=t.getInt32(e),s=t.getUint32(e+4);return n*4294967296+s}function dG(t,e){const n=t.getUint32(e),s=t.getUint32(e+4);return n*4294967296+s}const hG=-1,pG=4294967296-1,gG=17179869184-1;function mG({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=gG)if(e===0&&t<=pG){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,s=t&4294967295,i=new Uint8Array(8),r=new DataView(i.buffer);return r.setUint32(0,e<<2|n&3),r.setUint32(4,s),i}else{const n=new Uint8Array(12),s=new DataView(n.buffer);return s.setUint32(0,e),PO(s,4,t),n}}function yG(t){const e=t.getTime(),n=Math.floor(e/1e3),s=(e-n*1e3)*1e6,i=Math.floor(s/1e9);return{sec:n+i,nsec:s-i*1e9}}function wG(t){if(t instanceof Date){const e=yG(t);return mG(e)}else return null}function vG(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),s=e.getUint32(4),i=(n&3)*4294967296+s,r=n>>>2;return{sec:i,nsec:r}}case 12:{const n=$O(e,4),s=e.getUint32(0);return{sec:n,nsec:s}}default:throw new Ys(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function bG(t){const e=vG(t);return new Date(e.sec*1e3+e.nsec/1e6)}const xG={type:hG,encode:wG,decode:bG};class gm{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(xG)}register({type:e,encode:n,decode:s}){if(e>=0)this.encoders[e]=n,this.decoders[e]=s;else{const i=-1-e;this.builtInEncoders[i]=n,this.builtInDecoders[i]=s}}tryToEncode(e,n){for(let s=0;s<this.builtInEncoders.length;s++){const i=this.builtInEncoders[s];if(i!=null){const r=i(e,n);if(r!=null){const c=-1-s;return new l0(c,r)}}}for(let s=0;s<this.encoders.length;s++){const i=this.encoders[s];if(i!=null){const r=i(e,n);if(r!=null){const c=s;return new l0(c,r)}}}return e instanceof l0?e:null}decode(e,n,s){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(e,n,s):new l0(n,e)}}gm.defaultCodec=new gm;function EG(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Gb(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):EG(t)?new Uint8Array(t):Uint8Array.from(t)}const SG=100,CG=2048;let AG=class UO{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??gm.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??SG,this.initialBufferSize=e?.initialBufferSize??CG,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new UO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),s=new Uint8Array(n),i=new DataView(n);s.set(this.bytes),this.view=i,this.bytes=s}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const s=eG(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),rG(e,this.bytes,this.pos),this.pos+=s}encodeObject(e,n){const s=this.extensionCodec.tryToEncode(e,this.context);if(s!=null)this.encodeExtension(s);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const s=Gb(e);this.writeU8a(s)}encodeArray(e,n){const s=e.length;if(s<16)this.writeU8(144+s);else if(s<65536)this.writeU8(220),this.writeU16(s);else if(s<4294967296)this.writeU8(221),this.writeU32(s);else throw new Error(`Too large array: ${s}`);for(const i of e)this.doEncode(i,n+1)}countWithoutUndefined(e,n){let s=0;for(const i of n)e[i]!==void 0&&s++;return s}encodeMap(e,n){const s=Object.keys(e);this.sortKeys&&s.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,s):s.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const r of s){const c=e[r];this.ignoreUndefined&&c===void 0||(this.encodeString(r),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const s=e.data(this.pos+6),i=s.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(s);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),fG(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),PO(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function NG(t,e){return new AG(e).encodeSharedRef(t)}function dv(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const TG=16,IG=16;class DG{constructor(e=TG,n=IG){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let s=0;s<this.maxKeyLength;s++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,s){const i=this.caches[s-1];e:for(const r of i){const c=r.bytes;for(let l=0;l<s;l++)if(c[l]!==e[n+l])continue e;return r.str}return null}store(e,n){const s=this.caches[e.length-1],i={bytes:e,str:n};s.length>=this.maxLengthPerKey?s[Math.random()*s.length|0]=i:s.push(i)}decode(e,n,s){const i=this.find(e,n,s);if(i!=null)return this.hit++,i;this.miss++;const r=RO(e,n,s),c=Uint8Array.prototype.slice.call(e,n,n+s);return this.store(c,r),r}}const Kb="array",nh="map_key",LO="map_value",OG=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ys("The type of key must be string or number but "+typeof t)};class _G{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Kb,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=nh,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Kb){const s=e;s.size=0,s.array=void 0,s.position=0,s.type=void 0}if(e.type===nh||e.type===LO){const s=e;s.size=0,s.map=void 0,s.readCount=0,s.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Dd=-1,Gx=new DataView(new ArrayBuffer(0)),MG=new Uint8Array(Gx.buffer);try{Gx.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const CT=new RangeError("Insufficient data"),RG=new DG;let PG=class kO{constructor(e){this.totalPos=0,this.pos=0,this.view=Gx,this.bytes=MG,this.headByte=Dd,this.stack=new _G,this.entered=!1,this.extensionCodec=e?.extensionCodec??gm.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Id,this.maxBinLength=e?.maxBinLength??Id,this.maxArrayLength=e?.maxArrayLength??Id,this.maxMapLength=e?.maxMapLength??Id,this.maxExtLength=e?.maxExtLength??Id,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:RG,this.mapKeyConverter=e?.mapKeyConverter??OG}clone(){return new kO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Dd,this.stack.reset()}setBuffer(e){const n=Gb(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Dd&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),s=Gb(e),i=new Uint8Array(n.length+s.length);i.set(n),i.set(s,n.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:s}=this;return new RangeError(`Extra ${n.byteLength-s} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,s;for await(const l of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{s=this.doDecodeSync(),n=!0}catch(f){if(!(f instanceof RangeError))throw f}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:i,pos:r,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${dv(i)} at ${c} (${r} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let s=n,i=-1;for await(const r of e){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(r),s&&(i=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=e-160;n=this.decodeString(i,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ys(`Unrecognized type byte: ${dv(e)}`);this.complete();const s=this.stack;for(;s.length>0;){const i=s.top();if(i.type===Kb)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,s.release(i);else continue e;else if(i.type===nh){if(n==="__proto__")throw new Ys("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=LO;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,s.release(i);else{i.key=null,i.type=nh;continue e}}return n}}readHeadByte(){return this.headByte===Dd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Dd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ys(`Unrecognized array type byte: ${dv(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ys(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ys(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new Ys(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw CT;const s=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,s,e):i=uG(this.bytes,s,e),this.pos+=n+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===nh:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ys(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw CT;const s=this.pos+n,i=this.bytes.subarray(s,s+e);return this.pos+=n+e,i}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ys(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+n),i=this.decodeBinary(e,n+1);return this.extensionCodec.decode(i,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=dG(this.view,this.pos);return this.pos+=8,e}readI64(){const e=$O(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function $G(t,e){return new PG(e).decode(t)}function Kx(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function BO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kx(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function sh(t,e){e||(e=t.reduce((i,r)=>i+r.length,0));const n=BO(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return Kx(n)}function UG(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,x=0,C=0,D=w.length;C!==D&&w[C]===0;)C++,v++;for(var N=(D-C)*h+1>>>0,I=new Uint8Array(N);C!==D;){for(var S=w[C],A=0,O=N-1;(S!==0||A<x)&&O!==-1;O--,A++)S+=256*I[O]>>>0,I[O]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");x=A,C++}for(var T=N-x;T!==N&&I[T]===0;)T++;for(var _=f.repeat(v);T<N;++T)_+=t.charAt(I[T]);return _}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var x=0,C=0;w[v]===f;)x++,v++;for(var D=(w.length-v)*d+1>>>0,N=new Uint8Array(D);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=D-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var O=D-C;O!==D&&N[O]===0;)O++;for(var T=new Uint8Array(x+(D-O)),_=x;O!==D;)T[_++]=N[O++];return T}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var LG=UG,kG=LG;const BG=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jG=t=>new TextEncoder().encode(t),zG=t=>new TextDecoder().decode(t);class HG{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class FG{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jO(this,e)}}class VG{constructor(e){this.decoders=e}or(e){return jO(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jO=(t,e)=>new VG({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qG{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new HG(e,n,s),this.decoder=new FG(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const jm=({name:t,prefix:e,encode:n,decode:s})=>new qG(t,e,n,s),yp=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=kG(n,e);return jm({prefix:t,name:e,encode:s,decode:r=>BG(i(r))})},WG=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},GG=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},zn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>jm({prefix:e,name:t,encode(i){return GG(i,s,n)},decode(i){return WG(i,s,n,t)}}),KG=jm({prefix:"\0",name:"identity",encode:t=>zG(t),decode:t=>jG(t)}),YG=Object.freeze(Object.defineProperty({__proto__:null,identity:KG},Symbol.toStringTag,{value:"Module"})),XG=zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QG=Object.freeze(Object.defineProperty({__proto__:null,base2:XG},Symbol.toStringTag,{value:"Module"})),ZG=zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),JG=Object.freeze(Object.defineProperty({__proto__:null,base8:ZG},Symbol.toStringTag,{value:"Module"})),eK=yp({prefix:"9",name:"base10",alphabet:"0123456789"}),tK=Object.freeze(Object.defineProperty({__proto__:null,base10:eK},Symbol.toStringTag,{value:"Module"})),nK=zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sK=zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),iK=Object.freeze(Object.defineProperty({__proto__:null,base16:nK,base16upper:sK},Symbol.toStringTag,{value:"Module"})),rK=zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aK=zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oK=zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cK=zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lK=zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uK=zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fK=zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dK=zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hK=zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),pK=Object.freeze(Object.defineProperty({__proto__:null,base32:rK,base32hex:lK,base32hexpad:fK,base32hexpadupper:dK,base32hexupper:uK,base32pad:oK,base32padupper:cK,base32upper:aK,base32z:hK},Symbol.toStringTag,{value:"Module"})),gK=yp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mK=yp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yK=Object.freeze(Object.defineProperty({__proto__:null,base36:gK,base36upper:mK},Symbol.toStringTag,{value:"Module"})),wK=yp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vK=yp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bK=Object.freeze(Object.defineProperty({__proto__:null,base58btc:wK,base58flickr:vK},Symbol.toStringTag,{value:"Module"})),xK=zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),EK=zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),SK=zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),CK=zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),AK=Object.freeze(Object.defineProperty({__proto__:null,base64:xK,base64pad:EK,base64url:SK,base64urlpad:CK},Symbol.toStringTag,{value:"Module"})),zO=Array.from(""),NK=zO.reduce((t,e,n)=>(t[n]=e,t),[]),TK=zO.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function IK(t){return t.reduce((e,n)=>(e+=NK[n],e),"")}function DK(t){const e=[];for(const n of t){const s=TK[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const OK=jm({prefix:"",name:"base256emoji",encode:IK,decode:DK}),_K=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:OK},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const AT={...YG,...QG,...JG,...tK,...iK,...pK,...yK,...bK,...AK,..._K};function HO(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const NT=HO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),hv=HO("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=BO(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),FO={utf8:NT,"utf-8":NT,hex:AT.base16,latin1:hv,ascii:hv,binary:hv,...AT};function _i(t,e="utf8"){const n=FO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kx(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Rs(t,e="utf8"){const n=FO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const MK={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var pv,TT;function VO(){if(TT)return pv;TT=1;const t="Input must be an string, Buffer or Uint8Array";function e(c){let l;if(c instanceof Uint8Array)l=c;else if(typeof c=="string")l=new TextEncoder().encode(c);else throw new Error(t);return l}function n(c){return Array.prototype.map.call(c,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function s(c){return(4294967296+c).toString(16).substring(1)}function i(c,l,f){let d=`
`+c+" = ";for(let h=0;h<l.length;h+=2){if(f===32)d+=s(l[h]).toUpperCase(),d+=" ",d+=s(l[h+1]).toUpperCase();else if(f===64)d+=s(l[h+1]).toUpperCase(),d+=s(l[h]).toUpperCase();else throw new Error("Invalid size "+f);h%6===4?d+=`
`+new Array(c.length+4).join(" "):h<l.length-2&&(d+=" ")}console.log(d)}function r(c,l,f){let d=new Date().getTime();const h=new Uint8Array(l);for(let m=0;m<l;m++)h[m]=m%256;const g=new Date().getTime();console.log("Generated random input in "+(g-d)+"ms"),d=g;for(let m=0;m<f;m++){const y=c(h),w=new Date().getTime(),v=w-d;d=w,console.log("Hashed in "+v+"ms: "+y.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(v/1e3)*100)/100+" MB PER SECOND")}}return pv={normalizeInput:e,toHex:n,debugPrint:i,testSpeed:r},pv}var gv,IT;function RK(){if(IT)return gv;IT=1;const t=VO();function e(C,D,N){const I=C[D]+C[N];let S=C[D+1]+C[N+1];I>=4294967296&&S++,C[D]=I,C[D+1]=S}function n(C,D,N,I){let S=C[D]+N;N<0&&(S+=4294967296);let A=C[D+1]+I;S>=4294967296&&A++,C[D]=S,C[D+1]=A}function s(C,D){return C[D]^C[D+1]<<8^C[D+2]<<16^C[D+3]<<24}function i(C,D,N,I,S,A){const O=d[S],T=d[S+1],_=d[A],R=d[A+1];e(f,C,D),n(f,C,O,T);let U=f[I]^f[C],L=f[I+1]^f[C+1];f[I]=L,f[I+1]=U,e(f,N,I),U=f[D]^f[N],L=f[D+1]^f[N+1],f[D]=U>>>24^L<<8,f[D+1]=L>>>24^U<<8,e(f,C,D),n(f,C,_,R),U=f[I]^f[C],L=f[I+1]^f[C+1],f[I]=U>>>16^L<<16,f[I+1]=L>>>16^U<<16,e(f,N,I),U=f[D]^f[N],L=f[D+1]^f[N+1],f[D]=L>>>31^U<<1,f[D+1]=U>>>31^L<<1}const r=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(c.map(function(C){return C*2})),f=new Uint32Array(32),d=new Uint32Array(32);function h(C,D){let N=0;for(N=0;N<16;N++)f[N]=C.h[N],f[N+16]=r[N];for(f[24]=f[24]^C.t,f[25]=f[25]^C.t/4294967296,D&&(f[28]=~f[28],f[29]=~f[29]),N=0;N<32;N++)d[N]=s(C.b,4*N);for(N=0;N<12;N++)i(0,8,16,24,l[N*16+0],l[N*16+1]),i(2,10,18,26,l[N*16+2],l[N*16+3]),i(4,12,20,28,l[N*16+4],l[N*16+5]),i(6,14,22,30,l[N*16+6],l[N*16+7]),i(0,10,20,30,l[N*16+8],l[N*16+9]),i(2,12,22,24,l[N*16+10],l[N*16+11]),i(4,14,16,26,l[N*16+12],l[N*16+13]),i(6,8,18,28,l[N*16+14],l[N*16+15]);for(N=0;N<16;N++)C.h[N]=C.h[N]^f[N]^f[N+16]}const g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function m(C,D,N,I){if(C===0||C>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(D&&D.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(N&&N.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(I&&I.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const S={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:C};g.fill(0),g[0]=C,D&&(g[1]=D.length),g[2]=1,g[3]=1,N&&g.set(N,32),I&&g.set(I,48);for(let A=0;A<16;A++)S.h[A]=r[A]^s(g,A*4);return D&&(y(S,D),S.c=128),S}function y(C,D){for(let N=0;N<D.length;N++)C.c===128&&(C.t+=C.c,h(C,!1),C.c=0),C.b[C.c++]=D[N]}function w(C){for(C.t+=C.c;C.c<128;)C.b[C.c++]=0;h(C,!0);const D=new Uint8Array(C.outlen);for(let N=0;N<C.outlen;N++)D[N]=C.h[N>>2]>>8*(N&3);return D}function v(C,D,N,I,S){N=N||64,C=t.normalizeInput(C),I&&(I=t.normalizeInput(I)),S&&(S=t.normalizeInput(S));const A=m(N,D,I,S);return y(A,C),w(A)}function x(C,D,N,I,S){const A=v(C,D,N,I,S);return t.toHex(A)}return gv={blake2b:v,blake2bHex:x,blake2bInit:m,blake2bUpdate:y,blake2bFinal:w},gv}var mv,DT;function PK(){if(DT)return mv;DT=1;const t=VO();function e(w,v){return w[v]^w[v+1]<<8^w[v+2]<<16^w[v+3]<<24}function n(w,v,x,C,D,N){c[w]=c[w]+c[v]+D,c[C]=s(c[C]^c[w],16),c[x]=c[x]+c[C],c[v]=s(c[v]^c[x],12),c[w]=c[w]+c[v]+N,c[C]=s(c[C]^c[w],8),c[x]=c[x]+c[C],c[v]=s(c[v]^c[x],7)}function s(w,v){return w>>>v^w<<32-v}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),r=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),l=new Uint32Array(16);function f(w,v){let x=0;for(x=0;x<8;x++)c[x]=w.h[x],c[x+8]=i[x];for(c[12]^=w.t,c[13]^=w.t/4294967296,v&&(c[14]=~c[14]),x=0;x<16;x++)l[x]=e(w.b,4*x);for(x=0;x<10;x++)n(0,4,8,12,l[r[x*16+0]],l[r[x*16+1]]),n(1,5,9,13,l[r[x*16+2]],l[r[x*16+3]]),n(2,6,10,14,l[r[x*16+4]],l[r[x*16+5]]),n(3,7,11,15,l[r[x*16+6]],l[r[x*16+7]]),n(0,5,10,15,l[r[x*16+8]],l[r[x*16+9]]),n(1,6,11,12,l[r[x*16+10]],l[r[x*16+11]]),n(2,7,8,13,l[r[x*16+12]],l[r[x*16+13]]),n(3,4,9,14,l[r[x*16+14]],l[r[x*16+15]]);for(x=0;x<8;x++)w.h[x]^=c[x]^c[x+8]}function d(w,v){if(!(w>0&&w<=32))throw new Error("Incorrect output length, should be in [1, 32]");const x=v?v.length:0;if(v&&!(x>0&&x<=32))throw new Error("Incorrect key length, should be in [1, 32]");const C={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:w};return C.h[0]^=16842752^x<<8^w,x>0&&(h(C,v),C.c=64),C}function h(w,v){for(let x=0;x<v.length;x++)w.c===64&&(w.t+=w.c,f(w,!1),w.c=0),w.b[w.c++]=v[x]}function g(w){for(w.t+=w.c;w.c<64;)w.b[w.c++]=0;f(w,!0);const v=new Uint8Array(w.outlen);for(let x=0;x<w.outlen;x++)v[x]=w.h[x>>2]>>8*(x&3)&255;return v}function m(w,v,x){x=x||32,w=t.normalizeInput(w);const C=d(x,v);return h(C,w),g(C)}function y(w,v,x){const C=m(w,v,x);return t.toHex(C)}return mv={blake2s:m,blake2sHex:y,blake2sInit:d,blake2sUpdate:h,blake2sFinal:g},mv}var yv,OT;function $K(){if(OT)return yv;OT=1;const t=RK(),e=PK();return yv={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},yv}var UK=$K(),LK={};const kK=":";function Fu(t){const[e,n]=t.split(kK);return{namespace:e,reference:n}}function qO(t,e){return t.includes(":")?[t]:e.chains||[]}var BK=Object.defineProperty,jK=Object.defineProperties,zK=Object.getOwnPropertyDescriptors,_T=Object.getOwnPropertySymbols,HK=Object.prototype.hasOwnProperty,FK=Object.prototype.propertyIsEnumerable,Yb=(t,e,n)=>e in t?BK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MT=(t,e)=>{for(var n in e||(e={}))HK.call(e,n)&&Yb(t,n,e[n]);if(_T)for(var n of _T(e))FK.call(e,n)&&Yb(t,n,e[n]);return t},VK=(t,e)=>jK(t,zK(e)),RT=(t,e,n)=>Yb(t,typeof e!="symbol"?e+"":e,n);const qK="ReactNative",Js={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},WK="js";function mm(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Qo(){return!$a.getDocument()&&!!$a.getNavigator()&&navigator.product===qK}function GK(){return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function KK(){return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function gf(){return!mm()&&!!$a.getNavigator()&&!!$a.getDocument()}function wp(){return Qo()?Js.reactNative:mm()?Js.node:gf()?Js.browser:Js.unknown}function PT(){var t;try{return Qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function YK(t,e){const n=new URLSearchParams(t);for(const s of Object.keys(e).sort())if(e.hasOwnProperty(s)){const i=e[s];i!==void 0&&n.set(s,i)}return n.toString()}function XK(t){var e,n;const s=WO();try{return t!=null&&t.url&&s.url&&new URL(t.url).host!==new URL(s.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${s.url}. This is probably unintended and can lead to issues.`),t.url=s.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),VK(MT(MT({},s),t),{url:t?.url||s.url,name:t?.name||s.name,description:t?.description||s.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:s.icons})}catch(i){return console.warn("Error populating app metadata",i),t||s}}function WO(){return cW.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function QK(){if(wp()===Js.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:s}=global.Platform;return[n,s].join("-")}const t=tW();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ZK(){var t;const e=wp();return e===Js.browser?[e,((t=$a.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function GO(t,e,n){const s=QK(),i=ZK();return[[t,e].join("-"),[WK,n].join("-"),s,i].join("/")}function JK({protocol:t,version:e,relayUrl:n,sdkVersion:s,auth:i,projectId:r,useOnCloseEvent:c,bundleId:l,packageName:f}){const d=n.split("?"),h=GO(t,e,s),g={auth:i,ua:h,projectId:r,useOnCloseEvent:c,packageName:f||void 0,bundleId:l||void 0},m=YK(d[1]||"",g);return d[0]+"?"+m}function Hc(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Xb(t){return Object.fromEntries(t.entries())}function Qb(t){return new Map(Object.entries(t))}function Pc(t=we.FIVE_MINUTES,e){const n=we.toMiliseconds(t||we.FIVE_MINUTES);let s,i,r,c;return{resolve:l=>{r&&s&&(clearTimeout(r),s(l),c=Promise.resolve(l))},reject:l=>{r&&i&&(clearTimeout(r),i(l))},done:()=>new Promise((l,f)=>{if(c)return l(c);r=setTimeout(()=>{const d=new Error(e);c=Promise.reject(d),f(d)},n),s=l,i=f})}}function Bo(t,e,n){return new Promise(async(s,i)=>{const r=setTimeout(()=>i(new Error(n)),e);try{const c=await t;s(c)}catch(c){i(c)}clearTimeout(r)})}function KO(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function eY(t){return KO("topic",t)}function tY(t){return KO("id",t)}function YO(t){const[e,n]=t.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")s.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))s.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return s}function gn(t,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(t))}function Mo(t){return Date.now()>=we.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}function Br(t=[],e=[]){return[...new Set([...t,...e])]}async function nY({id:t,topic:e,wcDeepLink:n}){var s;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,r=i?.href;if(typeof r!="string")return;const c=sY(r,t,e),l=wp();if(l===Js.browser){if(!((s=$a.getDocument())!=null&&s.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}iY(c)}else l===Js.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}function sY(t,e,n){const s=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const r=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${r}${cY(s,!0)}`}else i=`${i}/wc?${s}`;return i}function iY(t){let e="_self";oY()?e="_top":(aY()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function rY(t,e){let n="";try{if(gf()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(s){console.error(s)}return n}function $T(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),s=n.indexOf(e);return n[s+2]}function UT(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Yx(){return typeof process<"u"&&LK.IS_VITEST==="true"}function aY(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function oY(){try{return window.self!==window.top}catch{return!1}}function cY(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function XO(t){return Buffer.from(t,"base64").toString("utf-8")}function lY(t){return new Promise(e=>setTimeout(e,t))}let uY=class{constructor({limit:e}){RT(this,"limit"),RT(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const u0=BigInt(2**32-1),LT=BigInt(32);function QO(t,e=!1){return e?{h:Number(t&u0),l:Number(t>>LT&u0)}:{h:Number(t>>LT&u0)|0,l:Number(t&u0)|0}}function ZO(t,e=!1){const n=t.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let r=0;r<n;r++){const{h:c,l}=QO(t[r],e);[s[r],i[r]]=[c,l]}return[s,i]}const kT=(t,e,n)=>t>>>n,BT=(t,e,n)=>t<<32-n|e>>>n,Ro=(t,e,n)=>t>>>n|e<<32-n,Po=(t,e,n)=>t<<32-n|e>>>n,Fd=(t,e,n)=>t<<64-n|e>>>n-32,Vd=(t,e,n)=>t>>>n-32|e<<64-n,fY=(t,e)=>e,dY=(t,e)=>t,hY=(t,e,n)=>t<<n|e>>>32-n,pY=(t,e,n)=>e<<n|t>>>32-n,gY=(t,e,n)=>e<<n-32|t>>>64-n,mY=(t,e,n)=>t<<n-32|e>>>64-n;function tr(t,e,n,s){const i=(e>>>0)+(s>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Xx=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Qx=(t,e,n,s)=>e+n+s+(t/2**32|0)|0,yY=(t,e,n,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),wY=(t,e,n,s,i)=>e+n+s+i+(t/2**32|0)|0,vY=(t,e,n,s,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0)+(i>>>0),bY=(t,e,n,s,i,r)=>e+n+s+i+r+(t/2**32|0)|0,cu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Zx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ua(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ri(t,...e){if(!Zx(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Jx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ua(t.outputLen),Ua(t.blockLen)}function Ko(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eE(t,e){Ri(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Oh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Pi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function wv(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Cr(t,e){return t<<32-e|t>>>e}const JO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function e_(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Ea=JO?t=>t:t=>e_(t);function xY(t){for(let e=0;e<t.length;e++)t[e]=e_(t[e]);return t}const $o=JO?t=>t:xY,t_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",EY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _h(t){if(Ri(t),t_)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=EY[t[n]];return e}const ya={_0:48,_9:57,A:65,F:70,a:97,f:102};function jT(t){if(t>=ya._0&&t<=ya._9)return t-ya._0;if(t>=ya.A&&t<=ya.F)return t-(ya.A-10);if(t>=ya.a&&t<=ya.f)return t-(ya.a-10)}function tE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(t_)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(n);for(let i=0,r=0;i<n;i++,r+=2){const c=jT(t.charCodeAt(r)),l=jT(t.charCodeAt(r+1));if(c===void 0||l===void 0){const f=t[r]+t[r+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+r)}s[i]=c*16+l}return s}function SY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function rr(t){return typeof t=="string"&&(t=SY(t)),Ri(t),t}function Fc(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];Ri(i),e+=i.length}const n=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const r=t[s];n.set(r,i),i+=r.length}return n}let zm=class{};function vp(t){const e=s=>t().update(rr(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function CY(t){const e=(s,i)=>t(i).update(rr(s)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=s=>t(s),e}function mf(t=32){if(cu&&typeof cu.getRandomValues=="function")return cu.getRandomValues(new Uint8Array(t));if(cu&&typeof cu.randomBytes=="function")return Uint8Array.from(cu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const AY=BigInt(0),Od=BigInt(1),NY=BigInt(2),TY=BigInt(7),IY=BigInt(256),DY=BigInt(113),n_=[],s_=[],i_=[];for(let t=0,e=Od,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],n_.push(2*(5*s+n)),s_.push((t+1)*(t+2)/2%64);let i=AY;for(let r=0;r<7;r++)e=(e<<Od^(e>>TY)*DY)%IY,e&NY&&(i^=Od<<(Od<<BigInt(r))-Od);i_.push(i)}const r_=ZO(i_,!0),OY=r_[0],_Y=r_[1],zT=(t,e,n)=>n>32?gY(t,e,n):hY(t,e,n),HT=(t,e,n)=>n>32?mY(t,e,n):pY(t,e,n);function MY(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,f=(c+2)%10,d=n[f],h=n[f+1],g=zT(d,h,1)^n[l],m=HT(d,h,1)^n[l+1];for(let y=0;y<50;y+=10)t[c+y]^=g,t[c+y+1]^=m}let i=t[2],r=t[3];for(let c=0;c<24;c++){const l=s_[c],f=zT(i,r,l),d=HT(i,r,l),h=n_[c];i=t[h],r=t[h+1],t[h]=f,t[h+1]=d}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=OY[s],t[1]^=_Y[s]}Pi(n)}let RY=class a_ extends zm{constructor(e,n,s,i=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=r,Ua(s),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Oh(this.state)}clone(){return this._cloneInto()}keccak(){$o(this.state32),MY(this.state32,this.rounds),$o(this.state32),this.posOut=0,this.pos=0}update(e){Ko(this),e=rr(e),Ri(e);const{blockLen:n,state:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(n-this.pos,i-r);for(let l=0;l<c;l++)s[this.pos++]^=e[r++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:i}=this;e[s]^=n,(n&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ko(this,!1),Ri(e),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,r=e.length;i<r;){this.posOut>=s&&this.keccak();const c=Math.min(s-this.posOut,r-i);e.set(n.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ua(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Pi(this.state)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:i,rounds:r,enableXOF:c}=this;return e||(e=new a_(n,s,i,c,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}};const PY=(t,e,n)=>vp(()=>new RY(e,t,n)),$Y=PY(1,136,256/8);function UY(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r),f=s?4:0,d=s?0:4;t.setUint32(e+f,c,s),t.setUint32(e+d,l,s)}function LY(t,e,n){return t&e^~t&n}function kY(t,e,n){return t&e^t&n^e&n}let o_=class extends zm{constructor(e,n,s,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=s,this.isLE=i,this.buffer=new Uint8Array(e),this.view=wv(this.buffer)}update(e){Ko(this),e=rr(e),Ri(e);const{view:n,buffer:s,blockLen:i}=this,r=e.length;for(let c=0;c<r;){const l=Math.min(i-this.pos,r-c);if(l===i){const f=wv(e);for(;i<=r-c;c+=i)this.process(f,c);continue}s.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ko(this),eE(e,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:r}=this;let{pos:c}=this;n[c++]=128,Pi(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(s,0),c=0);for(let g=c;g<i;g++)n[g]=0;UY(s,i-8,BigInt(this.length*8),r),this.process(s,0);const l=wv(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=f/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<d;g++)l.setUint32(4*g,h[g],r)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:r,destroyed:c,pos:l}=this;return e.destroyed=c,e.finished=r,e.length=i,e.pos=l,i%n&&e.buffer.set(s),e}clone(){return this._cloneInto()}};const So=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Yn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),BY=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Co=new Uint32Array(64);let jY=class extends o_{constructor(e=32){super(64,e,8,!1),this.A=So[0]|0,this.B=So[1]|0,this.C=So[2]|0,this.D=So[3]|0,this.E=So[4]|0,this.F=So[5]|0,this.G=So[6]|0,this.H=So[7]|0}get(){const{A:e,B:n,C:s,D:i,E:r,F:c,G:l,H:f}=this;return[e,n,s,i,r,c,l,f]}set(e,n,s,i,r,c,l,f){this.A=e|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=r|0,this.F=c|0,this.G=l|0,this.H=f|0}process(e,n){for(let g=0;g<16;g++,n+=4)Co[g]=e.getUint32(n,!1);for(let g=16;g<64;g++){const m=Co[g-15],y=Co[g-2],w=Cr(m,7)^Cr(m,18)^m>>>3,v=Cr(y,17)^Cr(y,19)^y>>>10;Co[g]=v+Co[g-7]+w+Co[g-16]|0}let{A:s,B:i,C:r,D:c,E:l,F:f,G:d,H:h}=this;for(let g=0;g<64;g++){const m=Cr(l,6)^Cr(l,11)^Cr(l,25),y=h+m+LY(l,f,d)+BY[g]+Co[g]|0,w=(Cr(s,2)^Cr(s,13)^Cr(s,22))+kY(s,i,r)|0;h=d,d=f,f=l,l=c+y|0,c=r,r=i,i=s,s=y+w|0}s=s+this.A|0,i=i+this.B|0,r=r+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(s,i,r,c,l,f,d,h)}roundClean(){Pi(Co)}destroy(){this.set(0,0,0,0,0,0,0,0),Pi(this.buffer)}};const c_=ZO(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zY=c_[0],HY=c_[1],Ao=new Uint32Array(80),No=new Uint32Array(80);let nE=class extends o_{constructor(e=64){super(128,e,16,!1),this.Ah=Yn[0]|0,this.Al=Yn[1]|0,this.Bh=Yn[2]|0,this.Bl=Yn[3]|0,this.Ch=Yn[4]|0,this.Cl=Yn[5]|0,this.Dh=Yn[6]|0,this.Dl=Yn[7]|0,this.Eh=Yn[8]|0,this.El=Yn[9]|0,this.Fh=Yn[10]|0,this.Fl=Yn[11]|0,this.Gh=Yn[12]|0,this.Gl=Yn[13]|0,this.Hh=Yn[14]|0,this.Hl=Yn[15]|0}get(){const{Ah:e,Al:n,Bh:s,Bl:i,Ch:r,Cl:c,Dh:l,Dl:f,Eh:d,El:h,Fh:g,Fl:m,Gh:y,Gl:w,Hh:v,Hl:x}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x){this.Ah=e|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=r|0,this.Cl=c|0,this.Dh=l|0,this.Dl=f|0,this.Eh=d|0,this.El=h|0,this.Fh=g|0,this.Fl=m|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=x|0}process(e,n){for(let N=0;N<16;N++,n+=4)Ao[N]=e.getUint32(n),No[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const I=Ao[N-15]|0,S=No[N-15]|0,A=Ro(I,S,1)^Ro(I,S,8)^kT(I,S,7),O=Po(I,S,1)^Po(I,S,8)^BT(I,S,7),T=Ao[N-2]|0,_=No[N-2]|0,R=Ro(T,_,19)^Fd(T,_,61)^kT(T,_,6),U=Po(T,_,19)^Vd(T,_,61)^BT(T,_,6),L=yY(O,U,No[N-7],No[N-16]),F=wY(L,A,R,Ao[N-7],Ao[N-16]);Ao[N]=F|0,No[N]=L|0}let{Ah:s,Al:i,Bh:r,Bl:c,Ch:l,Cl:f,Dh:d,Dl:h,Eh:g,El:m,Fh:y,Fl:w,Gh:v,Gl:x,Hh:C,Hl:D}=this;for(let N=0;N<80;N++){const I=Ro(g,m,14)^Ro(g,m,18)^Fd(g,m,41),S=Po(g,m,14)^Po(g,m,18)^Vd(g,m,41),A=g&y^~g&v,O=m&w^~m&x,T=vY(D,S,O,HY[N],No[N]),_=bY(T,C,I,A,zY[N],Ao[N]),R=T|0,U=Ro(s,i,28)^Fd(s,i,34)^Fd(s,i,39),L=Po(s,i,28)^Vd(s,i,34)^Vd(s,i,39),F=s&r^s&l^r&l,W=i&c^i&f^c&f;C=v|0,D=x|0,v=y|0,x=w|0,y=g|0,w=m|0,{h:g,l:m}=tr(d|0,h|0,_|0,R|0),d=l|0,h=f|0,l=r|0,f=c|0,r=s|0,c=i|0;const $=Xx(R,L,W);s=Qx($,_,U,F),i=$|0}({h:s,l:i}=tr(this.Ah|0,this.Al|0,s|0,i|0)),{h:r,l:c}=tr(this.Bh|0,this.Bl|0,r|0,c|0),{h:l,l:f}=tr(this.Ch|0,this.Cl|0,l|0,f|0),{h:d,l:h}=tr(this.Dh|0,this.Dl|0,d|0,h|0),{h:g,l:m}=tr(this.Eh|0,this.El|0,g|0,m|0),{h:y,l:w}=tr(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:x}=tr(this.Gh|0,this.Gl|0,v|0,x|0),{h:C,l:D}=tr(this.Hh|0,this.Hl|0,C|0,D|0),this.set(s,i,r,c,l,f,d,h,g,m,y,w,v,x,C,D)}roundClean(){Pi(Ao,No)}destroy(){Pi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},FY=class extends nE{constructor(){super(48),this.Ah=Kn[0]|0,this.Al=Kn[1]|0,this.Bh=Kn[2]|0,this.Bl=Kn[3]|0,this.Ch=Kn[4]|0,this.Cl=Kn[5]|0,this.Dh=Kn[6]|0,this.Dl=Kn[7]|0,this.Eh=Kn[8]|0,this.El=Kn[9]|0,this.Fh=Kn[10]|0,this.Fl=Kn[11]|0,this.Gh=Kn[12]|0,this.Gl=Kn[13]|0,this.Hh=Kn[14]|0,this.Hl=Kn[15]|0}};const Xn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class VY extends nE{constructor(){super(32),this.Ah=Xn[0]|0,this.Al=Xn[1]|0,this.Bh=Xn[2]|0,this.Bl=Xn[3]|0,this.Ch=Xn[4]|0,this.Cl=Xn[5]|0,this.Dh=Xn[6]|0,this.Dl=Xn[7]|0,this.Eh=Xn[8]|0,this.El=Xn[9]|0,this.Fh=Xn[10]|0,this.Fl=Xn[11]|0,this.Gh=Xn[12]|0,this.Gl=Xn[13]|0,this.Hh=Xn[14]|0,this.Hl=Xn[15]|0}}const Hm=vp(()=>new jY),qY=vp(()=>new nE),WY=vp(()=>new FY),GY=vp(()=>new VY),KY=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),dn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Ce=new Uint32Array(32);function To(t,e,n,s,i,r){const c=i[r],l=i[r+1];let f=Ce[2*t],d=Ce[2*t+1],h=Ce[2*e],g=Ce[2*e+1],m=Ce[2*n],y=Ce[2*n+1],w=Ce[2*s],v=Ce[2*s+1],x=Xx(f,h,c);d=Qx(x,d,g,l),f=x|0,{Dh:v,Dl:w}={Dh:v^d,Dl:w^f},{Dh:v,Dl:w}={Dh:fY(v,w),Dl:dY(v)},{h:y,l:m}=tr(y,m,v,w),{Bh:g,Bl:h}={Bh:g^y,Bl:h^m},{Bh:g,Bl:h}={Bh:Ro(g,h,24),Bl:Po(g,h,24)},Ce[2*t]=f,Ce[2*t+1]=d,Ce[2*e]=h,Ce[2*e+1]=g,Ce[2*n]=m,Ce[2*n+1]=y,Ce[2*s]=w,Ce[2*s+1]=v}function Io(t,e,n,s,i,r){const c=i[r],l=i[r+1];let f=Ce[2*t],d=Ce[2*t+1],h=Ce[2*e],g=Ce[2*e+1],m=Ce[2*n],y=Ce[2*n+1],w=Ce[2*s],v=Ce[2*s+1],x=Xx(f,h,c);d=Qx(x,d,g,l),f=x|0,{Dh:v,Dl:w}={Dh:v^d,Dl:w^f},{Dh:v,Dl:w}={Dh:Ro(v,w,16),Dl:Po(v,w,16)},{h:y,l:m}=tr(y,m,v,w),{Bh:g,Bl:h}={Bh:g^y,Bl:h^m},{Bh:g,Bl:h}={Bh:Fd(g,h,63),Bl:Vd(g,h,63)},Ce[2*t]=f,Ce[2*t+1]=d,Ce[2*e]=h,Ce[2*e+1]=g,Ce[2*n]=m,Ce[2*n+1]=y,Ce[2*s]=w,Ce[2*s+1]=v}function YY(t,e={},n,s,i){if(Ua(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:r,salt:c,personalization:l}=e;if(r!==void 0&&(r.length<1||r.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==s)throw new Error("salt must be undefined or "+s);if(l!==void 0&&l.length!==i)throw new Error("personalization must be undefined or "+i)}class XY extends zm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ua(e),Ua(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Oh(this.buffer)}update(e){Ko(this),e=rr(e),Ri(e);const{blockLen:n,buffer:s,buffer32:i}=this,r=e.length,c=e.byteOffset,l=e.buffer;for(let f=0;f<r;){this.pos===n&&($o(i),this.compress(i,0,!1),$o(i),this.pos=0);const d=Math.min(n-this.pos,r-f),h=c+f;if(d===n&&!(h%4)&&f+d<r){const g=new Uint32Array(l,h,Math.floor((r-f)/4));$o(g);for(let m=0;f+n<r;m+=i.length,f+=n)this.length+=n,this.compress(g,m,!1);$o(g);continue}s.set(e.subarray(f,f+d),this.pos),this.pos+=d,this.length+=d,f+=d}return this}digestInto(e){Ko(this),eE(e,this);const{pos:n,buffer32:s}=this;this.finished=!0,Pi(this.buffer.subarray(n)),$o(s),this.compress(s,0,!0),$o(s);const i=Oh(e);this.get().forEach((r,c)=>i[c]=Ea(r))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}_cloneInto(e){const{buffer:n,length:s,finished:i,destroyed:r,outputLen:c,pos:l}=this;return e||(e=new this.constructor({dkLen:c})),e.set(...this.get()),e.buffer.set(n),e.destroyed=r,e.finished=i,e.length=s,e.pos=l,e.outputLen=c,e}clone(){return this._cloneInto()}}class QY extends XY{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=dn[0]|0,this.v0h=dn[1]|0,this.v1l=dn[2]|0,this.v1h=dn[3]|0,this.v2l=dn[4]|0,this.v2h=dn[5]|0,this.v3l=dn[6]|0,this.v3h=dn[7]|0,this.v4l=dn[8]|0,this.v4h=dn[9]|0,this.v5l=dn[10]|0,this.v5h=dn[11]|0,this.v6l=dn[12]|0,this.v6h=dn[13]|0,this.v7l=dn[14]|0,this.v7h=dn[15]|0,YY(n,e,64,16,16);let{key:s,personalization:i,salt:r}=e,c=0;if(s!==void 0&&(s=rr(s),c=s.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,r!==void 0){r=rr(r);const l=Oh(r);this.v4l^=Ea(l[0]),this.v4h^=Ea(l[1]),this.v5l^=Ea(l[2]),this.v5h^=Ea(l[3])}if(i!==void 0){i=rr(i);const l=Oh(i);this.v6l^=Ea(l[0]),this.v6h^=Ea(l[1]),this.v7l^=Ea(l[2]),this.v7h^=Ea(l[3])}if(s!==void 0){const l=new Uint8Array(this.blockLen);l.set(s),this.update(l)}}get(){let{v0l:e,v0h:n,v1l:s,v1h:i,v2l:r,v2h:c,v3l:l,v3h:f,v4l:d,v4h:h,v5l:g,v5h:m,v6l:y,v6h:w,v7l:v,v7h:x}=this;return[e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x]}set(e,n,s,i,r,c,l,f,d,h,g,m,y,w,v,x){this.v0l=e|0,this.v0h=n|0,this.v1l=s|0,this.v1h=i|0,this.v2l=r|0,this.v2h=c|0,this.v3l=l|0,this.v3h=f|0,this.v4l=d|0,this.v4h=h|0,this.v5l=g|0,this.v5h=m|0,this.v6l=y|0,this.v6h=w|0,this.v7l=v|0,this.v7h=x|0}compress(e,n,s){this.get().forEach((f,d)=>Ce[d]=f),Ce.set(dn,16);let{h:i,l:r}=QO(BigInt(this.length));Ce[24]=dn[8]^r,Ce[25]=dn[9]^i,s&&(Ce[28]=~Ce[28],Ce[29]=~Ce[29]);let c=0;const l=KY;for(let f=0;f<12;f++)To(0,4,8,12,e,n+2*l[c++]),Io(0,4,8,12,e,n+2*l[c++]),To(1,5,9,13,e,n+2*l[c++]),Io(1,5,9,13,e,n+2*l[c++]),To(2,6,10,14,e,n+2*l[c++]),Io(2,6,10,14,e,n+2*l[c++]),To(3,7,11,15,e,n+2*l[c++]),Io(3,7,11,15,e,n+2*l[c++]),To(0,5,10,15,e,n+2*l[c++]),Io(0,5,10,15,e,n+2*l[c++]),To(1,6,11,12,e,n+2*l[c++]),Io(1,6,11,12,e,n+2*l[c++]),To(2,7,8,13,e,n+2*l[c++]),Io(2,7,8,13,e,n+2*l[c++]),To(3,4,9,14,e,n+2*l[c++]),Io(3,4,9,14,e,n+2*l[c++]);this.v0l^=Ce[0]^Ce[16],this.v0h^=Ce[1]^Ce[17],this.v1l^=Ce[2]^Ce[18],this.v1h^=Ce[3]^Ce[19],this.v2l^=Ce[4]^Ce[20],this.v2h^=Ce[5]^Ce[21],this.v3l^=Ce[6]^Ce[22],this.v3h^=Ce[7]^Ce[23],this.v4l^=Ce[8]^Ce[24],this.v4h^=Ce[9]^Ce[25],this.v5l^=Ce[10]^Ce[26],this.v5h^=Ce[11]^Ce[27],this.v6l^=Ce[12]^Ce[28],this.v6h^=Ce[13]^Ce[29],this.v7l^=Ce[14]^Ce[30],this.v7h^=Ce[15]^Ce[31],Pi(Ce)}destroy(){this.destroyed=!0,Pi(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ZY=CY(t=>new QY(t)),JY="https://rpc.walletconnect.org/v1";function l_(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from($Y(n)).toString("hex")}async function eX(t,e,n,s,i,r){switch(n.t){case"eip191":return await tX(t,e,n.s);case"eip1271":return await nX(t,e,n.s,s,i,r);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function tX(t,e,n){return(await QW({hash:l_(e),signature:n})).toLowerCase()===t.toLowerCase()}async function nX(t,e,n,s,i,r){const c=Fu(s);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${s}`);try{const l="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",d=n.substring(2),h=(d.length/2).toString(16).padStart(64,"0"),g=(e.startsWith("0x")?e:l_(e)).substring(2),m=l+g+f+h+d,y=await fetch(`${r||JY}/?chainId=${s}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:sX(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:m},"latest"]})}),{result:w}=await y.json();return w?w.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function sX(){return Date.now()+Math.floor(Math.random()*1e3)}function iX(t){const e=atob(t),n=new Uint8Array(e.length);for(let c=0;c<e.length;c++)n[c]=e.charCodeAt(c);const s=n[0];if(s===0)throw new Error("No signatures found");const i=1+s*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const r=Buffer.from(t,"base64").slice(1,65);return pf.encode(r)}function rX(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(r=>r.charCodeAt(0)),s=new Uint8Array(n.length+e.length);s.set(n),s.set(e,n.length);const i=ZY(s,{dkLen:32});return pf.encode(i)}function FT(t){const e=new Uint8Array(Hm(aX(t)));return pf.encode(e)}function aX(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function VT(t){const e=Buffer.from(t,"base64"),n=$G(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const s=NG(n),i=Buffer.from("TX"),r=Buffer.concat([i,Buffer.from(s)]),c=GY(r);return N7.encode(c).replace(/=+$/,"")}function vv(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function oX(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),s=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(vv(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(vv(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(vv(s.length)),i.push(s);const r=Buffer.concat(i),c=Hm(r);return Buffer.from(c).toString("hex").toUpperCase()}var cX=Object.defineProperty,lX=Object.defineProperties,uX=Object.getOwnPropertyDescriptors,qT=Object.getOwnPropertySymbols,fX=Object.prototype.hasOwnProperty,dX=Object.prototype.propertyIsEnumerable,WT=(t,e,n)=>e in t?cX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hX=(t,e)=>{for(var n in e||(e={}))fX.call(e,n)&&WT(t,n,e[n]);if(qT)for(var n of qT(e))dX.call(e,n)&&WT(t,n,e[n]);return t},pX=(t,e)=>lX(t,uX(e));const gX="did:pkh:",sE=t=>t?.split(":"),mX=t=>{const e=t&&sE(t);if(e)return t.includes(gX)?e[3]:e[1]},Zb=t=>{const e=t&&sE(t);if(e)return e[2]+":"+e[3]},ym=t=>{const e=t&&sE(t);if(e)return e.pop()};async function GT(t){const{cacao:e,projectId:n}=t,{s,p:i}=e,r=u_(i,i.iss),c=ym(i.iss);return await eX(c,r,s,Zb(i.iss),n)}const u_=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,s=ym(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const r=`URI: ${t.aud||t.uri}`,c=`Version: ${t.version}`,l=`Chain ID: ${mX(e)}`,f=`Nonce: ${t.nonce}`,d=`Issued At: ${t.iat}`,h=t.exp?`Expiration Time: ${t.exp}`:void 0,g=t.nbf?`Not Before: ${t.nbf}`:void 0,m=t.requestId?`Request ID: ${t.requestId}`:void 0,y=t.resources?`Resources:${t.resources.map(v=>`
- ${v}`).join("")}`:void 0,w=B0(t.resources);if(w){const v=Mh(w);i=AX(i,v)}return[n,s,"",i,"",r,c,l,f,d,h,g,m,y].filter(v=>v!=null).join(`
`)};function yX(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function wX(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function sl(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const s=t.att[n];if(Array.isArray(s))throw new Error(`Resource must be an object: ${n}`);if(typeof s!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(s).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(s).forEach(i=>{const r=s[i];if(!Array.isArray(r))throw new Error(`Ability limits ${i} must be an array of objects, found: ${r}`);if(!r.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);r.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${c}`)})})})}function vX(t,e,n,s={}){return n?.sort((i,r)=>i.localeCompare(r)),{att:{[t]:bX(e,n,s)}}}function bX(t,e,n={}){e=e?.sort((i,r)=>i.localeCompare(r));const s=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...s)}function f_(t){return sl(t),`urn:recap:${yX(t).replace(/=/g,"")}`}function Mh(t){const e=wX(t.replace("urn:recap:",""));return sl(e),e}function xX(t,e,n){const s=vX(t,e,n);return f_(s)}function EX(t){return t&&t.includes("urn:recap:")}function SX(t,e){const n=Mh(t),s=Mh(e),i=CX(n,s);return f_(i)}function CX(t,e){sl(t),sl(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,r)=>i.localeCompare(r)),s={att:{}};return n.forEach(i=>{var r,c;Object.keys(((r=t.att)==null?void 0:r[i])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[i])||{})).sort((l,f)=>l.localeCompare(f)).forEach(l=>{var f,d;s.att[i]=pX(hX({},s.att[i]),{[l]:((f=t.att[i])==null?void 0:f[l])||((d=e.att[i])==null?void 0:d[l])})})}),s}function AX(t="",e){sl(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const s=[];let i=0;Object.keys(e.att).forEach(l=>{const f=Object.keys(e.att[l]).map(g=>({ability:g.split("/")[0],action:g.split("/")[1]}));f.sort((g,m)=>g.action.localeCompare(m.action));const d={};f.forEach(g=>{d[g.ability]||(d[g.ability]=[]),d[g.ability].push(g.action)});const h=Object.keys(d).map(g=>(i++,`(${i}) '${g}': '${d[g].join("', '")}' for '${l}'.`));s.push(h.join(", ").replace(".,","."))});const r=s.join(" "),c=`${n}${r}`;return`${t?t+" ":""}${c}`}function KT(t){var e;const n=Mh(t);sl(n);const s=(e=n.att)==null?void 0:e.eip155;return s?Object.keys(s).map(i=>i.split("/")[1]):[]}function YT(t){const e=Mh(t);sl(e);const n=[];return Object.values(e.att).forEach(s=>{Object.values(s).forEach(i=>{var r;(r=i?.[0])!=null&&r.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function B0(t){if(!t)return;const e=t?.[t.length-1];return EX(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function d_(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function bv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Os(t,...e){if(!d_(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function XT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NX(t,e){Os(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Fo(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Xu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function TX(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const IX=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function DX(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function e2(t){if(typeof t=="string")t=DX(t);else if(d_(t))t=t2(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function OX(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function _X(t,e){if(t.length!==e.length)return!1;let n=0;for(let s=0;s<t.length;s++)n|=t[s]^e[s];return n===0}const MX=(t,e)=>{function n(s,...i){if(Os(s),!IX)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const d=i[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?Os(d):Os(d,t.nonceLength)}const r=t.tagLength;r&&i[1]!==void 0&&Os(i[1]);const c=e(s,...i),l=(d,h)=>{if(h!==void 0){if(d!==2)throw new Error("cipher output not supported");Os(h)}};let f=!1;return{encrypt(d,h){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Os(d),l(c.encrypt.length,h),c.encrypt(d,h)},decrypt(d,h){if(Os(d),r&&d.length<r)throw new Error("invalid ciphertext length: smaller than tagLength="+r);return l(c.decrypt.length,h),c.decrypt(d,h)}}}return Object.assign(n,t),n};function QT(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!PX(e))throw new Error("invalid output, must be aligned");return e}function ZT(t,e,n,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,s);const i=BigInt(32),r=BigInt(4294967295),c=Number(n>>i&r),l=Number(n&r);t.setUint32(e+4,c,s),t.setUint32(e+0,l,s)}function RX(t,e,n){Jb(n);const s=new Uint8Array(16),i=TX(s);return ZT(i,0,BigInt(e),n),ZT(i,8,BigInt(t),n),s}function PX(t){return t.byteOffset%4===0}function t2(t){return Uint8Array.from(t)}const h_=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),$X=h_("expand 16-byte k"),UX=h_("expand 32-byte k"),LX=Fo($X),kX=Fo(UX);function ot(t,e){return t<<e|t>>>32-e}function n2(t){return t.byteOffset%4===0}const f0=64,BX=16,p_=2**32-1,JT=new Uint32Array;function jX(t,e,n,s,i,r,c,l){const f=i.length,d=new Uint8Array(f0),h=Fo(d),g=n2(i)&&n2(r),m=g?Fo(i):JT,y=g?Fo(r):JT;for(let w=0;w<f;c++){if(t(e,n,s,h,c,l),c>=p_)throw new Error("arx: counter overflow");const v=Math.min(f0,f-w);if(g&&v===f0){const x=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let C=0,D;C<BX;C++)D=x+C,y[D]=m[D]^h[C];w+=f0;continue}for(let x=0,C;x<v;x++)C=w+x,r[C]=i[C]^d[x];w+=v}}function zX(t,e){const{allowShortKeys:n,extendNonceFn:s,counterLength:i,counterRight:r,rounds:c}=OX({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return bv(i),bv(c),Jb(r),Jb(n),(l,f,d,h,g=0)=>{Os(l),Os(f),Os(d);const m=d.length;if(h===void 0&&(h=new Uint8Array(m)),Os(h),bv(g),g<0||g>=p_)throw new Error("arx: counter overflow");if(h.length<m)throw new Error(`arx: output (${h.length}) is shorter than data (${m})`);const y=[];let w=l.length,v,x;if(w===32)y.push(v=t2(l)),x=kX;else if(w===16&&n)v=new Uint8Array(32),v.set(l),v.set(l,16),x=LX,y.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);n2(f)||y.push(f=t2(f));const C=Fo(v);if(s){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");s(x,C,Fo(f.subarray(0,16)),C),f=f.subarray(16)}const D=16-i;if(D!==f.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){const I=new Uint8Array(12);I.set(f,r?0:12-f.length),f=I,y.push(f)}const N=Fo(f);return jX(t,x,C,N,d,h,g,c),Xu(...y),h}}const _n=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class HX{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=e2(e),Os(e,32);const n=_n(e,0),s=_n(e,2),i=_n(e,4),r=_n(e,6),c=_n(e,8),l=_n(e,10),f=_n(e,12),d=_n(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|s<<3)&8191,this.r[2]=(s>>>10|i<<6)&7939,this.r[3]=(i>>>7|r<<9)&8191,this.r[4]=(r>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|l<<2)&8191,this.r[7]=(l>>>11|f<<5)&8065,this.r[8]=(f>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let h=0;h<8;h++)this.pad[h]=_n(e,16+2*h)}process(e,n,s=!1){const i=s?0:2048,{h:r,r:c}=this,l=c[0],f=c[1],d=c[2],h=c[3],g=c[4],m=c[5],y=c[6],w=c[7],v=c[8],x=c[9],C=_n(e,n+0),D=_n(e,n+2),N=_n(e,n+4),I=_n(e,n+6),S=_n(e,n+8),A=_n(e,n+10),O=_n(e,n+12),T=_n(e,n+14);let _=r[0]+(C&8191),R=r[1]+((C>>>13|D<<3)&8191),U=r[2]+((D>>>10|N<<6)&8191),L=r[3]+((N>>>7|I<<9)&8191),F=r[4]+((I>>>4|S<<12)&8191),W=r[5]+(S>>>1&8191),$=r[6]+((S>>>14|A<<2)&8191),P=r[7]+((A>>>11|O<<5)&8191),k=r[8]+((O>>>8|T<<8)&8191),V=r[9]+(T>>>5|i),K=0,G=K+_*l+R*(5*x)+U*(5*v)+L*(5*w)+F*(5*y);K=G>>>13,G&=8191,G+=W*(5*m)+$*(5*g)+P*(5*h)+k*(5*d)+V*(5*f),K+=G>>>13,G&=8191;let j=K+_*f+R*l+U*(5*x)+L*(5*v)+F*(5*w);K=j>>>13,j&=8191,j+=W*(5*y)+$*(5*m)+P*(5*g)+k*(5*h)+V*(5*d),K+=j>>>13,j&=8191;let X=K+_*d+R*f+U*l+L*(5*x)+F*(5*v);K=X>>>13,X&=8191,X+=W*(5*w)+$*(5*y)+P*(5*m)+k*(5*g)+V*(5*h),K+=X>>>13,X&=8191;let Z=K+_*h+R*d+U*f+L*l+F*(5*x);K=Z>>>13,Z&=8191,Z+=W*(5*v)+$*(5*w)+P*(5*y)+k*(5*m)+V*(5*g),K+=Z>>>13,Z&=8191;let ee=K+_*g+R*h+U*d+L*f+F*l;K=ee>>>13,ee&=8191,ee+=W*(5*x)+$*(5*v)+P*(5*w)+k*(5*y)+V*(5*m),K+=ee>>>13,ee&=8191;let ae=K+_*m+R*g+U*h+L*d+F*f;K=ae>>>13,ae&=8191,ae+=W*l+$*(5*x)+P*(5*v)+k*(5*w)+V*(5*y),K+=ae>>>13,ae&=8191;let oe=K+_*y+R*m+U*g+L*h+F*d;K=oe>>>13,oe&=8191,oe+=W*f+$*l+P*(5*x)+k*(5*v)+V*(5*w),K+=oe>>>13,oe&=8191;let be=K+_*w+R*y+U*m+L*g+F*h;K=be>>>13,be&=8191,be+=W*d+$*f+P*l+k*(5*x)+V*(5*v),K+=be>>>13,be&=8191;let Ne=K+_*v+R*w+U*y+L*m+F*g;K=Ne>>>13,Ne&=8191,Ne+=W*h+$*d+P*f+k*l+V*(5*x),K+=Ne>>>13,Ne&=8191;let Te=K+_*x+R*v+U*w+L*y+F*m;K=Te>>>13,Te&=8191,Te+=W*g+$*h+P*d+k*f+V*l,K+=Te>>>13,Te&=8191,K=(K<<2)+K|0,K=K+G|0,G=K&8191,K=K>>>13,j+=K,r[0]=G,r[1]=j,r[2]=X,r[3]=Z,r[4]=ee,r[5]=ae,r[6]=oe,r[7]=be,r[8]=Ne,r[9]=Te}finalize(){const{h:e,pad:n}=this,s=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=i,i=e[l]>>>13,e[l]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,s[0]=e[0]+5,i=s[0]>>>13,s[0]&=8191;for(let l=1;l<10;l++)s[l]=e[l]+i,i=s[l]>>>13,s[l]&=8191;s[9]-=8192;let r=(i^1)-1;for(let l=0;l<10;l++)s[l]&=r;r=~r;for(let l=0;l<10;l++)e[l]=e[l]&r|s[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+n[0];e[0]=c&65535;for(let l=1;l<8;l++)c=(e[l]+n[l]|0)+(c>>>16)|0,e[l]=c&65535;Xu(s)}update(e){XT(this),e=e2(e),Os(e);const{buffer:n,blockLen:s}=this,i=e.length;for(let r=0;r<i;){const c=Math.min(s-this.pos,i-r);if(c===s){for(;s<=i-r;r+=s)this.process(e,r);continue}n.set(e.subarray(r,r+c),this.pos),this.pos+=c,r+=c,this.pos===s&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Xu(this.h,this.r,this.buffer,this.pad)}digestInto(e){XT(this),NX(e,this),this.finished=!0;const{buffer:n,h:s}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let r=0;for(let c=0;c<8;c++)e[r++]=s[c]>>>0,e[r++]=s[c]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const s=e.slice(0,n);return this.destroy(),s}}function FX(t){const e=(s,i)=>t(i).update(e2(s)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=s=>t(s),e}const VX=FX(t=>new HX(t));function qX(t,e,n,s,i,r=20){let c=t[0],l=t[1],f=t[2],d=t[3],h=e[0],g=e[1],m=e[2],y=e[3],w=e[4],v=e[5],x=e[6],C=e[7],D=i,N=n[0],I=n[1],S=n[2],A=c,O=l,T=f,_=d,R=h,U=g,L=m,F=y,W=w,$=v,P=x,k=C,V=D,K=N,G=I,j=S;for(let Z=0;Z<r;Z+=2)A=A+R|0,V=ot(V^A,16),W=W+V|0,R=ot(R^W,12),A=A+R|0,V=ot(V^A,8),W=W+V|0,R=ot(R^W,7),O=O+U|0,K=ot(K^O,16),$=$+K|0,U=ot(U^$,12),O=O+U|0,K=ot(K^O,8),$=$+K|0,U=ot(U^$,7),T=T+L|0,G=ot(G^T,16),P=P+G|0,L=ot(L^P,12),T=T+L|0,G=ot(G^T,8),P=P+G|0,L=ot(L^P,7),_=_+F|0,j=ot(j^_,16),k=k+j|0,F=ot(F^k,12),_=_+F|0,j=ot(j^_,8),k=k+j|0,F=ot(F^k,7),A=A+U|0,j=ot(j^A,16),P=P+j|0,U=ot(U^P,12),A=A+U|0,j=ot(j^A,8),P=P+j|0,U=ot(U^P,7),O=O+L|0,V=ot(V^O,16),k=k+V|0,L=ot(L^k,12),O=O+L|0,V=ot(V^O,8),k=k+V|0,L=ot(L^k,7),T=T+F|0,K=ot(K^T,16),W=W+K|0,F=ot(F^W,12),T=T+F|0,K=ot(K^T,8),W=W+K|0,F=ot(F^W,7),_=_+R|0,G=ot(G^_,16),$=$+G|0,R=ot(R^$,12),_=_+R|0,G=ot(G^_,8),$=$+G|0,R=ot(R^$,7);let X=0;s[X++]=c+A|0,s[X++]=l+O|0,s[X++]=f+T|0,s[X++]=d+_|0,s[X++]=h+R|0,s[X++]=g+U|0,s[X++]=m+L|0,s[X++]=y+F|0,s[X++]=w+W|0,s[X++]=v+$|0,s[X++]=x+P|0,s[X++]=C+k|0,s[X++]=D+V|0,s[X++]=N+K|0,s[X++]=I+G|0,s[X++]=S+j|0}const WX=zX(qX,{counterRight:!1,counterLength:4,allowShortKeys:!1}),GX=new Uint8Array(16),e5=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(GX.subarray(n))},KX=new Uint8Array(32);function t5(t,e,n,s,i){const r=t(e,n,KX),c=VX.create(r);i&&e5(c,i),e5(c,s);const l=RX(s.length,i?i.length:0,!0);c.update(l);const f=c.digest();return Xu(r,l),f}const YX=t=>(e,n,s)=>({encrypt(i,r){const c=i.length;r=QT(c+16,r,!1),r.set(i);const l=r.subarray(0,-16);t(e,n,l,l,1);const f=t5(t,e,n,l,s);return r.set(f,c),Xu(f),r},decrypt(i,r){r=QT(i.length-16,r,!1);const c=i.subarray(0,-16),l=i.subarray(-16),f=t5(t,e,n,c,s);if(!_X(l,f))throw new Error("invalid tag");return r.set(i.subarray(0,-16)),t(e,n,r,r,1),Xu(f),r}}),g_=MX({blockSize:64,nonceLength:12,tagLength:16},YX(WX));let m_=class extends zm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Jx(e);const s=rr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,r=new Uint8Array(i);r.set(s.length>i?e.create().update(s).digest():s);for(let c=0;c<r.length;c++)r[c]^=54;this.iHash.update(r),this.oHash=e.create();for(let c=0;c<r.length;c++)r[c]^=106;this.oHash.update(r),Pi(r)}update(e){return Ko(this),this.iHash.update(e),this}digestInto(e){Ko(this),Ri(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:i,destroyed:r,blockLen:c,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=r,e.blockLen=c,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Fm=(t,e,n)=>new m_(t,e).update(n).digest();Fm.create=(t,e)=>new m_(t,e);function XX(t,e,n){return Jx(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Fm(t,rr(n),rr(e))}const xv=Uint8Array.from([0]),n5=Uint8Array.of();function QX(t,e,n,s=32){Jx(t),Ua(s);const i=t.outputLen;if(s>255*i)throw new Error("Length should be <= 255*HashLen");const r=Math.ceil(s/i);n===void 0&&(n=n5);const c=new Uint8Array(r*i),l=Fm.create(t,e),f=l._cloneInto(),d=new Uint8Array(l.outputLen);for(let h=0;h<r;h++)xv[0]=h+1,f.update(h===0?n5:d).update(n).update(xv).digestInto(d),c.set(d,i*h),l._cloneInto(f);return l.destroy(),f.destroy(),Pi(d,xv),c.slice(0,s)}const ZX=(t,e,n,s,i)=>QX(t,XX(t,e,n),s,i),Vm=Hm,iE=BigInt(0),s2=BigInt(1);function wm(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function d0(t){const e=t.toString(16);return e.length&1?"0"+e:e}function y_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?iE:BigInt("0x"+t)}function qm(t){return y_(_h(t))}function vm(t){return Ri(t),y_(_h(Uint8Array.from(t).reverse()))}function rE(t,e){return tE(t.toString(16).padStart(e*2,"0"))}function aE(t,e){return rE(t,e).reverse()}function Ds(t,e,n){let s;if(typeof e=="string")try{s=tE(e)}catch(r){throw new Error(t+" must be hex string or Uint8Array, cause: "+r)}else if(Zx(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=s.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return s}const Ev=t=>typeof t=="bigint"&&iE<=t;function JX(t,e,n){return Ev(t)&&Ev(e)&&Ev(n)&&e<=t&&t<n}function i2(t,e,n,s){if(!JX(e,n,s))throw new Error("expected valid "+t+": "+n+" <= n < "+s+", got "+e)}function eQ(t){let e;for(e=0;t>iE;t>>=s2,e+=1);return e}const Wm=t=>(s2<<BigInt(t))-s2;function tQ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const s=m=>new Uint8Array(m),i=m=>Uint8Array.of(m);let r=s(t),c=s(t),l=0;const f=()=>{r.fill(1),c.fill(0),l=0},d=(...m)=>n(c,r,...m),h=(m=s(0))=>{c=d(i(0),m),r=d(),m.length!==0&&(c=d(i(1),m),r=d())},g=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const y=[];for(;m<e;){r=d();const w=r.slice();y.push(w),m+=r.length}return Fc(...y)};return(m,y)=>{f(),h(m);let w;for(;!(w=y(g()));)h();return f(),w}}function Gm(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function s(i,r,c){const l=t[i];if(c&&l===void 0)return;const f=typeof l;if(f!==r||l===null)throw new Error(`param "${i}" is invalid: expected ${r}, got ${f}`)}Object.entries(e).forEach(([i,r])=>s(i,r,!1)),Object.entries(n).forEach(([i,r])=>s(i,r,!0))}function s5(t){const e=new WeakMap;return(n,...s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t(n,...s);return e.set(n,r),r}}const Ms=BigInt(0),cs=BigInt(1),Vc=BigInt(2),nQ=BigInt(3),w_=BigInt(4),v_=BigInt(5),b_=BigInt(8);function Di(t,e){const n=t%e;return n>=Ms?n:e+n}function Zi(t,e,n){let s=t;for(;e-- >Ms;)s*=s,s%=n;return s}function i5(t,e){if(t===Ms)throw new Error("invert: expected non-zero number");if(e<=Ms)throw new Error("invert: expected positive modulus, got "+e);let n=Di(t,e),s=e,i=Ms,r=cs;for(;n!==Ms;){const c=s/n,l=s%n,f=i-r*c;s=n,n=l,i=r,r=f}if(s!==cs)throw new Error("invert: does not exist");return Di(i,e)}function x_(t,e){const n=(t.ORDER+cs)/w_,s=t.pow(e,n);if(!t.eql(t.sqr(s),e))throw new Error("Cannot find square root");return s}function sQ(t,e){const n=(t.ORDER-v_)/b_,s=t.mul(e,Vc),i=t.pow(s,n),r=t.mul(e,i),c=t.mul(t.mul(r,Vc),i),l=t.mul(r,t.sub(c,t.ONE));if(!t.eql(t.sqr(l),e))throw new Error("Cannot find square root");return l}function iQ(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-cs,n=0;for(;e%Vc===Ms;)e/=Vc,n++;let s=Vc;const i=yf(t);for(;r5(i,s)===1;)if(s++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return x_;let r=i.pow(s,e);const c=(e+cs)/Vc;return function(l,f){if(l.is0(f))return f;if(r5(l,f)!==1)throw new Error("Cannot find square root");let d=n,h=l.mul(l.ONE,r),g=l.pow(f,e),m=l.pow(f,c);for(;!l.eql(g,l.ONE);){if(l.is0(g))return l.ZERO;let y=1,w=l.sqr(g);for(;!l.eql(w,l.ONE);)if(y++,w=l.sqr(w),y===d)throw new Error("Cannot find square root");const v=cs<<BigInt(d-y-1),x=l.pow(h,v);d=y,h=l.sqr(x),g=l.mul(g,h),m=l.mul(m,x)}return m}}function rQ(t){return t%w_===nQ?x_:t%b_===v_?sQ:iQ(t)}const aQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oQ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=aQ.reduce((s,i)=>(s[i]="function",s),e);return Gm(t,n),t}function cQ(t,e,n){if(n<Ms)throw new Error("invalid exponent, negatives unsupported");if(n===Ms)return t.ONE;if(n===cs)return e;let s=t.ONE,i=e;for(;n>Ms;)n&cs&&(s=t.mul(s,i)),i=t.sqr(i),n>>=cs;return s}function E_(t,e,n=!1){const s=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((c,l,f)=>t.is0(l)?c:(s[f]=c,t.mul(c,l)),t.ONE),r=t.inv(i);return e.reduceRight((c,l,f)=>t.is0(l)?c:(s[f]=t.mul(c,s[f]),t.mul(c,l)),r),s}function r5(t,e){const n=(t.ORDER-cs)/Vc,s=t.pow(e,n),i=t.eql(s,t.ONE),r=t.eql(s,t.ZERO),c=t.eql(s,t.neg(t.ONE));if(!i&&!r&&!c)throw new Error("invalid Legendre symbol result");return i?1:r?0:-1}function lQ(t,e){e!==void 0&&Ua(e);const n=e!==void 0?e:t.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function yf(t,e,n=!1,s={}){if(t<=Ms)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,r;if(typeof e=="object"&&e!=null){if(s.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(i=h.BITS),h.sqrt&&(r=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE)}else typeof e=="number"&&(i=e),s.sqrt&&(r=s.sqrt);const{nBitLength:c,nByteLength:l}=lQ(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Wm(c),ZERO:Ms,ONE:cs,create:h=>Di(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Ms<=h&&h<t},is0:h=>h===Ms,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&cs)===cs,neg:h=>Di(-h,t),eql:(h,g)=>h===g,sqr:h=>Di(h*h,t),add:(h,g)=>Di(h+g,t),sub:(h,g)=>Di(h-g,t),mul:(h,g)=>Di(h*g,t),pow:(h,g)=>cQ(d,h,g),div:(h,g)=>Di(h*i5(g,t),t),sqrN:h=>h*h,addN:(h,g)=>h+g,subN:(h,g)=>h-g,mulN:(h,g)=>h*g,inv:h=>i5(h,t),sqrt:r||(h=>(f||(f=rQ(t)),f(d,h))),toBytes:h=>n?aE(h,l):rE(h,l),fromBytes:h=>{if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);return n?vm(h):qm(h)},invertBatch:h=>E_(d,h),cmov:(h,g,m)=>m?g:h});return Object.freeze(d)}function S_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function C_(t){const e=S_(t);return e+Math.ceil(e/2)}function uQ(t,e,n=!1){const s=t.length,i=S_(e),r=C_(e);if(s<16||s<r||s>1024)throw new Error("expected "+r+"-1024 bytes of input, got "+s);const c=n?vm(t):qm(t),l=Di(c,e-cs)+cs;return n?aE(l,i):rE(l,i)}const Qu=BigInt(0),qc=BigInt(1);function ih(t,e){const n=e.negate();return t?n:e}function fQ(t,e,n){const s=r=>r.pz,i=E_(t.Fp,n.map(s));return n.map((r,c)=>r.toAffine(i[c])).map(t.fromAffine)}function A_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Sv(t,e){A_(t,e);const n=Math.ceil(e/t)+1,s=2**(t-1),i=2**t,r=Wm(t),c=BigInt(t);return{windows:n,windowSize:s,mask:r,maxNumber:i,shiftBy:c}}function a5(t,e,n){const{windowSize:s,mask:i,maxNumber:r,shiftBy:c}=n;let l=Number(t&i),f=t>>c;l>s&&(l-=r,f+=qc);const d=e*s,h=d+Math.abs(l)-1,g=l===0,m=l<0,y=e%2!==0;return{nextN:f,offset:h,isZero:g,isNeg:m,isNegF:y,offsetF:d}}function dQ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,s)=>{if(!(n instanceof e))throw new Error("invalid point at index "+s)})}function hQ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,s)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+s)})}const Cv=new WeakMap,N_=new WeakMap;function Av(t){return N_.get(t)||1}function o5(t){if(t!==Qu)throw new Error("invalid wNAF")}function pQ(t,e){return{constTimeNegate:ih,hasPrecomputes(n){return Av(n)!==1},unsafeLadder(n,s,i=t.ZERO){let r=n;for(;s>Qu;)s&qc&&(i=i.add(r)),r=r.double(),s>>=qc;return i},precomputeWindow(n,s){const{windows:i,windowSize:r}=Sv(s,e),c=[];let l=n,f=l;for(let d=0;d<i;d++){f=l,c.push(f);for(let h=1;h<r;h++)f=f.add(l),c.push(f);l=f.double()}return c},wNAF(n,s,i){let r=t.ZERO,c=t.BASE;const l=Sv(n,e);for(let f=0;f<l.windows;f++){const{nextN:d,offset:h,isZero:g,isNeg:m,isNegF:y,offsetF:w}=a5(i,f,l);i=d,g?c=c.add(ih(y,s[w])):r=r.add(ih(m,s[h]))}return o5(i),{p:r,f:c}},wNAFUnsafe(n,s,i,r=t.ZERO){const c=Sv(n,e);for(let l=0;l<c.windows&&i!==Qu;l++){const{nextN:f,offset:d,isZero:h,isNeg:g}=a5(i,l,c);if(i=f,!h){const m=s[d];r=r.add(g?m.negate():m)}}return o5(i),r},getPrecomputes(n,s,i){let r=Cv.get(s);return r||(r=this.precomputeWindow(s,n),n!==1&&(typeof i=="function"&&(r=i(r)),Cv.set(s,r))),r},wNAFCached(n,s,i){const r=Av(n);return this.wNAF(r,this.getPrecomputes(r,n,i),s)},wNAFCachedUnsafe(n,s,i,r){const c=Av(n);return c===1?this.unsafeLadder(n,s,r):this.wNAFUnsafe(c,this.getPrecomputes(c,n,i),s,r)},setWindowSize(n,s){A_(s,e),N_.set(n,s),Cv.delete(n)}}}function gQ(t,e,n,s){let i=e,r=t.ZERO,c=t.ZERO;for(;n>Qu||s>Qu;)n&qc&&(r=r.add(i)),s&qc&&(c=c.add(i)),i=i.double(),n>>=qc,s>>=qc;return{p1:r,p2:c}}function mQ(t,e,n,s){dQ(n,t),hQ(s,e);const i=n.length,r=s.length;if(i!==r)throw new Error("arrays of points and scalars must have equal length");const c=t.ZERO,l=eQ(BigInt(i));let f=1;l>12?f=l-3:l>4?f=l-2:l>0&&(f=2);const d=Wm(f),h=new Array(Number(d)+1).fill(c),g=Math.floor((e.BITS-1)/f)*f;let m=c;for(let y=g;y>=0;y-=f){h.fill(c);for(let v=0;v<r;v++){const x=s[v],C=Number(x>>BigInt(y)&d);h[C]=h[C].add(n[v])}let w=c;for(let v=h.length-1,x=c;v>0;v--)x=x.add(h[v]),w=w.add(x);if(m=m.add(w),y!==0)for(let v=0;v<f;v++)m=m.double()}return m}function c5(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return oQ(e),e}else return yf(t)}function yQ(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>Qu))throw new Error(`CURVE.${c} must be positive bigint`)}const s=c5(e.p,n.Fp),i=c5(e.n,n.Fn),r=["Gx","Gy","a","b"];for(const c of r)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const _d=BigInt(0),lu=BigInt(1),h0=BigInt(2);function wQ(t){return Gm(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function vQ(t){const e=wQ(t),{P:n,type:s,adjustScalarBytes:i,powPminus2:r,randomBytes:c}=e,l=s==="x25519";if(!l&&s!=="x448")throw new Error("invalid type");const f=c||mf,d=l?255:448,h=l?32:56,g=BigInt(l?9:5),m=BigInt(l?121665:39081),y=l?h0**BigInt(254):h0**BigInt(447),w=l?BigInt(8)*h0**BigInt(251)-lu:BigInt(4)*h0**BigInt(445)-lu,v=y+w+lu,x=_=>Di(_,n),C=D(g);function D(_){return aE(x(_),h)}function N(_){const R=Ds("u coordinate",_,h);return l&&(R[31]&=127),x(vm(R))}function I(_){return vm(i(Ds("scalar",_,h)))}function S(_,R){const U=T(N(R),I(_));if(U===_d)throw new Error("invalid private or public key received");return D(U)}function A(_){return S(_,C)}function O(_,R,U){const L=x(_*(R-U));return R=x(R-L),U=x(U+L),{x_2:R,x_3:U}}function T(_,R){i2("u",_,_d,n),i2("scalar",R,y,v);const U=R,L=_;let F=lu,W=_d,$=_,P=lu,k=_d;for(let K=BigInt(d-1);K>=_d;K--){const G=U>>K&lu;k^=G,{x_2:F,x_3:$}=O(k,F,$),{x_2:W,x_3:P}=O(k,W,P),k=G;const j=F+W,X=x(j*j),Z=F-W,ee=x(Z*Z),ae=X-ee,oe=$+P,be=$-P,Ne=x(be*j),Te=x(oe*Z),We=Ne+Te,Qe=Ne-Te;$=x(We*We),P=x(L*x(Qe*Qe)),F=x(X*ee),W=x(ae*(X+x(m*ae)))}({x_2:F,x_3:$}=O(k,F,$)),{x_2:W,x_3:P}=O(k,W,P);const V=r(W);return x(F*V)}return{scalarMult:S,scalarMultBase:A,getSharedSecret:(_,R)=>S(_,R),getPublicKey:_=>A(_),utils:{randomPrivateKey:()=>f(h)},GuBytes:C.slice()}}BigInt(0);const bQ=BigInt(1),l5=BigInt(2),xQ=BigInt(3),EQ=BigInt(5);BigInt(8);const T_={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function SQ(t){const e=BigInt(10),n=BigInt(20),s=BigInt(40),i=BigInt(80),r=T_.p,c=t*t%r*t%r,l=Zi(c,l5,r)*c%r,f=Zi(l,bQ,r)*t%r,d=Zi(f,EQ,r)*f%r,h=Zi(d,e,r)*d%r,g=Zi(h,n,r)*h%r,m=Zi(g,s,r)*g%r,y=Zi(m,i,r)*m%r,w=Zi(y,i,r)*m%r,v=Zi(w,e,r)*d%r;return{pow_p_5_8:Zi(v,l5,r)*t%r,b2:c}}function CQ(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const r2=(()=>{const t=T_.p;return vQ({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:s}=SQ(e);return Di(Zi(n,xQ,t)*s,t)},adjustScalarBytes:CQ})})();function u5(t){t.lowS!==void 0&&wm("lowS",t.lowS),t.prehash!==void 0&&wm("prehash",t.prehash)}class AQ extends Error{constructor(e=""){super(e)}}const Ca={Err:AQ,_tlv:{encode:(t,e)=>{const{Err:n}=Ca;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const s=e.length/2,i=d0(s);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const r=s>127?d0(i.length/2|128):"";return d0(t)+r+i+e},decode(t,e){const{Err:n}=Ca;let s=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[s++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[s++],r=!!(i&128);let c=0;if(!r)c=i;else{const f=i&127;if(!f)throw new n("tlv.decode(long): indefinite length not supported");if(f>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(s,s+f);if(d.length!==f)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const h of d)c=c<<8|h;if(s+=f,c<128)throw new n("tlv.decode(long): not minimal encoding")}const l=e.subarray(s,s+c);if(l.length!==c)throw new n("tlv.decode: wrong value length");return{v:l,l:e.subarray(s+c)}}},_int:{encode(t){const{Err:e}=Ca;if(t<rh)throw new e("integer: negative integers are not allowed");let n=d0(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ca;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qm(t)}},toSig(t){const{Err:e,_int:n,_tlv:s}=Ca,i=Ds("signature",t),{v:r,l:c}=s.decode(48,i);if(c.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:f}=s.decode(2,r),{v:d,l:h}=s.decode(2,f);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=Ca,s=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),r=s+i;return e.encode(48,r)}},rh=BigInt(0),ah=BigInt(1),NQ=BigInt(2),p0=BigInt(3),TQ=BigInt(4);function IQ(t,e,n){function s(i){const r=t.sqr(i),c=t.mul(r,i);return t.add(t.add(c,t.mul(i,e)),n)}return s}function I_(t,e,n){const{BYTES:s}=t;function i(r){let c;if(typeof r=="bigint")c=r;else{let l=Ds("private key",r);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const f=new Uint8Array(s);f.set(l,f.length-l.length),l=f}try{c=t.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${s}, got ${typeof r}`)}}if(n&&(c=t.create(c)),!t.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return i}function DQ(t,e={}){const{Fp:n,Fn:s}=yQ("weierstrass",t,e),{h:i,n:r}=t;Gm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(t.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(T,_,R){const{x:U,y:L}=_.toAffine(),F=n.toBytes(U);if(wm("isCompressed",R),R){l();const W=!n.isOdd(L);return Fc(D_(W),F)}else return Fc(Uint8Array.of(4),F,n.toBytes(L))}function d(T){Ri(T);const _=n.BYTES,R=_+1,U=2*_+1,L=T.length,F=T[0],W=T.subarray(1);if(L===R&&(F===2||F===3)){const $=n.fromBytes(W);if(!n.isValid($))throw new Error("bad point: is not on curve, wrong x");const P=m($);let k;try{k=n.sqrt(P)}catch(K){const G=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+G)}l();const V=n.isOdd(k);return(F&1)===1!==V&&(k=n.neg(k)),{x:$,y:k}}else if(L===U&&F===4){const $=n.fromBytes(W.subarray(_*0,_*1)),P=n.fromBytes(W.subarray(_*1,_*2));if(!y($,P))throw new Error("bad point: is not on curve");return{x:$,y:P}}else throw new Error(`bad point: got length ${L}, expected compressed=${R} or uncompressed=${U}`)}const h=e.toBytes||f,g=e.fromBytes||d,m=IQ(n,t.a,t.b);function y(T,_){const R=n.sqr(_),U=m(T);return n.eql(R,U)}if(!y(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const w=n.mul(n.pow(t.a,p0),TQ),v=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(w,v)))throw new Error("bad curve params: a or b");function x(T,_,R=!1){if(!n.isValid(_)||R&&n.is0(_))throw new Error(`bad point coordinate ${T}`);return _}function C(T){if(!(T instanceof S))throw new Error("ProjectivePoint expected")}const D=s5((T,_)=>{const{px:R,py:U,pz:L}=T;if(n.eql(L,n.ONE))return{x:R,y:U};const F=T.is0();_==null&&(_=F?n.ONE:n.inv(L));const W=n.mul(R,_),$=n.mul(U,_),P=n.mul(L,_);if(F)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:W,y:$}}),N=s5(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:_,y:R}=T.toAffine();if(!n.isValid(_)||!n.isValid(R))throw new Error("bad point: x or y not field elements");if(!y(_,R))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function I(T,_,R,U,L){return R=new S(n.mul(R.px,T),R.py,R.pz),_=ih(U,_),R=ih(L,R),_.add(R)}class S{constructor(_,R,U){this.px=x("x",_),this.py=x("y",R,!0),this.pz=x("z",U),Object.freeze(this)}static fromAffine(_){const{x:R,y:U}=_||{};if(!_||!n.isValid(R)||!n.isValid(U))throw new Error("invalid affine point");if(_ instanceof S)throw new Error("projective point not allowed");return n.is0(R)&&n.is0(U)?S.ZERO:new S(R,U,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){return fQ(S,"pz",_)}static fromBytes(_){return Ri(_),S.fromHex(_)}static fromHex(_){const R=S.fromAffine(g(Ds("pointHex",_)));return R.assertValidity(),R}static fromPrivateKey(_){const R=I_(s,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(R(_))}static msm(_,R){return mQ(S,s,_,R)}precompute(_=8,R=!0){return O.setWindowSize(this,_),R||this.multiply(p0),this}_setWindowSize(_){this.precompute(_)}assertValidity(){N(this)}hasEvenY(){const{y:_}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(_)}equals(_){C(_);const{px:R,py:U,pz:L}=this,{px:F,py:W,pz:$}=_,P=n.eql(n.mul(R,$),n.mul(F,L)),k=n.eql(n.mul(U,$),n.mul(W,L));return P&&k}negate(){return new S(this.px,n.neg(this.py),this.pz)}double(){const{a:_,b:R}=t,U=n.mul(R,p0),{px:L,py:F,pz:W}=this;let $=n.ZERO,P=n.ZERO,k=n.ZERO,V=n.mul(L,L),K=n.mul(F,F),G=n.mul(W,W),j=n.mul(L,F);return j=n.add(j,j),k=n.mul(L,W),k=n.add(k,k),$=n.mul(_,k),P=n.mul(U,G),P=n.add($,P),$=n.sub(K,P),P=n.add(K,P),P=n.mul($,P),$=n.mul(j,$),k=n.mul(U,k),G=n.mul(_,G),j=n.sub(V,G),j=n.mul(_,j),j=n.add(j,k),k=n.add(V,V),V=n.add(k,V),V=n.add(V,G),V=n.mul(V,j),P=n.add(P,V),G=n.mul(F,W),G=n.add(G,G),V=n.mul(G,j),$=n.sub($,V),k=n.mul(G,K),k=n.add(k,k),k=n.add(k,k),new S($,P,k)}add(_){C(_);const{px:R,py:U,pz:L}=this,{px:F,py:W,pz:$}=_;let P=n.ZERO,k=n.ZERO,V=n.ZERO;const K=t.a,G=n.mul(t.b,p0);let j=n.mul(R,F),X=n.mul(U,W),Z=n.mul(L,$),ee=n.add(R,U),ae=n.add(F,W);ee=n.mul(ee,ae),ae=n.add(j,X),ee=n.sub(ee,ae),ae=n.add(R,L);let oe=n.add(F,$);return ae=n.mul(ae,oe),oe=n.add(j,Z),ae=n.sub(ae,oe),oe=n.add(U,L),P=n.add(W,$),oe=n.mul(oe,P),P=n.add(X,Z),oe=n.sub(oe,P),V=n.mul(K,ae),P=n.mul(G,Z),V=n.add(P,V),P=n.sub(X,V),V=n.add(X,V),k=n.mul(P,V),X=n.add(j,j),X=n.add(X,j),Z=n.mul(K,Z),ae=n.mul(G,ae),X=n.add(X,Z),Z=n.sub(j,Z),Z=n.mul(K,Z),ae=n.add(ae,Z),j=n.mul(X,ae),k=n.add(k,j),j=n.mul(oe,ae),P=n.mul(ee,P),P=n.sub(P,j),j=n.mul(ee,X),V=n.mul(oe,V),V=n.add(V,j),new S(P,k,V)}subtract(_){return this.add(_.negate())}is0(){return this.equals(S.ZERO)}multiply(_){const{endo:R}=e;if(!s.isValidNot0(_))throw new Error("invalid scalar: out of range");let U,L;const F=W=>O.wNAFCached(this,W,S.normalizeZ);if(R){const{k1neg:W,k1:$,k2neg:P,k2:k}=R.splitScalar(_),{p:V,f:K}=F($),{p:G,f:j}=F(k);L=K.add(j),U=I(R.beta,V,G,W,P)}else{const{p:W,f:$}=F(_);U=W,L=$}return S.normalizeZ([U,L])[0]}multiplyUnsafe(_){const{endo:R}=e,U=this;if(!s.isValid(_))throw new Error("invalid scalar: out of range");if(_===rh||U.is0())return S.ZERO;if(_===ah)return U;if(O.hasPrecomputes(this))return this.multiply(_);if(R){const{k1neg:L,k1:F,k2neg:W,k2:$}=R.splitScalar(_),{p1:P,p2:k}=gQ(S,U,F,$);return I(R.beta,P,k,L,W)}else return O.wNAFCachedUnsafe(U,_)}multiplyAndAddUnsafe(_,R,U){const L=this.multiplyUnsafe(R).add(_.multiplyUnsafe(U));return L.is0()?void 0:L}toAffine(_){return D(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return i===ah?!0:_?_(S,this):O.wNAFCachedUnsafe(this,r).is0()}clearCofactor(){const{clearCofactor:_}=e;return i===ah?this:_?_(S,this):this.multiplyUnsafe(i)}toBytes(_=!0){return wm("isCompressed",_),this.assertValidity(),h(S,this,_)}toRawBytes(_=!0){return this.toBytes(_)}toHex(_=!0){return _h(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=s;const A=s.BITS,O=pQ(S,e.endo?Math.ceil(A/2):A);return S}function D_(t){return Uint8Array.of(t?2:3)}function OQ(t,e,n={}){Gm(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const s=e.randomBytes||mf,i=e.hmac||((U,...L)=>Fm(e.hash,U,Fc(...L))),{Fp:r,Fn:c}=t,{ORDER:l,BITS:f}=c;function d(U){const L=l>>ah;return U>L}function h(U){return d(U)?c.neg(U):U}function g(U,L){if(!c.isValidNot0(L))throw new Error(`invalid signature ${U}: out of range 1..CURVE.n`)}class m{constructor(L,F,W){g("r",L),g("s",F),this.r=L,this.s=F,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact(L){const F=c.BYTES,W=Ds("compactSignature",L,F*2);return new m(c.fromBytes(W.subarray(0,F)),c.fromBytes(W.subarray(F,F*2)))}static fromDER(L){const{r:F,s:W}=Ca.toSig(Ds("DER",L));return new m(F,W)}assertValidity(){}addRecoveryBit(L){return new m(this.r,this.s,L)}recoverPublicKey(L){const F=r.ORDER,{r:W,s:$,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(l*NQ<F&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=P===2||P===3?W+l:W;if(!r.isValid(k))throw new Error("recovery id 2 or 3 invalid");const V=r.toBytes(k),K=t.fromHex(Fc(D_((P&1)===0),V)),G=c.inv(k),j=N(Ds("msgHash",L)),X=c.create(-j*G),Z=c.create($*G),ee=t.BASE.multiplyUnsafe(X).add(K.multiplyUnsafe(Z));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c.neg(this.s),this.recovery):this}toBytes(L){if(L==="compact")return Fc(c.toBytes(this.r),c.toBytes(this.s));if(L==="der")return tE(Ca.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return _h(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return _h(this.toBytes("compact"))}}const y=I_(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),w={isValidPrivateKey(U){try{return y(U),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const U=l;return uQ(s(C_(U)),U)},precompute(U=8,L=t.BASE){return L.precompute(U,!1)}};function v(U,L=!0){return t.fromPrivateKey(U).toBytes(L)}function x(U){if(typeof U=="bigint")return!1;if(U instanceof t)return!0;const L=Ds("key",U).length,F=r.BYTES,W=F+1,$=2*F+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===W))return L===W||L===$}function C(U,L,F=!0){if(x(U)===!0)throw new Error("first arg must be private key");if(x(L)===!1)throw new Error("second arg must be public key");return t.fromHex(L).multiply(y(U)).toBytes(F)}const D=e.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const L=qm(U),F=U.length*8-f;return F>0?L>>BigInt(F):L},N=e.bits2int_modN||function(U){return c.create(D(U))},I=Wm(f);function S(U){return i2("num < 2^"+f,U,rh,I),c.toBytes(U)}function A(U,L,F=O){if(["recovered","canonical"].some(ee=>ee in F))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:$,prehash:P,extraEntropy:k}=F;$==null&&($=!0),U=Ds("msgHash",U),u5(F),P&&(U=Ds("prehashed msgHash",W(U)));const V=N(U),K=y(L),G=[S(K),S(V)];if(k!=null&&k!==!1){const ee=k===!0?s(r.BYTES):k;G.push(Ds("extraEntropy",ee))}const j=Fc(...G),X=V;function Z(ee){const ae=D(ee);if(!c.isValidNot0(ae))return;const oe=c.inv(ae),be=t.BASE.multiply(ae).toAffine(),Ne=c.create(be.x);if(Ne===rh)return;const Te=c.create(oe*c.create(X+Ne*K));if(Te===rh)return;let We=(be.x===Ne?0:2)|Number(be.y&ah),Qe=Te;return $&&d(Te)&&(Qe=h(Te),We^=1),new m(Ne,Qe,We)}return{seed:j,k2sig:Z}}const O={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function _(U,L,F=O){const{seed:W,k2sig:$}=A(U,L,F);return tQ(e.hash.outputLen,c.BYTES,i)(W,$)}t.BASE.precompute(8);function R(U,L,F,W=T){const $=U;L=Ds("msgHash",L),F=Ds("publicKey",F),u5(W);const{lowS:P,prehash:k,format:V}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&!["compact","der","js"].includes(V))throw new Error('format must be "compact", "der" or "js"');const K=typeof $=="string"||Zx($),G=!K&&!V&&typeof $=="object"&&$!==null&&typeof $.r=="bigint"&&typeof $.s=="bigint";if(!K&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,X;try{if(G)if(V===void 0||V==="js")j=new m($.r,$.s);else throw new Error("invalid format");if(K){try{V!=="compact"&&(j=m.fromDER($))}catch(We){if(!(We instanceof Ca.Err))throw We}!j&&V!=="der"&&(j=m.fromCompact($))}X=t.fromHex(F)}catch{return!1}if(!j||P&&j.hasHighS())return!1;k&&(L=e.hash(L));const{r:Z,s:ee}=j,ae=N(L),oe=c.inv(ee),be=c.create(ae*oe),Ne=c.create(Z*oe),Te=t.BASE.multiplyUnsafe(be).add(X.multiplyUnsafe(Ne));return Te.is0()?!1:c.create(Te.x)===Z}return Object.freeze({getPublicKey:v,getSharedSecret:C,sign:_,verify:R,utils:w,Point:t,Signature:m})}function _Q(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,s=yf(e.n,t.nBitLength),i={Fp:n,Fn:s,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function MQ(t){const{CURVE:e,curveOpts:n}=_Q(t),s={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:s}}function RQ(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function PQ(t){const{CURVE:e,curveOpts:n,ecdsaOpts:s}=MQ(t),i=DQ(e,n),r=OQ(i,s,n);return RQ(t,r)}function a2(t,e){const n=s=>PQ({...t,hash:s});return{...n(e),create:n}}const O_={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},__={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},M_={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},$Q=yf(O_.p),UQ=yf(__.p),LQ=yf(M_.p),kQ=a2({...O_,Fp:$Q,lowS:!1},Hm);a2({...__,Fp:UQ,lowS:!1},WY),a2({...M_,Fp:LQ,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},qY);const BQ=kQ,R_="base10",ls="base16",sr="base64pad",Uo="base64url",bp="utf8",P_=0,Ia=1,xp=2,jQ=0,f5=1,oh=12,oE=32;function zQ(){const t=r2.utils.randomPrivateKey(),e=r2.getPublicKey(t);return{privateKey:Rs(t,ls),publicKey:Rs(e,ls)}}function o2(){const t=mf(oE);return Rs(t,ls)}function HQ(t,e){const n=r2.getSharedSecret(_i(t,ls),_i(e,ls)),s=ZX(Vm,n,void 0,void 0,oE);return Rs(s,ls)}function j0(t){const e=Vm(_i(t,ls));return Rs(e,ls)}function _r(t){const e=Vm(_i(t,bp));return Rs(e,ls)}function $_(t){return _i(`${t}`,R_)}function il(t){return Number(Rs(t,R_))}function U_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function L_(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function FQ(t){const e=$_(typeof t.type<"u"?t.type:P_);if(il(e)===Ia&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?_i(t.senderPublicKey,ls):void 0,s=typeof t.iv<"u"?_i(t.iv,ls):mf(oh),i=_i(t.symKey,ls),r=g_(i,s).encrypt(_i(t.message,bp)),c=k_({type:e,sealed:r,iv:s,senderPublicKey:n});return t.encoding===Uo?U_(c):c}function VQ(t){const e=_i(t.symKey,ls),{sealed:n,iv:s}=Rh({encoded:t.encoded,encoding:t.encoding}),i=g_(e,s).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Rs(i,bp)}function qQ(t,e){const n=$_(xp),s=mf(oh),i=_i(t,bp),r=k_({type:n,sealed:i,iv:s});return e===Uo?U_(r):r}function WQ(t,e){const{sealed:n}=Rh({encoded:t,encoding:e});return Rs(n,bp)}function k_(t){if(il(t.type)===xp)return Rs(sh([t.type,t.sealed]),sr);if(il(t.type)===Ia){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Rs(sh([t.type,t.senderPublicKey,t.iv,t.sealed]),sr)}return Rs(sh([t.type,t.iv,t.sealed]),sr)}function Rh(t){const e=(t.encoding||sr)===Uo?L_(t.encoded):t.encoded,n=_i(e,sr),s=n.slice(jQ,f5),i=f5;if(il(s)===Ia){const f=i+oE,d=f+oh,h=n.slice(i,f),g=n.slice(f,d),m=n.slice(d);return{type:s,sealed:m,iv:g,senderPublicKey:h}}if(il(s)===xp){const f=n.slice(i),d=mf(oh);return{type:s,sealed:f,iv:d}}const r=i+oh,c=n.slice(i,r),l=n.slice(r);return{type:s,sealed:l,iv:c}}function GQ(t,e){const n=Rh({encoded:t,encoding:e?.encoding});return B_({type:il(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Rs(n.senderPublicKey,ls):void 0,receiverPublicKey:e?.receiverPublicKey})}function B_(t){const e=t?.type||P_;if(e===Ia){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function d5(t){return t.type===Ia&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function h5(t){return t.type===xp}function KQ(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return sh([new Uint8Array([4]),e,n])}function YQ(t,e){const[n,s,i]=t.split("."),r=Buffer.from(L_(i),"base64");if(r.length!==64)throw new Error("Invalid signature length");const c=r.slice(0,32),l=r.slice(32,64),f=`${n}.${s}`,d=Vm(f),h=KQ(e);if(!BQ.verify(sh([c,l]),d,h))throw new Error("Invalid signature");return Hb(t).payload}const XQ="irn";function bm(t){return t?.relay||{protocol:XQ}}function qd(t){const e=MK[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function QQ(t,e="-"){const n={},s="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(s)){const r=i.replace(s,""),c=t[i];n[r]=c}}),n}function p5(t){if(!t.includes("wc:")){const d=XO(t);d!=null&&d.includes("wc:")&&(t=d)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,s=t.substring(0,e),i=t.substring(e+1,n).split("@"),r=typeof n<"u"?t.substring(n):"",c=new URLSearchParams(r),l={};c.forEach((d,h)=>{l[h]=d});const f=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:s,topic:ZQ(i[0]),version:parseInt(i[1],10),symKey:l.symKey,relay:QQ(l),methods:f,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function ZQ(t){return t.startsWith("//")?t.substring(2):t}function JQ(t,e="-"){const n="relay",s={};return Object.keys(t).forEach(i=>{const r=i,c=n+e+r;t[r]&&(s[c]=t[r])}),s}function g5(t){const e=new URLSearchParams,n=JQ(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const s=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${s}`}function g0(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var eZ=Object.defineProperty,tZ=Object.defineProperties,nZ=Object.getOwnPropertyDescriptors,m5=Object.getOwnPropertySymbols,sZ=Object.prototype.hasOwnProperty,iZ=Object.prototype.propertyIsEnumerable,y5=(t,e,n)=>e in t?eZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rZ=(t,e)=>{for(var n in e||(e={}))sZ.call(e,n)&&y5(t,n,e[n]);if(m5)for(var n of m5(e))iZ.call(e,n)&&y5(t,n,e[n]);return t},aZ=(t,e)=>tZ(t,nZ(e));function wf(t){const e=[];return t.forEach(n=>{const[s,i]=n.split(":");e.push(`${s}:${i}`)}),e}function oZ(t){const e=[];return Object.values(t).forEach(n=>{e.push(...wf(n.accounts))}),e}function cZ(t,e){const n=[];return Object.values(t).forEach(s=>{wf(s.accounts).includes(e)&&n.push(...s.methods)}),n}function lZ(t,e){const n=[];return Object.values(t).forEach(s=>{wf(s.accounts).includes(e)&&n.push(...s.events)}),n}function Km(t){return t.includes(":")}function Lu(t){return Km(t)?t.split(":")[0]:t}function w5(t){var e,n,s;const i={};if(!jr(t))return i;for(const[r,c]of Object.entries(t)){const l=Km(r)?[r]:c.chains,f=c.methods||[],d=c.events||[],h=Lu(r);i[h]=aZ(rZ({},i[h]),{chains:Br(l,(e=i[h])==null?void 0:e.chains),methods:Br(f,(n=i[h])==null?void 0:n.methods),events:Br(d,(s=i[h])==null?void 0:s.events)})}return i}function uZ(t){const e={};return t?.forEach(n=>{var s;const[i,r]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(s=e[i].chains)==null||s.push(`${i}:${r}`)}),e}function v5(t,e){e=e.map(s=>s.replace("did:pkh:",""));const n=uZ(e);for(const[s,i]of Object.entries(n))i.methods?i.methods=Br(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function fZ(t,e){var n,s,i,r,c,l;const f=w5(t),d=w5(e),h={},g=Object.keys(f).concat(Object.keys(d));for(const m of g)h[m]={chains:Br((n=f[m])==null?void 0:n.chains,(s=d[m])==null?void 0:s.chains),methods:Br((i=f[m])==null?void 0:i.methods,(r=d[m])==null?void 0:r.methods),events:Br((c=f[m])==null?void 0:c.events,(l=d[m])==null?void 0:l.events)};return h}const dZ={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},hZ={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ye(t,e){const{message:n,code:s}=hZ[t];return{message:e?`${n} ${e}`:n,code:s}}function zt(t,e){const{message:n,code:s}=dZ[t];return{message:e?`${n} ${e}`:n,code:s}}function Da(t,e){return!!Array.isArray(t)}function jr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ln(t){return typeof t>"u"}function on(t,e){return e&&Ln(t)?!0:typeof t=="string"&&!!t.trim().length}function cE(t,e){return e&&Ln(t)?!0:typeof t=="number"&&!isNaN(t)}function pZ(t,e){const{requiredNamespaces:n}=e,s=Object.keys(t.namespaces),i=Object.keys(n);let r=!0;return Hc(i,s)?(s.forEach(c=>{const{accounts:l,methods:f,events:d}=t.namespaces[c],h=wf(l),g=n[c];(!Hc(qO(c,g),h)||!Hc(g.methods,f)||!Hc(g.events,d))&&(r=!1)}),r):!1}function xm(t){return on(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function gZ(t){if(on(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&xm(n)}}return!1}function mZ(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(on(t,!1)){if(e(t))return!0;const n=XO(t);return e(n)}}catch{}return!1}function yZ(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function wZ(t){return t?.topic}function vZ(t,e){let n=null;return on(t?.publicKey,!1)||(n=ye("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function b5(t){let e=!0;return Da(t)?t.length&&(e=t.every(n=>on(n,!1))):e=!1,e}function bZ(t,e,n){let s=null;return Da(e)&&e.length?e.forEach(i=>{s||xm(i)||(s=zt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):xm(t)||(s=zt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function xZ(t,e,n){let s=null;return Object.entries(t).forEach(([i,r])=>{if(s)return;const c=bZ(i,qO(i,r),`${e} ${n}`);c&&(s=c)}),s}function EZ(t,e){let n=null;return Da(t)?t.forEach(s=>{n||gZ(s)||(n=zt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):n=zt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function SZ(t,e){let n=null;return Object.values(t).forEach(s=>{if(n)return;const i=EZ(s?.accounts,`${e} namespace`);i&&(n=i)}),n}function CZ(t,e){let n=null;return b5(t?.methods)?b5(t?.events)||(n=zt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=zt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function j_(t,e){let n=null;return Object.values(t).forEach(s=>{if(n)return;const i=CZ(s,`${e}, namespace`);i&&(n=i)}),n}function AZ(t,e,n){let s=null;if(t&&jr(t)){const i=j_(t,e);i&&(s=i);const r=xZ(t,e,n);r&&(s=r)}else s=ye("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return s}function Nv(t,e){let n=null;if(t&&jr(t)){const s=j_(t,e);s&&(n=s);const i=SZ(t,e);i&&(n=i)}else n=ye("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function z_(t){return on(t.protocol,!0)}function NZ(t,e){let n=!1;return t?t&&Da(t)&&t.length&&t.forEach(s=>{n=z_(s)}):n=!0,n}function TZ(t){return typeof t=="number"}function Is(t){return typeof t<"u"&&typeof t!==null}function IZ(t){return!(!t||typeof t!="object"||!t.code||!cE(t.code,!1)||!t.message||!on(t.message,!1))}function DZ(t){return!(Ln(t)||!on(t.method,!1))}function OZ(t){return!(Ln(t)||Ln(t.result)&&Ln(t.error)||!cE(t.id,!1)||!on(t.jsonrpc,!1))}function _Z(t){return!(Ln(t)||!on(t.name,!1))}function x5(t,e){return!(!xm(e)||!oZ(t).includes(e))}function MZ(t,e,n){return on(n,!1)?cZ(t,e).includes(n):!1}function RZ(t,e,n){return on(n,!1)?lZ(t,e).includes(n):!1}function E5(t,e,n){let s=null;const i=PZ(t),r=$Z(e),c=Object.keys(i),l=Object.keys(r),f=S5(Object.keys(t)),d=S5(Object.keys(e)),h=f.filter(g=>!d.includes(g));return h.length&&(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),Hc(c,l)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||s)return;const m=wf(e[g].accounts);m.includes(g)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${m.toString()}`))}),c.forEach(g=>{s||(Hc(i[g].methods,r[g].methods)?Hc(i[g].events,r[g].events)||(s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${g}`)):s=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${g}`))}),s}function PZ(t){const e={};return Object.keys(t).forEach(n=>{var s;n.includes(":")?e[n]=t[n]:(s=t[n].chains)==null||s.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function S5(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function $Z(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:wf(t[n].accounts)?.forEach(i=>{e[i]={accounts:t[n].accounts.filter(r=>r.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}),e}function UZ(t,e){return cE(t,!1)&&t<=e.max&&t>=e.min}function C5(){const t=wp();return new Promise(e=>{switch(t){case Js.browser:e(LZ());break;case Js.reactNative:e(kZ());break;case Js.node:e(BZ());break;default:e(!0)}})}function LZ(){return gf()&&navigator?.onLine}async function kZ(){return Qo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function BZ(){return!0}function jZ(t){switch(wp()){case Js.browser:zZ(t);break;case Js.reactNative:HZ(t);break}}function zZ(t){!Qo()&&gf()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function HZ(t){Qo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function FZ(){var t;return gf()&&$a.getDocument()?((t=$a.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const Tv={};class Md{static get(e){return Tv[e]}static set(e,n){Tv[e]=n}static delete(e){delete Tv[e]}}function VZ(t){const e=pf.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function qZ({publicKey:t,signature:e,payload:n}){var s;const i=c2(n.method),r=128|parseInt(((s=n.version)==null?void 0:s.toString())||"4"),c=KZ(n.address),l=n.era==="00"?new Uint8Array([0]):c2(n.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const f=parseInt(n.nonce,16),d=new Uint8Array([f&255,f>>8&255]),h=BigInt(`0x${GZ(n.tip)}`),g=XZ(h),m=new Uint8Array([0,...t,c,...e,...l,...d,...g,...i]),y=YZ(m.length+1);return new Uint8Array([...y,r,...m])}function WZ(t){const e=c2(t),n=UK.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function c2(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function GZ(t){return t.startsWith("0x")?t.slice(2):t}function KZ(t){const e=pf.decode(t)[0];return e===42?0:e===60?2:1}function YZ(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function XZ(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function QZ(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=VZ(t.transaction.address),s=qZ({publicKey:n,signature:e,payload:t.transaction}),i=Buffer.from(s).toString("hex");return WZ(i)}const ZZ="PARSE_ERROR",JZ="INVALID_REQUEST",eJ="METHOD_NOT_FOUND",tJ="INVALID_PARAMS",H_="INTERNAL_ERROR",lE="SERVER_ERROR",nJ=[-32700,-32600,-32601,-32602,-32603],ch={[ZZ]:{code:-32700,message:"Parse error"},[JZ]:{code:-32600,message:"Invalid Request"},[eJ]:{code:-32601,message:"Method not found"},[tJ]:{code:-32602,message:"Invalid params"},[H_]:{code:-32603,message:"Internal error"},[lE]:{code:-32e3,message:"Server error"}},F_=lE;function sJ(t){return nJ.includes(t)}function A5(t){return Object.keys(ch).includes(t)?ch[t]:ch[F_]}function iJ(t){const e=Object.values(ch).find(n=>n.code===t);return e||ch[F_]}function V_(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Iv={},wa={},N5;function rJ(){if(N5)return wa;N5=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.isBrowserCryptoAvailable=wa.getSubtleCrypto=wa.getBrowerCrypto=void 0;function t(){return Jn?.crypto||Jn?.msCrypto||{}}wa.getBrowerCrypto=t;function e(){const s=t();return s.subtle||s.webkitSubtle}wa.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return wa.isBrowserCryptoAvailable=n,wa}var va={},T5;function aJ(){if(T5)return va;T5=1,Object.defineProperty(va,"__esModule",{value:!0}),va.isBrowser=va.isNode=va.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}va.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}va.isNode=e;function n(){return!t()&&!e()}return va.isBrowser=n,va}var I5;function oJ(){return I5||(I5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=fp;e.__exportStar(rJ(),t),e.__exportStar(aJ(),t)})(Iv)),Iv}var cJ=oJ();function Dr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Wc(t=6){return BigInt(Dr(t))}function jo(t,e,n){return{id:n||Dr(),jsonrpc:"2.0",method:t,params:e}}function Ym(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Xm(t,e,n){return{id:t,jsonrpc:"2.0",error:lJ(e)}}function lJ(t,e){return typeof t>"u"?A5(H_):(typeof t=="string"&&(t=Object.assign(Object.assign({},A5(lE)),{message:t})),sJ(t.code)&&(t=iJ(t.code)),t)}let uJ=class{},fJ=class extends uJ{constructor(){super()}},dJ=class extends fJ{constructor(e){super()}};const hJ="^https?:",pJ="^wss?:";function gJ(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function q_(t,e){const n=gJ(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function D5(t){return q_(t,hJ)}function O5(t){return q_(t,pJ)}function mJ(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function W_(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function uE(t){return W_(t)&&"method"in t}function Qm(t){return W_(t)&&(Or(t)||Ii(t))}function Or(t){return"result"in t}function Ii(t){return"error"in t}let Ui=class extends dJ{constructor(e){super(e),this.events=new $i.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(jo(e.method,e.params||[],e.id||Wc().toString()),n)}async requestStrict(e,n){return new Promise(async(s,i)=>{if(!this.connection.connected)try{await this.open()}catch(r){i(r)}this.events.on(`${e.id}`,r=>{Ii(r)?i(r.error):s(r.result)});try{await this.connection.send(e,n)}catch(r){i(r)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qm(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const yJ=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),wJ=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",_5=t=>t.split("?")[0],M5=10,vJ=yJ();let bJ=class{constructor(e){if(this.url=e,this.events=new $i.EventEmitter,this.registering=!1,!O5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Pa(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!O5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,s)=>{const i=cJ.isReactNative()?void 0:{rejectUnauthorized:!mJ(e)},r=new vJ(e,[],i);wJ()?r.onerror=c=>{const l=c;s(this.emitError(l.error))}:r.on("error",c=>{s(this.emitError(c))}),r.onopen=()=>{this.onOpen(r),n(r)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const s=this.parseError(n),i=s.message||s.toString(),r=Xm(e,i);this.events.emit("payload",r)}parseError(e,n=this.url){return V_(e,_5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>M5&&this.events.setMaxListeners(M5)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${_5(this.url)}`));return this.events.emit("register_error",n),n}};var xJ={};const G_="wc",K_=2,l2="core",Hr=`${G_}@2:${l2}:`,EJ={logger:"error"},SJ={database:":memory:"},CJ="crypto",R5="client_ed25519_seed",AJ=we.ONE_DAY,NJ="keychain",TJ="0.3",IJ="messages",DJ="0.3",P5=we.SIX_HOURS,OJ="publisher",Y_="irn",_J="error",X_="wss://relay.walletconnect.org",MJ="relayer",Sn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},RJ="_subscription",xi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},PJ=.1,u2="2.21.5",kt={link_mode:"link_mode",relay:"relay"},z0={inbound:"inbound",outbound:"outbound"},$J="0.3",UJ="WALLETCONNECT_CLIENT_ID",$5="WALLETCONNECT_LINK_MODE_APPS",Ws={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},LJ="subscription",kJ="0.3",BJ="pairing",jJ="0.3",Rd={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},kc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Yi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zJ="history",HJ="0.3",FJ="expirer",Ti={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},VJ="0.3",qJ="verify-api",WJ="https://verify.walletconnect.com",Q_="https://verify.walletconnect.org",lh=Q_,GJ=`${lh}/v3`,KJ=[WJ,Q_],YJ="echo",XJ="https://echo.walletconnect.com",Ir={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Sa={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Xi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ic={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Dc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Pd={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},QJ=.1,ZJ="event-client",JJ=86400,eee="https://pulse.walletconnect.org/batch";function tee(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),c=r.charCodeAt(0);if(n[c]!==255)throw new TypeError(r+" is ambiguous");n[c]=i}var l=t.length,f=t.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function g(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,x=0,C=0,D=w.length;C!==D&&w[C]===0;)C++,v++;for(var N=(D-C)*h+1>>>0,I=new Uint8Array(N);C!==D;){for(var S=w[C],A=0,O=N-1;(S!==0||A<x)&&O!==-1;O--,A++)S+=256*I[O]>>>0,I[O]=S%l>>>0,S=S/l>>>0;if(S!==0)throw new Error("Non-zero carry");x=A,C++}for(var T=N-x;T!==N&&I[T]===0;)T++;for(var _=f.repeat(v);T<N;++T)_+=t.charAt(I[T]);return _}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var x=0,C=0;w[v]===f;)x++,v++;for(var D=(w.length-v)*d+1>>>0,N=new Uint8Array(D);w[v];){var I=n[w.charCodeAt(v)];if(I===255)return;for(var S=0,A=D-1;(I!==0||S<C)&&A!==-1;A--,S++)I+=l*N[A]>>>0,N[A]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");C=S,v++}if(w[v]!==" "){for(var O=D-C;O!==D&&N[O]===0;)O++;for(var T=new Uint8Array(x+(D-O)),_=x;O!==D;)T[_++]=N[O++];return T}}}function y(w){var v=m(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var nee=tee,see=nee;const Z_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},iee=t=>new TextEncoder().encode(t),ree=t=>new TextDecoder().decode(t);class aee{constructor(e,n,s){this.name=e,this.prefix=n,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oee{constructor(e,n,s){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return J_(this,e)}}class cee{constructor(e){this.decoders=e}or(e){return J_(this,e)}decode(e){const n=e[0],s=this.decoders[n];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const J_=(t,e)=>new cee({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class lee{constructor(e,n,s,i){this.name=e,this.prefix=n,this.baseEncode=s,this.baseDecode=i,this.encoder=new aee(e,n,s),this.decoder=new oee(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Zm=({name:t,prefix:e,encode:n,decode:s})=>new lee(t,e,n,s),Ep=({prefix:t,name:e,alphabet:n})=>{const{encode:s,decode:i}=see(n,e);return Zm({prefix:t,name:e,encode:s,decode:r=>Z_(i(r))})},uee=(t,e,n,s)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let r=t.length;for(;t[r-1]==="=";)--r;const c=new Uint8Array(r*n/8|0);let l=0,f=0,d=0;for(let h=0;h<r;++h){const g=i[t[h]];if(g===void 0)throw new SyntaxError(`Non-${s} character`);f=f<<n|g,l+=n,l>=8&&(l-=8,c[d++]=255&f>>l)}if(l>=n||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return c},fee=(t,e,n)=>{const s=e[e.length-1]==="=",i=(1<<n)-1;let r="",c=0,l=0;for(let f=0;f<t.length;++f)for(l=l<<8|t[f],c+=8;c>n;)c-=n,r+=e[i&l>>c];if(c&&(r+=e[i&l<<n-c]),s)for(;r.length*n&7;)r+="=";return r},Hn=({name:t,prefix:e,bitsPerChar:n,alphabet:s})=>Zm({prefix:e,name:t,encode(i){return fee(i,s,n)},decode(i){return uee(i,s,n,t)}}),dee=Zm({prefix:"\0",name:"identity",encode:t=>ree(t),decode:t=>iee(t)});var hee=Object.freeze({__proto__:null,identity:dee});const pee=Hn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gee=Object.freeze({__proto__:null,base2:pee});const mee=Hn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yee=Object.freeze({__proto__:null,base8:mee});const wee=Ep({prefix:"9",name:"base10",alphabet:"0123456789"});var vee=Object.freeze({__proto__:null,base10:wee});const bee=Hn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xee=Hn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Eee=Object.freeze({__proto__:null,base16:bee,base16upper:xee});const See=Hn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cee=Hn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Aee=Hn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nee=Hn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tee=Hn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Iee=Hn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dee=Hn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oee=Hn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_ee=Hn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mee=Object.freeze({__proto__:null,base32:See,base32upper:Cee,base32pad:Aee,base32padupper:Nee,base32hex:Tee,base32hexupper:Iee,base32hexpad:Dee,base32hexpadupper:Oee,base32z:_ee});const Ree=Ep({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pee=Ep({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $ee=Object.freeze({__proto__:null,base36:Ree,base36upper:Pee});const Uee=Ep({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lee=Ep({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kee=Object.freeze({__proto__:null,base58btc:Uee,base58flickr:Lee});const Bee=Hn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jee=Hn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zee=Hn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Hee=Hn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fee=Object.freeze({__proto__:null,base64:Bee,base64pad:jee,base64url:zee,base64urlpad:Hee});const eM=Array.from(""),Vee=eM.reduce((t,e,n)=>(t[n]=e,t),[]),qee=eM.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Wee(t){return t.reduce((e,n)=>(e+=Vee[n],e),"")}function Gee(t){const e=[];for(const n of t){const s=qee[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(s)}return new Uint8Array(e)}const Kee=Zm({prefix:"",name:"base256emoji",encode:Wee,decode:Gee});var Yee=Object.freeze({__proto__:null,base256emoji:Kee}),Xee=tM,U5=128,Qee=-128,Zee=Math.pow(2,31);function tM(t,e,n){e=e||[],n=n||0;for(var s=n;t>=Zee;)e[n++]=t&255|U5,t/=128;for(;t&Qee;)e[n++]=t&255|U5,t>>>=7;return e[n]=t|0,tM.bytes=n-s+1,e}var Jee=f2,ete=128,L5=127;function f2(t,s){var n=0,s=s||0,i=0,r=s,c,l=t.length;do{if(r>=l)throw f2.bytes=0,new RangeError("Could not decode varint");c=t[r++],n+=i<28?(c&L5)<<i:(c&L5)*Math.pow(2,i),i+=7}while(c>=ete);return f2.bytes=r-s,n}var tte=Math.pow(2,7),nte=Math.pow(2,14),ste=Math.pow(2,21),ite=Math.pow(2,28),rte=Math.pow(2,35),ate=Math.pow(2,42),ote=Math.pow(2,49),cte=Math.pow(2,56),lte=Math.pow(2,63),ute=function(t){return t<tte?1:t<nte?2:t<ste?3:t<ite?4:t<rte?5:t<ate?6:t<ote?7:t<cte?8:t<lte?9:10},fte={encode:Xee,decode:Jee,encodingLength:ute},nM=fte;const k5=(t,e,n=0)=>(nM.encode(t,e,n),e),B5=t=>nM.encodingLength(t),d2=(t,e)=>{const n=e.byteLength,s=B5(t),i=s+B5(n),r=new Uint8Array(i+n);return k5(t,r,0),k5(n,r,s),r.set(e,i),new dte(t,n,e,r)};class dte{constructor(e,n,s,i){this.code=e,this.size=n,this.digest=s,this.bytes=i}}const sM=({name:t,code:e,encode:n})=>new hte(t,e,n);class hte{constructor(e,n,s){this.name=e,this.code=n,this.encode=s}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?d2(this.code,n):n.then(s=>d2(this.code,s))}else throw Error("Unknown type, must be binary type")}}const iM=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),pte=sM({name:"sha2-256",code:18,encode:iM("SHA-256")}),gte=sM({name:"sha2-512",code:19,encode:iM("SHA-512")});var mte=Object.freeze({__proto__:null,sha256:pte,sha512:gte});const rM=0,yte="identity",aM=Z_,wte=t=>d2(rM,aM(t)),vte={code:rM,name:yte,encode:aM,digest:wte};var bte=Object.freeze({__proto__:null,identity:vte});new TextEncoder,new TextDecoder;const j5={...hee,...gee,...yee,...vee,...Eee,...Mee,...$ee,...kee,...Fee,...Yee};({...mte,...bte});function oM(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function xte(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?oM(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function cM(t,e,n,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:s}}}const z5=cM("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Dv=cM("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=xte(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Ete={utf8:z5,"utf-8":z5,hex:j5.base16,latin1:Dv,ascii:Dv,binary:Dv,...j5};function Ste(t,e="utf8"){const n=Ete[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?oM(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Cte=Object.defineProperty,Ate=(t,e,n)=>e in t?Cte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ar=(t,e,n)=>Ate(t,typeof e!="symbol"?e+"":e,n);let Nte=class{constructor(e,n){this.core=e,this.logger=n,Ar(this,"keychain",new Map),Ar(this,"name",NJ),Ar(this,"version",TJ),Ar(this,"initialized",!1),Ar(this,"storagePrefix",Hr),Ar(this,"init",async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}}),Ar(this,"has",s=>(this.isInitialized(),this.keychain.has(s))),Ar(this,"set",async(s,i)=>{this.isInitialized(),this.keychain.set(s,i),await this.persist()}),Ar(this,"get",s=>{this.isInitialized();const i=this.keychain.get(s);if(typeof i>"u"){const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(r)}return i}),Ar(this,"del",async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()}),this.core=e,this.logger=fs(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Xb(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Tte=Object.defineProperty,Ite=(t,e,n)=>e in t?Tte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>Ite(t,typeof e!="symbol"?e+"":e,n);class Dte{constructor(e,n,s){this.core=e,this.logger=n,Mn(this,"name",CJ),Mn(this,"keychain"),Mn(this,"randomSessionIdentifier",o2()),Mn(this,"initialized",!1),Mn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Mn(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Mn(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),r=fT(i);return yO(r.publicKey)}),Mn(this,"generateKeyPair",()=>{this.isInitialized();const i=zQ();return this.setPrivateKey(i.publicKey,i.privateKey)}),Mn(this,"signJWT",async i=>{this.isInitialized();const r=await this.getClientSeed(),c=fT(r),l=this.randomSessionIdentifier;return await Wq(l,i,AJ,c)}),Mn(this,"generateSharedKey",(i,r,c)=>{this.isInitialized();const l=this.getPrivateKey(i),f=HQ(l,r);return this.setSymKey(f,c)}),Mn(this,"setSymKey",async(i,r)=>{this.isInitialized();const c=r||j0(i);return await this.keychain.set(c,i),c}),Mn(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Mn(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Mn(this,"encode",async(i,r,c)=>{this.isInitialized();const l=B_(c),f=Pa(r);if(h5(l))return qQ(f,c?.encoding);if(d5(l)){const m=l.senderPublicKey,y=l.receiverPublicKey;i=await this.generateSharedKey(m,y)}const d=this.getSymKey(i),{type:h,senderPublicKey:g}=l;return FQ({type:h,symKey:d,message:f,senderPublicKey:g,encoding:c?.encoding})}),Mn(this,"decode",async(i,r,c)=>{this.isInitialized();const l=GQ(r,c);if(h5(l)){const f=WQ(r,c?.encoding);return nl(f)}if(d5(l)){const f=l.receiverPublicKey,d=l.senderPublicKey;i=await this.generateSharedKey(f,d)}try{const f=this.getSymKey(i),d=VQ({symKey:f,encoded:r,encoding:c?.encoding});return nl(d)}catch(f){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(f)}}),Mn(this,"getPayloadType",(i,r=sr)=>{const c=Rh({encoded:i,encoding:r});return il(c.type)}),Mn(this,"getPayloadSenderPublicKey",(i,r=sr)=>{const c=Rh({encoded:i,encoding:r});return c.senderPublicKey?Rs(c.senderPublicKey,ls):void 0}),this.core=e,this.logger=fs(n,this.name),this.keychain=s||new Nte(this.core,this.logger)}get context(){return Ps(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(R5)}catch{e=o2(),await this.keychain.set(R5,e)}return Ste(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ote=Object.defineProperty,_te=Object.defineProperties,Mte=Object.getOwnPropertyDescriptors,H5=Object.getOwnPropertySymbols,Rte=Object.prototype.hasOwnProperty,Pte=Object.prototype.propertyIsEnumerable,h2=(t,e,n)=>e in t?Ote(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$te=(t,e)=>{for(var n in e||(e={}))Rte.call(e,n)&&h2(t,n,e[n]);if(H5)for(var n of H5(e))Pte.call(e,n)&&h2(t,n,e[n]);return t},Ute=(t,e)=>_te(t,Mte(e)),Vs=(t,e,n)=>h2(t,typeof e!="symbol"?e+"":e,n);class Lte extends VH{constructor(e,n){super(e,n),this.logger=e,this.core=n,Vs(this,"messages",new Map),Vs(this,"messagesWithoutClientAck",new Map),Vs(this,"name",IJ),Vs(this,"version",DJ),Vs(this,"initialized",!1),Vs(this,"storagePrefix",Hr),Vs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}}),Vs(this,"set",async(s,i,r)=>{this.isInitialized();const c=_r(i);let l=this.messages.get(s);if(typeof l>"u"&&(l={}),typeof l[c]<"u")return c;if(l[c]=i,this.messages.set(s,l),r===z0.inbound){const f=this.messagesWithoutClientAck.get(s)||{};this.messagesWithoutClientAck.set(s,Ute($te({},f),{[c]:i}))}return await this.persist(),c}),Vs(this,"get",s=>{this.isInitialized();let i=this.messages.get(s);return typeof i>"u"&&(i={}),i}),Vs(this,"getWithoutAck",s=>{this.isInitialized();const i={};for(const r of s){const c=this.messagesWithoutClientAck.get(r)||{};i[r]=Object.values(c)}return i}),Vs(this,"has",(s,i)=>{this.isInitialized();const r=this.get(s),c=_r(i);return typeof r[c]<"u"}),Vs(this,"ack",async(s,i)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(s);if(typeof r>"u")return;const c=_r(i);delete r[c],Object.keys(r).length===0?this.messagesWithoutClientAck.delete(s):this.messagesWithoutClientAck.set(s,r),await this.persist()}),Vs(this,"del",async s=>{this.isInitialized(),this.messages.delete(s),this.messagesWithoutClientAck.delete(s),await this.persist()}),this.logger=fs(e,this.name),this.core=n}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Xb(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Xb(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Qb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kte=Object.defineProperty,Bte=Object.defineProperties,jte=Object.getOwnPropertyDescriptors,F5=Object.getOwnPropertySymbols,zte=Object.prototype.hasOwnProperty,Hte=Object.prototype.propertyIsEnumerable,p2=(t,e,n)=>e in t?kte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m0=(t,e)=>{for(var n in e||(e={}))zte.call(e,n)&&p2(t,n,e[n]);if(F5)for(var n of F5(e))Hte.call(e,n)&&p2(t,n,e[n]);return t},Ov=(t,e)=>Bte(t,jte(e)),Qi=(t,e,n)=>p2(t,typeof e!="symbol"?e+"":e,n);class Fte extends qH{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Qi(this,"events",new $i.EventEmitter),Qi(this,"name",OJ),Qi(this,"queue",new Map),Qi(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),Qi(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Qi(this,"needsTransportRestart",!1),Qi(this,"publish",async(s,i,r)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:i,opts:r}});const l=r?.ttl||P5,f=bm(r),d=r?.prompt||!1,h=r?.tag||0,g=r?.id||Wc().toString(),m={topic:s,message:i,opts:{ttl:l,relay:f,prompt:d,tag:h,id:g,attestation:r?.attestation,tvf:r?.tvf}},y=`Failed to publish payload, please try again. id:${g} tag:${h}`;try{const w=new Promise(async v=>{const x=({id:D})=>{m.opts.id===D&&(this.removeRequestFromQueue(D),this.relayer.events.removeListener(Sn.publish,x),v(m))};this.relayer.events.on(Sn.publish,x);const C=Bo(new Promise((D,N)=>{this.rpcPublish({topic:s,message:i,ttl:l,prompt:d,tag:h,id:g,attestation:r?.attestation,tvf:r?.tvf}).then(D).catch(I=>{this.logger.warn(I,I?.message),N(I)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${h}`);try{await C,this.events.removeListener(Sn.publish,x)}catch(D){this.queue.set(g,Ov(m0({},m),{attempt:1})),this.logger.warn(D,D?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:s,message:i,opts:r}}),await Bo(w,this.publishTimeout,y)}catch(w){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(w),(c=r?.internal)!=null&&c.throwOnFailedPublish)throw w}finally{this.queue.delete(g)}}),Qi(this,"on",(s,i)=>{this.events.on(s,i)}),Qi(this,"once",(s,i)=>{this.events.once(s,i)}),Qi(this,"off",(s,i)=>{this.events.off(s,i)}),Qi(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.relayer=e,this.logger=fs(n,this.name),this.registerEventListeners()}get context(){return Ps(this.logger)}async rpcPublish(e){var n,s,i,r;const{topic:c,message:l,ttl:f=P5,prompt:d,tag:h,id:g,attestation:m,tvf:y}=e,w={method:qd(bm().protocol).publish,params:m0({topic:c,message:l,ttl:f,prompt:d,tag:h,attestation:m},y),id:g};Ln((n=w.params)==null?void 0:n.prompt)&&((s=w.params)==null||delete s.prompt),Ln((i=w.params)==null?void 0:i.tag)&&((r=w.params)==null||delete r.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:w});const v=await this.relayer.request(w);return this.relayer.events.emit(Sn.publish,e),this.logger.debug("Successfully Published Payload"),v}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const s=e.attempt+1;this.queue.set(n,Ov(m0({},e),{attempt:s}));const{topic:i,message:r,opts:c,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${s}`),await this.rpcPublish(Ov(m0({},e),{topic:i,message:r,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:l,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ul.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Sn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Sn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Vte=Object.defineProperty,qte=(t,e,n)=>e in t?Vte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uu=(t,e,n)=>qte(t,typeof e!="symbol"?e+"":e,n);class Wte{constructor(){uu(this,"map",new Map),uu(this,"set",(e,n)=>{const s=this.get(e);this.exists(e,n)||this.map.set(e,[...s,n])}),uu(this,"get",e=>this.map.get(e)||[]),uu(this,"exists",(e,n)=>this.get(e).includes(n)),uu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,n))return;const i=s.filter(r=>r!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),uu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Gte=Object.defineProperty,Kte=Object.defineProperties,Yte=Object.getOwnPropertyDescriptors,V5=Object.getOwnPropertySymbols,Xte=Object.prototype.hasOwnProperty,Qte=Object.prototype.propertyIsEnumerable,g2=(t,e,n)=>e in t?Gte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$d=(t,e)=>{for(var n in e||(e={}))Xte.call(e,n)&&g2(t,n,e[n]);if(V5)for(var n of V5(e))Qte.call(e,n)&&g2(t,n,e[n]);return t},_v=(t,e)=>Kte(t,Yte(e)),_t=(t,e,n)=>g2(t,typeof e!="symbol"?e+"":e,n);class Zte extends KH{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,_t(this,"subscriptions",new Map),_t(this,"topicMap",new Wte),_t(this,"events",new $i.EventEmitter),_t(this,"name",LJ),_t(this,"version",kJ),_t(this,"pending",new Map),_t(this,"cached",[]),_t(this,"initialized",!1),_t(this,"storagePrefix",Hr),_t(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),_t(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),_t(this,"clientId"),_t(this,"batchSubscribeTopicsLimit",500),_t(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),_t(this,"subscribe",async(s,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:i}});try{const r=bm(i),c={topic:s,relay:r,transportType:i?.transportType};this.pending.set(s,c);const l=await this.rpcSubscribe(s,r,i);return typeof l=="string"&&(this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:i}})),l}catch(r){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(r),r}}),_t(this,"unsubscribe",async(s,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(s,i.id,i):await this.unsubscribeByTopic(s,i)}),_t(this,"isSubscribed",s=>new Promise(i=>{i(this.topicMap.topics.includes(s))})),_t(this,"isKnownTopic",s=>new Promise(i=>{i(this.topicMap.topics.includes(s)||this.pending.has(s)||this.cached.some(r=>r.topic===s))})),_t(this,"on",(s,i)=>{this.events.on(s,i)}),_t(this,"once",(s,i)=>{this.events.once(s,i)}),_t(this,"off",(s,i)=>{this.events.off(s,i)}),_t(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),_t(this,"start",async()=>{await this.onConnect()}),_t(this,"stop",async()=>{await this.onDisconnect()}),_t(this,"restart",async()=>{await this.restore(),await this.onRestart()}),_t(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const s=[];this.pending.forEach(i=>{s.push(i)}),await this.batchSubscribe(s)}),_t(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ul.pulse,async()=>{await this.checkPending()}),this.events.on(Ws.created,async s=>{const i=Ws.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:s}),await this.persist()}),this.events.on(Ws.deleted,async s=>{const i=Ws.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:s}),await this.persist()})}),this.relayer=e,this.logger=fs(n,this.name),this.clientId=""}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let s=!1;try{s=this.getSubscription(e).topic===n}catch{}return s}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const s=this.topicMap.get(e);await Promise.all(s.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:s}});try{const i=bm(s);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const r=zt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,r),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:s}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,s){var i;(!s||s?.transportType===kt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const r={method:qd(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});const c=(i=s?.internal)==null?void 0:i.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if(s?.transportType===kt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(r).catch(h=>this.logger.warn(h))},we.toMiliseconds(we.ONE_SECOND)),l;const f=new Promise(async h=>{const g=m=>{m.topic===e&&(this.events.removeListener(Ws.created,g),h(m.id))};this.events.on(Ws.created,g);try{const m=await Bo(new Promise((y,w)=>{this.relayer.request(r).catch(v=>{this.logger.warn(v,v?.message),w(v)}).then(y)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ws.created,g),h(m)}catch{}}),d=await Bo(f,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return d?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Sn.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,s={method:qd(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Bo(new Promise(i=>{this.relayer.request(s).catch(r=>this.logger.warn(r)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Sn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,s={method:qd(n.protocol).batchFetchMessages,params:{topics:e.map(r=>r.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});let i;try{i=await await Bo(new Promise((r,c)=>{this.relayer.request(s).catch(l=>{this.logger.warn(l),c(l)}).then(r)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Sn.connection_stalled)}return i}rpcUnsubscribe(e,n,s){const i={method:qd(s.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,_v($d({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,$d({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,s){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,$d({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ws.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Ws.deleted,_v($d({},s),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ws.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let s=0;s<n;s++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Ws.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>_v($d({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await lY(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return _r(e+await this.getClientId())}}var Jte=Object.defineProperty,q5=Object.getOwnPropertySymbols,ene=Object.prototype.hasOwnProperty,tne=Object.prototype.propertyIsEnumerable,m2=(t,e,n)=>e in t?Jte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W5=(t,e)=>{for(var n in e||(e={}))ene.call(e,n)&&m2(t,n,e[n]);if(q5)for(var n of q5(e))tne.call(e,n)&&m2(t,n,e[n]);return t},ct=(t,e,n)=>m2(t,typeof e!="symbol"?e+"":e,n);class nne extends WH{constructor(e){super(e),ct(this,"protocol","wc"),ct(this,"version",2),ct(this,"core"),ct(this,"logger"),ct(this,"events",new $i.EventEmitter),ct(this,"provider"),ct(this,"messages"),ct(this,"subscriber"),ct(this,"publisher"),ct(this,"name",MJ),ct(this,"transportExplicitlyClosed",!1),ct(this,"initialized",!1),ct(this,"connectionAttemptInProgress",!1),ct(this,"relayUrl"),ct(this,"projectId"),ct(this,"packageName"),ct(this,"bundleId"),ct(this,"hasExperiencedNetworkDisruption",!1),ct(this,"pingTimeout"),ct(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),ct(this,"reconnectTimeout"),ct(this,"connectPromise"),ct(this,"reconnectInProgress",!1),ct(this,"requestsInFlight",[]),ct(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),ct(this,"request",async n=>{var s,i;this.logger.debug("Publishing Request Payload");const r=n.id||Wc().toString();await this.toEstablishConnection();try{this.logger.trace({id:r,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - publishing...");const c=`${r}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(c);const l=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(f=>f!==c),l}catch(c){throw this.logger.debug(`Failed to Publish Request: ${r}`),c}}),ct(this,"resetPingTimeout",()=>{mm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,s,i,r;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(r=(i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||r.call(i)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),ct(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ct(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Sn.connect)}),ct(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),ct(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Sn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ct(this,"registerProviderListeners",()=>{this.provider.on(xi.payload,this.onPayloadHandler),this.provider.on(xi.connect,this.onConnectHandler),this.provider.on(xi.disconnect,this.onDisconnectHandler),this.provider.on(xi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?fs(e.logger,this.name):hp(gp({level:e.logger||_J})),this.messages=new Lte(this.logger,e.core),this.subscriber=new Zte(this,this.logger),this.publisher=new Fte(this,this.logger),this.relayUrl=e?.relayUrl||X_,this.projectId=e.projectId,GK()?this.packageName=PT():KK()&&(this.bundleId=PT()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Ps(this.logger)}get connected(){var e,n,s;return((s=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:s.readyState)===1||!1}get connecting(){var e,n,s;return((s=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:s.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,s){this.isInitialized(),await this.publisher.publish(e,n,s),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:kt.relay},z0.outbound)}async subscribe(e,n){var s,i,r;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((s=n?.internal)==null?void 0:s.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let l=((r=this.subscriber.topicMap.get(e))==null?void 0:r[0])||"",f;const d=h=>{h.topic===e&&(this.subscriber.off(Ws.created,d),f())};return await Promise.all([new Promise(h=>{f=h,this.subscriber.on(Ws.created,d)}),new Promise(async(h,g)=>{l=await this.subscriber.subscribe(e,W5({internal:{throwOnFailedPublish:c}},n)).catch(m=>{c&&g(m)})||l,h()})]),l}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Bo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,s)=>{await this.connect(e).then(n).catch(s).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await C5())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((s,i)=>s.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const s of n)try{await this.onMessageEvent(s)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:s}=e;if(!n.sessionExists){const i=gn(we.FIVE_MINUTES),r={topic:s,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(s,r)}this.events.emit(Sn.message,e),await this.recordMessageEvent(e,z0.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(s,i)=>{const r=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(xi.disconnect,r),await Bo(new Promise((c,l)=>{this.provider.connect().then(c).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{i(c)}).finally(()=>{this.provider.off(xi.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,l)=>{const f=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(xi.disconnect,f),await this.subscriber.start().then(c).catch(l).finally(()=>{this.provider.off(xi.disconnect,f)})}),this.hasExperiencedNetworkDisruption=!1,s()})}catch(s){await this.subscriber.stop();const i=s;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(s=>setTimeout(s,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,s,i,r;if(mm())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((r=(i=(s=this.provider)==null?void 0:s.connection)==null?void 0:i.socket)==null||r.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ui(new bJ(JK({sdkVersion:u2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:s,message:i}=e;await this.messages.set(s,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:s}=e;if(!s||s.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,s);return i&&this.logger.warn(`Ignoring duplicate message: ${s}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),uE(e)){if(!e.method.endsWith(RJ))return;const n=e.params,{topic:s,message:i,publishedAt:r,attestation:c}=n.data,l={topic:s,message:i,publishedAt:r,transportType:kt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(W5({type:"event",event:n.id},l)),this.events.emit(n.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else Qm(e)&&this.events.emit(Sn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,z0.inbound),this.events.emit(Sn.message,e))}async acknowledgePayload(e){const n=Ym(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(xi.payload,this.onPayloadHandler),this.provider.off(xi.connect,this.onConnectHandler),this.provider.off(xi.disconnect,this.onDisconnectHandler),this.provider.off(xi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await C5();jZ(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(s=>this.logger.error(s,s?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ul.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&FZ())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Sn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(PJ)))))}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function sne(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function G5(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function K5(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ine="[object RegExp]",rne="[object String]",ane="[object Number]",one="[object Boolean]",Y5="[object Arguments]",cne="[object Symbol]",lne="[object Date]",une="[object Map]",fne="[object Set]",dne="[object Array]",hne="[object Function]",pne="[object ArrayBuffer]",Mv="[object Object]",gne="[object Error]",mne="[object DataView]",yne="[object Uint8Array]",wne="[object Uint8ClampedArray]",vne="[object Uint16Array]",bne="[object Uint32Array]",xne="[object BigUint64Array]",Ene="[object Int8Array]",Sne="[object Int16Array]",Cne="[object Int32Array]",Ane="[object BigInt64Array]",Nne="[object Float32Array]",Tne="[object Float64Array]";function Ine(){}function X5(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Dne(t,e,n){return Wd(t,e,void 0,void 0,void 0,void 0,n)}function Wd(t,e,n,s,i,r,c){const l=c(t,e,n,s,i,r);if(l!==void 0)return l;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return uh(t,e,r,c)}return uh(t,e,r,c)}function uh(t,e,n,s){if(Object.is(t,e))return!0;let i=K5(t),r=K5(e);if(i===Y5&&(i=Mv),r===Y5&&(r=Mv),i!==r)return!1;switch(i){case rne:return t.toString()===e.toString();case ane:{const f=t.valueOf(),d=e.valueOf();return sne(f,d)}case one:case lne:case cne:return Object.is(t.valueOf(),e.valueOf());case ine:return t.source===e.source&&t.flags===e.flags;case hne:return t===e}n=n??new Map;const c=n.get(t),l=n.get(e);if(c!=null&&l!=null)return c===e;n.set(t,e),n.set(e,t);try{switch(i){case une:{if(t.size!==e.size)return!1;for(const[f,d]of t.entries())if(!e.has(f)||!Wd(d,e.get(f),f,t,e,n,s))return!1;return!0}case fne:{if(t.size!==e.size)return!1;const f=Array.from(t.values()),d=Array.from(e.values());for(let h=0;h<f.length;h++){const g=f[h],m=d.findIndex(y=>Wd(g,y,void 0,t,e,n,s));if(m===-1)return!1;d.splice(m,1)}return!0}case dne:case yne:case wne:case vne:case bne:case xne:case Ene:case Sne:case Cne:case Ane:case Nne:case Tne:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let f=0;f<t.length;f++)if(!Wd(t[f],e[f],f,t,e,n,s))return!1;return!0}case pne:return t.byteLength!==e.byteLength?!1:uh(new Uint8Array(t),new Uint8Array(e),n,s);case mne:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:uh(new Uint8Array(t),new Uint8Array(e),n,s);case gne:return t.name===e.name&&t.message===e.message;case Mv:{if(!(uh(t.constructor,e.constructor,n,s)||X5(t)&&X5(e)))return!1;const f=[...Object.keys(t),...G5(t)],d=[...Object.keys(e),...G5(e)];if(f.length!==d.length)return!1;for(let h=0;h<f.length;h++){const g=f[h],m=t[g];if(!Object.hasOwn(e,g))return!1;const y=e[g];if(!Wd(m,y,g,t,e,n,s))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function One(t,e){return Dne(t,e,Ine)}var _ne=Object.defineProperty,Q5=Object.getOwnPropertySymbols,Mne=Object.prototype.hasOwnProperty,Rne=Object.prototype.propertyIsEnumerable,y2=(t,e,n)=>e in t?_ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z5=(t,e)=>{for(var n in e||(e={}))Mne.call(e,n)&&y2(t,n,e[n]);if(Q5)for(var n of Q5(e))Rne.call(e,n)&&y2(t,n,e[n]);return t},xs=(t,e,n)=>y2(t,typeof e!="symbol"?e+"":e,n);class dl extends GH{constructor(e,n,s,i=Hr,r=void 0){super(e,n,s,i),this.core=e,this.logger=n,this.name=s,xs(this,"map",new Map),xs(this,"version",$J),xs(this,"cached",[]),xs(this,"initialized",!1),xs(this,"getKey"),xs(this,"storagePrefix",Hr),xs(this,"recentlyDeleted",[]),xs(this,"recentlyDeletedLimit",200),xs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Ln(c)?this.map.set(this.getKey(c),c):yZ(c)?this.map.set(c.id,c):wZ(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),xs(this,"set",async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())}),xs(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),xs(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(f=>One(l[f],c[f]))):this.values)),xs(this,"update",async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const f=Z5(Z5({},this.getData(c)),l);this.map.set(c,f),await this.persist()}),xs(this,"delete",async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=fs(n,this.name),this.storagePrefix=i,this.getKey=r}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Pne=Object.defineProperty,$ne=(t,e,n)=>e in t?Pne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e,n)=>$ne(t,typeof e!="symbol"?e+"":e,n);class Une{constructor(e,n){this.core=e,this.logger=n,tt(this,"name",BJ),tt(this,"version",jJ),tt(this,"events",new Lx),tt(this,"pairings"),tt(this,"initialized",!1),tt(this,"storagePrefix",Hr),tt(this,"ignoredPayloadTypes",[Ia]),tt(this,"registeredMethods",[]),tt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),tt(this,"register",({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]}),tt(this,"create",async s=>{this.isInitialized();const i=o2(),r=await this.core.crypto.setSymKey(i),c=gn(we.FIVE_MINUTES),l={protocol:Y_},f={topic:r,expiry:c,relay:l,active:!1,methods:s?.methods},d=g5({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:i,relay:l,expiryTimestamp:c,methods:s?.methods});return this.events.emit(kc.create,f),this.core.expirer.set(r,c),await this.pairings.set(r,f),await this.core.relayer.subscribe(r,{transportType:s?.transportType}),{topic:r,uri:d}}),tt(this,"pair",async s=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:s?.uri,trace:[Ir.pairing_started]}});this.isValidPair(s,i);const{topic:r,symKey:c,relay:l,expiryTimestamp:f,methods:d}=p5(s.uri);i.props.properties.topic=r,i.addTrace(Ir.pairing_uri_validation_success),i.addTrace(Ir.pairing_uri_not_expired);let h;if(this.pairings.keys.includes(r)){if(h=this.pairings.get(r),i.addTrace(Ir.existing_pairing),h.active)throw i.setError(Sa.active_pairing_already_exists),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);i.addTrace(Ir.pairing_not_expired)}const g=f||gn(we.FIVE_MINUTES),m={topic:r,relay:l,expiry:g,active:!1,methods:d};this.core.expirer.set(r,g),await this.pairings.set(r,m),i.addTrace(Ir.store_new_pairing),s.activatePairing&&await this.activate({topic:r}),this.events.emit(kc.create,m),i.addTrace(Ir.emit_inactive_pairing),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(c,r),i.addTrace(Ir.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Sa.no_internet_connection)}try{await this.core.relayer.subscribe(r,{relay:l})}catch(y){throw i.setError(Sa.subscribe_pairing_topic_failure),y}return i.addTrace(Ir.subscribe_pairing_topic_success),m}),tt(this,"activate",async({topic:s})=>{this.isInitialized();const i=gn(we.FIVE_MINUTES);this.core.expirer.set(s,i),await this.pairings.update(s,{active:!0,expiry:i})}),tt(this,"ping",async s=>{this.isInitialized(),await this.isValidPing(s),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=s;if(this.pairings.keys.includes(i)){const r=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:l,reject:f}=Pc();this.events.once(pt("pairing_ping",r),({error:d})=>{d?f(d):l()}),await c()}}),tt(this,"updateExpiry",async({topic:s,expiry:i})=>{this.isInitialized(),await this.pairings.update(s,{expiry:i})}),tt(this,"updateMetadata",async({topic:s,metadata:i})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:i})}),tt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),tt(this,"disconnect",async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:i}=s;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",zt("USER_DISCONNECTED")),await this.deletePairing(i))}),tt(this,"formatUriFromPairing",s=>{this.isInitialized();const{topic:i,relay:r,expiry:c,methods:l}=s,f=this.core.crypto.keychain.get(i);return g5({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:f,relay:r,expiryTimestamp:c,methods:l})}),tt(this,"sendRequest",async(s,i,r)=>{const c=jo(i,r),l=await this.core.crypto.encode(s,c),f=Rd[i].req;return this.core.history.set(s,c),this.core.relayer.publish(s,l,f),c.id}),tt(this,"sendResult",async(s,i,r)=>{const c=Ym(s,r),l=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,s)).request.method,d=Rd[f].res;await this.core.relayer.publish(i,l,d),await this.core.history.resolve(c)}),tt(this,"sendError",async(s,i,r)=>{const c=Xm(s,r),l=await this.core.crypto.encode(i,c),f=(await this.core.history.get(i,s)).request.method,d=Rd[f]?Rd[f].res:Rd.unregistered_method.res;await this.core.relayer.publish(i,l,d),await this.core.history.resolve(c)}),tt(this,"deletePairing",async(s,i)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,zt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),i?Promise.resolve():this.core.expirer.del(s)])}),tt(this,"cleanup",async()=>{const s=this.pairings.getAll().filter(i=>Mo(i.expiry));await Promise.all(s.map(i=>this.deletePairing(i.topic)))}),tt(this,"onRelayEventRequest",async s=>{const{topic:i,payload:r}=s;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,r);default:return await this.onUnknownRpcMethodRequest(i,r)}}),tt(this,"onRelayEventResponse",async s=>{const{topic:i,payload:r}=s,c=(await this.core.history.get(i,r.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,r);default:return this.onUnknownRpcMethodResponse(c)}}),tt(this,"onPairingPingRequest",async(s,i)=>{const{id:r}=i;try{this.isValidPing({topic:s}),await this.sendResult(r,s,!0),this.events.emit(kc.ping,{id:r,topic:s})}catch(c){await this.sendError(r,s,c),this.logger.error(c)}}),tt(this,"onPairingPingResponse",(s,i)=>{const{id:r}=i;setTimeout(()=>{Or(i)?this.events.emit(pt("pairing_ping",r),{}):Ii(i)&&this.events.emit(pt("pairing_ping",r),{error:i.error})},500)}),tt(this,"onPairingDeleteRequest",async(s,i)=>{const{id:r}=i;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(kc.delete,{id:r,topic:s})}catch(c){await this.sendError(r,s,c),this.logger.error(c)}}),tt(this,"onUnknownRpcMethodRequest",async(s,i)=>{const{id:r,method:c}=i;try{if(this.registeredMethods.includes(c))return;const l=zt("WC_METHOD_UNSUPPORTED",c);await this.sendError(r,s,l),this.logger.error(l)}catch(l){await this.sendError(r,s,l),this.logger.error(l)}}),tt(this,"onUnknownRpcMethodResponse",s=>{this.registeredMethods.includes(s)||this.logger.error(zt("WC_METHOD_UNSUPPORTED",s))}),tt(this,"isValidPair",(s,i)=>{var r;if(!Is(s)){const{message:l}=ye("MISSING_OR_INVALID",`pair() params: ${s}`);throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(!mZ(s.uri)){const{message:l}=ye("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw i.setError(Sa.malformed_pairing_uri),new Error(l)}const c=p5(s?.uri);if(!((r=c?.relay)!=null&&r.protocol)){const{message:l}=ye("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=ye("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Sa.malformed_pairing_uri),new Error(l)}if(c!=null&&c.expiryTimestamp&&we.toMiliseconds(c?.expiryTimestamp)<Date.now()){i.setError(Sa.pairing_expired);const{message:l}=ye("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),tt(this,"isValidPing",async s=>{if(!Is(s)){const{message:r}=ye("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(r)}const{topic:i}=s;await this.isValidPairingTopic(i)}),tt(this,"isValidDisconnect",async s=>{if(!Is(s)){const{message:r}=ye("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(r)}const{topic:i}=s;await this.isValidPairingTopic(i)}),tt(this,"isValidPairingTopic",async s=>{if(!on(s,!1)){const{message:i}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(i)}if(!this.pairings.keys.includes(s)){const{message:i}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(i)}if(Mo(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:i}=ye("EXPIRED",`pairing topic: ${s}`);throw new Error(i)}}),this.core=e,this.logger=fs(n,this.name),this.pairings=new dl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ps(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Sn.message,async e=>{const{topic:n,message:s,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==kt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))try{const r=await this.core.crypto.decode(n,s);uE(r)?(this.core.history.set(n,r),await this.onRelayEventRequest({topic:n,payload:r})):Qm(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:n,payload:r}),this.core.history.delete(n,r.id)),await this.core.relayer.messages.ack(n,s)}catch(r){this.logger.error(r)}})}registerExpirerEvents(){this.core.expirer.on(Ti.expired,async e=>{const{topic:n}=YO(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(kc.expire,{topic:n}))})}}var Lne=Object.defineProperty,kne=(t,e,n)=>e in t?Lne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e,n)=>kne(t,typeof e!="symbol"?e+"":e,n);class Bne extends FH{constructor(e,n){super(e,n),this.core=e,this.logger=n,Rn(this,"records",new Map),Rn(this,"events",new $i.EventEmitter),Rn(this,"name",zJ),Rn(this,"version",HJ),Rn(this,"cached",[]),Rn(this,"initialized",!1),Rn(this,"storagePrefix",Hr),Rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Rn(this,"set",(s,i,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:i,chainId:r}),this.records.has(i.id))return;const c={id:i.id,topic:s,request:{method:i.method,params:i.params||null},chainId:r,expiry:gn(we.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Yi.created,c)}),Rn(this,"resolve",async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const i=await this.getRecord(s.id);typeof i.response>"u"&&(i.response=Ii(s)?{error:s.error}:{result:s.result},this.records.set(i.id,i),this.persist(),this.events.emit(Yi.updated,i))}),Rn(this,"get",async(s,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:i}),await this.getRecord(i))),Rn(this,"delete",(s,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(r=>{if(r.topic===s){if(typeof i<"u"&&r.id!==i)return;this.records.delete(r.id),this.events.emit(Yi.deleted,r)}}),this.persist()}),Rn(this,"exists",async(s,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===s:!1)),Rn(this,"on",(s,i)=>{this.events.on(s,i)}),Rn(this,"once",(s,i)=>{this.events.once(s,i)}),Rn(this,"off",(s,i)=>{this.events.off(s,i)}),Rn(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.logger=fs(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const s={topic:n.topic,request:jo(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Yi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Yi.created,e=>{const n=Yi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Yi.updated,e=>{const n=Yi.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Yi.deleted,e=>{const n=Yi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ul.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Yi.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var jne=Object.defineProperty,zne=(t,e,n)=>e in t?jne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qn=(t,e,n)=>zne(t,typeof e!="symbol"?e+"":e,n);class Hne extends YH{constructor(e,n){super(e,n),this.core=e,this.logger=n,Qn(this,"expirations",new Map),Qn(this,"events",new $i.EventEmitter),Qn(this,"name",FJ),Qn(this,"version",VJ),Qn(this,"cached",[]),Qn(this,"initialized",!1),Qn(this,"storagePrefix",Hr),Qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Qn(this,"has",s=>{try{const i=this.formatTarget(s);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Qn(this,"set",(s,i)=>{this.isInitialized();const r=this.formatTarget(s),c={target:r,expiry:i};this.expirations.set(r,c),this.checkExpiry(r,c),this.events.emit(Ti.created,{target:r,expiration:c})}),Qn(this,"get",s=>{this.isInitialized();const i=this.formatTarget(s);return this.getExpiration(i)}),Qn(this,"del",s=>{if(this.isInitialized(),this.has(s)){const i=this.formatTarget(s),r=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ti.deleted,{target:i,expiration:r})}}),Qn(this,"on",(s,i)=>{this.events.on(s,i)}),Qn(this,"once",(s,i)=>{this.events.once(s,i)}),Qn(this,"off",(s,i)=>{this.events.off(s,i)}),Qn(this,"removeListener",(s,i)=>{this.events.removeListener(s,i)}),this.logger=fs(n,this.name)}get context(){return Ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return eY(e);if(typeof e=="number")return tY(e);const{message:n}=ye("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ti.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:s}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(s),new Error(s)}return n}checkExpiry(e,n){const{expiry:s}=n;we.toMiliseconds(s)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ti.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ul.pulse,()=>this.checkExpirations()),this.events.on(Ti.created,e=>{const n=Ti.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ti.expired,e=>{const n=Ti.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ti.deleted,e=>{const n=Ti.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fne=Object.defineProperty,Vne=(t,e,n)=>e in t?Fne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>Vne(t,typeof e!="symbol"?e+"":e,n);class qne extends XH{constructor(e,n,s){super(e,n,s),this.core=e,this.logger=n,this.store=s,rn(this,"name",qJ),rn(this,"abortController"),rn(this,"isDevEnv"),rn(this,"verifyUrlV3",GJ),rn(this,"storagePrefix",Hr),rn(this,"version",K_),rn(this,"publicKey"),rn(this,"fetchPromise"),rn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),rn(this,"register",async i=>{if(!gf()||this.isDevEnv)return;const r=window.location.origin,{id:c,decryptedId:l}=i,f=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${r}&id=${c}&decryptedId=${l}`;try{const d=$a.getDocument(),h=this.startAbortTimer(we.ONE_SECOND*5),g=await new Promise((m,y)=>{const w=()=>{window.removeEventListener("message",x),d.body.removeChild(v),y("attestation aborted")};this.abortController.signal.addEventListener("abort",w);const v=d.createElement("iframe");v.src=f,v.style.display="none",v.addEventListener("error",w,{signal:this.abortController.signal});const x=C=>{if(C.data&&typeof C.data=="string")try{const D=JSON.parse(C.data);if(D.type==="verify_attestation"){if(Hb(D.attestation).payload.id!==c)return;clearInterval(h),d.body.removeChild(v),this.abortController.signal.removeEventListener("abort",w),window.removeEventListener("message",x),m(D.attestation===null?"":D.attestation)}}catch(D){this.logger.warn(D)}};d.body.appendChild(v),window.addEventListener("message",x,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",g),g}catch(d){this.logger.warn(d)}return""}),rn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:r,hash:c,encryptedId:l}=i;if(r===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(r){if(Hb(r).payload.id!==l)return;const d=await this.isValidJwtAttestation(r);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!c)return;const f=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(c,f)}),rn(this,"fetchAttestation",async(i,r)=>{this.logger.debug(`resolving attestation: ${i} from url: ${r}`);const c=this.startAbortTimer(we.ONE_SECOND*5),l=await fetch(`${r}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0}),rn(this,"getVerifyUrl",i=>{let r=i||lh;return KJ.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${lh}`),r=lh),r}),rn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(we.FIVE_SECONDS),r=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await r.json()}catch(i){this.logger.warn(i)}}),rn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),rn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),rn(this,"isValidJwtAttestation",async i=>{const r=await this.getPublicKey();try{if(r)return this.validateAttestation(i,r)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(i,c)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),rn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),rn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async r=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),r(c))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),rn(this,"validateAttestation",(i,r)=>{const c=YQ(i,r.publicKey),l={hasExpired:we.toMiliseconds(c.exp)<Date.now(),payload:c};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=fs(n,this.name),this.abortController=new AbortController,this.isDevEnv=Yx(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ps(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}}var Wne=Object.defineProperty,Gne=(t,e,n)=>e in t?Wne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J5=(t,e,n)=>Gne(t,typeof e!="symbol"?e+"":e,n);class Kne extends QH{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,J5(this,"context",YJ),J5(this,"registerDeviceToken",async s=>{const{clientId:i,token:r,notificationType:c,enableEncrypted:l=!1}=s,f=`${XJ}/${this.projectId}/clients`;await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:r,always_raw:l})})}),this.logger=fs(n,this.context)}}var Yne=Object.defineProperty,eI=Object.getOwnPropertySymbols,Xne=Object.prototype.hasOwnProperty,Qne=Object.prototype.propertyIsEnumerable,w2=(t,e,n)=>e in t?Yne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ud=(t,e)=>{for(var n in e||(e={}))Xne.call(e,n)&&w2(t,n,e[n]);if(eI)for(var n of eI(e))Qne.call(e,n)&&w2(t,n,e[n]);return t},vn=(t,e,n)=>w2(t,typeof e!="symbol"?e+"":e,n);class Zne extends ZH{constructor(e,n,s=!0){super(e,n,s),this.core=e,this.logger=n,vn(this,"context",ZJ),vn(this,"storagePrefix",Hr),vn(this,"storageVersion",QJ),vn(this,"events",new Map),vn(this,"shouldPersist",!1),vn(this,"init",async()=>{if(!Yx())try{const i={eventId:UT(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:GO(this.core.relayer.protocol,this.core.relayer.version,u2)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),vn(this,"createEvent",i=>{const{event:r="ERROR",type:c="",properties:{topic:l,trace:f}}=i,d=UT(),h=this.core.projectId||"",g=Date.now(),m=Ud({eventId:d,timestamp:g,props:{event:r,type:c,properties:{topic:l,trace:f}},bundleId:h,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,m),this.shouldPersist=!0),m}),vn(this,"getEvent",i=>{const{eventId:r,topic:c}=i;if(r)return this.events.get(r);const l=Array.from(this.events.values()).find(f=>f.props.properties.topic===c);if(l)return Ud(Ud({},l),this.setMethods(l.eventId))}),vn(this,"deleteEvent",i=>{const{eventId:r}=i;this.events.delete(r),this.shouldPersist=!0}),vn(this,"setEventListeners",()=>{this.core.heartbeat.on(ul.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(i.timestamp)>JJ&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),vn(this,"setMethods",i=>({addTrace:r=>this.addTrace(i,r),setError:r=>this.setError(i,r)})),vn(this,"addTrace",(i,r)=>{const c=this.events.get(i);c&&(c.props.properties.trace.push(r),this.events.set(i,c),this.shouldPersist=!0)}),vn(this,"setError",(i,r)=>{const c=this.events.get(i);c&&(c.props.type=r,c.timestamp=Date.now(),this.events.set(i,c),this.shouldPersist=!0)}),vn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),vn(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(r=>{this.events.set(r.eventId,Ud(Ud({},r),this.setMethods(r.eventId)))})}catch(i){this.logger.warn(i)}}),vn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[r,c]of this.events)c.props.type&&i.push(c);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const r of i)this.events.delete(r.eventId),this.shouldPersist=!0}catch(r){this.logger.warn(r)}}),vn(this,"sendEvent",async i=>{const r=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${eee}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${u2}${r}`,{method:"POST",body:JSON.stringify(i)})}),vn(this,"getAppDomain",()=>WO().url),this.logger=fs(n,this.context),this.telemetryEnabled=s,s?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Jne=Object.defineProperty,tI=Object.getOwnPropertySymbols,ese=Object.prototype.hasOwnProperty,tse=Object.prototype.propertyIsEnumerable,v2=(t,e,n)=>e in t?Jne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nI=(t,e)=>{for(var n in e||(e={}))ese.call(e,n)&&v2(t,n,e[n]);if(tI)for(var n of tI(e))tse.call(e,n)&&v2(t,n,e[n]);return t},Mt=(t,e,n)=>v2(t,typeof e!="symbol"?e+"":e,n);let nse=class lM extends BH{constructor(e){var n;super(e),Mt(this,"protocol",G_),Mt(this,"version",K_),Mt(this,"name",l2),Mt(this,"relayUrl"),Mt(this,"projectId"),Mt(this,"customStoragePrefix"),Mt(this,"events",new $i.EventEmitter),Mt(this,"logger"),Mt(this,"heartbeat"),Mt(this,"relayer"),Mt(this,"crypto"),Mt(this,"storage"),Mt(this,"history"),Mt(this,"expirer"),Mt(this,"pairing"),Mt(this,"verify"),Mt(this,"echoClient"),Mt(this,"linkModeSupportedApps"),Mt(this,"eventClient"),Mt(this,"initialized",!1),Mt(this,"logChunkController"),Mt(this,"on",(l,f)=>this.events.on(l,f)),Mt(this,"once",(l,f)=>this.events.once(l,f)),Mt(this,"off",(l,f)=>this.events.off(l,f)),Mt(this,"removeListener",(l,f)=>this.events.removeListener(l,f)),Mt(this,"dispatchEnvelope",({topic:l,message:f,sessionExists:d})=>{if(!l||!f)return;const h={topic:l,message:f,publishedAt:Date.now(),transportType:kt.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:d})});const s=this.getGlobalCore(e?.customStoragePrefix);if(s)try{return this.customStoragePrefix=s.customStoragePrefix,this.logger=s.logger,this.heartbeat=s.heartbeat,this.crypto=s.crypto,this.history=s.history,this.expirer=s.expirer,this.storage=s.storage,this.relayer=s.relayer,this.pairing=s.pairing,this.verify=s.verify,this.echoClient=s.echoClient,this.linkModeSupportedApps=s.linkModeSupportedApps,this.eventClient=s.eventClient,this.initialized=s.initialized,this.logChunkController=s.logChunkController,s}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||X_,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=gp({level:typeof e?.logger=="string"&&e.logger?e.logger:EJ.logger,name:l2}),{logger:r,chunkLoggerController:c}=HD({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,f;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=fs(r,this.name),this.heartbeat=new kz,this.crypto=new Dte(this,this.logger,e?.keychain),this.history=new Bne(this,this.logger),this.expirer=new Hne(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new bH(nI(nI({},SJ),e?.storageOptions)),this.relayer=new nne({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Une(this,this.logger),this.verify=new qne(this,this.logger,this.storage),this.echoClient=new Kne(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Zne(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new lM(e);await n.initialize();const s=await n.crypto.getClientId();return await n.storage.setItem(UJ,s),n}get context(){return Ps(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem($5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem($5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,s=`${n}_count`;return globalThis[s]=(globalThis[s]||0)+1,globalThis[s]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[s]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const s=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[s]=e}catch(s){console.warn("Failed to set global WalletConnect core",s)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&xJ.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const sse=nse,uM="wc",fM=2,dM="client",fE=`${uM}@${fM}:${dM}:`,Rv={name:dM,logger:"error"},sI="WALLETCONNECT_DEEPLINK_CHOICE",ise="proposal",iI="Proposal expired",rse="session",fu=we.SEVEN_DAYS,ase="engine",bn={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},Pv={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},Nr={idle:"IDLE",active:"ACTIVE"},ose={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},cse="request",lse=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],use="wc",fse="auth",dse="authKeys",hse="pairingTopics",pse="requests",Jm=`${use}@${1.5}:${fse}:`,H0=`${Jm}:PUB_KEY`;var gse=Object.defineProperty,mse=Object.defineProperties,yse=Object.getOwnPropertyDescriptors,rI=Object.getOwnPropertySymbols,wse=Object.prototype.hasOwnProperty,vse=Object.prototype.propertyIsEnumerable,b2=(t,e,n)=>e in t?gse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lt=(t,e)=>{for(var n in e||(e={}))wse.call(e,n)&&b2(t,n,e[n]);if(rI)for(var n of rI(e))vse.call(e,n)&&b2(t,n,e[n]);return t},Es=(t,e)=>mse(t,yse(e)),ge=(t,e,n)=>b2(t,typeof e!="symbol"?e+"":e,n);class bse extends nF{constructor(e){super(e),ge(this,"name",ase),ge(this,"events",new Lx),ge(this,"initialized",!1),ge(this,"requestQueue",{state:Nr.idle,queue:[]}),ge(this,"sessionRequestQueue",{state:Nr.idle,queue:[]}),ge(this,"emittedSessionRequests",new uY({limit:500})),ge(this,"requestQueueDelay",we.ONE_SECOND),ge(this,"expectedPairingMethodMap",new Map),ge(this,"recentlyDeletedMap",new Map),ge(this,"recentlyDeletedLimit",200),ge(this,"relayMessageCache",[]),ge(this,"pendingSessions",new Map),ge(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(bn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),ge(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=Es(Lt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=fZ(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:c,sessionProperties:l,scopedProperties:f,relays:d}=s;let h=i,g,m=!1;try{if(h){const A=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),A}if(!h||!m){const{topic:A,uri:O}=await this.client.core.pairing.create();h=A,g=O}if(!h){const{message:A}=ye("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(A)}const y=await this.client.core.crypto.generateKeyPair(),w=bn.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,v=gn(w),x=Es(Lt(Lt({requiredNamespaces:r,optionalNamespaces:c,relays:d??[{protocol:Y_}],proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:h},l&&{sessionProperties:l}),f&&{scopedProperties:f}),{id:Dr()}),C=pt("session_connect",x.id),{reject:D,resolve:N,done:I}=Pc(w,iI),S=({id:A})=>{A===x.id&&(this.client.events.off("proposal_expire",S),this.pendingSessions.delete(x.id),this.events.emit(C,{error:{message:iI,code:0}}))};return this.client.events.on("proposal_expire",S),this.events.once(C,({error:A,session:O})=>{this.client.events.off("proposal_expire",S),A?D(A):O&&N(O)}),await this.sendRequest({topic:h,method:"wc_sessionPropose",params:x,throwOnFailedPublish:!0,clientRpcId:x.id}),await this.setProposal(x.id,x),{uri:g,approval:I}}),ge(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(s){throw this.client.logger.error("pair() failed"),s}}),ge(this,"approve",async n=>{var s,i,r;const c=this.client.core.eventClient.createEvent({properties:{topic:(s=n?.id)==null?void 0:s.toString(),trace:[Xi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(_){throw c.setError(Ic.no_internet_connection),_}try{await this.isValidProposalId(n?.id)}catch(_){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(Ic.proposal_not_found),_}try{await this.isValidApprove(n)}catch(_){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ic.session_approve_namespace_validation_failure),_}const{id:l,relayProtocol:f,namespaces:d,sessionProperties:h,scopedProperties:g,sessionConfig:m}=n,y=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:w,proposer:v,requiredNamespaces:x,optionalNamespaces:C}=y;let D=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:w});D||(D=(r=this.client.core.eventClient)==null?void 0:r.createEvent({type:Xi.session_approve_started,properties:{topic:w,trace:[Xi.session_approve_started,Xi.session_namespaces_validation_success]}}));const N=await this.client.core.crypto.generateKeyPair(),I=v.publicKey,S=await this.client.core.crypto.generateSharedKey(N,I),A=Lt(Lt(Lt({relay:{protocol:f??"irn"},namespaces:d,controller:{publicKey:N,metadata:this.client.metadata},expiry:gn(fu)},h&&{sessionProperties:h}),g&&{scopedProperties:g}),m&&{sessionConfig:m}),O=kt.relay;D.addTrace(Xi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:O})}catch(_){throw D.setError(Ic.subscribe_session_topic_failure),_}D.addTrace(Xi.subscribe_session_topic_success);const T=Es(Lt({},A),{topic:S,requiredNamespaces:x,optionalNamespaces:C,pairingTopic:w,acknowledged:!1,self:A.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:N,transportType:kt.relay});await this.client.session.set(S,T),D.addTrace(Xi.store_session);try{D.addTrace(Xi.publishing_session_settle),await this.sendRequest({topic:S,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(_=>{throw D?.setError(Ic.session_settle_publish_failure),_}),D.addTrace(Xi.session_settle_publish_success),D.addTrace(Xi.publishing_session_approve),await this.sendResult({id:l,topic:w,result:{relay:{protocol:f??"irn"},responderPublicKey:N},throwOnFailedPublish:!0}).catch(_=>{throw D?.setError(Ic.session_approve_publish_failure),_}),D.addTrace(Xi.session_approve_publish_success)}catch(_){throw this.client.logger.error(_),this.client.session.delete(S,zt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),_}return this.client.core.eventClient.deleteEvent({eventId:D.eventId}),await this.client.core.pairing.updateMetadata({topic:w,metadata:v.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:w}),await this.setExpiry(S,gn(fu)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),ge(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:s,reason:i}=n;let r;try{r=this.client.proposal.get(s).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${s}) failed`),c}r&&await this.sendError({id:s,topic:r,error:i,rpcOpts:bn.wc_sessionPropose.reject}),await this.deleteProposal(s)}),ge(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(g){throw this.client.logger.error("update() -> isValidUpdate() failed"),g}const{topic:s,namespaces:i}=n,{done:r,resolve:c,reject:l}=Pc(),f=Dr(),d=Wc().toString(),h=this.client.session.get(s).namespaces;return this.events.once(pt("session_update",f),({error:g})=>{g?l(g):c()}),await this.client.session.update(s,{namespaces:i}),await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:f,relayRpcId:d}).catch(g=>{this.client.logger.error(g),this.client.session.update(s,{namespaces:h}),l(g)}),{acknowledged:r}}),ge(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(f){throw this.client.logger.error("extend() -> isValidExtend() failed"),f}const{topic:s}=n,i=Dr(),{done:r,resolve:c,reject:l}=Pc();return this.events.once(pt("session_extend",i),({error:f})=>{f?l(f):c()}),await this.setExpiry(s,gn(fu)),this.sendRequest({topic:s,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(f=>{l(f)}),{acknowledged:r}}),ge(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(x){throw this.client.logger.error("request() -> isValidRequest() failed"),x}const{chainId:s,request:i,topic:r,expiry:c=bn.wc_sessionRequest.req.ttl}=n,l=this.client.session.get(r);l?.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const f=Dr(),d=Wc().toString(),{done:h,resolve:g,reject:m}=Pc(c,"Request expired. Please try again.");this.events.once(pt("session_request",f),({error:x,result:C})=>{x?m(x):g(C)});const y="wc_sessionRequest",w=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(w)return await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:r,method:y,params:{request:Es(Lt({},i),{expiryTimestamp:gn(c)}),chainId:s},expiry:c,throwOnFailedPublish:!0,appLink:w}).catch(x=>m(x)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:s,id:f}),await h();const v={request:Es(Lt({},i),{expiryTimestamp:gn(c)}),chainId:s};return await Promise.all([new Promise(async x=>{await this.sendRequest({clientRpcId:f,relayRpcId:d,topic:r,method:y,params:v,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(f,v)}).catch(C=>m(C)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:s,id:f}),x()}),new Promise(async x=>{var C;if(!((C=l.sessionConfig)!=null&&C.disableDeepLink)){const D=await rY(this.client.core.storage,sI);await nY({id:f,topic:r,wcDeepLink:D})}x()}),h()]).then(x=>x[2])}),ge(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:s,response:i}=n,{id:r}=i,c=this.client.session.get(s);c.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);Or(i)?await this.sendResult({id:r,topic:s,result:i.result,throwOnFailedPublish:!0,appLink:l}):Ii(i)&&await this.sendError({id:r,topic:s,error:i.error,appLink:l}),this.cleanupAfterResponse(n)}),ge(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:s}=n;if(this.client.session.keys.includes(s)){const i=Dr(),r=Wc().toString(),{done:c,resolve:l,reject:f}=Pc();this.events.once(pt("session_ping",i),({error:d})=>{d?f(d):l()}),await Promise.all([this.sendRequest({topic:s,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:r}),c()])}else this.client.core.pairing.pairings.keys.includes(s)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:s}))}),ge(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:s,event:i,chainId:r}=n,c=Wc().toString(),l=Dr();await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:i,chainId:r},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:l})}),ge(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:s}=n;if(this.client.session.keys.includes(s))await this.sendRequest({topic:s,method:"wc_sessionDelete",params:zt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:s,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(s))await this.client.core.pairing.disconnect({topic:s});else{const{message:i}=ye("MISMATCHED_TOPIC",`Session or pairing topic not found: ${s}`);throw new Error(i)}}),ge(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(s=>pZ(s,n)))),ge(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ge(this,"authenticate",async(n,s)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const r=s&&this.client.core.linkModeSupportedApps.includes(s)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),c=r?kt.link_mode:kt.relay;c===kt.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:f="",uri:d,domain:h,nonce:g,type:m,exp:y,nbf:w,methods:v=[],expiry:x}=n,C=[...n.resources||[]],{topic:D,uri:N}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:D,uri:N}});const I=await this.client.core.crypto.generateKeyPair(),S=j0(I);if(await Promise.all([this.client.auth.authKeys.set(H0,{responseTopic:S,publicKey:I}),this.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:D})]),await this.client.core.relayer.subscribe(S,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${D}`),v.length>0){const{namespace:K}=Fu(l[0]);let G=xX(K,"request",v);B0(C)&&(G=SX(G,C.pop())),C.push(G)}const A=x&&x>bn.wc_sessionAuthenticate.req.ttl?x:bn.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:m??"caip122",chains:l,statement:f,aud:d,domain:h,version:"1",nonce:g,iat:new Date().toISOString(),exp:y,nbf:w,resources:C},requester:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:gn(A)},T={eip155:{chains:l,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},_={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:D,proposer:{publicKey:I,metadata:this.client.metadata},expiryTimestamp:gn(bn.wc_sessionPropose.req.ttl),id:Dr()},{done:R,resolve:U,reject:L}=Pc(A,"Request expired"),F=Dr(),W=pt("session_connect",_.id),$=pt("session_request",F),P=async({error:K,session:G})=>{this.events.off($,k),K?L(K):G&&U({session:G})},k=async K=>{var G,j,X;if(await this.deletePendingAuthRequest(F,{message:"fulfilled",code:0}),K.error){const Te=zt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return K.error.code===Te.code?void 0:(this.events.off(W,P),L(K.error.message))}await this.deleteProposal(_.id),this.events.off(W,P);const{cacaos:Z,responder:ee}=K.result,ae=[],oe=[];for(const Te of Z){await GT({cacao:Te,projectId:this.client.core.projectId})||(this.client.logger.error(Te,"Signature verification failed"),L(zt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:We}=Te,Qe=B0(We.resources),Et=[Zb(We.iss)],ki=ym(We.iss);if(Qe){const cn=KT(Qe),ii=YT(Qe);ae.push(...cn),Et.push(...ii)}for(const cn of Et)oe.push(`${cn}:${ki}`)}const be=await this.client.core.crypto.generateSharedKey(I,ee.publicKey);let Ne;ae.length>0&&(Ne={topic:be,acknowledged:!0,self:{publicKey:I,metadata:this.client.metadata},peer:ee,controller:ee.publicKey,expiry:gn(fu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:D,namespaces:v5([...new Set(ae)],[...new Set(oe)]),transportType:c},await this.client.core.relayer.subscribe(be,{transportType:c}),await this.client.session.set(be,Ne),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:ee.metadata}),Ne=this.client.session.get(be)),(G=this.client.metadata.redirect)!=null&&G.linkMode&&(j=ee.metadata.redirect)!=null&&j.linkMode&&(X=ee.metadata.redirect)!=null&&X.universal&&s&&(this.client.core.addLinkModeSupportedApp(ee.metadata.redirect.universal),this.client.session.update(be,{transportType:kt.link_mode})),U({auths:Z,session:Ne})};this.events.once(W,P),this.events.once($,k);let V;try{if(r){const K=jo("wc_sessionAuthenticate",O,F);this.client.core.history.set(D,K);const G=await this.client.core.crypto.encode("",K,{type:xp,encoding:Uo});V=g0(s,D,G)}else await Promise.all([this.sendRequest({topic:D,method:"wc_sessionAuthenticate",params:O,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:D,method:"wc_sessionPropose",params:_,expiry:bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:_.id})])}catch(K){throw this.events.off(W,P),this.events.off($,k),K}return await this.setProposal(_.id,_),await this.setAuthRequest(F,{request:Es(Lt({},O),{verifyContext:{}}),pairingTopic:D,transportType:c}),{uri:V??N,response:R}}),ge(this,"approveSessionAuthenticate",async n=>{const{id:s,auths:i}=n,r=this.client.core.eventClient.createEvent({properties:{topic:s.toString(),trace:[Dc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(x){throw r.setError(Pd.no_internet_connection),x}const c=this.getPendingAuthRequest(s);if(!c)throw r.setError(Pd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${s}`);const l=c.transportType||kt.relay;l===kt.relay&&await this.confirmOnlineStateOrThrow();const f=c.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=j0(f),g={type:Ia,receiverPublicKey:f,senderPublicKey:d},m=[],y=[];for(const x of i){if(!await GT({cacao:x,projectId:this.client.core.projectId})){r.setError(Pd.invalid_cacao);const S=zt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:s,topic:h,error:S,encodeOpts:g}),new Error(S.message)}r.addTrace(Dc.cacaos_verified);const{p:C}=x,D=B0(C.resources),N=[Zb(C.iss)],I=ym(C.iss);if(D){const S=KT(D),A=YT(D);m.push(...S),N.push(...A)}for(const S of N)y.push(`${S}:${I}`)}const w=await this.client.core.crypto.generateSharedKey(d,f);r.addTrace(Dc.create_authenticated_session_topic);let v;if(m?.length>0){v={topic:w,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:f,metadata:c.requester.metadata},controller:f,expiry:gn(fu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:v5([...new Set(m)],[...new Set(y)]),transportType:l},r.addTrace(Dc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:l})}catch(x){throw r.setError(Pd.subscribe_authenticated_session_topic_failure),x}r.addTrace(Dc.subscribe_authenticated_session_topic_success),await this.client.session.set(w,v),r.addTrace(Dc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}r.addTrace(Dc.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:s,result:{cacaos:i,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,l)})}catch(x){throw r.setError(Pd.authenticated_session_approve_publish_failure),x}return await this.client.auth.requests.delete(s,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:r.eventId}),{session:v}}),ge(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:s,reason:i}=n,r=this.getPendingAuthRequest(s);if(!r)throw new Error(`Could not find pending auth request with id ${s}`);r.transportType===kt.relay&&await this.confirmOnlineStateOrThrow();const c=r.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),f=j0(c),d={type:Ia,receiverPublicKey:c,senderPublicKey:l};await this.sendError({id:s,topic:f,error:i,encodeOpts:d,rpcOpts:bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(r.requester.metadata,r.transportType)}),await this.client.auth.requests.delete(s,{message:"rejected",code:0}),await this.deleteProposal(s)}),ge(this,"formatAuthMessage",n=>{this.isInitialized();const{request:s,iss:i}=n;return u_(s,i)}),ge(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ge(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const s=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(r=>{var c,l;return((c=r.peerMetadata)==null?void 0:c.url)&&((l=r.peerMetadata)==null?void 0:l.url)===n.peer.metadata.url&&r.topic&&r.topic!==s.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(r=>this.client.core.pairing.disconnect({topic:r.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}}),ge(this,"deleteSession",async n=>{var s;const{topic:i,expirerHasDeleted:r=!1,emitEvent:c=!0,id:l=0}=n,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,zt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(sI).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===i&&this.deletePendingSessionRequest(d.id,zt("USER_DISCONNECTED"))}),i===((s=this.sessionRequestQueue.queue[0])==null?void 0:s.topic)&&(this.sessionRequestQueue.state=Nr.idle),c&&this.client.events.emit("session_delete",{id:l,topic:i})}),ge(this,"deleteProposal",async(n,s)=>{if(s)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Ic.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,zt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ge(this,"deletePendingSessionRequest",async(n,s,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,s),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(r=>r.id!==n),i&&(this.sessionRequestQueue.state=Nr.idle,this.client.events.emit("session_request_expire",{id:n}))}),ge(this,"deletePendingAuthRequest",async(n,s,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,s),i?Promise.resolve():this.client.core.expirer.del(n)])}),ge(this,"setExpiry",async(n,s)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,s),await this.client.session.update(n,{expiry:s}))}),ge(this,"setProposal",async(n,s)=>{this.client.core.expirer.set(n,gn(bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,s)}),ge(this,"setAuthRequest",async(n,s)=>{const{request:i,pairingTopic:r,transportType:c=kt.relay}=s;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:r,verifyContext:i.verifyContext,transportType:c})}),ge(this,"setPendingSessionRequest",async n=>{const{id:s,topic:i,params:r,verifyContext:c}=n,l=r.request.expiryTimestamp||gn(bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(s,l),await this.client.pendingRequest.set(s,{id:s,topic:i,params:r,verifyContext:c})}),ge(this,"sendRequest",async n=>{const{topic:s,method:i,params:r,expiry:c,relayRpcId:l,clientRpcId:f,throwOnFailedPublish:d,appLink:h,tvf:g}=n,m=jo(i,r,f);let y;const w=!!h;try{const C=w?Uo:sr;y=await this.client.core.crypto.encode(s,m,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${s} failed`),C}let v;if(lse.includes(i)){const C=_r(JSON.stringify(m)),D=_r(y);v=await this.client.core.verify.register({id:D,decryptedId:C})}const x=bn[i].req;if(x.attestation=v,c&&(x.ttl=c),l&&(x.id=l),this.client.core.history.set(s,m),w){const C=g0(h,s,y);await global.Linking.openURL(C,this.client.name)}else{const C=bn[i].req;c&&(C.ttl=c),l&&(C.id=l),C.tvf=Es(Lt({},g),{correlationId:m.id}),d?(C.internal=Es(Lt({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,y,C)):this.client.core.relayer.publish(s,y,C).catch(D=>this.client.logger.error(D))}return m.id}),ge(this,"sendResult",async n=>{const{id:s,topic:i,result:r,throwOnFailedPublish:c,encodeOpts:l,appLink:f}=n,d=Ym(s,r);let h;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const w=g?Uo:sr;h=await this.client.core.crypto.encode(i,d,Es(Lt({},l||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),w}let m,y;try{m=await this.client.core.history.get(i,s);const w=m.request;try{y=this.getTVFParams(s,w.params,r)}catch(v){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${v?.message}`)}}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${s}) failed`),w}if(g){const w=g0(f,i,h);await global.Linking.openURL(w,this.client.name)}else{const w=m.request.method,v=bn[w].res;v.tvf=Es(Lt({},y),{correlationId:s}),c?(v.internal=Es(Lt({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,h,v)):this.client.core.relayer.publish(i,h,v).catch(x=>this.client.logger.error(x))}await this.client.core.history.resolve(d)}),ge(this,"sendError",async n=>{const{id:s,topic:i,error:r,encodeOpts:c,rpcOpts:l,appLink:f}=n,d=Xm(s,r);let h;const g=f&&typeof(global==null?void 0:global.Linking)<"u";try{const y=g?Uo:sr;h=await this.client.core.crypto.encode(i,d,Es(Lt({},c||{}),{encoding:y}))}catch(y){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),y}let m;try{m=await this.client.core.history.get(i,s)}catch(y){throw this.client.logger.error(`sendError() -> history.get(${i}, ${s}) failed`),y}if(g){const y=g0(f,i,h);await global.Linking.openURL(y,this.client.name)}else{const y=m.request.method,w=l||bn[y].res;this.client.core.relayer.publish(i,h,w)}await this.client.core.history.resolve(d)}),ge(this,"cleanup",async()=>{const n=[],s=[];this.client.session.getAll().forEach(i=>{let r=!1;Mo(i.expiry)&&(r=!0),this.client.core.crypto.keychain.has(i.topic)||(r=!0),r&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Mo(i.expiryTimestamp)&&s.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...s.map(i=>this.deleteProposal(i))])}),ge(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ge(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ge(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Nr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Nr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Nr.idle}),ge(this,"processRequest",async n=>{const{topic:s,payload:i,attestation:r,transportType:c,encryptedId:l}=n,f=i.method;if(!this.shouldIgnorePairingRequest({topic:s,requestMethod:f}))switch(f){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:s,payload:i,attestation:r,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(s,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(s,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(s,i);case"wc_sessionPing":return await this.onSessionPingRequest(s,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(s,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:s,payload:i,attestation:r,encryptedId:l,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(s,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:s,payload:i,attestation:r,encryptedId:l,transportType:c});default:return this.client.logger.info(`Unsupported request method ${f}`)}}),ge(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i,transportType:r}=n,c=(await this.client.core.history.get(s,i.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,i,r);case"wc_sessionSettle":return this.onSessionSettleResponse(s,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,i);case"wc_sessionExtend":return this.onSessionExtendResponse(s,i);case"wc_sessionPing":return this.onSessionPingResponse(s,i);case"wc_sessionRequest":return this.onSessionRequestResponse(s,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(s,i);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),ge(this,"onRelayEventUnknownPayload",n=>{const{topic:s}=n,{message:i}=ye("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ge(this,"shouldIgnorePairingRequest",n=>{const{topic:s,requestMethod:i}=n,r=this.expectedPairingMethodMap.get(s);return!r||r.includes(i)?!1:!!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ge(this,"onSessionProposeRequest",async n=>{const{topic:s,payload:i,attestation:r,encryptedId:c}=n,{params:l,id:f}=i;try{const d=this.client.core.eventClient.getEvent({topic:s});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(Sa.proposal_listener_not_found)),this.isValidConnect(Lt({},i.params));const h=l.expiryTimestamp||gn(bn.wc_sessionPropose.req.ttl),g=Lt({id:f,pairingTopic:s,expiryTimestamp:h,attestation:r,encryptedId:c},l);await this.setProposal(f,g);const m=await this.getVerifyContext({attestationId:r,hash:_r(JSON.stringify(i)),encryptedId:c,metadata:g.proposer.metadata});d?.addTrace(Ir.emit_session_proposal),this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:m})}catch(d){await this.sendError({id:f,topic:s,error:d,rpcOpts:bn.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),ge(this,"onSessionProposeResponse",async(n,s,i)=>{const{id:r}=s;if(Or(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const h=await this.client.core.crypto.generateSharedKey(f,d);this.pendingSessions.set(r,{sessionTopic:h,pairingTopic:n,proposalId:r,publicKey:f});const g=await this.client.core.relayer.subscribe(h,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:g}),await this.client.core.pairing.activate({topic:n})}else if(Ii(s)){await this.deleteProposal(r);const c=pt("session_connect",r);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:s.error})}}),ge(this,"onSessionSettleRequest",async(n,s)=>{const{id:i,params:r}=s;try{this.isValidSessionSettleRequest(r);const{relay:c,controller:l,expiry:f,namespaces:d,sessionProperties:h,scopedProperties:g,sessionConfig:m}=s.params,y=[...this.pendingSessions.values()].find(x=>x.sessionTopic===n);if(!y)return this.client.logger.error(`Pending session not found for topic ${n}`);const w=this.client.proposal.get(y.proposalId),v=Es(Lt(Lt(Lt({topic:n,relay:c,expiry:f,namespaces:d,acknowledged:!0,pairingTopic:y.pairingTopic,requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces,controller:l.publicKey,self:{publicKey:y.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},h&&{sessionProperties:h}),g&&{scopedProperties:g}),m&&{sessionConfig:m}),{transportType:kt.relay});await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),await this.client.core.pairing.updateMetadata({topic:y.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(pt("session_connect",y.proposalId),{session:v}),this.pendingSessions.delete(y.proposalId),this.deleteProposal(y.proposalId,!1),this.cleanupDuplicatePairings(v),await this.sendResult({id:s.id,topic:n,result:!0})}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"onSessionSettleResponse",async(n,s)=>{const{id:i}=s;Or(s)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(pt("session_approve",i),{})):Ii(s)&&(await this.client.session.delete(n,zt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",i),{error:s.error}))}),ge(this,"onSessionUpdateRequest",async(n,s)=>{const{params:i,id:r}=s;try{const c=`${n}_session_update`,l=Md.get(c);if(l&&this.isRequestOutOfSync(l,r)){this.client.logger.warn(`Discarding out of sync request - ${r}`),this.sendError({id:r,topic:n,error:zt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Lt({topic:n},i));try{Md.set(c,r),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:r,topic:n,result:!0})}catch(f){throw Md.delete(c),f}this.client.events.emit("session_update",{id:r,topic:n,params:i})}catch(c){await this.sendError({id:r,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"isRequestOutOfSync",(n,s)=>s.toString().slice(0,-3)<n.toString().slice(0,-3)),ge(this,"onSessionUpdateResponse",(n,s)=>{const{id:i}=s,r=pt("session_update",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);Or(s)?this.events.emit(pt("session_update",i),{}):Ii(s)&&this.events.emit(pt("session_update",i),{error:s.error})}),ge(this,"onSessionExtendRequest",async(n,s)=>{const{id:i}=s;try{this.isValidExtend({topic:n}),await this.setExpiry(n,gn(fu)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(r){await this.sendError({id:i,topic:n,error:r}),this.client.logger.error(r)}}),ge(this,"onSessionExtendResponse",(n,s)=>{const{id:i}=s,r=pt("session_extend",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);Or(s)?this.events.emit(pt("session_extend",i),{}):Ii(s)&&this.events.emit(pt("session_extend",i),{error:s.error})}),ge(this,"onSessionPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(r){await this.sendError({id:i,topic:n,error:r}),this.client.logger.error(r)}}),ge(this,"onSessionPingResponse",(n,s)=>{const{id:i}=s,r=pt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners 2176`);Or(s)?this.events.emit(pt("session_ping",i),{}):Ii(s)&&this.events.emit(pt("session_ping",i),{error:s.error})},500)}),ge(this,"onSessionDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n,reason:s.params}),Promise.all([new Promise(r=>{this.client.core.relayer.once(Sn.publish,async()=>{r(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:zt("USER_DISCONNECTED")})]).catch(r=>this.client.logger.error(r))}catch(r){this.client.logger.error(r)}}),ge(this,"onSessionRequest",async n=>{var s,i,r;const{topic:c,payload:l,attestation:f,encryptedId:d,transportType:h}=n,{id:g,params:m}=l;try{await this.isValidRequest(Lt({topic:c},m));const y=this.client.session.get(c),w=await this.getVerifyContext({attestationId:f,hash:_r(JSON.stringify(jo("wc_sessionRequest",m,g))),encryptedId:d,metadata:y.peer.metadata,transportType:h}),v={id:g,topic:c,params:m,verifyContext:w};await this.setPendingSessionRequest(v),h===kt.link_mode&&(s=y.peer.metadata.redirect)!=null&&s.universal&&this.client.core.addLinkModeSupportedApp((i=y.peer.metadata.redirect)==null?void 0:i.universal),(r=this.client.signConfig)!=null&&r.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(y){await this.sendError({id:g,topic:c,error:y}),this.client.logger.error(y)}}),ge(this,"onSessionRequestResponse",(n,s)=>{const{id:i}=s,r=pt("session_request",i);if(this.events.listenerCount(r)===0)throw new Error(`emitting ${r} without any listeners`);Or(s)?this.events.emit(pt("session_request",i),{result:s.result}):Ii(s)&&this.events.emit(pt("session_request",i),{error:s.error})}),ge(this,"onSessionEventRequest",async(n,s)=>{const{id:i,params:r}=s;try{const c=`${n}_session_event_${r.event.name}`,l=Md.get(c);if(l&&this.isRequestOutOfSync(l,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Lt({topic:n},r)),this.client.events.emit("session_event",{id:i,topic:n,params:r}),Md.set(c,i)}catch(c){await this.sendError({id:i,topic:n,error:c}),this.client.logger.error(c)}}),ge(this,"onSessionAuthenticateResponse",(n,s)=>{const{id:i}=s;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:s}),Or(s)?this.events.emit(pt("session_request",i),{result:s.result}):Ii(s)&&this.events.emit(pt("session_request",i),{error:s.error})}),ge(this,"onSessionAuthenticateRequest",async n=>{var s;const{topic:i,payload:r,attestation:c,encryptedId:l,transportType:f}=n;try{const{requester:d,authPayload:h,expiryTimestamp:g}=r.params,m=await this.getVerifyContext({attestationId:c,hash:_r(JSON.stringify(r)),encryptedId:l,metadata:d.metadata,transportType:f}),y={requester:d,pairingTopic:i,id:r.id,authPayload:h,verifyContext:m,expiryTimestamp:g};await this.setAuthRequest(r.id,{request:y,pairingTopic:i,transportType:f}),f===kt.link_mode&&(s=d.metadata.redirect)!=null&&s.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:r.params,id:r.id,verifyContext:m})}catch(d){this.client.logger.error(d);const h=r.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),m=this.getAppLinkIfEnabled(r.params.requester.metadata,f),y={type:Ia,receiverPublicKey:h,senderPublicKey:g};await this.sendError({id:r.id,topic:i,error:d,encodeOpts:y,rpcOpts:bn.wc_sessionAuthenticate.autoReject,appLink:m})}}),ge(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ge(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Nr.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),ge(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:s})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(r=>r.topic===n&&r.request.method==="wc_sessionRequest").forEach(r=>{const c=r.request.id,l=pt("session_request",c);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(pt("session_request",r.request.id),{error:s})})}),ge(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Nr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(s){this.client.logger.error(s)}}),ge(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Nr.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ge(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const s=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);s&&this.onSessionProposeRequest({topic:n.topic,payload:jo("wc_sessionPropose",Es(Lt({},s),{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties,scopedProperties:s.scopedProperties}),s.id),attestation:s.attestation,encryptedId:s.encryptedId})}),ge(this,"isValidConnect",async n=>{if(!Is(n)){const{message:d}=ye("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:c,scopedProperties:l,relays:f}=n;if(Ln(s)||await this.isValidPairingTopic(s),!NZ(f)){const{message:d}=ye("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(d)}if(!Ln(i)&&jr(i)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(i,"requiredNamespaces")}if(!Ln(r)&&jr(r)!==0&&this.validateNamespaces(r,"optionalNamespaces"),Ln(c)||this.validateSessionProps(c,"sessionProperties"),!Ln(l)){this.validateSessionProps(l,"scopedProperties");const d=Object.keys(i||{}).concat(Object.keys(r||{}));if(!Object.keys(l).every(h=>d.includes(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),ge(this,"validateNamespaces",(n,s)=>{const i=AZ(n,"connect()",s);if(i)throw new Error(i.message)}),ge(this,"isValidApprove",async n=>{if(!Is(n))throw new Error(ye("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:s,namespaces:i,relayProtocol:r,sessionProperties:c,scopedProperties:l}=n;this.checkRecentlyDeleted(s),await this.isValidProposalId(s);const f=this.client.proposal.get(s),d=Nv(i,"approve()");if(d)throw new Error(d.message);const h=E5(f.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!on(r,!0)){const{message:g}=ye("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(g)}if(Ln(c)||this.validateSessionProps(c,"sessionProperties"),!Ln(l)){this.validateSessionProps(l,"scopedProperties");const g=new Set(Object.keys(i));if(!Object.keys(l).every(m=>g.has(m.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(g).join(", ")}`)}}),ge(this,"isValidReject",async n=>{if(!Is(n)){const{message:r}=ye("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(r)}const{id:s,reason:i}=n;if(this.checkRecentlyDeleted(s),await this.isValidProposalId(s),!IZ(i)){const{message:r}=ye("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(r)}}),ge(this,"isValidSessionSettleRequest",n=>{if(!Is(n)){const{message:d}=ye("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:s,controller:i,namespaces:r,expiry:c}=n;if(!z_(s)){const{message:d}=ye("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const l=vZ(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);const f=Nv(r,"onSessionSettleRequest()");if(f)throw new Error(f.message);if(Mo(c)){const{message:d}=ye("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),ge(this,"isValidUpdate",async n=>{if(!Is(n)){const{message:f}=ye("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(f)}const{topic:s,namespaces:i}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s);const r=this.client.session.get(s),c=Nv(i,"update()");if(c)throw new Error(c.message);const l=E5(r.requiredNamespaces,i,"update()");if(l)throw new Error(l.message)}),ge(this,"isValidExtend",async n=>{if(!Is(n)){const{message:i}=ye("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:s}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s)}),ge(this,"isValidRequest",async n=>{if(!Is(n)){const{message:f}=ye("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(f)}const{topic:s,request:i,chainId:r,expiry:c}=n;this.checkRecentlyDeleted(s),await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!x5(l,r)){const{message:f}=ye("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(f)}if(!DZ(i)){const{message:f}=ye("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(f)}if(!MZ(l,r,i.method)){const{message:f}=ye("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(f)}if(c&&!UZ(c,Pv)){const{message:f}=ye("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Pv.min} and ${Pv.max}`);throw new Error(f)}}),ge(this,"isValidRespond",async n=>{var s;if(!Is(n)){const{message:c}=ye("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:i,response:r}=n;try{await this.isValidSessionTopic(i)}catch(c){throw(s=n?.response)!=null&&s.id&&this.cleanupAfterResponse(n),c}if(!OZ(r)){const{message:c}=ye("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(c)}}),ge(this,"isValidPing",async n=>{if(!Is(n)){const{message:i}=ye("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)}),ge(this,"isValidEmit",async n=>{if(!Is(n)){const{message:l}=ye("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(l)}const{topic:s,event:i,chainId:r}=n;await this.isValidSessionTopic(s);const{namespaces:c}=this.client.session.get(s);if(!x5(c,r)){const{message:l}=ye("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(l)}if(!_Z(i)){const{message:l}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}if(!RZ(c,r,i.name)){const{message:l}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}}),ge(this,"isValidDisconnect",async n=>{if(!Is(n)){const{message:i}=ye("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)}),ge(this,"isValidAuthenticate",n=>{const{chains:s,uri:i,domain:r,nonce:c}=n;if(!Array.isArray(s)||s.length===0)throw new Error("chains is required and must be a non-empty array");if(!on(i,!1))throw new Error("uri is required parameter");if(!on(r,!1))throw new Error("domain is required parameter");if(!on(c,!1))throw new Error("nonce is required parameter");if([...new Set(s.map(f=>Fu(f).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=Fu(s[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ge(this,"getVerifyContext",async n=>{const{attestationId:s,hash:i,encryptedId:r,metadata:c,transportType:l}=n,f={verified:{verifyUrl:c.verifyUrl||lh,validation:"UNKNOWN",origin:c.url||""}};try{if(l===kt.link_mode){const h=this.getAppLinkIfEnabled(c,l);return f.verified.validation=h&&new URL(h).origin===new URL(c.url).origin?"VALID":"INVALID",f}const d=await this.client.core.verify.resolve({attestationId:s,hash:i,encryptedId:r,verifyUrl:c.verifyUrl});d&&(f.verified.origin=d.origin,f.verified.isScam=d.isScam,f.verified.validation=d.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(f)}`),f}),ge(this,"validateSessionProps",(n,s)=>{Object.values(n).forEach((i,r)=>{if(i==null){const{message:c}=ye("MISSING_OR_INVALID",`${s} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[r]}`);throw new Error(c)}})}),ge(this,"getPendingAuthRequest",n=>{const s=this.client.auth.requests.get(n);return typeof s=="object"?s:void 0}),ge(this,"addToRecentlyDeleted",(n,s)=>{if(this.recentlyDeletedMap.set(n,s),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const r=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(i++>=r)break;this.recentlyDeletedMap.delete(c)}}}),ge(this,"checkRecentlyDeleted",n=>{const s=this.recentlyDeletedMap.get(n);if(s){const{message:i}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${s}: ${n}`);throw new Error(i)}}),ge(this,"isLinkModeEnabled",(n,s)=>{var i,r,c,l,f,d,h,g,m;return!n||s!==kt.link_mode?!1:((r=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:r.linkMode)===!0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==void 0&&((d=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.universal)!==void 0&&((g=n?.redirect)==null?void 0:g.universal)!==""&&((m=n?.redirect)==null?void 0:m.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ge(this,"getAppLinkIfEnabled",(n,s)=>{var i;return this.isLinkModeEnabled(n,s)?(i=n?.redirect)==null?void 0:i.universal:void 0}),ge(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const s=$T(n,"topic")||"",i=decodeURIComponent($T(n,"wc_ev")||""),r=this.client.session.keys.includes(s);r&&this.client.session.update(s,{transportType:kt.link_mode}),this.client.core.dispatchEnvelope({topic:s,message:i,sessionExists:r})}),ge(this,"registerLinkModeListeners",async()=>{var n;if(Yx()||Qo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const s=global==null?void 0:global.Linking;if(typeof s<"u"){s.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await s.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ge(this,"getTVFParams",(n,s,i)=>{var r,c,l;if(!((r=s.request)!=null&&r.method))return{};const f={correlationId:n,rpcMethods:[s.request.method],chainId:s.chainId};try{const d=this.extractTxHashesFromResult(s.request,i);f.txHashes=d,f.contractAddresses=this.isValidContractData(s.request.params)?[(l=(c=s.request.params)==null?void 0:c[0])==null?void 0:l.to]:[]}catch(d){this.client.logger.warn("Error getting TVF params",d)}return f}),ge(this,"isValidContractData",n=>{var s;if(!n)return!1;try{const i=n?.data||((s=n?.[0])==null?void 0:s.data);if(!i.startsWith("0x"))return!1;const r=i.slice(2);return/^[0-9a-fA-F]*$/.test(r)?r.length%2===0:!1}catch{}return!1}),ge(this,"extractTxHashesFromResult",(n,s)=>{var i;try{if(!s)return[];const r=n.method,c=ose[r];if(r==="sui_signTransaction")return[rX(s.transactionBytes)];if(r==="near_signTransaction")return[FT(s)];if(r==="near_signTransactions")return s.map(f=>FT(f));if(r==="xrpl_signTransactionFor"||r==="xrpl_signTransaction")return[(i=s.tx_json)==null?void 0:i.hash];if(r==="polkadot_signTransaction")return[QZ({transaction:n.params.transactionPayload,signature:s.signature})];if(r==="algo_signTxn")return Da(s)?s.map(f=>VT(f)):[VT(s)];if(r==="cosmos_signDirect")return[oX(s)];if(typeof s=="string")return[s];const l=s[c.key];if(Da(l))return r==="solana_signAllTransactions"?l.map(f=>iX(f)):l;if(typeof l=="string")return[l]}catch(r){this.client.logger.warn("Error extracting tx hashes from result",r)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[s,i]of Object.entries(n))for(const r of i)try{await this.onProviderMessageEvent({topic:s,message:r,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${s}, message: ${r}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Sn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:s,attestation:i,transportType:r}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(H0)?this.client.auth.authKeys.get(H0):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(n,s,{receiverPublicKey:c,encoding:r===kt.link_mode?Uo:sr});uE(l)?(this.client.core.history.set(n,l),await this.onRelayEventRequest({topic:n,payload:l,attestation:i,transportType:r,encryptedId:_r(s)})):Qm(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:n,payload:l,transportType:r}),this.client.core.history.delete(n,l.id)):await this.onRelayEventUnknownPayload({topic:n,payload:l,transportType:r}),await this.client.core.relayer.messages.ack(n,s)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(Ti.expired,async e=>{const{topic:n,id:s}=YO(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ye("EXPIRED"),!0);if(s&&this.client.auth.requests.keys.includes(s))return await this.deletePendingAuthRequest(s,ye("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(kc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(kc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!on(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Mo(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ye("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!on(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Mo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ye("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ye("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(on(e,!1)){const{message:n}=ye("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ye("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!TZ(e)){const{message:n}=ye("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Mo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ye("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class xse extends dl{constructor(e,n){super(e,n,ise,fE),this.core=e,this.logger=n}}let Ese=class extends dl{constructor(e,n){super(e,n,rse,fE),this.core=e,this.logger=n}};class Sse extends dl{constructor(e,n){super(e,n,cse,fE,s=>s.id),this.core=e,this.logger=n}}class Cse extends dl{constructor(e,n){super(e,n,dse,Jm,()=>H0),this.core=e,this.logger=n}}let Ase=class extends dl{constructor(e,n){super(e,n,hse,Jm),this.core=e,this.logger=n}};class Nse extends dl{constructor(e,n){super(e,n,pse,Jm,s=>s.id),this.core=e,this.logger=n}}var Tse=Object.defineProperty,Ise=(t,e,n)=>e in t?Tse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$v=(t,e,n)=>Ise(t,typeof e!="symbol"?e+"":e,n);class Dse{constructor(e,n){this.core=e,this.logger=n,$v(this,"authKeys"),$v(this,"pairingTopics"),$v(this,"requests"),this.authKeys=new Cse(this.core,this.logger),this.pairingTopics=new Ase(this.core,this.logger),this.requests=new Nse(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Ose=Object.defineProperty,_se=(t,e,n)=>e in t?Ose(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nt=(t,e,n)=>_se(t,typeof e!="symbol"?e+"":e,n);let Mse=class hM extends tF{constructor(e){super(e),nt(this,"protocol",uM),nt(this,"version",fM),nt(this,"name",Rv.name),nt(this,"metadata"),nt(this,"core"),nt(this,"logger"),nt(this,"events",new $i.EventEmitter),nt(this,"engine"),nt(this,"session"),nt(this,"proposal"),nt(this,"pendingRequest"),nt(this,"auth"),nt(this,"signConfig"),nt(this,"on",(s,i)=>this.events.on(s,i)),nt(this,"once",(s,i)=>this.events.once(s,i)),nt(this,"off",(s,i)=>this.events.off(s,i)),nt(this,"removeListener",(s,i)=>this.events.removeListener(s,i)),nt(this,"removeAllListeners",s=>this.events.removeAllListeners(s)),nt(this,"connect",async s=>{try{return await this.engine.connect(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"pair",async s=>{try{return await this.engine.pair(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"approve",async s=>{try{return await this.engine.approve(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"reject",async s=>{try{return await this.engine.reject(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"update",async s=>{try{return await this.engine.update(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"extend",async s=>{try{return await this.engine.extend(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"request",async s=>{try{return await this.engine.request(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"respond",async s=>{try{return await this.engine.respond(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"ping",async s=>{try{return await this.engine.ping(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"emit",async s=>{try{return await this.engine.emit(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"disconnect",async s=>{try{return await this.engine.disconnect(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"find",s=>{try{return this.engine.find(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}}),nt(this,"authenticate",async(s,i)=>{try{return await this.engine.authenticate(s,i)}catch(r){throw this.logger.error(r.message),r}}),nt(this,"formatAuthMessage",s=>{try{return this.engine.formatAuthMessage(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"approveSessionAuthenticate",async s=>{try{return await this.engine.approveSessionAuthenticate(s)}catch(i){throw this.logger.error(i.message),i}}),nt(this,"rejectSessionAuthenticate",async s=>{try{return await this.engine.rejectSessionAuthenticate(s)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||Rv.name,this.metadata=XK(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hp(gp({level:e?.logger||Rv.logger}));this.core=e?.core||new sse(e),this.logger=fs(n,this.name),this.session=new Ese(this.core,this.logger),this.proposal=new xse(this.core,this.logger),this.pendingRequest=new Sse(this.core,this.logger),this.engine=new bse(this),this.auth=new Dse(this.core,this.logger)}static async init(e){const n=new hM(e);return await n.initialize(),n}get context(){return Ps(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var y0={exports:{}},aI;function Rse(){return aI||(aI=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Jn<"u"&&Jn,s=(function(){function r(){this.fetch=!1,this.DOMException=n.DOMException}return r.prototype=n,new r})();(function(r){(function(c){var l=typeof r<"u"&&r||typeof self<"u"&&self||typeof Jn<"u"&&Jn||{},f={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d($){return $&&DataView.prototype.isPrototypeOf($)}if(f.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function($){return $&&h.indexOf(Object.prototype.toString.call($))>-1};function m($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test($)||$==="")throw new TypeError('Invalid character in header field name: "'+$+'"');return $.toLowerCase()}function y($){return typeof $!="string"&&($=String($)),$}function w($){var P={next:function(){var k=$.shift();return{done:k===void 0,value:k}}};return f.iterable&&(P[Symbol.iterator]=function(){return P}),P}function v($){this.map={},$ instanceof v?$.forEach(function(P,k){this.append(k,P)},this):Array.isArray($)?$.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(P){this.append(P,$[P])},this)}v.prototype.append=function($,P){$=m($),P=y(P);var k=this.map[$];this.map[$]=k?k+", "+P:P},v.prototype.delete=function($){delete this.map[m($)]},v.prototype.get=function($){return $=m($),this.has($)?this.map[$]:null},v.prototype.has=function($){return this.map.hasOwnProperty(m($))},v.prototype.set=function($,P){this.map[m($)]=y(P)},v.prototype.forEach=function($,P){for(var k in this.map)this.map.hasOwnProperty(k)&&$.call(P,this.map[k],k,this)},v.prototype.keys=function(){var $=[];return this.forEach(function(P,k){$.push(k)}),w($)},v.prototype.values=function(){var $=[];return this.forEach(function(P){$.push(P)}),w($)},v.prototype.entries=function(){var $=[];return this.forEach(function(P,k){$.push([k,P])}),w($)},f.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function x($){if(!$._noBody){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}}function C($){return new Promise(function(P,k){$.onload=function(){P($.result)},$.onerror=function(){k($.error)}})}function D($){var P=new FileReader,k=C(P);return P.readAsArrayBuffer($),k}function N($){var P=new FileReader,k=C(P),V=/charset=([A-Za-z0-9_-]+)/.exec($.type),K=V?V[1]:"utf-8";return P.readAsText($,K),k}function I($){for(var P=new Uint8Array($),k=new Array(P.length),V=0;V<P.length;V++)k[V]=String.fromCharCode(P[V]);return k.join("")}function S($){if($.slice)return $.slice(0);var P=new Uint8Array($.byteLength);return P.set(new Uint8Array($)),P.buffer}function A(){return this.bodyUsed=!1,this._initBody=function($){this.bodyUsed=this.bodyUsed,this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:f.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:f.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:f.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():f.arrayBuffer&&f.blob&&d($)?(this._bodyArrayBuffer=S($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||g($))?this._bodyArrayBuffer=S($):this._bodyText=$=Object.prototype.toString.call($):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var $=x(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var $=x(this);return $||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(f.blob)return this.blob().then(D);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var $=x(this);if($)return $;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T($){var P=$.toUpperCase();return O.indexOf(P)>-1?P:$}function _($,P){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var k=P.body;if($ instanceof _){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,P.headers||(this.headers=new v($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!k&&$._bodyInit!=null&&(k=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new v(P.headers)),this.method=T(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||(function(){if("AbortController"in l){var G=new AbortController;return G.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(k),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var K=/\?/;this.url+=(K.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function R($){var P=new FormData;return $.trim().split("&").forEach(function(k){if(k){var V=k.split("="),K=V.shift().replace(/\+/g," "),G=V.join("=").replace(/\+/g," ");P.append(decodeURIComponent(K),decodeURIComponent(G))}}),P}function U($){var P=new v,k=$.replace(/\r?\n[\t ]+/g," ");return k.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var K=V.split(":"),G=K.shift().trim();if(G){var j=K.join(":").trim();try{P.append(G,j)}catch(X){console.warn("Response "+X.message)}}}),P}A.call(_.prototype);function L($,P){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new v(P.headers),this.url=P.url||"",this._initBody($)}A.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},L.error=function(){var $=new L(null,{status:200,statusText:""});return $.ok=!1,$.status=0,$.type="error",$};var F=[301,302,303,307,308];L.redirect=function($,P){if(F.indexOf(P)===-1)throw new RangeError("Invalid status code");return new L(null,{status:P,headers:{location:$}})},c.DOMException=l.DOMException;try{new c.DOMException}catch{c.DOMException=function(P,k){this.message=P,this.name=k;var V=Error(P);this.stack=V.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function W($,P){return new Promise(function(k,V){var K=new _($,P);if(K.signal&&K.signal.aborted)return V(new c.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function j(){G.abort()}G.onload=function(){var ee={statusText:G.statusText,headers:U(G.getAllResponseHeaders()||"")};K.url.indexOf("file://")===0&&(G.status<200||G.status>599)?ee.status=200:ee.status=G.status,ee.url="responseURL"in G?G.responseURL:ee.headers.get("X-Request-URL");var ae="response"in G?G.response:G.responseText;setTimeout(function(){k(new L(ae,ee))},0)},G.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},G.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},G.onabort=function(){setTimeout(function(){V(new c.DOMException("Aborted","AbortError"))},0)};function X(ee){try{return ee===""&&l.location.href?l.location.href:ee}catch{return ee}}if(G.open(K.method,X(K.url),!0),K.credentials==="include"?G.withCredentials=!0:K.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&(f.blob?G.responseType="blob":f.arrayBuffer&&(G.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof v||l.Headers&&P.headers instanceof l.Headers)){var Z=[];Object.getOwnPropertyNames(P.headers).forEach(function(ee){Z.push(m(ee)),G.setRequestHeader(ee,y(P.headers[ee]))}),K.headers.forEach(function(ee,ae){Z.indexOf(ae)===-1&&G.setRequestHeader(ae,ee)})}else K.headers.forEach(function(ee,ae){G.setRequestHeader(ae,ee)});K.signal&&(K.signal.addEventListener("abort",j),G.onreadystatechange=function(){G.readyState===4&&K.signal.removeEventListener("abort",j)}),G.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return W.polyfill=!0,l.fetch||(l.fetch=W,l.Headers=v,l.Request=_,l.Response=L),c.Headers=v,c.Request=_,c.Response=L,c.fetch=W,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var i=n.fetch?n:s;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(y0,y0.exports)),y0.exports}var Pse=Rse();const oI=rf(Pse);var $se=Object.defineProperty,Use=Object.defineProperties,Lse=Object.getOwnPropertyDescriptors,cI=Object.getOwnPropertySymbols,kse=Object.prototype.hasOwnProperty,Bse=Object.prototype.propertyIsEnumerable,lI=(t,e,n)=>e in t?$se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uI=(t,e)=>{for(var n in e||(e={}))kse.call(e,n)&&lI(t,n,e[n]);if(cI)for(var n of cI(e))Bse.call(e,n)&&lI(t,n,e[n]);return t},fI=(t,e)=>Use(t,Lse(e));const jse={Accept:"application/json","Content-Type":"application/json"},zse="POST",dI={headers:jse,method:zse},hI=10;let ar=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new $i.EventEmitter,this.isAvailable=!1,this.registering=!1,!D5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Pa(e),s=await(await oI(this.url,fI(uI({},dI),{body:n}))).json();this.onPayload({data:s})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!D5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Pa({id:1,jsonrpc:"2.0",method:"test",params:[]});await oI(e,fI(uI({},dI),{body:n}))}this.onOpen()}catch(n){const s=this.parseError(n);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?nl(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const s=this.parseError(n),i=s.message||s.toString(),r=Xm(e,i);this.events.emit("payload",r)}parseError(e,n=this.url){return V_(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>hI&&this.events.setMaxListeners(hI)}};const pI="error",Hse="wss://relay.walletconnect.org",Fse="wc",Vse="universal_provider",w0=`${Fse}@2:${Vse}:`,pM="https://rpc.walletconnect.org/v1/",Tu="generic",qse=`${pM}bundler`,Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function dE(t){return t==null||typeof t!="object"&&typeof t!="function"}function gM(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function mM(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Wse="[object RegExp]",yM="[object String]",wM="[object Number]",vM="[object Boolean]",bM="[object Arguments]",Gse="[object Symbol]",Kse="[object Date]",Yse="[object Map]",Xse="[object Set]",Qse="[object Array]",Zse="[object ArrayBuffer]",Jse="[object Object]",eie="[object DataView]",tie="[object Uint8Array]",nie="[object Uint8ClampedArray]",sie="[object Uint16Array]",iie="[object Uint32Array]",rie="[object Int8Array]",aie="[object Int16Array]",oie="[object Int32Array]",cie="[object Float32Array]",lie="[object Float64Array]";function hE(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uie(t,e){return ku(t,void 0,t,new Map,e)}function ku(t,e,n,s=new Map,i=void 0){const r=i?.(t,e,n,s);if(r!=null)return r;if(dE(t))return t;if(s.has(t))return s.get(t);if(Array.isArray(t)){const c=new Array(t.length);s.set(t,c);for(let l=0;l<t.length;l++)c[l]=ku(t[l],l,n,s,i);return Object.hasOwn(t,"index")&&(c.index=t.index),Object.hasOwn(t,"input")&&(c.input=t.input),c}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const c=new RegExp(t.source,t.flags);return c.lastIndex=t.lastIndex,c}if(t instanceof Map){const c=new Map;s.set(t,c);for(const[l,f]of t)c.set(l,ku(f,l,n,s,i));return c}if(t instanceof Set){const c=new Set;s.set(t,c);for(const l of t)c.add(ku(l,void 0,n,s,i));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(hE(t)){const c=new(Object.getPrototypeOf(t)).constructor(t.length);s.set(t,c);for(let l=0;l<t.length;l++)c[l]=ku(t[l],l,n,s,i);return c}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const c=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return s.set(t,c),Bc(c,t,n,s,i),c}if(typeof File<"u"&&t instanceof File){const c=new File([t],t.name,{type:t.type});return s.set(t,c),Bc(c,t,n,s,i),c}if(t instanceof Blob){const c=new Blob([t],{type:t.type});return s.set(t,c),Bc(c,t,n,s,i),c}if(t instanceof Error){const c=new t.constructor;return s.set(t,c),c.message=t.message,c.name=t.name,c.stack=t.stack,c.cause=t.cause,Bc(c,t,n,s,i),c}if(typeof t=="object"&&fie(t)){const c=Object.create(Object.getPrototypeOf(t));return s.set(t,c),Bc(c,t,n,s,i),c}return t}function Bc(t,e,n=t,s,i){const r=[...Object.keys(e),...gM(e)];for(let c=0;c<r.length;c++){const l=r[c],f=Object.getOwnPropertyDescriptor(t,l);(f==null||f.writable)&&(t[l]=ku(e[l],l,n,s,i))}}function fie(t){switch(mM(t)){case bM:case Qse:case Zse:case eie:case vM:case Kse:case cie:case lie:case rie:case aie:case oie:case Yse:case wM:case Jse:case Wse:case Xse:case yM:case Gse:case tie:case nie:case sie:case iie:return!0;default:return!1}}function die(t,e){return uie(t,(n,s,i,r)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case wM:case yM:case vM:{const c=new t.constructor(t?.valueOf());return Bc(c,t),c}case bM:{const c={};return Bc(c,t),c.length=t.length,c[Symbol.iterator]=t[Symbol.iterator],c}default:return}})}function gI(t){return die(t)}function mI(t){return t!==null&&typeof t=="object"&&mM(t)==="[object Arguments]"}function yI(t){return typeof t=="object"&&t!==null}function hie(){}function pie(t){return hE(t)}function gie(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mie(t){if(dE(t))return t;if(Array.isArray(t)||hE(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const s=new n(t);return s.lastIndex=t.lastIndex,s}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const s=new n(t.message);return s.stack=t.stack,s.name=t.name,s.cause=t.cause,s}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const s=Object.create(e);return Object.assign(s,t)}return t}function yie(t,...e){const n=e.slice(0,-1),s=e[e.length-1];let i=t;for(let r=0;r<n.length;r++){const c=n[r];i=x2(i,c,s,new Map)}return i}function x2(t,e,n,s){if(dE(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(s.has(e))return mie(s.get(e));if(s.set(e,t),Array.isArray(e)){e=e.slice();for(let r=0;r<e.length;r++)e[r]=e[r]??void 0}const i=[...Object.keys(e),...gM(e)];for(let r=0;r<i.length;r++){const c=i[r];let l=e[c],f=t[c];if(mI(l)&&(l={...l}),mI(f)&&(f={...f}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=gI(l)),Array.isArray(l))if(typeof f=="object"&&f!=null){const h=[],g=Reflect.ownKeys(f);for(let m=0;m<g.length;m++){const y=g[m];h[y]=f[y]}f=h}else f=[];const d=n(f,l,c,t,e,s);d!=null?t[c]=d:Array.isArray(l)||yI(f)&&yI(l)?t[c]=x2(f,l,n,s):f==null&&gie(l)?t[c]=x2({},l,n,s):f==null&&pie(l)?t[c]=gI(l):(f===void 0||l!==void 0)&&(t[c]=l)}return t}function wie(t,...e){return yie(t,...e,hie)}var vie=Object.defineProperty,bie=Object.defineProperties,xie=Object.getOwnPropertyDescriptors,wI=Object.getOwnPropertySymbols,Eie=Object.prototype.hasOwnProperty,Sie=Object.prototype.propertyIsEnumerable,vI=(t,e,n)=>e in t?vie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v0=(t,e)=>{for(var n in e||(e={}))Eie.call(e,n)&&vI(t,n,e[n]);if(wI)for(var n of wI(e))Sie.call(e,n)&&vI(t,n,e[n]);return t},Cie=(t,e)=>bie(t,xie(e));function ei(t,e,n){var s;const i=Fu(t);return((s=e.rpcMap)==null?void 0:s[i.reference])||`${pM}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function hl(t){return t.includes(":")?t.split(":")[1]:t}function xM(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Aie(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const s=[];return n.forEach(i=>{const r=e.namespaces[i].accounts;s.push(...r)}),s}function bI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var s,i;return((s=n?.chains)==null?void 0:s.length)&&((i=n?.chains)==null?void 0:i.length)>0}))}function b0(t={},e={}){const n=bI(xI(t)),s=bI(xI(e));return wie(n,s)}function xI(t){var e,n,s,i,r;const c={};if(!jr(t))return c;for(const[l,f]of Object.entries(t)){const d=Km(l)?[l]:f.chains,h=f.methods||[],g=f.events||[],m=f.rpcMap||{},y=Lu(l);c[y]=Cie(v0(v0({},c[y]),f),{chains:Br(d,(e=c[y])==null?void 0:e.chains),methods:Br(h,(n=c[y])==null?void 0:n.methods),events:Br(g,(s=c[y])==null?void 0:s.events)}),(jr(m)||jr(((i=c[y])==null?void 0:i.rpcMap)||{}))&&(c[y].rpcMap=v0(v0({},m),(r=c[y])==null?void 0:r.rpcMap))}return c}function EI(t){return t.includes(":")?t.split(":")[2]:t}function SI(t){const e={};for(const[n,s]of Object.entries(t)){const i=s.methods||[],r=s.events||[],c=s.accounts||[],l=Km(n)?[n]:s.chains?s.chains:xM(s.accounts);e[n]={chains:l,methods:i,events:r,accounts:c}}return e}function Uv(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const EM={},ft=t=>EM[t],Lv=(t,e)=>{EM[t]=e};var Nie=Object.defineProperty,CI=Object.getOwnPropertySymbols,Tie=Object.prototype.hasOwnProperty,Iie=Object.prototype.propertyIsEnumerable,AI=(t,e,n)=>e in t?Nie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NI=(t,e)=>{for(var n in e||(e={}))Tie.call(e,n)&&AI(t,n,e[n]);if(CI)for(var n of CI(e))Iie.call(e,n)&&AI(t,n,e[n]);return t};const TI="eip155",Die=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Oie=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,kv=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,II=t=>Object.keys(t).filter(e=>Die.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),_ie=(t,e,n)=>{const{sessionProperties:s={},scopedProperties:i={}}=t,r={};if(!jr(i)&&!jr(s))return;const c=II(s);for(const l of n){const f=Oie(l);if(!f)continue;r[kv(f)]=c;const d=i?.[`${TI}:${f}`];if(d){const h=d?.[`${TI}:${f}:${e}`];r[kv(f)]=NI(NI({},r[kv(f)]),II(h||d))}}for(const[l,f]of Object.entries(r))Object.keys(f).length===0&&delete r[l];return Object.keys(r).length>0?r:void 0};var Mie=Object.defineProperty,Rie=(t,e,n)=>e in t?Mie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,du=(t,e,n)=>Rie(t,typeof e!="symbol"?e+"":e,n);let Pie=class{constructor(e){du(this,"name","polkadot"),du(this,"client"),du(this,"httpProviders"),du(this,"events"),du(this,"namespace"),du(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var $ie=Object.defineProperty,Uie=Object.defineProperties,Lie=Object.getOwnPropertyDescriptors,DI=Object.getOwnPropertySymbols,kie=Object.prototype.hasOwnProperty,Bie=Object.prototype.propertyIsEnumerable,E2=(t,e,n)=>e in t?$ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OI=(t,e)=>{for(var n in e||(e={}))kie.call(e,n)&&E2(t,n,e[n]);if(DI)for(var n of DI(e))Bie.call(e,n)&&E2(t,n,e[n]);return t},_I=(t,e)=>Uie(t,Lie(e)),hu=(t,e,n)=>E2(t,typeof e!="symbol"?e+"":e,n);let jie=class{constructor(e){hu(this,"name","eip155"),hu(this,"client"),hu(this,"chainId"),hu(this,"namespace"),hu(this,"httpProviders"),hu(this,"events"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const s=n||ei(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=parseInt(hl(n));e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,s;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const r=parseInt(i,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${r}`);else throw new Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,s,i,r,c;const l=(s=(n=e.request)==null?void 0:n.params)==null?void 0:s[0],f=((r=(i=e.request)==null?void 0:i.params)==null?void 0:r[1])||[];if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(e.topic),h=((c=d?.sessionProperties)==null?void 0:c.capabilities)||{},g=`${l}${f.join(",")}`,m=h?.[g];if(m)return m;let y;try{y=_ie(d,l,f)}catch(v){console.warn("Failed to extract capabilities from session",v)}if(y)return y;const w=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:_I(OI({},d.sessionProperties||{}),{capabilities:_I(OI({},h||{}),{[g]:w})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return w}async getCallStatus(e){var n,s;const i=this.client.session.get(e.topic),r=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(r){const l=this.getBundlerUrl(e.chainId,r);try{return await this.getUserOperationReceipt(l,e)}catch(f){console.warn("Failed to fetch call status from bundler",f,l)}}const c=(s=i.sessionProperties)==null?void 0:s.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var s;const i=new URL(e),r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(jo("eth_getUserOperationReceipt",[(s=n.request.params)==null?void 0:s[0]]))});if(!r.ok)throw new Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,n){return`${qse}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}};var zie=Object.defineProperty,Hie=(t,e,n)=>e in t?zie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pu=(t,e,n)=>Hie(t,typeof e!="symbol"?e+"":e,n);let Fie=class{constructor(e){pu(this,"name","solana"),pu(this,"client"),pu(this,"httpProviders"),pu(this,"events"),pu(this,"namespace"),pu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var Vie=Object.defineProperty,qie=(t,e,n)=>e in t?Vie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gu=(t,e,n)=>qie(t,typeof e!="symbol"?e+"":e,n);let Wie=class{constructor(e){gu(this,"name","cosmos"),gu(this,"client"),gu(this,"httpProviders"),gu(this,"events"),gu(this,"namespace"),gu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}};var Gie=Object.defineProperty,Kie=(t,e,n)=>e in t?Gie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mu=(t,e,n)=>Kie(t,typeof e!="symbol"?e+"":e,n);let Yie=class{constructor(e){mu(this,"name","algorand"),mu(this,"client"),mu(this,"httpProviders"),mu(this,"events"),mu(this,"namespace"),mu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ui(new ar(s,ft("disableProviderPing")))}};var Xie=Object.defineProperty,Qie=(t,e,n)=>e in t?Xie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yu=(t,e,n)=>Qie(t,typeof e!="symbol"?e+"":e,n);class Zie{constructor(e){yu(this,"name","cip34"),yu(this,"client"),yu(this,"httpProviders"),yu(this,"events"),yu(this,"namespace"),yu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const s=this.getCardanoRPCUrl(n),i=hl(n);e[i]=this.createHttpProvider(i,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var Jie=Object.defineProperty,ere=(t,e,n)=>e in t?Jie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wu=(t,e,n)=>ere(t,typeof e!="symbol"?e+"":e,n);class tre{constructor(e){wu(this,"name","elrond"),wu(this,"client"),wu(this,"httpProviders"),wu(this,"events"),wu(this,"namespace"),wu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var nre=Object.defineProperty,sre=(t,e,n)=>e in t?nre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vu=(t,e,n)=>sre(t,typeof e!="symbol"?e+"":e,n);class ire{constructor(e){vu(this,"name","multiversx"),vu(this,"client"),vu(this,"httpProviders"),vu(this,"events"),vu(this,"namespace"),vu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;const i=hl(n);e[i]=this.createHttpProvider(i,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var rre=Object.defineProperty,are=(t,e,n)=>e in t?rre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bu=(t,e,n)=>are(t,typeof e!="symbol"?e+"":e,n);class ore{constructor(e){bu(this,"name","near"),bu(this,"client"),bu(this,"httpProviders"),bu(this,"events"),bu(this,"namespace"),bu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var s;e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace);return typeof s>"u"?void 0:new Ui(new ar(s,ft("disableProviderPing")))}}var cre=Object.defineProperty,lre=(t,e,n)=>e in t?cre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xu=(t,e,n)=>lre(t,typeof e!="symbol"?e+"":e,n);class ure{constructor(e){xu(this,"name","tezos"),xu(this,"client"),xu(this,"httpProviders"),xu(this,"events"),xu(this,"namespace"),xu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const s=n||ei(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace);return typeof s>"u"?void 0:new Ui(new ar(s))}}var fre=Object.defineProperty,dre=(t,e,n)=>e in t?fre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eu=(t,e,n)=>dre(t,typeof e!="symbol"?e+"":e,n);class hre{constructor(e){Eu(this,"name",Tu),Eu(this,"client"),Eu(this,"httpProviders"),Eu(this,"events"),Eu(this,"namespace"),Eu(this,"chainId"),this.namespace=e.namespace,this.events=ft("events"),this.client=ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const s={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const r=Fu(i);s[`${r.namespace}:${r.reference}`]=this.createHttpProvider(i)}),s}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const s=this.createHttpProvider(e,n);s&&(this.httpProviders[e]=s)}createHttpProvider(e,n){const s=n||ei(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ui(new ar(s,ft("disableProviderPing")))}}var pre=Object.defineProperty,gre=Object.defineProperties,mre=Object.getOwnPropertyDescriptors,MI=Object.getOwnPropertySymbols,yre=Object.prototype.hasOwnProperty,wre=Object.prototype.propertyIsEnumerable,S2=(t,e,n)=>e in t?pre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x0=(t,e)=>{for(var n in e||(e={}))yre.call(e,n)&&S2(t,n,e[n]);if(MI)for(var n of MI(e))wre.call(e,n)&&S2(t,n,e[n]);return t},Bv=(t,e)=>gre(t,mre(e)),Ei=(t,e,n)=>S2(t,typeof e!="symbol"?e+"":e,n);class ey{constructor(e){Ei(this,"client"),Ei(this,"namespaces"),Ei(this,"optionalNamespaces"),Ei(this,"sessionProperties"),Ei(this,"scopedProperties"),Ei(this,"events",new Lx),Ei(this,"rpcProviders",{}),Ei(this,"session"),Ei(this,"providerOpts"),Ei(this,"logger"),Ei(this,"uri"),Ei(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hp(gp({level:e?.logger||pI})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new ey(e);return await n.initialize(),n}async request(e,n,s){const[i,r]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:x0({},e),chainId:`${i}:${r}`,topic:this.session.topic,expiry:s})}sendAsync(e,n,s,i){const r=new Date().getTime();this.request(e,s,i).then(c=>n(null,Ym(r,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:s,response:i}=await this.client.authenticate(e,n);s&&(this.uri=s,this.events.emit("display_uri",s));const r=await i();if(this.session=r.session,this.session){const c=SI(this.session.namespaces);this.namespaces=b0(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();this.session=i;const r=SI(i.namespaces);return this.namespaces=b0(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[s,i]=this.validateChain(e),r=this.getProvider(s);r.name===Tu?r.setDefaultChain(`${s}:${i}`,n):r.setDefaultChain(i,n)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Da(n)){for(const s of n)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Mse.init({core:this.providerOpts.core,logger:this.providerOpts.logger||pI,relayUrl:this.providerOpts.relayUrl||Hse,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(s){throw this.logger.error("Failed to get session",s),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const s=this.client.session.getAll();this.session=s[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Lu(n)))];Lv("client",this.client),Lv("events",this.events),Lv("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const s=Aie(n,this.session);if(s?.length===0)return;const i=xM(s),r=b0(this.namespaces,this.optionalNamespaces),c=Bv(x0({},r[n]),{accounts:s,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new jie({namespace:c});break;case"algorand":this.rpcProviders[n]=new Yie({namespace:c});break;case"solana":this.rpcProviders[n]=new Fie({namespace:c});break;case"cosmos":this.rpcProviders[n]=new Wie({namespace:c});break;case"polkadot":this.rpcProviders[n]=new Pie({namespace:c});break;case"cip34":this.rpcProviders[n]=new Zie({namespace:c});break;case"elrond":this.rpcProviders[n]=new tre({namespace:c});break;case"multiversx":this.rpcProviders[n]=new ire({namespace:c});break;case"near":this.rpcProviders[n]=new ore({namespace:c});break;case"tezos":this.rpcProviders[n]=new ure({namespace:c});break;default:this.rpcProviders[Tu]?this.rpcProviders[Tu].updateNamespace(c):this.rpcProviders[Tu]=new hre({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:s}=e;s===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:s,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:r}=s;if(r.name==="accountsChanged"){const c=r.data;c&&Da(c)&&this.events.emit("accountsChanged",c.map(EI))}else if(r.name==="chainChanged"){const c=s.chainId,l=s.event.data,f=Lu(c),d=Uv(c)!==Uv(l)?`${f}:${Uv(l)}`:c;this.onChainChanged(d)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var s,i;if(e!==((s=this.session)==null?void 0:s.topic))return;const{namespaces:r}=n,c=(i=this.client)==null?void 0:i.session.get(e);this.session=Bv(x0({},c),{namespaces:r}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Bv(x0({},zt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Tu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:s={},sessionProperties:i,scopedProperties:r}=e;this.optionalNamespaces=b0(n,s),this.sessionProperties=i,this.scopedProperties=r}validateChain(e){const[n,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,s];if(n&&!Object.keys(this.namespaces||{}).map(c=>Lu(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&s)return[n,s];const i=Lu(Object.keys(this.namespaces)[0]),r=this.rpcProviders[i].getDefaultChain();return[i,r]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[s,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(s,i),this.events.emit("chainChanged",i);const r=this.getProvider(s).getDefaultChain();n||this.getProvider(s).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:s,previousChainId:r,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:s}){var i,r;try{if(n===s)return;const c=(r=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:r.accounts;if(!c)return;const l=c.filter(f=>f.includes(`${s}:`)).map(EI);if(!Da(l))return;this.events.emit("accountsChanged",l)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const s=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[s]?this.namespaces[s]&&(this.namespaces[s].defaultChain=n):this.namespaces[s]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var s;const i=((s=this.session)==null?void 0:s.topic)||"";await this.client.core.storage.setItem(`${w0}/${e}${i}`,n)}async getFromStore(e){var n;const s=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${w0}/${e}${s}`)}async deleteFromStore(e){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${w0}/${e}${s}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const s of n)s.startsWith(w0)&&await this.client.core.storage.removeItem(s)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const vre=ey;var RI={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof RI<"u"?RI.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},SM={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[s]=e.split(":");return pe.CHAIN_NAME_MAP?.[s]||void 0}},CM=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var bre=20,xre=1,rl=1e6,PI=1e6,Ere=-7,Sre=21,Cre=!1,Sp="[big.js] ",pl=Sp+"Invalid ",ty=pl+"decimal places",Are=pl+"rounding mode",AM=Sp+"Division by zero",xt={},zr=void 0,Nre=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function NM(){function t(e){var n=this;if(!(n instanceof t))return e===zr?NM():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(pl+"value");e=e===0&&1/e<0?"-0":String(e)}Tre(n,e)}n.constructor=t}return t.prototype=xt,t.DP=bre,t.RM=xre,t.NE=Ere,t.PE=Sre,t.strict=Cre,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Tre(t,e){var n,s,i;if(!Nre.test(e))throw Error(pl+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),i=e.length,s=0;s<i&&e.charAt(s)=="0";)++s;if(s==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=n-s-1,t.c=[],n=0;s<=i;)t.c[n++]=+e.charAt(s++)}return t}function gl(t,e,n,s){var i=t.c;if(n===zr&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Are);if(e<1)s=n===3&&(s||!!i[0])||e===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(s||i[1]!==zr))),i.length=1,s?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(s=n===1&&i[e]>=5||n===2&&(i[e]>5||i[e]===5&&(s||i[e+1]!==zr||i[e-1]&1))||n===3&&(s||!!i[0]),i.length=e,s){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function ml(t,e,n){var s=t.e,i=t.c.join(""),r=i.length;if(e)i=i.charAt(0)+(r>1?"."+i.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)i="0"+i;i="0."+i}else if(s>0)if(++s>r)for(s-=r;s--;)i+="0";else s<r&&(i=i.slice(0,s)+"."+i.slice(s));else r>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&n?"-"+i:i}xt.abs=function(){var t=new this.constructor(this);return t.s=1,t};xt.cmp=function(t){var e,n=this,s=n.c,i=(t=new n.constructor(t)).c,r=n.s,c=t.s,l=n.e,f=t.e;if(!s[0]||!i[0])return s[0]?r:i[0]?-c:0;if(r!=c)return r;if(e=r<0,l!=f)return l>f^e?1:-1;for(c=(l=s.length)<(f=i.length)?l:f,r=-1;++r<c;)if(s[r]!=i[r])return s[r]>i[r]^e?1:-1;return l==f?0:l>f^e?1:-1};xt.div=function(t){var e=this,n=e.constructor,s=e.c,i=(t=new n(t)).c,r=e.s==t.s?1:-1,c=n.DP;if(c!==~~c||c<0||c>rl)throw Error(ty);if(!i[0])throw Error(AM);if(!s[0])return t.s=r,t.c=[t.e=0],t;var l,f,d,h,g,m=i.slice(),y=l=i.length,w=s.length,v=s.slice(0,l),x=v.length,C=t,D=C.c=[],N=0,I=c+(C.e=e.e-t.e)+1;for(C.s=r,r=I<0?0:I,m.unshift(0);x++<l;)v.push(0);do{for(d=0;d<10;d++){if(l!=(x=v.length))h=l>x?1:-1;else for(g=-1,h=0;++g<l;)if(i[g]!=v[g]){h=i[g]>v[g]?1:-1;break}if(h<0){for(f=x==l?i:m;x;){if(v[--x]<f[x]){for(g=x;g&&!v[--g];)v[g]=9;--v[g],v[x]+=10}v[x]-=f[x]}for(;!v[0];)v.shift()}else break}D[N++]=h?d:++d,v[0]&&h?v[x]=s[y]||0:v=[s[y]]}while((y++<w||v[0]!==zr)&&r--);return!D[0]&&N!=1&&(D.shift(),C.e--,I--),N>I&&gl(C,I,n.RM,v[0]!==zr),C};xt.eq=function(t){return this.cmp(t)===0};xt.gt=function(t){return this.cmp(t)>0};xt.gte=function(t){return this.cmp(t)>-1};xt.lt=function(t){return this.cmp(t)<0};xt.lte=function(t){return this.cmp(t)<1};xt.minus=xt.sub=function(t){var e,n,s,i,r=this,c=r.constructor,l=r.s,f=(t=new c(t)).s;if(l!=f)return t.s=-f,r.plus(t);var d=r.c.slice(),h=r.e,g=t.c,m=t.e;if(!d[0]||!g[0])return g[0]?t.s=-f:d[0]?t=new c(r):t.s=1,t;if(l=h-m){for((i=l<0)?(l=-l,s=d):(m=h,s=g),s.reverse(),f=l;f--;)s.push(0);s.reverse()}else for(n=((i=d.length<g.length)?d:g).length,l=f=0;f<n;f++)if(d[f]!=g[f]){i=d[f]<g[f];break}if(i&&(s=d,d=g,g=s,t.s=-t.s),(f=(n=g.length)-(e=d.length))>0)for(;f--;)d[e++]=0;for(f=e;n>l;){if(d[--n]<g[n]){for(e=n;e&&!d[--e];)d[e]=9;--d[e],d[n]+=10}d[n]-=g[n]}for(;d[--f]===0;)d.pop();for(;d[0]===0;)d.shift(),--m;return d[0]||(t.s=1,d=[m=0]),t.c=d,t.e=m,t};xt.mod=function(t){var e,n=this,s=n.constructor,i=n.s,r=(t=new s(t)).s;if(!t.c[0])throw Error(AM);return n.s=t.s=1,e=t.cmp(n)==1,n.s=i,t.s=r,e?new s(n):(i=s.DP,r=s.RM,s.DP=s.RM=0,n=n.div(t),s.DP=i,s.RM=r,this.minus(n.times(t)))};xt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};xt.plus=xt.add=function(t){var e,n,s,i=this,r=i.constructor;if(t=new r(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var c=i.e,l=i.c,f=t.e,d=t.c;if(!l[0]||!d[0])return d[0]||(l[0]?t=new r(i):t.s=i.s),t;if(l=l.slice(),e=c-f){for(e>0?(f=c,s=d):(e=-e,s=l),s.reverse();e--;)s.push(0);s.reverse()}for(l.length-d.length<0&&(s=d,d=l,l=s),e=d.length,n=0;e;l[e]%=10)n=(l[--e]=l[e]+d[e]+n)/10|0;for(n&&(l.unshift(n),++f),e=l.length;l[--e]===0;)l.pop();return t.c=l,t.e=f,t};xt.pow=function(t){var e=this,n=new e.constructor("1"),s=n,i=t<0;if(t!==~~t||t<-PI||t>PI)throw Error(pl+"exponent");for(i&&(t=-t);t&1&&(s=s.times(e)),t>>=1,!!t;)e=e.times(e);return i?n.div(s):s};xt.prec=function(t,e){if(t!==~~t||t<1||t>rl)throw Error(pl+"precision");return gl(new this.constructor(this),t,e)};xt.round=function(t,e){if(t===zr)t=0;else if(t!==~~t||t<-rl||t>rl)throw Error(ty);return gl(new this.constructor(this),t+this.e+1,e)};xt.sqrt=function(){var t,e,n,s=this,i=s.constructor,r=s.s,c=s.e,l=new i("0.5");if(!s.c[0])return new i(s);if(r<0)throw Error(Sp+"No square root");r=Math.sqrt(+ml(s,!0,!0)),r===0||r===1/0?(e=s.c.join(""),e.length+c&1||(e+="0"),r=Math.sqrt(e),c=((c+1)/2|0)-(c<0||c&1),t=new i((r==1/0?"5e":(r=r.toExponential()).slice(0,r.indexOf("e")+1))+c)):t=new i(r+""),c=t.e+(i.DP+=4);do n=t,t=l.times(n.plus(s.div(n)));while(n.c.slice(0,c).join("")!==t.c.slice(0,c).join(""));return gl(t,(i.DP-=4)+t.e+1,i.RM)};xt.times=xt.mul=function(t){var e,n=this,s=n.constructor,i=n.c,r=(t=new s(t)).c,c=i.length,l=r.length,f=n.e,d=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!r[0])return t.c=[t.e=0],t;for(t.e=f+d,c<l&&(e=i,i=r,r=e,d=c,c=l,l=d),e=new Array(d=c+l);d--;)e[d]=0;for(f=l;f--;){for(l=0,d=c+f;d>f;)l=e[d]+r[f]*i[d-f-1]+l,e[d--]=l%10,l=l/10|0;e[d]=l}for(l?++t.e:e.shift(),f=e.length;!e[--f];)e.pop();return t.c=e,t};xt.toExponential=function(t,e){var n=this,s=n.c[0];if(t!==zr){if(t!==~~t||t<0||t>rl)throw Error(ty);for(n=gl(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return ml(n,!0,!!s)};xt.toFixed=function(t,e){var n=this,s=n.c[0];if(t!==zr){if(t!==~~t||t<0||t>rl)throw Error(ty);for(n=gl(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return ml(n,!1,!!s)};xt[Symbol.for("nodejs.util.inspect.custom")]=xt.toJSON=xt.toString=function(){var t=this,e=t.constructor;return ml(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};xt.toNumber=function(){var t=+ml(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Sp+"Imprecise conversion");return t};xt.toPrecision=function(t,e){var n=this,s=n.constructor,i=n.c[0];if(t!==zr){if(t!==~~t||t<1||t>rl)throw Error(pl+"precision");for(n=gl(new s(n),t,e);n.c.length<t;)n.c.push(0)}return ml(n,t<=n.e||n.e<=s.NE||n.e>=s.PE,!!i)};xt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Sp+"valueOf disallowed");return ml(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ld=NM();const Ire={bigNumber(t){return t?new Ld(t):new Ld(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ld(0);const n=new Ld(t),s=new Ld(e);return n.times(s)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Dre=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ore=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],_re=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Mre={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?_re:Dre,getSwapAbi:()=>Ore},Qs={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,s,i]=e;if(!n||!s||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:s,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,s]=e;if(!n||!s)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:s}}},Ue={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function jv(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Pe={setItem(t,e){Bu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Bu())return localStorage.getItem(t)||void 0},removeItem(t){Bu()&&localStorage.removeItem(t)},clear(){Bu()&&localStorage.clear()}};function Bu(){return typeof window<"u"&&typeof localStorage<"u"}function zo(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Rre=Symbol(),$I=Object.getPrototypeOf,C2=new WeakMap,Pre=t=>t&&(C2.has(t)?C2.get(t):$I(t)===Object.prototype||$I(t)===Array.prototype),$re=t=>Pre(t)&&t[Rre]||null,UI=(t,e=!0)=>{C2.set(t,e)},Em={},pE=t=>typeof t=="object"&&t!==null,Ure=t=>pE(t)&&!Cp.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),TM=(t,e)=>{const n=A2.get(t);if(n?.[0]===e)return n[1];const s=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return UI(s,!0),A2.set(t,[e,s]),Reflect.ownKeys(t).forEach(i=>{if(Object.getOwnPropertyDescriptor(s,i))return;const r=Reflect.get(t,i),{enumerable:c}=Reflect.getOwnPropertyDescriptor(t,i),l={value:r,enumerable:c,configurable:!0};if(Cp.has(r))UI(r,!1);else if(Yo.has(r)){const[f,d]=Yo.get(r);l.value=TM(f,d())}Object.defineProperty(s,i,l)}),Object.preventExtensions(s)},Lre=(t,e,n,s)=>({deleteProperty(i,r){const c=Reflect.get(i,r);n(r);const l=Reflect.deleteProperty(i,r);return l&&s(["delete",[r],c]),l},set(i,r,c,l){const f=!t()&&Reflect.has(i,r),d=Reflect.get(i,r,l);if(f&&(LI(d,c)||Ph.has(c)&&LI(d,Ph.get(c))))return!0;n(r),pE(c)&&(c=$re(c)||c);const h=!Yo.has(c)&&Bre(c)?Rt(c):c;return e(r,h),Reflect.set(i,r,h,l),s(["set",[r],c,d]),!0}}),Yo=new WeakMap,Cp=new WeakSet,A2=new WeakMap,Gd=[1,1],Ph=new WeakMap;let LI=Object.is,kre=(t,e)=>new Proxy(t,e),Bre=Ure,jre=TM,zre=Lre;function Rt(t={}){if(!pE(t))throw new Error("object required");const e=Ph.get(t);if(e)return e;let n=Gd[0];const s=new Set,i=(x,C=++Gd[0])=>{n!==C&&(n=C,s.forEach(D=>D(x,C)))};let r=Gd[1];const c=(x=++Gd[1])=>(r!==x&&!s.size&&(r=x,f.forEach(([C])=>{const D=C[1](x);D>n&&(n=D)})),n),l=x=>(C,D)=>{const N=[...C];N[1]=[x,...N[1]],i(N,D)},f=new Map,d=(x,C)=>{const D=!Cp.has(C)&&Yo.get(C);if(D){if((Em?"production":void 0)!=="production"&&f.has(x))throw new Error("prop listener already exists");if(s.size){const N=D[2](l(x));f.set(x,[D,N])}else f.set(x,[D])}},h=x=>{var C;const D=f.get(x);D&&(f.delete(x),(C=D[1])==null||C.call(D))},g=x=>(s.add(x),s.size===1&&f.forEach(([D,N],I)=>{if((Em?"production":void 0)!=="production"&&N)throw new Error("remove already exists");const S=D[2](l(I));f.set(I,[D,S])}),()=>{s.delete(x),s.size===0&&f.forEach(([D,N],I)=>{N&&(N(),f.set(I,[D]))})});let m=!0;const y=zre(()=>m,d,h,i),w=kre(t,y);Ph.set(t,w);const v=[t,c,g];return Yo.set(w,v),Reflect.ownKeys(t).forEach(x=>{const C=Object.getOwnPropertyDescriptor(t,x);"value"in C&&C.writable&&(w[x]=t[x])}),m=!1,w}function Bn(t,e,n){const s=Yo.get(t);(Em?"production":void 0)!=="production"&&!s&&console.warn("Please use proxy object");let i;const r=[],c=s[2];let l=!1;const d=c(h=>{r.push(h),i||(i=Promise.resolve().then(()=>{i=void 0,l&&e(r.splice(0))}))});return l=!0,()=>{l=!1,d()}}function $h(t){const e=Yo.get(t);(Em?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,s]=e;return jre(n,s())}function al(t){return Cp.add(t),t}function Hre(){return{proxyStateMap:Yo,refSet:Cp,snapCache:A2,versionHolder:Gd,proxyCache:Ph}}function ts(t,e,n,s){let i=t[e];return Bn(t,()=>{const r=t[e];Object.is(i,r)||n(i=r)})}const{proxyStateMap:Fre,snapCache:Vre}=Hre(),E0=t=>Fre.has(t);function qre(t){const e=[];let n=0;const s=new Map,i=new WeakMap,r=()=>{const d=Vre.get(l),h=d?.[1];if(h&&!i.has(h)){const g=new Map(s);i.set(h,g)}},c=d=>i.get(d)||s,l={data:e,index:n,epoch:0,get size(){return E0(this)||r(),c(this).size},get(d){const g=c(this).get(d);if(g===void 0){this.epoch;return}return this.data[g]},has(d){const h=c(this);return this.epoch,h.has(d)},set(d,h){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");const g=s.get(d);return g===void 0?(s.set(d,this.index),this.data[this.index++]=h):this.data[g]=h,this.epoch++,this},delete(d){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");const h=s.get(d);return h===void 0?!1:(delete this.data[h],s.delete(d),this.epoch++,!0)},clear(){if(!E0(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,s.clear()},forEach(d){this.epoch,c(this).forEach((g,m)=>{d(this.data[g],m,this)})},*entries(){this.epoch;const d=c(this);for(const[h,g]of d)yield[h,this.data[g]]},*keys(){this.epoch;const d=c(this);for(const h of d.keys())yield h},*values(){this.epoch;const d=c(this);for(const h of d.values())yield this.data[h]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},f=Rt(l);return Object.defineProperties(f,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(f),f}const IM=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Wre="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",yt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,BALANCE_SUPPORTED_CHAINS:[pe.CHAIN.EVM,pe.CHAIN.SOLANA],NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[pe.CHAIN.EVM,pe.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},me={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=me.getActiveNamespace(),e=me.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,s=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:s}},setWalletConnectDeepLink({name:t,href:e}){try{Pe.setItem(Ue.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Pe.getItem(Ue.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Pe.removeItem(Ue.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Pe.setItem(Ue.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Pe.setItem(Ue.ACTIVE_CAIP_NETWORK_ID,t),me.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Pe.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Pe.removeItem(Ue.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=jv(t);Pe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=me.getRecentWallets();e.find(s=>s.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Pe.setItem(Ue.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Pe.getItem(Ue.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=jv(t);Pe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Pe.getItem(Ue.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=jv(t);return Pe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Pe.setItem(Ue.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Pe.getItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Pe.removeItem(Ue.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Pe.getItem(Ue.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Pe.getItem(Ue.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{Pe.setItem(Ue.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Pe.getItem(Ue.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Pe.getItem(Ue.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Pe.setItem(Ue.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=me.getConnectedNamespaces();e.includes(t)||(e.push(t),me.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=me.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),me.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Pe.getItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Pe.setItem(Ue.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Pe.removeItem(Ue.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Pe.getItem(Ue.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=me.getBalanceCache();Pe.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=me.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;me.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=me.getBalanceCache();e[t.caipAddress]=t,Pe.setItem(Ue.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Pe.getItem(Ue.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=me.getBalanceCache();Pe.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=me.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),me.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=me.getNativeBalanceCache();e[t.caipAddress]=t,Pe.setItem(Ue.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Pe.getItem(Ue.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=me.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;me.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=me.getEnsCache();e[t.address]=t,Pe.setItem(Ue.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=me.getEnsCache();Pe.setItem(Ue.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Pe.getItem(Ue.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=me.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;me.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=me.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Pe.setItem(Ue.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=me.getIdentityCache();Pe.setItem(Ue.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Pe.removeItem(Ue.PORTFOLIO_CACHE),Pe.removeItem(Ue.NATIVE_BALANCE_CACHE),Pe.removeItem(Ue.ENS_CACHE),Pe.removeItem(Ue.IDENTITY_CACHE),Pe.removeItem(Ue.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Pe.setItem(Ue.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Pe.getItem(Ue.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=me.getConnections(),s=n[e]??[],i=new Map;for(const c of s)i.set(c.connectorId,{...c});for(const c of t){const l=i.get(c.connectorId),f=c.connectorId===pe.CONNECTOR_ID.AUTH;if(l&&!f){const d=new Set(l.accounts.map(g=>g.address.toLowerCase())),h=c.accounts.filter(g=>!d.has(g.address.toLowerCase()));l.accounts.push(...h)}else i.set(c.connectorId,{...c})}const r={...n,[e]:Array.from(i.values())};Pe.setItem(Ue.CONNECTIONS,JSON.stringify(r))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Pe.getItem(Ue.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const s=me.getConnections(),i=s[n]??[],r=new Map(i.map(l=>[l.connectorId,l])),c=r.get(t);c&&(c.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase()).length===0?r.delete(t):r.set(t,{...c,accounts:c.accounts.filter(f=>f.address.toLowerCase()!==e.toLowerCase())})),Pe.setItem(Ue.CONNECTIONS,JSON.stringify({...s,[n]:Array.from(r.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Pe.getItem(Ue.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=me.getDisconnectedConnectorIds(),s=n[e]??[];s.push(t),Pe.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(s))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=me.getDisconnectedConnectorIds();let s=n[e]??[];s=s.filter(i=>i.toLowerCase()!==t.toLowerCase()),Pe.setItem(Ue.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(s))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(me.getDisconnectedConnectorIds()[e]??[]).some(i=>i.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=Pe.getItem(Ue.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const s=me.getTransactionsCache()[t]?.[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;me.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:s}){try{const i=me.getTransactionsCache();i[t]={...i[t],[e]:{timestamp:n,transactions:s}},Pe.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(i))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:s})}},removeTransactionsCache({address:t,chainId:e}){try{const n=me.getTransactionsCache(),s=n?.[t]||{},{[e]:i,...r}=s;Pe.setItem(Ue.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:r}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=Pe.getItem(Ue.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=me.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;me.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=me.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},Pe.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=me.getTokenPriceCache();Pe.setItem(Ue.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},Re={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return Re.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=yt.TEN_SEC_MS:!0},isAllowedRetry(t,e=yt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(Re.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),s=new URL(e);return n.hostname===s.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+yt.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...s)=>{function i(){t(...s)}n&&clearTimeout(n),n=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Re.isHttpUrl(t))return this.formatUniversalUrl(t,e);let s=t,i=n;s.includes("://")||(s=t.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),i&&!i?.endsWith("/")&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const r=encodeURIComponent(e);return{redirect:`${s}wc?uri=${r}`,redirectUniversalLink:i?`${i}wc?uri=${r}`:void 0,href:s}},formatUniversalUrl(t,e){if(!Re.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const s=encodeURIComponent(e);return{redirect:`${n}wc?uri=${s}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?me.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,s)=>{const i=new Image;i.onload=n,i.onerror=s,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,Re.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const s=Number(t);if(s){const i=Math.floor(s*1e3)/1e3;i&&(n=i.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((s,i)=>{n[s]=i}),e.sort((s,i)=>{const r=n[s.id],c=n[i.id];return r!==void 0&&c!==void 0?r-c:r!==void 0?-1:c!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,s]=e.split(".");return{dollars:n,pennies:s}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(s=>{const i=s[e];return n.has(i)?!1:(n.add(i),!0)})},generateSdkVersion(t,e,n){const i=t.length===0?yt.ADAPTER_TYPES.UNIVERSAL:t.map(r=>r.adapterType).join(",");return`${e}-${i}-${n}`},createAccount(t,e,n,s,i){return{namespace:t,address:e,type:n,publicKey:s,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",r=t.substring(t.indexOf(i)+i.length),c=this.injectIntoUrl(decodeURIComponent(r),n,e);return t.replace(r,encodeURIComponent(c))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const s=t.indexOf(e);if(s===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",s),r=e.length,c=i!==-1?i:t.length,l=t.substring(0,s+r),f=t.substring(s+r,c),d=t.substring(i),h=f+n;return l+h+d}};async function kd(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Ap{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:s,...i}){const r=this.createUrl(i);return(await kd(r,{method:"GET",headers:e,signal:n,cache:s})).json()}async getBlob({headers:e,signal:n,...s}){const i=this.createUrl(s);return(await kd(i,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await kd(r,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}async put({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await kd(r,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}async delete({body:e,headers:n,signal:s,...i}){const r=this.createUrl(i);return(await kd(r,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:s})).json()}createUrl({path:e,params:n}){const s=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([i,r])=>{r&&s.searchParams.append(i,r)}),this.clientId&&s.searchParams.append("clientId",this.clientId),s}}const Gre={getFeatureValue(t,e){const n=e?.[t];return n===void 0?yt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Re.isTelegram()){if(Re.isIos())return t.filter(e=>e!=="google");if(Re.isMac())return t.filter(e=>e!=="x");if(Re.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},_e=Rt({features:yt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:yt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),he={state:_e,subscribeKey(t,e){return ts(_e,t,e)},setOptions(t){Object.assign(_e,t)},setRemoteFeatures(t){if(!t)return;const e={..._e.remoteFeatures,...t};_e.remoteFeatures=e,_e.remoteFeatures?.socials&&(_e.remoteFeatures.socials=Gre.filterSocialsByPlatform(_e.remoteFeatures.socials)),_e.features?.pay&&(_e.remoteFeatures.email=!1,_e.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;_e.features||(_e.features=yt.DEFAULT_FEATURES);const e={..._e.features,...t};_e.features=e,_e.features?.pay&&_e.remoteFeatures&&(_e.remoteFeatures.email=!1,_e.remoteFeatures.socials=!1)},setProjectId(t){_e.projectId=t},setCustomRpcUrls(t){_e.customRpcUrls=t},setAllWallets(t){_e.allWallets=t},setIncludeWalletIds(t){_e.includeWalletIds=t},setExcludeWalletIds(t){_e.excludeWalletIds=t},setFeaturedWalletIds(t){_e.featuredWalletIds=t},setTokens(t){_e.tokens=t},setTermsConditionsUrl(t){_e.termsConditionsUrl=t},setPrivacyPolicyUrl(t){_e.privacyPolicyUrl=t},setCustomWallets(t){_e.customWallets=t},setIsSiweEnabled(t){_e.isSiweEnabled=t},setIsUniversalProvider(t){_e.isUniversalProvider=t},setSdkVersion(t){_e.sdkVersion=t},setMetadata(t){_e.metadata=t},setDisableAppend(t){_e.disableAppend=t},setEIP6963Enabled(t){_e.enableEIP6963=t},setDebug(t){_e.debug=t},setEnableWalletConnect(t){_e.enableWalletConnect=t},setEnableWalletGuide(t){_e.enableWalletGuide=t},setEnableAuthLogger(t){_e.enableAuthLogger=t},setEnableWallets(t){_e.enableWallets=t},setPreferUniversalLinks(t){_e.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(yt.SIWX_DEFAULTS))t[e]??=n;_e.siwx=t},setConnectMethodsOrder(t){_e.features={..._e.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){_e.features={..._e.features,walletFeaturesOrder:t}},setSocialsOrder(t){_e.remoteFeatures={..._e.remoteFeatures,socials:t}},setCollapseWallets(t){_e.features={..._e.features,collapseWallets:t}},setEnableEmbedded(t){_e.enableEmbedded=t},setAllowUnsupportedChain(t){_e.allowUnsupportedChain=t},setManualWCControl(t){_e.manualWCControl=t},setEnableNetworkSwitch(t){_e.enableNetworkSwitch=t},setEnableReconnect(t){_e.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(_e.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){_e.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return _e.universalProviderConfigOverride},getSnapshot(){return $h(_e)}},Kre=Object.freeze({enabled:!0,events:[]}),Yre=new Ap({baseUrl:Re.getAnalyticsUrl(),clientId:null}),Xre=5,Qre=60*1e3,Do=Rt({...Kre}),Zre={state:Do,subscribeKey(t,e){return ts(Do,t,e)},async sendError(t,e){if(!Do.enabled)return;const n=Date.now();if(Do.events.filter(r=>{const c=new Date(r.properties.timestamp||"").getTime();return n-c<Qre}).length>=Xre)return;const i={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Do.events.push(i);try{if(typeof window>"u")return;const{projectId:r,sdkType:c,sdkVersion:l}=he.state;await Yre.post({path:"/e",params:{projectId:r,st:c,sv:l||"html-wagmi-4.2.2"},body:{eventId:Re.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Do.enabled=!0},disable(){Do.enabled=!1},clearEvents(){Do.events=[]}};class Zu extends Error{constructor(e,n,s){super(e),this.name="AppKitError",this.category=n,this.originalError=s,Object.setPrototypeOf(this,Zu.prototype);let i=!1;if(s instanceof Error&&typeof s.stack=="string"&&s.stack){const r=s.stack,c=r.indexOf(`
`);if(c>-1){const l=r.substring(c+1);this.stack=`${this.name}: ${this.message}
${l}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,Zu):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function kI(t,e){const n=t instanceof Zu?t:new Zu(t instanceof Error?t.message:String(t),e,t);throw Zre.sendError(n,n.category),n}function ni(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(s=>{const i=t[s];if(typeof i=="function"){let r=i;i.constructor.name==="AsyncFunction"?r=async(...c)=>{try{return await i(...c)}catch(l){return kI(l,e)}}:r=(...c)=>{try{return i(...c)}catch(l){return kI(l,e)}},n[s]=r}else n[s]=i}),n}const Zc={ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Mr={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Jre={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,s=encodeURIComponent(n);if(t===Mr.PHANTOM.id&&!("phantom"in window)){const i=n.startsWith("https")?"https":"http",r=n.split("/")[2],c=encodeURIComponent(`${i}://${r}`);window.location.href=`${Mr.PHANTOM.url}/ul/browse/${s}?ref=${c}`}t===Mr.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Mr.SOLFLARE.url}/ul/v1/browse/${s}?ref=${s}`),e===pe.CHAIN.SOLANA&&t===Mr.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Mr.COINBASE.url}/dapp?cb_url=${s}`)}},qs=Rt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),eae={state:qs,subscribeNetworkImages(t){return Bn(qs.networkImages,()=>t(qs.networkImages))},subscribeKey(t,e){return ts(qs,t,e)},subscribe(t){return Bn(qs,()=>t(qs))},setWalletImage(t,e){qs.walletImages[t]=e},setNetworkImage(t,e){qs.networkImages[t]=e},setChainImage(t,e){qs.chainImages[t]=e},setConnectorImage(t,e){qs.connectorImages={...qs.connectorImages,[t]:e}},setTokenImage(t,e){qs.tokenImages[t]=e},setCurrencyImage(t,e){qs.currencyImages[t]=e}},nr=ni(eae),tae={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},zv=Rt({networkImagePromises:{}}),DM={async fetchWalletImage(t){if(t)return await Le._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(zv.networkImagePromises[t]||(zv.networkImagePromises[t]=Le._fetchNetworkImage(t)),await zv.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return nr.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return nr.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return nr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return nr.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return nr.state.connectorImages[t.imageId]},getChainImage(t){return nr.state.networkImages[tae[t]]}},Oo=Rt({message:"",variant:"info",open:!1}),nae={state:Oo,subscribeKey(t,e){return ts(Oo,t,e)},open(t,e){const{debug:n}=he.state,{code:s,displayMessage:i,debugMessage:r}=t;i&&n&&(Oo.message=i,Oo.variant=e,Oo.open=!0),r&&console.error(typeof r=="function"?r():r,s?{code:s}:void 0)},close(){Oo.open=!1,Oo.message="",Oo.variant="info"}},Zn=ni(nae),sae=Re.getAnalyticsUrl(),iae=new Ap({baseUrl:sae,clientId:null}),rae=["MODAL_CREATED"],ba=Rt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),It={state:ba,subscribe(t){return Bn(ba,()=>t(ba))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Me.state.address;if(rae.includes(t.data.event)||typeof window>"u")return;await iae.post({path:"/e",params:It.getSdkProperties(),body:{eventId:Re.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ba.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!ba.reportedErrors.FORBIDDEN&&(Zn.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Bu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ba.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){ba.timestamp=Date.now(),ba.data=t,(he.state.features?.analytics||t.event==="INITIALIZE")&&It._sendAnalyticsEvent(ba)}},aae=Re.getApiUrl(),Ss=new Ap({baseUrl:aae,clientId:null}),oae=40,BI=4,cae=20,Ve=Rt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Le={state:Ve,subscribeKey(t,e){return ts(Ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=he.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return he.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ss.baseUrl}/getWalletImage/${t}`,n=await Ss.getBlob({path:e,params:Le._getSdkProperties()});nr.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,n=await Ss.getBlob({path:e,params:Le._getSdkProperties()});nr.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,n=await Ss.getBlob({path:e,params:Le._getSdkProperties()});nr.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ss.baseUrl}/public/getCurrencyImage/${t}`,n=await Ss.getBlob({path:e,params:Le._getSdkProperties()});nr.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ss.baseUrl}/public/getTokenImage/${t}`,n=await Ss.getBlob({path:e,params:Le._getSdkProperties()});nr.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Re.isMobile()?t?.filter(n=>n.mobile_link||n.id===Mr.COINBASE.id?!0:q.state.activeChain==="solana"&&(n.id===Mr.SOLFLARE.id||n.id===Mr.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ss.get({path:"/appkit/v1/config",params:Le._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ss.get({path:"/projects/v1/origins",params:Le._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=q.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!DM.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Le._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ve.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Le._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Le._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Le._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Le._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Mr).map(r=>r.id));const s=await Ss.get({path:"/getWallets",params:{...Le._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Le._filterWalletsByPlatform(s?.data)||[],count:s?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=he.state;if(t?.length){const e={...Le._getSdkProperties(),page:1,entries:t?.length??BI,include:t},{data:n}=await Le.fetchWallets(e),s=[...n].sort((r,c)=>t.indexOf(r.id)-t.indexOf(c.id)),i=s.map(r=>r.image_id).filter(Boolean);await Promise.allSettled(i.map(r=>Le._fetchWalletImage(r))),Ve.featured=s,Ve.allFeatured=s}},async fetchRecommendedWallets(){try{Ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=he.state,s=[...e??[],...n??[]].filter(Boolean),i=q.getRequestedCaipNetworkIds().join(","),r={page:1,entries:BI,include:t,exclude:s,chains:i},{data:c,count:l}=await Le.fetchWallets(r),f=me.getRecentWallets(),d=c.map(g=>g.image_id).filter(Boolean),h=f.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...d,...h].map(g=>Le._fetchWalletImage(g))),Ve.recommended=c,Ve.allRecommended=c,Ve.count=l??0}catch{}finally{Ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:s}=he.state,i=q.getRequestedCaipNetworkIds().join(","),r=[...Ve.recommended.map(({id:h})=>h),...n??[],...s??[]].filter(Boolean),c={page:t,entries:oae,include:e,exclude:r,chains:i},{data:l,count:f}=await Le.fetchWallets(c),d=l.slice(0,cae).map(h=>h.image_id).filter(Boolean);await Promise.allSettled(d.map(h=>Le._fetchWalletImage(h))),Ve.wallets=Re.uniqueBy([...Ve.wallets,...Le._filterOutExtensions(l)],"id").filter(h=>h.chains?.some(g=>i.includes(g))),Ve.count=f>Ve.count?f:Ve.count,Ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Le.fetchWallets(e);n&&n.forEach(s=>{Ve.excludedWallets.push({rdns:s.rdns,name:s.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:s}=he.state,i=q.getRequestedCaipNetworkIds().join(",");Ve.search=[];const r={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:s,chains:i},{data:c}=await Le.fetchWallets(r);It.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const l=c.map(f=>f.image_id).filter(Boolean);await Promise.allSettled([...l.map(f=>Le._fetchWalletImage(f)),Re.wait(300)]),Ve.search=Le._filterOutExtensions(c)},initPromise(t,e){const n=Ve.promises[t];return n||(Ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:s=!0}={}){const i=[t&&Le.initPromise("connectorImages",Le.fetchConnectorImages),e&&Le.initPromise("featuredWallets",Le.fetchFeaturedWallets),n&&Le.initPromise("recommendedWallets",Le.fetchRecommendedWallets),s&&Le.initPromise("networkImages",Le.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){he.state.features?.analytics&&Le.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ss.get({path:"/getAnalyticsConfig",params:Le._getSdkProperties()});he.setFeatures({analytics:t})}catch{he.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.recommended=Ve.allRecommended.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.filteredWallets=Ve.wallets.filter(n=>n.chains?.some(s=>e.includes(s)))},clearFilterByNamespaces(){Ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.recommended=Ve.allRecommended.filter(n=>n.chains?.some(s=>e.includes(s))),Ve.filteredWallets=Ve.wallets.filter(n=>n.chains?.some(s=>e.includes(s)))}},Tt=Rt({view:"Connect",history:["Connect"],transactionStack:[]}),lae={state:Tt,subscribeKey(t,e){return ts(Tt,t,e)},pushTransactionStack(t){Tt.transactionStack.push(t)},popTransactionStack(t){const e=Tt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:s,onCancel:i}=e;switch(t){case"success":n?.();break;case"error":s?.(),ze.goBack();break;case"cancel":i?.(),ze.goBack();break}},push(t,e){t!==Tt.view&&(Tt.view=t,Tt.history.push(t),Tt.data=e)},reset(t,e){Tt.view=t,Tt.history=[t],Tt.data=e},replace(t,e){Tt.history.at(-1)===t||(Tt.view=t,Tt.history[Tt.history.length-1]=t,Tt.data=e)},goBack(){const t=q.state.activeCaipAddress,e=ze.state.view==="ConnectingFarcaster",n=!t&&e;if(Tt.history.length>1){Tt.history.pop();const[s]=Tt.history.slice(-1);s&&(t&&s==="Connect"?Tt.view="Account":Tt.view=s)}else st.close();Tt.data?.wallet&&(Tt.data.wallet=void 0),setTimeout(()=>{if(n){Me.setFarcasterUrl(void 0,q.state.activeChain);const s=ve.getAuthConnector();s?.provider?.reload();const i=$h(he.state);s?.provider?.syncDappData?.({metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType})}},100)},goBackToIndex(t){if(Tt.history.length>1){Tt.history=Tt.history.slice(0,t+1);const[e]=Tt.history.slice(-1);e&&(Tt.view=e)}},goBackOrCloseModal(){ze.state.history.length>1?ze.goBack():st.close()}},ze=ni(lae),xa=Rt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),N2={state:xa,subscribe(t){return Bn(xa,()=>t(xa))},setThemeMode(t){xa.themeMode=t;try{const e=ve.getAuthConnector();if(e){const n=N2.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:zo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){xa.themeVariables={...xa.themeVariables,...t};try{const e=ve.getAuthConnector();if(e){const n=N2.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:zo(xa.themeVariables,xa.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return $h(xa)}},Gs=ni(N2),OM=Object.fromEntries(CM.map(t=>[t,void 0])),uae=Object.fromEntries(CM.map(t=>[t,!0])),lt=Rt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:OM,filterByNamespaceMap:uae}),fae={state:lt,subscribe(t){return Bn(lt,()=>{t(lt)})},subscribeKey(t,e){return ts(lt,t,e)},initialize(t){t.forEach(e=>{const n=me.getConnectedConnectorId(e);n&&ve.setConnectorId(n,e)})},setActiveConnector(t){t&&(lt.activeConnector=al(t))},setConnectors(t){t.filter(i=>!lt.allConnectors.some(r=>r.id===i.id&&ve.getConnectorName(r.name)===ve.getConnectorName(i.name)&&r.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&lt.allConnectors.push(al(i))});const n=ve.getEnabledNamespaces(),s=ve.getEnabledConnectors(n);lt.connectors=ve.mergeMultiChainConnectors(s)},filterByNamespaces(t){Object.keys(lt.filterByNamespaceMap).forEach(e=>{lt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{lt.filterByNamespaceMap[e]=!0}),ve.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){lt.filterByNamespaceMap[t]=e,ve.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ve.getEnabledNamespaces(),e=ve.getEnabledConnectors(t),n=ve.areAllNamespacesEnabled();lt.connectors=ve.mergeMultiChainConnectors(e),n?Le.clearFilterByNamespaces():Le.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(lt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return lt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(lt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ve.generateConnectorMapByName(t),n=[];return e.forEach(s=>{const i=s[0],r=i?.id===pe.CONNECTOR_ID.AUTH;s.length>1&&i?n.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...s],type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&n.push(i)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:s}=n,i=ve.getConnectorName(s);if(!i)return;const r=e.get(i)||[];r.find(l=>l.chain===n.chain)||r.push(n),e.set(i,r)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(s=>s.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===pe.CONNECTOR_ID.AUTH){const e=t,n=$h(he.state),s=Gs.getSnapshot().themeMode,i=Gs.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:s,themeVariables:i,w3mThemeVariables:zo(i,s)}),ve.setConnectors([t])}else ve.setConnectors([t])},getAuthConnector(t){const e=t||q.state.activeChain,n=lt.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return lt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return lt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const s=n||q.state.activeChain;return lt.allConnectors.filter(r=>r.chain===s).find(r=>r.explorerId===t||r.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=$h(he.state),s=Gs.getSnapshot().themeMode,i=Gs.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:s,themeVariables:i,w3mThemeVariables:zo(i,s)})},getConnectorsByNamespace(t){const e=lt.allConnectors.filter(n=>n.chain===t);return ve.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Fr(t)===Zc.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ve.getConnector({id:t.id,rdns:t.rdns});Jre.handleMobileDeeplinkRedirect(e?.explorerId||t.id,q.state.activeChain),e?ze.push("ConnectingExternal",{connector:e,wallet:t}):ze.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ve.getConnectorsByNamespace(t):ve.mergeMultiChainConnectors(lt.allConnectors)},setFilterByNamespace(t){lt.filterByNamespace=t,lt.connectors=ve.getConnectors(t),Le.setFilterByNamespace(t)},setConnectorId(t,e){t&&(lt.activeConnectorIds={...lt.activeConnectorIds,[e]:t},me.setConnectedConnectorId(e,t))},removeConnectorId(t){lt.activeConnectorIds={...lt.activeConnectorIds,[t]:void 0},me.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return lt.activeConnectorIds[t]},isConnected(t){return t?!!lt.activeConnectorIds[t]:Object.values(lt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){lt.activeConnectorIds={...OM}}},ve=ni(fae),dae=1e3,Bd={checkNamespaceConnectorId(t,e){return ve.getConnectorId(t)===e},isSocialProvider(t){return yt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:s="Connect",onOpen:i,onConnect:r}){return new Promise((c,l)=>{if(t&&ve.setActiveConnector(e),i?.(Re.isMobile()&&t),s){const d=st.subscribeKey("open",h=>{h||(ze.state.view!==s&&ze.replace(s),d(),l(new Error("Modal closed")))})}const f=q.subscribeKey("activeCaipAddress",d=>{d&&(r?.(),n&&st.close(),f(),c(Qs.parseCaipAddress(d)))})})},connectExternal(t){return new Promise((e,n)=>{const s=q.subscribeKey("activeCaipAddress",i=>{i&&(st.close(),s(),e(Qs.parseCaipAddress(i)))});xe.connectExternal(t,t.chain).catch(()=>{s(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:s,onConnect:i}){let r=Me.state.socialWindow,c=Me.state.socialProvider,l=!1,f=null;const d=e||q.state.activeChain,h=q.subscribeKey("activeCaipAddress",g=>{g&&(n&&st.close(),h())});return new Promise((g,m)=>{async function y(v){if(v.data?.resultUri)if(v.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",y,!1);try{const x=ve.getAuthConnector(d);if(x&&!l){r&&(r.close(),Me.setSocialWindow(void 0,d),r=Me.state.socialWindow),l=!0;const C=v.data.resultUri;if(c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:c}}),c){me.setConnectedSocialProvider(c),await xe.connectExternal({id:x.id,type:x.type,socialUri:C},x.chain);const D=q.state.activeCaipAddress;if(!D){m(new Error("Failed to connect"));return}g(Qs.parseCaipAddress(D)),It.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:c,caipNetworkId:q.getActiveCaipNetwork()?.caipNetworkId}})}}}catch{c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:c}}),m(new Error("Failed to connect"))}}else c&&It.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:c}})}async function w(){if(t&&(Me.setSocialProvider(t,d),c=Me.state.socialProvider,It.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:c}})),c==="farcaster"){s?.();const v=st.subscribeKey("open",C=>{!C&&t==="farcaster"&&(m(new Error("Popup closed")),i?.(),v())}),x=ve.getAuthConnector();if(x&&!Me.state.farcasterUrl)try{const{url:C}=await x.provider.getFarcasterUri();Me.setFarcasterUrl(C,d)}catch{m(new Error("Failed to connect to farcaster"))}}else{const v=ve.getAuthConnector();f=Re.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(v&&c){const{uri:x}=await v.provider.getSocialRedirectUri({provider:c});if(f&&x){Me.setSocialWindow(f,d),r=Me.state.socialWindow,f.location.href=x;const C=setInterval(()=>{r?.closed&&!l&&(m(new Error("Popup closed")),clearInterval(C))},1e3);window.addEventListener("message",y,!1)}else f?.close(),m(new Error("Failed to initiate social connection"))}}catch{m(new Error("Failed to initiate social connection")),f?.close()}}}w()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:s}){return new Promise((i,r)=>{if(n?.(),e){const l=st.subscribeKey("open",f=>{f||(ze.state.view!==e&&ze.replace(e),l(),r(new Error("Modal closed")))})}const c=q.subscribeKey("activeCaipAddress",l=>{l&&(s?.(),t&&st.close(),c(),i(Qs.parseCaipAddress(l)))})})},async updateEmail(){const t=me.getConnectedConnectorId(q.state.activeChain),e=ve.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await st.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((s,i)=>{const r=setInterval(()=>{const l=e.provider.getEmail()??"";l!==n&&(st.close(),clearInterval(r),c(),s({email:l}))},dae),c=st.subscribeKey("open",l=>{l||(ze.state.view!=="Connect"&&ze.push("Connect"),clearInterval(r),c(),i(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Fr(t)===Zc.ACCOUNT_TYPES.EOA}};function _M(){const t=q.state.activeCaipNetwork?.chainNamespace||"eip155",e=q.state.activeCaipNetwork?.id||1,n=yt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Fr(t){return q.getAccountData(t)?.preferredAccountType}function jI(t){return q.state.activeCaipNetwork}const Sm={getConnectionStatus(t,e){const n=ve.state.activeConnectorIds[e],s=xe.getConnections(e);return!!n&&t.connectorId===n?"connected":s.some(c=>c.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(s=>{if((e?s.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const r=s.accounts.filter(c=>!n.some(f=>f.toLowerCase()===c.address.toLowerCase()));return{...s,accounts:r}}return s})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(s=>!n.has(s.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!he.state.remoteFeatures?.multiWallet,n=ve.state.activeConnectorIds[t],s=xe.getConnections(t),r=(xe.state.recentConnections.get(t)??[]).filter(l=>ve.getConnectorById(l.connectorId)),c=Sm.excludeExistingConnections([...s.map(l=>l.connectorId),...n?[n]:[]],r);return e?{connections:s,recentConnections:c}:{connections:s.filter(l=>l.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}},$c=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hn=Rt({...$c}),hae={state:hn,subscribeKey(t,e){return ts(hn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Re.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hn.message=$c.message,hn.variant=$c.variant,hn.svg=$c.svg,hn.open=$c.open,hn.autoClose=$c.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:s=$c.autoClose}){hn.open?(hn.open=!1,setTimeout(()=>{hn.message=t,hn.variant=n,hn.svg=e,hn.open=!0,hn.autoClose=s},150)):(hn.message=t,hn.variant=n,hn.svg=e,hn.open=!0,hn.autoClose=s)}},$r=hae,jt=Rt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),pae={state:jt,subscribe(t){return Bn(jt,()=>t(jt))},setLastNetworkInView(t){jt.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");jt.loading=!0;try{const e=await ke.fetchTransactions({account:t,cursor:jt.next,chainId:q.state.activeCaipNetwork?.caipNetworkId}),n=F0.filterSpamTransactions(e.data),s=F0.filterByConnectedChain(n),i=[...jt.transactions,...s];jt.loading=!1,jt.transactions=i,jt.transactionsByYear=F0.groupTransactionsByYearAndMonth(jt.transactionsByYear,s),jt.empty=i.length===0,jt.next=e.next?e.next:void 0}catch{const n=q.state.activeChain;It.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:he.state.projectId,cursor:jt.next,isSmartAccount:Fr(n)===Zc.ACCOUNT_TYPES.SMART_ACCOUNT}}),$r.showError("Failed to fetch transactions"),jt.loading=!1,jt.empty=!0,jt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(s=>{const i=new Date(s.metadata.minedAt).getFullYear(),r=new Date(s.metadata.minedAt).getMonth(),c=n[i]??{},f=(c[r]??[]).filter(d=>d.id!==s.id);n[i]={...c,[r]:[...f,s].sort((d,h)=>new Date(h.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(s=>s.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=q.state.activeCaipNetwork?.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){jt.next=void 0},resetTransactions(){jt.transactions=[],jt.transactionsByYear={},jt.lastNetworkInView=void 0,jt.loading=!1,jt.empty=!1,jt.next=void 0}},F0=ni(pae,"API_ERROR"),ut=Rt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Oc;const gae={state:ut,subscribe(t){return Bn(ut,()=>t(ut))},subscribeKey(t,e){return ts(ut,t,e)},_getClient(){return ut._client},setClient(t){ut._client=al(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);xe.syncStorageConnections(e)},syncStorageConnections(t){const e=me.getConnections(),n=t??Array.from(q.state.chains.keys());for(const s of n){const i=e[s]??[],r=new Map(ut.recentConnections);r.set(s,i),ut.recentConnections=r}},getConnections(t){return t?ut.connections.get(t)??[]:[]},hasAnyConnection(t){const e=xe.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){if(Re.isTelegram()||Re.isSafari()&&Re.isIos()){if(Oc){await Oc,Oc=void 0;return}if(!Re.isPairingExpired(ut?.wcPairingExpiry)){const t=ut.wcUri;ut.wcUri=t;return}Oc=xe._getClient()?.connectWalletConnect?.().catch(()=>{}),xe.state.status="connecting",await Oc,Oc=void 0,ut.wcPairingExpiry=void 0,xe.state.status="connected"}else await xe._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const s=await xe._getClient()?.connectExternal?.(t);return n&&q.setActiveNamespace(e),s},async reconnectExternal(t){await xe._getClient()?.reconnectExternal?.(t);const e=t.chain||q.state.activeChain;e&&ve.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;st.setLoading(!0,q.state.activeChain);const n=ve.getAuthConnector();n&&(Me.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),me.setPreferredAccountTypes(Object.entries(q.state.chains).reduce((s,[i,r])=>{const c=i,l=Fr(c);return l!==void 0&&(s[c]=l),s},{})),await xe.reconnectExternal(n),st.setLoading(!1,q.state.activeChain),It.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:q.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return xe._getClient()?.signMessage(t)},parseUnits(t,e){return xe._getClient()?.parseUnits(t,e)},formatUnits(t,e){return xe._getClient()?.formatUnits(t,e)},async sendTransaction(t){return xe._getClient()?.sendTransaction(t)},async getCapabilities(t){return xe._getClient()?.getCapabilities(t)},async grantPermissions(t){return xe._getClient()?.grantPermissions(t)},async walletGetAssets(t){return xe._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return xe._getClient()?.estimateGas(t)},async writeContract(t){return xe._getClient()?.writeContract(t)},async getEnsAddress(t){return xe._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return xe._getClient()?.getEnsAvatar(t)},checkInstalled(t){return xe._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){ut.wcUri=void 0,ut.wcPairingExpiry=void 0,ut.wcLinking=void 0,ut.recentWallet=void 0,ut.status="disconnected",F0.resetTransactions(),me.deleteWalletConnectDeepLink()},resetUri(){ut.wcUri=void 0,ut.wcPairingExpiry=void 0,Oc=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=xe.state;t&&me.setWalletConnectDeepLink(t),e&&me.setAppKitRecent(e),It.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:ze.state.data?.wallet?.name||"Unknown",caipNetworkId:q.getActiveCaipNetwork()?.caipNetworkId}})},setWcBasic(t){ut.wcBasic=t},setUri(t){ut.wcUri=t,ut.wcPairingExpiry=Re.getPairingExpiry()},setWcLinking(t){ut.wcLinking=t},setWcError(t){ut.wcError=t,ut.buffering=!1},setRecentWallet(t){ut.recentWallet=t},setBuffering(t){ut.buffering=t},setStatus(t){ut.status=t},setIsSwitchingConnection(t){ut.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await xe._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(s){throw new Zu("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(ut.connections);n.set(e,t),ut.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const n=Me.state.user?.accounts?.find(i=>i.type==="smartAccount"),s=n&&n.address.toLowerCase()===t.toLowerCase()&&Bd.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await xe.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const s=ve.getConnectorById(t.connectorId),i=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);if(i)i&&n&&await xe.handleAuthAccountSwitch({address:n,namespace:e});else return(await xe.connectExternal({id:s.id,type:s.type,provider:s.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:s}){const i=ve.getConnectorById(t.connectorId),r=t.auth?.name?.toLowerCase(),c=t.connectorId===pe.CONNECTOR_ID.AUTH,l=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!i)throw new Error(`No connector found for connection: ${t.connectorId}`);let f;if(c)if(r&&Bd.isSocialProvider(r)){const{address:d}=await Bd.connectSocial({social:r,closeModalOnConnect:s,onOpenFarcaster(){st.open({view:"ConnectingFarcaster"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else{const{address:d}=await Bd.connectEmail({closeModalOnConnect:s,onOpen(){st.open({view:"EmailLogin"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else if(l){const{address:d}=await Bd.connectWalletConnect({walletConnect:!0,connector:i,closeModalOnConnect:s,onOpen(h){st.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ze.replace("ProfileWallets")}});f=d}else{const d=await xe.connectExternal({id:i.id,type:i.type,provider:i.provider,chain:e},e);d&&(f=d.address)}return c&&n&&await xe.handleAuthAccountSwitch({address:n,namespace:e}),f},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:s,onChange:i}){let r;const c=Me.getCaipAddress(n);if(c){const{address:f}=Qs.parseCaipAddress(c);r=f}const l=Sm.getConnectionStatus(t,n);switch(l){case"connected":case"active":{const f=await xe.handleActiveConnection({connection:t,namespace:n,address:e});if(r&&f){const d=f.toLowerCase()!==r.toLowerCase();i?.({address:f,namespace:n,hasSwitchedAccount:d,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const f=await xe.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:s});f&&i?.({address:f,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${l}`)}}},xe=ni(gae),Su=Rt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Aa={state:Su,subscribe(t){return Bn(Su,()=>t(Su))},subscribeOpen(t){return ts(Su,"open",t)},set(t){Object.assign(Su,{...Su,...t})}},mae={async getTokenList(){const t=q.state.activeCaipNetwork;return(await ke.fetchSwapTokens({chainId:t?.caipNetworkId}))?.tokens?.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=q.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await xe?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await ke.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:s}){const i=await ke.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(i?.allowance&&n&&s){const r=xe.parseUnits(n,s)||0;return BigInt(i.allowance)>=r}return!1},async getMyTokensWithBalance(t){const e=await wE.getMyTokensWithBalance(t);return Me.setTokenBalance(e,q.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:_M(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},bt=Rt({tokenBalances:[],loading:!1}),yae={state:bt,subscribe(t){return Bn(bt,()=>t(bt))},subscribeKey(t,e){return ts(bt,t,e)},setToken(t){t&&(bt.token=al(t))},setTokenAmount(t){bt.sendTokenAmount=t},setReceiverAddress(t){bt.receiverAddress=t},setReceiverProfileImageUrl(t){bt.receiverProfileImageUrl=t},setReceiverProfileName(t){bt.receiverProfileName=t},setNetworkBalanceInUsd(t){bt.networkBalanceInUSD=t},setLoading(t){bt.loading=t},async sendToken(){try{switch(ht.setLoading(!0),q.state.activeCaipNetwork?.chainNamespace){case"eip155":await ht.sendEvmToken();return;case"solana":await ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ht.setLoading(!1)}},async sendEvmToken(){const t=q.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Fr(t);if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ht.state.token)throw new Error("A token is required");ht.state.token?.address?(It.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.address,amount:ht.state.sendTokenAmount,network:q.state.activeCaipNetwork?.caipNetworkId||""}}),await ht.sendERC20Token({receiverAddress:ht.state.receiverAddress,tokenAddress:ht.state.token.address,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals})):(It.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.symbol||"",amount:ht.state.sendTokenAmount,network:q.state.activeCaipNetwork?.caipNetworkId||""}}),await ht.sendNativeToken({receiverAddress:ht.state.receiverAddress,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals}))},async fetchTokenBalance(t){bt.loading=!0;const e=q.state.activeCaipNetwork?.caipNetworkId,n=q.state.activeCaipNetwork?.chainNamespace,s=q.state.activeCaipAddress,i=s?Re.getPlainAddress(s):void 0;if(bt.lastRetry&&!Re.isAllowedRetry(bt.lastRetry,30*yt.ONE_SEC_MS))return bt.loading=!1,[];try{if(i&&e&&n){const r=await wE.getMyTokensWithBalance();return bt.tokenBalances=r,bt.lastRetry=void 0,r}}catch(r){bt.lastRetry=Date.now(),t?.(r),$r.showError("Token Balance Unavailable")}finally{bt.loading=!1}return[]},fetchNetworkBalance(){if(bt.tokenBalances.length===0)return;const t=mae.mapBalancesToSwapTokens(bt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===_M());e&&(bt.networkBalanceInUSD=e?Ire.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){ze.pushTransactionStack({});const e=t.receiverAddress,n=Me.state.address,s=xe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await xe.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:s??BigInt(0)}),It.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Fr("eip155")===Zc.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token?.symbol||"",amount:t.sendTokenAmount,network:q.state.activeCaipNetwork?.caipNetworkId||""}}),xe._getClient()?.updateBalance("eip155"),ht.resetSend()},async sendERC20Token(t){ze.pushTransactionStack({onSuccess(){ze.replace("Account")}});const e=xe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Me.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Re.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await xe.writeContract({fromAddress:Me.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Mre.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),ht.resetSend()}},async sendSolanaToken(){if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");ze.pushTransactionStack({onSuccess(){ze.replace("Account")}}),await xe.sendTransaction({chainNamespace:"solana",to:ht.state.receiverAddress,value:ht.state.sendTokenAmount}),xe._getClient()?.updateBalance("solana"),ht.resetSend()},resetSend(){bt.token=void 0,bt.sendTokenAmount=void 0,bt.receiverAddress=void 0,bt.receiverProfileImageUrl=void 0,bt.receiverProfileName=void 0,bt.loading=!1,bt.tokenBalances=[]}},ht=ni(yae),Hv={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},S0={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Se=Rt({chains:qre(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),wae={state:Se,subscribe(t){return Bn(Se,()=>{t(Se)})},subscribeKey(t,e){return ts(Se,t,e)},subscribeChainProp(t,e,n){let s;return Bn(Se.chains,()=>{const i=n||Se.activeChain;if(i){const r=Se.chains.get(i)?.[t];s!==r&&(s=r,e(r))}})},initialize(t,e,n){const{chainId:s,namespace:i}=me.getActiveNetworkProps(),r=e?.find(h=>h.id.toString()===s?.toString()),l=t.find(h=>h?.namespace===i)||t?.[0],f=t.map(h=>h.namespace).filter(h=>h!==void 0),d=he.state.enableEmbedded?new Set([...f]):new Set([...e?.map(h=>h.chainNamespace)??[]]);(t?.length===0||!l)&&(Se.noAdapters=!0),Se.noAdapters||(Se.activeChain=l?.namespace,Se.activeCaipNetwork=r,q.setChainNetworkData(l?.namespace,{caipNetwork:r}),Se.activeChain&&Aa.set({activeChain:l?.namespace})),d.forEach(h=>{const g=e?.filter(w=>w.chainNamespace===h),m=me.getPreferredAccountTypes()||{},y={...he.state.defaultAccountTypes,...m};q.state.chains.set(h,{namespace:h,networkState:Rt({...S0,caipNetwork:g?.[0]}),accountState:Rt({...Hv,preferredAccountType:y[h]}),caipNetworks:g??[],...n}),q.setRequestedCaipNetworks(g??[],h)})},removeAdapter(t){if(Se.activeChain===t){const e=Array.from(Se.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&q.setActiveCaipNetwork(n)}}Se.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},s){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Se.chains.set(t.namespace,{namespace:t.namespace,networkState:{...S0,caipNetwork:s[0]},accountState:Hv,caipNetworks:s,connectionControllerClient:n,networkControllerClient:e}),q.setRequestedCaipNetworks(s?.filter(i=>i.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Se.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(s=>s.id===t.id)||n.push(t),Se.chains.set(t.chainNamespace,{...e,caipNetworks:n}),q.setRequestedCaipNetworks(n,t.chainNamespace),ve.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=Se.chains.get(t);if(n){const s=Se.activeCaipNetwork?.id===e,i=[...n.caipNetworks?.filter(r=>r.id!==e)||[]];s&&n?.caipNetworks?.[0]&&q.setActiveCaipNetwork(n.caipNetworks[0]),Se.chains.set(t,{...n,caipNetworks:i}),q.setRequestedCaipNetworks(i||[],t),i.length===0&&ve.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Se.chains.get(t);n&&(n.networkState={...n.networkState||S0,...e},Se.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const s=Se.chains.get(t);if(s){const i={...s.accountState||Hv,...e};Se.chains.set(t,{...s,accountState:i}),(Se.chains.size===1||Se.activeChain===t)&&(e.caipAddress&&(Se.activeCaipAddress=e.caipAddress),Me.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const n=Se.chains.get(t);if(n){const s={...n.networkState||S0,...e};Se.chains.set(t,{...n,networkState:s})}},setAccountProp(t,e,n,s=!0){q.setChainAccountData(n,{[t]:e},s)},setActiveNamespace(t){Se.activeChain=t;const e=t?Se.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(Se.activeCaipAddress=e?.accountState?.caipAddress,Se.activeCaipNetwork=n,q.setChainNetworkData(t,{caipNetwork:n}),me.setActiveCaipNetworkId(n?.caipNetworkId),Aa.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Se.activeChain!==t.chainNamespace&&q.setIsSwitchingNamespace(!0);const e=Se.chains.get(t.chainNamespace);Se.activeChain=t.chainNamespace,Se.activeCaipNetwork=t,q.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Se.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Se.activeCaipAddress=void 0,q.setAccountProp("caipAddress",Se.activeCaipAddress,t.chainNamespace),e&&Me.replaceState(e.accountState),ht.resetSend(),Aa.set({activeChain:Se.activeChain,selectedNetworkId:Se.activeCaipNetwork?.caipNetworkId}),me.setActiveCaipNetworkId(t.caipNetworkId),!q.checkIfSupportedNetwork(t.chainNamespace)&&he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&!xe.state.wcBasic&&q.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Se.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==q.state.activeChain,n=q.getNetworkData(t)?.caipNetwork,s=q.getCaipNetworkByNamespace(t,n?.id);e&&s&&await q.switchActiveNetwork(s)},async switchActiveNetwork(t){const e=q.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const s=!q.state.chains.get(e)?.caipNetworks?.some(r=>r.id===Se.activeCaipNetwork?.id),i=q.getNetworkControllerClient(t.chainNamespace);if(i){try{await i.switchCaipNetwork(t),s&&st.close()}catch{ze.goBack()}It.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Se.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Se.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){const n=Se.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Se.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:s=[]}=e?.networkState||{};return Re.sortRequestedNetworks(n,s).filter(c=>c?.id)},getAllRequestedCaipNetworks(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=q.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){q.setAdapterNetworkState(e,{requestedCaipNetworks:t});const s=q.getAllRequestedCaipNetworks().map(r=>r.chainNamespace),i=Array.from(new Set(s));ve.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=q.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?Se.chains.get(t)?.networkState?.caipNetwork:Se.activeCaipNetwork},getActiveCaipAddress(){return Se.activeCaipAddress},getApprovedCaipNetworkIds(t){return Se.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await q.getNetworkControllerClient()?.getApprovedCaipNetworksData();q.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Se.activeCaipNetwork?.caipNetworkId,s=q.getRequestedCaipNetworks(t);return s.length?s?.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){return Se.activeChain?q.getRequestedCaipNetworks(Se.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){q.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=SM.caipNetworkIdToNumber(Se.activeCaipNetwork?.caipNetworkId),e=Se.activeChain;return!e||!t?!1:!!q.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){st.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Se.activeCaipNetwork;return!!(t?.chainNamespace&&yt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){q.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=q.state.chains.get(e)?.accountState?.preferredAccountType,s=he.state.defaultAccountTypes[e];Se.activeCaipAddress=void 0,q.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:s||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ve.removeConnectorId(e)},setIsSwitchingNamespace(t){Se.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Se.chains.forEach(n=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?Se.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Se.activeChain;if(e)return q.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Se.activeChain;if(e)return q.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=q.state.chains.get(t),s=n?.caipNetworks?.find(i=>i.id===e);return s||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=ve.state.filterByNamespace;return(t?[Se.chains.get(t)]:Array.from(Se.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?q.getRequestedCaipNetworks(t):q.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Se.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Se.lastConnectedSIWECaipNetwork}},q=ni(wae),vae={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},MM=Re.getBlockchainApiUrl(),Cs=Rt({clientId:null,api:new Ap({baseUrl:MM,clientId:null}),supportedChains:{http:[],ws:[]}}),ke={state:Cs,async get(t){const{st:e,sv:n}=ke.getSdkProperties(),s=he.state.projectId,i={...t.params||{},st:e,sv:n,projectId:s};return Cs.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=he.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Cs.supportedChains.http.length||await ke.getSupportedNetworks()}catch{return!1}return Cs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ke.get({path:"v1/supported-chains"});return Cs.supportedChains=t,t}catch{return Cs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ke.isNetworkSupported(e))return{avatar:"",name:""};const s=me.getIdentityFromCacheForAddress(t);if(s)return s;const i=await ke.get({path:`/v1/identity/${t}`,params:{sender:q.state.activeCaipAddress?Re.getPlainAddress(q.state.activeCaipAddress):void 0}});return me.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,signal:n,cache:s,chainId:i}){if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const c=me.getTransactionsCacheForAddress({address:t,chainId:i});if(c)return c;const l=await ke.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:i},signal:n,cache:s});return me.updateTransactionsCache({address:t,chainId:i,timestamp:Date.now(),transactions:l}),l},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:s,gasPrice:i}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:s,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const n=me.getTokenPriceCacheForAddresses(t);if(n)return n;const s=await Cs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:he.state.projectId},headers:{"Content-Type":"application/json"}});return me.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:s}),s},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=ke.getSdkProperties();if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return ke.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:s,disableEstimate:i}){if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Cs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:yt.CONVERT_SLIPPAGE_TOLERANCE},projectId:he.state.projectId,from:e,to:n,userAddress:s,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:s,sv:i}=ke.getSdkProperties();if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return ke.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:s,sv:i}})},async getBalance(t,e,n){const{st:s,sv:i}=ke.getSdkProperties();if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))return $r.showError("Token Balance Unavailable"),{balances:[]};const c=`${e}:${t}`,l=me.getBalanceCacheForCaipAddress(c);if(l)return l;const f=await ke.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:s,sv:i}});return me.updateBalanceCache({caipAddress:c,balance:f,timestamp:Date.now()}),f},async lookupEnsName(t){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/reverse/${t}`,params:{sender:Me.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:s}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?Cs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:s},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:s,paymentAmount:i}){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?(await Cs.api.post({path:"/v1/generators/onrampurl",params:{projectId:he.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:s,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ke.get({path:"/v1/onramp/options"})}catch{return vae}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:s}){try{return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?await Cs.api.post({path:"/v1/onramp/quote",params:{projectId:he.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:s}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?ke.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await ke.isNetworkSupported(q.state.activeCaipNetwork?.caipNetworkId)?Cs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:he.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Cs.clientId=t,Cs.api=new Ap({baseUrl:MM,clientId:t})}};function bae(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function zI(t){return bae(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const RM="2.38.2";let Fv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${RM}`};class ti extends Error{constructor(e,n={}){const s=n.cause instanceof ti?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof ti&&n.cause.docsPath||n.docsPath,r=Fv.getDocsUrl?.({...n,docsPath:i}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...s?[`Details: ${s}`]:[],...Fv.version?[`Version: ${Fv.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=RM}walk(e){return PM(this,e)}}function PM(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?PM(t.cause,e):e?null:t}class $M extends ti{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function gE(t,{dir:e,size:n=32}={}){return typeof t=="string"?xae(t,{dir:e,size:n}):Eae(t,{dir:e,size:n})}function xae(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new $M({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Eae(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new $M({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=e==="right";s[r?i:n-i-1]=t[r?i:t.length-i-1]}return s}class Sae extends ti{constructor({max:e,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Cae extends ti{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function UM(t,{size:e}){if(zI(t)>e)throw new Cae({givenSize:zI(t),maxSize:e})}const Aae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function HI(t,e={}){return typeof t=="number"||typeof t=="bigint"?Tae(t,e):typeof t=="string"?kM(t,e):typeof t=="boolean"?Nae(t,e):LM(t,e)}function Nae(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(UM(n,{size:e.size}),gE(n,{size:e.size})):n}function LM(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Aae[t[i]];const s=`0x${n}`;return typeof e.size=="number"?(UM(s,{size:e.size}),gE(s,{dir:"right",size:e.size})):s}function Tae(t,e={}){const{signed:n,size:s}=e,i=BigInt(t);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<c){const f=typeof t=="bigint"?"n":"";throw new Sae({max:r?`${r}${f}`:void 0,min:`${c}${f}`,signed:n,size:s,value:`${t}${f}`})}const l=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?gE(l,{size:s}):l}const Iae=new TextEncoder;function kM(t,e={}){const n=Iae.encode(t);return LM(n,e)}class Dae extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}const Jc=(t,e,n)=>JSON.stringify(t,(s,i)=>typeof i=="bigint"?i.toString():i,n);function Oae(t,e){let n=t.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(e,"0");let[i,r]=[n.slice(0,n.length-e),n.slice(n.length-e)];return r=r.replace(/(0+)$/,""),`${s?"-":""}${i||"0"}${r?`.${r}`:""}`}const mE=t=>t;class fh extends ti{constructor({body:e,cause:n,details:s,headers:i,status:r,url:c}){super("HTTP request failed.",{cause:n,details:s,metaMessages:[r&&`Status: ${r}`,`URL: ${mE(c)}`,e&&`Request body: ${Jc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=r,this.url=c}}class BM extends ti{constructor({body:e,error:n,url:s}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${mE(s)}`,`Request body: ${Jc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class FI extends ti{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${mE(n)}`,`Request body: ${Jc(e)}`],name:"TimeoutError"})}}const _ae=-1;class $s extends ti{constructor(e,{code:n,docsPath:s,metaMessages:i,name:r,shortMessage:c}){super(c,{cause:e,docsPath:s,metaMessages:i||e?.metaMessages,name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||e.name,this.code=e instanceof BM?e.code:n??_ae}}class si extends $s{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Uh extends $s{constructor(e){super(e,{code:Uh.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Lh extends $s{constructor(e){super(e,{code:Lh.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class kh extends $s{constructor(e,{method:n}={}){super(e,{code:kh.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Bh extends $s{constructor(e){super(e,{code:Bh.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ju extends $s{constructor(e){super(e,{code:Ju.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ju,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class jh extends $s{constructor(e){super(e,{code:jh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class zh extends $s{constructor(e){super(e,{code:zh.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(zh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Hh extends $s{constructor(e){super(e,{code:Hh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ef extends $s{constructor(e){super(e,{code:ef.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ef,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Gc extends $s{constructor(e,{method:n}={}){super(e,{code:Gc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Gc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class tf extends $s{constructor(e){super(e,{code:tf.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(tf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Fh extends $s{constructor(e){super(e,{code:Fh.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class el extends si{constructor(e){super(e,{code:el.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Vh extends si{constructor(e){super(e,{code:Vh.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class qh extends si{constructor(e,{method:n}={}){super(e,{code:qh.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Wh extends si{constructor(e){super(e,{code:Wh.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Wh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Gh extends si{constructor(e){super(e,{code:Gh.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Gh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Kh extends si{constructor(e){super(e,{code:Kh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Yh extends si{constructor(e){super(e,{code:Yh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Xh extends si{constructor(e){super(e,{code:Xh.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Qh extends si{constructor(e){super(e,{code:Qh.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Zh extends si{constructor(e){super(e,{code:Zh.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Zh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Jh extends si{constructor(e){super(e,{code:Jh.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ep extends si{constructor(e){super(e,{code:ep.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class tp extends si{constructor(e){super(e,{code:tp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Mae extends $s{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class yE extends ti{constructor({cause:e,message:n}={}){const s=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${s?`with reason: ${s}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(yE,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(yE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function Rae(){let t=()=>{},e=()=>{};return{promise:new Promise((s,i)=>{t=s,e=i}),resolve:t,reject:e}}const Vv=new Map;function Pae({fn:t,id:e,shouldSplitBatch:n,wait:s=0,sort:i}){const r=async()=>{const h=f();c();const g=h.map(({args:m})=>m);g.length!==0&&t(g).then(m=>{i&&Array.isArray(m)&&m.sort(i);for(let y=0;y<h.length;y++){const{resolve:w}=h[y];w?.([m[y],m])}}).catch(m=>{for(let y=0;y<h.length;y++){const{reject:w}=h[y];w?.(m)}})},c=()=>Vv.delete(e),l=()=>f().map(({args:h})=>h),f=()=>Vv.get(e)||[],d=h=>Vv.set(e,[...f(),h]);return{flush:c,async schedule(h){const{promise:g,resolve:m,reject:y}=Rae();return n?.([...l(),h])&&r(),f().length>0?(d({args:h,resolve:m,reject:y}),g):(d({args:h,resolve:m,reject:y}),setTimeout(r,s),g)}}}async function jM(t){return new Promise(e=>setTimeout(e,t))}function $ae(t,{delay:e=100,retryCount:n=2,shouldRetry:s=()=>!0}={}){return new Promise((i,r)=>{const c=async({count:l=0}={})=>{const f=async({error:d})=>{const h=typeof e=="function"?e({count:l,error:d}):e;h&&await jM(h),c({count:l+1})};try{const d=await t();i(d)}catch(d){if(l<n&&await s({count:l,error:d}))return f({error:d});r(d)}};c()})}const T2=256;let C0=T2,A0;function Uae(t=11){if(!A0||C0+t>T2*2){A0="",C0=0;for(let e=0;e<T2;e++)A0+=(256+Math.random()*256|0).toString(16).substring(1)}return A0.substring(C0,C0+++t)}const N0=new Dae(8192);function Lae(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(N0.get(n))return N0.get(n);const s=t().finally(()=>N0.delete(n));return N0.set(n,s),s}function kae(t,e={}){return async(n,s={})=>{const{dedupe:i=!1,methods:r,retryDelay:c=150,retryCount:l=3,uid:f}={...e,...s},{method:d}=n;if(r?.exclude?.includes(d))throw new Gc(new Error("method not supported"),{method:d});if(r?.include&&!r.include.includes(d))throw new Gc(new Error("method not supported"),{method:d});const h=i?kM(`${f}.${Jc(n)}`):void 0;return Lae(()=>$ae(async()=>{try{return await t(n)}catch(g){const m=g;switch(m.code){case Uh.code:throw new Uh(m);case Lh.code:throw new Lh(m);case kh.code:throw new kh(m,{method:n.method});case Bh.code:throw new Bh(m);case Ju.code:throw new Ju(m);case jh.code:throw new jh(m);case zh.code:throw new zh(m);case Hh.code:throw new Hh(m);case ef.code:throw new ef(m);case Gc.code:throw new Gc(m,{method:n.method});case tf.code:throw new tf(m);case Fh.code:throw new Fh(m);case el.code:throw new el(m);case Vh.code:throw new Vh(m);case qh.code:throw new qh(m);case Wh.code:throw new Wh(m);case Gh.code:throw new Gh(m);case Kh.code:throw new Kh(m);case Yh.code:throw new Yh(m);case Xh.code:throw new Xh(m);case Qh.code:throw new Qh(m);case Zh.code:throw new Zh(m);case Jh.code:throw new Jh(m);case ep.code:throw new ep(m);case tp.code:throw new tp(m);case 5e3:throw new el(m);default:throw g instanceof ti?g:new Mae(m)}}},{delay:({count:g,error:m})=>{if(m&&m instanceof fh){const y=m?.headers?.get("Retry-After");if(y?.match(/\d/))return Number.parseInt(y,10)*1e3}return~~(1<<g)*c},retryCount:l,shouldRetry:({error:g})=>Bae(g)}),{enabled:i,id:h})}}function Bae(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===tf.code||t.code===Ju.code:t instanceof fh&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function jae(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,r)=>{(async()=>{let c;try{const l=new AbortController;n>0&&(c=setTimeout(()=>{s&&l.abort()},n)),i(await t({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&r(e),r(l)}finally{clearTimeout(c)}})()})}function zae(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const VI=zae();function Hae(t,e={}){return{async request(n){const{body:s,fetchFn:i=e.fetchFn??fetch,onRequest:r=e.onRequest,onResponse:c=e.onResponse,timeout:l=e.timeout??1e4}=n,f={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:d,method:h,signal:g}=f;try{const m=await jae(async({signal:w})=>{const v={...f,body:Array.isArray(s)?Jc(s.map(N=>({jsonrpc:"2.0",id:N.id??VI.take(),...N}))):Jc({jsonrpc:"2.0",id:s.id??VI.take(),...s}),headers:{"Content-Type":"application/json",...d},method:h||"POST",signal:g||(l>0?w:null)},x=new Request(t,v),C=await r?.(x,v)??{...v,url:t};return await i(C.url??t,C)},{errorInstance:new FI({body:s,url:t}),timeout:l,signal:!0});c&&await c(m);let y;if(m.headers.get("Content-Type")?.startsWith("application/json"))y=await m.json();else{y=await m.text();try{y=JSON.parse(y||"{}")}catch(w){if(m.ok)throw w;y={error:y}}}if(!m.ok)throw new fh({body:s,details:Jc(y.error)||m.statusText,headers:m.headers,status:m.status,url:t});return y}catch(m){throw m instanceof fh||m instanceof FI?m:new fh({body:s,cause:m,url:t})}}}}function zM({key:t,methods:e,name:n,request:s,retryCount:i=3,retryDelay:r=150,timeout:c,type:l},f){const d=Uae();return{config:{key:t,methods:e,name:n,request:s,retryCount:i,retryDelay:r,timeout:c,type:l},request:kae(s,{methods:e,retryCount:i,retryDelay:r,uid:d}),value:f}}function qI(t,e={}){const{key:n="fallback",name:s="Fallback",rank:i=!1,shouldThrow:r=Fae,retryCount:c,retryDelay:l}=e;return(({chain:f,pollingInterval:d=4e3,timeout:h,...g})=>{let m=t,y=()=>{};const w=zM({key:n,name:s,async request({method:v,params:x}){let C;const D=async(N=0)=>{const I=m[N]({...g,chain:f,retryCount:0,timeout:h});try{const S=await I.request({method:v,params:x});return y({method:v,params:x,response:S,transport:I,status:"success"}),S}catch(S){if(y({error:S,method:v,params:x,transport:I,status:"error"}),r(S)||N===m.length-1||(C??=m.slice(N+1).some(A=>{const{include:O,exclude:T}=A({chain:f}).config.methods||{};return O?O.includes(v):T?!T.includes(v):!0}),!C))throw S;return D(N+1)}};return D()},retryCount:c,retryDelay:l,type:"fallback"},{onResponse:v=>y=v,transports:m.map(v=>v({chain:f,retryCount:0}))});if(i){const v=typeof i=="object"?i:{};Vae({chain:f,interval:v.interval??d,onTransports:x=>m=x,ping:v.ping,sampleCount:v.sampleCount,timeout:v.timeout,transports:m,weights:v.weights})}return w})}function Fae(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ef.code||t.code===el.code||yE.nodeMessage.test(t.message)||t.code===5e3))}function Vae({chain:t,interval:e=4e3,onTransports:n,ping:s,sampleCount:i=10,timeout:r=1e3,transports:c,weights:l={}}){const{stability:f=.7,latency:d=.3}=l,h=[],g=async()=>{const m=await Promise.all(c.map(async v=>{const x=v({chain:t,retryCount:0,timeout:r}),C=Date.now();let D,N;try{await(s?s({transport:x}):x.request({method:"net_listening"})),N=1}catch{N=0}finally{D=Date.now()}return{latency:D-C,success:N}}));h.push(m),h.length>i&&h.shift();const y=Math.max(...h.map(v=>Math.max(...v.map(({latency:x})=>x)))),w=c.map((v,x)=>{const C=h.map(A=>A[x].latency),N=1-C.reduce((A,O)=>A+O,0)/C.length/y,I=h.map(A=>A[x].success),S=I.reduce((A,O)=>A+O,0)/I.length;return S===0?[0,x]:[d*N+f*S,x]}).sort((v,x)=>x[0]-v[0]);n(w.map(([,v])=>c[v])),await jM(e),g()};g()}class qae extends ti{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function T0(t,e={}){const{batch:n,fetchFn:s,fetchOptions:i,key:r="http",methods:c,name:l="HTTP JSON-RPC",onFetchRequest:f,onFetchResponse:d,retryDelay:h,raw:g}=e;return({chain:m,retryCount:y,timeout:w})=>{const{batchSize:v=1e3,wait:x=0}=typeof n=="object"?n:{},C=e.retryCount??y,D=w??e.timeout??1e4,N=t||m?.rpcUrls.default.http[0];if(!N)throw new qae;const I=Hae(N,{fetchFn:s,fetchOptions:i,onRequest:f,onResponse:d,timeout:D});return zM({key:r,methods:c,name:l,async request({method:S,params:A}){const O={method:S,params:A},{schedule:T}=Pae({id:N,wait:x,shouldSplitBatch(L){return L.length>v},fn:L=>I.request({body:L}),sort:(L,F)=>L.id-F.id}),_=async L=>n?T(L):[await I.request({body:L})],[{error:R,result:U}]=await _(O);if(g)return{error:R,result:U};if(R)throw new BM({body:O,error:R,url:N});return U},retryCount:C,retryDelay:h,timeout:D,type:"http"},{fetchOptions:i,url:N})}}const qv={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Oae(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],s=parseInt(n,10);return isNaN(s)?"0x0":`0x${s.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},wE={async getMyTokensWithBalance(t){const e=Me.state.address,n=q.state.activeCaipNetwork,s=ve.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const i=`${n.caipNetworkId}:${e}`,r=me.getBalanceCacheForCaipAddress(i);if(r)return r.balances;if(n.chainNamespace===pe.CHAIN.EVM&&s){const l=await this.getEIP155Balances(e,n);if(l)return this.filterLowQualityTokens(l)}const c=await ke.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(c.balances)},async getEIP155Balances(t,e){try{const n=qv.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await xe.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const i=await xe.walletGetAssets({account:t,chainFilter:[n]});if(!qv.isWalletGetAssetsResponse(i))return null;const c=(i[n]||[]).map(l=>qv.createBalance(l,e.caipNetworkId));return me.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Tr=Rt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Wae={state:Tr,replaceState(t){t&&Object.assign(Tr,al(t))},subscribe(t){return q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let s;return q.subscribeChainProp("accountState",i=>{if(i){const r=i[t];s!==r&&(s=r,e(r))}},n)},setStatus(t,e){q.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return q.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const n=t?Re.getPlainAddress(t):void 0;e===q.state.activeChain&&(q.state.activeCaipAddress=t),q.setAccountProp("caipAddress",t,e),q.setAccountProp("address",n,e)},setBalance(t,e,n){q.setAccountProp("balance",t,n),q.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){q.setAccountProp("profileName",t,e)},setProfileImage(t,e){q.setAccountProp("profileImage",t,e)},setUser(t,e){q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){q.setAccountProp("currentTab",t,q.state.activeChain)},setTokenBalance(t,e){t&&q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){q.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){if(!n)return;const s=q.state.chains.get(n)?.accountState?.addressLabels||new Map;s.set(t,e),q.setAccountProp("addressLabels",s,n)},removeAddressLabel(t,e){if(!e)return;const n=q.state.chains.get(e)?.accountState?.addressLabels||new Map;n.delete(t),q.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){q.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){q.setAccountProp("socialWindow",t?al(t):void 0,e)},setFarcasterUrl(t,e){q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Tr.balanceLoading=!0;const e=q.state.activeCaipNetwork?.caipNetworkId,n=q.state.activeCaipNetwork?.chainNamespace,s=q.state.activeCaipAddress,i=s?Re.getPlainAddress(s):void 0;if(Tr.lastRetry&&!Re.isAllowedRetry(Tr.lastRetry,30*yt.ONE_SEC_MS))return Tr.balanceLoading=!1,[];try{if(i&&e&&n){const r=await wE.getMyTokensWithBalance();return Me.setTokenBalance(r,n),Tr.lastRetry=void 0,Tr.balanceLoading=!1,r}}catch(r){Tr.lastRetry=Date.now(),t?.(r),$r.showError("Token Balance Unavailable")}finally{Tr.balanceLoading=!1}return[]},resetAccount(t){q.resetAccount(t)}},Me=ni(Wae),Gae={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=q.state.activeCaipNetwork,s=ze.state.data;if(t.id===n?.id)return;const r=Me.getCaipAddress(q.state.activeChain),c=t.chainNamespace!==q.state.activeChain,l=Me.getCaipAddress(t.chainNamespace),d=ve.getConnectorId(q.state.activeChain)===pe.CONNECTOR_ID.AUTH,h=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===t.chainNamespace);e||d&&h?ze.push("SwitchNetwork",{...s,network:t}):r&&c&&!l?ze.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ze.push("SwitchNetwork",{...s,network:t})}},As=Rt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Kae={state:As,subscribe(t){return Bn(As,()=>t(As))},subscribeKey(t,e){return ts(As,t,e)},async open(t){const e=t?.namespace,n=q.state.activeChain,s=e&&e!==n,i=q.getAccountData(t?.namespace)?.caipAddress;if(xe.state.wcBasic?Le.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Le.prefetch(),ve.setFilterByNamespace(t?.namespace),st.setLoading(!0,e),e&&s){const r=q.getNetworkData(e)?.caipNetwork||q.getRequestedCaipNetworks(e)[0];r&&Gae.onSwitchNetwork({network:r,ignoreSwitchConfirmation:!0})}else{const r=q.state.noAdapters;he.state.manualWCControl||r&&!i?Re.isMobile()?ze.reset("AllWallets"):ze.reset("ConnectingWalletConnectBasic"):t?.view?ze.reset(t.view,t.data):i?ze.reset("Account"):ze.reset("Connect")}As.open=!0,Aa.set({open:!0}),It.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=he.state.enableEmbedded,e=!!q.state.activeCaipAddress;As.open&&It.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),As.open=!1,ze.reset("Connect"),st.clearLoading(),t?e?ze.replace("Account"):ze.push("Connect"):Aa.set({open:!1}),xe.resetUri()},setLoading(t,e){e&&As.loadingNamespaceMap.set(e,t),As.loading=t,Aa.set({loading:t})},clearLoading(){As.loadingNamespaceMap.clear(),As.loading=!1,Aa.set({loading:!1})},shake(){As.shake||(As.shake=!0,setTimeout(()=>{As.shake=!1},500))}},st=ni(Kae),dh={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},I2={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Yae={providers:IM,selectedProvider:null,error:null,purchaseCurrency:dh,paymentCurrency:I2,purchaseCurrencies:[dh],paymentCurrencies:[],quotesLoading:!1},it=Rt(Yae),Xae={state:it,subscribe(t){return Bn(it,()=>t(it))},subscribeKey(t,e){return ts(it,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=q.state.activeChain,n=e===pe.CHAIN.SOLANA?"SOL":"USDC",s=e?q.state.chains.get(e)?.accountState?.address??"":"",i=new URL(t.url);i.searchParams.append("publicKey",Wre),i.searchParams.append("destinationCurrencyCode",n),i.searchParams.append("walletAddress",s),i.searchParams.append("externalCustomerId",he.state.projectId),it.selectedProvider={...t,url:i.toString()}}else it.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=IM.filter(s=>e.includes(s.name));it.providers=n}else it.providers=[]},setPurchaseCurrency(t){it.purchaseCurrency=t},setPaymentCurrency(t){it.paymentCurrency=t},setPurchaseAmount(t){D2.state.purchaseAmount=t},setPaymentAmount(t){D2.state.paymentAmount=t},async getAvailableCurrencies(){const t=await ke.getOnrampOptions();it.purchaseCurrencies=t.purchaseCurrencies,it.paymentCurrencies=t.paymentCurrencies,it.paymentCurrency=t.paymentCurrencies[0]||I2,it.purchaseCurrency=t.purchaseCurrencies[0]||dh,await Le.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Le.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){it.quotesLoading=!0;try{const t=await ke.getOnrampQuote({purchaseCurrency:it.purchaseCurrency,paymentCurrency:it.paymentCurrency,amount:it.paymentAmount?.toString()||"0",network:it.purchaseCurrency?.symbol});return it.quotesLoading=!1,it.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return it.error=t.message,it.quotesLoading=!1,null}finally{it.quotesLoading=!1}},resetState(){it.selectedProvider=null,it.error=null,it.purchaseCurrency=dh,it.paymentCurrency=I2,it.purchaseCurrencies=[dh],it.paymentCurrencies=[],it.paymentAmount=void 0,it.purchaseAmount=void 0,it.quotesLoading=!1}},D2=ni(Xae),WI=2147483648,Qae={convertEVMChainIdToCoinType(t){if(t>=WI)throw new Error("Invalid chainId");return(WI|t)>>>0}},Si=Rt({suggestions:[],loading:!1}),Zae={state:Si,subscribe(t){return Bn(Si,()=>t(Si))},subscribeKey(t,e){return ts(Si,t,e)},async resolveName(t){try{return await ke.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await ke.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Si.loading=!0,Si.suggestions=[];const e=await ke.getEnsNameSuggestions(t);return Si.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Si.suggestions}catch(e){const n=hh.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Si.loading=!1}},async getNamesForAddress(t){try{if(!q.state.activeCaipNetwork)return[];const n=me.getEnsFromCacheForAddress(t);if(n)return n;const s=await ke.reverseLookupEnsName({address:t});return me.updateEnsCache({address:t,ens:s,timestamp:Date.now()}),s}catch(e){const n=hh.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=q.state.activeCaipNetwork,n=Me.state.address,s=ve.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!s)throw new Error("Address or auth connector not found");Si.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ze.pushTransactionStack({onCancel(){ze.replace("RegisterAccountName")}});const r=await xe.signMessage(i);Si.loading=!1;const c=e.id;if(!c)throw new Error("Network not found");const l=Qae.convertEVMChainIdToCoinType(Number(c));await ke.registerEnsName({coinType:l,address:n,signature:r,message:i}),Me.setProfileName(t,e.chainNamespace),ze.replace("RegisterAccountNameSuccess")}catch(i){const r=hh.parseEnsApiError(i,`Error registering name ${t}`);throw ze.replace("RegisterAccountName"),new Error(r)}finally{Si.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},hh=ni(Zae);let _c=null;const Rr={getSIWX(){return he.state.siwx},async initializeIfEnabled(t=q.getActiveCaipAddress()){const e=he.state.siwx;if(!(e&&t))return;const[n,s,i]=t.split(":");if(q.checkIfSupportedNetwork(n,`${n}:${s}`))try{if(he.state.remoteFeatures?.emailCapture){const c=q.getAccountData(n)?.user;await st.open({view:"DataCapture",data:{email:c?.email??void 0}});return}if(_c&&await _c,(await e.getSessions(`${n}:${s}`,i)).length)return;await st.open({view:"SIWXSignMessage"})}catch(r){console.error("SIWXUtil:initializeIfEnabled",r),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await xe._getClient()?.disconnect().catch(console.error),ze.reset("Connect"),$r.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=he.state.siwx,e=Re.getPlainAddress(q.getActiveCaipAddress()),n=jI(),s=xe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!s)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),r=i.toString();ve.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&ze.pushTransactionStack({});const l=await s.signMessage(r);await t.addSession({data:i,message:r,signature:l}),q.setLastConnectedSIWECaipNetwork(n),st.close(),It.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const r=this.getSIWXEventProperties();(!st.state.open||ze.state.view==="ApproveTransaction")&&await st.open({view:"SIWXSignMessage"}),$r.showError("Error signing message"),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:r}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=q.getLastConnectedSIWECaipNetwork();if(n){const s=await t?.getSessions(n?.caipNetworkId,Re.getPlainAddress(q.getActiveCaipAddress())||"");s&&s.length>0?await q.switchActiveNetwork(n):await xe.disconnect()}else await xe.disconnect()}else st.close();st.close(),It.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=q.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async s=>{const i=await t?.getSessions(s.caipNetworkId,Re.getPlainAddress(q.getActiveCaipAddress())||"");i&&n.push(...i)})),n},async getSessions(t){const e=he.state.siwx;let n=t?.address;if(!n){const i=q.getActiveCaipAddress();n=Re.getPlainAddress(i)}let s=t?.caipNetworkId;return s||(s=q.getActiveCaipNetwork()?.caipNetworkId),e&&n&&s?e.getSessions(s,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=ze.state.view==="ApproveTransaction",n=ze.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:s,chainNamespace:i}){const r=Rr.getSIWX();if(!r||!i.includes(pe.CHAIN.EVM)||he.state.remoteFeatures?.emailCapture){const h=await t.connect({chainId:e,socialUri:n,preferredAccountType:s});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const c=`${i}:${e}`,l=await r.createMessage({chainId:c,accountAddress:"<<AccountAddress>>"}),f={accountAddress:l.accountAddress,chainId:l.chainId,domain:l.domain,uri:l.uri,version:l.version,nonce:l.nonce,notBefore:l.notBefore,statement:l.statement,resources:l.resources,requestId:l.requestId,issuedAt:l.issuedAt,expirationTime:l.expirationTime,serializedMessage:l.toString()},d=await t.connect({chainId:e,socialUri:n,siwxMessage:f,preferredAccountType:s});return f.accountAddress=d.address,f.serializedMessage=d.message||"",d.signature&&d.message&&await Rr.addEmbeddedWalletSession(f,d.message,d.signature),{address:d.address,chainId:d.chainId,accounts:d.accounts}},async addEmbeddedWalletSession(t,e,n){if(_c)return _c;const s=Rr.getSIWX();return s?(_c=s.addSession({data:t,message:e,signature:n}).finally(()=>{_c=null}),_c):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const s=Rr.getSIWX(),i=new Set(e.map(l=>l.split(":")[0]));if(!s||i.size!==1||!i.has("eip155"))return!1;const r=await s.createMessage({chainId:jI()?.caipNetworkId||"",accountAddress:""}),c=await t.authenticate({nonce:r.nonce,domain:r.domain,uri:r.uri,exp:r.expirationTime,iat:r.issuedAt,nbf:r.notBefore,requestId:r.requestId,version:r.version,resources:r.resources,statement:r.statement,chainId:r.chainId,methods:n,chains:[r.chainId,...e.filter(l=>l!==r.chainId)]});if($r.showLoading("Authenticating...",{autoClose:!1}),Me.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),c?.auths?.length){const l=c.auths.map(f=>{const d=t.client.formatAuthMessage({request:f.p,iss:f.p.iss});return{data:{...f.p,accountAddress:f.p.iss.split(":").slice(-1).join(""),chainId:f.p.iss.split(":").slice(2,4).join(":"),uri:f.p.aud,version:f.p.version||r.version,expirationTime:f.p.exp,issuedAt:f.p.iat,notBefore:f.p.nbf},message:d,signature:f.s.s,cacao:f}});try{await s.setSessions(l),It.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Rr.getSIWXEventProperties()})}catch(f){throw console.error("SIWX:universalProviderAuth - failed to set sessions",f),It.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Rr.getSIWXEventProperties()}),await t.disconnect().catch(console.error),f}finally{$r.hide()}}return!0},getSIWXEventProperties(){const t=q.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:q.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Fr(t)===Zc.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Uc={EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},np={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"}},Zs={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,s])=>{e[`${Uc.EIP155}:${n}`]=s}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=q.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ve.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let s=0;return new Promise(i=>{async function r(){return s+=1,await t()?i(!0):s>=n?i(!1):(setTimeout(r,e),null)}r()})}},Jae=new AbortController,Ci={EmbeddedWalletAbortController:Jae,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Bu()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systems date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},eoe={createLogger(t,e="error"){const n=gp({level:e}),{logger:s}=HD({opts:n});return s.error=(...i)=>{for(const r of i)if(r instanceof Error){t(r,...i);return}t(void 0,...i)},s}},toe="rpc.walletconnect.org";function GI(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Wv=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Iu={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===toe}catch{n=!1}if(n){const s=new URL(t);return s.searchParams.has("projectId")||s.searchParams.set("projectId",e),s.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const s=t.rpcUrls?.default?.http?.[0];return Wv.includes(e)?GI(e,n):s||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:s}){const i=this.getChainNamespace(t),r=this.getCaipNetworkId(t),c=t.rpcUrls?.default?.http?.[0],l=this.getDefaultRpcUrl(t,r,n),f=t?.rpcUrls?.chainDefault?.http?.[0]||c,d=s?.[r]?.map(m=>m.url)||[],h=[...d,...l?[l]:[]],g=[...d];return f&&!g.includes(f)&&g.push(f),{...t,chainNamespace:i,caipNetworkId:r,assets:{imageId:np.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:h},chainDefault:{http:g}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:s}){return t.map(i=>Iu.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:s,projectId:n}))},getViemTransport(t,e,n){const s=[];return n?.forEach(i=>{s.push(T0(i.url,i.config))}),Wv.includes(t.caipNetworkId)&&s.push(T0(GI(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(i=>{s.push(T0(i))}),qI(s)},extendWagmiTransports(t,e,n){if(Wv.includes(t.caipNetworkId)){const s=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return qI([n,T0(s)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=me.getActiveCaipNetworkId(),n=q.getAllRequestedCaipNetworks(),s=Array.from(q.state.chains?.keys()||[]),i=e?.split(":")[0],r=i?s.includes(i):!1,c=n?.find(f=>f.caipNetworkId===e);return r&&!c&&e?this.getUnsupportedNetwork(e):c||t||n?.[0]}},Cm={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Ns=Rt({providers:{...Cm},providerIds:{...Cm}}),Yt={state:Ns,subscribeKey(t,e){return ts(Ns,t,e)},subscribe(t){return Bn(Ns,()=>{t(Ns)})},subscribeProviders(t){return Bn(Ns.providers,()=>t(Ns.providers))},setProvider(t,e){t&&e&&(Ns.providers[t]=al(e))},getProvider(t){if(t)return Ns.providers[t]},setProviderId(t,e){e&&(Ns.providerIds[t]=e)},getProviderId(t){if(t)return Ns.providerIds[t]},reset(){Ns.providers={...Cm},Ns.providerIds={...Cm}},resetChain(t){Ns.providers[t]=void 0,Ns.providerIds[t]=void 0}},noe={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},O2={filterOutDuplicatesByRDNS(t){const e=he.state.enableEIP6963?ve.state.connectors:[],n=me.getRecentWallets(),s=e.map(l=>l.info?.rdns).filter(Boolean),i=n.map(l=>l.rdns).filter(Boolean),r=s.concat(i);if(r.includes("io.metamask.mobile")&&Re.isMobile()){const l=r.indexOf("io.metamask.mobile");r[l]="io.metamask"}return t.filter(l=>!(l?.rdns&&r.includes(String(l.rdns))||!l?.rdns&&e.some(d=>d.name===l.name)))},filterOutDuplicatesByIds(t){const e=ve.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),n=me.getRecentWallets(),s=e.map(l=>l.explorerId),i=n.map(l=>l.id),r=s.concat(i);return t.filter(l=>!r.includes(l?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ve.state,{featuredWalletIds:n}=he.state,s=e.filter(c=>c.type==="ANNOUNCED").reduce((c,l)=>(l.info?.rdns&&(c[l.info.rdns]=!0),c),{});return t.map(c=>({...c,installed:!!c.rdns&&!!s[c.rdns??""]})).sort((c,l)=>{const f=Number(l.installed)-Number(c.installed);if(f!==0)return f;if(n?.length){const d=n.indexOf(c.id),h=n.indexOf(l.id);if(d!==-1&&h!==-1)return d-h;if(d!==-1)return-1;if(h!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||he.state.features?.connectMethodsOrder,s=e||ve.state.connectors;if(n)return n;const{injected:i,announced:r}=V0.getConnectorsByType(s,Le.state.recommended,Le.state.featured),c=i.filter(V0.showConnector),l=r.filter(V0.showConnector);return c.length||l.length?["wallet","email","social"]:noe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Le.state.excludedWallets.some(s=>s.rdns===t.rdns),n=!!t.name&&Le.state.excludedWallets.some(s=>Zs.isLowerCaseMatch(s.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},V0={getConnectorsByType(t,e,n){const{customWallets:s}=he.state,i=me.getRecentWallets(),r=O2.filterOutDuplicateWallets(e),c=O2.filterOutDuplicateWallets(n),l=t.filter(g=>g.type==="MULTI_CHAIN"),f=t.filter(g=>g.type==="ANNOUNCED"),d=t.filter(g=>g.type==="INJECTED"),h=t.filter(g=>g.type==="EXTERNAL");return{custom:s,recent:i,external:h,multiChain:l,announced:f,injected:d,recommended:r,featured:c}},showConnector(t){const e=t.info?.rdns,n=!!e&&Le.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),s=!!t.name&&Le.state.excludedWallets.some(i=>Zs.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Re.isMobile()||Re.isMobile()&&!e&&!xe.checkInstalled())||n||s)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||s))},getIsConnectedWithWC(){return Array.from(q.state.chains.values()).some(n=>ve.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:s,announced:i,injected:r,multiChain:c,external:l,overriddenConnectors:f=he.state.features?.connectorTypeOrder??[]}){const g=[{type:"walletConnect",isEnabled:he.state.enableWalletConnect},{type:"recent",isEnabled:s.length>0},{type:"injected",isEnabled:[...r,...i,...c].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:t.length>0}].filter(v=>v.isEnabled),m=new Set(g.map(v=>v.type)),y=f.filter(v=>m.has(v)).map(v=>({type:v,isEnabled:!0})),w=g.filter(({type:v})=>!y.some(({type:C})=>C===v));return Array.from(new Set([...y,...w].map(({type:v})=>v)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!Re.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(s=>Number(s))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const q0=globalThis,vE=q0.ShadowRoot&&(q0.ShadyCSS===void 0||q0.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,bE=Symbol(),KI=new WeakMap;let HM=class{constructor(e,n,s){if(this._$cssResult$=!0,s!==bE)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(vE&&e===void 0){const s=n!==void 0&&n.length===1;s&&(e=KI.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&KI.set(n,e))}return e}toString(){return this.cssText}};const Ai=t=>new HM(typeof t=="string"?t:t+"",void 0,bE),Vu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce(((s,i,r)=>s+(c=>{if(c._$cssResult$===!0)return c.cssText;if(typeof c=="number")return c;throw Error("Value passed to 'css' function must be a 'css' function result: "+c+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1]),t[0]);return new HM(n,t,bE)},soe=(t,e)=>{if(vE)t.adoptedStyleSheets=e.map((n=>n instanceof CSSStyleSheet?n:n.styleSheet));else for(const n of e){const s=document.createElement("style"),i=q0.litNonce;i!==void 0&&s.setAttribute("nonce",i),s.textContent=n.cssText,t.appendChild(s)}},YI=vE?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const s of e.cssRules)n+=s.cssText;return Ai(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:ioe,defineProperty:roe,getOwnPropertyDescriptor:aoe,getOwnPropertyNames:ooe,getOwnPropertySymbols:coe,getPrototypeOf:loe}=Object,ny=globalThis,XI=ny.trustedTypes,uoe=XI?XI.emptyScript:"",foe=ny.reactiveElementPolyfillSupport,ph=(t,e)=>t,_2={toAttribute(t,e){switch(e){case Boolean:t=t?uoe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},FM=(t,e)=>!ioe(t,e),QI={attribute:!0,type:String,converter:_2,reflect:!1,useDefault:!1,hasChanged:FM};Symbol.metadata??=Symbol("metadata"),ny.litPropertyMetadata??=new WeakMap;let Du=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=QI){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const s=Symbol(),i=this.getPropertyDescriptor(e,s,n);i!==void 0&&roe(this.prototype,e,i)}}static getPropertyDescriptor(e,n,s){const{get:i,set:r}=aoe(this.prototype,e)??{get(){return this[n]},set(c){this[n]=c}};return{get:i,set(c){const l=i?.call(this);r?.call(this,c),this.requestUpdate(e,l,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??QI}static _$Ei(){if(this.hasOwnProperty(ph("elementProperties")))return;const e=loe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ph("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ph("properties"))){const n=this.properties,s=[...ooe(n),...coe(n)];for(const i of s)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[s,i]of n)this.elementProperties.set(s,i)}this._$Eh=new Map;for(const[n,s]of this.elementProperties){const i=this._$Eu(n,s);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const i of s)n.unshift(YI(i))}else e!==void 0&&n.push(YI(e));return n}static _$Eu(e,n){const s=n.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const s of n.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return soe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,n,s){this._$AK(e,s)}_$ET(e,n){const s=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,s);if(i!==void 0&&s.reflect===!0){const r=(s.converter?.toAttribute!==void 0?s.converter:_2).toAttribute(n,s.type);this._$Em=e,r==null?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null}}_$AK(e,n){const s=this.constructor,i=s._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const r=s.getPropertyOptions(i),c=typeof r.converter=="function"?{fromAttribute:r.converter}:r.converter?.fromAttribute!==void 0?r.converter:_2;this._$Em=i;const l=c.fromAttribute(n,r.type);this[i]=l??this._$Ej?.get(i)??l,this._$Em=null}}requestUpdate(e,n,s){if(e!==void 0){const i=this.constructor,r=this[e];if(s??=i.getPropertyOptions(e),!((s.hasChanged??FM)(r,n)||s.useDefault&&s.reflect&&r===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,s))))return;this.C(e,n,s)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:s,reflect:i,wrapped:r},c){s&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,c??n??this[e]),r!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||s||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,r]of this._$Ep)this[i]=r;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,r]of s){const{wrapped:c}=r,l=this[i];c!==!0||this._$AL.has(i)||l===void 0||this.C(i,void 0,r,l)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach((s=>s.hostUpdate?.())),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach((n=>n.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Du.elementStyles=[],Du.shadowRootOptions={mode:"open"},Du[ph("elementProperties")]=new Map,Du[ph("finalized")]=new Map,foe?.({ReactiveElement:Du}),(ny.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xE=globalThis,Am=xE.trustedTypes,ZI=Am?Am.createPolicy("lit-html",{createHTML:t=>t}):void 0,VM="$lit$",Lo=`lit$${Math.random().toFixed(9).slice(2)}$`,qM="?"+Lo,doe=`<${qM}>`,ol=document,sp=()=>ol.createComment(""),ip=t=>t===null||typeof t!="object"&&typeof t!="function",EE=Array.isArray,hoe=t=>EE(t)||typeof t?.[Symbol.iterator]=="function",Gv=`[ 	
\f\r]`,jd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,JI=/-->/g,e8=/>/g,Mc=RegExp(`>|${Gv}(?:([^\\s"'>=/]+)(${Gv}*=${Gv}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),t8=/'/g,n8=/"/g,WM=/^(?:script|style|textarea|title)$/i,GM=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Gle=GM(1),Kle=GM(2),nf=Symbol.for("lit-noChange"),Cn=Symbol.for("lit-nothing"),s8=new WeakMap,Kc=ol.createTreeWalker(ol,129);function KM(t,e){if(!EE(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return ZI!==void 0?ZI.createHTML(e):e}const poe=(t,e)=>{const n=t.length-1,s=[];let i,r=e===2?"<svg>":e===3?"<math>":"",c=jd;for(let l=0;l<n;l++){const f=t[l];let d,h,g=-1,m=0;for(;m<f.length&&(c.lastIndex=m,h=c.exec(f),h!==null);)m=c.lastIndex,c===jd?h[1]==="!--"?c=JI:h[1]!==void 0?c=e8:h[2]!==void 0?(WM.test(h[2])&&(i=RegExp("</"+h[2],"g")),c=Mc):h[3]!==void 0&&(c=Mc):c===Mc?h[0]===">"?(c=i??jd,g=-1):h[1]===void 0?g=-2:(g=c.lastIndex-h[2].length,d=h[1],c=h[3]===void 0?Mc:h[3]==='"'?n8:t8):c===n8||c===t8?c=Mc:c===JI||c===e8?c=jd:(c=Mc,i=void 0);const y=c===Mc&&t[l+1].startsWith("/>")?" ":"";r+=c===jd?f+doe:g>=0?(s.push(d),f.slice(0,g)+VM+f.slice(g)+Lo+y):f+Lo+(g===-2?l:y)}return[KM(t,r+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};let M2=class YM{constructor({strings:e,_$litType$:n},s){let i;this.parts=[];let r=0,c=0;const l=e.length-1,f=this.parts,[d,h]=poe(e,n);if(this.el=YM.createElement(d,s),Kc.currentNode=this.el.content,n===2||n===3){const g=this.el.content.firstChild;g.replaceWith(...g.childNodes)}for(;(i=Kc.nextNode())!==null&&f.length<l;){if(i.nodeType===1){if(i.hasAttributes())for(const g of i.getAttributeNames())if(g.endsWith(VM)){const m=h[c++],y=i.getAttribute(g).split(Lo),w=/([.?@])?(.*)/.exec(m);f.push({type:1,index:r,name:w[2],strings:y,ctor:w[1]==="."?moe:w[1]==="?"?yoe:w[1]==="@"?woe:sy}),i.removeAttribute(g)}else g.startsWith(Lo)&&(f.push({type:6,index:r}),i.removeAttribute(g));if(WM.test(i.tagName)){const g=i.textContent.split(Lo),m=g.length-1;if(m>0){i.textContent=Am?Am.emptyScript:"";for(let y=0;y<m;y++)i.append(g[y],sp()),Kc.nextNode(),f.push({type:2,index:++r});i.append(g[m],sp())}}}else if(i.nodeType===8)if(i.data===qM)f.push({type:2,index:r});else{let g=-1;for(;(g=i.data.indexOf(Lo,g+1))!==-1;)f.push({type:7,index:r}),g+=Lo.length-1}r++}}static createElement(e,n){const s=ol.createElement("template");return s.innerHTML=e,s}};function sf(t,e,n=t,s){if(e===nf)return e;let i=s!==void 0?n._$Co?.[s]:n._$Cl;const r=ip(e)?void 0:e._$litDirective$;return i?.constructor!==r&&(i?._$AO?.(!1),r===void 0?i=void 0:(i=new r(t),i._$AT(t,n,s)),s!==void 0?(n._$Co??=[])[s]=i:n._$Cl=i),i!==void 0&&(e=sf(t,i._$AS(t,e.values),i,s)),e}class goe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:s}=this._$AD,i=(e?.creationScope??ol).importNode(n,!0);Kc.currentNode=i;let r=Kc.nextNode(),c=0,l=0,f=s[0];for(;f!==void 0;){if(c===f.index){let d;f.type===2?d=new SE(r,r.nextSibling,this,e):f.type===1?d=new f.ctor(r,f.name,f.strings,this,e):f.type===6&&(d=new voe(r,this,e)),this._$AV.push(d),f=s[++l]}c!==f?.index&&(r=Kc.nextNode(),c++)}return Kc.currentNode=ol,i}p(e){let n=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,n),n+=s.strings.length-2):s._$AI(e[n])),n++}}let SE=class XM{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,s,i){this.type=2,this._$AH=Cn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=s,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=sf(this,e,n),ip(e)?e===Cn||e==null||e===""?(this._$AH!==Cn&&this._$AR(),this._$AH=Cn):e!==this._$AH&&e!==nf&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):hoe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Cn&&ip(this._$AH)?this._$AA.nextSibling.data=e:this.T(ol.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:s}=e,i=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=M2.createElement(KM(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===i)this._$AH.p(n);else{const r=new goe(i,this),c=r.u(this.options);r.p(n),this.T(c),this._$AH=r}}_$AC(e){let n=s8.get(e.strings);return n===void 0&&s8.set(e.strings,n=new M2(e)),n}k(e){EE(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let s,i=0;for(const r of e)i===n.length?n.push(s=new XM(this.O(sp()),this.O(sp()),this,this.options)):s=n[i],s._$AI(r),i++;i<n.length&&(this._$AR(s&&s._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}};class sy{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,s,i,r){this.type=1,this._$AH=Cn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=Cn}_$AI(e,n=this,s,i){const r=this.strings;let c=!1;if(r===void 0)e=sf(this,e,n,0),c=!ip(e)||e!==this._$AH&&e!==nf,c&&(this._$AH=e);else{const l=e;let f,d;for(e=r[0],f=0;f<r.length-1;f++)d=sf(this,l[s+f],n,f),d===nf&&(d=this._$AH[f]),c||=!ip(d)||d!==this._$AH[f],d===Cn?e=Cn:e!==Cn&&(e+=(d??"")+r[f+1]),this._$AH[f]=d}c&&!i&&this.j(e)}j(e){e===Cn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class moe extends sy{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Cn?void 0:e}}class yoe extends sy{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Cn)}}class woe extends sy{constructor(e,n,s,i,r){super(e,n,s,i,r),this.type=5}_$AI(e,n=this){if((e=sf(this,e,n,0)??Cn)===nf)return;const s=this._$AH,i=e===Cn&&s!==Cn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,r=e!==Cn&&(s===Cn||i);i&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class voe{constructor(e,n,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){sf(this,e)}}const boe=xE.litHtmlPolyfillSupport;boe?.(M2,SE),(xE.litHtmlVersions??=[]).push("3.3.1");const xoe=(t,e,n)=>{const s=n?.renderBefore??e;let i=s._$litPart$;if(i===void 0){const r=n?.renderBefore??null;s._$litPart$=i=new SE(e.insertBefore(sp(),r),r,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const CE=globalThis;class W0 extends Du{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=xoe(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return nf}}W0._$litElement$=!0,W0.finalized=!0,CE.litElementHydrateSupport?.({LitElement:W0});const Eoe=CE.litElementPolyfillSupport;Eoe?.({LitElement:W0});(CE.litElementVersions??=[]).push("4.2.1");let gh,Vo,qo;function Yle(t,e){gh=document.createElement("style"),Vo=document.createElement("style"),qo=document.createElement("style"),gh.textContent=qu(t).core.cssText,Vo.textContent=qu(t).dark.cssText,qo.textContent=qu(t).light.cssText,document.head.appendChild(gh),document.head.appendChild(Vo),document.head.appendChild(qo),QM(e)}function QM(t){Vo&&qo&&(t==="light"?(Vo.removeAttribute("media"),qo.media="enabled"):(qo.removeAttribute("media"),Vo.media="enabled"))}function Soe(t){gh&&Vo&&qo&&(gh.textContent=qu(t).core.cssText,Vo.textContent=qu(t).dark.cssText,qo.textContent=qu(t).light.cssText)}function qu(t){return{core:Vu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ai(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ai(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ai(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${Ai(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${Ai(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Vu`
      :root {
        --w3m-color-mix: ${Ai(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${Ai(zo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ai(zo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Vu`
      :root {
        --w3m-color-mix: ${Ai(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${Ai(zo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ai(zo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Xle=Vu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Qle=Vu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Zle=Vu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,G0={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([G0.getAddresses(t),G0.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const n=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:G0.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[np.NetworkImageIds[e.id]]}]})}},Cu={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function Np(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const i8=Np({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),r8=Np({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Np({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});const ZM=Np({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Np({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Coe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Oa={getMethodsByChainNamespace(t){return Coe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},s=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>s.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>s.add(i)),e.events&&Object.keys(e.events).forEach(i=>s.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[r]=i.split(":");r&&s.add(r)}),s.forEach(i=>{n[i]||(n[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,r])=>{n[i]&&(n[i].methods=r)}),e.chains&&Object.entries(e.chains).forEach(([i,r])=>{n[i]&&(n[i].chains=r)}),e.events&&Object.entries(e.events).forEach(([i,r])=>{n[i]&&(n[i].events=r)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([r,c])=>{const[l,f]=r.split(":");!l||!f||!n[l]||(n[l].rpcMap||(n[l].rpcMap={}),i.has(l)||(n[l].rpcMap={},i.add(l)),n[l].rpcMap[f]=c)})}return n},createNamespaces(t,e){const n=t.reduce((s,i)=>{const{id:r,chainNamespace:c,rpcUrls:l}=i,f=l.default.http[0];s[c]||(s[c]=this.createDefaultNamespace(c));const d=`${c}:${r}`,h=s[c];switch(h.chains.push(d),d){case i8.caipNetworkId:h.chains.push(i8.deprecatedCaipNetworkId);break;case r8.caipNetworkId:h.chains.push(r8.deprecatedCaipNetworkId);break}return h?.rpcMap&&f&&(h.rpcMap[r]=f),s},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await hh.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],s=e.accounts.map(i=>{const[r,c]=i.split(":");return`${r}:${c}`});return Array.from(new Set([...n,...s]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const s of[...e,...n])if(s.includes("*")){const r=`^${s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(r,"u").test(t))return!0}else try{if(new URL(s).origin===t)return!0}catch{if(s===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:s,onAccountsChanged:i,onChainChanged:r,onDisplayUri:c}){n&&t.on("connect",()=>{const l=Oa.getWalletConnectAccounts(t,e);n(l)}),s&&t.on("disconnect",()=>{s()}),i&&t.on("session_event",l=>{if(Oa.isSessionEventData(l)){const{name:f,data:d}=l.params.event;if(f==="accountsChanged"&&Array.isArray(d)){const h=d.filter(g=>Re.isCaipAddress(g)).map(g=>Qs.parseCaipAddress(g)).filter(g=>g.chainNamespace===e);i(h)}}}),r&&t.on("chainChanged",l=>{r(l)}),c&&t.on("display_uri",l=>{c(l)})},getWalletConnectAccounts(t,e){const n=new Set,s=t?.session?.namespaces?.[e]?.accounts?.map(i=>Qs.parseCaipAddress(i)).filter(({address:i})=>n.has(i.toLowerCase())?!1:(n.add(i.toLowerCase()),!0));return s&&s.length>0?s:[]}};class Aoe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===pe.CONNECTOR_ID.WALLET_CONNECT){const f=Oa.getWalletConnectAccounts(s,this.namespace),d=n.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===f[0]?.chainId?.toString());f.length>0&&r({connectorId:l.id,accounts:f.map(h=>({address:h.address})),caipNetwork:d})}else{const{accounts:f,chainId:d}=await V0.fetchProviderData(l);if(f.length>0&&d){const h=n.find(g=>g.chainNamespace===this.namespace&&g.id.toString()===d.toString());r({connectorId:l.id,accounts:f.map(g=>({address:g})),caipNetwork:h}),l.provider&&l.id!==pe.CONNECTOR_ID.AUTH&&l.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&c(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===pe.CONNECTOR_ID.WALLET_CONNECT){const f=Oa.getWalletConnectAccounts(s,this.namespace);f.length>0&&r({connectorId:l.id,accounts:f.map(d=>({address:d.address})),caipNetwork:n})}else{const f=await l.connect({chainId:n?.id});f&&(r({connectorId:l.id,accounts:[{address:f}],caipNetwork:n}),c(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:s,getConnectionStatusInfo:i,onConnection:r,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:f,hasConnected:d}=i(l.id);return!f&&d}).map(async l=>{if(l.id===pe.CONNECTOR_ID.WALLET_CONNECT){const m=Oa.getWalletConnectAccounts(s,this.namespace);m.length>0&&r({connectorId:l.id,accounts:m.map(y=>({address:y.address})),caipNetwork:n});return}const f=await l.connect();let h=(await l.getAccountAddresses())?.map(m=>Re.createAccount(pe.CHAIN.BITCOIN,m.address,m.purpose||"payment",m.publicKey,m.path));if(h&&h.length>1&&(h=[{namespace:pe.CHAIN.BITCOIN,publicKey:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:h[Cu.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:h[Cu.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(l.chains.find(m=>m.id===n?.id)||l.chains[0]))throw new Error("The connector does not support any of the requested chains");f&&(c(l.id,l.provider),r({connectorId:l.id,accounts:h.map(m=>({address:m.address,type:m.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:s,connectors:i}){if(n){const c=s.find(d=>Zs.isLowerCaseMatch(d.connectorId,n));if(!c)return null;const l=i.find(d=>Zs.isLowerCaseMatch(d.id,c.connectorId)),f=e?c.accounts.find(d=>Zs.isLowerCaseMatch(d.address,e)):c.accounts[0];return{...c,account:f,connector:l}}const r=s.find(c=>c.accounts.length>0&&i.some(l=>Zs.isLowerCaseMatch(l.id,c.connectorId)));if(r){const[c]=r.accounts,l=i.find(f=>Zs.isLowerCaseMatch(f.id,r.connectorId));return{...r,account:c,connector:l}}return null}}const Kd={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class JM{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=np.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=np.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=q.getCaipNetworks.bind(q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),s=he.state.universalProviderConfigOverride,i=Oa.createNamespaces(n,s);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Rr.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Noe})}}const Noe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Toe=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class Ioe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>q.getCaipNetworks(n),this.getConnectorId=n=>ve.getConnectorId(n),e&&this.construct(e),e?.namespace&&(this.connectionManager=new Aoe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const s=this.getCaipNetworks().filter(i=>i.chainNamespace===this.namespace).find(i=>i.id.toString()===n?.toString());e&&s&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:s})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:np.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(s=>n.has(s.id)?!1:(n.add(s.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(s=>n.has(s.connectorId.toLowerCase())?!1:(n.add(s.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Zs.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Me.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const s=this.eventListeners.get(e);s&&s.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const s=this.eventListeners.get(e);s&&s.forEach(i=>i(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:s}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(s==="WALLET_CONNECT"){i.setDefaultChain(n.caipNetworkId);return}if(i&&s==="AUTH"){const r=i,c=Fr(n.chainNamespace);await r.switchNetwork({chainId:n.caipNetworkId});const l=await r.getUser({chainId:n.caipNetworkId,preferredAccountType:c});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof JM);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:s,chainId:i}=Re.getAccount(e[0]),r=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===i?.toString()),c=this.connectors.find(l=>l.id===n);s&&(this.emit("accountChanged",{address:s,chainId:i,connector:c}),this.addConnection({connectorId:n,accounts:e.map(l=>{const{address:f}=Re.getAccount(l);return{address:f}}),caipNetwork:r}))}}onAccountsChanged(e,n,s=!0){if(e.length>0){const{address:i}=Re.getAccount(e[0]),r=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});i&&Zs.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:i,chainId:r?.caipNetwork?.id,connector:r?.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Re.getAccount(c);return{address:l}}),caipNetwork:r?.caipNetwork})}else s&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Zs.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const s=typeof e=="string"&&e.startsWith("0x")?G0.hexStringToNumber(e).toString():e.toString(),i=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),r=this.getCaipNetworks().filter(c=>c.chainNamespace===this.namespace).find(c=>c.id.toString()===s);i&&this.addConnection({connectorId:n,accounts:i.accounts,caipNetwork:r}),Zs.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:s})}listenProviderEvents(e,n){if(Toe.includes(e))return;const s=c=>this.onAccountsChanged(c,e),i=c=>this.onChainChanged(c,e),r=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",r),n.on("accountsChanged",s),n.on("chainChanged",i),this.providerHandlers[e]={provider:n,disconnect:r,accountsChanged:s,chainChanged:i})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:s,accountsChanged:i,chainChanged:r}=this.providerHandlers[e];n.removeListener("disconnect",s),n.removeListener("accountsChanged",i),n.removeListener("chainChanged",r),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class Doe extends Ioe{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new JM({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const s=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,r]=i.split(":");return r}).filter((i,r,c)=>c.indexOf(i)===r)||[];return Promise.resolve({accounts:s.map(i=>Re.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&yt.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Me.state.balanceLoading&&e.chainId===q.state.activeCaipNetwork?.id)return{balance:Me.state.balance||"0.00",symbol:Me.state.balanceSymbol||""};const i=(await Me.fetchTokenBalance()).find(r=>r.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&r.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:s,address:i}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let r="";return q.state.activeCaipNetwork?.chainNamespace===pe.CHAIN.SOLANA?r=(await n.request({method:"solana_signMessage",params:{message:pf.encode(new TextEncoder().encode(s)),pubkey:i}},q.state.activeCaipNetwork?.caipNetworkId)).signature:r=await n.request({method:"personal_sign",params:[s,i]},q.state.activeCaipNetwork?.caipNetworkId),{signature:r}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,s=this.getWalletConnectConnector();if(n.chainNamespace===pe.CHAIN.EVM)try{await s.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:HI(n.id)}]})}catch(i){if(i.code===Kd.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===Kd.ERROR_INVALID_CHAIN_ID||i.code===Kd.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===Kd.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await s.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:HI(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}s.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(s=>s.type==="WALLET_CONNECT")?.provider}}const Ooe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture"],I0={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.multiWallet}},_oe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=I0[e],s=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(s)}},processFeature(t,e,n,s,i){const r=I0[t],c=e[r.localFeatureName];if(i&&!r.isAvailableOnBasic)return!1;if(s){const l=this.getApiConfig(r.apiFeatureName,n);return l?.config===null?this.processFallbackFeature(t,c):l?.config?(c!==void 0&&this.addWarning(c,t),this.processApiFeature(t,l)):!1}return this.processFallbackFeature(t,c)},processApiFeature(t,e){return I0[t].processApi(e)},processFallbackFeature(t,e){return I0[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let s=null,i=!1;try{s=await Le.fetchProjectConfig(),i=s!=null}catch(c){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",c)}const r=i&&!e?yt.DEFAULT_REMOTE_FEATURES:yt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const c of Ooe){const l=this.processFeature(c,n,s,i,e);Object.assign(r,{[c]:l})}}catch(c){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",c),yt.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const c=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Zn.open({debugMessage:Ci.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(c)},"warning")}return r}};class Moe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,s)=>{if(n){const i=q.getCaipNetworks(n)?.find(l=>l.id===s);if(i)return i;const r=q.getNetworkData(n)?.caipNetwork;return r||q.getRequestedCaipNetworks(n).filter(l=>l.chainNamespace===n)?.[0]}return q.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>q.getCaipNetworks(n),this.getActiveChainNamespace=()=>q.state.activeChain,this.setRequestedCaipNetworks=(n,s)=>{q.setRequestedCaipNetworks(n,s)},this.getApprovedCaipNetworkIds=()=>q.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>q.state.activeChain===n||!n?q.state.activeCaipAddress:q.state.chains.get(n)?.accountState?.caipAddress,this.setClientId=n=>{ke.setClientId(n)},this.getProvider=n=>Yt.getProvider(n),this.getProviderType=n=>Yt.getProviderId(n),this.getPreferredAccountType=n=>Fr(n),this.setCaipAddress=(n,s)=>{Me.setCaipAddress(n,s)},this.setBalance=(n,s,i)=>{Me.setBalance(n,s,i)},this.setProfileName=(n,s)=>{Me.setProfileName(n,s)},this.setProfileImage=(n,s)=>{Me.setProfileImage(n,s)},this.setUser=(n,s)=>{Me.setUser(n,s)},this.resetAccount=n=>{Me.resetAccount(n)},this.setCaipNetwork=n=>{q.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,s)=>{q.setChainNetworkData(s,{caipNetwork:n})},this.setStatus=(n,s)=>{Me.setStatus(n,s),ve.isConnected()?me.setConnectionStatus("connected"):me.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>q.state.chains.get(n)?.accountState?.address,this.setConnectors=n=>{const s=[...ve.state.allConnectors,...n];ve.setConnectors(s)},this.setConnections=(n,s)=>{me.setConnections(n,s),xe.setConnections(n,s)},this.fetchIdentity=n=>ke.fetchIdentity(n),this.getReownName=n=>hh.getNamesForAddress(n),this.getConnectors=()=>ve.getConnectors(),this.getConnectorImage=n=>DM.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?Sm.getConnectionsData(n).connections:(Zn.open(pe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?Sm.getConnectionsData(n).recentConnections:(Zn.open(pe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){Zn.open(pe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await xe.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){Zn.open(pe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}me.deleteAddressFromConnection(n),xe.syncStorageConnections()},this.setConnectedWalletInfo=(n,s)=>{const i=Yt.getProviderId(s),r=n?{...n,type:i}:void 0;Me.setConnectedWalletInfo(r,s)},this.getIsConnectedState=()=>!!q.state.activeCaipAddress,this.addAddressLabel=(n,s,i)=>{Me.addAddressLabel(n,s,i)},this.removeAddressLabel=(n,s)=>{Me.removeAddressLabel(n,s)},this.getAddress=n=>q.state.activeChain===n||!n?Me.state.address:q.state.chains.get(n)?.accountState?.address,this.setApprovedCaipNetworksData=n=>q.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{q.resetNetwork(n)},this.addConnector=n=>{ve.addConnector(n)},this.resetWcConnection=()=>{xe.resetWcConnection()},this.setAddressExplorerUrl=(n,s)=>{Me.setAddressExplorerUrl(n,s)},this.setSmartAccountDeployed=(n,s)=>{Me.setSmartAccountDeployed(n,s)},this.setPreferredAccountType=(n,s)=>{q.setAccountProp("preferredAccountType",n,s)},this.setEIP6963Enabled=n=>{he.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const s=e?.map(r=>r.namespace).filter(r=>!!r);if(s?.length)return[...new Set(s)];const i=n?.map(r=>r.chainNamespace);return[...new Set(i)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),he.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await _oe.fetchRemoteFeatures(e),he.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&D2.setOnrampProviders(this.remoteFeatures.onramp),(he.state.remoteFeatures?.email||Array.isArray(he.state.remoteFeatures?.socials)&&he.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Le.fetchAllowedOrigins();if(!e||!Re.isClient()){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Oa.isOriginAllowed(n,e,Kd.DEFAULT_ALLOWED_ANCESTORS)||Zn.open(Ci.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Zn.open(Ci.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Zn.open({displayMessage:Ci.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Ci.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}default:Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,It.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Gs.setThemeMode(e.themeMode),e.themeVariables&&Gs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");q.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&q.setActiveCaipNetwork(n)}initializeConnectionController(e){xe.initialize(e.adapters??[]),xe.setWcBasic(e.basic??!1)}initializeConnectorController(){ve.initialize(this.chainNamespaces)}initializeProjectSettings(e){he.setProjectId(e.projectId),he.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){he.setDebug(e.debug!==!1),he.setEnableWalletConnect(e.enableWalletConnect!==!1),he.setEnableWalletGuide(e.enableWalletGuide!==!1),he.setEnableWallets(e.enableWallets!==!1),he.setEIP6963Enabled(e.enableEIP6963!==!1),he.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),he.setEnableReconnect(e.enableReconnect!==!1),he.setEnableAuthLogger(e.enableAuthLogger!==!1),he.setCustomRpcUrls(e.customRpcUrls),he.setEnableEmbedded(e.enableEmbedded),he.setAllWallets(e.allWallets),he.setIncludeWalletIds(e.includeWalletIds),he.setExcludeWalletIds(e.excludeWalletIds),he.setFeaturedWalletIds(e.featuredWalletIds),he.setTokens(e.tokens),he.setTermsConditionsUrl(e.termsConditionsUrl),he.setPrivacyPolicyUrl(e.privacyPolicyUrl),he.setCustomWallets(e.customWallets),he.setFeatures(e.features),he.setAllowUnsupportedChain(e.allowUnsupportedChain),he.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),he.setPreferUniversalLinks(e.experimental_preferUniversalLinks),he.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),he.setMetadata(e.metadata),he.setDisableAppend(e.disableAppend),he.setEnableEmbedded(e.enableEmbedded),he.setSIWX(e.siwx),!e.projectId){Zn.open(Ci.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===pe.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");he.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return Re.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const s=Iu.getUnsupportedNetwork(`${n}:${e}`);q.setActiveCaipNetwork(s)}}getDefaultNetwork(){return Iu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Iu.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Iu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(i=>i.id===e.defaultNetwork?.id);return n?Iu.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let s={connections:[]};const i=this.getAdapter(e);return(q.state.chains.get(e)?.accountState?.caipAddress||!he.state.enableReconnect)&&i?.disconnect&&(s=await i.disconnect({id:n})),this.setLoading(!1,e),s}catch(s){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${s.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=q.state.activeChain,n=this.getAdapter(e),s=this.getCaipNetwork(e)?.id,i=xe.getConnections(e),r=this.remoteFeatures.multiWallet,c=i.length>0;if(!n)throw new Error("Adapter not found");const l=await n.connectWalletConnect(s);(!c||!r)&&this.close(),this.setClientId(l?.clientId||null),me.setConnectedNamespaces([...q.state.chains.keys()]),await this.syncWalletConnectAccount(),await Rr.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:s,type:i,provider:r,chain:c,caipNetwork:l,socialUri:f})=>{const d=q.state.activeChain,h=c||d,g=this.getAdapter(h);if(c&&c!==d&&!l){const w=this.getCaipNetworks().find(v=>v.chainNamespace===c);w&&this.setCaipNetwork(w)}if(!h)throw new Error("connectExternal: namespace not found");if(!g)throw new Error("connectExternal: adapter not found");const m=this.getCaipNetwork(h),y=await g.connect({id:e,address:n,info:s,type:i,provider:r,socialUri:f,chainId:l?.id||m?.id,rpcUrl:l?.rpcUrls?.default?.http?.[0]||m?.rpcUrls?.default?.http?.[0]});if(y)return me.addConnectedNamespace(h),this.syncProvider({...y,chainNamespace:h}),this.setStatus("connected",h),this.syncConnectedWalletInfo(h),me.removeDisconnectedConnectorId(e,h),{address:y.address}},reconnectExternal:async({id:e,info:n,type:s,provider:i})=>{const r=q.state.activeChain,c=this.getAdapter(r);if(!r)throw new Error("reconnectExternal: namespace not found");if(!c)throw new Error("reconnectExternal: adapter not found");c?.reconnect&&(await c?.reconnect({id:e,info:n,type:s,provider:i,chainId:this.getCaipNetwork()?.id}),me.addConnectedNamespace(r),this.syncConnectedWalletInfo(r))},disconnect:async e=>{const{id:n,chainNamespace:s,initialDisconnect:i}=e||{},r=s||q.state.activeChain,c=ve.getConnectorId(r),l=n===pe.CONNECTOR_ID.AUTH||c===pe.CONNECTOR_ID.AUTH,f=n===pe.CONNECTOR_ID.WALLET_CONNECT||c===pe.CONNECTOR_ID.WALLET_CONNECT;try{const d=Array.from(q.state.chains.keys());let h=s?[s]:d;(f||l)&&(h=d);const g=h.map(async w=>{const v=ve.getConnectorId(w),x=await this.disconnectNamespace(w,n||v);x&&(l&&me.deleteConnectedSocialProvider(),x.connections.forEach(C=>{me.addDisconnectedConnectorId(C.connectorId,w)})),i&&this.onDisconnectNamespace({chainNamespace:w,closeModal:!1})}),m=await Promise.allSettled(g);ht.resetSend(),xe.resetWcConnection(),Rr.getSIWX()?.signOutOnDisconnect&&await Rr.clearSessions(),ve.setFilterByNamespace(void 0),xe.syncStorageConnections();const y=m.filter(w=>w.status==="rejected");if(y.length>0)throw new Error(y.map(w=>w.reason.message).join(", "));It.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:s||"all"}})}catch(d){throw new Error(`Failed to disconnect chains: ${d.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=q.state.activeChain,s=this.getAdapter(q.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!s)throw new Error("signMessage: adapter not found");return(await s?.signMessage({message:e,address:Me.state.address,provider:Yt.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(yt.SEND_SUPPORTED_NAMESPACES.includes(n)){const s=this.getAdapter(n);if(!s)throw new Error("sendTransaction: adapter not found");const i=Yt.getProvider(n);return(await s?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===pe.CHAIN.EVM){const s=this.getAdapter(n);if(!s)throw new Error("estimateGas: adapter is required but got undefined");const i=Yt.getProvider(n),r=this.getCaipNetwork();if(!r)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await s?.estimateGas({...e,provider:i,caipNetwork:r}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=q.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Me.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),Me.state.profileImage||!1},getEnsAddress:async e=>await Oa.resolveReownName(e),writeContract:async e=>{const n=q.state.activeChain,s=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!s)throw new Error("writeContract: adapter is required but got undefined");const i=this.getCaipNetwork(),r=this.getCaipAddress(),c=Yt.getProvider(n);if(!i||!r)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await s?.writeContract({...e,caipNetwork:i,provider:c,caipAddress:r}))?.hash},parseUnits:(e,n)=>{const s=this.getAdapter(q.state.activeChain);if(!s)throw new Error("parseUnits: adapter is required but got undefined");return s?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const s=this.getAdapter(q.state.activeChain);if(!s)throw new Error("formatUnits: adapter is required but got undefined");return s?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Me.state.address||this.updateNativeBalance(Me.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},xe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Yt.getProviderId(q.state.activeChain)===Uc.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Yt.getProvider(n),r=Yt.getProviderId(n);if(e.chainNamespace===q.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:i,providerType:r});else if(this.setCaipNetwork(e),r===Uc.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const c=this.getAddressByChainNamespace(n);c&&this.syncAccount({address:c,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const s=n.chains||[],i=n.accounts.map(r=>{const{chainId:c,chainNamespace:l}=Qs.parseCaipAddress(r);return`${l}:${c}`});return Array.from(new Set([...s,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,s)=>{const i=e?.find(r=>r.namespace===s);return i?(i.construct({namespace:s,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[s]=i):n[s]=new Doe({namespace:s,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const s=me.getConnectionStatus();he.state.enableReconnect===!1?this.setStatus("disconnected",e):s==="connected"?this.setStatus("connecting",e):s==="disconnected"?(me.clearAddressCache(),this.setStatus(s,e)):this.setStatus(s,e),n.on("switchNetwork",({address:i,chainId:r})=>{const c=this.getCaipNetworks().find(d=>d.id.toString()===r.toString()||d.caipNetworkId.toString()===r.toString()),l=q.state.activeChain===e,f=q.state.chains.get(e)?.accountState?.address;if(c){const d=l&&i?i:f;d&&this.syncAccount({address:d,chainId:c.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)}),n.on("disconnect",()=>{const i=this.remoteFeatures.multiWallet,r=Array.from(xe.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!i||r.length===0})}),n.on("connections",i=>{this.setConnections(i,e)}),n.on("pendingTransactions",()=>{const i=Me.state.address,r=q.state.activeCaipNetwork;!i||!r?.id||this.updateNativeBalance(i,r.id,r.chainNamespace)}),n.on("accountChanged",({address:i,chainId:r,connector:c})=>{const l=q.state.activeChain===e;c?.provider&&(this.syncProvider({id:c.id,type:c.type,provider:c.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&r?this.syncAccount({address:i,chainId:r,chainNamespace:e}):l&&q.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:q.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,r,e),me.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>xe.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===pe.CHAIN.EVM&&Re.isSafeApp()&&ve.setConnectorId(pe.CONNECTOR_ID.SAFE,e);const n=ve.getConnectorId(e);switch(this.setStatus("connecting",e),n){case pe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case pe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:s}=e||{};q.resetAccount(n),q.resetNetwork(n),me.removeConnectedNamespace(n);const i=Array.from(q.state.chains.keys());(n?[n]:i).forEach(c=>me.addDisconnectedConnectorId(ve.getConnectorId(c)||"",c)),ve.removeConnectorId(n),Yt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),s!==!1&&st.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getCaipAddress(e),s=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!n,caipNetwork:s,getConnectorStorageInfo(i){const c=me.getConnections()[e]??[];return{hasDisconnected:me.isConnectorDisconnected(i,e),hasConnected:c.some(l=>Zs.isLowerCaseMatch(l.connectorId,i))}}})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),s=ve.getConnectorId(e),i=this.getCaipNetwork(e),c=ve.getConnectors(e).find(l=>l.id===s);try{if(!n||!c)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const l=await n?.syncConnection({namespace:e,id:c.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});l?(this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async s=>{const i=this.getAdapter(s);if(!i)return;const r=this.universalProvider?.session?.namespaces?.[s]?.accounts||[],c=q.state.activeCaipNetwork?.id,l=r.find(f=>{const{chainId:d}=Qs.parseCaipAddress(f);return d===c?.toString()})||r[0];if(l){const f=Qs.validateCaipAddress(l),{chainId:d,address:h}=Qs.parseCaipAddress(f);if(Yt.setProviderId(s,Uc.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&q.state.activeCaipNetwork&&i.namespace!==pe.CHAIN.EVM){const g=i.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:q.state.activeCaipNetwork});Yt.setProvider(s,g)}else Yt.setProvider(s,this.universalProvider);ve.setConnectorId(pe.CONNECTOR_ID.WALLET_CONNECT,s),me.addConnectedNamespace(s),await this.syncAccount({address:h,chainId:d,chainNamespace:s})}else e.includes(s)&&this.setStatus("disconnected",s);this.syncConnectedWalletInfo(s),await q.setApprovedCaipNetworksData(s)});await Promise.all(n)}syncProvider({type:e,provider:n,id:s,chainNamespace:i}){Yt.setProviderId(i,e),Yt.setProvider(i,n),ve.setConnectorId(s,i)}async syncAccount(e){const n=e.chainNamespace===q.state.activeChain,s=q.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:r,chainNamespace:c}=e,{chainId:l}=me.getActiveNetworkProps(),f=r||l,d=q.state.activeCaipNetwork?.name===pe.UNSUPPORTED_NETWORK_NAME,h=q.getNetworkProp("supportsAllNetworks",c);if(this.setStatus("connected",c),!(d&&!h)&&f){let g=this.getCaipNetworks().find(w=>w.id.toString()===f.toString()),m=this.getCaipNetworks().find(w=>w.chainNamespace===c);if(!h&&!g&&!m){const w=this.getApprovedCaipNetworkIds()||[],v=w.find(C=>Qs.parseCaipNetworkId(C)?.chainId===f.toString()),x=w.find(C=>Qs.parseCaipNetworkId(C)?.chainNamespace===c);g=this.getCaipNetworks().find(C=>C.caipNetworkId===v),m=this.getCaipNetworks().find(C=>C.caipNetworkId===x||"deprecatedCaipNetworkId"in C&&C.deprecatedCaipNetworkId===x)}const y=g||m;y?.chainNamespace===q.state.activeChain?he.state.enableNetworkSwitch&&!he.state.allowUnsupportedChain&&q.state.activeCaipNetwork?.name===pe.UNSUPPORTED_NETWORK_NAME?q.showUnsupportedChainUI():this.setCaipNetwork(y):n||s&&this.setCaipNetworkOfNamespace(s,c),this.syncConnectedWalletInfo(c),Zs.isLowerCaseMatch(i,Me.state.address)||this.syncAccountInfo(i,y?.id,c),n?await this.syncBalance({address:i,chainId:y?.id,chainNamespace:c}):await this.syncBalance({address:i,chainId:s?.id,chainNamespace:c})}}async syncAccountInfo(e,n,s){const i=this.getCaipAddress(s),r=n||i?.split(":")[1];if(!r)return;const c=`${s}:${r}:${e}`;this.setCaipAddress(c,s),await this.syncIdentity({address:e,chainId:r,chainNamespace:s})}async syncReownName(e,n){try{const s=await this.getReownName(e);if(s[0]){const i=s[0];this.setProfileName(i.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=ve.getConnectorId(e),s=Yt.getProviderId(e);if(s===Uc.CONNECTOR_TYPE_ANNOUNCED||s===Uc.CONNECTOR_TYPE_INJECTED){if(n){const r=this.getConnectors().find(c=>{const l=c.id===n,f=c.info?.rdns===n,d=c.connectors?.some(h=>h.id===n||h.info?.rdns===n);return l||f||!!d});if(r){const{info:c,name:l,imageUrl:f}=r,d=f||this.getConnectorImage(r);this.setConnectedWalletInfo({name:l,icon:d,...c},e)}}}else if(s===Uc.CONNECTOR_TYPE_WALLET_CONNECT){const i=Yt.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===pe.CONNECTOR_ID.COINBASE_SDK||n===pe.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(f=>f.id===n),r=i?.name||"Coinbase Wallet",c=i?.imageUrl||this.getConnectorImage(i),l=i?.info;this.setConnectedWalletInfo({...l,name:r,icon:c},e)}}async syncBalance(e){!SM.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(s=>s.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,s){const i=this.getAdapter(s),r=q.getCaipNetworkByNamespace(s,n);if(i){const c=await i.getBalance({address:e,chainId:n,caipNetwork:r,tokens:this.options.tokens});return this.setBalance(c.balance,c.symbol,s),c}}async initializeUniversalAdapter(){const e=eoe.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};he.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await ey.init(n),he.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Oa.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{xe.setUri(n)},onConnect:()=>{xe.finalizeWcConnection()},onDisconnect:()=>{q.state.noAdapters&&this.resetAccount(e),xe.resetWcConnection()},onChainChanged:n=>{const s=q.state.activeChain,i=s&&ve.state.activeConnectorIds[s]===pe.CONNECTOR_ID.WALLET_CONNECT;if(s===e&&(q.state.noAdapters||i)){const r=this.getCaipNetworks().find(l=>l.id.toString()===n.toString()||l.caipNetworkId.toString()===n.toString()),c=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(n);return}c?.id.toString()!==r?.id.toString()&&c?.chainNamespace===r?.chainNamespace&&this.setCaipNetwork(r)}},onAccountsChanged:n=>{const s=q.state.activeChain,i=s&&ve.state.activeConnectorIds[s]===pe.CONNECTOR_ID.WALLET_CONNECT;if(s===e&&(q.state.noAdapters||i)&&n.length>0){const r=n[0];this.syncAccount({address:r.address,chainId:r.chainId,chainNamespace:r.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&Re.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){It.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Ci.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[s,i]=n??[],{message:r,alertErrorKey:c}=i??{};if(s&&r&&!this.reportedAlertErrors[s]){const l=Ci.ALERT_ERRORS[c];l&&(Zn.open(l,"error"),this.reportedAlertErrors[s]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const s=e;s.namespace=n,s.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=s)}async open(e){if(await this.injectModalUi(),e?.uri&&xe.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return st.open({...e,data:{swap:e.arguments}})}return st.open(e)}async close(){await this.injectModalUi(),st.close()}setLoading(e,n){st.setLoading(e,n)}async disconnect(e){await xe.disconnect({namespace:e})}getSIWX(){return he.state.siwx}getError(){return""}getChainId(){return q.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(s=>s.id===e.id);if(!n){Zn.open(Ci.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await q.switchActiveNetwork(n)}getWalletProvider(){return q.state.activeChain?Yt.state.providers[q.state.activeChain]:null}getWalletProviderType(){return Yt.getProviderId(q.state.activeChain)}subscribeProviders(e){return Yt.subscribeProviders(e)}getThemeMode(){return Gs.state.themeMode}getThemeVariables(){return Gs.state.themeVariables}setThemeMode(e){Gs.setThemeMode(e),QM(Gs.state.themeMode)}setTermsConditionsUrl(e){he.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){he.setPrivacyPolicyUrl(e)}setThemeVariables(e){Gs.setThemeVariables(e),Soe(Gs.state.themeVariables)}subscribeTheme(e){return Gs.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?xe.subscribe(e):(Zn.open(pe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?q.state.chains.get(e)?.accountState?.connectedWalletInfo:Me.state.connectedWalletInfo}getAccount(e){const n=e||q.state.activeChain,s=ve.getAuthConnector(n),i=q.getAccountData(n),r=me.getConnectedConnectorId(q.state.activeChain),c=xe.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const l=c.flatMap(f=>f.accounts.map(({address:d,type:h})=>Re.createAccount(n,d,h||"eoa")));if(i)return{allAccounts:l,caipAddress:i.caipAddress,address:Re.getPlainAddress(i.caipAddress),isConnected:!!i.caipAddress,status:i.status,embeddedWalletInfo:s&&r===pe.CONNECTOR_ID.AUTH?{user:i.user?{...i.user,username:me.getConnectedSocialUsername()}:void 0,authProvider:i.socialProvider||"email",accountType:Fr(n),isSmartAccountDeployed:!!i.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const s=()=>{const i=this.getAccount(n);i&&e(i)};n?q.subscribeChainProp("accountState",s,n):q.subscribe(s),ve.subscribe(s)}subscribeNetwork(e){return q.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Me.subscribeKey("connectedWalletInfo",e,n):Me.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Me.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){q.subscribeKey("activeCaipNetwork",e)}getState(){return Aa.state}getRemoteFeatures(){return he.state.remoteFeatures}subscribeState(e){return Aa.subscribe(e)}subscribeRemoteFeatures(e){return he.subscribeKey("remoteFeatures",e)}showErrorMessage(e){$r.showError(e)}showSuccessMessage(e){$r.showSuccess(e)}getEvent(){return{...It.state}}subscribeEvents(e){return It.subscribe(e)}replace(e){ze.replace(e)}redirect(e){ze.push(e)}popTransactionStack(e){ze.popTransactionStack(e)}isOpen(){return st.state.open}isTransactionStackEmpty(){return ze.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){he.setFeatures(e)}updateRemoteFeatures(e){he.setRemoteFeatures(e)}updateOptions(e){const s={...he.state||{},...e};he.setOptions(s)}setConnectMethodsOrder(e){he.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){he.setWalletFeaturesOrder(e)}setCollapseWallets(e){he.setCollapseWallets(e)}setSocialsOrder(e){he.setSocialsOrder(e)}getConnectMethodsOrder(){return O2.getConnectOrderMethod(he.state.features,ve.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const s=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(i=>i.id===s.id)||q.addNetwork(s)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===n)&&q.removeNetwork(e,n)}}let a8=!1;class Roe extends Moe{async open(e){ve.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&xe.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!a8&&Re.isClient()){if(await Sh(()=>import("./basic-Cyiy6uQu.js"),__vite__mapDeps([0,1])),await Sh(()=>import("./w3m-modal-B-PLHrie.js"),__vite__mapDeps([2,1])),!document.querySelector("w3m-modal")){const n=document.createElement("w3m-modal");!he.state.disableAppend&&!he.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",n)}a8=!0}}}const Poe="1.7.17";function $oe(t){return new Roe({...t,basic:!0,sdkVersion:`html-core-${Poe}`})}class AE{constructor({appKit:e,provider:n,config:s}){this.appKit=e,this.provider=n,this.config=s}static async init(e){const n=await vre.init({projectId:e.projectId,metadata:e.metadata}),s={networks:e.networks.flatMap(r=>r.chains),projectId:e.projectId,metadata:e.metadata,universalProvider:n,manualWCControl:!0},i=$oe(s);return new AE({appKit:i,provider:n,config:e})}async connect(){const e=this.config?.networks.reduce((n,s)=>(n[s.namespace]={...s||{},methods:s?.methods||[],events:s?.events||[],chains:s?.chains?.map(i=>i.caipNetworkId)||[]},n),{});try{await this.appKit.open();const n=await this.provider.connect({optionalNamespaces:e});if(!n)throw new Error("Error connecting to wallet: No session found");return await this.appKit.close(),{session:n}}catch(n){throw await this.appKit.close(),new Error(`Error connecting to wallet: ${n instanceof Error?n.message:"Unknown error"}`)}}async disconnect(){await this.appKit.disconnect(),await this.provider.disconnect()}async request(e,n){return await this.provider.request(e,n)}}var Uoe=Object.defineProperty,Loe=Object.defineProperties,koe=Object.getOwnPropertyDescriptors,Nm=Object.getOwnPropertySymbols,eR=Object.prototype.hasOwnProperty,tR=Object.prototype.propertyIsEnumerable,o8=(t,e,n)=>e in t?Uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,as=(t,e)=>{for(var n in e||(e={}))eR.call(e,n)&&o8(t,n,e[n]);if(Nm)for(var n of Nm(e))tR.call(e,n)&&o8(t,n,e[n]);return t},Na=(t,e)=>Loe(t,koe(e)),Boe=(t,e)=>{var n={};for(var s in t)eR.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Nm)for(var s of Nm(t))e.indexOf(s)<0&&tR.call(t,s)&&(n[s]=t[s]);return n},ju=class nR extends Error{constructor(e,n,s,i){super(e),this.message=e,this.code=n,this.data=s,this.cause=i,this.name="JsonRpcError",this.message=e,this.code=n,this.data=s,this.cause=i}static fromResponse(e){return new nR(e.message,e.code,e.data)}toString(){return`${this.name} (${this.code}): ${this.message}${this.data?`: ${JSON.stringify(this.data)}`:""}`}},joe=(t=>(t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UserRejection=-32e3]="UserRejection",t[t.MethodAddressMismatch=-32001]="MethodAddressMismatch",t[t.MethodAccessDenied=-32002]="MethodAccessDenied",t[t.UnknownError=-31e3]="UnknownError",t[t.UserCanceled=-31001]="UserCanceled",t))(joe||{}),sR="asigna-stx",Kv=(t,e)=>new Promise(n=>{function s(i){i.data.source===sR&&i.data[e]&&(n(i.data[e]),window.removeEventListener("message",s))}window.addEventListener("message",s),window.top.postMessage(Hoe(t,e),"*")}),zoe={authenticationRequest:async t=>Kv(t,"authenticationRequest"),transactionRequest:async t=>Kv(t,"transactionRequest"),request:async(t,e)=>Kv(e,t)},Hoe=(t,e)=>({source:sR,[e]:t}),Foe=()=>{typeof window>"u"||window.top!==window.self&&(window.AsignaProvider=zoe)};Foe();var Voe=[{id:"LeatherProvider",name:"Leather",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=",webUrl:"https://leather.io",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",mozillaAddOnsUrl:"https://leather.io/install-extension"},{id:"XverseProviders.BitcoinProvider",name:"Xverse Wallet",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==",webUrl:"https://xverse.app",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg",googlePlayStoreUrl:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",iOSAppStoreUrl:"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513",mozillaAddOnsUrl:"https://www.xverse.app/download"},{id:"AsignaProvider",name:"Asigna Multisig",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==",webUrl:"https://asigna.io",chromeWebStoreUrl:"https://stx.asigna.io/"},{id:"FordefiProviders.UtxoProvider",name:"Fordefi",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIiIGhlaWdodD0iNDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZmlsbD0iIzEwMTExNCIgZD0iTTAgMGg0MnY0MkgweiIvPgogIDxwYXRoIGQ9Ik0xOS40NyAyNi44OUg1djMuNTdhNC41NyA0LjU3IDAgMCAwIDQuNTggNC41N2g1LjgzbDQuMDYtOC4xNFoiIGZpbGw9IiM3OTk0RkYiLz4KICA8cGF0aCBkPSJNNSAxNy40aDI3LjU4bC0zLjIgNi43OEg1VjE3LjRaIiBmaWxsPSIjNDg2REZGIi8+CiAgPHBhdGggZD0iTTE0LjY3IDdINXY3LjY4aDMzVjdoLTkuNjd2NS43NGgtMlY3aC05LjY3djUuNzRoLTEuOTlWN1oiIGZpbGw9IiM1Q0QxRkEiLz4KPC9zdmc+Cg==",webUrl:"https://www.fordefi.com/",chromeWebStoreUrl:"https://chromewebstore.google.com/detail/fordefi/hcmehenccjdmfbojapcbcofkgdpbnlle"}],qoe={id:"WalletConnectProvider",name:"WalletConnect",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSJub25lIj48bWFzayBpZD0iYSIgd2lkdGg9IjQwMCIgaGVpZ2h0PSI0MDAiIHg9IjAiIHk9IjAiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHN0eWxlPSJtYXNrLXR5cGU6bHVtaW5hbmNlIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDQwMHY0MDBIMFYwWiIvPjwvbWFzaz48ZyBtYXNrPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjMzM5NkZGIiBkPSJNNDAwIDQwMEgwVjBoNDAwdjQwMFoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTIyLjUyIDE0OC45N2M0Mi43OS00MS43MyAxMTIuMTctNDEuNzMgMTU0Ljk2IDBsNS4xNSA1LjAyYTUuMjUgNS4yNSAwIDAgMSAwIDcuNTVsLTE3LjYyIDE3LjE4YTIuNzkgMi43OSAwIDAgMS0zLjg3IDBsLTcuMDktNi45Yy0yOS44NS0yOS4xMi03OC4yNS0yOS4xMi0xMDguMSAwbC03LjYgNy40YTIuNzkgMi43OSAwIDAgMS0zLjg3IDBsLTE3LjYxLTE3LjE5YTUuMjUgNS4yNSAwIDAgMSAwLTcuNTVsNS42NS01LjUxWm0xOTEuNCAzNS41MiAxNS42OCAxNS4zYTUuMjUgNS4yNSAwIDAgMSAwIDcuNTVsLTcwLjcgNjguOTRhNS41OCA1LjU4IDAgMCAxLTcuNzUgMGwtNTAuMTgtNDguOTNhMS40IDEuNCAwIDAgMC0xLjk0IDBsLTUwLjE4IDQ4LjkzYTUuNTggNS41OCAwIDAgMS03Ljc0IDBsLTcwLjctNjguOTRhNS4yNSA1LjI1IDAgMCAxIDAtNy41NmwxNS42Ny0xNS4yOWE1LjU4IDUuNTggMCAwIDEgNy43NSAwbDUwLjE4IDQ4Ljk0Yy41NC41MiAxLjQuNTIgMS45NCAwbDUwLjE4LTQ4Ljk0YTUuNTggNS41OCAwIDAgMSA3Ljc0IDBsNTAuMTggNDguOTRjLjU0LjUyIDEuNC41MiAxLjk0IDBsNTAuMTgtNDguOTRhNS41OCA1LjU4IDAgMCAxIDcuNzUgMFoiLz48L2c+PC9zdmc+",webUrl:"https://walletconnect.com/",chromeWebStoreUrl:""},NE="@stacks/connect",Woe={addresses:{stx:[],btc:[]},version:"0.0.1"},c8=t=>[...new Map(t.map(e=>[e.address,e])).values()].map(e=>{var n=Boe(e,[]);return"publicKey"in n&&delete n.publicKey,"derivationPath"in n&&delete n.derivationPath,"tweakedPublicKey"in n&&delete n.tweakedPublicKey,n});function Goe(t){try{let e=iy()||Woe,n=Na(as({},e),{updatedAt:Date.now(),addresses:as(as({},e.addresses),t.addresses&&{stx:t.addresses.stx&&c8([...e.addresses.stx,...t.addresses.stx]),btc:t.addresses.btc&&c8([...e.addresses.btc,...t.addresses.btc])})});localStorage.setItem(NE,lp(Mm(JSON.stringify(n))))}catch(e){console.warn("Failed to store data in localStorage:",e)}}function Koe(){try{localStorage.removeItem(NE)}catch(t){console.warn("Failed to clear localStorage:",t)}}function iy(){try{let t=localStorage.getItem(NE);return t?JSON.parse(b7(tl(t))):null}catch(t){return console.warn("Failed to get data from localStorage:",t),null}}function Yoe(){let t=dD();t&&"disconnect"in t&&t.disconnect(),_7(),Koe(),new uce().store.deleteSessionData()}function iR(){let t=iy();return t?.addresses.stx.length>0||t?.addresses.btc.length>0}var Xoe=["stx_signMessage","stx_signTransaction","stx_signStructuredMessage","stx_getAccounts","stx_getAddresses","stx_updateProfile","stx_transferStx","stx_transferSip10Ft","stx_transferSip9Nft","stx_callContract","stx_deployContract","sendTransfer","signPsbt","getAddresses"],R2={id:1,chainNamespace:"stacks",caipNetworkId:"stacks:1",name:"Stacks",nativeCurrency:{name:"STX",symbol:"STX",decimals:6},rpcUrls:{default:{http:["https://api.mainnet.hiro.so"]}}},Qoe={projectId:"your_project_id",metadata:{name:"Universal Connector",description:"Universal Connector",url:"https://appkit.reown.com",icons:["https://appkit.reown.com/icon.png"]},networks:[{namespace:"stacks",chains:[R2],methods:Xoe,events:["stx_chainChanged","stx_accountsChanged"]},{namespace:"bip122",chains:[ZM],methods:["signMessage","sendTransfer","signPsbt","getAccountAddresses"],events:["bip122_addressesChanged"]}]};function l8(t){return{jsonrpc:"2.0",id:1,result:t}}var Zoe=class{constructor(t){this.connector=t}async connect(){try{let{session:t}=await this.connector.connect();return t}catch(t){throw console.error(">> WalletConnectProvider connect error",t),t}}get stacksAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session,n=e?.sessionProperties.stacks_getAddresses,s=JSON.parse(n||"[]"),i=[...e.namespaces.stacks.accounts.map(r=>({address:r.split(":")[2],publicKey:""}))||[],...s||[]].sort(r=>r.publicKey?1:-1);return Array.from(new Map(i.map(r=>[r.address,r])).values())}get btcAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session,n=e?.sessionProperties.bip122_getAccountAddresses,s=JSON.parse(n||"{}"),i=e.namespaces.bip122.accounts.map(c=>({address:c.split(":")[2],publicKey:""})),r=[...s?.payment.map(c=>Na(as({},c),{purpose:"payment"}))||[],...s?.ordinal.map(c=>Na(as({},c),{purpose:"ordinal"}))||[],...i||[]].sort(c=>c.publicKey?1:-1).sort((c,l)=>c?.address.length-l?.address.length);return Array.from(new Map(r.map(c=>[c.address,c])).values())}async getAddresses(){var t;let e=(t=this.connector.provider)==null?void 0:t.session;e||(e=await this.connect());let n=this.stacksAddresses||[],s=this.btcAddresses||[];return{addresses:[...n,...s]}}validateRpcMethod(t){var e,n,s,i;if(["getAddresses","stx_getAccounts","stx_getAddresses"].includes(t))return;if(!((e=this.connector.provider)!=null&&e.session))throw new Error("WalletConnectProvider not connected. Please connect first.");let r=(n=this.connector.provider)==null?void 0:n.session.namespaces,c=((s=r.stacks)==null?void 0:s.methods)||[],l=((i=r.bip122)==null?void 0:i.methods)||[];if(![...c,...l].includes(t))throw new Error(`WalletConnectProvider does not support method ${t}. Please use a supported method.`)}getTargetCaipNetworkId(t){var e,n,s,i,r,c,l,f;if(["getAddresses","stx_getAccounts","stx_getAddresses"].includes(t)||(i=(s=(n=(e=this.connector.provider)==null?void 0:e.session)==null?void 0:n.namespaces)==null?void 0:s.stacks)!=null&&i.methods.includes(t))return R2.caipNetworkId;if((f=(l=(c=(r=this.connector.provider)==null?void 0:r.session)==null?void 0:c.namespaces)==null?void 0:l.bip122)!=null&&f.methods.includes(t))return ZM.caipNetworkId;throw new Error(`WalletConnectProvider does not support method ${t}. Please use a supported method.`)}async request(t,e){var n,s,i,r;try{this.validateRpcMethod(t);let c=this.getTargetCaipNetworkId(t);switch(t){case"getAddresses":case"stx_getAddresses":case"stx_getAccounts":let l=await this.getAddresses();return l8(l);case"stx_signMessage":let f=((r=(i=(s=(n=this.connector.provider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i.stacks)==null?void 0:r.accounts[0]).split(":")[2],d=await this.connector.request({method:t,params:as({address:f},e)},c);return l8(d);default:return await this.connector.request({method:t,params:e},c)}}catch(c){throw console.error(">> WalletConnectProvider request error",c),c}}async disconnect(){await this.connector.disconnect()}},Joe=async t=>{let e=await AE.init(Na(as({},Qoe),{projectId:t})),n=new Zoe(e);window.WalletConnectProvider=n};async function u8(t,e,n){var s;try{let i=await t.request(e,n);if("error"in i)throw ju.fromResponse(i.error);return i.result}catch(i){if(i instanceof ju)throw i;if("jsonrpc"in i)throw ju.fromResponse(i.error);let r=(s=i.code)!=null?s:-31e3;throw new ju(i.message,r,i.data,i)}}function ece(t){return t?async function(e,n,s){let i=await u8(e,n,s);if((n==="getAddresses"||n==="wallet_connect")&&"addresses"in i){let{stx:r,btc:c}=cce(i.addresses).reduce((l,f)=>(l[f.address.startsWith("S")?"stx":"btc"].push(f),l),{stx:[],btc:[]});Goe({addresses:{stx:r,btc:c}})}return i}:u8}async function TE(...t){let{options:e,method:n,params:s}=tce(t),i=Voe;e!=null&&e.walletConnectProjectId&&(await Joe(e.walletConnectProjectId).catch(console.error),i=[...i,qoe]);let r=Object.assign({provider:dD(),defaultProviders:i,forceWalletSelect:!1,persistWalletSelect:!0,enableOverrides:!0,enableLocalStorage:!0},rce(e)),c=ace(r.enableOverrides,ece(r.enableLocalStorage));if(r.provider&&!r.forceWalletSelect){let{method:l,params:f}=h8(r.provider,n,s,r.enableOverrides);return await c(r.provider,l,g8(f))}if(typeof window<"u")return SB(),new Promise((l,f)=>{let d=document.createElement("connect-modal");d.defaultProviders=f8(r.approvedProviderIds,i),d.installedProviders=f8(r.approvedProviderIds,R7(i));let h=document.body.style.overflow;document.body.style.overflow="hidden";let g=()=>{d.remove(),document.body.style.overflow=h};d.callback=y=>{g();let w=Ax(y),{method:v,params:x}=h8(w,n,s,r.enableOverrides),C=oce(r.persistWalletSelect,y);l(c(w,v,g8(x)).then(C))},d.cancelCallback=()=>{g(),f(new ju("User canceled the request",-31001))},document.body.appendChild(d);let m=y=>{y.key==="Escape"&&(document.removeEventListener("keydown",m),d.remove(),f(new ju("User canceled the request",-31001)))};document.addEventListener("keydown",m)})}function tce(t){return typeof t[0]=="string"?{method:t[0],params:t[1]}:{options:t[0],method:t[1],params:t[2]}}function f8(t,e){return t?e.filter(n=>t.includes(n.id)):e}function nce(t){return TE(Na(as({},t),{forceWalletSelect:!0}),"getAddresses",void 0)}function D0(t){return sce(t)||ice(t)}function sce(t){return"signMultipleTransactions"in t&&"createRepeatInscriptions"in t&&!(t!=null&&t.isLeather)&&!(t!=null&&t.isFordefi)}function ice(t){return"isFordefi"in t&&!!t.isFordefi}function d8(t){return"isLeather"in t&&!!t.isLeather}function rce(t){if(t===void 0)return{};let e={};for(let[n,s]of Object.entries(t))s!==void 0&&(e[n]=s);return e}function ace(t,e){return t?async(n,s,i)=>{let r=await e(n,s,i),c=as({},r);return r!==null&&"txId"in r&&r.txId&&!("txid"in c)&&(c.txid=r.txId),r!==null&&"hex"in r&&r.hex&&typeof r.hex=="string"&&!("psbt"in c)&&(c.psbt=fD.encode(tl(r.hex))),c}:e}function h8(t,e,n,s=!0){if(!s)return{method:e,params:n};if(D0(t)&&["getAddresses","stx_getAddresses"].includes(e))return{method:"wallet_connect",params:n};if(D0(t)&&e==="sendTransfer"){let i=Na(as({},n),{recipients:n.recipients.map(r=>Na(as({},r),{amount:Number(r.amount)})),network:void 0});return{method:e,params:i}}if(D0(t)&&e==="signPsbt"){let i=n.signInputs;if(!i)return{method:e,params:n};let r={};for(let l of i)typeof l!="number"&&l.address&&(r[l.address]||(r[l.address]=[]),r[l.address].push(l.index));let c={psbt:n.psbt,signInputs:r,broadcast:n.broadcast};return{method:e,params:c}}if(!D0(t)&&e==="stx_signMessage"){let i=as({},n);return delete i.publicKey,{method:e,params:i}}if(d8(t)&&e==="sendTransfer"){let i=Na(as({},n),{recipients:n.recipients.map(r=>Na(as({},r),{amount:r.amount.toString()}))});return{method:e,params:i}}if(d8(t)&&e==="signPsbt"){let i={hex:lp(fD.decode(n.psbt)),signAtIndex:n.signInputs.map(r=>typeof r=="number"?r:r.index),allowedSighash:n.allowedSighash,broadcast:n.broadcast,network:n.network};return{method:e,params:i}}return{method:e,params:n}}var p8=["stx-postcondition","ft-postcondition","nft-postcondition"];function g8(t){if(!t||typeof t!="object")return t;let e=as({},t);for(let[n,s]of Object.entries(t)){if(typeof s=="bigint"){e[n]=s.toString();continue}if(s){if(Array.isArray(s)){e[n]=s.map(i=>typeof i=="bigint"?i.toString():!i||typeof i!="object"||!("type"in i)?i:p8.includes(i.type)?EN(i):SN(i));continue}typeof s=="object"&&"type"in s&&(e[n]=p8.includes(s.type)?EN(s):SN(s))}}return JSON.parse(JSON.stringify(e))}function oce(t,e){return function(n){if(t)try{O7(e)}catch{}return n}}function cce(t){return t.slice().sort((e,n)=>{let s="purpose"in e&&e.purpose==="payment",i="purpose"in n&&n.purpose==="payment";return s&&!i?-1:!s&&i?1:0})}typeof window<"u"&&(window.__CONNECT_VERSION__="__VERSION__");var lce="blockstack-session",uce=class{constructor(t){t!=null&&t.appConfig&&(this.appConfig=t.appConfig),typeof window>"u"&&typeof self>"u"?this.store=new fce:this.store=new dce}makeAuthRequestToken(){}generateAndStoreTransitKey(){}getAuthResponseToken(){}isSignInPending(){return!1}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(){return Promise.resolve(this.loadUserData())}loadUserData(){let t=this.store.getSessionData().userData;if(!t)throw new wx("No user data found. Did the user sign in?");return t}encryptContent(){}decryptContent(){}signUserOut(t){this.store.deleteSessionData(),t&&typeof location<"u"&&location.href&&(location.href=t)}},rR=class{constructor(t){t&&this.setSessionData(t)}getSessionData(){throw new Error("Abstract class")}setSessionData(t){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}},fce=class extends rR{constructor(t){super(t),this.sessionData||this.setSessionData({})}getSessionData(){if(!this.sessionData)throw new wx("No session data was found.");return this.sessionData}setSessionData(t){return this.sessionData=t,!0}deleteSessionData(){return this.setSessionData({}),!0}},dce=class extends rR{constructor(t){var e;super(t),this.key=typeof((e=t?.storeOptions)==null?void 0:e.localStorageKey)=="string"?t.storeOptions.localStorageKey:lce,localStorage.getItem(this.key)||this.setSessionData({})}getSessionData(){let t=localStorage.getItem(this.key);if(!t)throw new wx("No session data was found in localStorage");return JSON.parse(t)}setSessionData(t){return localStorage.setItem(this.key,JSON.stringify(t)),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData({}),!0}},hce=(t=>(t.ContractCall="contract_call",t.ContractDeploy="smart_contract",t.STXTransfer="token_transfer",t))(hce||{}),pce=(t=>(t.BUFFER="buffer",t.UINT="uint",t.INT="int",t.PRINCIPAL="principal",t.BOOL="bool",t))(pce||{}),gce=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ALL=1]="ALL",t[t.NONE=2]="NONE",t[t.SINGLE=3]="SINGLE",t[t.ANYONECANPAY=128]="ANYONECANPAY",t))(gce||{});const mce=async(t,e)=>{try{if(iR()){const s=iy();if(s?.addresses?.stx?.[0]?.address){t(s.addresses.stx[0].address);return}}const n=await nce();if(n?.addresses?.stx?.[0]?.address){const s=n.addresses.stx[0].address;t(s)}}catch(n){console.error("Wallet connection error:",n),e&&e()}},yce=()=>{Yoe()},wce=()=>iR(),vce=()=>iy()?.addresses?.stx?.[0]?.address||null,aR="ST28MDT9SAV31XJ73M2W3W5DVC1NWHYX713Q6SEP5",oR="quest-nft",bce=async()=>{try{const t=await TE("stx_callContract",{contract:`${aR}.${oR}`,functionName:"mint-quest-pass",functionArgs:[],postConditionMode:om.Allow});return console.log("Quest Pass minted, txId:",t.txid),{success:!0,txId:t.txid,message:"Quest Pass NFT minted successfully!"}}catch(t){throw console.error("Error minting Quest Pass:",t),t}},cR=async t=>{try{const e=await TE("stx_callContract",{contract:`${aR}.${oR}`,functionName:"mint-quest-badge",functionArgs:[Lj(t)],postConditionMode:om.Allow});return console.log(`Quest Badge Level ${t} minted, txId:`,e.txid),{success:!0,txId:e.txid,message:`Quest Badge Level ${t} minted successfully!`}}catch(e){throw console.error(`Error minting Quest Badge Level ${t}:`,e),e}},IE=()=>{const{walletConnected:t,walletAddress:e,connectWallet:n,disconnectWallet:s}=La();Ta.useEffect(()=>{if(wce()){const l=vce();l&&n(l)}},[]);const i=async()=>{await mce(l=>{n(l)},()=>{console.log("Wallet connection cancelled")})},r=()=>{yce(),s()},c=l=>l?`${l.slice(0,6)}...${l.slice(-4)}`:"";return z.jsx("div",{className:"flex items-center gap-4",children:t?z.jsxs("div",{className:"flex items-center gap-3",children:[z.jsx("div",{className:"bg-game-blue/20 border-2 border-game-yellow px-4 py-2 rounded-lg",children:z.jsx("span",{className:"font-retro text-sm",children:c(e)})}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-red-700 transition-all",children:"Disconnect"})]}):z.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"flex items-center gap-2 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:[z.jsx(p7,{}),"Connect Wallet"]})})},xce=({onStartGame:t,onMintPass:e})=>{const{walletConnected:n,questPassMinted:s}=La();return z.jsxs("div",{className:"min-h-screen bg-game-dark flex flex-col items-center justify-center p-8",children:[z.jsxs(Ae.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[z.jsx(Ae.h1,{className:"font-pixel text-4xl md:text-6xl text-game-yellow text-shadow-glow mb-4",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),z.jsx(Ae.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"font-retro text-xl text-white mb-8 max-w-2xl",children:"A blockchain word guessing game on Stacks (Bitcoin Layer 2)"}),z.jsx("div",{className:"mb-12 flex justify-center",children:z.jsx(IE,{})}),z.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-8 mb-8 max-w-3xl",children:[z.jsx("h2",{className:"font-pixel text-2xl text-game-yellow mb-6",children:"How to Play"}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[z.jsxs("div",{className:"flex items-start gap-3",children:[z.jsx(_m,{className:"text-game-yellow text-3xl mt-1"}),z.jsxs("div",{children:[z.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Word Quest"}),z.jsx("p",{className:"font-retro text-gray-300",children:"Guess 5-letter words in 6 attempts! Stake STX and win up to 5x your deposit"})]})]}),z.jsxs("div",{className:"flex items-start gap-3",children:[z.jsx(mx,{className:"text-blue-400 text-3xl mt-1"}),z.jsxs("div",{children:[z.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Smart Rewards"}),z.jsx("p",{className:"font-retro text-gray-300",children:"Win faster for bigger multipliers! 5x for 1 attempt, down to 1x for 5-6 attempts"})]})]}),z.jsxs("div",{className:"flex items-start gap-3",children:[z.jsx(wb,{className:"text-green-400 text-3xl mt-1"}),z.jsxs("div",{children:[z.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Blockchain Gaming"}),z.jsx("p",{className:"font-retro text-gray-300",children:"All games are recorded on Stacks blockchain with transparent rewards"})]})]}),z.jsxs("div",{className:"flex items-start gap-3",children:[z.jsx(Kg,{className:"text-purple-400 text-3xl mt-1"}),z.jsxs("div",{children:[z.jsx("h3",{className:"font-pixel text-sm text-white mb-2",children:"Multiple Modes"}),z.jsx("p",{className:"font-retro text-gray-300",children:"Play Word Quest, Physics Mode, or Classic Mining - all with blockchain rewards!"})]})]})]})]}),z.jsxs("div",{className:"flex flex-col md:flex-row gap-6 justify-center items-center",children:[z.jsxs(Ae.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t("word"),disabled:!n,className:`flex items-center gap-3 px-8 py-4 rounded-lg font-pixel text-lg transition-all ${n?"bg-game-yellow text-game-dark hover:box-shadow-neon cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[z.jsx(Kg,{}),"Play Word Quest"]}),z.jsxs(Ae.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t("physics"),disabled:!n,className:`flex items-center gap-3 px-8 py-4 rounded-lg font-pixel text-sm transition-all ${n?"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[z.jsx(Kg,{}),"Physics Mode"]}),z.jsxs(Ae.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t("classic"),disabled:!n,className:`flex items-center gap-3 px-8 py-4 rounded-lg font-pixel text-sm transition-all ${n?"bg-purple-600 text-white hover:bg-purple-700 cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[z.jsx(Kg,{}),"Classic Mode"]}),n&&!s&&z.jsxs(Ae.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:e,className:"flex items-center gap-3 bg-green-600 text-white px-8 py-4 rounded-lg font-pixel text-lg hover:bg-green-700 transition-all",children:[z.jsx(wb,{}),"Mint Quest Pass"]})]}),!n&&z.jsx(Ae.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"font-retro text-gray-400 mt-6",children:" Connect your wallet to start playing"})]}),z.jsx(Ae.footer,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"absolute bottom-4 text-center font-retro text-gray-500",children:"Built on Stacks  Powered by Bitcoin"})]})},Ece=({onLevelUp:t})=>{const{mineBlock:e,minedBlocks:n}=La(),[s,i]=ue.useState(null),[r,c]=ue.useState({}),l=10,f=Array.from({length:l*l},(m,y)=>y),d=m=>{if(n.includes(m))return;const y=e(m);y&&(i(m),c(w=>({...w,[m]:y.result})),setTimeout(()=>{i(null),y.levelUp&&t(y.newLevel)},800))},h=m=>{const y=r[m];if(!y)return"?";switch(y){case"coin":return z.jsx(_m,{className:"text-yellow-400 text-2xl"});case"crystal":return z.jsx(mx,{className:"text-blue-400 text-2xl"});case"trap":return z.jsx(Z6,{className:"text-red-500 text-2xl"});case"empty":return z.jsx("span",{className:"text-gray-500 text-2xl",children:""});default:return"?"}},g=m=>{if(!n.includes(m))return"bg-gradient-to-br from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700";switch(r[m]){case"coin":return"bg-gradient-to-br from-yellow-600 to-yellow-800";case"crystal":return"bg-gradient-to-br from-blue-600 to-blue-800";case"trap":return"bg-gradient-to-br from-red-600 to-red-800";case"empty":return"bg-gradient-to-br from-gray-600 to-gray-800";default:return"bg-gray-700"}};return z.jsx("div",{className:"flex justify-center items-center p-4",children:z.jsx("div",{className:"grid grid-cols-10 gap-1 md:gap-2 max-w-4xl",children:f.map(m=>{const y=n.includes(m),w=s===m;return z.jsx(Ae.button,{onClick:()=>d(m),disabled:y,className:`
                w-10 h-10 md:w-14 md:h-14 lg:w-16 lg:h-16
                rounded-lg border-2 border-game-yellow/30
                flex items-center justify-center
                transition-all duration-300
                ${g(m)}
                ${y?"cursor-not-allowed":"cursor-pointer hover:border-game-yellow"}
                ${w?"border-game-yellow box-shadow-neon":""}
              `,whileHover:y?{}:{scale:1.1},whileTap:y?{}:{scale:.9},animate:w?{rotateY:[0,180],scale:[1,1.2,1]}:{},transition:{duration:.6},children:z.jsx(Gu,{mode:"wait",children:y?z.jsx(Ae.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:.3},children:h(m)},"result"):z.jsx(Ae.span,{className:"text-game-yellow text-2xl md:text-3xl font-pixel",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:"?"},"question")})},m)})})})},lR=({onMintBadge:t})=>{const{coins:e,crystals:n,traps:s,level:i,xp:r,questBadges:c}=La(),l=i*500,f=r/l*100;return z.jsxs("div",{className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-6 w-full max-w-md",children:[z.jsx("h2",{className:"font-pixel text-xl text-game-yellow mb-6 text-center",children:"Inventory"}),z.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[z.jsxs(Ae.div,{whileHover:{scale:1.05},className:"bg-yellow-900/30 border border-yellow-600 rounded-lg p-4 flex items-center gap-3",children:[z.jsx(_m,{className:"text-yellow-400 text-3xl"}),z.jsxs("div",{children:[z.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Coins"}),z.jsx("p",{className:"font-pixel text-xl text-white",children:e})]})]}),z.jsxs(Ae.div,{whileHover:{scale:1.05},className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4 flex items-center gap-3",children:[z.jsx(mx,{className:"text-blue-400 text-3xl"}),z.jsxs("div",{children:[z.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Crystals"}),z.jsx("p",{className:"font-pixel text-xl text-white",children:n})]})]}),z.jsxs(Ae.div,{whileHover:{scale:1.05},className:"bg-red-900/30 border border-red-600 rounded-lg p-4 flex items-center gap-3",children:[z.jsx(Z6,{className:"text-red-400 text-3xl"}),z.jsxs("div",{children:[z.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Traps"}),z.jsx("p",{className:"font-pixel text-xl text-white",children:s})]})]}),z.jsxs(Ae.div,{whileHover:{scale:1.05},className:"bg-purple-900/30 border border-purple-600 rounded-lg p-4 flex items-center gap-3",children:[z.jsx(tD,{className:"text-purple-400 text-3xl"}),z.jsxs("div",{children:[z.jsx("p",{className:"font-retro text-gray-300 text-sm",children:"Level"}),z.jsx("p",{className:"font-pixel text-xl text-white",children:i})]})]})]}),z.jsxs("div",{className:"mb-6",children:[z.jsxs("div",{className:"flex justify-between items-center mb-2",children:[z.jsx("span",{className:"font-retro text-sm text-gray-300",children:"XP Progress"}),z.jsxs("span",{className:"font-retro text-sm text-game-yellow",children:[r," / ",l]})]}),z.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 overflow-hidden border border-game-yellow/50",children:z.jsx(Ae.div,{className:"bg-gradient-to-r from-game-yellow to-yellow-600 h-full",initial:{width:0},animate:{width:`${f}%`},transition:{duration:.5}})})]}),c.length>0&&z.jsxs("div",{className:"mb-4",children:[z.jsxs("h3",{className:"font-pixel text-sm text-game-yellow mb-3 flex items-center gap-2",children:[z.jsx(h7,{className:"text-yellow-400"}),"Quest Badges"]}),z.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((d,h)=>z.jsx(Ae.div,{initial:{scale:0},animate:{scale:1},className:"bg-gradient-to-br from-yellow-600 to-orange-600 border-2 border-yellow-400 rounded-lg px-3 py-2",children:z.jsxs("span",{className:"font-pixel text-xs text-white",children:["Lvl ",d.level]})},h))})]}),i>c.length&&z.jsxs(Ae.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:from-green-500 hover:to-green-600 transition-all border-2 border-green-400",children:[" Mint Level ",i," Badge"]})]})},uR=({isOpen:t,level:e,onClose:n,onMintBadge:s})=>z.jsx(Gu,{children:t&&z.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:z.jsxs(Ae.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",duration:.8},className:"bg-gradient-to-br from-game-dark to-purple-900 border-4 border-game-yellow rounded-lg p-8 max-w-md w-full text-center relative overflow-hidden",children:[[...Array(20)].map((i,r)=>z.jsx(Ae.div,{className:"absolute",initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:Math.random()*400-200,y:Math.random()*400-200},transition:{duration:2,delay:Math.random()*.5,repeat:1/0,repeatDelay:Math.random()*2},children:z.jsx(f7,{className:"text-game-yellow"})},r)),z.jsx(Ae.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"relative z-10",children:z.jsx(tD,{className:"text-8xl text-game-yellow mx-auto mb-4"})}),z.jsx(Ae.h2,{className:"font-pixel text-3xl text-game-yellow mb-2 relative z-10",animate:{scale:[1,1.05,1]},transition:{duration:.5,repeat:1/0},children:"LEVEL UP!"}),z.jsxs(Ae.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"font-retro text-2xl text-white mb-6 relative z-10",children:["You've reached Level ",e,"!"]}),z.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-game-blue/20 border border-game-yellow/50 rounded-lg p-4 mb-6 relative z-10",children:[z.jsx(yx,{className:"text-yellow-400 text-4xl mx-auto mb-2"}),z.jsxs("p",{className:"font-retro text-gray-300",children:["Congratulations! You can now mint your Level ",e," Quest Badge NFT to commemorate this achievement!"]})]}),z.jsxs("div",{className:"flex gap-4 relative z-10",children:[z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Continue"}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n(),s()},className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:from-green-500 hover:to-green-600 transition-all border-2 border-green-400",children:"Mint Badge"})]})]})})}),DE=({isOpen:t,onClose:e,type:n,level:s,onConfirm:i})=>{const[r,c]=ue.useState(!1),[l,f]=ue.useState(!1),d=async()=>{c(!0),await i(),c(!1),f(!0),setTimeout(()=>{f(!1),e()},2e3)},h=n==="pass",g=h?"Mint Quest Pass":`Mint Quest Badge Level ${s}`,m=h?"Your Quest Pass NFT grants you access to the Block Quest adventure. This is your proof of participation on the blockchain!":`Congratulations on reaching Level ${s}! Mint your Quest Badge NFT to commemorate this achievement on the blockchain.`,y=h?z.jsx(wb,{className:"text-6xl"}):z.jsx(yx,{className:"text-6xl"});return z.jsx(Gu,{children:t&&z.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:z.jsxs(Ae.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:w=>w.stopPropagation(),className:"bg-game-dark border-4 border-game-yellow rounded-lg p-8 max-w-md w-full relative",children:[z.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:z.jsx(d7,{className:"text-2xl"})}),z.jsx("div",{className:"text-center",children:l?z.jsxs(Ae.div,{initial:{scale:0},animate:{scale:1},className:"text-green-400",children:[z.jsx(Ae.div,{animate:{rotate:360},transition:{duration:1},children:""}),z.jsx("h2",{className:"font-pixel text-2xl mt-4",children:"Success!"}),z.jsx("p",{className:"font-retro text-lg mt-2",children:"NFT Minted Successfully"})]}):z.jsxs(z.Fragment,{children:[z.jsx(Ae.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"text-game-yellow mb-4 flex justify-center",children:y}),z.jsx("h2",{className:"font-pixel text-2xl text-game-yellow mb-4",children:g}),z.jsx("p",{className:"font-retro text-gray-300 mb-6",children:m}),z.jsxs("div",{className:"bg-game-blue/20 border border-game-yellow/50 rounded-lg p-4 mb-6",children:[z.jsx("p",{className:"font-retro text-sm text-gray-400 mb-2",children:"NFT Details:"}),z.jsxs("ul",{className:"font-retro text-sm text-white space-y-1 text-left",children:[z.jsxs("li",{children:[" Type: ",h?"Quest Pass":"Quest Badge"]}),!h&&z.jsxs("li",{children:[" Level: ",s]}),z.jsx("li",{children:" Network: Stacks Testnet"}),z.jsx("li",{children:" Gas Fee: ~0.001 STX"})]})]}),z.jsxs("div",{className:"flex gap-4",children:[z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,disabled:r,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all disabled:opacity-50",children:"Cancel"}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,disabled:r,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:r?z.jsxs(z.Fragment,{children:[z.jsx(u7,{className:"animate-spin"}),"Minting..."]}):"Mint NFT"})]})]})})]})})})},Sce=({onBackHome:t})=>{const{level:e,resetGame:n,walletAddress:s,mintQuestBadge:i}=La(),[r,c]=ue.useState(!1),[l,f]=ue.useState(!1),[d,h]=ue.useState(1),g=v=>{h(v),c(!0)},m=()=>{f(!0)},y=async()=>{try{(await cR(e)).success&&i(e)}catch(v){console.error("Error minting Quest Badge:",v)}},w=()=>{window.confirm("Are you sure you want to reset your progress? This cannot be undone.")&&n()};return z.jsxs("div",{className:"min-h-screen bg-game-dark p-4",children:[z.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:z.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4",children:[z.jsx(Ae.h1,{className:"font-pixel text-2xl md:text-3xl text-game-yellow",animate:{opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),z.jsxs("div",{className:"flex items-center gap-3",children:[z.jsx(IE,{}),z.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:"bg-orange-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-orange-700 transition-all flex items-center gap-2",children:[z.jsx(eD,{}),"Reset"]}),z.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-game-blue text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-blue-700 transition-all flex items-center gap-2",children:[z.jsx(J6,{}),"Home"]})]})]})}),z.jsx("div",{className:"max-w-7xl mx-auto",children:z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[z.jsx("div",{className:"lg:col-span-2",children:z.jsxs(Ae.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4",children:[z.jsx("h2",{className:"font-pixel text-xl text-game-yellow mb-4 text-center",children:"Mining Grid"}),z.jsx(Ece,{onLevelUp:g}),z.jsx("p",{className:"font-retro text-center text-gray-400 mt-4",children:"Click blocks to mine treasures!  Coins   Crystals   Traps"})]})}),z.jsx(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"flex justify-center lg:justify-start",children:z.jsx(lR,{onMintBadge:m})})]})}),z.jsx(uR,{isOpen:r,level:d,onClose:()=>c(!1),onMintBadge:m}),z.jsx(DE,{isOpen:l,onClose:()=>f(!1),type:"badge",level:e,onConfirm:y})]})};var K0={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Cce=K0.exports,m8;function Ace(){return m8||(m8=1,(function(t,e){(function(s,i){t.exports=i()})(Cce,function(){return(function(n){var s={};function i(r){if(s[r])return s[r].exports;var c=s[r]={i:r,l:!1,exports:{}};return n[r].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=n,i.c=s,i.d=function(r,c,l){i.o(r,c)||Object.defineProperty(r,c,{enumerable:!0,get:l})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,c){if(c&1&&(r=i(r)),c&8||c&4&&typeof r=="object"&&r&&r.__esModule)return r;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),c&2&&typeof r!="string")for(var f in r)i.d(l,f,(function(d){return r[d]}).bind(null,f));return l},i.n=function(r){var c=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(c,"a",c),c},i.o=function(r,c){return Object.prototype.hasOwnProperty.call(r,c)},i.p="",i(i.s=20)})([(function(n,s){var i={};n.exports=i,(function(){i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(c,l){var f,d;typeof l=="boolean"?(f=2,d=l):(f=1,d=!0);for(var h=f;h<arguments.length;h++){var g=arguments[h];if(g)for(var m in g)d&&g[m]&&g[m].constructor===Object&&(!c[m]||c[m].constructor===Object)?(c[m]=c[m]||{},i.extend(c[m],d,g[m])):c[m]=g[m]}return c},i.clone=function(c,l){return i.extend({},l,c)},i.keys=function(c){if(Object.keys)return Object.keys(c);var l=[];for(var f in c)l.push(f);return l},i.values=function(c){var l=[];if(Object.keys){for(var f=Object.keys(c),d=0;d<f.length;d++)l.push(c[f[d]]);return l}for(var h in c)l.push(c[h]);return l},i.get=function(c,l,f,d){l=l.split(".").slice(f,d);for(var h=0;h<l.length;h+=1)c=c[l[h]];return c},i.set=function(c,l,f,d,h){var g=l.split(".").slice(d,h);return i.get(c,l,0,-1)[g[g.length-1]]=f,f},i.shuffle=function(c){for(var l=c.length-1;l>0;l--){var f=Math.floor(i.random()*(l+1)),d=c[l];c[l]=c[f],c[f]=d}return c},i.choose=function(c){return c[Math.floor(i.random()*c.length)]},i.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},i.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},i.isFunction=function(c){return typeof c=="function"},i.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},i.isString=function(c){return toString.call(c)==="[object String]"},i.clamp=function(c,l,f){return c<l?l:c>f?f:c},i.sign=function(c){return c<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(c,l){return c=typeof c<"u"?c:0,l=typeof l<"u"?l:1,c+r()*(l-c)};var r=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[c]||(i.warn(c),i._warnedOnce[c]=!0)},i.deprecated=function(c,l,f){c[l]=i.chain(function(){i.warnOnce(" deprecated ",f)},c[l])},i.nextId=function(){return i._nextId++},i.indexOf=function(c,l){if(c.indexOf)return c.indexOf(l);for(var f=0;f<c.length;f++)if(c[f]===l)return f;return-1},i.map=function(c,l){if(c.map)return c.map(l);for(var f=[],d=0;d<c.length;d+=1)f.push(l(c[d]));return f},i.topologicalSort=function(c){var l=[],f=[],d=[];for(var h in c)!f[h]&&!d[h]&&i._topologicalSort(h,f,d,c,l);return l},i._topologicalSort=function(c,l,f,d,h){var g=d[c]||[];f[c]=!0;for(var m=0;m<g.length;m+=1){var y=g[m];f[y]||l[y]||i._topologicalSort(y,l,f,d,h)}f[c]=!1,l[c]=!0,h.push(c)},i.chain=function(){for(var c=[],l=0;l<arguments.length;l+=1){var f=arguments[l];f._chained?c.push.apply(c,f._chained):c.push(f)}var d=function(){for(var h,g=new Array(arguments.length),m=0,y=arguments.length;m<y;m++)g[m]=arguments[m];for(m=0;m<c.length;m+=1){var w=c[m].apply(h,g);typeof w<"u"&&(h=w)}return h};return d._chained=c,d},i.chainPathBefore=function(c,l,f){return i.set(c,l,i.chain(f,i.get(c,l)))},i.chainPathAfter=function(c,l,f){return i.set(c,l,i.chain(i.get(c,l),f))},i.setDecomp=function(c){i._decomp=c},i.getDecomp=function(){var c=i._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof Jn<"u"&&(c=Jn.decomp)}catch{c=null}return c}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r){var c={min:{x:0,y:0},max:{x:0,y:0}};return r&&i.update(c,r),c},i.update=function(r,c,l){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var f=0;f<c.length;f++){var d=c[f];d.x>r.max.x&&(r.max.x=d.x),d.x<r.min.x&&(r.min.x=d.x),d.y>r.max.y&&(r.max.y=d.y),d.y<r.min.y&&(r.min.y=d.y)}l&&(l.x>0?r.max.x+=l.x:r.min.x+=l.x,l.y>0?r.max.y+=l.y:r.min.y+=l.y)},i.contains=function(r,c){return c.x>=r.min.x&&c.x<=r.max.x&&c.y>=r.min.y&&c.y<=r.max.y},i.overlaps=function(r,c){return r.min.x<=c.max.x&&r.max.x>=c.min.x&&r.max.y>=c.min.y&&r.min.y<=c.max.y},i.translate=function(r,c){r.min.x+=c.x,r.max.x+=c.x,r.min.y+=c.y,r.max.y+=c.y},i.shift=function(r,c){var l=r.max.x-r.min.x,f=r.max.y-r.min.y;r.min.x=c.x,r.max.x=c.x+l,r.min.y=c.y,r.max.y=c.y+f}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r,c){return{x:r||0,y:c||0}},i.clone=function(r){return{x:r.x,y:r.y}},i.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},i.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},i.rotate=function(r,c,l){var f=Math.cos(c),d=Math.sin(c);l||(l={});var h=r.x*f-r.y*d;return l.y=r.x*d+r.y*f,l.x=h,l},i.rotateAbout=function(r,c,l,f){var d=Math.cos(c),h=Math.sin(c);f||(f={});var g=l.x+((r.x-l.x)*d-(r.y-l.y)*h);return f.y=l.y+((r.x-l.x)*h+(r.y-l.y)*d),f.x=g,f},i.normalise=function(r){var c=i.magnitude(r);return c===0?{x:0,y:0}:{x:r.x/c,y:r.y/c}},i.dot=function(r,c){return r.x*c.x+r.y*c.y},i.cross=function(r,c){return r.x*c.y-r.y*c.x},i.cross3=function(r,c,l){return(c.x-r.x)*(l.y-r.y)-(c.y-r.y)*(l.x-r.x)},i.add=function(r,c,l){return l||(l={}),l.x=r.x+c.x,l.y=r.y+c.y,l},i.sub=function(r,c,l){return l||(l={}),l.x=r.x-c.x,l.y=r.y-c.y,l},i.mult=function(r,c){return{x:r.x*c,y:r.y*c}},i.div=function(r,c){return{x:r.x/c,y:r.y/c}},i.perp=function(r,c){return c=c===!0?-1:1,{x:c*-r.y,y:c*r.x}},i.neg=function(r){return{x:-r.x,y:-r.y}},i.angle=function(r,c){return Math.atan2(c.y-r.y,c.x-r.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(0);(function(){r.create=function(f,d){for(var h=[],g=0;g<f.length;g++){var m=f[g],y={x:m.x,y:m.y,index:g,body:d,isInternal:!1};h.push(y)}return h},r.fromPath=function(f,d){var h=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,g=[];return f.replace(h,function(m,y,w){g.push({x:parseFloat(y),y:parseFloat(w)})}),r.create(g,d)},r.centre=function(f){for(var d=r.area(f,!0),h={x:0,y:0},g,m,y,w=0;w<f.length;w++)y=(w+1)%f.length,g=c.cross(f[w],f[y]),m=c.mult(c.add(f[w],f[y]),g),h=c.add(h,m);return c.div(h,6*d)},r.mean=function(f){for(var d={x:0,y:0},h=0;h<f.length;h++)d.x+=f[h].x,d.y+=f[h].y;return c.div(d,f.length)},r.area=function(f,d){for(var h=0,g=f.length-1,m=0;m<f.length;m++)h+=(f[g].x-f[m].x)*(f[g].y+f[m].y),g=m;return d?h/2:Math.abs(h)/2},r.inertia=function(f,d){for(var h=0,g=0,m=f,y,w,v=0;v<m.length;v++)w=(v+1)%m.length,y=Math.abs(c.cross(m[w],m[v])),h+=y*(c.dot(m[w],m[w])+c.dot(m[w],m[v])+c.dot(m[v],m[v])),g+=y;return d/6*(h/g)},r.translate=function(f,d,h){h=typeof h<"u"?h:1;var g=f.length,m=d.x*h,y=d.y*h,w;for(w=0;w<g;w++)f[w].x+=m,f[w].y+=y;return f},r.rotate=function(f,d,h){if(d!==0){var g=Math.cos(d),m=Math.sin(d),y=h.x,w=h.y,v=f.length,x,C,D,N;for(N=0;N<v;N++)x=f[N],C=x.x-y,D=x.y-w,x.x=y+(C*g-D*m),x.y=w+(C*m+D*g);return f}},r.contains=function(f,d){for(var h=d.x,g=d.y,m=f.length,y=f[m-1],w,v=0;v<m;v++){if(w=f[v],(h-y.x)*(w.y-y.y)+(g-y.y)*(y.x-w.x)>0)return!1;y=w}return!0},r.scale=function(f,d,h,g){if(d===1&&h===1)return f;g=g||r.centre(f);for(var m,y,w=0;w<f.length;w++)m=f[w],y=c.sub(m,g),f[w].x=g.x+y.x*d,f[w].y=g.y+y.y*h;return f},r.chamfer=function(f,d,h,g,m){typeof d=="number"?d=[d]:d=d||[8],h=typeof h<"u"?h:-1,g=g||2,m=m||14;for(var y=[],w=0;w<f.length;w++){var v=f[w-1>=0?w-1:f.length-1],x=f[w],C=f[(w+1)%f.length],D=d[w<d.length?w:d.length-1];if(D===0){y.push(x);continue}var N=c.normalise({x:x.y-v.y,y:v.x-x.x}),I=c.normalise({x:C.y-x.y,y:x.x-C.x}),S=Math.sqrt(2*Math.pow(D,2)),A=c.mult(l.clone(N),D),O=c.normalise(c.mult(c.add(N,I),.5)),T=c.sub(x,c.mult(O,S)),_=h;h===-1&&(_=Math.pow(D,.32)*1.75),_=l.clamp(_,g,m),_%2===1&&(_+=1);for(var R=Math.acos(c.dot(N,I)),U=R/_,L=0;L<_;L++)y.push(c.add(c.rotate(A,U*L),T))}return y},r.clockwiseSort=function(f){var d=r.mean(f);return f.sort(function(h,g){return c.angle(d,h)-c.angle(d,g)}),f},r.isConvex=function(f){var d=0,h=f.length,g,m,y,w;if(h<3)return null;for(g=0;g<h;g++)if(m=(g+1)%h,y=(g+2)%h,w=(f[m].x-f[g].x)*(f[y].y-f[m].y),w-=(f[m].y-f[g].y)*(f[y].x-f[m].x),w<0?d|=1:w>0&&(d|=2),d===3)return!1;return d!==0?!0:null},r.hull=function(f){var d=[],h=[],g,m;for(f=f.slice(0),f.sort(function(y,w){var v=y.x-w.x;return v!==0?v:y.y-w.y}),m=0;m<f.length;m+=1){for(g=f[m];h.length>=2&&c.cross3(h[h.length-2],h[h.length-1],g)<=0;)h.pop();h.push(g)}for(m=f.length-1;m>=0;m-=1){for(g=f[m];d.length>=2&&c.cross3(d[d.length-2],d[d.length-1],g)<=0;)d.pop();d.push(g)}return d.pop(),h.pop(),d.concat(h)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(2),f=i(7),d=i(0),h=i(1),g=i(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(y){var w={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},v=d.extend(w,y);return m(v,y),v},r.nextGroup=function(y){return y?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var m=function(y,w){w=w||{},r.set(y,{bounds:y.bounds||h.create(y.vertices),positionPrev:y.positionPrev||l.clone(y.position),anglePrev:y.anglePrev||y.angle,vertices:y.vertices,parts:y.parts||[y],isStatic:y.isStatic,isSleeping:y.isSleeping,parent:y.parent||y}),c.rotate(y.vertices,y.angle,y.position),g.rotate(y.axes,y.angle),h.update(y.bounds,y.vertices,y.velocity),r.set(y,{axes:w.axes||y.axes,area:w.area||y.area,mass:w.mass||y.mass,inertia:w.inertia||y.inertia});var v=y.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),x=y.isStatic?"#555":"#ccc",C=y.isStatic&&y.render.fillStyle===null?1:0;y.render.fillStyle=y.render.fillStyle||v,y.render.strokeStyle=y.render.strokeStyle||x,y.render.lineWidth=y.render.lineWidth||C,y.render.sprite.xOffset+=-(y.bounds.min.x-y.position.x)/(y.bounds.max.x-y.bounds.min.x),y.render.sprite.yOffset+=-(y.bounds.min.y-y.position.y)/(y.bounds.max.y-y.bounds.min.y)};r.set=function(y,w,v){var x;typeof w=="string"&&(x=w,w={},w[x]=v);for(x in w)if(Object.prototype.hasOwnProperty.call(w,x))switch(v=w[x],x){case"isStatic":r.setStatic(y,v);break;case"isSleeping":f.set(y,v);break;case"mass":r.setMass(y,v);break;case"density":r.setDensity(y,v);break;case"inertia":r.setInertia(y,v);break;case"vertices":r.setVertices(y,v);break;case"position":r.setPosition(y,v);break;case"angle":r.setAngle(y,v);break;case"velocity":r.setVelocity(y,v);break;case"angularVelocity":r.setAngularVelocity(y,v);break;case"speed":r.setSpeed(y,v);break;case"angularSpeed":r.setAngularSpeed(y,v);break;case"parts":r.setParts(y,v);break;case"centre":r.setCentre(y,v);break;default:y[x]=v}},r.setStatic=function(y,w){for(var v=0;v<y.parts.length;v++){var x=y.parts[v];w?(x.isStatic||(x._original={restitution:x.restitution,friction:x.friction,mass:x.mass,inertia:x.inertia,density:x.density,inverseMass:x.inverseMass,inverseInertia:x.inverseInertia}),x.restitution=0,x.friction=1,x.mass=x.inertia=x.density=1/0,x.inverseMass=x.inverseInertia=0,x.positionPrev.x=x.position.x,x.positionPrev.y=x.position.y,x.anglePrev=x.angle,x.angularVelocity=0,x.speed=0,x.angularSpeed=0,x.motion=0):x._original&&(x.restitution=x._original.restitution,x.friction=x._original.friction,x.mass=x._original.mass,x.inertia=x._original.inertia,x.density=x._original.density,x.inverseMass=x._original.inverseMass,x.inverseInertia=x._original.inverseInertia,x._original=null),x.isStatic=w}},r.setMass=function(y,w){var v=y.inertia/(y.mass/6);y.inertia=v*(w/6),y.inverseInertia=1/y.inertia,y.mass=w,y.inverseMass=1/y.mass,y.density=y.mass/y.area},r.setDensity=function(y,w){r.setMass(y,w*y.area),y.density=w},r.setInertia=function(y,w){y.inertia=w,y.inverseInertia=1/y.inertia},r.setVertices=function(y,w){w[0].body===y?y.vertices=w:y.vertices=c.create(w,y),y.axes=g.fromVertices(y.vertices),y.area=c.area(y.vertices),r.setMass(y,y.density*y.area);var v=c.centre(y.vertices);c.translate(y.vertices,v,-1),r.setInertia(y,r._inertiaScale*c.inertia(y.vertices,y.mass)),c.translate(y.vertices,y.position),h.update(y.bounds,y.vertices,y.velocity)},r.setParts=function(y,w,v){var x;for(w=w.slice(0),y.parts.length=0,y.parts.push(y),y.parent=y,x=0;x<w.length;x++){var C=w[x];C!==y&&(C.parent=y,y.parts.push(C))}if(y.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var D=[];for(x=0;x<w.length;x++)D=D.concat(w[x].vertices);c.clockwiseSort(D);var N=c.hull(D),I=c.centre(N);r.setVertices(y,N),c.translate(y.vertices,I)}var S=r._totalProperties(y);y.area=S.area,y.parent=y,y.position.x=S.centre.x,y.position.y=S.centre.y,y.positionPrev.x=S.centre.x,y.positionPrev.y=S.centre.y,r.setMass(y,S.mass),r.setInertia(y,S.inertia),r.setPosition(y,S.centre)}},r.setCentre=function(y,w,v){v?(y.positionPrev.x+=w.x,y.positionPrev.y+=w.y,y.position.x+=w.x,y.position.y+=w.y):(y.positionPrev.x=w.x-(y.position.x-y.positionPrev.x),y.positionPrev.y=w.y-(y.position.y-y.positionPrev.y),y.position.x=w.x,y.position.y=w.y)},r.setPosition=function(y,w,v){var x=l.sub(w,y.position);v?(y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.velocity.x=x.x,y.velocity.y=x.y,y.speed=l.magnitude(x)):(y.positionPrev.x+=x.x,y.positionPrev.y+=x.y);for(var C=0;C<y.parts.length;C++){var D=y.parts[C];D.position.x+=x.x,D.position.y+=x.y,c.translate(D.vertices,x),h.update(D.bounds,D.vertices,y.velocity)}},r.setAngle=function(y,w,v){var x=w-y.angle;v?(y.anglePrev=y.angle,y.angularVelocity=x,y.angularSpeed=Math.abs(x)):y.anglePrev+=x;for(var C=0;C<y.parts.length;C++){var D=y.parts[C];D.angle+=x,c.rotate(D.vertices,x,y.position),g.rotate(D.axes,x),h.update(D.bounds,D.vertices,y.velocity),C>0&&l.rotateAbout(D.position,x,y.position,D.position)}},r.setVelocity=function(y,w){var v=y.deltaTime/r._baseDelta;y.positionPrev.x=y.position.x-w.x*v,y.positionPrev.y=y.position.y-w.y*v,y.velocity.x=(y.position.x-y.positionPrev.x)/v,y.velocity.y=(y.position.y-y.positionPrev.y)/v,y.speed=l.magnitude(y.velocity)},r.getVelocity=function(y){var w=r._baseDelta/y.deltaTime;return{x:(y.position.x-y.positionPrev.x)*w,y:(y.position.y-y.positionPrev.y)*w}},r.getSpeed=function(y){return l.magnitude(r.getVelocity(y))},r.setSpeed=function(y,w){r.setVelocity(y,l.mult(l.normalise(r.getVelocity(y)),w))},r.setAngularVelocity=function(y,w){var v=y.deltaTime/r._baseDelta;y.anglePrev=y.angle-w*v,y.angularVelocity=(y.angle-y.anglePrev)/v,y.angularSpeed=Math.abs(y.angularVelocity)},r.getAngularVelocity=function(y){return(y.angle-y.anglePrev)*r._baseDelta/y.deltaTime},r.getAngularSpeed=function(y){return Math.abs(r.getAngularVelocity(y))},r.setAngularSpeed=function(y,w){r.setAngularVelocity(y,d.sign(r.getAngularVelocity(y))*w)},r.translate=function(y,w,v){r.setPosition(y,l.add(y.position,w),v)},r.rotate=function(y,w,v,x){if(!v)r.setAngle(y,y.angle+w,x);else{var C=Math.cos(w),D=Math.sin(w),N=y.position.x-v.x,I=y.position.y-v.y;r.setPosition(y,{x:v.x+(N*C-I*D),y:v.y+(N*D+I*C)},x),r.setAngle(y,y.angle+w,x)}},r.scale=function(y,w,v,x){var C=0,D=0;x=x||y.position;for(var N=0;N<y.parts.length;N++){var I=y.parts[N];c.scale(I.vertices,w,v,x),I.axes=g.fromVertices(I.vertices),I.area=c.area(I.vertices),r.setMass(I,y.density*I.area),c.translate(I.vertices,{x:-I.position.x,y:-I.position.y}),r.setInertia(I,r._inertiaScale*c.inertia(I.vertices,I.mass)),c.translate(I.vertices,{x:I.position.x,y:I.position.y}),N>0&&(C+=I.area,D+=I.inertia),I.position.x=x.x+(I.position.x-x.x)*w,I.position.y=x.y+(I.position.y-x.y)*v,h.update(I.bounds,I.vertices,y.velocity)}y.parts.length>1&&(y.area=C,y.isStatic||(r.setMass(y,y.density*C),r.setInertia(y,D))),y.circleRadius&&(w===v?y.circleRadius*=w:y.circleRadius=null)},r.update=function(y,w){w=(typeof w<"u"?w:1e3/60)*y.timeScale;var v=w*w,x=r._timeCorrection?w/(y.deltaTime||w):1,C=1-y.frictionAir*(w/d._baseDelta),D=(y.position.x-y.positionPrev.x)*x,N=(y.position.y-y.positionPrev.y)*x;y.velocity.x=D*C+y.force.x/y.mass*v,y.velocity.y=N*C+y.force.y/y.mass*v,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.position.x+=y.velocity.x,y.position.y+=y.velocity.y,y.deltaTime=w,y.angularVelocity=(y.angle-y.anglePrev)*C*x+y.torque/y.inertia*v,y.anglePrev=y.angle,y.angle+=y.angularVelocity;for(var I=0;I<y.parts.length;I++){var S=y.parts[I];c.translate(S.vertices,y.velocity),I>0&&(S.position.x+=y.velocity.x,S.position.y+=y.velocity.y),y.angularVelocity!==0&&(c.rotate(S.vertices,y.angularVelocity,y.position),g.rotate(S.axes,y.angularVelocity),I>0&&l.rotateAbout(S.position,y.angularVelocity,y.position,S.position)),h.update(S.bounds,S.vertices,y.velocity)}},r.updateVelocities=function(y){var w=r._baseDelta/y.deltaTime,v=y.velocity;v.x=(y.position.x-y.positionPrev.x)*w,v.y=(y.position.y-y.positionPrev.y)*w,y.speed=Math.sqrt(v.x*v.x+v.y*v.y),y.angularVelocity=(y.angle-y.anglePrev)*w,y.angularSpeed=Math.abs(y.angularVelocity)},r.applyForce=function(y,w,v){var x={x:w.x-y.position.x,y:w.y-y.position.y};y.force.x+=v.x,y.force.y+=v.y,y.torque+=x.x*v.y-x.y*v.x},r._totalProperties=function(y){for(var w={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=y.parts.length===1?0:1;v<y.parts.length;v++){var x=y.parts[v],C=x.mass!==1/0?x.mass:1;w.mass+=C,w.area+=x.area,w.inertia+=x.inertia,w.centre=l.add(w.centre,l.mult(x.position,C))}return w.centre=l.div(w.centre,w.mass),w}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r.on=function(l,f,d){for(var h=f.split(" "),g,m=0;m<h.length;m++)g=h[m],l.events=l.events||{},l.events[g]=l.events[g]||[],l.events[g].push(d);return d},r.off=function(l,f,d){if(!f){l.events={};return}typeof f=="function"&&(d=f,f=c.keys(l.events).join(" "));for(var h=f.split(" "),g=0;g<h.length;g++){var m=l.events[h[g]],y=[];if(d&&m)for(var w=0;w<m.length;w++)m[w]!==d&&y.push(m[w]);l.events[h[g]]=y}},r.trigger=function(l,f,d){var h,g,m,y,w=l.events;if(w&&c.keys(w).length>0){d||(d={}),h=f.split(" ");for(var v=0;v<h.length;v++)if(g=h[v],m=w[g],m){y=c.clone(d,!1),y.name=g,y.source=l;for(var x=0;x<m.length;x++)m[x].apply(l,[y])}}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(5),l=i(0),f=i(1),d=i(4);(function(){r.create=function(h){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},h)},r.setModified=function(h,g,m,y){if(h.isModified=g,g&&h.cache&&(h.cache.allBodies=null,h.cache.allConstraints=null,h.cache.allComposites=null),m&&h.parent&&r.setModified(h.parent,g,m,y),y)for(var w=0;w<h.composites.length;w++){var v=h.composites[w];r.setModified(v,g,m,y)}},r.add=function(h,g){var m=[].concat(g);c.trigger(h,"beforeAdd",{object:g});for(var y=0;y<m.length;y++){var w=m[y];switch(w.type){case"body":if(w.parent!==w){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(h,w);break;case"constraint":r.addConstraint(h,w);break;case"composite":r.addComposite(h,w);break;case"mouseConstraint":r.addConstraint(h,w.constraint);break}}return c.trigger(h,"afterAdd",{object:g}),h},r.remove=function(h,g,m){var y=[].concat(g);c.trigger(h,"beforeRemove",{object:g});for(var w=0;w<y.length;w++){var v=y[w];switch(v.type){case"body":r.removeBody(h,v,m);break;case"constraint":r.removeConstraint(h,v,m);break;case"composite":r.removeComposite(h,v,m);break;case"mouseConstraint":r.removeConstraint(h,v.constraint);break}}return c.trigger(h,"afterRemove",{object:g}),h},r.addComposite=function(h,g){return h.composites.push(g),g.parent=h,r.setModified(h,!0,!0,!1),h},r.removeComposite=function(h,g,m){var y=l.indexOf(h.composites,g);if(y!==-1){var w=r.allBodies(g);r.removeCompositeAt(h,y);for(var v=0;v<w.length;v++)w[v].sleepCounter=0}if(m)for(var v=0;v<h.composites.length;v++)r.removeComposite(h.composites[v],g,!0);return h},r.removeCompositeAt=function(h,g){return h.composites.splice(g,1),r.setModified(h,!0,!0,!1),h},r.addBody=function(h,g){return h.bodies.push(g),r.setModified(h,!0,!0,!1),h},r.removeBody=function(h,g,m){var y=l.indexOf(h.bodies,g);if(y!==-1&&(r.removeBodyAt(h,y),g.sleepCounter=0),m)for(var w=0;w<h.composites.length;w++)r.removeBody(h.composites[w],g,!0);return h},r.removeBodyAt=function(h,g){return h.bodies.splice(g,1),r.setModified(h,!0,!0,!1),h},r.addConstraint=function(h,g){return h.constraints.push(g),r.setModified(h,!0,!0,!1),h},r.removeConstraint=function(h,g,m){var y=l.indexOf(h.constraints,g);if(y!==-1&&r.removeConstraintAt(h,y),m)for(var w=0;w<h.composites.length;w++)r.removeConstraint(h.composites[w],g,!0);return h},r.removeConstraintAt=function(h,g){return h.constraints.splice(g,1),r.setModified(h,!0,!0,!1),h},r.clear=function(h,g,m){if(m)for(var y=0;y<h.composites.length;y++)r.clear(h.composites[y],g,!0);return g?h.bodies=h.bodies.filter(function(w){return w.isStatic}):h.bodies.length=0,h.constraints.length=0,h.composites.length=0,r.setModified(h,!0,!0,!1),h},r.allBodies=function(h){if(h.cache&&h.cache.allBodies)return h.cache.allBodies;for(var g=[].concat(h.bodies),m=0;m<h.composites.length;m++)g=g.concat(r.allBodies(h.composites[m]));return h.cache&&(h.cache.allBodies=g),g},r.allConstraints=function(h){if(h.cache&&h.cache.allConstraints)return h.cache.allConstraints;for(var g=[].concat(h.constraints),m=0;m<h.composites.length;m++)g=g.concat(r.allConstraints(h.composites[m]));return h.cache&&(h.cache.allConstraints=g),g},r.allComposites=function(h){if(h.cache&&h.cache.allComposites)return h.cache.allComposites;for(var g=[].concat(h.composites),m=0;m<h.composites.length;m++)g=g.concat(r.allComposites(h.composites[m]));return h.cache&&(h.cache.allComposites=g),g},r.get=function(h,g,m){var y,w;switch(m){case"body":y=r.allBodies(h);break;case"constraint":y=r.allConstraints(h);break;case"composite":y=r.allComposites(h).concat(h);break}return y?(w=y.filter(function(v){return v.id.toString()===g.toString()}),w.length===0?null:w[0]):null},r.move=function(h,g,m){return r.remove(h,g),r.add(m,g),h},r.rebase=function(h){for(var g=r.allBodies(h).concat(r.allConstraints(h)).concat(r.allComposites(h)),m=0;m<g.length;m++)g[m].id=l.nextId();return h},r.translate=function(h,g,m){for(var y=m?r.allBodies(h):h.bodies,w=0;w<y.length;w++)d.translate(y[w],g);return h},r.rotate=function(h,g,m,y){for(var w=Math.cos(g),v=Math.sin(g),x=y?r.allBodies(h):h.bodies,C=0;C<x.length;C++){var D=x[C],N=D.position.x-m.x,I=D.position.y-m.y;d.setPosition(D,{x:m.x+(N*w-I*v),y:m.y+(N*v+I*w)}),d.rotate(D,g)}return h},r.scale=function(h,g,m,y,w){for(var v=w?r.allBodies(h):h.bodies,x=0;x<v.length;x++){var C=v[x],D=C.position.x-y.x,N=C.position.y-y.y;d.setPosition(C,{x:y.x+D*g,y:y.y+N*m}),d.scale(C,g,m)}return h},r.bounds=function(h){for(var g=r.allBodies(h),m=[],y=0;y<g.length;y+=1){var w=g[y];m.push(w.bounds.min,w.bounds.max)}return f.create(m)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(4),l=i(5),f=i(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(d,h){for(var g=h/f._baseDelta,m=r._motionSleepThreshold,y=0;y<d.length;y++){var w=d[y],v=c.getSpeed(w),x=c.getAngularSpeed(w),C=v*v+x*x;if(w.force.x!==0||w.force.y!==0){r.set(w,!1);continue}var D=Math.min(w.motion,C),N=Math.max(w.motion,C);w.motion=r._minBias*D+(1-r._minBias)*N,w.sleepThreshold>0&&w.motion<m?(w.sleepCounter+=1,w.sleepCounter>=w.sleepThreshold/g&&r.set(w,!0)):w.sleepCounter>0&&(w.sleepCounter-=1)}},r.afterCollisions=function(d){for(var h=r._motionSleepThreshold,g=0;g<d.length;g++){var m=d[g];if(m.isActive){var y=m.collision,w=y.bodyA.parent,v=y.bodyB.parent;if(!(w.isSleeping&&v.isSleeping||w.isStatic||v.isStatic)&&(w.isSleeping||v.isSleeping)){var x=w.isSleeping&&!w.isStatic?w:v,C=x===w?v:w;!x.isStatic&&C.motion>h&&r.set(x,!1)}}}},r.set=function(d,h){var g=d.isSleeping;h?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,g||l.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,g&&l.trigger(d,"sleepEnd"))}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(9);(function(){var f=[],d={overlap:0,axis:null},h={overlap:0,axis:null};r.create=function(g,m){return{pair:null,collided:!1,bodyA:g,bodyB:m,parentA:g.parent,parentB:m.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},r.collides=function(g,m,y){if(r._overlapAxes(d,g.vertices,m.vertices,g.axes),d.overlap<=0||(r._overlapAxes(h,m.vertices,g.vertices,m.axes),h.overlap<=0))return null;var w=y&&y.table[l.id(g,m)],v;w?v=w.collision:(v=r.create(g,m),v.collided=!0,v.bodyA=g.id<m.id?g:m,v.bodyB=g.id<m.id?m:g,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),g=v.bodyA,m=v.bodyB;var x;d.overlap<h.overlap?x=d:x=h;var C=v.normal,D=v.tangent,N=v.penetration,I=v.supports,S=x.overlap,A=x.axis,O=A.x,T=A.y,_=m.position.x-g.position.x,R=m.position.y-g.position.y;O*_+T*R>=0&&(O=-O,T=-T),C.x=O,C.y=T,D.x=-T,D.y=O,N.x=O*S,N.y=T*S,v.depth=S;var U=r._findSupports(g,m,C,1),L=0;if(c.contains(g.vertices,U[0])&&(I[L++]=U[0]),c.contains(g.vertices,U[1])&&(I[L++]=U[1]),L<2){var F=r._findSupports(m,g,C,-1);c.contains(m.vertices,F[0])&&(I[L++]=F[0]),L<2&&c.contains(m.vertices,F[1])&&(I[L++]=F[1])}return L===0&&(I[L++]=U[0]),v.supportCount=L,v},r._overlapAxes=function(g,m,y,w){var v=m.length,x=y.length,C=m[0].x,D=m[0].y,N=y[0].x,I=y[0].y,S=w.length,A=Number.MAX_VALUE,O=0,T,_,R,U,L,F;for(L=0;L<S;L++){var W=w[L],$=W.x,P=W.y,k=C*$+D*P,V=N*$+I*P,K=k,G=V;for(F=1;F<v;F+=1)U=m[F].x*$+m[F].y*P,U>K?K=U:U<k&&(k=U);for(F=1;F<x;F+=1)U=y[F].x*$+y[F].y*P,U>G?G=U:U<V&&(V=U);if(_=K-V,R=G-k,T=_<R?_:R,T<A&&(A=T,O=L,T<=0))break}g.axis=w[O],g.overlap=A},r._findSupports=function(g,m,y,w){var v=m.vertices,x=v.length,C=g.position.x,D=g.position.y,N=y.x*w,I=y.y*w,S=v[0],A=S,O=N*(C-A.x)+I*(D-A.y),T,_,R;for(R=1;R<x;R+=1)A=v[R],_=N*(C-A.x)+I*(D-A.y),_<O&&(O=_,S=A);return T=v[(x+S.index-1)%x],O=N*(C-T.x)+I*(D-T.y),A=v[(S.index+1)%x],N*(C-A.x)+I*(D-A.y)<O?(f[0]=S,f[1]=A,f):(f[0]=S,f[1]=T,f)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(16);(function(){r.create=function(l,f){var d=l.bodyA,h=l.bodyB,g={id:r.id(d,h),bodyA:d,bodyB:h,collision:l,contacts:[c.create(),c.create()],contactCount:0,separation:0,isActive:!0,isSensor:d.isSensor||h.isSensor,timeCreated:f,timeUpdated:f,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(g,l,f),g},r.update=function(l,f,d){var h=f.supports,g=f.supportCount,m=l.contacts,y=f.parentA,w=f.parentB;l.isActive=!0,l.timeUpdated=d,l.collision=f,l.separation=f.depth,l.inverseMass=y.inverseMass+w.inverseMass,l.friction=y.friction<w.friction?y.friction:w.friction,l.frictionStatic=y.frictionStatic>w.frictionStatic?y.frictionStatic:w.frictionStatic,l.restitution=y.restitution>w.restitution?y.restitution:w.restitution,l.slop=y.slop>w.slop?y.slop:w.slop,l.contactCount=g,f.pair=l;var v=h[0],x=m[0],C=h[1],D=m[1];(D.vertex===v||x.vertex===C)&&(m[1]=x,m[0]=x=D,D=m[1]),x.vertex=v,D.vertex=C},r.setActive=function(l,f,d){f?(l.isActive=!0,l.timeUpdated=d):(l.isActive=!1,l.contactCount=0)},r.id=function(l,f){return l.id<f.id?l.id.toString(36)+":"+f.id.toString(36):f.id.toString(36)+":"+l.id.toString(36)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(2),f=i(7),d=i(1),h=i(11),g=i(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(m){var y=m;y.bodyA&&!y.pointA&&(y.pointA={x:0,y:0}),y.bodyB&&!y.pointB&&(y.pointB={x:0,y:0});var w=y.bodyA?l.add(y.bodyA.position,y.pointA):y.pointA,v=y.bodyB?l.add(y.bodyB.position,y.pointB):y.pointB,x=l.magnitude(l.sub(w,v));y.length=typeof y.length<"u"?y.length:x,y.id=y.id||g.nextId(),y.label=y.label||"Constraint",y.type="constraint",y.stiffness=y.stiffness||(y.length>0?1:.7),y.damping=y.damping||0,y.angularStiffness=y.angularStiffness||0,y.angleA=y.bodyA?y.bodyA.angle:y.angleA,y.angleB=y.bodyB?y.bodyB.angle:y.angleB,y.plugin={};var C={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return y.length===0&&y.stiffness>.1?(C.type="pin",C.anchors=!1):y.stiffness<.9&&(C.type="spring"),y.render=g.extend(C,y.render),y},r.preSolveAll=function(m){for(var y=0;y<m.length;y+=1){var w=m[y],v=w.constraintImpulse;w.isStatic||v.x===0&&v.y===0&&v.angle===0||(w.position.x+=v.x,w.position.y+=v.y,w.angle+=v.angle)}},r.solveAll=function(m,y){for(var w=g.clamp(y/g._baseDelta,0,1),v=0;v<m.length;v+=1){var x=m[v],C=!x.bodyA||x.bodyA&&x.bodyA.isStatic,D=!x.bodyB||x.bodyB&&x.bodyB.isStatic;(C||D)&&r.solve(m[v],w)}for(v=0;v<m.length;v+=1)x=m[v],C=!x.bodyA||x.bodyA&&x.bodyA.isStatic,D=!x.bodyB||x.bodyB&&x.bodyB.isStatic,!C&&!D&&r.solve(m[v],w)},r.solve=function(m,y){var w=m.bodyA,v=m.bodyB,x=m.pointA,C=m.pointB;if(!(!w&&!v)){w&&!w.isStatic&&(l.rotate(x,w.angle-m.angleA,x),m.angleA=w.angle),v&&!v.isStatic&&(l.rotate(C,v.angle-m.angleB,C),m.angleB=v.angle);var D=x,N=C;if(w&&(D=l.add(w.position,x)),v&&(N=l.add(v.position,C)),!(!D||!N)){var I=l.sub(D,N),S=l.magnitude(I);S<r._minLength&&(S=r._minLength);var A=(S-m.length)/S,O=m.stiffness>=1||m.length===0,T=O?m.stiffness*y:m.stiffness*y*y,_=m.damping*y,R=l.mult(I,A*T),U=(w?w.inverseMass:0)+(v?v.inverseMass:0),L=(w?w.inverseInertia:0)+(v?v.inverseInertia:0),F=U+L,W,$,P,k,V;if(_>0){var K=l.create();P=l.div(I,S),V=l.sub(v&&l.sub(v.position,v.positionPrev)||K,w&&l.sub(w.position,w.positionPrev)||K),k=l.dot(P,V)}w&&!w.isStatic&&($=w.inverseMass/U,w.constraintImpulse.x-=R.x*$,w.constraintImpulse.y-=R.y*$,w.position.x-=R.x*$,w.position.y-=R.y*$,_>0&&(w.positionPrev.x-=_*P.x*k*$,w.positionPrev.y-=_*P.y*k*$),W=l.cross(x,R)/F*r._torqueDampen*w.inverseInertia*(1-m.angularStiffness),w.constraintImpulse.angle-=W,w.angle-=W),v&&!v.isStatic&&($=v.inverseMass/U,v.constraintImpulse.x+=R.x*$,v.constraintImpulse.y+=R.y*$,v.position.x+=R.x*$,v.position.y+=R.y*$,_>0&&(v.positionPrev.x+=_*P.x*k*$,v.positionPrev.y+=_*P.y*k*$),W=l.cross(C,R)/F*r._torqueDampen*v.inverseInertia*(1-m.angularStiffness),v.constraintImpulse.angle+=W,v.angle+=W)}}},r.postSolveAll=function(m){for(var y=0;y<m.length;y++){var w=m[y],v=w.constraintImpulse;if(!(w.isStatic||v.x===0&&v.y===0&&v.angle===0)){f.set(w,!1);for(var x=0;x<w.parts.length;x++){var C=w.parts[x];c.translate(C.vertices,v),x>0&&(C.position.x+=v.x,C.position.y+=v.y),v.angle!==0&&(c.rotate(C.vertices,v.angle,w.position),h.rotate(C.axes,v.angle),x>0&&l.rotateAbout(C.position,v.angle,w.position,C.position)),d.update(C.bounds,C.vertices,w.velocity)}v.angle*=r._warming,v.x*=r._warming,v.y*=r._warming}}},r.pointAWorld=function(m){return{x:(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),y:(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0)}},r.pointBWorld=function(m){return{x:(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),y:(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0)}},r.currentLength=function(m){var y=(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),w=(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0),v=(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),x=(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0),C=y-v,D=w-x;return Math.sqrt(C*C+D*D)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(0);(function(){r.fromVertices=function(f){for(var d={},h=0;h<f.length;h++){var g=(h+1)%f.length,m=c.normalise({x:f[g].y-f[h].y,y:f[h].x-f[g].x}),y=m.y===0?1/0:m.x/m.y;y=y.toFixed(3).toString(),d[y]=m}return l.values(d)},r.rotate=function(f,d){if(d!==0)for(var h=Math.cos(d),g=Math.sin(d),m=0;m<f.length;m++){var y=f[m],w;w=y.x*h-y.y*g,y.y=y.x*g+y.y*h,y.x=w}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(0),f=i(4),d=i(1),h=i(2);(function(){r.rectangle=function(g,m,y,w,v){v=v||{};var x={label:"Rectangle Body",position:{x:g,y:m},vertices:c.fromPath("L 0 0 L "+y+" 0 L "+y+" "+w+" L 0 "+w)};if(v.chamfer){var C=v.chamfer;x.vertices=c.chamfer(x.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete v.chamfer}return f.create(l.extend({},x,v))},r.trapezoid=function(g,m,y,w,v,x){x=x||{},v>=1&&l.warn("Bodies.trapezoid: slope parameter must be < 1."),v*=.5;var C=(1-v*2)*y,D=y*v,N=D+C,I=N+D,S;v<.5?S="L 0 0 L "+D+" "+-w+" L "+N+" "+-w+" L "+I+" 0":S="L 0 0 L "+N+" "+-w+" L "+I+" 0";var A={label:"Trapezoid Body",position:{x:g,y:m},vertices:c.fromPath(S)};if(x.chamfer){var O=x.chamfer;A.vertices=c.chamfer(A.vertices,O.radius,O.quality,O.qualityMin,O.qualityMax),delete x.chamfer}return f.create(l.extend({},A,x))},r.circle=function(g,m,y,w,v){w=w||{};var x={label:"Circle Body",circleRadius:y};v=v||25;var C=Math.ceil(Math.max(10,Math.min(v,y)));return C%2===1&&(C+=1),r.polygon(g,m,C,y,l.extend({},x,w))},r.polygon=function(g,m,y,w,v){if(v=v||{},y<3)return r.circle(g,m,w,v);for(var x=2*Math.PI/y,C="",D=x*.5,N=0;N<y;N+=1){var I=D+N*x,S=Math.cos(I)*w,A=Math.sin(I)*w;C+="L "+S.toFixed(3)+" "+A.toFixed(3)+" "}var O={label:"Polygon Body",position:{x:g,y:m},vertices:c.fromPath(C)};if(v.chamfer){var T=v.chamfer;O.vertices=c.chamfer(O.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete v.chamfer}return f.create(l.extend({},O,v))},r.fromVertices=function(g,m,y,w,v,x,C,D){var N=l.getDecomp(),I,S,A,O,T,_,R,U,L,F,W;for(I=!!(N&&N.quickDecomp),w=w||{},A=[],v=typeof v<"u"?v:!1,x=typeof x<"u"?x:.01,C=typeof C<"u"?C:10,D=typeof D<"u"?D:.01,l.isArray(y[0])||(y=[y]),F=0;F<y.length;F+=1)if(_=y[F],O=c.isConvex(_),T=!O,T&&!I&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),O||!I)O?_=c.clockwiseSort(_):_=c.hull(_),A.push({position:{x:g,y:m},vertices:_});else{var $=_.map(function(oe){return[oe.x,oe.y]});N.makeCCW($),x!==!1&&N.removeCollinearPoints($,x),D!==!1&&N.removeDuplicatePoints&&N.removeDuplicatePoints($,D);var P=N.quickDecomp($);for(R=0;R<P.length;R++){var k=P[R],V=k.map(function(oe){return{x:oe[0],y:oe[1]}});C>0&&c.area(V)<C||A.push({position:c.centre(V),vertices:V})}}for(R=0;R<A.length;R++)A[R]=f.create(l.extend(A[R],w));if(v){var K=5;for(R=0;R<A.length;R++){var G=A[R];for(U=R+1;U<A.length;U++){var j=A[U];if(d.overlaps(G.bounds,j.bounds)){var X=G.vertices,Z=j.vertices;for(L=0;L<G.vertices.length;L++)for(W=0;W<j.vertices.length;W++){var ee=h.magnitudeSquared(h.sub(X[(L+1)%X.length],Z[W])),ae=h.magnitudeSquared(h.sub(X[L],Z[(W+1)%Z.length]));ee<K&&ae<K&&(X[L].isInternal=!0,Z[W].isInternal=!0)}}}}}return A.length>1?(S=f.create(l.extend({parts:A.slice(0)},w)),f.setPosition(S,{x:g,y:m}),S):A[0]}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0),l=i(8);(function(){r.create=function(f){var d={bodies:[],collisions:[],pairs:null};return c.extend(d,f)},r.setBodies=function(f,d){f.bodies=d.slice(0)},r.clear=function(f){f.bodies=[],f.collisions=[]},r.collisions=function(f){var d=f.pairs,h=f.bodies,g=h.length,m=r.canCollide,y=l.collides,w=f.collisions,v=0,x,C;for(h.sort(r._compareBoundsX),x=0;x<g;x++){var D=h[x],N=D.bounds,I=D.bounds.max.x,S=D.bounds.max.y,A=D.bounds.min.y,O=D.isStatic||D.isSleeping,T=D.parts.length,_=T===1;for(C=x+1;C<g;C++){var R=h[C],U=R.bounds;if(U.min.x>I)break;if(!(S<U.min.y||A>U.max.y)&&!(O&&(R.isStatic||R.isSleeping))&&m(D.collisionFilter,R.collisionFilter)){var L=R.parts.length;if(_&&L===1){var F=y(D,R,d);F&&(w[v++]=F)}else for(var W=T>1?1:0,$=L>1?1:0,P=W;P<T;P++)for(var k=D.parts[P],N=k.bounds,V=$;V<L;V++){var K=R.parts[V],U=K.bounds;if(!(N.min.x>U.max.x||N.max.x<U.min.x||N.max.y<U.min.y||N.min.y>U.max.y)){var F=y(k,K,d);F&&(w[v++]=F)}}}}}return w.length!==v&&(w.length=v),w},r.canCollide=function(f,d){return f.group===d.group&&f.group!==0?f.group>0:(f.mask&d.category)!==0&&(d.mask&f.category)!==0},r._compareBoundsX=function(f,d){return f.bounds.min.x-d.bounds.min.x}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r.create=function(l){var f={};return l||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),f.element=l||document.body,f.absolute={x:0,y:0},f.position={x:0,y:0},f.mousedownPosition={x:0,y:0},f.mouseupPosition={x:0,y:0},f.offset={x:0,y:0},f.scale={x:1,y:1},f.wheelDelta=0,f.button=-1,f.pixelRatio=parseInt(f.element.getAttribute("data-pixel-ratio"),10)||1,f.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},f.mousemove=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g&&(f.button=0,d.preventDefault()),f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.sourceEvents.mousemove=d},f.mousedown=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g?(f.button=0,d.preventDefault()):f.button=d.button,f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mousedownPosition.x=f.position.x,f.mousedownPosition.y=f.position.y,f.sourceEvents.mousedown=d},f.mouseup=function(d){var h=r._getRelativeMousePosition(d,f.element,f.pixelRatio),g=d.changedTouches;g&&d.preventDefault(),f.button=-1,f.absolute.x=h.x,f.absolute.y=h.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y,f.mouseupPosition.x=f.position.x,f.mouseupPosition.y=f.position.y,f.sourceEvents.mouseup=d},f.mousewheel=function(d){f.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault(),f.sourceEvents.mousewheel=d},r.setElement(f,f.element),f},r.setElement=function(l,f){l.element=f,f.addEventListener("mousemove",l.mousemove,{passive:!0}),f.addEventListener("mousedown",l.mousedown,{passive:!0}),f.addEventListener("mouseup",l.mouseup,{passive:!0}),f.addEventListener("wheel",l.mousewheel,{passive:!1}),f.addEventListener("touchmove",l.mousemove,{passive:!1}),f.addEventListener("touchstart",l.mousedown,{passive:!1}),f.addEventListener("touchend",l.mouseup,{passive:!1})},r.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},r.setOffset=function(l,f){l.offset.x=f.x,l.offset.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},r.setScale=function(l,f){l.scale.x=f.x,l.scale.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},r._getRelativeMousePosition=function(l,f,d){var h=f.getBoundingClientRect(),g=document.documentElement||document.body.parentNode||document.body,m=window.pageXOffset!==void 0?window.pageXOffset:g.scrollLeft,y=window.pageYOffset!==void 0?window.pageYOffset:g.scrollTop,w=l.changedTouches,v,x;return w?(v=w[0].pageX-h.left-m,x=w[0].pageY-h.top-y):(v=l.pageX-h.left-m,x=l.pageY-h.top-y),{x:v/(f.clientWidth/(f.width||f.clientWidth)*d),y:x/(f.clientHeight/(f.height||f.clientHeight)*d)}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(0);(function(){r._registry={},r.register=function(l){if(r.isPlugin(l)||c.warn("Plugin.register:",r.toString(l),"does not implement all required fields."),l.name in r._registry){var f=r._registry[l.name],d=r.versionParse(l.version).number,h=r.versionParse(f.version).number;d>h?(c.warn("Plugin.register:",r.toString(f),"was upgraded to",r.toString(l)),r._registry[l.name]=l):d<h?c.warn("Plugin.register:",r.toString(f),"can not be downgraded to",r.toString(l)):l!==f&&c.warn("Plugin.register:",r.toString(l),"is already registered to different plugin object")}else r._registry[l.name]=l;return l},r.resolve=function(l){return r._registry[r.dependencyParse(l).name]},r.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},r.isPlugin=function(l){return l&&l.name&&l.version&&l.install},r.isUsed=function(l,f){return l.used.indexOf(f)>-1},r.isFor=function(l,f){var d=l.for&&r.dependencyParse(l.for);return!l.for||f.name===d.name&&r.versionSatisfies(f.version,d.range)},r.use=function(l,f){if(l.uses=(l.uses||[]).concat(f||[]),l.uses.length===0){c.warn("Plugin.use:",r.toString(l),"does not specify any dependencies to install.");return}for(var d=r.dependencies(l),h=c.topologicalSort(d),g=[],m=0;m<h.length;m+=1)if(h[m]!==l.name){var y=r.resolve(h[m]);if(!y){g.push(" "+h[m]);continue}r.isUsed(l,y.name)||(r.isFor(y,l)||(c.warn("Plugin.use:",r.toString(y),"is for",y.for,"but installed on",r.toString(l)+"."),y._warned=!0),y.install?y.install(l):(c.warn("Plugin.use:",r.toString(y),"does not specify an install function."),y._warned=!0),y._warned?(g.push(" "+r.toString(y)),delete y._warned):g.push(" "+r.toString(y)),l.used.push(y.name))}g.length>0&&c.info(g.join("  "))},r.dependencies=function(l,f){var d=r.dependencyParse(l),h=d.name;if(f=f||{},!(h in f)){l=r.resolve(l)||l,f[h]=c.map(l.uses||[],function(m){r.isPlugin(m)&&r.register(m);var y=r.dependencyParse(m),w=r.resolve(m);return w&&!r.versionSatisfies(w.version,y.range)?(c.warn("Plugin.dependencies:",r.toString(w),"does not satisfy",r.toString(y),"used by",r.toString(d)+"."),w._warned=!0,l._warned=!0):w||(c.warn("Plugin.dependencies:",r.toString(m),"used by",r.toString(d),"could not be resolved."),l._warned=!0),y.name});for(var g=0;g<f[h].length;g+=1)r.dependencies(f[h][g],f);return f}},r.dependencyParse=function(l){if(c.isString(l)){var f=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return f.test(l)||c.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},r.versionParse=function(l){var f=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;f.test(l)||c.warn("Plugin.versionParse:",l,"is not a valid version or range.");var d=f.exec(l),h=Number(d[4]),g=Number(d[5]),m=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:l,operator:d[1]||d[2]||"",major:h,minor:g,patch:m,parts:[h,g,m],prerelease:d[7],number:h*1e8+g*1e4+m}},r.versionSatisfies=function(l,f){f=f||"*";var d=r.versionParse(f),h=r.versionParse(l);if(d.isRange){if(d.operator==="*"||l==="*")return!0;if(d.operator===">")return h.number>d.number;if(d.operator===">=")return h.number>=d.number;if(d.operator==="~")return h.major===d.major&&h.minor===d.minor&&h.patch>=d.patch;if(d.operator==="^")return d.major>0?h.major===d.major&&h.number>=d.number:d.minor>0?h.minor===d.minor&&h.patch>=d.patch:h.patch===d.patch}return l===f||l==="*"}})()}),(function(n,s){var i={};n.exports=i,(function(){i.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(7),l=i(18),f=i(13),d=i(19),h=i(5),g=i(6),m=i(10),y=i(0),w=i(4);(function(){r._deltaMax=1e3/60,r.create=function(v){v=v||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},C=y.extend(x,v);return C.world=v.world||g.create({label:"World"}),C.pairs=v.pairs||d.create(),C.detector=v.detector||f.create(),C.detector.pairs=C.pairs,C.grid={buckets:[]},C.world.gravity=C.gravity,C.broadphase=C.grid,C.metrics={},C},r.update=function(v,x){var C=y.now(),D=v.world,N=v.detector,I=v.pairs,S=v.timing,A=S.timestamp,O;x>r._deltaMax&&y.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",r._deltaMax.toFixed(3),"ms."),x=typeof x<"u"?x:y._baseDelta,x*=S.timeScale,S.timestamp+=x,S.lastDelta=x;var T={timestamp:S.timestamp,delta:x};h.trigger(v,"beforeUpdate",T);var _=g.allBodies(D),R=g.allConstraints(D);for(D.isModified&&(f.setBodies(N,_),g.setModified(D,!1,!1,!0)),v.enableSleeping&&c.update(_,x),r._bodiesApplyGravity(_,v.gravity),x>0&&r._bodiesUpdate(_,x),h.trigger(v,"beforeSolve",T),m.preSolveAll(_),O=0;O<v.constraintIterations;O++)m.solveAll(R,x);m.postSolveAll(_);var U=f.collisions(N);d.update(I,U,A),v.enableSleeping&&c.afterCollisions(I.list),I.collisionStart.length>0&&h.trigger(v,"collisionStart",{pairs:I.collisionStart,timestamp:S.timestamp,delta:x});var L=y.clamp(20/v.positionIterations,0,1);for(l.preSolvePosition(I.list),O=0;O<v.positionIterations;O++)l.solvePosition(I.list,x,L);for(l.postSolvePosition(_),m.preSolveAll(_),O=0;O<v.constraintIterations;O++)m.solveAll(R,x);for(m.postSolveAll(_),l.preSolveVelocity(I.list),O=0;O<v.velocityIterations;O++)l.solveVelocity(I.list,x);return r._bodiesUpdateVelocities(_),I.collisionActive.length>0&&h.trigger(v,"collisionActive",{pairs:I.collisionActive,timestamp:S.timestamp,delta:x}),I.collisionEnd.length>0&&h.trigger(v,"collisionEnd",{pairs:I.collisionEnd,timestamp:S.timestamp,delta:x}),r._bodiesClearForces(_),h.trigger(v,"afterUpdate",T),v.timing.lastElapsed=y.now()-C,v},r.merge=function(v,x){if(y.extend(v,x),x.world){v.world=x.world,r.clear(v);for(var C=g.allBodies(v.world),D=0;D<C.length;D++){var N=C[D];c.set(N,!1),N.id=y.nextId()}}},r.clear=function(v){d.clear(v.pairs),f.clear(v.detector)},r._bodiesClearForces=function(v){for(var x=v.length,C=0;C<x;C++){var D=v[C];D.force.x=0,D.force.y=0,D.torque=0}},r._bodiesApplyGravity=function(v,x){var C=typeof x.scale<"u"?x.scale:.001,D=v.length;if(!(x.x===0&&x.y===0||C===0))for(var N=0;N<D;N++){var I=v[N];I.isStatic||I.isSleeping||(I.force.y+=I.mass*x.y*C,I.force.x+=I.mass*x.x*C)}},r._bodiesUpdate=function(v,x){for(var C=v.length,D=0;D<C;D++){var N=v[D];N.isStatic||N.isSleeping||w.update(N,x)}},r._bodiesUpdateVelocities=function(v){for(var x=v.length,C=0;C<x;C++)w.updateVelocities(v[C])}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(0),f=i(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(d){var h,g,m,y=d.length;for(h=0;h<y;h++)g=d[h],g.isActive&&(m=g.contactCount,g.collision.parentA.totalContacts+=m,g.collision.parentB.totalContacts+=m)},r.solvePosition=function(d,h,g){var m,y,w,v,x,C,D,N,I=r._positionDampen*(g||1),S=l.clamp(h/l._baseDelta,0,1),A=d.length;for(m=0;m<A;m++)y=d[m],!(!y.isActive||y.isSensor)&&(w=y.collision,v=w.parentA,x=w.parentB,C=w.normal,y.separation=w.depth+C.x*(x.positionImpulse.x-v.positionImpulse.x)+C.y*(x.positionImpulse.y-v.positionImpulse.y));for(m=0;m<A;m++)y=d[m],!(!y.isActive||y.isSensor)&&(w=y.collision,v=w.parentA,x=w.parentB,C=w.normal,N=y.separation-y.slop*S,(v.isStatic||x.isStatic)&&(N*=2),v.isStatic||v.isSleeping||(D=I/v.totalContacts,v.positionImpulse.x+=C.x*N*D,v.positionImpulse.y+=C.y*N*D),x.isStatic||x.isSleeping||(D=I/x.totalContacts,x.positionImpulse.x-=C.x*N*D,x.positionImpulse.y-=C.y*N*D))},r.postSolvePosition=function(d){for(var h=r._positionWarming,g=d.length,m=c.translate,y=f.update,w=0;w<g;w++){var v=d[w],x=v.positionImpulse,C=x.x,D=x.y,N=v.velocity;if(v.totalContacts=0,C!==0||D!==0){for(var I=0;I<v.parts.length;I++){var S=v.parts[I];m(S.vertices,x),y(S.bounds,S.vertices,N),S.position.x+=C,S.position.y+=D}v.positionPrev.x+=C,v.positionPrev.y+=D,C*N.x+D*N.y<0?(x.x=0,x.y=0):(x.x*=h,x.y*=h)}}},r.preSolveVelocity=function(d){var h=d.length,g,m;for(g=0;g<h;g++){var y=d[g];if(!(!y.isActive||y.isSensor)){var w=y.contacts,v=y.contactCount,x=y.collision,C=x.parentA,D=x.parentB,N=x.normal,I=x.tangent;for(m=0;m<v;m++){var S=w[m],A=S.vertex,O=S.normalImpulse,T=S.tangentImpulse;if(O!==0||T!==0){var _=N.x*O+I.x*T,R=N.y*O+I.y*T;C.isStatic||C.isSleeping||(C.positionPrev.x+=_*C.inverseMass,C.positionPrev.y+=R*C.inverseMass,C.anglePrev+=C.inverseInertia*((A.x-C.position.x)*R-(A.y-C.position.y)*_)),D.isStatic||D.isSleeping||(D.positionPrev.x-=_*D.inverseMass,D.positionPrev.y-=R*D.inverseMass,D.anglePrev-=D.inverseInertia*((A.x-D.position.x)*R-(A.y-D.position.y)*_))}}}}},r.solveVelocity=function(d,h){var g=h/l._baseDelta,m=g*g,y=m*g,w=-r._restingThresh*g,v=r._restingThreshTangent,x=r._frictionNormalMultiplier*g,C=r._frictionMaxStatic,D=d.length,N,I,S,A;for(S=0;S<D;S++){var O=d[S];if(!(!O.isActive||O.isSensor)){var T=O.collision,_=T.parentA,R=T.parentB,U=T.normal.x,L=T.normal.y,F=T.tangent.x,W=T.tangent.y,$=O.inverseMass,P=O.friction*O.frictionStatic*x,k=O.contacts,V=O.contactCount,K=1/V,G=_.position.x-_.positionPrev.x,j=_.position.y-_.positionPrev.y,X=_.angle-_.anglePrev,Z=R.position.x-R.positionPrev.x,ee=R.position.y-R.positionPrev.y,ae=R.angle-R.anglePrev;for(A=0;A<V;A++){var oe=k[A],be=oe.vertex,Ne=be.x-_.position.x,Te=be.y-_.position.y,We=be.x-R.position.x,Qe=be.y-R.position.y,Et=G-Te*X,ki=j+Ne*X,cn=Z-Qe*ae,ii=ee+We*ae,ri=Et-cn,qr=ki-ii,or=U*ri+L*qr,yn=F*ri+W*qr,ds=O.separation+or,ns=Math.min(ds,1);ns=ds<0?0:ns;var cr=ns*P;yn<-cr||yn>cr?(I=yn>0?yn:-yn,N=O.friction*(yn>0?1:-1)*y,N<-I?N=-I:N>I&&(N=I)):(N=yn,I=C);var lr=Ne*L-Te*U,St=We*L-Qe*U,ai=K/($+_.inverseInertia*lr*lr+R.inverseInertia*St*St),oi=(1+O.restitution)*or*ai;if(N*=ai,or<w)oe.normalImpulse=0;else{var Wr=oe.normalImpulse;oe.normalImpulse+=oi,oe.normalImpulse>0&&(oe.normalImpulse=0),oi=oe.normalImpulse-Wr}if(yn<-v||yn>v)oe.tangentImpulse=0;else{var Bi=oe.tangentImpulse;oe.tangentImpulse+=N,oe.tangentImpulse<-I&&(oe.tangentImpulse=-I),oe.tangentImpulse>I&&(oe.tangentImpulse=I),N=oe.tangentImpulse-Bi}var ji=U*oi+F*N,zi=L*oi+W*N;_.isStatic||_.isSleeping||(_.positionPrev.x+=ji*_.inverseMass,_.positionPrev.y+=zi*_.inverseMass,_.anglePrev+=(Ne*zi-Te*ji)*_.inverseInertia),R.isStatic||R.isSleeping||(R.positionPrev.x-=ji*R.inverseMass,R.positionPrev.y-=zi*R.inverseMass,R.anglePrev-=(We*zi-Qe*ji)*R.inverseInertia)}}}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(9),l=i(0);(function(){r.create=function(f){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},f)},r.update=function(f,d,h){var g=c.update,m=c.create,y=c.setActive,w=f.table,v=f.list,x=v.length,C=x,D=f.collisionStart,N=f.collisionEnd,I=f.collisionActive,S=d.length,A=0,O=0,T=0,_,R,U;for(U=0;U<S;U++)_=d[U],R=_.pair,R?(R.isActive&&(I[T++]=R),g(R,_,h)):(R=m(_,h),w[R.id]=R,D[A++]=R,v[C++]=R);for(C=0,x=v.length,U=0;U<x;U++)R=v[U],R.timeUpdated>=h?v[C++]=R:(y(R,!1,h),R.collision.bodyA.sleepCounter>0&&R.collision.bodyB.sleepCounter>0?v[C++]=R:(N[O++]=R,delete w[R.id]));v.length!==C&&(v.length=C),D.length!==A&&(D.length=A),N.length!==O&&(N.length=O),I.length!==T&&(I.length=T)},r.clear=function(f){return f.table={},f.list.length=0,f.collisionStart.length=0,f.collisionActive.length=0,f.collisionEnd.length=0,f}})()}),(function(n,s,i){var r=n.exports=i(21);r.Axes=i(11),r.Bodies=i(12),r.Body=i(4),r.Bounds=i(1),r.Collision=i(8),r.Common=i(0),r.Composite=i(6),r.Composites=i(22),r.Constraint=i(10),r.Contact=i(16),r.Detector=i(13),r.Engine=i(17),r.Events=i(5),r.Grid=i(23),r.Mouse=i(14),r.MouseConstraint=i(24),r.Pair=i(9),r.Pairs=i(19),r.Plugin=i(15),r.Query=i(25),r.Render=i(26),r.Resolver=i(18),r.Runner=i(27),r.SAT=i(28),r.Sleeping=i(7),r.Svg=i(29),r.Vector=i(2),r.Vertices=i(3),r.World=i(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")}),(function(n,s,i){var r={};n.exports=r;var c=i(15),l=i(0);(function(){r.name="matter-js",r.version="0.20.0",r.uses=[],r.used=[],r.use=function(){c.use(r,Array.prototype.slice.call(arguments))},r.before=function(f,d){return f=f.replace(/^Matter./,""),l.chainPathBefore(r,f,d)},r.after=function(f,d){return f=f.replace(/^Matter./,""),l.chainPathAfter(r,f,d)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(6),l=i(10),f=i(0),d=i(4),h=i(12),g=f.deprecated;(function(){r.stack=function(m,y,w,v,x,C,D){for(var N=c.create({label:"Stack"}),I=m,S=y,A,O=0,T=0;T<v;T++){for(var _=0,R=0;R<w;R++){var U=D(I,S,R,T,A,O);if(U){var L=U.bounds.max.y-U.bounds.min.y,F=U.bounds.max.x-U.bounds.min.x;L>_&&(_=L),d.translate(U,{x:F*.5,y:L*.5}),I=U.bounds.max.x+x,c.addBody(N,U),A=U,O+=1}else I+=x}S+=_+C,I=m}return N},r.chain=function(m,y,w,v,x,C){for(var D=m.bodies,N=1;N<D.length;N++){var I=D[N-1],S=D[N],A=I.bounds.max.y-I.bounds.min.y,O=I.bounds.max.x-I.bounds.min.x,T=S.bounds.max.y-S.bounds.min.y,_=S.bounds.max.x-S.bounds.min.x,R={bodyA:I,pointA:{x:O*y,y:A*w},bodyB:S,pointB:{x:_*v,y:T*x}},U=f.extend(R,C);c.addConstraint(m,l.create(U))}return m.label+=" Chain",m},r.mesh=function(m,y,w,v,x){var C=m.bodies,D,N,I,S,A;for(D=0;D<w;D++){for(N=1;N<y;N++)I=C[N-1+D*y],S=C[N+D*y],c.addConstraint(m,l.create(f.extend({bodyA:I,bodyB:S},x)));if(D>0)for(N=0;N<y;N++)I=C[N+(D-1)*y],S=C[N+D*y],c.addConstraint(m,l.create(f.extend({bodyA:I,bodyB:S},x))),v&&N>0&&(A=C[N-1+(D-1)*y],c.addConstraint(m,l.create(f.extend({bodyA:A,bodyB:S},x)))),v&&N<y-1&&(A=C[N+1+(D-1)*y],c.addConstraint(m,l.create(f.extend({bodyA:A,bodyB:S},x))))}return m.label+=" Mesh",m},r.pyramid=function(m,y,w,v,x,C,D){return r.stack(m,y,w,v,x,C,function(N,I,S,A,O,T){var _=Math.min(v,Math.ceil(w/2)),R=O?O.bounds.max.x-O.bounds.min.x:0;if(!(A>_)){A=_-A;var U=A,L=w-1-A;if(!(S<U||S>L)){T===1&&d.translate(O,{x:(S+(w%2===1?1:-1))*R,y:0});var F=O?S*R:0;return D(m+F+S*x,I,S,A,O,T)}}})},r.newtonsCradle=function(m,y,w,v,x){for(var C=c.create({label:"Newtons Cradle"}),D=0;D<w;D++){var N=1.9,I=h.circle(m+D*(v*N),y+x,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=l.create({pointA:{x:m+D*(v*N),y},bodyB:I});c.addBody(C,I),c.addConstraint(C,S)}return C},g(r,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),r.car=function(m,y,w,v,x){var C=d.nextGroup(!0),D=20,N=-w*.5+D,I=w*.5-D,S=0,A=c.create({label:"Car"}),O=h.rectangle(m,y,w,v,{collisionFilter:{group:C},chamfer:{radius:v*.5},density:2e-4}),T=h.circle(m+N,y+S,x,{collisionFilter:{group:C},friction:.8}),_=h.circle(m+I,y+S,x,{collisionFilter:{group:C},friction:.8}),R=l.create({bodyB:O,pointB:{x:N,y:S},bodyA:T,stiffness:1,length:0}),U=l.create({bodyB:O,pointB:{x:I,y:S},bodyA:_,stiffness:1,length:0});return c.addBody(A,O),c.addBody(A,T),c.addBody(A,_),c.addConstraint(A,R),c.addConstraint(A,U),A},g(r,"car","Composites.car  moved to car example"),r.softBody=function(m,y,w,v,x,C,D,N,I,S){I=f.extend({inertia:1/0},I),S=f.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var A=r.stack(m,y,w,v,x,C,function(O,T){return h.circle(O,T,N,I)});return r.mesh(A,w,v,D,S),A.label="Soft Body",A},g(r,"softBody","Composites.softBody  moved to softBody and cloth examples")})()}),(function(n,s,i){var r={};n.exports=r;var c=i(9),l=i(0),f=l.deprecated;(function(){r.create=function(d){var h={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(h,d)},r.update=function(d,h,g,m){var y,w,v,x=g.world,C=d.buckets,D,N,I=!1;for(y=0;y<h.length;y++){var S=h[y];if(!(S.isSleeping&&!m)&&!(x.bounds&&(S.bounds.max.x<x.bounds.min.x||S.bounds.min.x>x.bounds.max.x||S.bounds.max.y<x.bounds.min.y||S.bounds.min.y>x.bounds.max.y))){var A=r._getRegion(d,S);if(!S.region||A.id!==S.region.id||m){(!S.region||m)&&(S.region=A);var O=r._regionUnion(A,S.region);for(w=O.startCol;w<=O.endCol;w++)for(v=O.startRow;v<=O.endRow;v++){N=r._getBucketId(w,v),D=C[N];var T=w>=A.startCol&&w<=A.endCol&&v>=A.startRow&&v<=A.endRow,_=w>=S.region.startCol&&w<=S.region.endCol&&v>=S.region.startRow&&v<=S.region.endRow;!T&&_&&_&&D&&r._bucketRemoveBody(d,D,S),(S.region===A||T&&!_||m)&&(D||(D=r._createBucket(C,N)),r._bucketAddBody(d,D,S))}S.region=A,I=!0}}}I&&(d.pairsList=r._createActivePairsList(d))},f(r,"update","Grid.update  replaced by Matter.Detector"),r.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},f(r,"clear","Grid.clear  replaced by Matter.Detector"),r._regionUnion=function(d,h){var g=Math.min(d.startCol,h.startCol),m=Math.max(d.endCol,h.endCol),y=Math.min(d.startRow,h.startRow),w=Math.max(d.endRow,h.endRow);return r._createRegion(g,m,y,w)},r._getRegion=function(d,h){var g=h.bounds,m=Math.floor(g.min.x/d.bucketWidth),y=Math.floor(g.max.x/d.bucketWidth),w=Math.floor(g.min.y/d.bucketHeight),v=Math.floor(g.max.y/d.bucketHeight);return r._createRegion(m,y,w,v)},r._createRegion=function(d,h,g,m){return{id:d+","+h+","+g+","+m,startCol:d,endCol:h,startRow:g,endRow:m}},r._getBucketId=function(d,h){return"C"+d+"R"+h},r._createBucket=function(d,h){var g=d[h]=[];return g},r._bucketAddBody=function(d,h,g){var m=d.pairs,y=c.id,w=h.length,v;for(v=0;v<w;v++){var x=h[v];if(!(g.id===x.id||g.isStatic&&x.isStatic)){var C=y(g,x),D=m[C];D?D[2]+=1:m[C]=[g,x,1]}}h.push(g)},r._bucketRemoveBody=function(d,h,g){var m=d.pairs,y=c.id,w;h.splice(l.indexOf(h,g),1);var v=h.length;for(w=0;w<v;w++){var x=m[y(g,h[w])];x&&(x[2]-=1)}},r._createActivePairsList=function(d){var h,g=d.pairs,m=l.keys(g),y=m.length,w=[],v;for(v=0;v<y;v++)h=g[m[v]],h[2]>0?w.push(h):delete g[m[v]];return w}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(3),l=i(7),f=i(14),d=i(5),h=i(13),g=i(10),m=i(6),y=i(0),w=i(1);(function(){r.create=function(v,x){var C=(v?v.mouse:null)||(x?x.mouse:null);C||(v&&v.render&&v.render.canvas?C=f.create(v.render.canvas):x&&x.element?C=f.create(x.element):(C=f.create(),y.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var D=g.create({label:"Mouse Constraint",pointA:C.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),N={type:"mouseConstraint",mouse:C,element:null,body:null,constraint:D,collisionFilter:{category:1,mask:4294967295,group:0}},I=y.extend(N,x);return d.on(v,"beforeUpdate",function(){var S=m.allBodies(v.world);r.update(I,S),r._triggerEvents(I)}),I},r.update=function(v,x){var C=v.mouse,D=v.constraint,N=v.body;if(C.button===0){if(D.bodyB)l.set(D.bodyB,!1),D.pointA=C.position;else for(var I=0;I<x.length;I++)if(N=x[I],w.contains(N.bounds,C.position)&&h.canCollide(N.collisionFilter,v.collisionFilter))for(var S=N.parts.length>1?1:0;S<N.parts.length;S++){var A=N.parts[S];if(c.contains(A.vertices,C.position)){D.pointA=C.position,D.bodyB=v.body=N,D.pointB={x:C.position.x-N.position.x,y:C.position.y-N.position.y},D.angleB=N.angle,l.set(N,!1),d.trigger(v,"startdrag",{mouse:C,body:N});break}}}else D.bodyB=v.body=null,D.pointB=null,N&&d.trigger(v,"enddrag",{mouse:C,body:N})},r._triggerEvents=function(v){var x=v.mouse,C=x.sourceEvents;C.mousemove&&d.trigger(v,"mousemove",{mouse:x}),C.mousedown&&d.trigger(v,"mousedown",{mouse:x}),C.mouseup&&d.trigger(v,"mouseup",{mouse:x}),f.clearSourceEvents(x)}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(2),l=i(8),f=i(1),d=i(12),h=i(3);(function(){r.collides=function(g,m){for(var y=[],w=m.length,v=g.bounds,x=l.collides,C=f.overlaps,D=0;D<w;D++){var N=m[D],I=N.parts.length,S=I===1?0:1;if(C(N.bounds,v))for(var A=S;A<I;A++){var O=N.parts[A];if(C(O.bounds,v)){var T=x(O,g);if(T){y.push(T);break}}}}return y},r.ray=function(g,m,y,w){w=w||1e-100;for(var v=c.angle(m,y),x=c.magnitude(c.sub(m,y)),C=(y.x+m.x)*.5,D=(y.y+m.y)*.5,N=d.rectangle(C,D,x,w,{angle:v}),I=r.collides(N,g),S=0;S<I.length;S+=1){var A=I[S];A.body=A.bodyB=A.bodyA}return I},r.region=function(g,m,y){for(var w=[],v=0;v<g.length;v++){var x=g[v],C=f.overlaps(x.bounds,m);(C&&!y||!C&&y)&&w.push(x)}return w},r.point=function(g,m){for(var y=[],w=0;w<g.length;w++){var v=g[w];if(f.contains(v.bounds,m))for(var x=v.parts.length===1?0:1;x<v.parts.length;x++){var C=v.parts[x];if(f.contains(C.bounds,m)&&h.contains(C.vertices,m)){y.push(v);break}}}return y}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(4),l=i(0),f=i(6),d=i(1),h=i(5),g=i(2),m=i(14);(function(){var y,w;typeof window<"u"&&(y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(l.now())},1e3/60)},w=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(S){var A={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},O=l.extend(A,S);return O.canvas&&(O.canvas.width=O.options.width||O.canvas.width,O.canvas.height=O.options.height||O.canvas.height),O.mouse=S.mouse,O.engine=S.engine,O.canvas=O.canvas||C(O.options.width,O.options.height),O.context=O.canvas.getContext("2d"),O.textures={},O.bounds=O.bounds||{min:{x:0,y:0},max:{x:O.canvas.width,y:O.canvas.height}},O.controller=r,O.options.showBroadphase=!1,O.options.pixelRatio!==1&&r.setPixelRatio(O,O.options.pixelRatio),l.isElement(O.element)&&O.element.appendChild(O.canvas),O},r.run=function(S){(function A(O){S.frameRequestId=y(A),v(S,O),r.world(S,O),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&r.stats(S,S.context,O),(S.options.showPerformance||S.options.showDebug)&&r.performance(S,S.context,O),S.context.setTransform(1,0,0,1,0,0)})()},r.stop=function(S){w(S.frameRequestId)},r.setPixelRatio=function(S,A){var O=S.options,T=S.canvas;A==="auto"&&(A=D(T)),O.pixelRatio=A,T.setAttribute("data-pixel-ratio",A),T.width=O.width*A,T.height=O.height*A,T.style.width=O.width+"px",T.style.height=O.height+"px"},r.setSize=function(S,A,O){S.options.width=A,S.options.height=O,S.bounds.max.x=S.bounds.min.x+A,S.bounds.max.y=S.bounds.min.y+O,S.options.pixelRatio!==1?r.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=A,S.canvas.height=O)},r.lookAt=function(S,A,O,T){T=typeof T<"u"?T:!0,A=l.isArray(A)?A:[A],O=O||{x:0,y:0};for(var _={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},R=0;R<A.length;R+=1){var U=A[R],L=U.bounds?U.bounds.min:U.min||U.position||U,F=U.bounds?U.bounds.max:U.max||U.position||U;L&&F&&(L.x<_.min.x&&(_.min.x=L.x),F.x>_.max.x&&(_.max.x=F.x),L.y<_.min.y&&(_.min.y=L.y),F.y>_.max.y&&(_.max.y=F.y))}var W=_.max.x-_.min.x+2*O.x,$=_.max.y-_.min.y+2*O.y,P=S.canvas.height,k=S.canvas.width,V=k/P,K=W/$,G=1,j=1;K>V?j=K/V:G=V/K,S.options.hasBounds=!0,S.bounds.min.x=_.min.x,S.bounds.max.x=_.min.x+W*G,S.bounds.min.y=_.min.y,S.bounds.max.y=_.min.y+$*j,T&&(S.bounds.min.x+=W*.5-W*G*.5,S.bounds.max.x+=W*.5-W*G*.5,S.bounds.min.y+=$*.5-$*j*.5,S.bounds.max.y+=$*.5-$*j*.5),S.bounds.min.x-=O.x,S.bounds.max.x-=O.x,S.bounds.min.y-=O.y,S.bounds.max.y-=O.y,S.mouse&&(m.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),m.setOffset(S.mouse,S.bounds.min))},r.startViewTransform=function(S){var A=S.bounds.max.x-S.bounds.min.x,O=S.bounds.max.y-S.bounds.min.y,T=A/S.options.width,_=O/S.options.height;S.context.setTransform(S.options.pixelRatio/T,0,0,S.options.pixelRatio/_,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},r.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},r.world=function(S,A){var O=l.now(),T=S.engine,_=T.world,R=S.canvas,U=S.context,L=S.options,F=S.timing,W=f.allBodies(_),$=f.allConstraints(_),P=L.wireframes?L.wireframeBackground:L.background,k=[],V=[],K,G={timestamp:T.timing.timestamp};if(h.trigger(S,"beforeRender",G),S.currentBackground!==P&&I(S,P),U.globalCompositeOperation="source-in",U.fillStyle="transparent",U.fillRect(0,0,R.width,R.height),U.globalCompositeOperation="source-over",L.hasBounds){for(K=0;K<W.length;K++){var j=W[K];d.overlaps(j.bounds,S.bounds)&&k.push(j)}for(K=0;K<$.length;K++){var X=$[K],Z=X.bodyA,ee=X.bodyB,ae=X.pointA,oe=X.pointB;Z&&(ae=g.add(Z.position,X.pointA)),ee&&(oe=g.add(ee.position,X.pointB)),!(!ae||!oe)&&(d.contains(S.bounds,ae)||d.contains(S.bounds,oe))&&V.push(X)}r.startViewTransform(S),S.mouse&&(m.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),m.setOffset(S.mouse,S.bounds.min))}else V=$,k=W,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!L.wireframes||T.enableSleeping&&L.showSleeping?r.bodies(S,k,U):(L.showConvexHulls&&r.bodyConvexHulls(S,k,U),r.bodyWireframes(S,k,U)),L.showBounds&&r.bodyBounds(S,k,U),(L.showAxes||L.showAngleIndicator)&&r.bodyAxes(S,k,U),L.showPositions&&r.bodyPositions(S,k,U),L.showVelocity&&r.bodyVelocity(S,k,U),L.showIds&&r.bodyIds(S,k,U),L.showSeparations&&r.separations(S,T.pairs.list,U),L.showCollisions&&r.collisions(S,T.pairs.list,U),L.showVertexNumbers&&r.vertexNumbers(S,k,U),L.showMousePosition&&r.mousePosition(S,S.mouse,U),r.constraints(V,U),L.hasBounds&&r.endViewTransform(S),h.trigger(S,"afterRender",G),F.lastElapsed=l.now()-O},r.stats=function(S,A,O){for(var T=S.engine,_=T.world,R=f.allBodies(_),U=0,L=55,F=44,W=0,$=0,P=0;P<R.length;P+=1)U+=R[P].parts.length;var k={Part:U,Body:R.length,Cons:f.allConstraints(_).length,Comp:f.allComposites(_).length,Pair:T.pairs.list.length};A.fillStyle="#0e0f19",A.fillRect(W,$,L*5.5,F),A.font="12px Arial",A.textBaseline="top",A.textAlign="right";for(var V in k){var K=k[V];A.fillStyle="#aaa",A.fillText(V,W+L,$+8),A.fillStyle="#eee",A.fillText(K,W+L,$+26),W+=L}},r.performance=function(S,A){var O=S.engine,T=S.timing,_=T.deltaHistory,R=T.elapsedHistory,U=T.timestampElapsedHistory,L=T.engineDeltaHistory,F=T.engineUpdatesHistory,W=T.engineElapsedHistory,$=O.timing.lastUpdatesPerFrame,P=O.timing.lastDelta,k=x(_),V=x(R),K=x(L),G=x(F),j=x(W),X=x(U),Z=X/k||0,ee=Math.round(k/P),ae=1e3/k||0,oe=4,be=12,Ne=60,Te=34,We=10,Qe=69;A.fillStyle="#0e0f19",A.fillRect(0,50,be*5+Ne*6+22,Te),r.status(A,We,Qe,Ne,oe,_.length,Math.round(ae)+" fps",ae/r._goodFps,function(Et){return _[Et]/k-1}),r.status(A,We+be+Ne,Qe,Ne,oe,L.length,P.toFixed(2)+" dt",r._goodDelta/P,function(Et){return L[Et]/K-1}),r.status(A,We+(be+Ne)*2,Qe,Ne,oe,F.length,$+" upf",Math.pow(l.clamp(G/ee||1,0,1),4),function(Et){return F[Et]/G-1}),r.status(A,We+(be+Ne)*3,Qe,Ne,oe,W.length,j.toFixed(2)+" ut",1-$*j/r._goodFps,function(Et){return W[Et]/j-1}),r.status(A,We+(be+Ne)*4,Qe,Ne,oe,R.length,V.toFixed(2)+" rt",1-V/r._goodFps,function(Et){return R[Et]/V-1}),r.status(A,We+(be+Ne)*5,Qe,Ne,oe,U.length,Z.toFixed(2)+" x",Z*Z*Z,function(Et){return(U[Et]/_[Et]/Z||0)-1})},r.status=function(S,A,O,T,_,R,U,L,F){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(A,O+7,T,1),S.beginPath(),S.moveTo(A,O+7-_*l.clamp(.4*F(0),-2,2));for(var W=0;W<T;W+=1)S.lineTo(A+W,O+7-(W<R?_*l.clamp(.4*F(W),-2,2):0));S.stroke(),S.fillStyle="hsl("+l.clamp(25+95*L,0,120)+",100%,60%)",S.fillRect(A,O-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(U,A+T,O-5)},r.constraints=function(S,A){for(var O=A,T=0;T<S.length;T++){var _=S[T];if(!(!_.render.visible||!_.pointA||!_.pointB)){var R=_.bodyA,U=_.bodyB,L,F;if(R?L=g.add(R.position,_.pointA):L=_.pointA,_.render.type==="pin")O.beginPath(),O.arc(L.x,L.y,3,0,2*Math.PI),O.closePath();else{if(U?F=g.add(U.position,_.pointB):F=_.pointB,O.beginPath(),O.moveTo(L.x,L.y),_.render.type==="spring")for(var W=g.sub(F,L),$=g.perp(g.normalise(W)),P=Math.ceil(l.clamp(_.length/5,12,20)),k,V=1;V<P;V+=1)k=V%2===0?1:-1,O.lineTo(L.x+W.x*(V/P)+$.x*k*4,L.y+W.y*(V/P)+$.y*k*4);O.lineTo(F.x,F.y)}_.render.lineWidth&&(O.lineWidth=_.render.lineWidth,O.strokeStyle=_.render.strokeStyle,O.stroke()),_.render.anchors&&(O.fillStyle=_.render.strokeStyle,O.beginPath(),O.arc(L.x,L.y,3,0,2*Math.PI),O.arc(F.x,F.y,3,0,2*Math.PI),O.closePath(),O.fill())}}},r.bodies=function(S,A,O){var T=O;S.engine;var _=S.options,R=_.showInternalEdges||!_.wireframes,U,L,F,W;for(F=0;F<A.length;F++)if(U=A[F],!!U.render.visible){for(W=U.parts.length>1?1:0;W<U.parts.length;W++)if(L=U.parts[W],!!L.render.visible){if(_.showSleeping&&U.isSleeping?T.globalAlpha=.5*L.render.opacity:L.render.opacity!==1&&(T.globalAlpha=L.render.opacity),L.render.sprite&&L.render.sprite.texture&&!_.wireframes){var $=L.render.sprite,P=N(S,$.texture);T.translate(L.position.x,L.position.y),T.rotate(L.angle),T.drawImage(P,P.width*-$.xOffset*$.xScale,P.height*-$.yOffset*$.yScale,P.width*$.xScale,P.height*$.yScale),T.rotate(-L.angle),T.translate(-L.position.x,-L.position.y)}else{if(L.circleRadius)T.beginPath(),T.arc(L.position.x,L.position.y,L.circleRadius,0,2*Math.PI);else{T.beginPath(),T.moveTo(L.vertices[0].x,L.vertices[0].y);for(var k=1;k<L.vertices.length;k++)!L.vertices[k-1].isInternal||R?T.lineTo(L.vertices[k].x,L.vertices[k].y):T.moveTo(L.vertices[k].x,L.vertices[k].y),L.vertices[k].isInternal&&!R&&T.moveTo(L.vertices[(k+1)%L.vertices.length].x,L.vertices[(k+1)%L.vertices.length].y);T.lineTo(L.vertices[0].x,L.vertices[0].y),T.closePath()}_.wireframes?(T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()):(T.fillStyle=L.render.fillStyle,L.render.lineWidth&&(T.lineWidth=L.render.lineWidth,T.strokeStyle=L.render.strokeStyle,T.stroke()),T.fill())}T.globalAlpha=1}}},r.bodyWireframes=function(S,A,O){var T=O,_=S.options.showInternalEdges,R,U,L,F,W;for(T.beginPath(),L=0;L<A.length;L++)if(R=A[L],!!R.render.visible)for(W=R.parts.length>1?1:0;W<R.parts.length;W++){for(U=R.parts[W],T.moveTo(U.vertices[0].x,U.vertices[0].y),F=1;F<U.vertices.length;F++)!U.vertices[F-1].isInternal||_?T.lineTo(U.vertices[F].x,U.vertices[F].y):T.moveTo(U.vertices[F].x,U.vertices[F].y),U.vertices[F].isInternal&&!_&&T.moveTo(U.vertices[(F+1)%U.vertices.length].x,U.vertices[(F+1)%U.vertices.length].y);T.lineTo(U.vertices[0].x,U.vertices[0].y)}T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()},r.bodyConvexHulls=function(S,A,O){var T=O,_,R,U;for(T.beginPath(),R=0;R<A.length;R++)if(_=A[R],!(!_.render.visible||_.parts.length===1)){for(T.moveTo(_.vertices[0].x,_.vertices[0].y),U=1;U<_.vertices.length;U++)T.lineTo(_.vertices[U].x,_.vertices[U].y);T.lineTo(_.vertices[0].x,_.vertices[0].y)}T.lineWidth=1,T.strokeStyle="rgba(255,255,255,0.2)",T.stroke()},r.vertexNumbers=function(S,A,O){var T=O,_,R,U;for(_=0;_<A.length;_++){var L=A[_].parts;for(U=L.length>1?1:0;U<L.length;U++){var F=L[U];for(R=0;R<F.vertices.length;R++)T.fillStyle="rgba(255,255,255,0.2)",T.fillText(_+"_"+R,F.position.x+(F.vertices[R].x-F.position.x)*.8,F.position.y+(F.vertices[R].y-F.position.y)*.8)}}},r.mousePosition=function(S,A,O){var T=O;T.fillStyle="rgba(255,255,255,0.8)",T.fillText(A.position.x+"  "+A.position.y,A.position.x+5,A.position.y-5)},r.bodyBounds=function(S,A,O){var T=O;S.engine;var _=S.options;T.beginPath();for(var R=0;R<A.length;R++){var U=A[R];if(U.render.visible)for(var L=A[R].parts,F=L.length>1?1:0;F<L.length;F++){var W=L[F];T.rect(W.bounds.min.x,W.bounds.min.y,W.bounds.max.x-W.bounds.min.x,W.bounds.max.y-W.bounds.min.y)}}_.wireframes?T.strokeStyle="rgba(255,255,255,0.08)":T.strokeStyle="rgba(0,0,0,0.1)",T.lineWidth=1,T.stroke()},r.bodyAxes=function(S,A,O){var T=O;S.engine;var _=S.options,R,U,L,F;for(T.beginPath(),U=0;U<A.length;U++){var W=A[U],$=W.parts;if(W.render.visible)if(_.showAxes)for(L=$.length>1?1:0;L<$.length;L++)for(R=$[L],F=0;F<R.axes.length;F++){var P=R.axes[F];T.moveTo(R.position.x,R.position.y),T.lineTo(R.position.x+P.x*20,R.position.y+P.y*20)}else for(L=$.length>1?1:0;L<$.length;L++)for(R=$[L],F=0;F<R.axes.length;F++)T.moveTo(R.position.x,R.position.y),T.lineTo((R.vertices[0].x+R.vertices[R.vertices.length-1].x)/2,(R.vertices[0].y+R.vertices[R.vertices.length-1].y)/2)}_.wireframes?(T.strokeStyle="indianred",T.lineWidth=1):(T.strokeStyle="rgba(255, 255, 255, 0.4)",T.globalCompositeOperation="overlay",T.lineWidth=2),T.stroke(),T.globalCompositeOperation="source-over"},r.bodyPositions=function(S,A,O){var T=O;S.engine;var _=S.options,R,U,L,F;for(T.beginPath(),L=0;L<A.length;L++)if(R=A[L],!!R.render.visible)for(F=0;F<R.parts.length;F++)U=R.parts[F],T.arc(U.position.x,U.position.y,3,0,2*Math.PI,!1),T.closePath();for(_.wireframes?T.fillStyle="indianred":T.fillStyle="rgba(0,0,0,0.5)",T.fill(),T.beginPath(),L=0;L<A.length;L++)R=A[L],R.render.visible&&(T.arc(R.positionPrev.x,R.positionPrev.y,2,0,2*Math.PI,!1),T.closePath());T.fillStyle="rgba(255,165,0,0.8)",T.fill()},r.bodyVelocity=function(S,A,O){var T=O;T.beginPath();for(var _=0;_<A.length;_++){var R=A[_];if(R.render.visible){var U=c.getVelocity(R);T.moveTo(R.position.x,R.position.y),T.lineTo(R.position.x+U.x,R.position.y+U.y)}}T.lineWidth=3,T.strokeStyle="cornflowerblue",T.stroke()},r.bodyIds=function(S,A,O){var T=O,_,R;for(_=0;_<A.length;_++)if(A[_].render.visible){var U=A[_].parts;for(R=U.length>1?1:0;R<U.length;R++){var L=U[R];T.font="12px Arial",T.fillStyle="rgba(255,255,255,0.5)",T.fillText(L.id,L.position.x+10,L.position.y-10)}}},r.collisions=function(S,A,O){var T=O,_=S.options,R,U,L,F;for(T.beginPath(),L=0;L<A.length;L++)if(R=A[L],!!R.isActive)for(U=R.collision,F=0;F<R.contactCount;F++){var W=R.contacts[F],$=W.vertex;T.rect($.x-1.5,$.y-1.5,3.5,3.5)}for(_.wireframes?T.fillStyle="rgba(255,255,255,0.7)":T.fillStyle="orange",T.fill(),T.beginPath(),L=0;L<A.length;L++)if(R=A[L],!!R.isActive&&(U=R.collision,R.contactCount>0)){var P=R.contacts[0].vertex.x,k=R.contacts[0].vertex.y;R.contactCount===2&&(P=(R.contacts[0].vertex.x+R.contacts[1].vertex.x)/2,k=(R.contacts[0].vertex.y+R.contacts[1].vertex.y)/2),U.bodyB===U.supports[0].body||U.bodyA.isStatic===!0?T.moveTo(P-U.normal.x*8,k-U.normal.y*8):T.moveTo(P+U.normal.x*8,k+U.normal.y*8),T.lineTo(P,k)}_.wireframes?T.strokeStyle="rgba(255,165,0,0.7)":T.strokeStyle="orange",T.lineWidth=1,T.stroke()},r.separations=function(S,A,O){var T=O,_=S.options,R,U,L,F,W;for(T.beginPath(),W=0;W<A.length;W++)if(R=A[W],!!R.isActive){U=R.collision,L=U.bodyA,F=U.bodyB;var $=1;!F.isStatic&&!L.isStatic&&($=.5),F.isStatic&&($=0),T.moveTo(F.position.x,F.position.y),T.lineTo(F.position.x-U.penetration.x*$,F.position.y-U.penetration.y*$),$=1,!F.isStatic&&!L.isStatic&&($=.5),L.isStatic&&($=0),T.moveTo(L.position.x,L.position.y),T.lineTo(L.position.x+U.penetration.x*$,L.position.y+U.penetration.y*$)}_.wireframes?T.strokeStyle="rgba(255,165,0,0.5)":T.strokeStyle="orange",T.stroke()},r.inspector=function(S,A){S.engine;var O=S.selected,T=S.render,_=T.options,R;if(_.hasBounds){var U=T.bounds.max.x-T.bounds.min.x,L=T.bounds.max.y-T.bounds.min.y,F=U/T.options.width,W=L/T.options.height;A.scale(1/F,1/W),A.translate(-T.bounds.min.x,-T.bounds.min.y)}for(var $=0;$<O.length;$++){var P=O[$].data;switch(A.translate(.5,.5),A.lineWidth=1,A.strokeStyle="rgba(255,165,0,0.9)",A.setLineDash([1,2]),P.type){case"body":R=P.bounds,A.beginPath(),A.rect(Math.floor(R.min.x-3),Math.floor(R.min.y-3),Math.floor(R.max.x-R.min.x+6),Math.floor(R.max.y-R.min.y+6)),A.closePath(),A.stroke();break;case"constraint":var k=P.pointA;P.bodyA&&(k=P.pointB),A.beginPath(),A.arc(k.x,k.y,10,0,2*Math.PI),A.closePath(),A.stroke();break}A.setLineDash([]),A.translate(-.5,-.5)}S.selectStart!==null&&(A.translate(.5,.5),A.lineWidth=1,A.strokeStyle="rgba(255,165,0,0.6)",A.fillStyle="rgba(255,165,0,0.1)",R=S.selectBounds,A.beginPath(),A.rect(Math.floor(R.min.x),Math.floor(R.min.y),Math.floor(R.max.x-R.min.x),Math.floor(R.max.y-R.min.y)),A.closePath(),A.stroke(),A.fill(),A.translate(-.5,-.5)),_.hasBounds&&A.setTransform(1,0,0,1,0,0)};var v=function(S,A){var O=S.engine,T=S.timing,_=T.historySize,R=O.timing.timestamp;T.delta=A-T.lastTime||r._goodDelta,T.lastTime=A,T.timestampElapsed=R-T.lastTimestamp||0,T.lastTimestamp=R,T.deltaHistory.unshift(T.delta),T.deltaHistory.length=Math.min(T.deltaHistory.length,_),T.engineDeltaHistory.unshift(O.timing.lastDelta),T.engineDeltaHistory.length=Math.min(T.engineDeltaHistory.length,_),T.timestampElapsedHistory.unshift(T.timestampElapsed),T.timestampElapsedHistory.length=Math.min(T.timestampElapsedHistory.length,_),T.engineUpdatesHistory.unshift(O.timing.lastUpdatesPerFrame),T.engineUpdatesHistory.length=Math.min(T.engineUpdatesHistory.length,_),T.engineElapsedHistory.unshift(O.timing.lastElapsed),T.engineElapsedHistory.length=Math.min(T.engineElapsedHistory.length,_),T.elapsedHistory.unshift(T.lastElapsed),T.elapsedHistory.length=Math.min(T.elapsedHistory.length,_)},x=function(S){for(var A=0,O=0;O<S.length;O+=1)A+=S[O];return A/S.length||0},C=function(S,A){var O=document.createElement("canvas");return O.width=S,O.height=A,O.oncontextmenu=function(){return!1},O.onselectstart=function(){return!1},O},D=function(S){var A=S.getContext("2d"),O=window.devicePixelRatio||1,T=A.webkitBackingStorePixelRatio||A.mozBackingStorePixelRatio||A.msBackingStorePixelRatio||A.oBackingStorePixelRatio||A.backingStorePixelRatio||1;return O/T},N=function(S,A){var O=S.textures[A];return O||(O=S.textures[A]=new Image,O.src=A,O)},I=function(S,A){var O=A;/(jpg|gif|png)$/.test(A)&&(O="url("+A+")"),S.canvas.style.background=O,S.canvas.style.backgroundSize="contain",S.currentBackground=A}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(5),l=i(17),f=i(0);(function(){r._maxFrameDelta=1e3/15,r._frameDeltaFallback=1e3/60,r._timeBufferMargin=1.5,r._elapsedNextEstimate=1,r._smoothingLowerBound=.1,r._smoothingUpperBound=.9,r.create=function(h){var g={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},m=f.extend(g,h);return m.fps=0,m},r.run=function(h,g){return h.timeBuffer=r._frameDeltaFallback,(function m(y){h.frameRequestId=r._onNextFrame(h,m),y&&h.enabled&&r.tick(h,g,y)})(),h},r.tick=function(h,g,m){var y=f.now(),w=h.delta,v=0,x=m-h.timeLastTick;if((!x||!h.timeLastTick||x>Math.max(r._maxFrameDelta,h.maxFrameTime))&&(x=h.frameDelta||r._frameDeltaFallback),h.frameDeltaSmoothing){h.frameDeltaHistory.push(x),h.frameDeltaHistory=h.frameDeltaHistory.slice(-h.frameDeltaHistorySize);var C=h.frameDeltaHistory.slice(0).sort(),D=h.frameDeltaHistory.slice(C.length*r._smoothingLowerBound,C.length*r._smoothingUpperBound),N=d(D);x=N||x}h.frameDeltaSnapping&&(x=1e3/Math.round(1e3/x)),h.frameDelta=x,h.timeLastTick=m,h.timeBuffer+=h.frameDelta,h.timeBuffer=f.clamp(h.timeBuffer,0,h.frameDelta+w*r._timeBufferMargin),h.lastUpdatesDeferred=0;var I=h.maxUpdates||Math.ceil(h.maxFrameTime/w),S={timestamp:g.timing.timestamp};c.trigger(h,"beforeTick",S),c.trigger(h,"tick",S);for(var A=f.now();w>0&&h.timeBuffer>=w*r._timeBufferMargin;){c.trigger(h,"beforeUpdate",S),l.update(g,w),c.trigger(h,"afterUpdate",S),h.timeBuffer-=w,v+=1;var O=f.now()-y,T=f.now()-A,_=O+r._elapsedNextEstimate*T/v;if(v>=I||_>h.maxFrameTime){h.lastUpdatesDeferred=Math.round(Math.max(0,h.timeBuffer/w-r._timeBufferMargin));break}}g.timing.lastUpdatesPerFrame=v,c.trigger(h,"afterTick",S),h.frameDeltaHistory.length>=100&&(h.lastUpdatesDeferred&&Math.round(h.frameDelta/w)>I?f.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):h.lastUpdatesDeferred&&f.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof h.isFixed<"u"&&f.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(h.deltaMin||h.deltaMax)&&f.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),h.fps!==0&&f.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},r.stop=function(h){r._cancelNextFrame(h)},r._onNextFrame=function(h,g){if(typeof window<"u"&&window.requestAnimationFrame)h.frameRequestId=window.requestAnimationFrame(g);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return h.frameRequestId},r._cancelNextFrame=function(h){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(h.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var d=function(h){for(var g=0,m=h.length,y=0;y<m;y+=1)g+=h[y];return g/m||0}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(8),l=i(0),f=l.deprecated;(function(){r.collides=function(d,h){return c.collides(d,h)},f(r,"collides","SAT.collides  replaced by Collision.collides")})()}),(function(n,s,i){var r={};n.exports=r,i(1);var c=i(0);(function(){r.pathToVertices=function(l,f){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,h,g,m,y,w,v,x,C,D,N=[],I,S,A=0,O=0,T=0;f=f||15;var _=function(U,L,F){var W=F%2===1&&F>1;if(!C||U!=C.x||L!=C.y){C&&W?(I=C.x,S=C.y):(I=0,S=0);var $={x:I+U,y:S+L};(W||!C)&&(C=$),N.push($),O=I+U,T=S+L}},R=function(U){var L=U.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":O=U.x,T=U.y;break;case"H":O=U.x;break;case"V":T=U.y;break}_(O,T,U.pathSegType)}};for(r._svgPathToAbsolute(l),g=l.getTotalLength(),w=[],d=0;d<l.pathSegList.numberOfItems;d+=1)w.push(l.pathSegList.getItem(d));for(v=w.concat();A<g;){if(D=l.getPathSegAtLength(A),y=w[D],y!=x){for(;v.length&&v[0]!=y;)R(v.shift());x=y}switch(y.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":m=l.getPointAtLength(A),_(m.x,m.y,0);break}A+=f}for(d=0,h=v.length;d<h;++d)R(v[d]);return N},r._svgPathToAbsolute=function(l){for(var f,d,h,g,m,y,w=l.pathSegList,v=0,x=0,C=w.numberOfItems,D=0;D<C;++D){var N=w.getItem(D),I=N.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(I))"x"in N&&(v=N.x),"y"in N&&(x=N.y);else switch("x1"in N&&(h=v+N.x1),"x2"in N&&(m=v+N.x2),"y1"in N&&(g=x+N.y1),"y2"in N&&(y=x+N.y2),"x"in N&&(v+=N.x),"y"in N&&(x+=N.y),I){case"m":w.replaceItem(l.createSVGPathSegMovetoAbs(v,x),D);break;case"l":w.replaceItem(l.createSVGPathSegLinetoAbs(v,x),D);break;case"h":w.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(v),D);break;case"v":w.replaceItem(l.createSVGPathSegLinetoVerticalAbs(x),D);break;case"c":w.replaceItem(l.createSVGPathSegCurvetoCubicAbs(v,x,h,g,m,y),D);break;case"s":w.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(v,x,m,y),D);break;case"q":w.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(v,x,h,g),D);break;case"t":w.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(v,x),D);break;case"a":w.replaceItem(l.createSVGPathSegArcAbs(v,x,N.r1,N.r2,N.angle,N.largeArcFlag,N.sweepFlag),D);break;case"z":case"Z":v=f,x=d;break}(I=="M"||I=="m")&&(f=v,d=x)}}})()}),(function(n,s,i){var r={};n.exports=r;var c=i(6);i(0),(function(){r.create=c.create,r.add=c.add,r.remove=c.remove,r.clear=c.clear,r.addComposite=c.addComposite,r.addBody=c.addBody,r.addConstraint=c.addConstraint})()})])})})(K0)),K0.exports}var Nce=Ace();const Pn=rf(Nce),Tce=({onLevelComplete:t,onGameOver:e})=>{const n=ue.useRef(null),s=ue.useRef(null),i=ue.useRef(null),[r,c]=ue.useState(!1),[l,f]=ue.useState({x:0,y:0}),[d,h]=ue.useState({x:0,y:0}),[g,m]=ue.useState(5),[y,w]=ue.useState(0),[v,x]=ue.useState(0),{level:C,coins:D,crystals:N,traps:I}=La(),S={x:150,y:500},A=150;ue.useEffect(()=>{const $=Pn.Engine.create();s.current=$,$.gravity.y=1;const P=Pn.Render.create({element:n.current,engine:$,options:{width:800,height:600,wireframes:!1,background:"#0f172a"}});i.current=P;const k=Pn.Bodies.rectangle(400,590,810,20,{isStatic:!0,render:{fillStyle:"#fde047"}}),V=Pn.Bodies.rectangle(0,300,20,600,{isStatic:!0,render:{fillStyle:"#fde047"}}),K=Pn.Bodies.rectangle(800,300,20,600,{isStatic:!0,render:{fillStyle:"#fde047"}}),G=O(C);return Pn.World.add($.world,[k,V,K,...G]),Pn.Engine.run($),Pn.Render.run(P),Pn.Events.on($,"collisionStart",j=>{j.pairs.forEach(X=>{const{bodyA:Z,bodyB:ee}=X;if(Z.label==="projectile"||ee.label==="projectile"){const ae=Z.label==="projectile"?ee:Z;ae.label&&ae.label.includes("block")&&R(ae)}})}),()=>{Pn.Render.stop(P),Pn.Engine.clear($),P.canvas.remove()}},[C]);const O=$=>{const P=[],G=Math.min(3+Math.floor($/3),6);for(let j=0;j<G;j++){const X=G-j;for(let Z=0;Z<X;Z++){const ee=500+(Z-X/2)*45,ae=400-j*45,oe=T($),be=_(ee,ae,40,oe);P.push(be)}}return P},T=($,P)=>{const k=Math.random();return $<5?k<.8?"wooden":"crystal":$<10?k<.5?"wooden":k<.85?"stone":"crystal":k<.3?"wooden":k<.6?"stone":k<.85?"metal":"crystal"},_=($,P,k,V)=>{const K={wooden:"#8B4513",stone:"#808080",metal:"#4A4A4A",crystal:"#3b82f6",trap:"#ef4444"},G={wooden:.001,stone:.002,metal:.003,crystal:5e-4,trap:.001};return Pn.Bodies.rectangle($,P,k,k,{label:`${V}-block`,render:{fillStyle:K[V]},density:G[V],friction:.8,restitution:.3})},R=$=>{const P=$.label.split("-")[0];if(Math.sqrt($.velocity.x**2+$.velocity.y**2)>2){Pn.World.remove(s.current.world,$);const K={wooden:10,stone:25,metal:50,crystal:100,trap:-20}[P]||0;w(G=>G+K),x(G=>G+1)}},U=$=>{const P=n.current.getBoundingClientRect(),k=$.clientX-P.left,V=$.clientY-P.top;Math.sqrt((k-S.x)**2+(V-S.y)**2)<50&&g>0&&(c(!0),f({x:k,y:V}),h({x:k,y:V}))},L=$=>{if(!r)return;const P=n.current.getBoundingClientRect(),k=$.clientX-P.left,V=$.clientY-P.top,K=k-S.x,G=V-S.y;if(Math.sqrt(K**2+G**2)>A){const X=Math.atan2(G,K);h({x:S.x+Math.cos(X)*A,y:S.y+Math.sin(X)*A})}else h({x:k,y:V})},F=()=>{if(!r)return;c(!1);const $=S.x-d.x,P=S.y-d.y,k=Math.sqrt($**2+P**2)/10;W($*k*.01,P*k*.01),m(V=>V-1),h(S)},W=($,P)=>{const k=Pn.Bodies.circle(S.x,S.y,15,{label:"projectile",render:{fillStyle:"#fde047"},density:.004,restitution:.8});Pn.World.add(s.current.world,k),Pn.Body.setVelocity(k,{x:$,y:P}),setTimeout(()=>{s.current&&s.current.world&&Pn.World.remove(s.current.world,k)},5e3)};return ue.useEffect(()=>{g===0&&v<5?setTimeout(()=>e(),2e3):v>=10&&setTimeout(()=>t(y),2e3)},[g,v]),z.jsxs("div",{className:"relative",children:[z.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center z-10",children:[z.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:z.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Score: ",y]})}),z.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:z.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Level: ",C]})}),z.jsx("div",{className:"bg-game-dark/80 border-2 border-game-yellow rounded-lg px-4 py-2",children:z.jsxs("span",{className:"font-pixel text-sm text-game-yellow",children:["Shots: ",g]})})]}),z.jsx("div",{ref:n,onMouseDown:U,onMouseMove:L,onMouseUp:F,onMouseLeave:()=>c(!1),className:"cursor-crosshair"}),r&&z.jsxs("svg",{className:"absolute top-0 left-0 pointer-events-none",width:"800",height:"600",children:[z.jsx("line",{x1:S.x,y1:S.y,x2:d.x,y2:d.y,stroke:"#fde047",strokeWidth:"2",strokeDasharray:"5,5"}),z.jsx("circle",{cx:d.x,cy:d.y,r:"15",fill:"#fde047",opacity:"0.5"})]})]})},Ice=({onBackHome:t})=>{const{level:e,xp:n,coins:s,crystals:i,resetGame:r,walletAddress:c,mintQuestBadge:l}=La(),[f,d]=ue.useState(!1),[h,g]=ue.useState(!1),[m,y]=ue.useState(!1),[w,v]=ue.useState(!1),[x,C]=ue.useState(1),[D,N]=ue.useState(0),I=U=>{N(U),y(!0);const L=n+U,F=e*500;L>=F&&setTimeout(()=>{C(e+1),d(!0)},2e3)},S=()=>{v(!0)},A=()=>{g(!0)},O=async()=>{try{(await cR(e)).success&&l(e)}catch(U){console.error("Error minting Quest Badge:",U)}},T=()=>{window.confirm("Are you sure you want to reset your progress? This cannot be undone.")&&r()},_=()=>{y(!1),window.location.reload()},R=()=>{v(!1),window.location.reload()};return z.jsxs("div",{className:"min-h-screen bg-game-dark",children:[z.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[z.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4 mb-4",children:[z.jsx(Ae.h1,{className:"font-pixel text-2xl md:text-3xl text-game-yellow",animate:{opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0},children:" BLOCK QUEST"}),z.jsxs("div",{className:"flex items-center gap-3",children:[z.jsx(IE,{}),z.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:T,className:"bg-orange-600 text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-orange-700 transition-all flex items-center gap-2",children:[z.jsx(eD,{}),"Reset"]}),z.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-game-blue text-white px-4 py-2 rounded-lg font-pixel text-xs hover:bg-blue-700 transition-all flex items-center gap-2",children:[z.jsx(J6,{}),"Home"]})]})]}),z.jsx(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-4 mb-4",children:z.jsxs("p",{className:"font-retro text-center text-white",children:[" ",z.jsx("strong",{children:"Drag and release"})," the slingshot to launch projectiles!  Destroy blocks to earn points and level up!  Mint NFTs to commemorate your achievements!"]})}),z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[z.jsx("div",{className:"lg:col-span-3",children:z.jsx(Ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg overflow-hidden",children:z.jsx(Tce,{onLevelComplete:I,onGameOver:S})})}),z.jsx(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"flex justify-center lg:justify-start",children:z.jsx(lR,{onMintBadge:A})})]})]}),z.jsx(Gu,{children:m&&z.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:z.jsxs(Ae.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",duration:.8},className:"bg-gradient-to-br from-game-dark to-green-900 border-4 border-game-yellow rounded-lg p-8 max-w-md w-full text-center",children:[z.jsx(yx,{className:"text-8xl text-game-yellow mx-auto mb-4"}),z.jsx("h2",{className:"font-pixel text-3xl text-game-yellow mb-4",children:"LEVEL COMPLETE!"}),z.jsxs("p",{className:"font-retro text-2xl text-white mb-2",children:["Score: ",D]}),z.jsx("p",{className:"font-retro text-lg text-gray-300 mb-6",children:"Amazing work! Ready for the next challenge?"}),z.jsxs("div",{className:"flex gap-4",children:[z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Home"}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:"Next Level"})]})]})})}),z.jsx(Gu,{children:w&&z.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:z.jsxs(Ae.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"bg-gradient-to-br from-game-dark to-red-900 border-4 border-red-600 rounded-lg p-8 max-w-md w-full text-center",children:[z.jsx("h2",{className:"font-pixel text-3xl text-red-500 mb-4",children:"GAME OVER"}),z.jsx("p",{className:"font-retro text-lg text-gray-300 mb-6",children:"Out of shots! Try again?"}),z.jsxs("div",{className:"flex gap-4",children:[z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex-1 bg-gray-600 text-white px-6 py-3 rounded-lg font-pixel text-xs hover:bg-gray-700 transition-all",children:"Home"}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,className:"flex-1 bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel text-xs hover:box-shadow-neon transition-all",children:"Retry"})]})]})})}),z.jsx(uR,{isOpen:f,level:x,onClose:()=>d(!1),onMintBadge:A}),z.jsx(DE,{isOpen:h,onClose:()=>g(!1),type:"badge",level:e,onConfirm:O})]})},Yv=5,Xv=6,P2=["REACT","STACK","BLOCK","CHAIN","QUEST","PIXEL","FRAME","MOUNT","LIGHT","SOUND","WORLD","POWER","MAGIC","STONE","FLAME","WATER","EARTH","STORM","FROST","BLADE","SWORD","SHIELD","ARMOR","CROWN","JEWEL","PEARL","AMBER","CORAL","IVORY","ONYX","TOPAZ","BERYL"],Dce=[...P2,"HELLO","WORLD","GAMES","PLAYS","WORDS"],Oce=({onGameEnd:t,onDeposit:e})=>{const[n,s]=ue.useState(""),[i,r]=ue.useState([]),[c,l]=ue.useState(""),[f,d]=ue.useState("playing"),[h,g]=ue.useState(-1),[m,y]=ue.useState(""),[w,v]=ue.useState(!1);ue.useEffect(()=>{const O=P2[Math.floor(Math.random()*P2.length)];s(O)},[]),ue.useEffect(()=>{const O=T=>{f==="playing"&&(T.key==="Enter"?C("ENTER"):T.key==="Backspace"?C("BACKSPACE"):/^[a-zA-Z]$/.test(T.key)&&C(T.key.toUpperCase()))};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[f,c,i,n]);const x=(O,T,_)=>{if(!_)return"bg-gray-700 border-gray-600";const R=n.split(""),U=_.split("");if(U[T]===R[T])return"bg-green-600 border-green-500";if(R.includes(U[T])){U.filter((W,$)=>W===R[$]);const L=R.filter(W=>W===U[T]).length;if(U.slice(0,T).filter(W=>W===U[T]).length<L)return"bg-yellow-600 border-yellow-500"}return"bg-gray-800 border-gray-700"},C=O=>{if(f==="playing")if(O==="ENTER"){if(c.length!==Yv){D("Not enough letters");return}if(!Dce.includes(c)){D("Not in word list"),g(i.length),setTimeout(()=>g(-1),500);return}const T=[...i,c];if(r(T),l(""),c===n){d("won");const _=N(T.length);D(`You won! ${_}x multiplier`),t&&t("won",_);return}if(T.length>=Xv){d("lost"),D(`Game Over! Word was ${n}`),t&&t("lost",0);return}}else O==="BACKSPACE"?l(T=>T.slice(0,-1)):c.length<Yv&&/^[A-Z]$/.test(O)&&l(T=>T+O)},D=O=>{y(O),setTimeout(()=>y(""),2e3)},N=O=>Math.max(1,6-O),I=()=>{const O=i.length+1;return N(O)},A=(()=>{const O={correct:new Set,present:new Set,absent:new Set};return i.forEach(T=>{T.split("").forEach((_,R)=>{n[R]===_?O.correct.add(_):n.includes(_)?O.present.add(_):O.absent.add(_)})}),O})();return z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-game-dark p-4",children:[z.jsxs("div",{className:"w-full max-w-lg mb-6",children:[z.jsx("h1",{className:"font-pixel text-3xl text-game-yellow text-center mb-2",children:"Word Quest"}),z.jsxs("div",{className:"flex justify-between items-center text-white font-retro mb-3",children:[z.jsxs("div",{className:"text-sm",children:["Attempt: ",i.length+1,"/",Xv]}),z.jsxs("div",{className:"text-lg font-pixel text-game-yellow",children:[I(),"x Multiplier"]})]}),z.jsxs("div",{className:"flex justify-center items-center gap-3",children:[z.jsx("button",{onClick:()=>v(!w),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-pixel text-sm transition-colors",children:w?"Hide Hint":"Show Hint"}),w&&n&&z.jsx(Ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-blue-600/20 border-2 border-blue-500 rounded px-4 py-2",children:z.jsxs("span",{className:"font-pixel text-blue-300 text-sm",children:["First letter: ",z.jsx("span",{className:"text-game-yellow text-lg",children:n[0]})]})})]})]}),z.jsx(Gu,{children:m&&z.jsx(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-20 bg-gray-800 text-white px-6 py-3 rounded-lg font-retro text-sm border-2 border-game-yellow",children:m})}),z.jsx("div",{className:"mb-8",children:Array.from({length:Xv}).map((O,T)=>{const _=i[T],R=T===i.length,U=R?c.padEnd(Yv," "):_||"     ";return z.jsx(Ae.div,{className:`flex gap-2 mb-2 ${h===T?"animate-shake":""}`,animate:h===T?{x:[-10,10,-10,10,0]}:{},transition:{duration:.5},children:U.split("").map((L,F)=>{const W=_?x(L,F,_):"bg-gray-700 border-gray-600",$=L.trim()!=="";return z.jsx(Ae.div,{initial:_&&T===i.length-1?{rotateX:0}:!1,animate:_&&T===i.length-1?{rotateX:360}:{},transition:{delay:F*.1,duration:.5},className:`
                      w-14 h-14 border-2 rounded flex items-center justify-center
                      font-pixel text-2xl text-white transition-all duration-300
                      ${W}
                      ${R&&$?"border-game-yellow scale-105":""}
                    `,children:L},F)})},T)})}),z.jsx("div",{className:"w-full max-w-lg",children:z.jsx("div",{className:"flex flex-col gap-2",children:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["ENTER","Z","X","C","V","B","N","M","BACKSPACE"]].map((O,T)=>z.jsx("div",{className:"flex justify-center gap-1",children:O.map(_=>{let R="bg-gray-600 hover:bg-gray-500";A.correct.has(_)?R="bg-green-600 hover:bg-green-500":A.present.has(_)?R="bg-yellow-600 hover:bg-yellow-500":A.absent.has(_)&&(R="bg-gray-800 hover:bg-gray-700");const U=_==="ENTER"||_==="BACKSPACE";return z.jsx(Ae.button,{whileTap:{scale:.95},onClick:()=>C(_),disabled:f!=="playing",className:`
                      ${U?"px-3 text-xs":"w-9"} h-12
                      ${R}
                      text-white font-pixel rounded
                      transition-colors duration-200
                      disabled:opacity-50 disabled:cursor-not-allowed
                    `,children:_==="BACKSPACE"?"":_},_)})},T))})}),z.jsx("div",{className:"mt-4 text-gray-500 font-retro text-xs text-center",children:" PC Keyboard or  Touch Keyboard supported"}),f!=="playing"&&z.jsx(Ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mt-6 flex gap-4",children:z.jsx("button",{onClick:()=>window.location.reload(),className:"bg-game-yellow text-game-dark px-6 py-3 rounded-lg font-pixel hover:scale-105 transition-transform",children:"Play Again"})})]})},_ce=({onBackHome:t})=>{const[e,n]=ue.useState(!1),[s,i]=ue.useState(10),[r,c]=ue.useState(null),[l,f]=ue.useState(null),[d,h]=ue.useState(!1),[g,m]=ue.useState(!1),[y,w]=ue.useState(""),{walletAddress:v}=La(),x=()=>{n(!0),c(null)},C=async(I,S)=>{c({status:I,multiplier:S,reward:s*S}),l!==null&&I==="won"&&w("Demo mode: Game resolved! (No blockchain transaction)")},D=async()=>{if(!v){alert("Please connect your wallet first");return}h(!0),w("Starting game in demo mode...");try{await new Promise(I=>setTimeout(I,1e3)),w("Demo mode: Game starting..."),f(Date.now()),setTimeout(()=>{x(),w("")},500)}catch(I){console.error("Error starting game:",I),w("Failed to start game. Please try again."),setTimeout(()=>w(""),3e3)}finally{h(!1)}},N=async()=>{if(l){m(!0),w("Demo mode: Simulating reward claim...");try{await new Promise(I=>setTimeout(I,1e3)),w("Demo mode: Reward claimed! (No actual STX transferred)"),setTimeout(()=>{w(""),n(!1),c(null),f(null)},2e3)}catch(I){console.error("Error claiming reward:",I),w("Claim failed. Please try again."),setTimeout(()=>w(""),3e3)}finally{m(!1)}}};return e?z.jsxs("div",{className:"relative",children:[z.jsxs("button",{onClick:t,className:"absolute top-4 left-4 z-10 flex items-center gap-2 text-white hover:text-game-yellow transition-colors font-retro",children:[z.jsx(I4,{}),"Back to Home"]}),z.jsx(Oce,{onGameEnd:C,onDeposit:D}),r&&z.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:z.jsxs(Ae.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gray-800 border-4 border-game-yellow rounded-lg p-8 max-w-md",children:[z.jsx("h2",{className:"font-pixel text-3xl text-center mb-6",children:r.status==="won"?z.jsx("span",{className:"text-green-400",children:"You Won! "}):z.jsx("span",{className:"text-red-400",children:"Game Over"})}),r.status==="won"&&z.jsxs("div",{className:"text-center mb-6",children:[z.jsxs("div",{className:"font-pixel text-5xl text-game-yellow mb-2",children:[r.multiplier,"x"]}),z.jsxs("div",{className:"font-retro text-gray-300 mb-4",children:["Reward: ",r.reward," STX"]}),y&&z.jsx("div",{className:"bg-blue-600/20 border border-blue-500 rounded p-3 mb-4",children:z.jsx("p",{className:"font-retro text-sm text-blue-300",children:y})})]}),z.jsxs("div",{className:"flex gap-4",children:[r.status==="won"&&z.jsx("button",{onClick:N,disabled:g,className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-pixel hover:bg-green-700 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:g?"Claiming...":"Claim Reward"}),z.jsx("button",{onClick:()=>{n(!1),c(null),f(null),w("")},className:"flex-1 bg-game-yellow text-game-dark py-3 rounded-lg font-pixel hover:scale-105 transition-transform",children:"Play Again"}),z.jsx("button",{onClick:t,className:"flex-1 bg-gray-700 text-white py-3 rounded-lg font-pixel hover:bg-gray-600 transition-colors",children:"Home"})]})]})})]}):z.jsxs("div",{className:"min-h-screen bg-game-dark flex flex-col items-center justify-center p-8",children:[z.jsxs("button",{onClick:t,className:"absolute top-4 left-4 flex items-center gap-2 text-white hover:text-game-yellow transition-colors font-retro",children:[z.jsx(I4,{}),"Back to Home"]}),z.jsxs(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"absolute top-4 right-4 bg-blue-600/20 border-2 border-blue-500 rounded-lg px-4 py-2",children:[z.jsx("p",{className:"font-pixel text-blue-300 text-sm",children:" DEMO MODE"}),z.jsx("p",{className:"font-retro text-blue-400 text-xs",children:"No real STX transactions"})]}),z.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl w-full",children:[z.jsx("h1",{className:"font-pixel text-4xl text-game-yellow text-center mb-4",children:"Word Quest"}),z.jsxs("div",{className:"bg-blue-600/10 border border-blue-500 rounded-lg p-4 mb-6 text-center",children:[z.jsx("p",{className:"font-pixel text-blue-300 text-sm mb-1",children:" Demo Mode Active"}),z.jsx("p",{className:"font-retro text-blue-400 text-xs",children:"Smart contract not yet deployed. Play for free without real STX transactions."})]}),z.jsxs("div",{className:"bg-game-blue/10 border-2 border-game-yellow rounded-lg p-8 mb-8",children:[z.jsx("h2",{className:"font-pixel text-2xl text-white mb-4",children:"How to Play"}),z.jsxs("ul",{className:"font-retro text-gray-300 space-y-3",children:[z.jsx("li",{children:" Guess the 5-letter word in 6 attempts"}),z.jsx("li",{children:" Green = correct letter in correct position"}),z.jsx("li",{children:" Yellow = correct letter in wrong position"}),z.jsx("li",{children:" Gray = letter not in word"}),z.jsx("li",{children:" Your multiplier decreases with each wrong guess"}),z.jsx("li",{children:" Win faster for bigger rewards!"})]})]}),z.jsxs("div",{className:"bg-gray-800/50 border-2 border-gray-700 rounded-lg p-6 mb-8",children:[z.jsx("h3",{className:"font-pixel text-xl text-game-yellow mb-4 text-center",children:"Reward Multipliers"}),z.jsxs("div",{className:"grid grid-cols-3 gap-4 font-retro text-center",children:[z.jsxs("div",{children:[z.jsx("div",{className:"text-green-400 text-2xl font-pixel",children:"5x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"1 attempt"})]}),z.jsxs("div",{children:[z.jsx("div",{className:"text-green-400 text-2xl font-pixel",children:"4x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"2 attempts"})]}),z.jsxs("div",{children:[z.jsx("div",{className:"text-yellow-400 text-2xl font-pixel",children:"3x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"3 attempts"})]}),z.jsxs("div",{children:[z.jsx("div",{className:"text-yellow-400 text-2xl font-pixel",children:"2x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"4 attempts"})]}),z.jsxs("div",{children:[z.jsx("div",{className:"text-orange-400 text-2xl font-pixel",children:"1x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"5 attempts"})]}),z.jsxs("div",{children:[z.jsx("div",{className:"text-orange-400 text-2xl font-pixel",children:"1x"}),z.jsx("div",{className:"text-gray-400 text-sm",children:"6 attempts"})]})]})]}),z.jsxs("div",{className:"bg-gray-800/50 border-2 border-game-yellow rounded-lg p-6 mb-6",children:[z.jsxs("h3",{className:"font-pixel text-xl text-white mb-4 flex items-center gap-2",children:[z.jsx(_m,{className:"text-game-yellow"}),"Stake Amount"]}),z.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[z.jsx("input",{type:"number",value:s,onChange:I=>i(Math.max(1,parseInt(I.target.value)||1)),min:"1",className:"flex-1 bg-gray-700 text-white px-4 py-3 rounded-lg font-retro text-lg border-2 border-gray-600 focus:border-game-yellow outline-none"}),z.jsx("span",{className:"font-pixel text-white text-lg",children:"STX"})]}),z.jsxs("div",{className:"font-retro text-gray-400 text-sm",children:["Potential reward: ",s," - ",s*5," STX"]})]}),y&&z.jsx(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-blue-600/20 border-2 border-blue-500 rounded-lg p-4 mb-4 text-center",children:z.jsx("p",{className:"font-retro text-blue-300",children:y})}),z.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,disabled:!v||d,className:`w-full py-4 rounded-lg font-pixel text-xl transition-all ${v&&!d?"bg-game-yellow text-game-dark hover:shadow-lg hover:shadow-game-yellow/50":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:d?"Starting...":v?"Start Game (Demo)":"Connect Wallet First"}),z.jsx("p",{className:"text-center font-retro text-gray-500 text-xs mt-2",children:"* Demo mode: No actual deposit required"})]})]})};function Mce(){const[t,e]=ue.useState("home"),[n,s]=ue.useState("word"),[i,r]=ue.useState(!1),{walletAddress:c,mintQuestPass:l}=La(),f=(m="word")=>{s(m),e("game")},d=()=>{e("home")},h=()=>{r(!0)},g=async()=>{try{(await bce()).success&&l()}catch(m){console.error("Error minting Quest Pass:",m)}};return z.jsxs(z.Fragment,{children:[t==="home"?z.jsx(xce,{onStartGame:f,onMintPass:h}):n==="word"?z.jsx(_ce,{onBackHome:d}):n==="physics"?z.jsx(Ice,{onBackHome:d}):z.jsx(Sce,{onBackHome:d}),z.jsx(DE,{isOpen:i,onClose:()=>r(!1),type:"pass",onConfirm:g})]})}function Rce(){return z.jsx(E$,{children:z.jsx(Mce,{})})}x$.createRoot(document.getElementById("root")).render(z.jsx(Ta.StrictMode,{children:z.jsx(Rce,{})}));export{UW as $,Le as A,Rr as B,ve as C,Zn as D,It as E,noe as F,Me as G,Zs as H,Yle as I,FM as J,_2 as K,nf as L,st as M,$W as N,he as O,Qs as P,vle as Q,ze as R,me as S,Gs as T,vT as U,TO as V,O2 as W,Dh as X,DW as Y,NO as Z,Sh as _,Xle as a,ble as a0,wle as a1,pm as a2,Ele as a3,xle as a4,W0 as b,Re as c,xe as d,Qle as e,pe as f,Uce as g,sB as h,Vu as i,V0 as j,DM as k,q as l,nr as m,$r as n,yt as o,rf as p,Kle as q,$ce as r,Iu as s,Cn as t,Zle as u,Rt as v,ni as w,Gle as x,ts as y,Bn as z};
